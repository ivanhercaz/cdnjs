"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray")),_react=_interopRequireDefault(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_debounce=_interopRequireDefault(require("../utils/debounce")),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_isMuiElement=_interopRequireDefault(require("../utils/isMuiElement")),styles={root:{boxSizing:"border-box",flexShrink:0},tile:{position:"relative",display:"block",height:"100%",overflow:"hidden"},imgFullHeight:{height:"100%",transform:"translateX(-50%)",position:"relative",left:"50%"},imgFullWidth:{width:"100%",position:"relative",transform:"translateY(-50%)",top:"50%"}};exports.styles=styles;var fit=function(e,t){var r,i,l,s;e&&e.complete&&(e.width/e.height>e.parentElement.offsetWidth/e.parentElement.offsetHeight?((r=e.classList).remove.apply(r,(0,_toConsumableArray2.default)(t.imgFullWidth.split(" "))),(i=e.classList).add.apply(i,(0,_toConsumableArray2.default)(t.imgFullHeight.split(" ")))):((l=e.classList).remove.apply(l,(0,_toConsumableArray2.default)(t.imgFullHeight.split(" "))),(s=e.classList).add.apply(s,(0,_toConsumableArray2.default)(t.imgFullWidth.split(" ")))))};function ensureImageCover(e,t){e&&(e.complete?fit(e,t):e.addEventListener("load",function(){fit(e,t)}))}var GridListTile=_react.default.forwardRef(function(e,t){var r=e.children,i=e.classes,l=e.className,s=(e.cols,e.component),a=void 0===s?"li":s,u=(e.rows,(0,_objectWithoutProperties2.default)(e,["children","classes","className","cols","component","rows"])),o=_react.default.useRef(null);return _react.default.useEffect(function(){ensureImageCover(o.current,i)}),_react.default.useEffect(function(){var e=(0,_debounce.default)(function(){fit(o.current,i)});return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}},[i]),_react.default.createElement(a,(0,_extends2.default)({className:(0,_clsx.default)(i.root,l),ref:t},u),_react.default.createElement("div",{className:i.tile},_react.default.Children.map(r,function(e){return _react.default.isValidElement(e)?"img"===e.type||(0,_isMuiElement.default)(e,["Image"])?_react.default.cloneElement(e,{ref:o}):e:null})))});"production"!==process.env.NODE_ENV&&(GridListTile.propTypes={children:_propTypes.default.node,classes:_propTypes.default.object.isRequired,className:_propTypes.default.string,cols:_propTypes.default.number,component:_propTypes.default.elementType,rows:_propTypes.default.number});var _default=(0,_withStyles.default)(styles,{name:"MuiGridListTile"})(GridListTile);exports.default=_default;