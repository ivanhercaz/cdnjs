"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_react=_interopRequireDefault(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_reactDom=_interopRequireDefault(require("react-dom")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_useForkRef=_interopRequireDefault(require("../utils/useForkRef")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_NoSsr=_interopRequireDefault(require("../NoSsr")),_focusVisible=require("../utils/focusVisible"),_TouchRipple=_interopRequireDefault(require("./TouchRipple")),styles={root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"}},disabled:{},focusVisible:{}};exports.styles=styles;var ButtonBase=_react.default.forwardRef(function(e,t){var o=e.action,r=e.buttonRef,u=e.centerRipple,n=void 0!==u&&u,s=e.children,l=e.classes,a=e.className,p=e.component,i=void 0===p?"button":p,c=e.disabled,f=void 0!==c&&c,d=e.disableRipple,_=void 0!==d&&d,b=e.disableTouchRipple,y=void 0!==b&&b,T=e.focusRipple,v=void 0!==T&&T,R=e.focusVisibleClassName,h=e.onBlur,D=e.onClick,m=e.onFocus,q=e.onFocusVisible,g=e.onKeyDown,k=e.onKeyUp,M=e.onMouseDown,x=e.onMouseLeave,E=e.onMouseUp,C=e.onTouchEnd,V=e.onTouchMove,F=e.onTouchStart,N=e.onDragLeave,w=e.tabIndex,B=void 0===w?0:w,S=e.TouchRippleProps,P=e.type,K=void 0===P?"button":P,L=(0,_objectWithoutProperties2.default)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),U=_react.default.useRef(null);var j=_react.default.useRef(null),I=_react.default.useState(!1),O=I[0],W=I[1];f&&O&&W(!1);var A=(0,_focusVisible.useIsFocusVisible)(),z=A.isFocusVisible,H=A.onBlurVisible,$=A.ref;function G(t,o,e){var r=2<arguments.length&&void 0!==e?e:y;return(0,_useEventCallback.default)(function(e){return o&&o(e),!r&&j.current&&j.current[t](e),!0})}_react.default.useImperativeHandle(o,function(){return{focusVisible:function(){W(!0),U.current.focus()}}},[]),_react.default.useEffect(function(){O&&v&&!_&&j.current.pulsate()},[_,v,O]);function J(){var e=_reactDom.default.findDOMNode(U.current);return i&&"button"!==i&&!("A"===e.tagName&&e.href)}var Q=G("start",M),X=G("stop",N),Y=G("stop",E),Z=G("stop",function(e){O&&e.preventDefault(),x&&x(e)}),ee=G("start",F),te=G("stop",C),oe=G("stop",V),re=G("stop",function(e){O&&(H(e),W(!1)),h&&h(e)},!1),ue=(0,_useEventCallback.default)(function(e){f||(U.current||(U.current=e.currentTarget),z(e)&&(W(!0),q&&q(e)),m&&m(e))}),ne=_react.default.useRef(!1),se=(0,_useEventCallback.default)(function(e){v&&!ne.current&&O&&j.current&&" "===e.key&&(ne.current=!0,e.persist(),j.current.stop(e,function(){j.current.start(e)})),g&&g(e),e.target===e.currentTarget&&J()&&"Enter"===e.key&&(e.preventDefault(),D&&D(e))}),le=(0,_useEventCallback.default)(function(e){v&&" "===e.key&&j.current&&O&&!e.defaultPrevented&&(ne.current=!1,e.persist(),j.current.stop(e,function(){j.current.pulsate(e)})),k&&k(e),e.target===e.currentTarget&&J()&&" "===e.key&&!e.defaultPrevented&&(e.preventDefault(),D&&D(e))}),ae=i;"button"===ae&&L.href&&(ae="a");var pe={};"button"===ae?(pe.type=K,pe.disabled=f):("a"===ae&&L.href||(pe.role="button"),pe["aria-disabled"]=f);var ie=(0,_useForkRef.default)(r,t),ce=(0,_useForkRef.default)($,U),fe=(0,_useForkRef.default)(ie,ce);return _react.default.createElement(ae,(0,_extends2.default)({className:(0,_clsx.default)(l.root,a,O&&[l.focusVisible,R],f&&l.disabled),onBlur:re,onClick:D,onFocus:ue,onKeyDown:se,onKeyUp:le,onMouseDown:Q,onMouseLeave:Z,onMouseUp:Y,onDragLeave:X,onTouchEnd:te,onTouchMove:oe,onTouchStart:ee,ref:fe,tabIndex:f?-1:B},pe,L),s,_||f?null:_react.default.createElement(_NoSsr.default,null,_react.default.createElement(_TouchRipple.default,(0,_extends2.default)({ref:j,center:n},S))))});"production"!==process.env.NODE_ENV&&(ButtonBase.propTypes={action:_utils.refType,buttonRef:_utils.refType,centerRipple:_propTypes.default.bool,children:_propTypes.default.node,classes:_propTypes.default.object.isRequired,className:_propTypes.default.string,component:_utils.elementTypeAcceptingRef,disabled:_propTypes.default.bool,disableRipple:_propTypes.default.bool,disableTouchRipple:_propTypes.default.bool,focusRipple:_propTypes.default.bool,focusVisibleClassName:_propTypes.default.string,onBlur:_propTypes.default.func,onClick:_propTypes.default.func,onDragLeave:_propTypes.default.func,onFocus:_propTypes.default.func,onFocusVisible:_propTypes.default.func,onKeyDown:_propTypes.default.func,onKeyUp:_propTypes.default.func,onMouseDown:_propTypes.default.func,onMouseLeave:_propTypes.default.func,onMouseUp:_propTypes.default.func,onTouchEnd:_propTypes.default.func,onTouchMove:_propTypes.default.func,onTouchStart:_propTypes.default.func,role:_propTypes.default.string,tabIndex:_propTypes.default.oneOfType([_propTypes.default.number,_propTypes.default.string]),TouchRippleProps:_propTypes.default.object,type:_propTypes.default.oneOf(["submit","reset","button"])});var _default=(0,_withStyles.default)(styles,{name:"MuiButtonBase"})(ButtonBase);exports.default=_default;