"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_react=_interopRequireDefault(require("react")),_reactIs=require("react-is"),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_debounce=_interopRequireDefault(require("../utils/debounce")),_ownerWindow=_interopRequireDefault(require("../utils/ownerWindow")),_scrollLeft=require("../utils/scrollLeft"),_animate=_interopRequireDefault(require("../internal/animate")),_ScrollbarSize=_interopRequireDefault(require("./ScrollbarSize")),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_TabIndicator=_interopRequireDefault(require("./TabIndicator")),_TabScrollButton=_interopRequireDefault(require("./TabScrollButton")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_useTheme=_interopRequireDefault(require("../styles/useTheme")),styles=function(e){return{root:{overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},vertical:{flexDirection:"column"},flexContainer:{display:"flex"},flexContainerVertical:{flexDirection:"column"},centered:{justifyContent:"center"},scroller:{position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},fixed:{overflowX:"hidden",width:"100%"},scrollable:{overflowX:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},scrollButtons:{},scrollButtonsDesktop:(0,_defineProperty2.default)({},e.breakpoints.down("xs"),{display:"none"}),indicator:{}}};exports.styles=styles;var Tabs=_react.default.forwardRef(function(e,t){var r=e.action,l=e.centered,o=void 0!==l&&l,a=e.children,n=e.classes,i=e.className,u=e.component,s=void 0===u?"div":u,c=e.indicatorColor,d=void 0===c?"secondary":c,f=e.onChange,p=e.orientation,_=void 0===p?"horizontal":p,v=e.ScrollButtonComponent,b=void 0===v?_TabScrollButton.default:v,h=e.scrollButtons,m=void 0===h?"auto":h,y=e.TabIndicatorProps,T=void 0===y?{}:y,q=e.textColor,x=void 0===q?"inherit":q,C=e.value,g=e.variant,E=void 0===g?"standard":g,S=(0,_objectWithoutProperties2.default)(e,["action","centered","children","classes","className","component","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","TabIndicatorProps","textColor","value","variant"]),N=(0,_useTheme.default)(),D="scrollable"===E,w="rtl"===N.direction,B="vertical"===_,R=B?"scrollTop":"scrollLeft",k=B?"top":"left",W=B?"bottom":"right",L=B?"clientHeight":"clientWidth",M=B?"height":"width";"production"!==process.env.NODE_ENV&&o&&D&&console.error('Material-UI: you can not use the `centered={true}` and `variant="scrollable"` properties at the same time on a `Tabs` component.');function z(){var e,t,r=ee.current;if(r){var l=r.getBoundingClientRect();e={clientWidth:r.clientWidth,scrollLeft:r.scrollLeft,scrollTop:r.scrollTop,scrollLeftNormalized:(0,_scrollLeft.getNormalizedScrollLeft)(r,N.direction),scrollWidth:r.scrollWidth,top:l.top,bottom:l.bottom,left:l.left,right:l.right}}if(r&&!1!==C){var o=te.current.children;if(0<o.length){var a=o[$.get(C)];"production"!==process.env.NODE_ENV&&(a||console.error(["Material-UI: the value provided `".concat(C,"` to the Tabs component is invalid."),"None of the Tabs children have this value.",$.keys?"You can provide one of the following values: ".concat(Array.from($.keys()).join(", "),"."):null].join("\n"))),t=a?a.getBoundingClientRect():null}}return{tabsMeta:e,tabMeta:t}}function I(e){(0,_animate.default)(R,ee.current,e)}function P(e){var t=ee.current[R];B?t+=e:(t+=e*(w?-1:1),t*=w&&"reverse"===(0,_scrollLeft.detectScrollType)()?-1:1),I(t)}function O(){P(-ee.current[L])}function j(){P(ee.current[L])}var V=_react.default.useState(!1),H=V[0],U=V[1],F=_react.default.useState({}),X=F[0],A=F[1],Y=_react.default.useState({start:!1,end:!1}),G=Y[0],J=Y[1],K=_react.default.useState({overflow:"hidden",marginBottom:null}),Q=K[0],Z=K[1],$=new Map,ee=_react.default.useRef(null),te=_react.default.useRef(null),re=(0,_useEventCallback.default)(function(){var e,t=z(),r=t.tabsMeta,l=t.tabMeta,o=0;if(l&&r)if(B)o=l.top-r.top+r.scrollTop;else{var a=w?r.scrollLeftNormalized+r.clientWidth-r.scrollWidth:r.scrollLeft;o=l.left-r.left+a}var n=(e={},(0,_defineProperty2.default)(e,k,o),(0,_defineProperty2.default)(e,M,l?l[M]:0),e);if(isNaN(X[k])||isNaN(X[M]))A(n);else{var i=Math.abs(X[k]-n[k]),u=Math.abs(X[M]-n[M]);(1<=i||1<=u)&&A(n)}}),le=_react.default.useCallback(function(e){Z({overflow:null,marginBottom:-e})},[]),oe=(0,_useEventCallback.default)(function(){var e=z(),t=e.tabsMeta,r=e.tabMeta;if(r&&t)if(r[k]<t[k]){var l=t[R]+(r[k]-t[k]);I(l)}else if(r[W]>t[W]){var o=t[R]+(r[W]-t[W]);I(o)}}),ae=(0,_useEventCallback.default)(function(){if(D&&"off"!==m){var e,t,r=ee.current,l=r.scrollTop,o=r.scrollHeight,a=r.clientHeight,n=r.scrollWidth,i=r.clientWidth;if(B)e=1<l,t=l<o-a-1;else{var u=(0,_scrollLeft.getNormalizedScrollLeft)(ee.current,N.direction);e=w?u<n-i-1:1<u,t=w?1<u:u<n-i-1}e===G.start&&t===G.end||J({start:e,end:t})}});_react.default.useEffect(function(){var e=(0,_debounce.default)(function(){re(),ae()}),t=(0,_ownerWindow.default)(ee.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}},[re,ae]);var ne=_react.default.useCallback((0,_debounce.default)(function(){ae()}));_react.default.useEffect(function(){return function(){ne.clear()}},[ne]),_react.default.useEffect(function(){U(!0)},[]),_react.default.useEffect(function(){re(),ae()}),_react.default.useEffect(function(){oe()},[oe,X]),_react.default.useImperativeHandle(r,function(){return{updateIndicator:re,updateScrollButtons:ae}},[re,ae]);var ie=_react.default.createElement(_TabIndicator.default,(0,_extends2.default)({className:n.indicator,orientation:_,color:d},T,{style:(0,_extends2.default)({},X,{},T.style)})),ue=0,se=_react.default.Children.map(a,function(e){if(!_react.default.isValidElement(e))return null;"production"!==process.env.NODE_ENV&&(0,_reactIs.isFragment)(e)&&console.error(["Material-UI: the Tabs component doesn't accept a Fragment as a child.","Consider providing an array instead."].join("\n"));var t=void 0===e.props.value?ue:e.props.value;$.set(t,ue);var r=t===C;return ue+=1,_react.default.cloneElement(e,{fullWidth:"fullWidth"===E,indicator:r&&!H&&ie,selected:r,onChange:f,textColor:x,value:t})}),ce=function(){var e={};e.scrollbarSizeListener=D?_react.default.createElement(_ScrollbarSize.default,{className:n.scrollable,onChange:le}):null;var t=G.start||G.end,r=D&&("auto"===m&&t||"desktop"===m||"on"===m);return e.scrollButtonStart=r?_react.default.createElement(b,{orientation:_,direction:w?"right":"left",onClick:O,visible:G.start,className:(0,_clsx.default)(n.scrollButtons,"on"!==m&&n.scrollButtonsDesktop)}):null,e.scrollButtonEnd=r?_react.default.createElement(b,{orientation:_,direction:w?"left":"right",onClick:j,visible:G.end,className:(0,_clsx.default)(n.scrollButtons,"on"!==m&&n.scrollButtonsDesktop)}):null,e}();return _react.default.createElement(s,(0,_extends2.default)({className:(0,_clsx.default)(n.root,i,B&&n.vertical),ref:t},S),ce.scrollButtonStart,ce.scrollbarSizeListener,_react.default.createElement("div",{className:(0,_clsx.default)(n.scroller,D?n.scrollable:n.fixed),style:Q,ref:ee,onScroll:ne},_react.default.createElement("div",{className:(0,_clsx.default)(n.flexContainer,B&&n.flexContainerVertical,o&&!D&&n.centered),ref:te,role:"tablist"},se),H&&ie),ce.scrollButtonEnd)});"production"!==process.env.NODE_ENV&&(Tabs.propTypes={action:_utils.refType,centered:_propTypes.default.bool,children:_propTypes.default.node,classes:_propTypes.default.object.isRequired,className:_propTypes.default.string,component:_propTypes.default.elementType,indicatorColor:_propTypes.default.oneOf(["secondary","primary"]),onChange:_propTypes.default.func,orientation:_propTypes.default.oneOf(["horizontal","vertical"]),ScrollButtonComponent:_propTypes.default.elementType,scrollButtons:_propTypes.default.oneOf(["auto","desktop","on","off"]),TabIndicatorProps:_propTypes.default.object,textColor:_propTypes.default.oneOf(["secondary","primary","inherit"]),value:_propTypes.default.any,variant:_propTypes.default.oneOf(["standard","scrollable","fullWidth"])});var _default=(0,_withStyles.default)(styles,{name:"MuiTabs"})(Tabs);exports.default=_default;