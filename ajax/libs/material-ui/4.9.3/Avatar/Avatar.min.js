"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_react=_interopRequireDefault(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_Person=_interopRequireDefault(require("../internal/svg-icons/Person")),styles=function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}};function useLoaded(e){var r=e.src,a=e.srcSet,t=_react.default.useState(!1),s=t[0],o=t[1];return _react.default.useEffect(function(){if(r||a){o(!1);var e=!0,t=new Image;return t.src=r,t.srcSet=a,t.onload=function(){e&&o("loaded")},t.onerror=function(){e&&o("error")},function(){e=!1}}},[r,a]),s}exports.styles=styles;var Avatar=_react.default.forwardRef(function(e,t){var r=e.alt,a=e.children,s=e.classes,o=e.className,l=e.component,i=void 0===l?"div":l,n=e.imgProps,u=e.sizes,p=e.src,c=e.srcSet,d=e.variant,f=void 0===d?"circle":d,_=(0,_objectWithoutProperties2.default)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),y=null,m=useLoaded({src:p,srcSet:c}),h=p||c,g=h&&"error"!==m;return y=g?_react.default.createElement("img",(0,_extends2.default)({alt:r,src:p,srcSet:c,sizes:u,className:s.img},n)):null!=a?a:h&&r?r[0]:_react.default.createElement(_Person.default,{className:s.fallback}),_react.default.createElement(i,(0,_extends2.default)({className:(0,_clsx.default)(s.root,s.system,s[f],o,!g&&s.colorDefault),ref:t},_),y)});"production"!==process.env.NODE_ENV&&(Avatar.propTypes={alt:_propTypes.default.string,children:_propTypes.default.node,classes:_propTypes.default.object.isRequired,className:_propTypes.default.string,component:_propTypes.default.elementType,imgProps:_propTypes.default.object,sizes:_propTypes.default.string,src:_propTypes.default.string,srcSet:_propTypes.default.string,variant:_propTypes.default.oneOf(["circle","rounded","square"])});var _default=(0,_withStyles.default)(styles,{name:"MuiAvatar"})(Avatar);exports.default=_default;