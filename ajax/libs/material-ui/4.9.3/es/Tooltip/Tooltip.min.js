import _extends from"@babel/runtime/helpers/esm/extends";import _objectWithoutPropertiesLoose from"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose";import React from"react";import ReactDOM from"react-dom";import PropTypes from"prop-types";import clsx from"clsx";import{elementAcceptingRef}from"@material-ui/utils";import{fade}from"../styles/colorManipulator";import withStyles from"../styles/withStyles";import capitalize from"../utils/capitalize";import Grow from"../Grow";import Popper from"../Popper";import useForkRef from"../utils/useForkRef";import setRef from"../utils/setRef";import{useIsFocusVisible}from"../utils/focusVisible";import useControlled from"../utils/useControlled";import useTheme from"../styles/useTheme";function round(e){return Math.round(1e5*e)/1e5}function arrowGenerator(){return{'&[x-placement*="bottom"] $arrow':{flip:!1,top:0,left:0,marginTop:"-0.95em",marginLeft:4,marginRight:4,width:"2em",height:"1em","&::before":{flip:!1,borderWidth:"0 1em 1em 1em",borderColor:"transparent transparent currentcolor transparent"}},'&[x-placement*="top"] $arrow':{flip:!1,bottom:0,left:0,marginBottom:"-0.95em",marginLeft:4,marginRight:4,width:"2em",height:"1em","&::before":{flip:!1,borderWidth:"1em 1em 0 1em",borderColor:"currentcolor transparent transparent transparent"}},'&[x-placement*="right"] $arrow':{flip:!1,left:0,marginLeft:"-0.95em",marginTop:4,marginBottom:4,height:"2em",width:"1em","&::before":{flip:!1,borderWidth:"1em 1em 1em 0",borderColor:"transparent currentcolor transparent transparent"}},'&[x-placement*="left"] $arrow':{flip:!1,right:0,marginRight:"-0.95em",marginTop:4,marginBottom:4,height:"2em",width:"1em","&::before":{flip:!1,borderWidth:"1em 0 1em 1em",borderColor:"transparent transparent transparent currentcolor"}}}}export const styles=e=>({popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none",flip:!1},popperInteractive:{pointerEvents:"auto"},popperArrow:arrowGenerator(),tooltip:{backgroundColor:fade(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:`${round(1.4)}em`,maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{position:"absolute",fontSize:6,color:fade(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${round(16/14)}em`,fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:{transformOrigin:"right center",margin:"0 24px ",[e.breakpoints.up("sm")]:{margin:"0 14px"}},tooltipPlacementRight:{transformOrigin:"left center",margin:"0 24px",[e.breakpoints.up("sm")]:{margin:"0 14px"}},tooltipPlacementTop:{transformOrigin:"center bottom",margin:"24px 0",[e.breakpoints.up("sm")]:{margin:"14px 0"}},tooltipPlacementBottom:{transformOrigin:"center top",margin:"24px 0",[e.breakpoints.up("sm")]:{margin:"14px 0"}}});let hystersisOpen=!1,hystersisTimer=null;export function testReset(){hystersisOpen=!1,clearTimeout(hystersisTimer)};const Tooltip=React.forwardRef(function(e,t){const{arrow:o=!1,children:r,classes:n,disableFocusListener:s=!1,disableHoverListener:i=!1,disableTouchListener:a=!1,enterDelay:p=0,enterTouchDelay:l=700,id:c,interactive:m=!1,leaveDelay:u=0,leaveTouchDelay:d=1500,onClose:f,onOpen:h,open:T,placement:y="bottom",PopperProps:b,title:g,TransitionComponent:R=Grow,TransitionProps:v}=e,P=_objectWithoutPropertiesLoose(e,["arrow","children","classes","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterTouchDelay","id","interactive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperProps","title","TransitionComponent","TransitionProps"]),x=useTheme(),[w,O]=React.useState(),[L,M]=React.useState(null),E=React.useRef(!1),F=React.useRef(),D=React.useRef(),C=React.useRef(),N=React.useRef(),[S,k]=useControlled({controlled:T,default:!1,name:"Tooltip"});let W=S;if("production"!==process.env.NODE_ENV){const{current:e}=React.useRef(void 0!==T);React.useEffect(()=>{w&&w.disabled&&!e&&""!==g&&"button"===w.tagName.toLowerCase()&&console.error(["Material-UI: you are providing a disabled `button` child to the Tooltip component.","A disabled element does not fire events.","Tooltip needs to listen to the child element's events to display the title.","","Add a simple wrapper element, such as a `span`."].join("\n"))},[g,w,e])}const[B,_]=React.useState(),A=c||B;React.useEffect(()=>{W&&!B&&_(`mui-tooltip-${Math.round(1e5*Math.random())}`)},[W,B]),React.useEffect(()=>()=>{clearTimeout(F.current),clearTimeout(D.current),clearTimeout(C.current),clearTimeout(N.current)},[]);const $=e=>{clearTimeout(hystersisTimer),hystersisOpen=!0,k(!0),h&&h(e)},j=e=>{const t=r.props;"mouseover"===e.type&&t.onMouseOver&&e.currentTarget===w&&t.onMouseOver(e),E.current&&"touchstart"!==e.type||(w&&w.removeAttribute("title"),clearTimeout(D.current),clearTimeout(C.current),p&&!hystersisOpen?(e.persist(),D.current=setTimeout(()=>{$(e)},p)):$(e))},{isFocusVisible:z,onBlurVisible:I,ref:V}=useIsFocusVisible(),[G,H]=React.useState(!1),q=e=>{w||O(e.currentTarget),z(e)&&(H(!0),j(e));const t=r.props;t.onFocus&&e.currentTarget===w&&t.onFocus(e)},U=e=>{clearTimeout(hystersisTimer),hystersisTimer=setTimeout(()=>{hystersisOpen=!1},500),k(!1),f&&f(e),clearTimeout(F.current),F.current=setTimeout(()=>{E.current=!1},x.transitions.duration.shortest)},J=e=>{const t=r.props;"blur"===e.type&&(t.onBlur&&e.currentTarget===w&&t.onBlur(e),G&&(H(!1),I())),"mouseleave"===e.type&&t.onMouseLeave&&e.currentTarget===w&&t.onMouseLeave(e),clearTimeout(D.current),clearTimeout(C.current),e.persist(),C.current=setTimeout(()=>{U(e)},u)},K=e=>{E.current=!0;const t=r.props;t.onTouchStart&&t.onTouchStart(e),clearTimeout(C.current),clearTimeout(F.current),clearTimeout(N.current),e.persist(),N.current=setTimeout(()=>{j(e)},l)},Q=e=>{r.props.onTouchEnd&&r.props.onTouchEnd(e),clearTimeout(N.current),clearTimeout(C.current),e.persist(),C.current=setTimeout(()=>{U(e)},d)},X=useForkRef(O,t),Y=useForkRef(V,X),Z=React.useCallback(e=>{setRef(Y,ReactDOM.findDOMNode(e))},[Y]),ee=useForkRef(r.ref,Z);""===g&&(W=!1);const te=_extends({"aria-describedby":W?A:null,title:!W&&!i&&"string"==typeof g?g:null},P,{},r.props,{className:clsx(P.className,r.props.className)});a||(te.onTouchStart=K,te.onTouchEnd=Q),i||(te.onMouseOver=j,te.onMouseLeave=J),s||(te.onFocus=q,te.onBlur=J);const oe=m?{onMouseOver:te.onMouseOver,onMouseLeave:te.onMouseLeave,onFocus:te.onFocus,onBlur:te.onBlur}:{};"production"!==process.env.NODE_ENV&&r.props.title&&console.error(["Material-UI: you have provided a `title` prop to the child of <Tooltip />.",`Remove this title prop \`${r.props.title}\` or the Tooltip component.`].join("\n"));const re=React.useMemo(()=>({modifiers:{arrow:{enabled:Boolean(L),element:L}}}),[L]);return React.createElement(React.Fragment,null,React.cloneElement(r,_extends({ref:ee},te)),React.createElement(Popper,_extends({className:clsx(n.popper,m&&n.popperInteractive,o&&n.popperArrow),placement:y,anchorEl:w,open:!!w&&W,id:te["aria-describedby"],transition:!0,popperOptions:re},oe,b),({placement:e,TransitionProps:t})=>React.createElement(R,_extends({timeout:x.transitions.duration.shorter},t,v),React.createElement("div",{className:clsx(n.tooltip,n[`tooltipPlacement${capitalize(e.split("-")[0])}`],E.current&&n.touch,o&&n.tooltipArrow)},g,o?React.createElement("span",{className:n.arrow,ref:M}):null))))});"production"!==process.env.NODE_ENV&&(Tooltip.propTypes={arrow:PropTypes.bool,children:elementAcceptingRef.isRequired,classes:PropTypes.object.isRequired,disableFocusListener:PropTypes.bool,disableHoverListener:PropTypes.bool,disableTouchListener:PropTypes.bool,enterDelay:PropTypes.number,enterTouchDelay:PropTypes.number,id:PropTypes.string,interactive:PropTypes.bool,leaveDelay:PropTypes.number,leaveTouchDelay:PropTypes.number,onClose:PropTypes.func,onOpen:PropTypes.func,open:PropTypes.bool,placement:PropTypes.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),PopperProps:PropTypes.object,title:PropTypes.node.isRequired,TransitionComponent:PropTypes.elementType,TransitionProps:PropTypes.object});export default withStyles(styles,{name:"MuiTooltip"})(Tooltip);