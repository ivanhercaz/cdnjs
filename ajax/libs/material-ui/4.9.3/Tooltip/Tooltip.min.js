"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.testReset=testReset,exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_react=_interopRequireDefault(require("react")),_reactDom=_interopRequireDefault(require("react-dom")),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_colorManipulator=require("../styles/colorManipulator"),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_capitalize=_interopRequireDefault(require("../utils/capitalize")),_Grow=_interopRequireDefault(require("../Grow")),_Popper=_interopRequireDefault(require("../Popper")),_useForkRef=_interopRequireDefault(require("../utils/useForkRef")),_setRef=_interopRequireDefault(require("../utils/setRef")),_focusVisible=require("../utils/focusVisible"),_useControlled3=_interopRequireDefault(require("../utils/useControlled")),_useTheme=_interopRequireDefault(require("../styles/useTheme"));function round(e){return Math.round(1e5*e)/1e5}function arrowGenerator(){return{'&[x-placement*="bottom"] $arrow':{flip:!1,top:0,left:0,marginTop:"-0.95em",marginLeft:4,marginRight:4,width:"2em",height:"1em","&::before":{flip:!1,borderWidth:"0 1em 1em 1em",borderColor:"transparent transparent currentcolor transparent"}},'&[x-placement*="top"] $arrow':{flip:!1,bottom:0,left:0,marginBottom:"-0.95em",marginLeft:4,marginRight:4,width:"2em",height:"1em","&::before":{flip:!1,borderWidth:"1em 1em 0 1em",borderColor:"currentcolor transparent transparent transparent"}},'&[x-placement*="right"] $arrow':{flip:!1,left:0,marginLeft:"-0.95em",marginTop:4,marginBottom:4,height:"2em",width:"1em","&::before":{flip:!1,borderWidth:"1em 1em 1em 0",borderColor:"transparent currentcolor transparent transparent"}},'&[x-placement*="left"] $arrow':{flip:!1,right:0,marginRight:"-0.95em",marginTop:4,marginBottom:4,height:"2em",width:"1em","&::before":{flip:!1,borderWidth:"1em 0 1em 1em",borderColor:"transparent transparent transparent currentcolor"}}}}var styles=function(e){return{popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none",flip:!1},popperInteractive:{pointerEvents:"auto"},popperArrow:arrowGenerator(),tooltip:{backgroundColor:(0,_colorManipulator.fade)(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:"".concat(round(1.4),"em"),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{position:"absolute",fontSize:6,color:(0,_colorManipulator.fade)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat(round(16/14),"em"),fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:(0,_defineProperty2.default)({transformOrigin:"right center",margin:"0 24px "},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementRight:(0,_defineProperty2.default)({transformOrigin:"left center",margin:"0 24px"},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementTop:(0,_defineProperty2.default)({transformOrigin:"center bottom",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"}),tooltipPlacementBottom:(0,_defineProperty2.default)({transformOrigin:"center top",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"})}};exports.styles=styles;var hystersisOpen=!1,hystersisTimer=null;function testReset(){hystersisOpen=!1,clearTimeout(hystersisTimer)}var Tooltip=_react.default.forwardRef(function(e,t){var r=e.arrow,o=void 0!==r&&r,i=e.children,n=e.classes,a=e.disableFocusListener,u=void 0!==a&&a,l=e.disableHoverListener,s=void 0!==l&&l,p=e.disableTouchListener,c=void 0!==p&&p,d=e.enterDelay,f=void 0===d?0:d,m=e.enterTouchDelay,_=void 0===m?700:m,h=e.id,T=e.interactive,y=void 0!==T&&T,b=e.leaveDelay,v=void 0===b?0:b,g=e.leaveTouchDelay,R=void 0===g?1500:g,q=e.onClose,x=e.onOpen,D=e.open,w=e.placement,P=void 0===w?"bottom":w,M=e.PopperProps,O=e.title,E=e.TransitionComponent,L=void 0===E?_Grow.default:E,F=e.TransitionProps,C=(0,_objectWithoutProperties2.default)(e,["arrow","children","classes","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterTouchDelay","id","interactive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperProps","title","TransitionComponent","TransitionProps"]),N=(0,_useTheme.default)(),S=_react.default.useState(),k=S[0],W=S[1],A=_react.default.useState(null),B=A[0],j=A[1],V=_react.default.useRef(!1),z=_react.default.useRef(),I=_react.default.useRef(),G=_react.default.useRef(),H=_react.default.useRef(),$=(0,_useControlled3.default)({controlled:D,default:!1,name:"Tooltip"}),U=(0,_slicedToArray2.default)($,2),J=U[0],K=U[1],Q=J;if("production"!==process.env.NODE_ENV){var X=_react.default.useRef(void 0!==D).current;_react.default.useEffect(function(){k&&k.disabled&&!X&&""!==O&&"button"===k.tagName.toLowerCase()&&console.error(["Material-UI: you are providing a disabled `button` child to the Tooltip component.","A disabled element does not fire events.","Tooltip needs to listen to the child element's events to display the title.","","Add a simple wrapper element, such as a `span`."].join("\n"))},[O,k,X])}var Y=_react.default.useState(),Z=Y[0],ee=Y[1],te=h||Z;_react.default.useEffect(function(){Q&&!Z&&ee("mui-tooltip-".concat(Math.round(1e5*Math.random())))},[Q,Z]),_react.default.useEffect(function(){return function(){clearTimeout(z.current),clearTimeout(I.current),clearTimeout(G.current),clearTimeout(H.current)}},[]);function re(e){clearTimeout(hystersisTimer),K(hystersisOpen=!0),x&&x(e)}function oe(e){var t=i.props;"mouseover"===e.type&&t.onMouseOver&&e.currentTarget===k&&t.onMouseOver(e),V.current&&"touchstart"!==e.type||(k&&k.removeAttribute("title"),clearTimeout(I.current),clearTimeout(G.current),f&&!hystersisOpen?(e.persist(),I.current=setTimeout(function(){re(e)},f)):re(e))}function ie(e){clearTimeout(hystersisTimer),hystersisTimer=setTimeout(function(){hystersisOpen=!1},500),K(!1),q&&q(e),clearTimeout(z.current),z.current=setTimeout(function(){V.current=!1},N.transitions.duration.shortest)}function ne(e){var t=i.props;"blur"===e.type&&(t.onBlur&&e.currentTarget===k&&t.onBlur(e),ce&&(de(!1),le())),"mouseleave"===e.type&&t.onMouseLeave&&e.currentTarget===k&&t.onMouseLeave(e),clearTimeout(I.current),clearTimeout(G.current),e.persist(),G.current=setTimeout(function(){ie(e)},v)}var ae=(0,_focusVisible.useIsFocusVisible)(),ue=ae.isFocusVisible,le=ae.onBlurVisible,se=ae.ref,pe=_react.default.useState(!1),ce=pe[0],de=pe[1],fe=(0,_useForkRef.default)(W,t),me=(0,_useForkRef.default)(se,fe),_e=_react.default.useCallback(function(e){(0,_setRef.default)(me,_reactDom.default.findDOMNode(e))},[me]),he=(0,_useForkRef.default)(i.ref,_e);""===O&&(Q=!1);var Te=!Q&&!s,ye=(0,_extends2.default)({"aria-describedby":Q?te:null,title:Te&&"string"==typeof O?O:null},C,{},i.props,{className:(0,_clsx.default)(C.className,i.props.className)});c||(ye.onTouchStart=function(e){V.current=!0;var t=i.props;t.onTouchStart&&t.onTouchStart(e),clearTimeout(G.current),clearTimeout(z.current),clearTimeout(H.current),e.persist(),H.current=setTimeout(function(){oe(e)},_)},ye.onTouchEnd=function(e){i.props.onTouchEnd&&i.props.onTouchEnd(e),clearTimeout(H.current),clearTimeout(G.current),e.persist(),G.current=setTimeout(function(){ie(e)},R)}),s||(ye.onMouseOver=oe,ye.onMouseLeave=ne),u||(ye.onFocus=function(e){k||W(e.currentTarget),ue(e)&&(de(!0),oe(e));var t=i.props;t.onFocus&&e.currentTarget===k&&t.onFocus(e)},ye.onBlur=ne);var be=y?{onMouseOver:ye.onMouseOver,onMouseLeave:ye.onMouseLeave,onFocus:ye.onFocus,onBlur:ye.onBlur}:{};"production"!==process.env.NODE_ENV&&i.props.title&&console.error(["Material-UI: you have provided a `title` prop to the child of <Tooltip />.","Remove this title prop `".concat(i.props.title,"` or the Tooltip component.")].join("\n"));var ve=_react.default.useMemo(function(){return{modifiers:{arrow:{enabled:Boolean(B),element:B}}}},[B]);return _react.default.createElement(_react.default.Fragment,null,_react.default.cloneElement(i,(0,_extends2.default)({ref:he},ye)),_react.default.createElement(_Popper.default,(0,_extends2.default)({className:(0,_clsx.default)(n.popper,y&&n.popperInteractive,o&&n.popperArrow),placement:P,anchorEl:k,open:!!k&&Q,id:ye["aria-describedby"],transition:!0,popperOptions:ve},be,M),function(e){var t=e.placement,r=e.TransitionProps;return _react.default.createElement(L,(0,_extends2.default)({timeout:N.transitions.duration.shorter},r,F),_react.default.createElement("div",{className:(0,_clsx.default)(n.tooltip,n["tooltipPlacement".concat((0,_capitalize.default)(t.split("-")[0]))],V.current&&n.touch,o&&n.tooltipArrow)},O,o?_react.default.createElement("span",{className:n.arrow,ref:j}):null))}))});"production"!==process.env.NODE_ENV&&(Tooltip.propTypes={arrow:_propTypes.default.bool,children:_utils.elementAcceptingRef.isRequired,classes:_propTypes.default.object.isRequired,disableFocusListener:_propTypes.default.bool,disableHoverListener:_propTypes.default.bool,disableTouchListener:_propTypes.default.bool,enterDelay:_propTypes.default.number,enterTouchDelay:_propTypes.default.number,id:_propTypes.default.string,interactive:_propTypes.default.bool,leaveDelay:_propTypes.default.number,leaveTouchDelay:_propTypes.default.number,onClose:_propTypes.default.func,onOpen:_propTypes.default.func,open:_propTypes.default.bool,placement:_propTypes.default.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),PopperProps:_propTypes.default.object,title:_propTypes.default.node.isRequired,TransitionComponent:_propTypes.default.elementType,TransitionProps:_propTypes.default.object});var _default=(0,_withStyles.default)(styles,{name:"MuiTooltip"})(Tooltip);exports.default=_default;