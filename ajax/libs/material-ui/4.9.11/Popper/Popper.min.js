"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_popper=_interopRequireDefault(require("popper.js")),_utils=require("@material-ui/utils"),_styles=require("@material-ui/styles"),_Portal=_interopRequireDefault(require("../Portal")),_createChainedFunction=_interopRequireDefault(require("../utils/createChainedFunction")),_setRef=_interopRequireDefault(require("../utils/setRef")),_useForkRef=_interopRequireDefault(require("../utils/useForkRef")),_ownerWindow=_interopRequireDefault(require("../utils/ownerWindow"));function flipPlacement(e,t){if("ltr"===(t&&t.direction||"ltr"))return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function getAnchorEl(e){return"function"==typeof e?e():e}var useEnhancedEffect="undefined"!=typeof window?React.useLayoutEffect:React.useEffect,defaultPopperOptions={},Popper=React.forwardRef(function(e,t){var o=e.anchorEl,r=e.children,n=e.container,i=e.disablePortal,u=void 0!==i&&i,p=e.keepMounted,a=void 0!==p&&p,l=e.modifiers,s=e.open,c=e.placement,f=void 0===c?"bottom":c,d=e.popperOptions,_=void 0===d?defaultPopperOptions:d,h=e.popperRef,m=e.style,R=e.transition,y=void 0!==R&&R,b=(0,_objectWithoutProperties2.default)(e,["anchorEl","children","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"]),E=React.useRef(null),v=(0,_useForkRef.default)(E,t),q=React.useRef(null),T=(0,_useForkRef.default)(q,h),O=React.useRef(T);useEnhancedEffect(function(){O.current=T},[T]),React.useImperativeHandle(h,function(){return q.current},[]);var P=React.useState(!0),w=P[0],g=P[1],j=flipPlacement(f,(0,_styles.useTheme)()),D=React.useState(j),C=D[0],k=D[1];React.useEffect(function(){q.current&&q.current.update()});function x(){q.current&&(q.current.destroy(),O.current(null))}var W=React.useCallback(function(){if(E.current&&o&&s){q.current&&(q.current.destroy(),O.current(null));var e=function(e){k(e.placement)},t=getAnchorEl(o);if("production"!==process.env.NODE_ENV)if(t instanceof(0,_ownerWindow.default)(t).Element){var r=t.getBoundingClientRect();"test"!==process.env.NODE_ENV&&0===r.top&&0===r.left&&0===r.right&&0===r.bottom&&console.warn(["Material-UI: the `anchorEl` prop provided to the component is invalid.","The anchor element should be part of the document layout.","Make sure the element is present in the document or that it's not display none."].join("\n"))}var n=new _popper.default(getAnchorEl(o),E.current,(0,_extends2.default)({placement:j},_,{modifiers:(0,_extends2.default)({},u?{}:{preventOverflow:{boundariesElement:"window"}},{},l,{},_.modifiers),onCreate:(0,_createChainedFunction.default)(e,_.onCreate),onUpdate:(0,_createChainedFunction.default)(e,_.onUpdate)}));O.current(n)}},[o,u,l,s,j,_]),M=React.useCallback(function(e){(0,_setRef.default)(v,e),W()},[v,W]);if(React.useEffect(function(){W()},[W]),React.useEffect(function(){return function(){x()}},[]),React.useEffect(function(){s||y||x()},[s,y]),!a&&!s&&(!y||w))return null;var F={placement:C};return y&&(F.TransitionProps={in:s,onEnter:function(){g(!1)},onExited:function(){g(!0),x()}}),React.createElement(_Portal.default,{disablePortal:u,container:n},React.createElement("div",(0,_extends2.default)({ref:M,role:"tooltip"},b,{style:(0,_extends2.default)({position:"fixed",top:0,left:0},m)}),"function"==typeof r?r(F):r))});"production"!==process.env.NODE_ENV&&(Popper.propTypes={anchorEl:(0,_utils.chainPropTypes)(_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.func]),function(e){if(e.open){var t=getAnchorEl(e.anchorEl);if(t instanceof(0,_ownerWindow.default)(t).Element){var r=t.getBoundingClientRect();if("test"!==process.env.NODE_ENV&&0===r.top&&0===r.left&&0===r.right&&0===r.bottom)return new Error(["Material-UI: the `anchorEl` prop provided to the component is invalid.","The anchor element should be part of the document layout.","Make sure the element is present in the document or that it's not display none."].join("\n"))}else if(!t||"number"!=typeof t.clientWidth||"number"!=typeof t.clientHeight||"function"!=typeof t.getBoundingClientRect)return new Error(["Material-UI: the `anchorEl` prop provided to the component is invalid.","It should be an HTML Element instance or a referenceObject ","(https://popper.js.org/docs/v1/#referenceObject)."].join("\n"))}return null}),children:_propTypes.default.oneOfType([_propTypes.default.node,_propTypes.default.func]).isRequired,container:_propTypes.default.oneOfType([_propTypes.default.func,_propTypes.default.instanceOf(React.Component),_propTypes.default.instanceOf("undefined"==typeof Element?Object:Element)]),disablePortal:_propTypes.default.bool,keepMounted:_propTypes.default.bool,modifiers:_propTypes.default.object,open:_propTypes.default.bool.isRequired,placement:_propTypes.default.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),popperOptions:_propTypes.default.object,popperRef:_utils.refType,style:_propTypes.default.object,transition:_propTypes.default.bool});var _default=Popper;exports.default=_default;