"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),React=_interopRequireWildcard(require("react")),_reactIs=require("react-is"),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_debounce=_interopRequireDefault(require("../utils/debounce")),_ownerWindow=_interopRequireDefault(require("../utils/ownerWindow")),_scrollLeft=require("../utils/scrollLeft"),_animate=_interopRequireDefault(require("../internal/animate")),_ScrollbarSize=_interopRequireDefault(require("./ScrollbarSize")),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_TabIndicator=_interopRequireDefault(require("./TabIndicator")),_TabScrollButton=_interopRequireDefault(require("./TabScrollButton")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_useTheme=_interopRequireDefault(require("../styles/useTheme")),styles=function(e){return{root:{overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},vertical:{flexDirection:"column"},flexContainer:{display:"flex"},flexContainerVertical:{flexDirection:"column"},centered:{justifyContent:"center"},scroller:{position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},fixed:{overflowX:"hidden",width:"100%"},scrollable:{overflowX:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},scrollButtons:{},scrollButtonsDesktop:(0,_defineProperty2.default)({},e.breakpoints.down("xs"),{display:"none"}),indicator:{}}};exports.styles=styles;var Tabs=React.forwardRef(function(e,t){var r=e.action,o=e.centered,l=void 0!==o&&o,n=e.children,a=e.classes,i=e.className,c=e.component,s=void 0===c?"div":c,u=e.indicatorColor,d=void 0===u?"secondary":u,f=e.onChange,p=e.orientation,v=void 0===p?"horizontal":p,_=e.ScrollButtonComponent,b=void 0===_?_TabScrollButton.default:_,h=e.scrollButtons,m=void 0===h?"auto":h,y=e.TabIndicatorProps,R=void 0===y?{}:y,T=e.textColor,q=void 0===T?"inherit":T,x=e.value,C=e.variant,g=void 0===C?"standard":C,E=(0,_objectWithoutProperties2.default)(e,["action","centered","children","classes","className","component","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","TabIndicatorProps","textColor","value","variant"]),S=(0,_useTheme.default)(),N="scrollable"===g,w="rtl"===S.direction,D="vertical"===v,B=D?"scrollTop":"scrollLeft",W=D?"top":"left",k=D?"bottom":"right",L=D?"clientHeight":"clientWidth",M=D?"height":"width";"production"!==process.env.NODE_ENV&&l&&N&&console.error('Material-UI: you can not use the `centered={true}` and `variant="scrollable"` properties at the same time on a `Tabs` component.');function z(){var e,t,r=ee.current;if(r){var o=r.getBoundingClientRect();e={clientWidth:r.clientWidth,scrollLeft:r.scrollLeft,scrollTop:r.scrollTop,scrollLeftNormalized:(0,_scrollLeft.getNormalizedScrollLeft)(r,S.direction),scrollWidth:r.scrollWidth,top:o.top,bottom:o.bottom,left:o.left,right:o.right}}if(r&&!1!==x){var l=te.current.children;if(0<l.length){var n=l[$.get(x)];"production"!==process.env.NODE_ENV&&(n||console.error(["Material-UI: the value provided to the Tabs component is invalid.","None of the Tabs' children match with `".concat(x,"`."),$.keys?"You can provide one of the following values: ".concat(Array.from($.keys()).join(", "),"."):null].join("\n"))),t=n?n.getBoundingClientRect():null}}return{tabsMeta:e,tabMeta:t}}function I(e){(0,_animate.default)(B,ee.current,e)}function P(e){var t=ee.current[B];D?t+=e:(t+=e*(w?-1:1),t*=w&&"reverse"===(0,_scrollLeft.detectScrollType)()?-1:1),I(t)}function O(){P(-ee.current[L])}function j(){P(ee.current[L])}var V=React.useState(!1),H=V[0],U=V[1],F=React.useState({}),X=F[0],A=F[1],Y=React.useState({start:!1,end:!1}),G=Y[0],J=Y[1],K=React.useState({overflow:"hidden",marginBottom:null}),Q=K[0],Z=K[1],$=new Map,ee=React.useRef(null),te=React.useRef(null),re=(0,_useEventCallback.default)(function(){var e,t=z(),r=t.tabsMeta,o=t.tabMeta,l=0;if(o&&r)if(D)l=o.top-r.top+r.scrollTop;else{var n=w?r.scrollLeftNormalized+r.clientWidth-r.scrollWidth:r.scrollLeft;l=o.left-r.left+n}var a=(e={},(0,_defineProperty2.default)(e,W,l),(0,_defineProperty2.default)(e,M,o?o[M]:0),e);if(isNaN(X[W])||isNaN(X[M]))A(a);else{var i=Math.abs(X[W]-a[W]),c=Math.abs(X[M]-a[M]);(1<=i||1<=c)&&A(a)}}),oe=React.useCallback(function(e){Z({overflow:null,marginBottom:-e})},[]),le=(0,_useEventCallback.default)(function(){var e=z(),t=e.tabsMeta,r=e.tabMeta;if(r&&t)if(r[W]<t[W]){var o=t[B]+(r[W]-t[W]);I(o)}else if(r[k]>t[k]){var l=t[B]+(r[k]-t[k]);I(l)}}),ne=(0,_useEventCallback.default)(function(){if(N&&"off"!==m){var e,t,r=ee.current,o=r.scrollTop,l=r.scrollHeight,n=r.clientHeight,a=r.scrollWidth,i=r.clientWidth;if(D)e=1<o,t=o<l-n-1;else{var c=(0,_scrollLeft.getNormalizedScrollLeft)(ee.current,S.direction);e=w?c<a-i-1:1<c,t=w?1<c:c<a-i-1}e===G.start&&t===G.end||J({start:e,end:t})}});React.useEffect(function(){var e=(0,_debounce.default)(function(){re(),ne()}),t=(0,_ownerWindow.default)(ee.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}},[re,ne]);var ae=React.useCallback((0,_debounce.default)(function(){ne()}));React.useEffect(function(){return function(){ae.clear()}},[ae]),React.useEffect(function(){U(!0)},[]),React.useEffect(function(){re(),ne()}),React.useEffect(function(){le()},[le,X]),React.useImperativeHandle(r,function(){return{updateIndicator:re,updateScrollButtons:ne}},[re,ne]);var ie=React.createElement(_TabIndicator.default,(0,_extends2.default)({className:a.indicator,orientation:v,color:d},R,{style:(0,_extends2.default)({},X,{},R.style)})),ce=0,se=React.Children.map(n,function(e){if(!React.isValidElement(e))return null;"production"!==process.env.NODE_ENV&&(0,_reactIs.isFragment)(e)&&console.error(["Material-UI: the Tabs component doesn't accept a Fragment as a child.","Consider providing an array instead."].join("\n"));var t=void 0===e.props.value?ce:e.props.value;$.set(t,ce);var r=t===x;return ce+=1,React.cloneElement(e,{fullWidth:"fullWidth"===g,indicator:r&&!H&&ie,selected:r,onChange:f,textColor:q,value:t})}),ue=function(){var e={};e.scrollbarSizeListener=N?React.createElement(_ScrollbarSize.default,{className:a.scrollable,onChange:oe}):null;var t=G.start||G.end,r=N&&("auto"===m&&t||"desktop"===m||"on"===m);return e.scrollButtonStart=r?React.createElement(b,{orientation:v,direction:w?"right":"left",onClick:O,visible:G.start,className:(0,_clsx.default)(a.scrollButtons,"on"!==m&&a.scrollButtonsDesktop)}):null,e.scrollButtonEnd=r?React.createElement(b,{orientation:v,direction:w?"left":"right",onClick:j,visible:G.end,className:(0,_clsx.default)(a.scrollButtons,"on"!==m&&a.scrollButtonsDesktop)}):null,e}();return React.createElement(s,(0,_extends2.default)({className:(0,_clsx.default)(a.root,i,D&&a.vertical),ref:t},E),ue.scrollButtonStart,ue.scrollbarSizeListener,React.createElement("div",{className:(0,_clsx.default)(a.scroller,N?a.scrollable:a.fixed),style:Q,ref:ee,onScroll:ae},React.createElement("div",{className:(0,_clsx.default)(a.flexContainer,D&&a.flexContainerVertical,l&&!N&&a.centered),ref:te,role:"tablist"},se),H&&ie),ue.scrollButtonEnd)});"production"!==process.env.NODE_ENV&&(Tabs.propTypes={action:_utils.refType,centered:_propTypes.default.bool,children:_propTypes.default.node,classes:_propTypes.default.object.isRequired,className:_propTypes.default.string,component:_propTypes.default.elementType,indicatorColor:_propTypes.default.oneOf(["secondary","primary"]),onChange:_propTypes.default.func,orientation:_propTypes.default.oneOf(["horizontal","vertical"]),ScrollButtonComponent:_propTypes.default.elementType,scrollButtons:_propTypes.default.oneOf(["auto","desktop","on","off"]),TabIndicatorProps:_propTypes.default.object,textColor:_propTypes.default.oneOf(["secondary","primary","inherit"]),value:_propTypes.default.any,variant:_propTypes.default.oneOf(["standard","scrollable","fullWidth"])});var _default=(0,_withStyles.default)(styles,{name:"MuiTabs"})(Tabs);exports.default=_default;