import{assert}from"chai";import*as React from"react";import findOutermostIntrinsic from"./findOutermostIntrinsic";import ReactTestRenderer from"react-test-renderer";import testRef from"./testRef";function findRootComponent(t,{component:e}){const s=findOutermostIntrinsic(t).getElement();return t.find(e).filterWhere(t=>t.contains(s))}function randomStringValue(){return Math.random().toString(36).slice(2)}function testClassName(t,e){it("applies the className to the root component",()=>{const{mount:s}=e(),n=randomStringValue(),o=s(React.cloneElement(t,{className:n}));assert.strictEqual(findOutermostIntrinsic(o).hasClass(n),!0,"does have a custom `className`")})}function testComponentProp(t,e){describe("prop: component",()=>{it("can render another root component with the `component` prop",()=>{const{classes:s,mount:n,testComponentPropWith:o="em"}=e(),r=n(React.cloneElement(t,{component:o}));assert.strictEqual(findRootComponent(r,{classes:s,component:o}).exists(),!0)})})}function testPropsSpread(t,e){it("spreads props to the root component",()=>{const{classes:s,inheritComponent:n,mount:o}=e(),r=randomStringValue(),a=findRootComponent(o(React.cloneElement(t,{"data-test-props-spread":r})),{classes:s,component:n});assert.strictEqual(a.props()["data-test-props-spread"],r)})}function describeRef(t,e){describe("ref",()=>{it("attaches the ref",()=>{const{inheritComponent:s,mount:n,refInstanceof:o}=e();testRef(t,n,(t,e)=>{if(assert.instanceOf(t,o),s&&1===t.nodeType){const s=findOutermostIntrinsic(e);assert.strictEqual(t,s.instance())}})})})}function testRootClass(t,e){it("applies the root class to the root component if it has this class",()=>{const{classes:s,mount:n}=e();if(null==s.root)return;const o=randomStringValue(),r=n(React.cloneElement(t,{className:o}));assert.strictEqual(findOutermostIntrinsic(r).hasClass(s.root),!0),assert.strictEqual(findOutermostIntrinsic(r).hasClass(o),!0)})}function testReactTestRenderer(t){it("should render without errors in ReactTestRenderer",()=>{ReactTestRenderer.act(()=>{ReactTestRenderer.create(t,{createNodeMock:t=>document.createElement(t.type)})})})}const fullSuite={componentProp:testComponentProp,mergeClassName:testClassName,propsSpread:testPropsSpread,refForwarding:describeRef,rootClass:testRootClass,reactTestRenderer:testReactTestRenderer};export default function describeConformance(t,e){const{after:s=(()=>{}),only:n=Object.keys(fullSuite),skip:o=[]}=e();describe("Material-UI component API",()=>{after(s),Object.keys(fullSuite).filter(t=>-1!==n.indexOf(t)&&-1===o.indexOf(t)).forEach(s=>{(0,fullSuite[s])(t,e)})})};