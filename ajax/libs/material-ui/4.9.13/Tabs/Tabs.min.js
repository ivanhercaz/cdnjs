"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),React=_interopRequireWildcard(require("react")),_reactIs=require("react-is"),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_debounce=_interopRequireDefault(require("../utils/debounce")),_ownerWindow=_interopRequireDefault(require("../utils/ownerWindow")),_scrollLeft=require("../utils/scrollLeft"),_animate=_interopRequireDefault(require("../internal/animate")),_ScrollbarSize=_interopRequireDefault(require("./ScrollbarSize")),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_TabIndicator=_interopRequireDefault(require("./TabIndicator")),_TabScrollButton=_interopRequireDefault(require("../TabScrollButton")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_useTheme=_interopRequireDefault(require("../styles/useTheme")),styles=function(e){return{root:{overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},vertical:{flexDirection:"column"},flexContainer:{display:"flex"},flexContainerVertical:{flexDirection:"column"},centered:{justifyContent:"center"},scroller:{position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},fixed:{overflowX:"hidden",width:"100%"},scrollable:{overflowX:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},scrollButtons:{},scrollButtonsDesktop:(0,_defineProperty2.default)({},e.breakpoints.down("xs"),{display:"none"}),indicator:{}}};exports.styles=styles;var Tabs=React.forwardRef(function(e,t){var r=e.action,o=e.centered,l=void 0!==o&&o,n=e.children,a=e.classes,i=e.className,c=e.component,s=void 0===c?"div":c,u=e.indicatorColor,d=void 0===u?"secondary":u,f=e.onChange,p=e.orientation,_=void 0===p?"horizontal":p,b=e.ScrollButtonComponent,v=void 0===b?_TabScrollButton.default:b,h=e.scrollButtons,m=void 0===h?"auto":h,y=e.TabIndicatorProps,R=void 0===y?{}:y,T=e.TabScrollButtonProps,q=e.textColor,g=void 0===q?"inherit":q,x=e.value,C=e.variant,S=void 0===C?"standard":C,w=(0,_objectWithoutProperties2.default)(e,["action","centered","children","classes","className","component","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant"]),E=(0,_useTheme.default)(),D="scrollable"===S,B="rtl"===E.direction,N="vertical"===_,k=N?"scrollTop":"scrollLeft",W=N?"top":"left",L=N?"bottom":"right",P=N?"clientHeight":"clientWidth",M=N?"height":"width";"production"!==process.env.NODE_ENV&&l&&D&&console.error('Material-UI: You can not use the `centered={true}` and `variant="scrollable"` properties at the same time on a `Tabs` component.');function z(){var e,t,r,o,l,n=te.current;return n&&(e=n.getBoundingClientRect(),t={clientWidth:n.clientWidth,scrollLeft:n.scrollLeft,scrollTop:n.scrollTop,scrollLeftNormalized:(0,_scrollLeft.getNormalizedScrollLeft)(n,E.direction),scrollWidth:n.scrollWidth,top:e.top,bottom:e.bottom,left:e.left,right:e.right}),!n||!1===x||0<(o=re.current.children).length&&(l=o[ee.get(x)],"production"!==process.env.NODE_ENV&&(l||console.error(["Material-UI: The value provided to the Tabs component is invalid.","None of the Tabs' children match with `".concat(x,"`."),ee.keys?"You can provide one of the following values: ".concat(Array.from(ee.keys()).join(", "),"."):null].join("\n"))),r=l?l.getBoundingClientRect():null),{tabsMeta:t,tabMeta:r}}function I(e){(0,_animate.default)(k,te.current,e)}function j(e){var t=te.current[k];N?t+=e:(t+=e*(B?-1:1),t*=B&&"reverse"===(0,_scrollLeft.detectScrollType)()?-1:1),I(t)}function O(){j(-te.current[P])}function A(){j(te.current[P])}var V=React.useState(!1),H=V[0],U=V[1],F=React.useState({}),X=F[0],Y=F[1],K=React.useState({start:!1,end:!1}),G=K[0],J=K[1],Q=React.useState({overflow:"hidden",marginBottom:null}),Z=Q[0],$=Q[1],ee=new Map,te=React.useRef(null),re=React.useRef(null),oe=(0,_useEventCallback.default)(function(){var e,t,r=z(),o=r.tabsMeta,l=r.tabMeta,n=0;l&&o&&(n=N?l.top-o.top+o.scrollTop:(t=B?o.scrollLeftNormalized+o.clientWidth-o.scrollWidth:o.scrollLeft,l.left-o.left+t));var a,i,c=(e={},(0,_defineProperty2.default)(e,W,n),(0,_defineProperty2.default)(e,M,l?l[M]:0),e);isNaN(X[W])||isNaN(X[M])?Y(c):(a=Math.abs(X[W]-c[W]),i=Math.abs(X[M]-c[M]),(1<=a||1<=i)&&Y(c))}),le=React.useCallback(function(e){$({overflow:null,marginBottom:-e})},[]),ne=(0,_useEventCallback.default)(function(){var e,t,r=z(),o=r.tabsMeta,l=r.tabMeta;l&&o&&(l[W]<o[W]?(e=o[k]+(l[W]-o[W]),I(e)):l[L]>o[L]&&(t=o[k]+(l[L]-o[L]),I(t)))}),ae=(0,_useEventCallback.default)(function(){var e,t,r,o,l,n,a,i,c;D&&"off"!==m&&(t=(e=te.current).scrollTop,r=e.scrollHeight,o=e.clientHeight,l=e.scrollWidth,n=e.clientWidth,c=N?(i=1<t,t<r-o-1):(a=(0,_scrollLeft.getNormalizedScrollLeft)(te.current,E.direction),i=B?a<l-n-1:1<a,B?1<a:a<l-n-1),i===G.start&&c===G.end||J({start:i,end:c}))});React.useEffect(function(){var e=(0,_debounce.default)(function(){oe(),ae()}),t=(0,_ownerWindow.default)(te.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}},[oe,ae]);var ie=React.useCallback((0,_debounce.default)(function(){ae()}));React.useEffect(function(){return function(){ie.clear()}},[ie]),React.useEffect(function(){U(!0)},[]),React.useEffect(function(){oe(),ae()}),React.useEffect(function(){ne()},[ne,X]),React.useImperativeHandle(r,function(){return{updateIndicator:oe,updateScrollButtons:ae}},[oe,ae]);var ce=React.createElement(_TabIndicator.default,(0,_extends2.default)({className:a.indicator,orientation:_,color:d},R,{style:(0,_extends2.default)((0,_extends2.default)({},X),R.style)})),se=0,ue=React.Children.map(n,function(e){if(!React.isValidElement(e))return null;"production"!==process.env.NODE_ENV&&(0,_reactIs.isFragment)(e)&&console.error(["Material-UI: The Tabs component doesn't accept a Fragment as a child.","Consider providing an array instead."].join("\n"));var t=void 0===e.props.value?se:e.props.value;ee.set(t,se);var r=t===x;return se+=1,React.cloneElement(e,{fullWidth:"fullWidth"===S,indicator:r&&!H&&ce,selected:r,onChange:f,textColor:g,value:t})}),de=function(){var e={};e.scrollbarSizeListener=D?React.createElement(_ScrollbarSize.default,{className:a.scrollable,onChange:le}):null;var t=G.start||G.end,r=D&&("auto"===m&&t||"desktop"===m||"on"===m);return e.scrollButtonStart=r?React.createElement(v,(0,_extends2.default)({orientation:_,direction:B?"right":"left",onClick:O,disabled:!G.start,className:(0,_clsx.default)(a.scrollButtons,"on"!==m&&a.scrollButtonsDesktop)},T)):null,e.scrollButtonEnd=r?React.createElement(v,(0,_extends2.default)({orientation:_,direction:B?"left":"right",onClick:A,disabled:!G.end,className:(0,_clsx.default)(a.scrollButtons,"on"!==m&&a.scrollButtonsDesktop)},T)):null,e}();return React.createElement(s,(0,_extends2.default)({className:(0,_clsx.default)(a.root,i,N&&a.vertical),ref:t},w),de.scrollButtonStart,de.scrollbarSizeListener,React.createElement("div",{className:(0,_clsx.default)(a.scroller,D?a.scrollable:a.fixed),style:Z,ref:te,onScroll:ie},React.createElement("div",{className:(0,_clsx.default)(a.flexContainer,N&&a.flexContainerVertical,l&&!D&&a.centered),onKeyDown:function(e){var t=e.target;if("tab"===t.getAttribute("role")){var r=null,o="vertical"!==_?"ArrowLeft":"ArrowUp",l="vertical"!==_?"ArrowRight":"ArrowDown";switch("vertical"!==_&&"rtl"===E.direction&&(o="ArrowRight",l="ArrowLeft"),e.key){case o:r=t.previousElementSibling||re.current.lastChild;break;case l:r=t.nextElementSibling||re.current.firstChild;break;case"Home":r=re.current.firstChild;break;case"End":r=re.current.lastChild}null!==r&&(r.focus(),e.preventDefault())}},ref:re,role:"tablist"},ue),H&&ce),de.scrollButtonEnd)});"production"!==process.env.NODE_ENV&&(Tabs.propTypes={action:_utils.refType,centered:_propTypes.default.bool,children:_propTypes.default.node,classes:_propTypes.default.object.isRequired,className:_propTypes.default.string,component:_propTypes.default.elementType,indicatorColor:_propTypes.default.oneOf(["secondary","primary"]),onChange:_propTypes.default.func,orientation:_propTypes.default.oneOf(["horizontal","vertical"]),ScrollButtonComponent:_propTypes.default.elementType,scrollButtons:_propTypes.default.oneOf(["auto","desktop","on","off"]),TabIndicatorProps:_propTypes.default.object,TabScrollButtonProps:_propTypes.default.object,textColor:_propTypes.default.oneOf(["secondary","primary","inherit"]),value:_propTypes.default.any,variant:_propTypes.default.oneOf(["standard","scrollable","fullWidth"])});var _default=(0,_withStyles.default)(styles,{name:"MuiTabs"})(Tabs);exports.default=_default;