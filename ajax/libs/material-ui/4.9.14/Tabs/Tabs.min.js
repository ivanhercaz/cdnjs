"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),React=_interopRequireWildcard(require("react")),_reactIs=require("react-is"),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_debounce=_interopRequireDefault(require("../utils/debounce")),_ownerWindow=_interopRequireDefault(require("../utils/ownerWindow")),_scrollLeft=require("../utils/scrollLeft"),_animate=_interopRequireDefault(require("../internal/animate")),_ScrollbarSize=_interopRequireDefault(require("./ScrollbarSize")),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_TabIndicator=_interopRequireDefault(require("./TabIndicator")),_TabScrollButton=_interopRequireDefault(require("../TabScrollButton")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_useTheme=_interopRequireDefault(require("../styles/useTheme")),styles=function(e){return{root:{overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},vertical:{flexDirection:"column"},flexContainer:{display:"flex"},flexContainerVertical:{flexDirection:"column"},centered:{justifyContent:"center"},scroller:{position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},fixed:{overflowX:"hidden",width:"100%"},scrollable:{overflowX:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},scrollButtons:{},scrollButtonsDesktop:(0,_defineProperty2.default)({},e.breakpoints.down("xs"),{display:"none"}),indicator:{}}};exports.styles=styles;var Tabs=React.forwardRef(function(e,t){var r=e["aria-label"],l=e["aria-labelledby"],o=e.action,a=e.centered,n=void 0!==a&&a,i=e.children,s=e.classes,c=e.className,u=e.component,d=void 0===u?"div":u,f=e.indicatorColor,p=void 0===f?"secondary":f,b=e.onChange,_=e.orientation,v=void 0===_?"horizontal":_,h=e.ScrollButtonComponent,m=void 0===h?_TabScrollButton.default:h,y=e.scrollButtons,T=void 0===y?"auto":y,R=e.selectionFollowsFocus,q=e.TabIndicatorProps,g=void 0===q?{}:q,w=e.TabScrollButtonProps,x=e.textColor,C=void 0===x?"inherit":x,S=e.value,E=e.variant,D=void 0===E?"standard":E,B=(0,_objectWithoutProperties2.default)(e,["aria-label","aria-labelledby","action","centered","children","classes","className","component","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant"]),N=(0,_useTheme.default)(),k="scrollable"===D,W="rtl"===N.direction,L="vertical"===v,P=L?"scrollTop":"scrollLeft",M=L?"top":"left",z=L?"bottom":"right",I=L?"clientHeight":"clientWidth",j=L?"height":"width";"production"!==process.env.NODE_ENV&&n&&k&&console.error('Material-UI: You can not use the `centered={true}` and `variant="scrollable"` properties at the same time on a `Tabs` component.');function O(){var e,t,r,l,o,a=oe.current;return a&&(e=a.getBoundingClientRect(),t={clientWidth:a.clientWidth,scrollLeft:a.scrollLeft,scrollTop:a.scrollTop,scrollLeftNormalized:(0,_scrollLeft.getNormalizedScrollLeft)(a,N.direction),scrollWidth:a.scrollWidth,top:e.top,bottom:e.bottom,left:e.left,right:e.right}),!a||!1===S||0<(l=ae.current.children).length&&(o=l[le.get(S)],"production"!==process.env.NODE_ENV&&(o||console.error(["Material-UI: The value provided to the Tabs component is invalid.","None of the Tabs' children match with `".concat(S,"`."),le.keys?"You can provide one of the following values: ".concat(Array.from(le.keys()).join(", "),"."):null].join("\n"))),r=o?o.getBoundingClientRect():null),{tabsMeta:t,tabMeta:r}}function F(e){(0,_animate.default)(P,oe.current,e)}function A(e){var t=oe.current[P];L?t+=e:(t+=e*(W?-1:1),t*=W&&"reverse"===(0,_scrollLeft.detectScrollType)()?-1:1),F(t)}function V(){A(-oe.current[I])}function H(){A(oe.current[I])}var U=React.useState(!1),X=U[0],Y=U[1],K=React.useState({}),G=K[0],J=K[1],Q=React.useState({start:!1,end:!1}),Z=Q[0],$=Q[1],ee=React.useState({overflow:"hidden",marginBottom:null}),te=ee[0],re=ee[1],le=new Map,oe=React.useRef(null),ae=React.useRef(null),ne=(0,_useEventCallback.default)(function(){var e,t,r=O(),l=r.tabsMeta,o=r.tabMeta,a=0;o&&l&&(a=L?o.top-l.top+l.scrollTop:(t=W?l.scrollLeftNormalized+l.clientWidth-l.scrollWidth:l.scrollLeft,o.left-l.left+t));var n,i,s=(e={},(0,_defineProperty2.default)(e,M,a),(0,_defineProperty2.default)(e,j,o?o[j]:0),e);isNaN(G[M])||isNaN(G[j])?J(s):(n=Math.abs(G[M]-s[M]),i=Math.abs(G[j]-s[j]),(1<=n||1<=i)&&J(s))}),ie=React.useCallback(function(e){re({overflow:null,marginBottom:-e})},[]),se=(0,_useEventCallback.default)(function(){var e,t,r=O(),l=r.tabsMeta,o=r.tabMeta;o&&l&&(o[M]<l[M]?(e=l[P]+(o[M]-l[M]),F(e)):o[z]>l[z]&&(t=l[P]+(o[z]-l[z]),F(t)))}),ce=(0,_useEventCallback.default)(function(){var e,t,r,l,o,a,n,i,s;k&&"off"!==T&&(t=(e=oe.current).scrollTop,r=e.scrollHeight,l=e.clientHeight,o=e.scrollWidth,a=e.clientWidth,s=L?(i=1<t,t<r-l-1):(n=(0,_scrollLeft.getNormalizedScrollLeft)(oe.current,N.direction),i=W?n<o-a-1:1<n,W?1<n:n<o-a-1),i===Z.start&&s===Z.end||$({start:i,end:s}))});React.useEffect(function(){var e=(0,_debounce.default)(function(){ne(),ce()}),t=(0,_ownerWindow.default)(oe.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}},[ne,ce]);var ue=React.useCallback((0,_debounce.default)(function(){ce()}));React.useEffect(function(){return function(){ue.clear()}},[ue]),React.useEffect(function(){Y(!0)},[]),React.useEffect(function(){ne(),ce()}),React.useEffect(function(){se()},[se,G]),React.useImperativeHandle(o,function(){return{updateIndicator:ne,updateScrollButtons:ce}},[ne,ce]);var de=React.createElement(_TabIndicator.default,(0,_extends2.default)({className:s.indicator,orientation:v,color:p},g,{style:(0,_extends2.default)((0,_extends2.default)({},G),g.style)})),fe=0,pe=React.Children.map(i,function(e){if(!React.isValidElement(e))return null;"production"!==process.env.NODE_ENV&&(0,_reactIs.isFragment)(e)&&console.error(["Material-UI: The Tabs component doesn't accept a Fragment as a child.","Consider providing an array instead."].join("\n"));var t=void 0===e.props.value?fe:e.props.value;le.set(t,fe);var r=t===S;return fe+=1,React.cloneElement(e,{fullWidth:"fullWidth"===D,indicator:r&&!X&&de,selected:r,selectionFollowsFocus:R,onChange:b,textColor:C,value:t})}),be=function(){var e={};e.scrollbarSizeListener=k?React.createElement(_ScrollbarSize.default,{className:s.scrollable,onChange:ie}):null;var t=Z.start||Z.end,r=k&&("auto"===T&&t||"desktop"===T||"on"===T);return e.scrollButtonStart=r?React.createElement(m,(0,_extends2.default)({orientation:v,direction:W?"right":"left",onClick:V,disabled:!Z.start,className:(0,_clsx.default)(s.scrollButtons,"on"!==T&&s.scrollButtonsDesktop)},w)):null,e.scrollButtonEnd=r?React.createElement(m,(0,_extends2.default)({orientation:v,direction:W?"left":"right",onClick:H,disabled:!Z.end,className:(0,_clsx.default)(s.scrollButtons,"on"!==T&&s.scrollButtonsDesktop)},w)):null,e}();return React.createElement(d,(0,_extends2.default)({className:(0,_clsx.default)(s.root,c,L&&s.vertical),ref:t},B),be.scrollButtonStart,be.scrollbarSizeListener,React.createElement("div",{className:(0,_clsx.default)(s.scroller,k?s.scrollable:s.fixed),style:te,ref:oe,onScroll:ue},React.createElement("div",{"aria-label":r,"aria-labelledby":l,className:(0,_clsx.default)(s.flexContainer,L&&s.flexContainerVertical,n&&!k&&s.centered),onKeyDown:function(e){var t=e.target;if("tab"===t.getAttribute("role")){var r=null,l="vertical"!==v?"ArrowLeft":"ArrowUp",o="vertical"!==v?"ArrowRight":"ArrowDown";switch("vertical"!==v&&"rtl"===N.direction&&(l="ArrowRight",o="ArrowLeft"),e.key){case l:r=t.previousElementSibling||ae.current.lastChild;break;case o:r=t.nextElementSibling||ae.current.firstChild;break;case"Home":r=ae.current.firstChild;break;case"End":r=ae.current.lastChild}null!==r&&(r.focus(),e.preventDefault())}},ref:ae,role:"tablist"},pe),X&&de),be.scrollButtonEnd)});"production"!==process.env.NODE_ENV&&(Tabs.propTypes={action:_utils.refType,"aria-label":_propTypes.default.string,"aria-labelledby":_propTypes.default.string,centered:_propTypes.default.bool,children:_propTypes.default.node,classes:_propTypes.default.object.isRequired,className:_propTypes.default.string,component:_propTypes.default.elementType,indicatorColor:_propTypes.default.oneOf(["secondary","primary"]),onChange:_propTypes.default.func,orientation:_propTypes.default.oneOf(["horizontal","vertical"]),ScrollButtonComponent:_propTypes.default.elementType,scrollButtons:_propTypes.default.oneOf(["auto","desktop","on","off"]),selectionFollowsFocus:_propTypes.default.bool,TabIndicatorProps:_propTypes.default.object,TabScrollButtonProps:_propTypes.default.object,textColor:_propTypes.default.oneOf(["secondary","primary","inherit"]),value:_propTypes.default.any,variant:_propTypes.default.oneOf(["standard","scrollable","fullWidth"])});var _default=(0,_withStyles.default)(styles,{name:"MuiTabs"})(Tabs);exports.default=_default;