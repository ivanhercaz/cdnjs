"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_react=_interopRequireDefault(require("react")),_reactIs=require("react-is"),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_Popover=_interopRequireDefault(require("../Popover")),_MenuList=_interopRequireDefault(require("../MenuList")),_reactDom=_interopRequireDefault(require("react-dom")),_setRef=_interopRequireDefault(require("../utils/setRef")),_useTheme=_interopRequireDefault(require("../styles/useTheme")),RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},styles={paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}};exports.styles=styles;var Menu=_react.default.forwardRef(function(e,t){var r=e.autoFocus,o=void 0===r||r,u=e.children,a=e.classes,n=e.disableAutoFocusItem,s=void 0!==n&&n,p=e.MenuListProps,l=void 0===p?{}:p,i=e.onClose,d=e.onEntering,f=e.open,c=e.PaperProps,_=void 0===c?{}:c,y=e.PopoverClasses,T=e.transitionDuration,R=void 0===T?"auto":T,m=e.variant,v=void 0===m?"selectedMenu":m,b=(0,_objectWithoutProperties2.default)(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","variant"]),h=(0,_useTheme.default)(),q=o&&!s&&f,D=_react.default.useRef(null),P=_react.default.useRef(null),x=-1;_react.default.Children.map(u,function(e,t){_react.default.isValidElement(e)&&("production"!==process.env.NODE_ENV&&(0,_reactIs.isFragment)(e)&&console.error(["Material-UI: the Menu component doesn't accept a Fragment as a child.","Consider providing an array instead."].join("\n")),e.props.disabled||("menu"!==v&&e.props.selected||-1===x)&&(x=t))});var E=_react.default.Children.map(u,function(t,e){return e===x?_react.default.cloneElement(t,{ref:function(e){P.current=_reactDom.default.findDOMNode(e),(0,_setRef.default)(t.ref,e)}}):t});return _react.default.createElement(_Popover.default,(0,_extends2.default)({getContentAnchorEl:function(){return P.current},classes:y,onClose:i,onEntering:function(e,t){D.current&&D.current.adjustStyleForScrollbar(e,h),d&&d(e,t)},anchorOrigin:"rtl"===h.direction?RTL_ORIGIN:LTR_ORIGIN,transformOrigin:"rtl"===h.direction?RTL_ORIGIN:LTR_ORIGIN,PaperProps:(0,_extends2.default)({},_,{classes:(0,_extends2.default)({},_.classes,{root:a.paper})}),open:f,ref:t,transitionDuration:R},b),_react.default.createElement(_MenuList.default,(0,_extends2.default)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),i&&i(e,"tabKeyDown"))},actions:D,autoFocus:o&&(-1===x||s),autoFocusItem:q,variant:v},l,{className:(0,_clsx.default)(a.list,l.className)}),E))});"production"!==process.env.NODE_ENV&&(Menu.propTypes={anchorEl:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.func]),autoFocus:_propTypes.default.bool,children:_propTypes.default.node,classes:_propTypes.default.object.isRequired,disableAutoFocusItem:_propTypes.default.bool,MenuListProps:_propTypes.default.object,onClose:_propTypes.default.func,onEnter:_propTypes.default.func,onEntered:_propTypes.default.func,onEntering:_propTypes.default.func,onExit:_propTypes.default.func,onExited:_propTypes.default.func,onExiting:_propTypes.default.func,open:_propTypes.default.bool.isRequired,PaperProps:_propTypes.default.object,PopoverClasses:_propTypes.default.object,transitionDuration:_propTypes.default.oneOfType([_propTypes.default.number,_propTypes.default.shape({enter:_propTypes.default.number,exit:_propTypes.default.number}),_propTypes.default.oneOf(["auto"])]),variant:_propTypes.default.oneOf(["menu","selectedMenu"])});var _default=(0,_withStyles.default)(styles,{name:"MuiMenu"})(Menu);exports.default=_default;