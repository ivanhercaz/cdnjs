import _extends from"@babel/runtime/helpers/esm/extends";import _slicedToArray from"@babel/runtime/helpers/esm/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import _defineProperty from"@babel/runtime/helpers/esm/defineProperty";import React from"react";import ReactDOM from"react-dom";import PropTypes from"prop-types";import clsx from"clsx";import{elementAcceptingRef}from"@material-ui/utils";import{fade}from"../styles/colorManipulator";import withStyles from"../styles/withStyles";import capitalize from"../utils/capitalize";import Grow from"../Grow";import Popper from"../Popper";import useForkRef from"../utils/useForkRef";import setRef from"../utils/setRef";import{useIsFocusVisible}from"../utils/focusVisible";import useControlled from"../utils/useControlled";import useTheme from"../styles/useTheme";function round(e){return Math.round(1e5*e)/1e5}function arrowGenerator(){return{'&[x-placement*="bottom"] $arrow':{flip:!1,top:0,left:0,marginTop:"-0.95em",marginLeft:4,marginRight:4,width:"2em",height:"1em","&::before":{flip:!1,borderWidth:"0 1em 1em 1em",borderColor:"transparent transparent currentcolor transparent"}},'&[x-placement*="top"] $arrow':{flip:!1,bottom:0,left:0,marginBottom:"-0.95em",marginLeft:4,marginRight:4,width:"2em",height:"1em","&::before":{flip:!1,borderWidth:"1em 1em 0 1em",borderColor:"currentcolor transparent transparent transparent"}},'&[x-placement*="right"] $arrow':{flip:!1,left:0,marginLeft:"-0.95em",marginTop:4,marginBottom:4,height:"2em",width:"1em","&::before":{flip:!1,borderWidth:"1em 1em 1em 0",borderColor:"transparent currentcolor transparent transparent"}},'&[x-placement*="left"] $arrow':{flip:!1,right:0,marginRight:"-0.95em",marginTop:4,marginBottom:4,height:"2em",width:"1em","&::before":{flip:!1,borderWidth:"1em 0 1em 1em",borderColor:"transparent transparent transparent currentcolor"}}}}export var styles=function(e){return{popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none",flip:!1},popperInteractive:{pointerEvents:"auto"},popperArrow:arrowGenerator(),tooltip:{backgroundColor:fade(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:"".concat(round(1.4),"em"),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{position:"absolute",fontSize:6,color:fade(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat(round(16/14),"em"),fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:_defineProperty({transformOrigin:"right center",margin:"0 24px "},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementRight:_defineProperty({transformOrigin:"left center",margin:"0 24px"},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementTop:_defineProperty({transformOrigin:"center bottom",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"}),tooltipPlacementBottom:_defineProperty({transformOrigin:"center top",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"})}};var hystersisOpen=!1,hystersisTimer=null;export function testReset(){hystersisOpen=!1,clearTimeout(hystersisTimer)};var Tooltip=React.forwardRef(function(e,t){var r=e.arrow,o=void 0!==r&&r,n=e.children,i=e.classes,s=e.disableFocusListener,a=void 0!==s&&s,p=e.disableHoverListener,l=void 0!==p&&p,c=e.disableTouchListener,u=void 0!==c&&c,m=e.enterDelay,d=void 0===m?200:m,f=e.enterNextDelay,h=void 0===f?0:f,T=e.enterTouchDelay,y=void 0===T?700:T,b=e.id,g=e.interactive,v=void 0!==g&&g,R=e.leaveDelay,P=void 0===R?0:R,x=e.leaveTouchDelay,w=void 0===x?1500:x,O=e.onClose,M=e.onOpen,D=e.open,E=e.placement,F=void 0===E?"bottom":E,L=e.PopperProps,N=e.title,_=e.TransitionComponent,C=void 0===_?Grow:_,S=e.TransitionProps,k=_objectWithoutProperties(e,["arrow","children","classes","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","id","interactive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperProps","title","TransitionComponent","TransitionProps"]),W=useTheme(),A=React.useState(),B=A[0],j=A[1],z=React.useState(null),I=z[0],V=z[1],G=React.useRef(!1),H=React.useRef(),$=React.useRef(),q=React.useRef(),U=React.useRef(),J=useControlled({controlled:D,default:!1,name:"Tooltip"}),K=_slicedToArray(J,2),Q=K[0],X=K[1],Y=Q;if("production"!==process.env.NODE_ENV){var Z=React.useRef(void 0!==D).current;React.useEffect(function(){B&&B.disabled&&!Z&&""!==N&&"button"===B.tagName.toLowerCase()&&console.error(["Material-UI: you are providing a disabled `button` child to the Tooltip component.","A disabled element does not fire events.","Tooltip needs to listen to the child element's events to display the title.","","Add a simple wrapper element, such as a `span`."].join("\n"))},[N,B,Z])}var ee=React.useState(),te=ee[0],re=ee[1],oe=b||te;React.useEffect(function(){Y&&!te&&re("mui-tooltip-".concat(Math.round(1e5*Math.random())))},[Y,te]),React.useEffect(function(){return function(){clearTimeout(H.current),clearTimeout($.current),clearTimeout(q.current),clearTimeout(U.current)}},[]);var ne=function(e){clearTimeout(hystersisTimer),hystersisOpen=!0,X(!0),M&&M(e)},ie=function(e){var t=n.props;"mouseover"===e.type&&t.onMouseOver&&e.currentTarget===B&&t.onMouseOver(e),G.current&&"touchstart"!==e.type||(B&&B.removeAttribute("title"),clearTimeout($.current),clearTimeout(q.current),d||hystersisOpen&&h?(e.persist(),$.current=setTimeout(function(){ne(e)},hystersisOpen?h:d)):ne(e))},se=useIsFocusVisible(),ae=se.isFocusVisible,pe=se.onBlurVisible,le=se.ref,ce=React.useState(!1),ue=ce[0],me=ce[1],de=function(e){clearTimeout(hystersisTimer),hystersisTimer=setTimeout(function(){hystersisOpen=!1},800+P),X(!1),O&&O(e),clearTimeout(H.current),H.current=setTimeout(function(){G.current=!1},W.transitions.duration.shortest)},fe=function(e){var t=n.props;"blur"===e.type&&(t.onBlur&&e.currentTarget===B&&t.onBlur(e),ue&&(me(!1),pe())),"mouseleave"===e.type&&t.onMouseLeave&&e.currentTarget===B&&t.onMouseLeave(e),clearTimeout($.current),clearTimeout(q.current),e.persist(),q.current=setTimeout(function(){de(e)},P)},he=useForkRef(j,t),Te=useForkRef(le,he),ye=React.useCallback(function(e){setRef(Te,ReactDOM.findDOMNode(e))},[Te]),be=useForkRef(n.ref,ye);""===N&&(Y=!1);var ge=_extends({"aria-describedby":Y?oe:null,title:!Y&&!l&&"string"==typeof N?N:null},k,{},n.props,{className:clsx(k.className,n.props.className)});u||(ge.onTouchStart=function(e){G.current=!0;var t=n.props;t.onTouchStart&&t.onTouchStart(e),clearTimeout(q.current),clearTimeout(H.current),clearTimeout(U.current),e.persist(),U.current=setTimeout(function(){ie(e)},y)},ge.onTouchEnd=function(e){n.props.onTouchEnd&&n.props.onTouchEnd(e),clearTimeout(U.current),clearTimeout(q.current),e.persist(),q.current=setTimeout(function(){de(e)},w)}),l||(ge.onMouseOver=ie,ge.onMouseLeave=fe),a||(ge.onFocus=function(e){B||j(e.currentTarget),ae(e)&&(me(!0),ie(e));var t=n.props;t.onFocus&&e.currentTarget===B&&t.onFocus(e)},ge.onBlur=fe);var ve=v?{onMouseOver:ge.onMouseOver,onMouseLeave:ge.onMouseLeave,onFocus:ge.onFocus,onBlur:ge.onBlur}:{};"production"!==process.env.NODE_ENV&&n.props.title&&console.error(["Material-UI: you have provided a `title` prop to the child of <Tooltip />.","Remove this title prop `".concat(n.props.title,"` or the Tooltip component.")].join("\n"));var Re=React.useMemo(function(){return{modifiers:{arrow:{enabled:Boolean(I),element:I}}}},[I]);return React.createElement(React.Fragment,null,React.cloneElement(n,_extends({ref:be},ge)),React.createElement(Popper,_extends({className:clsx(i.popper,v&&i.popperInteractive,o&&i.popperArrow),placement:F,anchorEl:B,open:!!B&&Y,id:ge["aria-describedby"],transition:!0,popperOptions:Re},ve,L),function(e){var t=e.placement,r=e.TransitionProps;return React.createElement(C,_extends({timeout:W.transitions.duration.shorter},r,S),React.createElement("div",{className:clsx(i.tooltip,i["tooltipPlacement".concat(capitalize(t.split("-")[0]))],G.current&&i.touch,o&&i.tooltipArrow)},N,o?React.createElement("span",{className:i.arrow,ref:V}):null))}))});"production"!==process.env.NODE_ENV&&(Tooltip.propTypes={arrow:PropTypes.bool,children:elementAcceptingRef.isRequired,classes:PropTypes.object.isRequired,disableFocusListener:PropTypes.bool,disableHoverListener:PropTypes.bool,disableTouchListener:PropTypes.bool,enterDelay:PropTypes.number,enterNextDelay:PropTypes.number,enterTouchDelay:PropTypes.number,id:PropTypes.string,interactive:PropTypes.bool,leaveDelay:PropTypes.number,leaveTouchDelay:PropTypes.number,onClose:PropTypes.func,onOpen:PropTypes.func,open:PropTypes.bool,placement:PropTypes.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),PopperProps:PropTypes.object,title:PropTypes.node.isRequired,TransitionComponent:PropTypes.elementType,TransitionProps:PropTypes.object});export default withStyles(styles,{name:"MuiTooltip"})(Tooltip);