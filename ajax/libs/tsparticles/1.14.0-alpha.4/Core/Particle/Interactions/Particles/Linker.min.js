"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ColorUtils_1=require("../../../../Utils/ColorUtils"),Constants_1=require("../../../../Utils/Constants"),QuadTree_1=require("../../../../Utils/QuadTree"),Utils_1=require("../../../../Utils/Utils"),Linker=function(){function e(){}return e.link=function(e,i){for(var n,t=e.particlesOptions.lineLinked.opacity,o=null!==(n=e.lineLinkedDistance)&&void 0!==n?n:i.retina.lineLinkedDistance,s={x:e.position.x+e.offset.x,y:e.position.y+e.offset.y},l=0,r=i.particles.quadTree.query(new QuadTree_1.Circle(s.x,s.y,o));l<r.length;l++){var a=r[l];if(e!==a&&a.particlesOptions.lineLinked.enable){var d={x:a.position.x+a.offset.x,y:a.position.y+a.offset.y},p=t-Utils_1.Utils.getDistanceBetweenCoordinates(s,d)*t/o;if(0<p){if(!i.particles.lineLinkedColor){var c=e.particlesOptions.lineLinked.color,u="string"==typeof c?c:c.value;u!==Constants_1.Constants.randomColorValue||e.particlesOptions.lineLinked.consent?i.particles.lineLinkedColor=ColorUtils_1.ColorUtils.colorToRgb({value:u}):e.particlesOptions.lineLinked.blink?i.particles.lineLinkedColor=Constants_1.Constants.randomColorValue:i.particles.lineLinkedColor=Constants_1.Constants.midColorValue}-1==a.links.indexOf(e)&&-1==e.links.indexOf(a)&&(e.links.push(a),i.canvas.drawLinkedLine(e,a,p))}}}},e}();exports.Linker=Linker;