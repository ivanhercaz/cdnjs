"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var QuadTree_1=require("../../../../Utils/QuadTree"),Infecter=function(){function e(){}return e.infect=function(t,e){var i,n;if(void 0!==t.infectionStage){var o=e.options.infection;if(o.enable&&!(o.stages.length<1))for(var a=o.stages[t.infectionStage],f=e.retina.pixelRatio,r=2*t.size.value+a.radius*f,c={x:t.position.x+t.offset.x,y:t.position.y+t.offset.y},s=null!==(i=a.infectedStage)&&void 0!==i?i:t.infectionStage,u=e.particles.quadTree.query(new QuadTree_1.Circle(c.x,c.y,r)).filter(function(e){return void 0===e.infectionStage||e.infectionStage!==t.infectionStage}),g=a.rate,l=u.length,d=0,S=u;d<S.length;d++){var v=S[d];if(Math.random()<g/l)if(void 0===v.infectionStage)v.startInfection(s);else if(v.infectionStage<t.infectionStage)v.updateInfection(s);else if(v.infectionStage>t.infectionStage){var p=o.stages[v.infectionStage],x=null!==(n=null==p?void 0:p.infectedStage)&&void 0!==n?n:v.infectionStage;t.updateInfection(x)}}}},e}();exports.Infecter=Infecter;