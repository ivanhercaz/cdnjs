"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var SimplexNoise=function(){function pr(r){this.permMod12=new Uint8Array,this.grad3=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),this.grad4=new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),r=r||Math.random,this.p=pr.buildPermutationTable(r),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var t=0;t<512;t++)this.perm[t]=this.p[255&t],this.permMod12[t]=this.perm[t]%12}return pr.buildPermutationTable=function(r){var t,e=new Uint8Array(256);for(t=0;t<256;t++)e[t]=t;for(t=0;t<255;t++){var a=t+~~(r()*(256-t)),i=e[t];e[t]=e[a],e[a]=i}return e},pr.prototype.noise2D=function(r,t){var e,a,i=this.permMod12,o=this.perm,s=this.grad3,G=0,n=0,h=0,v=(r+t)*pr.F2,f=Math.floor(r+v),l=Math.floor(t+v),p=(f+l)*pr.G2,M=r-(f-p),u=t-(l-p);a=u<M?(e=1,0):(e=0,1);var m=M-e+pr.G2,d=u-a+pr.G2,y=M-1+2*pr.G2,c=u-1+2*pr.G2,F=255&f,w=255&l,A=.5-M*M-u*u;if(0<=A){var b=3*i[F+o[w]];G=(A*=A)*A*(s[b]*M+s[1+b]*u)}var g=.5-m*m-d*d;if(0<=g){var x=3*i[F+e+o[w+a]];n=(g*=g)*g*(s[x]*m+s[1+x]*d)}var q=.5-y*y-c*c;if(0<=q){var U=3*i[1+F+o[1+w]];h=(q*=q)*q*(s[U]*y+s[1+U]*c)}return 70*(G+n+h)},pr.prototype.noise3D=function(r,t,e){var a,i,o,s,G,n,h,v,f,l,p=this.permMod12,M=this.perm,u=this.grad3,m=(r+t+e)*pr.F3,d=Math.floor(r+m),y=Math.floor(t+m),c=Math.floor(e+m),F=(d+y+c)*pr.G3,w=r-(d-F),A=t-(y-F),b=e-(c-F);l=A<=w?b<=A?(f=v=G=1,h=n=0):v=b<=w?(f=h=n=0,G=1):(f=n=G=0,h=1):A<b?(v=n=G=0,f=h=1):w<b?(v=h=G=0,f=n=1):(f=v=n=1,h=G=0);var g=w-G+pr.G3,x=A-n+pr.G3,q=b-h+pr.G3,U=w-v+2*pr.G3,D=A-f+2*pr.G3,N=b-l+2*pr.G3,P=w-1+3*pr.G3,S=A-1+3*pr.G3,T=b-1+3*pr.G3,_=255&d,j=255&y,O=255&c,k=.6-w*w-A*A-b*b;if(k<0)a=0;else{var z=3*p[_+M[j+M[O]]];a=(k*=k)*k*(u[z]*w+u[1+z]*A+u[2+z]*b)}var B=.6-g*g-x*x-q*q;if(B<0)i=0;else{var C=3*p[_+G+M[j+n+M[O+h]]];i=(B*=B)*B*(u[C]*g+u[1+C]*x+u[2+C]*q)}var E=.6-U*U-D*D-N*N;if(E<0)o=0;else{var H=3*p[_+v+M[j+f+M[O+l]]];o=(E*=E)*E*(u[H]*U+u[1+H]*D+u[2+H]*N)}var I=.6-P*P-S*S-T*T;if(I<0)s=0;else{var J=3*p[1+_+M[1+j+M[1+O]]];s=(I*=I)*I*(u[J]*P+u[1+J]*S+u[2+J]*T)}return 32*(a+i+o+s)},pr.prototype.noise4D=function(r,t,e,a){var i,o,s,G,n,h,v,f,l,p,M,u,m,d,y,c,F,w=this.perm,A=this.grad4,b=(r+t+e+a)*pr.F4,g=Math.floor(r+b),x=Math.floor(t+b),q=Math.floor(e+b),U=Math.floor(a+b),D=(g+x+q+U)*pr.G4,N=r-(g-D),P=t-(x-D),S=e-(q-D),T=a-(U-D),_=0,j=0,O=0,k=0;P<N?_++:j++,S<N?_++:O++,T<N?_++:k++,S<P?j++:O++,T<P?j++:k++,T<S?O++:k++;var z=N-(h=3<=_?1:0)+pr.G4,B=P-(v=3<=j?1:0)+pr.G4,C=S-(f=3<=O?1:0)+pr.G4,E=T-(l=3<=k?1:0)+pr.G4,H=N-(p=2<=_?1:0)+2*pr.G4,I=P-(M=2<=j?1:0)+2*pr.G4,J=S-(u=2<=O?1:0)+2*pr.G4,K=T-(m=2<=k?1:0)+2*pr.G4,L=N-(d=1<=_?1:0)+3*pr.G4,Q=P-(y=1<=j?1:0)+3*pr.G4,R=S-(c=1<=O?1:0)+3*pr.G4,V=T-(F=1<=k?1:0)+3*pr.G4,W=N-1+4*pr.G4,X=P-1+4*pr.G4,Y=S-1+4*pr.G4,Z=T-1+4*pr.G4,$=255&g,rr=255&x,tr=255&q,er=255&U,ar=.6-N*N-P*P-S*S-T*T;if(ar<0)i=0;else{var ir=w[$+w[rr+w[tr+w[er]]]]%32*4;i=(ar*=ar)*ar*(A[ir]*N+A[1+ir]*P+A[2+ir]*S+A[3+ir]*T)}var or=.6-z*z-B*B-C*C-E*E;if(or<0)o=0;else{var sr=w[$+h+w[rr+v+w[tr+f+w[er+l]]]]%32*4;o=(or*=or)*or*(A[sr]*z+A[1+sr]*B+A[2+sr]*C+A[3+sr]*E)}var Gr=.6-H*H-I*I-J*J-K*K;if(Gr<0)s=0;else{var nr=w[$+p+w[rr+M+w[tr+u+w[er+m]]]]%32*4;s=(Gr*=Gr)*Gr*(A[nr]*H+A[1+nr]*I+A[2+nr]*J+A[3+nr]*K)}var hr=.6-L*L-Q*Q-R*R-V*V;if(hr<0)G=0;else{var vr=w[$+d+w[rr+y+w[tr+c+w[er+F]]]]%32*4;G=(hr*=hr)*hr*(A[vr]*L+A[1+vr]*Q+A[2+vr]*R+A[3+vr]*V)}var fr=.6-W*W-X*X-Y*Y-Z*Z;if(fr<0)n=0;else{var lr=w[1+$+w[1+rr+w[1+tr+w[1+er]]]]%32*4;n=(fr*=fr)*fr*(A[lr]*W+A[1+lr]*X+A[2+lr]*Y+A[3+lr]*Z)}return 27*(i+o+s+G+n)},pr.F2=.5*(Math.sqrt(3)-1),pr.G2=(3-Math.sqrt(3))/6,pr.F3=1/3,pr.G3=1/6,pr.F4=(Math.sqrt(5)-1)/4,pr.G4=(5-Math.sqrt(5))/20,pr}();exports.SimplexNoise=SimplexNoise;