"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ColorUtils_1=require("./Utils/ColorUtils"),Utils_1=require("./Utils/Utils"),Absorber=function(){function i(i,t,s){var o,e;this.container=i,this.initialPosition=s;var a=(this.options=t).size.value*i.retina.pixelRatio,n="boolean"==typeof t.size.random?t.size.random:t.size.random.enable,r="boolean"==typeof t.size.random?1:t.size.random.minimumValue;n&&(a=Utils_1.Utils.randomInRange(r,a)),this.opacity=this.options.opacity,this.size=a*i.retina.pixelRatio,this.mass=this.size*t.size.density;var l=t.size.limit;this.limit=void 0!==l?l*this.container.retina.pixelRatio:l;var h="string"==typeof t.color?{value:t.color}:t.color;this.color=null!==(o=ColorUtils_1.ColorUtils.colorToRgb(h))&&void 0!==o?o:{b:0,g:0,r:0},this.position=null!==(e=this.initialPosition)&&void 0!==e?e:this.calcPosition()}return i.prototype.attract=function(i){var t=this.container,s=this.position.x-(i.position.x+i.offset.x),o=this.position.y-(i.position.y+i.offset.y),e=Math.sqrt(Math.abs(s*s+o*o)),a=Math.atan2(s,o)*(180/Math.PI),n=this.mass/Math.pow(e,2);if(e<this.size+i.size.value){var r=!1,l=.033*i.size.value;return this.size>i.size.value&&e<this.size-i.size.value?(t.particles.remove(i),r=!0):(i.size.value-=l,i.velocity.horizontal+=Math.sin(a*(Math.PI/180))*n,i.velocity.vertical+=Math.cos(a*(Math.PI/180))*n),(void 0===this.limit||this.size<this.limit)&&(this.size+=l),this.mass+=l*this.options.size.density,!r}return i.velocity.horizontal+=Math.sin(a*(Math.PI/180))*n,i.velocity.vertical+=Math.cos(a*(Math.PI/180))*n,!0},i.prototype.resize=function(){var i=this.initialPosition;this.position=i&&Utils_1.Utils.isPointInside(i,this.container.canvas.size)?i:this.calcPosition()},i.prototype.draw=function(){this.container.canvas.drawAbsorber(this)},i.prototype.calcPosition=function(){var i,t=this.container,s=null!==(i=this.options.position)&&void 0!==i?i:{x:100*Math.random(),y:100*Math.random()};return{x:s.x/100*t.canvas.size.width,y:s.y/100*t.canvas.size.height}},i}();exports.Absorber=Absorber;