import{ShapeType}from"../../Enums/ShapeType";import{ColorUtils}from"./ColorUtils";export class ShapeUtils{static drawShape(e,a,t,r,o){var i,n;const h={x:a.offset.x,y:a.offset.y},s=null!==(n=null===(i=a.polygon)||void 0===i?void 0:i.sides)&&void 0!==n?n:5;switch(a.shape){case ShapeType.line:this.drawLineShape(e,t,r,o);break;case ShapeType.circle:this.drawCircleShape(e,t,h);break;case ShapeType.edge:case ShapeType.square:this.drawSquareShape(e,t);break;case ShapeType.triangle:this.drawTriangleShape(e,t);break;case ShapeType.polygon:this.drawPolygonShape(e,t,s);break;case ShapeType.star:this.drawStarShape(e,t,s);break;case ShapeType.heart:this.drawHeartShape(e,t);break;case ShapeType.char:case ShapeType.character:this.drawTextShape(e,a.character,a.text,t);break;case ShapeType.image:this.drawImageShape(e,a,t)}}static drawTriangleShape(e,a){const t={x:-a,y:a/1.66},r={count:{denominator:2,numerator:3},length:2*a};this.drawGenericPolygonShape(e,t,r)}static drawPolygonShape(e,a,t){const r={x:-a/(t/3.5),y:-a/.76},o={count:{denominator:1,numerator:t},length:2.66*a/(t/3)};this.drawGenericPolygonShape(e,r,o)}static drawStarShape(e,a,t){const r={x:2*-a/(t/4),y:-a/1.52},o={count:{denominator:2,numerator:t},length:2*a*2.66/(t/3)};this.drawGenericPolygonShape(e,r,o)}static drawLineShape(e,a,t,r){r&&(e.moveTo(0,-a/2),e.lineTo(0,a/2),e.strokeStyle=ColorUtils.getStyleFromColor(r),e.lineWidth=t.width,e.stroke())}static drawCircleShape(e,a,t){e.arc(t.x,t.y,a,0,2*Math.PI,!1)}static drawSquareShape(e,a){e.rect(-a,-a,2*a,2*a)}static drawHeartShape(e,a){const t=-a/2,r=-a/2;e.moveTo(t,r+a/4),e.quadraticCurveTo(t,r,t+a/4,r),e.quadraticCurveTo(t+a/2,r,t+a/2,r+a/4),e.quadraticCurveTo(t+a/2,r,t+3*a/4,r),e.quadraticCurveTo(t+a,r,t+a,r+a/4),e.quadraticCurveTo(t+a,r+a/2,t+3*a/4,r+3*a/4),e.lineTo(t+a/2,r+a),e.lineTo(t+a/4,r+3*a/4),e.quadraticCurveTo(t,r+a/2,t,r+a/4)}static drawTextShape(e,a,t,r){if(void 0===t||void 0===a)return;const o=a.style,i=a.weight,n=2*Math.round(r),h=a.font,s=a.fill;e.font=`${o} ${i} ${n}px "${h}"`;const c={x:-r/2,y:r/2};s?e.fillText(t,c.x,c.y):e.strokeText(t,c.x,c.y)}static drawGenericPolygonShape(e,a,t){const r=t.count.numerator*t.count.denominator,o=t.count.numerator/t.count.denominator,i=180*(o-2)/o,n=Math.PI-Math.PI*i/180;if(e){e.save(),e.beginPath(),e.translate(a.x,a.y),e.moveTo(0,0);for(let a=0;a<r;a++)e.lineTo(t.length,0),e.translate(t.length,0),e.rotate(n);e.fill(),e.restore()}}static drawImageShape(e,a,t){var r;if(!e)return;const o=null===(r=a.image)||void 0===r?void 0:r.data.obj;if(!o)return;let i=1;a.image&&(i=a.image.ratio);const n={x:-t,y:-t};e.drawImage(o,n.x,n.y,2*t,2*t/i)}};