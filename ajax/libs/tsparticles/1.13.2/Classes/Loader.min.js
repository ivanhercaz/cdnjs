"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),Container_1=require("./Container"),Constants_1=require("./Utils/Constants"),Utils_1=require("./Utils/Utils"),tsParticlesDom=[],Loader=function(){function d(){}return d.dom=function(){return tsParticlesDom=tsParticlesDom||[]},d.domItem=function(t){var e=d.dom(),r=e[t];if(r&&!r.destroyed)return r;e.splice(t,1)},d.loadFromArray=function(e,r,n){return tslib_1.__awaiter(this,void 0,void 0,function(){return tslib_1.__generator(this,function(t){return[2,d.load(e,Utils_1.Utils.itemFromArray(r,n))]})})},d.setFromArray=function(e,r,n,s){return tslib_1.__awaiter(this,void 0,void 0,function(){return tslib_1.__generator(this,function(t){return[2,d.set(e,r,Utils_1.Utils.itemFromArray(n,s))]})})},d.load=function(r,n){return tslib_1.__awaiter(this,void 0,void 0,function(){var e;return tslib_1.__generator(this,function(t){return(e=document.getElementById(r))?[2,this.set(r,e,n)]:[2]})})},d.set=function(c,l,u){return tslib_1.__awaiter(this,void 0,void 0,function(){var e,r,n,s,a,i,o;return tslib_1.__generator(this,function(t){switch(t.label){case 0:return e=d.dom(),0<=(r=e.findIndex(function(t){return t.id===c}))&&(n=this.domItem(r))&&!n.destroyed&&(n.destroy(),e.splice(r,1)),"canvas"===l.tagName?(s=l,a=!1):(i=l.getElementsByTagName("canvas")).length?((s=i[0]).className||(s.className=Constants_1.Constants.canvasClass),a=!1):(a=!0,(s=document.createElement("canvas")).className=Constants_1.Constants.canvasClass,s.style.width="100%",s.style.height="100%",l.appendChild(s)),o=new Container_1.Container(c,u),0<=r?e.splice(r,0,o):e.push(o),o.canvas.loadCanvas(s,a),[4,o.start()];case 1:return t.sent(),[2,o]}})})},d.loadJSON=function(n,s){return tslib_1.__awaiter(this,void 0,void 0,function(){var e,r;return tslib_1.__generator(this,function(t){switch(t.label){case 0:return[4,fetch(s)];case 1:return(e=t.sent()).ok?[4,e.json()]:[3,3];case 2:return(r=t.sent())instanceof Array?[2,d.loadFromArray(n,r)]:[2,d.load(n,r)];case 3:console.error("Error tsParticles - fetch status: "+e.status),console.error("Error tsParticles - File config not found"),t.label=4;case 4:return[2]}})})},d.setJSON=function(n,s,a){return tslib_1.__awaiter(this,void 0,void 0,function(){var e,r;return tslib_1.__generator(this,function(t){switch(t.label){case 0:return[4,fetch(a)];case 1:return(e=t.sent()).ok?[4,e.json()]:[3,3];case 2:return(r=t.sent())instanceof Array?[2,d.setFromArray(n,s,r)]:[2,d.set(n,s,r)];case 3:console.error("Error tsParticles - fetch status: "+e.status),console.error("Error tsParticles - File config not found"),t.label=4;case 4:return[2]}})})},d.setOnClickHandler=function(t){var e=d.dom();if(0===e.length)throw new Error("Can only set click handlers after calling tsParticles.load() or tsParticles.loadJSON()");for(var r=0,n=e;r<n.length;r++){var s=n[r].interactivity.element;s&&s.addEventListener("click",t)}},d}();exports.Loader=Loader;