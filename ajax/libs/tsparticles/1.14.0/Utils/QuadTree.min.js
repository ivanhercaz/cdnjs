"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Rectangle_1=require("./Rectangle"),QuadTree=function(){function n(t,e){this.rectangle=t,this.capacity=e,this.points=[],this.divided=!1}return n.prototype.subdivide=function(){var t=this.rectangle.position.x,e=this.rectangle.position.y,i=this.rectangle.size.width,s=this.rectangle.size.height;this.northEast=new n(new Rectangle_1.Rectangle(t,e,i/2,s/2),this.capacity),this.northWest=new n(new Rectangle_1.Rectangle(t+i/2,e,i/2,s/2),this.capacity),this.southEast=new n(new Rectangle_1.Rectangle(t,e+s/2,i/2,s/2),this.capacity),this.southWest=new n(new Rectangle_1.Rectangle(t+i/2,e+s/2,i/2,s/2),this.capacity),this.divided=!0},n.prototype.insert=function(t){var e,i,s,n;return!!this.rectangle.contains(t.position)&&(this.points.length<this.capacity?(this.points.push(t),!0):(this.divided||this.subdivide(),!(null===(e=this.northEast)||void 0===e||!e.insert(t))||(!(null===(i=this.northWest)||void 0===i||!i.insert(t))||(!(null===(s=this.southEast)||void 0===s||!s.insert(t))||!(null===(n=this.southWest)||void 0===n||!n.insert(t))))))},n.prototype.query=function(t,e){var i,s,n,h,r=null!=e?e:[];if(!t.intersects(this.rectangle))return[];for(var o=0,a=this.points;o<a.length;o++){var c=a[o];t.contains(c.position)&&r.push(c.particle)}return this.divided&&(null!==(i=this.northEast)&&void 0!==i&&i.query(t,r),null!==(s=this.northWest)&&void 0!==s&&s.query(t,r),null!==(n=this.southEast)&&void 0!==n&&n.query(t,r),null!==(h=this.southWest)&&void 0!==h&&h.query(t,r)),r},n}();exports.QuadTree=QuadTree;