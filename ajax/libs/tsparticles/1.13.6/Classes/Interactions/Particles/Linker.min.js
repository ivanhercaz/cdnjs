"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ColorUtils_1=require("../../Utils/ColorUtils"),Constants_1=require("../../Utils/Constants"),Linker=function(){function i(){}return i.link=function(i,n){for(var e,t=i.particlesOptions.lineLinked.opacity,l=null!==(e=i.lineLinkedDistance)&&void 0!==e?e:n.retina.lineLinkedDistance,o={x:i.position.x+i.offset.x,y:i.position.y+i.offset.y},s=0,r=n.particles.spatialGrid.queryRadiusWithDistance(o,l);s<r.length;s++){var a=r[s];if(i!==a.particle&&a.particle.particlesOptions.lineLinked.enable){var c=t-a.distance*t/l;if(0<c){if(!n.particles.lineLinkedColor){var p=i.particlesOptions.lineLinked.color,d="string"==typeof p?p:p.value;d!==Constants_1.Constants.randomColorValue||i.particlesOptions.lineLinked.consent?n.particles.lineLinkedColor=ColorUtils_1.ColorUtils.colorToRgb({value:d}):i.particlesOptions.lineLinked.blink?n.particles.lineLinkedColor=Constants_1.Constants.randomColorValue:n.particles.lineLinkedColor=Constants_1.Constants.midColorValue}-1==a.particle.links.indexOf(i)&&-1==i.links.indexOf(a.particle)&&(i.links.push(a.particle),n.canvas.drawLinkedLine(i,a.particle,c))}}}},i}();exports.Linker=Linker;