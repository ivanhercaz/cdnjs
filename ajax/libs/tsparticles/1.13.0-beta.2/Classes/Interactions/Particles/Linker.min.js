"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ColorUtils_1=require("../../Utils/ColorUtils"),Constants_1=require("../../Utils/Constants"),Linker=function(){function i(){}return i.link=function(i,n){for(var e,t=i.particlesOptions.lineLinked.opacity,l=null!==(e=i.lineLinkedDistance)&&void 0!==e?e:n.retina.lineLinkedDistance,o=0,r=n.particles.spatialGrid.queryRadiusWithDistance(i.position,l);o<r.length;o++){var s=r[o];if(s&&i!==s.particle&&s.particle.particlesOptions.lineLinked.enable){var a=t-s.distance*t/l;if(0<a){if(!n.particles.lineLinkedColor){var c=i.particlesOptions.lineLinked.color,p="string"==typeof c?c:c.value;p!==Constants_1.Constants.randomColorValue||i.particlesOptions.lineLinked.consent?n.particles.lineLinkedColor=ColorUtils_1.ColorUtils.colorToRgb({value:p}):i.particlesOptions.lineLinked.blink?n.particles.lineLinkedColor=Constants_1.Constants.randomColorValue:n.particles.lineLinkedColor=Constants_1.Constants.midColorValue}-1==s.particle.links.indexOf(i)&&-1==i.links.indexOf(s.particle)&&(i.links.push(s.particle),n.canvas.drawLinkedLine(i,s.particle,a))}}}},i}();exports.Linker=Linker;