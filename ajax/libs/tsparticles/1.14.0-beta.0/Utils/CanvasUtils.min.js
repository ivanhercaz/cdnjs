"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ColorUtils_1=require("./ColorUtils"),CanvasUtils=function(){function o(){}return o.paintBase=function(o,t,e){o.save(),o.fillStyle=null!=e?e:"rgba(0,0,0,0)",o.fillRect(0,0,t.width,t.height),o.restore()},o.clear=function(o,t){o.clearRect(0,0,t.width,t.height)},o.drawLinkedLine=function(o,t,e,r,l,i,a,s){var n;o.beginPath(),o.moveTo(e.x,e.y),o.lineTo(r.x,r.y),o.closePath(),o.lineWidth=t,l&&(o.globalCompositeOperation="destination-out"),o.strokeStyle=ColorUtils_1.ColorUtils.getStyleFromColor(i,a),!s.enable||(n="string"==typeof s.color?ColorUtils_1.ColorUtils.stringToRgb(s.color):ColorUtils_1.ColorUtils.colorToRgb(s.color))&&(o.shadowBlur=s.blur,o.shadowColor=ColorUtils_1.ColorUtils.getStyleFromColor(n)),o.stroke()},o.drawConnectLine=function(o,t,e,r,l){o.save(),o.beginPath(),o.moveTo(r.x,r.y),o.lineTo(l.x,l.y),o.closePath(),o.lineWidth=t,o.strokeStyle=e,o.stroke(),o.restore()},o.gradient=function(o,t,e,r){var l=Math.floor(e.size.value/t.size.value);if(t.color&&e.color){var i=t.getPosition(),a=e.getPosition(),s=ColorUtils_1.ColorUtils.mix(t.color,e.color,t.size.value,e.size.value),n=o.createLinearGradient(i.x,i.y,a.x,a.y);return n.addColorStop(0,ColorUtils_1.ColorUtils.getStyleFromColor(t.color,r)),n.addColorStop(1<l?1:l,ColorUtils_1.ColorUtils.getStyleFromColor(s,r)),n.addColorStop(1,ColorUtils_1.ColorUtils.getStyleFromColor(e.color,r)),n}},o.drawGrabLine=function(o,t,e,r,l,i){o.save(),o.beginPath(),o.moveTo(e.x,e.y),o.lineTo(r.x,r.y),o.closePath(),o.strokeStyle=ColorUtils_1.ColorUtils.getStyleFromColor(l,i),o.lineWidth=t,o.stroke(),o.restore()},o.drawParticle=function(o,t,e,r,l,i,a,s,n){var C=e.getPosition();t.save(),t.translate(C.x,C.y),t.beginPath(),0!==e.angle&&t.rotate(e.angle*Math.PI/180),i&&(t.globalCompositeOperation="destination-out");var d=e.shadowColor;n.enable&&d&&(t.shadowBlur=n.blur,t.shadowColor=ColorUtils_1.ColorUtils.getStyleFromColor(d),t.shadowOffsetX=n.offset.x,t.shadowOffsetY=n.offset.y),t.fillStyle=l;var c=e.stroke;0<c.width&&e.strokeColor&&(t.strokeStyle=ColorUtils_1.ColorUtils.getStyleFromColor(e.strokeColor,e.stroke.opacity),t.lineWidth=c.width),this.drawShape(o,t,e,a,s,r),e.close&&t.closePath(),0<c.width&&e.strokeColor&&t.stroke(),e.fill&&t.fill(),t.restore(),t.save(),t.translate(C.x,C.y),0!==e.angle&&t.rotate(e.angle*Math.PI/180),i&&(t.globalCompositeOperation="destination-out"),this.drawShapeAfterEffect(o,t,e,a,s,r),t.restore()},o.drawShape=function(o,t,e,r,l,i){var a;!e.shape||(a=o.drawers[e.shape])&&a.draw(t,e,r,l,i)},o.drawShapeAfterEffect=function(o,t,e,r,l,i){var a;!e.shape||(a=o.drawers[e.shape])&&void 0!==a.afterEffect&&a.afterEffect(t,e,r,l,i)},o.drawPlugin=function(o,t,e){o.save(),void 0!==t.draw&&t.draw(o,e),o.restore()},o}();exports.CanvasUtils=CanvasUtils;