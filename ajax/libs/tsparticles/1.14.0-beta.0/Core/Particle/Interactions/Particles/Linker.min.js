"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ColorUtils_1=require("../../../../Utils/ColorUtils"),Constants_1=require("../../../../Utils/Constants"),Utils_1=require("../../../../Utils/Utils"),Circle_1=require("../../../../Utils/Circle"),Linker=function(){function i(){}return i.link=function(i,n,e){for(var t,l=i.particlesOptions.lineLinked.opacity,o=null!==(t=i.lineLinkedDistance)&&void 0!==t?t:n.retina.lineLinkedDistance,s=i.getPosition(),r=0,a=n.particles.quadTree.query(new Circle_1.Circle(s.x,s.y,o));r<a.length;r++){var c,p,u,d,C=a[r];i!==C&&C.particlesOptions.lineLinked.enable&&(c=C.getPosition(),0<(p=l-Utils_1.Utils.getDistance(s,c)*l/o)&&(n.particles.lineLinkedColor||((d="string"==typeof(u=i.particlesOptions.lineLinked.color)?u:u.value)!==Constants_1.Constants.randomColorValue||i.particlesOptions.lineLinked.consent?n.particles.lineLinkedColor=ColorUtils_1.ColorUtils.colorToRgb({value:d}):i.particlesOptions.lineLinked.blink?n.particles.lineLinkedColor=Constants_1.Constants.randomColorValue:n.particles.lineLinkedColor=Constants_1.Constants.midColorValue),-1==C.links.map(function(i){return i.destination}).indexOf(i)&&-1==i.links.map(function(i){return i.destination}).indexOf(C)&&i.links.push({destination:C,opacity:p})))}},i}();exports.Linker=Linker;