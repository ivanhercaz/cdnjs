"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),Utils_1=require("../../../Utils/Utils"),ShapeType_1=require("../../../Enums/ShapeType"),ImageDrawer=function(){function e(){this.images=[]}return e.prototype.getImages=function(t){var e=this.images.filter(function(e){return e.id==t.id});return e.length?e[0]:(this.images.push({id:t.id,images:[]}),this.getImages(t))},e.prototype.addImage=function(e,t){var a=this.getImages(e);null!=a&&a.images.push(t)},e.prototype.init=function(n){var o;return tslib_1.__awaiter(this,void 0,void 0,function(){var t,a,r,i,s;return tslib_1.__generator(this,function(e){switch(e.label){case 0:if(t=n.options,!((a=null!==(o=t.particles.shape.options[ShapeType_1.ShapeType.images])&&void 0!==o?o:t.particles.shape.options[ShapeType_1.ShapeType.image])instanceof Array))return[3,5];r=0,i=a,e.label=1;case 1:return r<i.length?(s=i[r],[4,this.loadImageShape(n,s)]):[3,4];case 2:e.sent(),e.label=3;case 3:return r++,[3,1];case 4:return[3,7];case 5:return[4,this.loadImageShape(n,a)];case 6:e.sent(),e.label=7;case 7:return[2]}})})},e.prototype.destroy=function(){this.images=[]},e.prototype.loadImageShape=function(a,r){return tslib_1.__awaiter(this,void 0,void 0,function(){var t;return tslib_1.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Utils_1.Utils.loadImage(r.src)];case 1:return t=e.sent(),this.addImage(a,t),[3,3];case 2:return e.sent(),console.log("tsParticles error - "+r.src+" not found"),[3,3];case 3:return[2]}})})},e.prototype.draw=function(e,t,a,r){var i,s,n,o,l,u;!e||(o=null===(i=null==(n=t.image)?void 0:n.data)||void 0===i?void 0:i.element)&&(l=null!==(s=null==n?void 0:n.ratio)&&void 0!==s?s:1,u={x:-a,y:-a},e.globalAlpha=r,e.drawImage(o,u.x,u.y,2*a,2*a/l),e.globalAlpha=1)},e}();exports.ImageDrawer=ImageDrawer;