"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ColorUtils_1=require("../../../../Utils/ColorUtils"),Constants_1=require("../../../../Utils/Constants"),QuadTree_1=require("../../../../Utils/QuadTree"),Utils_1=require("../../../../Utils/Utils"),Linker=function(){function i(){}return i.link=function(i,e,n){for(var t,o=i.particlesOptions.lineLinked.opacity,l=null!==(t=i.lineLinkedDistance)&&void 0!==t?t:e.retina.lineLinkedDistance,s=i.getPosition(),r=0,a=e.particles.quadTree.query(new QuadTree_1.Circle(s.x,s.y,l));r<a.length;r++){var u,c,d,p,C=a[r];i!==C&&C.particlesOptions.lineLinked.enable&&(u=C.getPosition(),0<(c=o-Utils_1.Utils.getDistance(s,u)*o/l)&&(e.particles.lineLinkedColor||((p="string"==typeof(d=i.particlesOptions.lineLinked.color)?d:d.value)!==Constants_1.Constants.randomColorValue||i.particlesOptions.lineLinked.consent?e.particles.lineLinkedColor=ColorUtils_1.ColorUtils.colorToRgb({value:p}):i.particlesOptions.lineLinked.blink?e.particles.lineLinkedColor=Constants_1.Constants.randomColorValue:e.particles.lineLinkedColor=Constants_1.Constants.midColorValue),-1==C.links.map(function(i){return i.destination}).indexOf(i)&&-1==i.links.map(function(i){return i.destination}).indexOf(C)&&i.links.push({destination:C,opacity:c})))}},i}();exports.Linker=Linker;