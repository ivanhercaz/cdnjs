"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),Range=function(t,i){this.position={x:t,y:i}};exports.Range=Range;var Point=function(t,i,s){this.position={x:t,y:i},this.particle=s};exports.Point=Point;var Circle=function(n){function t(t,i,s){var e=n.call(this,t,i)||this;return e.radius=s,e}return tslib_1.__extends(t,n),t.prototype.contains=function(t){return Math.pow(t.x-this.position.x,2)+Math.pow(t.y-this.position.y,2)<=this.radius*this.radius},t.prototype.intersects=function(t){var i=Math.abs(t.position.x-this.position.x),s=Math.abs(t.position.y-this.position.y),e=this.radius,n=t.size.width,o=t.size.height,h=Math.pow(i-n,2)+Math.pow(s-o,2);return!(e+n<i||e+o<s)&&(i<=n||s<=o||h<=this.radius*this.radius)},t}(Range);exports.Circle=Circle;var Rectangle=function(o){function t(t,i,s,e){var n=o.call(this,t,i)||this;return n.size={height:e,width:s},n}return tslib_1.__extends(t,o),t.prototype.contains=function(t){return t.x>=this.position.x-this.size.width&&t.x<this.position.x+this.size.width&&t.y>=this.position.y-this.size.height&&t.y<this.position.y+this.size.height},t.prototype.intersects=function(t){return!(t.position.x-t.size.width>this.position.x+this.size.width||t.position.x+t.size.width<this.position.x-this.size.width||t.position.y-t.size.height>this.position.y+this.size.height||t.position.y+t.size.height<this.position.y-this.size.height)},t}(Range);exports.Rectangle=Rectangle;var QuadTree=function(){function n(t,i){this.rectangle=t,this.capacity=i,this.points=[],this.divided=!1}return n.prototype.subdivide=function(){var t=this.rectangle.position.x,i=this.rectangle.position.y,s=this.rectangle.size.width,e=this.rectangle.size.height;this.northEast=new n(new Rectangle(t,i,s/2,e/2),this.capacity),this.northWest=new n(new Rectangle(t+s/2,i,s/2,e/2),this.capacity),this.southEast=new n(new Rectangle(t,i+e/2,s/2,e/2),this.capacity),this.southWest=new n(new Rectangle(t+s/2,i+e/2,s/2,e/2),this.capacity),this.divided=!0},n.prototype.insert=function(t){var i,s,e,n;return!!this.rectangle.contains(t.position)&&(this.points.length<this.capacity?(this.points.push(t),!0):(this.divided||this.subdivide(),!(null===(i=this.northEast)||void 0===i||!i.insert(t))||(!(null===(s=this.northWest)||void 0===s||!s.insert(t))||(!(null===(e=this.southEast)||void 0===e||!e.insert(t))||!(null===(n=this.southWest)||void 0===n||!n.insert(t))))))},n.prototype.query=function(t,i){var s,e,n,o;if(i=i||[],!t.intersects(this.rectangle))return[];for(var h=0,r=this.points;h<r.length;h++){var a=r[h];t.contains(a.position)&&i.push(a.particle)}return this.divided&&(null!==(s=this.northEast)&&void 0!==s&&s.query(t,i),null!==(e=this.northWest)&&void 0!==e&&e.query(t,i),null!==(n=this.southEast)&&void 0!==n&&n.query(t,i),null!==(o=this.southWest)&&void 0!==o&&o.query(t,i)),i},n}();exports.QuadTree=QuadTree;