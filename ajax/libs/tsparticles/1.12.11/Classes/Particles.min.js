"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Particle_1=require("./Particle"),PolygonMaskType_1=require("../Enums/PolygonMaskType"),PolygonMaskInlineArrangement_1=require("../Enums/PolygonMaskInlineArrangement"),Particles=function(){function e(e){this.container=e,this.array=[],this.interactionsEnabled=!1}return Object.defineProperty(e.prototype,"count",{get:function(){return this.array.length},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this.container,t=e.options;if(!t.polygon.enable||t.polygon.type!==PolygonMaskType_1.PolygonMaskType.inline||t.polygon.inline.arrangement!==PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.onePerPoint&&t.polygon.inline.arrangement!==PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.perPoint)for(var n=this.array.length;n<t.particles.number.value;n++)this.addParticle(new Particle_1.Particle(e));else e.polygon.drawPointsOnPolygonPath();this.interactionsEnabled=t.particles.lineLinked.enable||t.particles.move.attract.enable||t.particles.move.collisions},e.prototype.redraw=function(){this.clear(),this.init(),this.draw(0)},e.prototype.removeAt=function(e,t){0<=e&&e<=this.count&&this.array.splice(e,null!=t?t:1)},e.prototype.remove=function(e){this.removeAt(this.array.indexOf(e))},e.prototype.update=function(e){for(var t=0;t<this.array.length;t++){var n=this.array[t];if(n.update(t,e),this.interactionsEnabled)for(var r=t+1;r<this.array.length;r++){var i=this.array[r];n.interact(i)}}},e.prototype.draw=function(e){var t=this.container,n=t.options;t.canvas.clear(),this.update(e),n.polygon.enable&&n.polygon.draw.enable&&t.polygon.drawPolygon();for(var r=0,i=this.array;r<i.length;r++){i[r].draw()}},e.prototype.clear=function(){this.array=[]},e.prototype.push=function(e,t){var n,r,i=this.container,a=i.options;this.pushing=!0,0<a.particles.number.limit&&this.array.length+e>a.particles.number.limit&&this.removeQuantity(this.array.length+e-a.particles.number.limit),t&&(r=null!==(n=t.position)&&void 0!==n?n:{x:0,y:0});for(var o=0;o<e;o++)this.addParticle(new Particle_1.Particle(i,r));a.particles.move.enable||this.container.play(),this.pushing=!1},e.prototype.addParticle=function(e){this.array.push(e)},e.prototype.removeQuantity=function(e){var t=this.container.options;this.removeAt(0,e),t.particles.move.enable||this.container.play()},e}();exports.Particles=Particles;