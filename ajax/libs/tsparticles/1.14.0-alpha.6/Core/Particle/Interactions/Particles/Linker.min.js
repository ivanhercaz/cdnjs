"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ColorUtils_1=require("../../../../Utils/ColorUtils"),Constants_1=require("../../../../Utils/Constants"),QuadTree_1=require("../../../../Utils/QuadTree"),Utils_1=require("../../../../Utils/Utils"),Linker=function(){function e(){}return e.link=function(e,i,n){for(var t,o=e.particlesOptions.lineLinked.opacity,s=null!==(t=e.lineLinkedDistance)&&void 0!==t?t:i.retina.lineLinkedDistance,l={x:e.position.x+e.offset.x,y:e.position.y+e.offset.y},r=0,a=i.particles.quadTree.query(new QuadTree_1.Circle(l.x,l.y,s));r<a.length;r++){var d=a[r];if(e!==d&&d.particlesOptions.lineLinked.enable){var p={x:d.position.x+d.offset.x,y:d.position.y+d.offset.y},c=o-Utils_1.Utils.getDistanceBetweenCoordinates(l,p)*o/s;if(0<c){if(!i.particles.lineLinkedColor){var u=e.particlesOptions.lineLinked.color,C="string"==typeof u?u:u.value;C!==Constants_1.Constants.randomColorValue||e.particlesOptions.lineLinked.consent?i.particles.lineLinkedColor=ColorUtils_1.ColorUtils.colorToRgb({value:C}):e.particlesOptions.lineLinked.blink?i.particles.lineLinkedColor=Constants_1.Constants.randomColorValue:i.particles.lineLinkedColor=Constants_1.Constants.midColorValue}-1==d.links.indexOf(e)&&-1==e.links.indexOf(d)&&(e.links.push(d),i.canvas.drawLinkedLine(e,d,c))}}}},e}();exports.Linker=Linker;