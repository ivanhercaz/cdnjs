"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var QuadTree_1=require("../../../../Utils/QuadTree"),Infecter=function(){function e(){}return e.infect=function(t,e){var i;if(void 0!==t.infectionStage){var n=e.options.infection;if(n.enable&&!(n.stages.length<1))for(var o=n.stages[t.infectionStage],r=e.retina.pixelRatio,a=2*t.size.value+o.radius*r,f={x:t.position.x+t.offset.x,y:t.position.y+t.offset.y},c=null!==(i=o.infectedStage)&&void 0!==i?i:t.infectionStage,s=e.particles.quadTree.query(new QuadTree_1.Circle(f.x,f.y,a)).filter(function(e){return void 0===e.infectionStage||e.infectionStage!==t.infectionStage}),u=o.rate,d=s.length,g=0,l=s;g<l.length;g++){var v=l[g];Math.random()<u/d&&(void 0===v.infectionStage?v.startInfection(c):v.infectionStage<c&&v.updateInfection(c))}}},e}();exports.Infecter=Infecter;