"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Utils_1=require("../../Utils/Utils"),HoverMode_1=require("../../Enums/Modes/HoverMode"),Mover=function(){function h(e,i){this.container=e,this.particle=i}return h.calcNoiseValue=function(e,i,t){return Math.floor(e/i)/t.value+t.offset},h.prototype.move=function(e){var i,t,o,a,s,n,l,r,c,v=this.container,p=v.options,u=this.particle,y=u.particlesOptions;y.move.enable&&(t=this.getProximitySpeedFactor(),o=0<p.fpsLimit?60*e/1e3:3.6,a=(null!==(i=u.moveSpeed)&&void 0!==i?i:v.retina.moveSpeed)/2*t*o,(s=y.move.noise).enable&&(u.lastNoiseTime>u.noiseDelay?(n=u.position,l=s.factor,c={angle:(r=v.simplex).noise3D(h.calcNoiseValue(n.x,u.size.value,l.horizontal),h.calcNoiseValue(n.y,u.size.value,l.horizontal),v.particles.noiseZ),length:r.noise3D(h.calcNoiseValue(n.x,u.size.value,l.vertical),h.calcNoiseValue(n.y,u.size.value,l.vertical),v.particles.noiseZ)},u.velocity.horizontal+=Math.cos(c.angle)*c.length,u.velocity.horizontal=Utils_1.Utils.clamp(u.velocity.horizontal,-1,1),u.velocity.vertical+=Math.sin(c.angle)*c.length,u.velocity.vertical=Utils_1.Utils.clamp(u.velocity.vertical,-1,1),u.lastNoiseTime-=u.noiseDelay):u.lastNoiseTime+=e),u.position.x+=u.velocity.horizontal*a,u.position.y+=u.velocity.vertical*a,y.move.vibrate&&(u.position.x+=Math.sin(u.position.x*Math.cos(u.position.y)),u.position.y+=Math.cos(u.position.y*Math.sin(u.position.x)))),this.moveParallax(e)},h.prototype.moveParallax=function(e){var i,t,o,a,s,n,l,r,c=this.container,v=c.options;v.interactivity.events.onHover.parallax.enable&&(i=this.particle,t=v.interactivity.events.onHover.parallax.force,(o=c.interactivity.mouse.position)&&(a=window.innerHeight/2,s=window.innerWidth/2,n=v.interactivity.events.onHover.parallax.smooth,l=(o.x-s)*(i.size.value/t),r=(o.y-a)*(i.size.value/t),i.offset.x+=(l-i.offset.x)/n,i.offset.y+=(r-i.offset.y)/n))},h.prototype.getProximitySpeedFactor=function(){var e=this.container,i=e.options,t=this.particle;if(!Utils_1.Utils.isInArray(HoverMode_1.HoverMode.slow,i.interactivity.events.onHover.mode))return 1;var o=this.container.interactivity.mouse.position;if(!o)return 1;var a=t.getPosition(),s=Utils_1.Utils.getDistance(o,a),n=e.retina.slowModeRadius;return n<s?1:(s/n||0)/i.interactivity.modes.slow.factor},h}();exports.Mover=Mover;