"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Circle_1=require("../../../../Utils/Circle"),Infecter=function(){function e(){}return e.infect=function(t,e,i){var n,a;if(t.updateInfection(i),void 0!==t.infectionStage){var o=e.options.infection;if(o.enable&&!(o.stages.length<1))for(var c=o.stages[t.infectionStage],f=e.retina.pixelRatio,r=2*t.size.value+c.radius*f,g=t.getPosition(),l=null!==(n=c.infectedStage)&&void 0!==n?n:t.infectionStage,u=e.particles.quadTree.query(new Circle_1.Circle(g.x,g.y,r)).filter(function(e){return void 0===e.infectionStage||e.infectionStage!==t.infectionStage}),s=c.rate,S=u.length,d=0,v=u;d<v.length;d++){var p,I,h=v[d];Math.random()<s/S&&(void 0===h.infectionStage?h.startInfection(l):h.infectionStage<t.infectionStage?h.updateInfectionStage(l):h.infectionStage>t.infectionStage&&(I=null!==(a=null==(p=o.stages[h.infectionStage])?void 0:p.infectedStage)&&void 0!==a?a:h.infectionStage,t.updateInfectionStage(I)))}}},e}();exports.Infecter=Infecter;