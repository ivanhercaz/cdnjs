"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ColorUtils_1=require("./ColorUtils"),CanvasUtils=function(){function o(){}return o.paintBase=function(o,t,e){o.save(),o.fillStyle=null!=e?e:"rgba(0,0,0,0)",o.fillRect(0,0,t.width,t.height),o.restore()},o.clear=function(o,t){o.clearRect(0,0,t.width,t.height)},o.drawAbsorber=function(o,t){o.save(),o.translate(t.position.x,t.position.y),o.beginPath(),o.arc(0,0,t.size,0,2*Math.PI,!1),o.closePath(),o.fillStyle=ColorUtils_1.ColorUtils.getStyleFromColor(t.color,t.opacity),o.fill(),o.restore()},o.drawLineLinked=function(o,t,e,l,r,i,s,a){o.save(),o.lineWidth=t,o.beginPath(),o.moveTo(e.x,e.y),o.lineTo(l.x,l.y),o.closePath(),r&&(o.globalCompositeOperation="destination-out"),i&&(o.strokeStyle=ColorUtils_1.ColorUtils.getStyleFromColor(i,s));var n="string"==typeof a.color?ColorUtils_1.ColorUtils.stringToRgb(a.color):ColorUtils_1.ColorUtils.colorToRgb(a.color);a.enable&&n&&(o.shadowBlur=a.blur,o.shadowColor=ColorUtils_1.ColorUtils.getStyleFromColor(n)),o.stroke(),o.restore()},o.drawConnectLine=function(o,t,e,l,r){o.save(),o.beginPath(),o.moveTo(l.x,l.y),o.lineTo(r.x,r.y),o.closePath(),o.lineWidth=t,o.strokeStyle=e,o.stroke(),o.restore()},o.gradient=function(o,t,e,l){var r=Math.floor(e.size.value/t.size.value);if(t.color&&e.color){var i={x:t.position.x+t.offset.x,y:t.position.y+t.offset.y},s={x:e.position.x+e.offset.x,y:e.position.y+e.offset.y},a=ColorUtils_1.ColorUtils.mix(t.color,e.color,t.size.value,e.size.value),n=o.createLinearGradient(i.x,i.y,s.x,s.y);return n.addColorStop(0,ColorUtils_1.ColorUtils.getStyleFromColor(t.color,l)),n.addColorStop(1<r?1:r,ColorUtils_1.ColorUtils.getStyleFromColor(a,l)),n.addColorStop(1,ColorUtils_1.ColorUtils.getStyleFromColor(e.color,l)),n}},o.drawGrabLine=function(o,t,e,l,r,i){o.save(),o.beginPath(),o.moveTo(e.x,e.y),o.lineTo(l.x,l.y),o.closePath(),o.strokeStyle=ColorUtils_1.ColorUtils.getStyleFromColor(r,i),o.lineWidth=t,o.stroke(),o.restore()},o.drawParticle=function(o,t,e,l,r,i,s){var a={x:t.position.x+t.offset.x,y:t.position.y+t.offset.y};o.save(),o.translate(a.x,a.y),o.beginPath();var n=t.shadowColor;s.enable&&n&&(o.shadowBlur=s.blur,o.shadowColor=ColorUtils_1.ColorUtils.getStyleFromColor(n),o.shadowOffsetX=s.offset.x,o.shadowOffsetY=s.offset.y),o.fillStyle=e,0!==t.angle&&o.rotate(t.angle*Math.PI/180),l&&(o.globalCompositeOperation="destination-out");var C=t.stroke;0<C.width&&t.strokeColor&&(o.strokeStyle=ColorUtils_1.ColorUtils.getStyleFromColor(t.strokeColor,t.stroke.opacity),o.lineWidth=C.width),this.drawShape(o,t,r,i),t.close&&o.closePath(),0<C.width&&t.strokeColor&&o.stroke(),t.fill&&o.fill(),o.restore()},o.addShapeDrawer=function(o,t){this.drawers[o]||(this.drawers[o]=t)},o.drawShape=function(o,t,e,l){if(t.shape){var r=this.drawers[t.shape];r&&r.draw(o,t,e,l)}},o.drawers={},o}();exports.CanvasUtils=CanvasUtils;