"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Utils_1=require("../../Utils/Utils"),HoverMode_1=require("../../Enums/Modes/HoverMode"),SimplexNoise_1=require("../../Utils/SimplexNoise"),Mover=function(){function e(e,i){this.container=e,this.particle=i}return e.prototype.move=function(e){var i,t=this.container,o=t.options,a=this.particle,s=a.particlesOptions;if(s.move.enable){var r=this.getProximitySpeedFactor(),n=0<o.fpsLimit?60*e/1e3:3.6,l=(null!==(i=a.moveSpeed)&&void 0!==i?i:t.retina.moveSpeed)/2*r*n,v=s.move.noise;if(v.enable){var c=new SimplexNoise_1.SimplexNoise;if(a.lastNoiseTime>a.noiseDelay){var p=a.position,f=v.factor,y={angle:c.noise3D(Math.floor(p.x/a.size.value)/f.horizontal.value+f.horizontal.offset,Math.floor(p.y/a.size.value)/f.horizontal.value+f.horizontal.offset,t.particles.noiseZ),length:c.noise3D(Math.floor(p.x/a.size.value)/f.vertical.value+f.vertical.offset,Math.floor(p.y/a.size.value)/f.vertical.value+f.vertical.offset,t.particles.noiseZ)};a.velocity.horizontal+=Math.cos(y.angle)*y.length,a.velocity.horizontal=Utils_1.Utils.clamp(a.velocity.horizontal,-1,1),a.velocity.vertical+=Math.sin(y.angle)*y.length,a.velocity.vertical=Utils_1.Utils.clamp(a.velocity.vertical,-1,1),a.lastNoiseTime-=a.noiseDelay}else a.lastNoiseTime+=e}a.position.x+=a.velocity.horizontal*l,a.position.y+=a.velocity.vertical*l,s.move.vibrate&&(a.position.x+=Math.sin(a.position.x*Math.cos(a.position.y)),a.position.y+=Math.cos(a.position.y*Math.sin(a.position.x)))}this.moveParallax()},e.prototype.moveParallax=function(){var e=this.container,i=e.options;if(i.interactivity.events.onHover.parallax.enable){var t=this.particle,o=i.interactivity.events.onHover.parallax.force,a=e.interactivity.mouse.position;if(a){var s=window.innerHeight/2,r=window.innerWidth/2,n=i.interactivity.events.onHover.parallax.smooth,l=(a.x-r)*(t.size.value/o),v=(a.y-s)*(t.size.value/o);t.offset.x+=(l-t.offset.x)/n,t.offset.y+=(v-t.offset.y)/n}}},e.prototype.getProximitySpeedFactor=function(){var e=this.container,i=e.options,t=this.particle;if(!Utils_1.Utils.isInArray(HoverMode_1.HoverMode.slow,i.interactivity.events.onHover.mode))return 1;var o=this.container.interactivity.mouse.position;if(!o)return 1;var a={x:t.position.x+t.offset.x,y:t.position.y+t.offset.y},s=Utils_1.Utils.getDistanceBetweenCoordinates(o,a),r=e.retina.slowModeRadius;return r<s?1:(s/r||0)/i.interactivity.modes.slow.factor},e}();exports.Mover=Mover;