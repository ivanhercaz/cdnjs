var __awaiter=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))(function(s,a){function n(t){try{c(o.next(t))}catch(t){a(t)}}function i(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(n,i)}c((o=o.apply(t,e||[])).next())})};import{Container}from"./Container";import{Constants}from"./Utils/Constants";import{Utils}from"./Utils/Utils";let tsParticlesDom=[];export class Loader{static dom(){return tsParticlesDom||(tsParticlesDom=[]),tsParticlesDom}static domItem(t){const e=Loader.dom(),r=e[t];if(r&&!r.destroyed)return r;e.splice(t,1)}static loadFromArray(t,e,r){return __awaiter(this,void 0,void 0,function*(){return Loader.load(t,Utils.itemFromArray(e,r))})}static setFromArray(t,e,r,o){return __awaiter(this,void 0,void 0,function*(){return Loader.set(t,e,Utils.itemFromArray(r,o))})}static load(t,e){return __awaiter(this,void 0,void 0,function*(){const r=document.getElementById(t);if(r)return this.set(t,r,e)})}static set(t,e,r){return __awaiter(this,void 0,void 0,function*(){const o=Loader.dom(),s=o.findIndex(e=>e.id===t);if(s>=0){const t=this.domItem(s);t&&!t.destroyed&&(t.destroy(),o.splice(s,1))}let a,n;if("canvas"===e.tagName)a=e,n=!1;else{const t=e.getElementsByTagName("canvas");t.length?((a=t[0]).className||(a.className=Constants.canvasClass),n=!1):(n=!0,(a=document.createElement("canvas")).className=Constants.canvasClass,a.style.width="100%",a.style.height="100%",e.appendChild(a))}const i=new Container(t,r);return s>=0?o.splice(s,0,i):o.push(i),i.canvas.loadCanvas(a,n),yield i.start(),i})}static loadJSON(t,e){return __awaiter(this,void 0,void 0,function*(){const r=yield fetch(e);if(r.ok){const e=yield r.json();return e instanceof Array?Loader.loadFromArray(t,e):Loader.load(t,e)}console.error(`Error tsParticles - fetch status: ${r.status}`),console.error("Error tsParticles - File config not found")})}static setJSON(t,e,r){return __awaiter(this,void 0,void 0,function*(){const o=yield fetch(r);if(o.ok){const r=yield o.json();return r instanceof Array?Loader.setFromArray(t,e,r):Loader.set(t,e,r)}console.error(`Error tsParticles - fetch status: ${o.status}`),console.error("Error tsParticles - File config not found")})}static setOnClickHandler(t){const e=Loader.dom();if(0===e.length)throw new Error("Can only set click handlers after calling tsParticles.load() or tsParticles.loadJSON()");for(const r of e){const e=r.interactivity.element;e&&e.addEventListener("click",t)}}};