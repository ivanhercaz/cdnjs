!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("textile",[],t):"object"==typeof exports?exports.textile=t():e.textile=t()}(this,function(){return r={},a.m=n=[function(e,t){var a={},c=e.exports={pattern:{punct:"[!-/:-@\\[\\\\\\]-`{-~]",space:"\\s"},escape:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},collapse:function(e){return e.replace(/(?:#.*?(?:\n|$))/g,"").replace(/\s+/g,"")},expandPatterns:function(r){return r.replace(/\[:\s*(\w+)\s*:\]/g,function(e,t){var n=c.pattern[t];if(n)return c.expandPatterns(n);throw new Error("Pattern "+e+" not found in "+r)})},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},compile:function(e,t){c.isRegExp(e)&&(1===arguments.length&&(t=(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")),e=e.source);var n=e+(t||"");if(n in a)return a[n];var r=c.expandPatterns(e);return t&&/x/.test(t)&&(r=c.collapse(r)),t&&/s/.test(t)&&(r=r.replace(/([^\\])\./g,"$1[^\\0]")),t=(t||"").replace(/[^gim]/g,""),a[n]=new RegExp(r,t)}}},function(e,t){e.exports=function(n){var e,t=String(n),r=0,a={index:function(){return r},save:function(){return e=r,a},load:function(){return r=e,n=t.slice(r),a},advance:function(e){return r+="string"==typeof e?e.length:e,n=t.slice(r)},skipWS:function(){var e=/^\s+/.exec(n);return e?(r+=e[0].length,n=t.slice(r),e[0]):""},lookbehind:function(e){return e=null==e?1:e,t.slice(r-e,r)},startsWith:function(e){return n.substring(0,e.length)===e},slice:function(e,t){return null!=t?n.slice(e,t):n.slice(e)},valueOf:function(){return n},toString:function(){return n}};return a}},function(e,t,n){var r=n(0),u=n(1);r.pattern.html_id="[a-zA-Z][a-zA-Z\\d:]*",r.pattern.html_attr="(?:\"[^\"]+\"|'[^']+'|[^>\\s]+)";var a=r.compile(/^\s*([^=\s]+)(?:\s*=\s*("[^"]+"|'[^']+'|[^>\s]+))?/),c=r.compile(/^<!--(.+?)-->/,"s"),s=r.compile(/^<\/([:html_id:])([^>]*)>/),i=r.compile(/^<([:html_id:])((?:\s[^=\s/]+(?:\s*=\s*[:html_attr:])?)+)?\s*(\/?)>/),o=r.compile(/^\s*<([:html_id:](?::[a-zA-Z\d]+)*)((?:\s[^=\s/]+(?:\s*=\s*[:html_attr:])?)+)?\s*(\/?)>/),f={area:1,base:1,br:1,col:1,embed:1,hr:1,img:1,input:1,link:1,meta:1,option:1,param:1,wbr:1};function d(e){return c.exec(e)}function h(e){return i.exec(e)}function g(e){return s.exec(e)}function v(e){for(var t,n={};t=a.exec(e);)n[t[1]]="string"==typeof t[2]?t[2].replace(/^(["'])(.*)\1$/,"$2"):null,e=e.slice(t[0].length);return n}var x="OPEN",m="COMMENT";e.exports={singletons:f,tokenize:function(e,t,n){function r(e){return s?e===s:!t||e in t}var a,c=[],s=!1,i={},o=0;e=u(String(e));do{if((a=d(e))&&r("!"))c.push({type:m,data:a[1],pos:e.index(),src:a[0]}),e.advance(a[0]);else if((a=g(e))&&r(a[1])){var l={type:"CLOSE",tag:a[1],pos:e.index(),src:a[0]};if(e.advance(a[0]),c.push(l),i[l.tag]--,o--,n&&(!o||!i[l.tag]<0||isNaN(i[l.tag])))return c;s=s&&null}else if((a=h(e))&&r(a[1])){var p={type:a[3]||a[1]in f?"SINGLE":x,tag:a[1],pos:e.index(),src:a[0]};a[2]&&(p.attr=v(a[2])),"script"!==a[1]&&"code"!==a[1]&&"style"!==a[1]||(s=p.tag),p.type===x&&(o++,i[p.tag]=(i[p.tag]||0)+1),c.push(p),e.advance(a[0])}else(a=/([^<]+|[^\0])/.exec(e))&&c.push({type:"TEXT",data:a[0],pos:e.index(),src:a[0]}),e.advance(a&&a[0].length||1)}while(e.valueOf());return c},parseHtml:function(e,t){for(var n,r=[],a=[],c=r,s=0;s<e.length;s++)if((n=e[s]).type===m)c.push(["!",n.data]);else if("TEXT"===n.type||"WS"===n.type)c.push(n.data);else if("SINGLE"===n.type)c.push(n.attr?[n.tag,n.attr]:[n.tag]);else if(n.type===x){var i=n.attr?[n.tag,n.attr]:[n.tag];c.push(i),a.push(i),c=i}else if("CLOSE"===n.type){if(a.length)for(var o=a.length-1;0<=o;o--){if(a[o][0]===n.tag){a.splice(o),c=a[a.length-1]||r;break}}if(!a.length&&t)return r.sourceLength=n.pos+n.src.length,r}return r.sourceLength=n?n.pos+n.src.length:0,r},parseHtmlAttr:v,testCloseTag:g,testOpenTagBlock:function(e){return o.exec(e)},testOpenTag:h,testComment:d}},function(e,t,n){var A=n(1),_=n(9),k=n(0),O=n(4).parseAttr,j=n(12).parseGlyph,r=n(2),w=r.parseHtml,T=r.parseHtmlAttr,E=r.tokenize,L=r.singletons,P=r.testComment,W=r.testOpenTag,a=n(5),c=a.ucaps,s=a.txattr,i=a.txcite;k.pattern.txattr=s,k.pattern.txcite=i,k.pattern.ucaps=c;var z={"*":"strong","**":"b","??":"cite",_:"em",__:"i","-":"del","%":"span","+":"ins","~":"sub","^":"sup","@":"code"},C=/^([[{]?)(__?|\*\*?|\?\?|[-+^~@%])/,M=k.compile(/^!(?!\s)([:txattr:](?:\.[^\n\S]|\.(?:[^./]))?)([^!\s]+?) ?(?:\(((?:[^()]|\([^()]+\))+)\))?!(?::([^\s]+?(?=[!-.:-@[\\\]-`{-~](?:$|\s)|\s|$)))?/),H=k.compile(/^\[!(?!\s)([:txattr:](?:\.[^\n\S]|\.(?:[^./]))?)([^!\s]+?) ?(?:\(((?:[^()]|\([^()]+\))+)\))?!(?::([^\s]+?(?=[!-.:-@[\\\]-`{-~](?:$|\s)|\s|$)))?\]/),Z=k.compile(/^((?!TM\)|tm\))[[:ucaps:]](?:[[:ucaps:]\d]{1,}(?=\()|[[:ucaps:]\d]{2,}))(?:\((.*?)\))?(?=\W|$)/),q=k.compile(/^"(?!\s)((?:[^"]|"(?![\s:])[^\n"]+"(?!:))+)"[:txcite:]/),N=/^\["([^\n]+?)":((?:\[[a-z0-9]*\]|[^\]])+)\]/,R=/\s*\(((?:\([^()]*\)|[^()])+)\)$/,D=/^\[(\d+)(!?)\]/;t.parsePhrase=function e(t,n){t=A(t);var r,a,c=_();do{if(t.save(),t.startsWith("\r\n")&&t.advance(1),t.startsWith("\n"))t.advance(1),t.startsWith(" ")?t.advance(1):n.breaks&&c.add(["br"]),c.add("\n");else if(r=/^==(.*?)==/.exec(t))t.advance(r[0]),c.add(r[1]);else{var s=t.lookbehind(1),i=!s||/^[\s>.,"'?!;:()]$/.test(s);if((r=C.exec(t))&&(i||r[1])){t.advance(r[0]);var o=r[2],l=r[1],p=z[o],u="code"===p;(a=!u&&O(t,p,o))&&(t.advance(a[0]),a=a[1]);var f=void 0,d=void 0;if("["===l)f="^(.*?)",d="(?:])";else if("{"===l)f="^(.*?)",d="(?:})";else{var h=k.escape(o.charAt(0));f=u?"^(\\S+|\\S+.*?\\S)":"^([^\\s".concat(h,"]+|[^\\s").concat(h,"].*?\\S(").concat(h,"*))"),d="(?=$|[\\s.,\"'!?;:()«»„“”‚‘’<>])"}if((r=k.compile("".concat(f,"(").concat(k.escape(o),")").concat(d)).exec(t))&&r[1]){t.advance(r[0]),u?c.add([p,r[1]]):c.add([p,a].concat(e(r[1],n)));continue}t.load()}if((r=M.exec(t))||(r=H.exec(t))){t.advance(r[0]);var g=(a=r[1]&&O(r[1],"img"))?a[1]:{src:""},v=["img",g];g.src=r[2],g.alt=r[3]?g.title=r[3]:"",r[4]&&(v=["a",{href:r[4]},v]),c.add(v)}else if(r=P(t))t.advance(r[0]),c.add(["!",r[1]]);else{if(r=W(t)){t.advance(r[0]);var x=r[1],m=r[3]||r[1]in L,y=[x];if(r[2]&&y.push(T(r[2])),m){c.add(y).add(t.skipWS());continue}if(r=k.compile("^(.*?)(</".concat(x,"\\s*>)"),"s").exec(t)){if(t.advance(r[0]),"code"===x)y.push(r[1]);else{if("notextile"===x){c.merge(w(E(r[1])));continue}y=y.concat(e(r[1],n))}c.add(y);continue}t.load()}if((r=D.exec(t))&&/\S/.test(s))t.advance(r[0]),c.add(["sup",{class:"footnote",id:"fnr"+r[1]},"!"===r[2]?r[1]:["a",{href:"#fn"+r[1]},r[1]]]);else if(r=Z.exec(t)){t.advance(r[0]);var b=["span",{class:"caps"},r[1]];r[2]&&(b=["acronym",{title:r[2]},b]),c.add(b)}else if(i&&(r=q.exec(t))||(r=N.exec(t))){t.advance(r[0]);var $=r[1].match(R),S=$?r[1].slice(0,r[1].length-$[0].length):r[1];a=(a=O(S,"a"))?(S=S.slice(a[0]),a[1]):{},$&&!S&&(S=$[0],$=""),a.href=r[2],$&&(a.title=$[1]),c.add(["a",a].concat(e(S.replace(/^(\.?\s*)/,""),n)))}else(r=/([a-zA-Z0-9,.':]+|[ \f\r\t\v\xA0\u2028\u2029]+|[^\0])/.exec(t))&&c.add(r[0]),t.advance(r&&r[0].length||1)}}}while(t.valueOf());return c.get().map(j)}},function(e,t){var m=/^\(([^()\n]+)\)/,y=/^(\(+)/,b=/^(\)+)/,$=/^(<>|<|>|=)/,S=/^(<|>|=)/,A=/^(~|\^|-)/,_=/^\\(\d+)/,k=/^\/(\d+)/,O=/^\{([^}]*)\}/,j=/^\s*([^:\s]+)\s*:\s*(.+)\s*$/,w=/^\[([^[\]\n]+)\]/,T={"<":"left","=":"center",">":"right","<>":"justify"},E={"~":"bottom","^":"top","-":"middle"};e.exports={copyAttr:function(e,t){if(e){var n={};for(var r in e)!(r in e)||t&&r in t||(n[r]=e[r]);return n}},parseAttr:function(e,t,n){if((e=String(e))&&"notextile"!==t){var r,a={},c={style:a},s=e,i=function(e){return/^(?:table|t[dh]|t(?:foot|head|body)|b[qc]|div|notextile|pre|h[1-6]|fn\\d+|p|###)$/.test(e)}(t),o="img"===t,l="li"===t,p=!i&&!o&&"a"!==t,u=o?S:$;do{if(r=O.exec(s))r[1].split(";").forEach(function(e){var t=e.match(j);t&&(a[t[1]]=t[2])}),s=s.slice(r[0].length);else if(r=w.exec(s)){var f=s.slice(r[0].length);!f&&p||n&&n===f.slice(0,n.length)?r=null:(c.lang=r[1],s=s.slice(r[0].length))}else if(r=m.exec(s)){var d=s.slice(r[0].length);if(!d&&p||n&&(" "===d[0]||n===d.slice(0,n.length)))r=null;else{var h=r[1].split("#");h[0]&&(c.class=h[0]),h[1]&&(c.id=h[1]),s=d}}else{if(i||l){if(r=y.exec(s)){a["padding-left"]="".concat(r[1].length,"em"),s=s.slice(r[0].length);continue}if(r=b.exec(s)){a["padding-right"]="".concat(r[1].length,"em"),s=s.slice(r[0].length);continue}}if((o||i||l)&&(r=u.exec(s))){var g=T[r[1]];o?c.align=g:a["text-align"]=g,s=s.slice(r[0].length)}else if("td"!==t&&"tr"!==t||!(r=A.exec(s))){if("td"===t){if(r=_.exec(s)){c.colspan=r[1],s=s.slice(r[0].length);continue}if(r=k.exec(s)){c.rowspan=r[1],s=s.slice(r[0].length);continue}}}else a["vertical-align"]=E[r[1]],s=s.slice(r[0].length)}}while(r);var v=[];for(var x in a)v.push("".concat(x,":").concat(a[x]));return v.length?c.style=v.join(";"):delete c.style,s===e?void 0:[e.length-s.length,c]}}}},function(e,t){t.txblocks="(?:b[qc]|div|notextile|pre|h[1-6]|fn\\d+|p|###)",t.ucaps="A-ZÀ-ÖØ-ÞĀĂĄĆĈĊČĎĐĒĔĖĘĚĜĞĠĢĤĦĨĪĬĮİĲĴĶĹĻĽĿŁŃŅŇŊŌŎŐŒŔŖŘŚŜŞŠŢŤŦŨŪŬŮŰŲŴŶŸŹŻŽƁƂƄƆƇƉ-ƋƎ-ƑƓƔƖ-ƘƜƝƟƠƢƤƦƧƩƬƮƯƱ-ƳƵƷƸƼǄǇǊǍǏǑǓǕǗǙǛǞǠǢǤǦǨǪǬǮǱǴǶ-ǸǺǼǾȀȂȄȆȈȊȌȎȐȒȔȖȘȚȜȞȠȢȤȦȨȪȬȮȰȲȺȻȽȾɁɃ-ɆɈɊɌɎḀḂḄḆḈḊḌḎḐḒḔḖḘḚḜḞḠḢḤḦḨḪḬḮḰḲḴḶḸḺḼḾṀṂṄṆṈṊṌṎṐṒṔṖṘṚṜṞṠṢṤṦṨṪṬṮṰṲṴṶṸṺṼṾẀẂẄẆẈẊẌẎẐẒẔẞẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼẾỀỂỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪỬỮỰỲỴỶỸỺỼỾⱠⱢ-ⱤⱧⱩⱫⱭ-ⱰⱲⱵⱾⱿꜢꜤꜦꜨꜪꜬꜮꜲꜴꜶꜸꜺꜼꜾꝀꝂꝄꝆꝈꝊꝌꝎꝐꝒꝔꝖꝘꝚꝜꝞꝠꝢꝤꝦꝨꝪꝬꝮꝹꝻꝽꝾꞀꞂꞄꞆꞋꞍꞐꞒꞠꞢꞤꞦꞨꞪ",t.txcite=":((?:[^\\s()]|\\([^\\s()]+\\)|[()])+?)(?=[!-\\.:-@\\[\\\\\\]-`{-~]+(?:$|\\s)|$|\\s)";var n=t.attr_class="\\([^\\)]+\\)",r=t.attr_style="\\{[^\\}]+\\}",a=t.attr_lang="\\[[^\\[\\]]+\\]",c=t.attr_align="(?:<>|<|>|=)",s=t.attr_pad="[\\(\\)]+",i=t.txattr="(?:".concat(n,"|").concat(r,"|").concat(a,"|").concat(c,"|").concat(s,")*");t.txlisthd="[\\t ]*[\\#\\*]*(\\*|\\#(?:_|\\d+)?)".concat(i,"(?: +\\S|\\.\\s*(?=\\S|\\n))")},function(e,t){e.exports=function(e,t){if(t)for(var n in t)e[n]=t[n];return e}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(2).singletons;function l(e,t){return e.replace(/&(?!(#\d{2,}|#x[\da-fA-F]{2,}|[a-zA-Z][a-zA-Z1-4]{1,6});)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,t?"&quot;":'"').replace(/'/g,t?"&#39;":"'")}e.exports={reIndent:function n(e,r){return r?e.map(function(e){if(/^\n\t+/.test(e))if(r<0)e=e.slice(0,r);else for(var t=0;t<r;t++)e+="\t";else if(Array.isArray(e))return n(e,r);return e}):e},toHTML:function e(t){if("string"==typeof(t=t.concat()))return l(t);var n=t.shift(),r={},a="",c=[];for(t.length&&"object"===i(t[0])&&!Array.isArray(t[0])&&(r=t.shift());t.length;)c.push(e(t.shift()));for(var s in r)a+=null==r[s]?" ".concat(s):" ".concat(s,'="').concat(l(String(r[s]),!0),'"');return"!"===n?"\x3c!--".concat(c.join(""),"--\x3e"):n in o||-1<n.indexOf(":")&&!c.length?"<".concat(n).concat(a," />"):"<".concat(n).concat(a,">").concat(c.join(""),"</").concat(n,">")},escape:l}},function(e,t,n){var E=n(9),L=n(1),r=n(0),P=n(11),a=n(2),W=a.parseHtml,z=a.tokenize,C=a.parseHtmlAttr,M=a.singletons,H=a.testComment,Z=a.testOpenTagBlock,q=n(3).parsePhrase,c=n(4),N=c.copyAttr,R=c.parseAttr,s=n(13),D=s.testList,F=s.parseList,i=n(14),I=i.testDefList,G=i.parseDefList,o=n(15),B=o.testTable,X=o.parseTable,l=n(5),p=l.txblocks,u=l.txlisthd,f=l.txattr;r.pattern.txblocks=p,r.pattern.txlisthd=u,r.pattern.txattr=f;var J={p:0,hr:0,ul:1,ol:0,li:0,div:1,pre:0,object:1,script:0,noscript:0,blockquote:1,notextile:1},K=r.compile(/^([:txblocks:])/),Q=r.compile(/^(.*?)($|\r?\n(?=[:txlisthd:])|\r?\n(?:\s*\n|$)+)/,"s"),U=r.compile(/^(.*?)($|\r?\n(?=[:txlisthd:])|\r?\n+(?=[:txblocks:][:txattr:]\.))/,"s"),V=r.compile(/^(.*?)($|\r?\n(?:\s*\n|$)+)/,"s"),Y=r.compile(/^(.*?)($|\r?\n+(?=[:txblocks:][:txattr:]\.))/,"s"),ee=/^(---+|\*\*\*+|___+)(\r?\n\s+|$)/,te=r.compile(/^\[([^\]]+)\]((?:https?:\/\/|\/)\S+)(?:\s*\n|$)/),ne=/^fn\d+$/,d=Object.prototype.hasOwnProperty;function re(e){for(var t=1;t<(arguments.length<=1?0:arguments.length-1);t++){var n=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];if(null!=n)for(var r in n)d.call(n,r)&&(e[r]=n[r])}return e}function ae(e,n,r,a,c){n=n||"p";var s=[];return e.split(/(?:\r?\n){2,}/).forEach(function(e,t){"p"===n&&/^\s/.test(e)?(e=e.replace(/\r?\n[\t ]/g," ").trim(),s=s.concat(q(e,c))):(a&&t&&s.push(a),s.push(r?[n,r].concat(q(e,c)):[n].concat(q(e,c))))}),s}t.parseFlow=function e(t,n){var r,a,c=E();for(t=L(t.replace(/^( *\r?\n)+/,""));t.valueOf();)if(t.save(),a=te.exec(t))r=r||{},t.advance(a[0]),r[a[1]]=a[2];else{if(c.linebreak(),a=K.exec(t)){t.advance(a[0]);var s=a[0],i=R(t,s);if(i&&(t.advance(i[0]),i=i[1]),a=/^\.(\.?)(?:\s|(?=:))/.exec(t)){var o=!!a[1],l=o?U:Q;if("bc"!==s&&"pre"!==s||(l=o?Y:V),a=l.exec(t.advance(a[0])),t.advance(a[0]),"bq"===s){var p=a[1];(a=/^:(\S+)\s+/.exec(p))&&((i=i||{}).cite=a[1],p=p.slice(a[0].length));var u=ae(p,"p",N(i,{cite:1,id:1}),"\n",n);c.add(["blockquote",i,"\n"].concat(u).concat(["\n"]))}else if("bc"===s){var f=i?N(i,{id:1}):null;c.add(["pre",i,f?["code",f,a[1]]:["code",a[1]]])}else if("notextile"===s)c.merge(W(z(a[1])));else if("###"===s);else if("pre"===s)c.add(["pre",i,a[1]]);else if(ne.test(s)){var d=s.replace(/\D+/g,"");(i=i||{}).class=(i.class?i.class+" ":"")+"footnote",i.id="fn"+d,c.add(["p",i,["a",{href:"#fnr"+d},["sup",d]]," "].concat(q(a[1],n)))}else c.merge(ae(a[1],s,i,"\n",n));continue}t.load()}if(a=H(t))t.advance(a[0]+(/(?:\s*\n+)+/.exec(t)||[])[0]),c.add(["!",a[1]]);else{if(a=Z(t)){var h=a[1];if(h in J)if(a[3]||h in M){if(t.advance(a[0]),/^\s*(\n|$)/.test(t)){var g=[h];a[2]&&g.push(C(a[2])),c.add(g),t.skipWS();continue}}else if("pre"===h){var v=z(t,{pre:1,code:1},h),x=W(v,!0);if(t.load().advance(x.sourceLength),/^\s*(\n|$)/.test(t)){c.merge(x),t.skipWS();continue}}else if("notextile"===h){for(var m=z(t,null,h),y=1;/^\s+$/.test(m[y].src);)y++;var b=W(m.slice(y,-1),!0),$=m.pop();if(t.load().advance($.pos+$.src.length),/^\s*(\n|$)/.test(t)){c.merge(b),t.skipWS();continue}}else{t.skipWS();for(var S=z(t,null,h),A=S.pop(),_=1;S[_]&&/^[\n\r]+$/.test(S[_].src);)_++;if(A.tag===h){var k=1<S.length?t.slice(S[_].pos,A.pos):"";if(t.advance(A.pos+A.src.length),/^\s*(\n|$)/.test(t)){var O=[h];if(a[2]&&O.push(C(a[2])),"script"===h||"style"===h)O.push(k);else{var j=k.replace(/^\n+/,"").replace(/\s*$/,""),w=/\n\r?\n/.test(j)||"ol"===h||"ul"===h,T=w?e(j,n):q(j,re({},n,{breaks:!1}));(w||/^\n/.test(k))&&O.push("\n"),(w||/\s$/.test(k))&&T.push("\n"),O=O.concat(T)}c.add(O),t.skipWS();continue}}}t.load()}(a=ee.exec(t))?(t.advance(a[0]),c.add(["hr"])):(a=D(t))?(t.advance(a[0]),c.add(F(a[0],n))):(a=I(t))?(t.advance(a[0]),c.add(G(a[0],n))):(a=B(t))?(t.advance(a[0]),c.add(X(a[1],n))):(a=Q.exec(t),c.merge(ae(a[1],"p",void 0,"\n",n)),t.advance(a[0]))}}return r?P(c.get(),r):c.get()}},function(e,t){e.exports=function(e){var t=Array.isArray(e)?e:[];return{add:function(e){return"string"==typeof e&&"string"==typeof t[t.length-1]?t[t.length-1]+=e:Array.isArray(e)?t.push(e.filter(function(e){return void 0!==e})):e&&t.push(e),this},merge:function(e){for(var t=0,n=e.length;t<n;t++)this.add(e[t]);return this},linebreak:function(){t.length&&this.add("\n")},get:function(){return t}}}},function(e,t,n){var r=n(6),a=n(7).toHTML,c=n(8).parseFlow,s=n(2).parseHtml;function i(e,t){return t=r(r({},i.defaults),t||{}),c(e,t).map(a).join("")}(e.exports=i).defaults={breaks:!0},i.setOptions=i.setoptions=function(e){return r(i.defaults,e),this},i.parse=i.convert=i,i.html_parser=s,i.jsonml=function(e,t){return t=r(r({},i.defaults),t||{}),["html"].concat(c(e,t))},i.serialize=a},function(e,t){function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function e(t,n){if(Array.isArray(t)){if("a"===t[0]){var r=t[1];"object"===s(r)&&"href"in r&&r.href in n&&(r.href=n[r.href])}for(var a=0,c=t.length;a<c;a++)Array.isArray(t[a])&&e(t[a],n)}return t}},function(e,t,n){var r=n(0),a=/(\w)'(\w)/g,c=/([^-]|^)->/,s=r.compile(/([^\s[(])"(?=$|\s|[:punct:])/g),i=r.compile(/([^\s[(])'(?=$|\s|[:punct:])/g),o=/(\b ?|\s|^)(?:\(C\)|\[C\])/gi,l=/([\d.,]+['"]? ?)x( ?)(?=[\d.,]['"]?)/g,p=r.compile(/(\d*[.,]?\d+)"(?=\s|$|[:punct:])/g),u=/([^.]?)\.{3}/g,f=/(^|[\s\w])--([\s\w]|$)/g,d=/ - /g,h=/"/g,g=/'/g,v=/(\b ?|\s|^)(?:\(R\)|\[R\])/gi,x=r.compile(/(\d*[.,]?\d+)'(?=\s|$|[:punct:])/g),m=/(\b ?|\s|^)(?:\((?:TM|tm)\)|\[(?:TM|tm)\])/g;t.parseGlyph=function(e){return"string"!=typeof e?e:e.replace(c,"$1&#8594;").replace(l,"$1&#215;$2").replace(u,"$1&#8230;").replace(f,"$1&#8212;$2").replace(d," &#8211; ").replace(m,"$1&#8482;").replace(v,"$1&#174;").replace(o,"$1&#169;").replace(p,"$1&#8243;").replace(s,"$1&#8221;").replace(h,"&#8220;").replace(x,"$1&#8242;").replace(a,"$1&#8217;$2").replace(i,"$1&#8217;").replace(g,"&#8216;").replace(/[([]1\/4[\])]/,"&#188;").replace(/[([]1\/2[\])]/,"&#189;").replace(/[([]3\/4[\])]/,"&#190;").replace(/[([]o[\])]/,"&#176;").replace(/[([]\+\/-[\])]/,"&#177;")}},function(e,t,n){var m=n(1),r=n(0),y=n(6),b=n(4).parseAttr,$=n(3).parsePhrase,a=n(5).txlisthd;r.pattern.txlisthd=a;var c=r.compile(/^((?:[:txlisthd:][^\0]*?(?:\r?\n|$))+)(\s*\n|$)/,"s"),S=r.compile(/^([#*]+)([^\0]+?)(\n(?=[:txlisthd:])|$)/,"s");function A(e){for(var t="\n";e--;)t+="\t";return t}e.exports={testList:function(e){return c.exec(e)},parseList:function(e,t){e=m(e.replace(/(^|\r?\n)[\t ]+/,"$1"));for(var n,r,a,c,s=[],i={},o=t._lst||{},l=0;r=S.exec(e);){var p=["li"],u=r[1].length,f="#"===r[1].substr(-1)?"ol":"ul",d=null,h=void 0,g=void 0,v=void 0,x=void 0;if((a=/^(_|\d+)/.exec(r[2]))&&(l=isFinite(a[1])?parseInt(a[1],10):o[u]||i[u]||1,r[2]=r[2].slice(a[1].length)),(v=b(r[2],"li"))&&(r[2]=r[2].slice(v[0]),v=v[1]),/^\.\s*$/.test(r[2]))n=v||{},e.advance(r[0]);else{for(;s.length<u;)h=[f,{},A(s.length+1),d=["li"]],(g=s[s.length-1])&&(g.li.push(A(s.length)),g.li.push(h)),s.push({ul:h,li:d,att:0}),i[s.length]=1;for(;s.length>u;)(x=s.pop()).ul.push(A(s.length)),1!==x.att||x.ul[3][1].substr||y(x.ul[1],x.ul[3].splice(1,1)[0]);g=s[s.length-1],l&&(g.ul[1].start=l,i[u]=l,l=0),n&&(g.att=9,y(g.ul[1],n),n=null),d||(g.ul.push(A(s.length),p),g.li=p),v&&(g.li.push(v),g.att++),Array.prototype.push.apply(g.li,$(r[2].trim(),t)),e.advance(r[0]),i[u]=(i[u]||0)+1}}for(t._lst=i;s.length;)(c=s.pop()).ul.push(A(s.length)),1!==c.att||c.ul[3][1].substr||y(c.ul[1],c.ul[3].splice(1,1)[0]);return c.ul}}},function(e,t,o){var l=o(1),n=/^((?:- (?:[^\n]\n?)+?)+:=(?: *\n[^\0]+?=:(?:\n|$)|(?:[^\0]+?(?:$|\n(?=\n|- )))))+/,p=/^((?:- (?:[^\n]\n?)+?)+):=( *\n[^\0]+?=:\s*(?:\n|$)|(?:[^\0]+?(?:$|\n(?=\n|- ))))/;t.testDefList=function(e){return n.exec(e)},t.parseDefList=function(e,t){e=l(e.trim());for(var n,r,a,c=o(3).parsePhrase,s=o(8).parseFlow,i=["dl","\n"];a=p.exec(e);){for(n=a[1].split(/(?:^|\n)- /).slice(1);n.length;)i.push("\t",["dt"].concat(c(n.shift().trim(),t)),"\n");r=a[2].trim(),i.push("\t",["dd"].concat(/=:$/.test(r)?s(r.slice(0,-2).trim(),t):c(r,t)),"\n"),e.advance(a[0])}return i}},function(e,t,n){var r=n(0),b=n(6),$=n(1),S=n(4).parseAttr,A=n(3).parsePhrase,_=n(7).reIndent,a=n(5).txattr;r.pattern.txattr=a;var c=r.compile(/^((?:table[:txattr:]\.(?:\s(.+?))\s*\n)?(?:(?:[:txattr:]\.[^\n\S]*)?\|.*?\|[^\n\S]*(?:\n|$))+)([^\n\S]*\n)?/,"s"),k=/^table(_?)([^\n]*?)\.(?:[ \t](.+?))?\s*\n/,O=r.compile(/^(?:\|([~^-][:txattr:])\.\s*\n)?([:txattr:]\.[^\n\S]*)?\|(.*?)\|[^\n\S]*(\n|$)/,"s"),j=/^\|=([^\n+]*)\n/,w=/^\|:([^\n+]*)\|[\r\t ]*\n/,T=/^\|([\^\-~])([^\n+]*)\.[ \t\r]*\n/,E={"^":"thead","~":"tfoot","-":"tbody"};function L(e){var c=["colgroup",{}];return e.split("|").forEach(function(e,t){var n,r=t?{}:c[1],a=e.trim();a&&((n=/^\\(\d+)/.exec(a))&&(r.span=+n[1],a=a.slice(n[0].length)),(n=S(a,"col"))&&(b(r,n[1]),a=a.slice(n[0])),(n=/\b\d+\b/.exec(a))&&(r.width=+n[0])),t&&c.push("\n\t\t",["col",r])}),c.concat(["\n\t"])}e.exports={parseColgroup:L,parseTable:function(e,t){function n(e,t){c=[e,t||{}],u.push(c)}e=$(e.trim());var r,a,c,s,i,o,l,p,u=[],f={},d=0;(p=k.exec(e))&&(e.advance(p[0]),(o=S(p[2],"table"))&&b(f,o[1]),p[3]&&(f.summary=p[3])),(p=j.exec(e))&&(a=["caption"],(o=S(p[1],"caption"))&&(a.push(o[1]),p[1]=p[1].slice(o[0])),/\./.test(p[1])?(a.push(p[1].slice(1).replace(/\|\s*$/,"").trim()),d++,e.advance(p[0])):a=null);do{if(p=w.exec(e))r=L(p[1]),d++;else if(p=T.exec(e)){var h=E[p[1]]||"tbody";n(h,(o=S("".concat(p[2]," "),h))&&o[1]),d++}else if(p=O.exec(e)){c||n("tbody"),s=["tr"],p[2]&&(o=S(p[2],"tr"))&&s.push(o[1]),c.push("\n\t\t",s),i=$(p[3]);do{i.save();var g=i.startsWith("_"),v=[g?"th":"td"];if(g&&i.advance(1),(o=S(i,"td"))&&(i.advance(o[0]),v.push(o[1])),o||g){var x=/^\.\s*/.exec(i);x?i.advance(x[0]):(v=["td"],i.load())}var m=/^(==.*?==|[^|])*/.exec(i);v=v.concat(A(m[0],t)),s.push("\n\t\t\t",v),l="|"===i.valueOf().charAt(m[0].length),i.advance(m[0].length+1)}while(l);s.push("\n\t\t")}p&&e.advance(p[0])}while(p);var y=["table",f];return d?(a&&y.push("\n\t",a),r&&y.push("\n\t",r),u.forEach(function(e){y.push("\n\t",e.concat(["\n\t"]))})):y=y.concat(_(u[0].slice(2),-1)),y.push("\n"),y},testTable:function(e){return c.exec(e)}}}],a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=10);function a(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var n,r});