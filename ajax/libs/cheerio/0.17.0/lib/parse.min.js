var htmlparser=require("htmlparser2"),utils=require("./utils");exports=module.exports=function(e,r){var t=evaluate(e,r),n={type:"root",name:"root",parent:null,prev:null,next:null,children:[]};return update(t,n),n};var evaluate=exports.evaluate=function(e,r){return"string"==typeof e||Buffer.isBuffer(e)?htmlparser.parseDOM(e,r):e},update=exports.update=function(e,r){Array.isArray(e)||(e=[e]),r?r.children=e:r=null;for(var t=0;t<e.length;t++){var n=e[t],l=n.parent||n.root,u=l&&l.children;u&&u!==e&&(u.splice(u.indexOf(n),1),n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev)),r?(n.prev=e[t-1]||null,n.next=e[t+1]||null):n.prev=n.next=null,r&&"root"===r.type?(n.root=r,n.parent=null):(n.root=null,n.parent=r)}return r};