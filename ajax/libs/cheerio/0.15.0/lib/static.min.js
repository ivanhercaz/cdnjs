var select=require("CSSselect"),parse=require("./parse"),render=require("./render"),decode=require("./utils").decode,_=require("lodash"),load=exports.load=function(r,n){var i=require("./cheerio");n=_.defaults(n||{},i.prototype.options);function e(r,e,t,o){return o=_.defaults(o||{},n),new i(r,e,t||s,o)}var s=parse(r,n);return e.__proto__=exports,e._root=s,e},html=exports.html=function(r){return r?(r="string"==typeof r?select(r,this._root):r,render(r)):this._root&&this._root.children?render(this._root.children):""},xml=exports.xml=function(r){return r?(r="string"==typeof r?select(r,this._root):r,render(r,{xmlMode:!0})):this._root&&this._root.children?render(this._root.children,{xmlMode:!0}):""},text=exports.text=function(r){if(!r)return"";for(var e,t="",o=r.length,n=0;n<o;n++)"text"===(e=r[n]).type?t+=decode(e.data):e.children&&"comment"!==e.type&&(t+=text(e.children));return t},parseHTML=exports.parseHTML=function(r,e,t){var o;return r&&"string"==typeof r?("boolean"==typeof e&&(t=e),o=this.load(r),t||o("script").remove(),o.root()[0].children):null},root=exports.root=function(){return this(this._root)},contains=exports.contains=function(r,e){if(e===r)return!1;for(;e&&e!==e.parent;)if((e=e.parent)===r)return!0;return!1};