var select=require("CSSselect"),parse=require("./parse"),render=require("dom-serializer"),_=require("lodash");exports.load=function(t,n){var i=require("./cheerio");n=_.defaults(n||{},i.prototype.options);function r(t,r,e,o){return o=_.defaults(o||{},n),i.call(this,t,r,e||s,o)}var s=parse(t,n);return r.prototype=i.prototype,_.merge(r,exports),r._root=s,r._options=n,r},exports.html=function(t,r){var e=require("./cheerio");return"[object Object]"!==Object.prototype.toString.call(t)||r||"length"in t||"type"in t||(r=t,t=void 0),r=_.defaults(r||{},this._options,e.prototype.options),t?(t="string"==typeof t?select(t,this._root,r):t,render(t,r)):this._root&&this._root.children?render(this._root.children,r):""},exports.xml=function(t){return t?(t="string"==typeof t?select(t,this._root,this.options):t,render(t,{xmlMode:!0})):this._root&&this._root.children?render(this._root.children,{xmlMode:!0}):""},exports.text=function(t){if(!t)return"";for(var r,e="",o=t.length,n=0;n<o;n++)"text"===(r=t[n]).type?e+=r.data:r.children&&"comment"!==r.type&&(e+=exports.text(r.children));return e},exports.parseHTML=function(t,r,e){var o;return t&&"string"==typeof t?("boolean"==typeof r&&(e=r),o=this.load(t),e||o("script").remove(),o.root()[0].children):null},exports.root=function(){return this(this._root)},exports.contains=function(t,r){if(r===t)return!1;for(;r&&r!==r.parent;)if((r=r.parent)===t)return!0;return!1};