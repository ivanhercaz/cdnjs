!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"),require("react-dom"));else if("function"==typeof define&&define.amd)define(["react","react-dom"],t);else{var n="object"==typeof exports?t(require("react"),require("react-dom")):t(e.react,e["react-dom"]);for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(window,function(n,o){return i={},r.m=a=[function(e,t){e.exports=n},function(e,t,a){"use strict";var r,n,i=(n={},function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}),l={};function c(e,t,n){for(var o=0;o<t.length;o++){var r={css:t[o][1],media:t[o][2],sourceMap:t[o][3]};l[e][o]?l[e][o](r):l[e].push(d(r,n))}}function u(e){var t,n=document.createElement("style"),o=e.attributes||{};if(void 0!==o.nonce||(t=a.nc)&&(o.nonce=t),Object.keys(o).forEach(function(e){n.setAttribute(e,o[e])}),"function"==typeof e.insert)e.insert(n);else{var r=i(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}return n}var o,s=(o=[],function(e,t){return o[e]=t,o.filter(Boolean).join("\n")});function f(e,t,n,o){var r,a,i=n?"":o.css;e.styleSheet?e.styleSheet.cssText=s(t,i):(r=document.createTextNode(i),(a=e.childNodes)[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r))}var h=null,p=0;function d(t,e){var n,o,r,a;return a=e.singleton?(n=p++,o=h=h||u(e),r=f.bind(null,o,n,!1),f.bind(null,o,n,!0)):(o=u(e),r=function(e,t,n){var o=n.css,r=n.media,a=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),a&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}.bind(null,o,e),function(){null!==o.parentNode&&o.parentNode.removeChild(o)}),r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else a()}}e.exports=function(n,e,o){return(o=o||{}).singleton||"boolean"==typeof o.singleton||(o.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r)),n=o.base?n+o.base:n,e=e||[],l[n]||(l[n]=[]),c(n,e,o),function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){l[n]||(l[n]=[]),c(n,e,o);for(var t=e.length;t<l[n].length;t++)l[n][t]();l[n].length=e.length,0===l[n].length&&delete l[n]}}}},function(e,t){e.exports=o},function(e,t,n){var o=n(1),r=n(4);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var a=(o(e.i,r,{insert:"head",singleton:!1}),r.locals?r.locals:{});e.exports=a},function(e,t,n){},function(e,t,n){var o=n(1),r=n(6);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var a=(o(e.i,r,{insert:"head",singleton:!1}),r.locals?r.locals:{});e.exports=a},function(e,t,n){},function(e,t,n){var o=n(1),r=n(8);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var a=(o(e.i,r,{insert:"head",singleton:!1}),r.locals?r.locals:{});e.exports=a},function(e,t,n){},function(e,t,n){var o=n(1),r=n(10);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var a=(o(e.i,r,{insert:"head",singleton:!1}),r.locals?r.locals:{});e.exports=a},function(e,t,n){},function(e,t,n){var o=n(1),r=n(12);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var a=(o(e.i,r,{insert:"head",singleton:!1}),r.locals?r.locals:{});e.exports=a},function(e,t,n){},function(e,t,n){var o=n(1),r=n(14);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var a=(o(e.i,r,{insert:"head",singleton:!1}),r.locals?r.locals:{});e.exports=a},function(e,t,n){},function(e,t,n){var o=n(1),r=n(16);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var a=(o(e.i,r,{insert:"head",singleton:!1}),r.locals?r.locals:{});e.exports=a},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),h=n.n(o),r=n(2),p=n.n(r);function a(e,t){var n=(new Date).getTime();return function(){(new Date).getTime()-n>=t&&(e.apply(this,arguments),n=(new Date).getTime())}}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=(i(u.prototype,[{key:"pushRecord",value:function(e){return this.record.push(e)}},{key:"getRecord",value:function(){return this.record}},{key:"getLastRecord",value:function(){var e=this.record.length;return this.record[e-1]}},{key:"undo",value:function(e){var t=this.record.pop();this.recycle.push(t),"function"==typeof e&&e(this.getLastRecord())}},{key:"redo",value:function(e){var t;0<this.recycle.length&&(t=this.recycle.pop(),this.record.push(t),"function"==typeof e&&e(this.getLastRecord()))}},{key:"cleanRedoList",value:function(e){this.recycle=[],"function"==typeof e&&e()}}]),u);function u(){!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),l(this,"name","logger"),l(this,"record",[]),l(this,"recycle",[])}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=(s(m.prototype,[{key:"getDecoratedText",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.type=e,this.option=t,this.result=this.calcDecorateText(this.type,t)}},{key:"calcDecorateText",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};switch(e){case"h1":return"\n# ".concat(this.target," \n");case"h2":return"\n## ".concat(this.target," \n");case"h3":return"\n### ".concat(this.target," \n");case"h4":return"\n#### ".concat(this.target," \n");case"h5":return"\n##### ".concat(this.target," \n");case"h6":return"\n###### ".concat(this.target," \n");case"bold":return"**".concat(this.target,"**");case"italic":return"*".concat(this.target,"*");case"underline":return"++".concat(this.target,"++");case"strikethrough":return"~~".concat(this.target,"~~");case"unordered":return"\n- ".concat(this.target,"\n");case"order":return"\n1. ".concat(this.target,"\n");case"quote":return"\n> ".concat(this.target,"\n");case"hr":return"\n---\n";case"inlinecode":return"`".concat(this.target,"`");case"code":return"\n```\n".concat(this.target,"\n```\n");case"table":return this.formatTableText(this.target,t);case"image":return"![".concat(t.target,"](").concat(t.imageUrl||"",")");case"link":return"[".concat(this.target,"](").concat(t.linkUrl||"",")");default:return"".concat(this.target)}}},{key:"formatTableText",value:function(e,t){for(var n=t.row,o=void 0===n?2:n,r=t.col,a=void 0===r?2:r,i=["|"],l=["|"],c=["|"],u="",s=0;s<=a;s++)i.push(" Head |"),c.push(" --- |"),l.push(" Data |");for(var f=0;f<=o;f++)u=u+"\n"+l.join("");return"\n"+i.join("")+"\n"+c.join("")+u+"\n"}}]),m);function m(e){!function(e){if(!(e instanceof m))throw new TypeError("Cannot call a class as a function")}(this),f(this,"name","selection decoration"),f(this,"target",""),f(this,"type",""),f(this,"option",{}),f(this,"result",""),this.target=e}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(E,o.Component),b(E.prototype,[{key:"render",value:function(){return h.a.createElement("div",{className:"rc-md-navigation"},h.a.createElement("div",{className:"navigation-nav left"},this.props.left),h.a.createElement("div",{className:"navigation-nav middle"},this.props.middle),h.a.createElement("div",{className:"navigation-nav right"},this.props.right))}}]),E);function E(e){return function(e){if(!(e instanceof E))throw new TypeError("Cannot call a class as a function")}(this),t=this,!(n=g(E).call(this,e))||"object"!==y(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n;var t,n}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(3);var T=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(j,o.Component),S(j.prototype,[{key:"_handleClose",value:function(e){e.stopPropagation();var t=this.props.onClose;"function"==typeof t&&t()}},{key:"render",value:function(){return h.a.createElement("div",{className:"drop-wrap ".concat(this.props.show?"show":"hidden"),onClick:this.handleClose},"function"==typeof this.props.render&&this.props.render())}}]),j);function j(e){var t,n;return function(e){if(!(e instanceof j))throw new TypeError("Cannot call a class as a function")}(this),(t=!(n=_(j).call(this,e))||"object"!==k(n)&&"function"!=typeof n?O(this):n).handleClose=t._handleClose.bind(O(t)),t}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(5);var D=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(H,o.Component),P(H.prototype,[{key:"handleHeader",value:function(e){var t=this.props.onSelectHeader;"function"==typeof t&&t(e)}},{key:"render",value:function(){return h.a.createElement("ul",{className:"header-list"},h.a.createElement("li",{className:"list-item"},h.a.createElement("h1",{onClick:this.handleHeader.bind(this,"h1")},"H1")),h.a.createElement("li",{className:"list-item"},h.a.createElement("h2",{onClick:this.handleHeader.bind(this,"h2")},"H2")),h.a.createElement("li",{className:"list-item"},h.a.createElement("h3",{onClick:this.handleHeader.bind(this,"h3")},"H3")),h.a.createElement("li",{className:"list-item"},h.a.createElement("h4",{onClick:this.handleHeader.bind(this,"h4")},"H4")),h.a.createElement("li",{className:"list-item"},h.a.createElement("h5",{onClick:this.handleHeader.bind(this,"h5")},"H5")),h.a.createElement("li",{className:"list-item"},h.a.createElement("h6",{onClick:this.handleHeader.bind(this,"h6")},"H6")))}}]),H);function H(){return function(e){if(!(e instanceof H))throw new TypeError("Cannot call a class as a function")}(this),e=this,!(t=M(H).apply(this,arguments))||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var e,t}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(7);var F=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(W,o.Component),L(W.prototype,[{key:"formatTableModel",value:function(){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return new Array(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0).fill().map(function(){return new Array(e).fill(0)})}},{key:"calcWrapStyle",value:function(){var e=this.state,t=e.maxRow,n=e.maxCol,o=this.config,r=o.width,a=o.height,i=o.padding,l=(a+i)*t-i;return{width:"".concat((r+i)*n-i,"px"),height:"".concat(l,"px")}}},{key:"calcItemStyle",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=this.config,o=n.width,r=n.height,a=n.padding,i=(o+a)*t;return{top:"".concat((r+a)*e,"px"),left:"".concat(i,"px")}}},{key:"handleHover",value:function(o,r){var e=this.state.list.map(function(e,n){return e.map(function(e,t){return n<=o&&t<=r?1:0})});this.setState({list:e})}},{key:"handleSetTable",value:function(e,t){var n=this.props.onSetTable;"function"==typeof n&&n({row:e,col:t})}},{key:"render",value:function(){var o=this,e=this.state.list;return h.a.createElement("ul",{className:"table-list wrap",style:this.calcWrapStyle()},e.map(function(e,n){return e.map(function(e,t){return h.a.createElement("li",{className:"list-item ".concat(1===e?"active":""),key:"".concat(n,"-").concat(t),style:o.calcItemStyle(n,t),onMouseOver:o.handleHover.bind(o,n,t),onClick:o.handleSetTable.bind(o,n,t)})})}))}}]),W);function W(e){var t,n,o,r;!function(e){if(!(e instanceof W))throw new TypeError("Cannot call a class as a function")}(this),t=!(n=R(W).call(this,e))||"object"!==I(n)&&"function"!=typeof n?U(this):n,r={padding:3,width:20,height:20},"config"in(o=U(t))?Object.defineProperty(o,"config",{value:r,enumerable:!0,configurable:!0,writable:!0}):o.config=r;var a=e.maxRow,i=void 0===a?5:a,l=e.maxCol,c=void 0===l?6:l;return t.state={maxRow:i,maxCol:c,list:t.formatTableModel(i,c)},t}function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(9);var z=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(G,o.Component),B(G.prototype,[{key:"click",value:function(){var e=this;this.locked||(this.locked=!0,this.input.value="",this.input.click(),this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(function(){e.locked=!1},200))}},{key:"componentWillUnmount",value:function(){this.timerId&&clearTimeout(this.timerId)}},{key:"render",value:function(){var t=this;return h.a.createElement("input",{type:"file",ref:function(e){t.input=e},accept:this.props.accept,style:{position:"absolute",zIndex:-1,left:0,top:0,width:0,height:0,opacity:0},onChange:this.props.onChange})}}]),G);function G(e){return function(e){if(!(e instanceof G))throw new TypeError("Cannot call a class as a function")}(this),t=this,!(n=A(G).call(this,e))||"object"!==q(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n;var t,n}function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(11);var Z=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}($,o.Component),Q($.prototype,[{key:"render",value:function(){return h.a.createElement("span",{className:"rmel-"+this.props.type})}}]),$);function $(){return function(e){if(!(e instanceof $))throw new TypeError("Cannot call a class as a function")}(this),e=this,!(t=X($).apply(this,arguments))||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var e,t}function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(13);var re=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(ie,o.Component),te(ie.prototype,[{key:"render",value:function(){return h.a.createElement("div",{className:"tool-bar",style:this.props.style},this.props.children)}}]),ie),ae={theme:"default",view:{menu:!0,md:!0,html:!0,fullScreen:!0},htmlClass:"",markdownClass:"",logger:{interval:3e3},syncScrollMode:["rightFollowLeft","leftFollowRight"],imageUrl:"",imageAccept:"",linkUrl:"",table:{maxRow:4,maxCol:6},clearTip:"Are you sure you want to clear your markdown ?"};function ie(){return function(e){if(!(e instanceof ie))throw new TypeError("Cannot call a class as a function")}(this),e=this,!(t=ne(ie).apply(this,arguments))||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var e,t}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function ue(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(n),!0).forEach(function(e){se(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pe(e,t,n){return t&&he(e.prototype,t),n&&he(e,n),e}function de(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?me(e):t}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(15);var ve=(be(_e,o.Component),pe(_e,[{key:"render",value:function(){return h.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.html},className:"custom-html-style ".concat(this.props.className||"")})}}]),_e),we=(be(Se,o.Component),pe(Se,[{key:"render",value:function(){return h.a.createElement("textarea",{className:"html-code ".concat(this.props.className||""),value:this.props.html,onChange:function(){}})}}]),Se),Ee=(be(ke,o.Component),pe(ke,[{key:"componentDidMount",value:function(){var t=this;this.renderHTML(this.props.value||"").then(function(e){t.setState({html:e})}),this.initLogger()}},{key:"componentWillReceiveProps",value:function(e){var t,n=this;e.value!==this.props.value&&(t=e.value,t=(t=this.formatString(t))&&t.replace(/↵/g,"\n"),this.renderHTML(t).then(function(e){n.setState({text:t,html:e})}))}},{key:"componentWillUnmount",value:function(){this.endLogger()}},{key:"formatString",value:function(e){return"string"!=typeof this.props.value?(console&&console.error&&console.error('The type of "value" must be String!'),String(e).toString()):e}},{key:"initConfig",value:function(){return ue({},ae,{},this.props.config)}},{key:"initLogger",value:function(){this.logger=new c,this.startLogger(),this.logger.pushRecord(this.state.text)}},{key:"startLogger",value:function(){var t=this;this.loggerTimerId||(this.loggerTimerId=setInterval(function(){var e=t.state.text;t.logger.getLastRecord()!==e&&t.logger.pushRecord(e)},this.config.logger.interval)),this.logger.cleanRedoList()}},{key:"endLogger",value:function(){this.loggerTimerId&&(clearInterval(this.loggerTimerId),this.loggerTimerId=null)}},{key:"handleGetLogger",value:function(){console.log("handleGetLogger",this.logger)}},{key:"_handleUndo",value:function(){var t=this;this.logger.undo(function(e){t.endLogger(),t._setMdText(e)})}},{key:"_handleRedo",value:function(){var t=this;this.logger.redo(function(e){t._setMdText(e)})}},{key:"handleDecorate",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(-1<["h1","h2","h3","h4","h5","h6","bold","italic","underline","strikethrough","unordered","order","quote","hr","inlinecode","code","table","image","link"].indexOf(e)){if(!this.selection.isSelected)return;var n=this._getDecoratedText(e,t);this._setMdText(n),this._clearSelection()}else{var o=this._getDecoratedText(e,t);this._setMdText(o)}}},{key:"_getDecoratedText",value:function(e,t){var n=this.state.text,o=void 0===n?"":n,r=this.selection,a=o.slice(0,r.start),i=o.slice(r.end,o.length),l=new d(r.text),c="image"===e?l.getDecoratedText(e,{target:t.target||"",imageUrl:t.imageUrl||this.config.imageUrl}):"link"===e?l.getDecoratedText(e,{linkUrl:this.config.linkUrl}):l.getDecoratedText(e,t);return a+"".concat(c)+i}},{key:"renderHTML",value:function(e){if(this.props.renderHTML){var t=this.props.renderHTML(e);return"string"==typeof t?Promise.resolve(t):"function"==typeof t?Promise.resolve(t()):("object"===le(t)&&t.then,t)}console.error("renderHTML props must be required!")}},{key:"_handleToggleFullScreen",value:function(){this.setState({fullScreen:!this.state.fullScreen})}},{key:"changeView",value:function(e){var t=Object.assign({},this.state.view,e);this.setState({view:t})}},{key:"_handleToggleMenu",value:function(){this.changeView({menu:!this.state.view.menu})}},{key:"_handleToggleView",value:function(e){"md"===e?this.changeView({md:!1,html:!0}):this.changeView({md:!0,html:!1})}},{key:"_handleMdPreview",value:function(){this.changeView({html:!this.state.view.html})}},{key:"_handleHtmlPreview",value:function(){this.changeView({md:!this.state.view.md})}},{key:"_handleToggleHtmlType",value:function(){var e=this.state.htmlType;"render"===e?e="source":"source"===e&&(e="render"),this.setState({htmlType:e})}},{key:"_handleEmpty",value:function(e){var t,n=this,o=this.props.onBeforeClear;"function"==typeof o&&("object"===le(t=o.call(this,e))&&"function"==typeof t.then?t.then(function(e){e&&n.setState({text:"",html:""})}):!0===t&&this.setState({text:"",html:""}))}},{key:"_handleImageUpload",value:function(){"function"==typeof this.props.onImageUpload?this.inputFile&&this.inputFile.click():this.handleDecorate("image")}},{key:"_handleCustomImageUpload",value:function(e){var t,n=this,o=this.props.onCustomImageUpload;"function"!=typeof o||"object"===le(t=o.call(this,e))&&"function"==typeof t.then&&t.then(function(e){var t=e.url;t&&n.handleDecorate("image",{imageUrl:t})})}},{key:"onImageChanged",value:function(t){var n=this;(0,this.props.onImageUpload)(t,function(e){n.handleDecorate("image",{target:t.name,imageUrl:e})})}},{key:"_handleChange",value:function(e){e.persist(),this.startLogger();var t=e.target.value;this.hasContentChanged||(this.hasContentChanged=!0),this._setMdText(t,e)}},{key:"_handleInputSelect",value:function(e){e.persist(),this.selection=Object.assign({},this.selection,{isSelected:!0},this._getSelectionInfo(e))}},{key:"handleScrollEle",value:function(e){this.willScrollEle=e}},{key:"_setScrollValue",value:function(){var e=this.nodeMdText,t=this.nodeMdPreview,n=this.nodeMdPreviewWraper;e&&t&&n&&(this.scale=(e.scrollHeight-e.offsetHeight+35)/(t.offsetHeight-n.offsetHeight+35),this.hasContentChanged=!1)}},{key:"_clearSelection",value:function(){this.selection=Object.assign({},this.initialSelection)}},{key:"_getSelectionInfo",value:function(e){var t=e.srcElement||e.target,n=t.selectionStart,o=t.selectionEnd;return{start:n,end:o,text:(t.value||"").slice(n,o)}}},{key:"_setMdText",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length?arguments[1]:void 0,o=e.replace(/↵/g,"\n");this.setState({text:e}),this.renderHTML(o).then(function(e){t.setState({html:e}),t.onEmit({text:o,html:e},n)})}},{key:"_isKeyMatch",value:function(e,t,n){var o=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return e.ctrlKey===o&&(e.key?e.key===t:e.keyCode===n)}},{key:"_handleonKeyDown",value:function(e){this._isKeyMatch(e,"z",90,!0)&&(this._handleUndo(),e.preventDefault()),this._isKeyMatch(e,"y",89,!0)&&(this._handleRedo(),e.preventDefault())}},{key:"onEmit",value:function(e,t){var n=this.props.onChange;"function"==typeof n&&n(e,t)}},{key:"getMdValue",value:function(){return this.state.text}},{key:"getHtmlValue",value:function(){return this.state.html}},{key:"showDropList",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"header",t=1<arguments.length?arguments[1]:void 0,n=this.state.dropButton;this.setState({dropButton:ue({},n,se({},e,t))})}},{key:"render",value:function(){var e,t,n,o,r,a,i=this,l=this.state,c=l.view,u=l.dropButton,s=l.fullScreen,f=l.table;return h.a.createElement("div",{className:"rc-md-editor ".concat(s?"full":""),style:this.props.style,onKeyDown:this.handleonKeyDown},c.menu&&h.a.createElement(w,{left:h.a.createElement("div",{className:"button-wrap"},h.a.createElement("span",{className:"button button-type-header",title:"Header",onMouseEnter:function(){return i.showDropList("header",!0)},onMouseLeave:function(){return i.showDropList("header",!1)}},h.a.createElement(Z,{type:"icon-header"}),h.a.createElement(T,{show:u.header,onClose:function(){i.showDropList("header",!1)},render:function(){return h.a.createElement(D,{onSelectHeader:function(e){i.handleDecorate(e)}})}})),h.a.createElement("span",{className:"button button-type-bold",title:"Bold",onClick:function(){return i.handleDecorate("bold")}},h.a.createElement(Z,{type:"icon-bold"})),h.a.createElement("span",{className:"button button-type-italic",title:"Italic",onClick:function(){return i.handleDecorate("italic")}},h.a.createElement(Z,{type:"icon-italic"})),h.a.createElement("span",{className:"button button-type-underline",title:"Underline",onClick:function(){return i.handleDecorate("underline")}},h.a.createElement(Z,{type:"icon-underline"})),h.a.createElement("span",{className:"button button-type-strikethrough",title:"Strikethrough",onClick:function(){return i.handleDecorate("strikethrough")}},h.a.createElement(Z,{type:"icon-strikethrough"})),h.a.createElement("span",{className:"button button-type-unordered",title:"Unordered list",onClick:function(){return i.handleDecorate("unordered")}},h.a.createElement(Z,{type:"icon-list-ul"})),h.a.createElement("span",{className:"button button-type-ordered",title:"Ordered list",onClick:function(){return i.handleDecorate("order")}},h.a.createElement(Z,{type:"icon-list-ol"})),h.a.createElement("span",{className:"button button-type-quote",title:"Quote",onClick:function(){return i.handleDecorate("quote")}},h.a.createElement(Z,{type:"icon-quote-left"})),h.a.createElement("span",{className:"button button-type-hr",title:"Line break",onClick:function(){return i.handleDecorate("hr")}},h.a.createElement(Z,{type:"icon-window-minimize"})),h.a.createElement("span",{className:"button button-type-inlinecode",title:"Inline code",onClick:function(){return i.handleDecorate("inlinecode")}},h.a.createElement(Z,{type:"icon-embed"})),h.a.createElement("span",{className:"button button-type-code",title:"Block code",onClick:function(){return i.handleDecorate("code")}},h.a.createElement(Z,{type:"icon-embed2"})),h.a.createElement("span",{className:"button button-type-table",title:"Table",onMouseEnter:function(){return i.showDropList("table",!0)},onMouseLeave:function(){return i.showDropList("table",!1)}},h.a.createElement(Z,{type:"icon-table"}),h.a.createElement(T,{show:u.table,onClose:function(){i.showDropList("table",!1)},render:function(){return h.a.createElement(F,{maxRow:f.maxRow,maxCol:f.maxCol,onSetTable:function(e){i.handleDecorate("table",e)}})}})),i.props.onCustomImageUpload?h.a.createElement("span",{className:"button button-type-image",title:"Image",onClick:i.handleCustomImageUpload},h.a.createElement(Z,{type:"icon-photo"})):h.a.createElement("span",{className:"button button-type-image",title:"Image",onClick:i.handleImageUpload,style:{position:"relative"}},h.a.createElement(Z,{type:"icon-photo"}),h.a.createElement(z,{accept:i.config.imageAccept||"",ref:function(e){i.inputFile=e},onChange:function(e){e.persist();var t=e.target.files[0];i.onImageChanged(t)}})),h.a.createElement("span",{className:"button button-type-link",title:"Link",onClick:function(){return i.handleDecorate("link")}},h.a.createElement(Z,{type:"icon-link"})),h.a.createElement("span",{className:"button button-type-clear",title:"Clear",onClick:i.handleEmpty},h.a.createElement(Z,{type:"icon-trash"})),h.a.createElement("span",{className:"button button-type-undo",title:"Undo",onClick:i.handleUndo},h.a.createElement(Z,{type:"icon-reply"})),h.a.createElement("span",{className:"button button-type-redo",title:"Redo",onClick:i.handleRedo},h.a.createElement(Z,{type:"icon-share"}))),right:h.a.createElement("div",{className:"button-wrap"},c.fullScreen&&h.a.createElement("span",{className:"button button-type-fullscreen",title:"Full screen",onClick:i.handleToggleFullScreen},s?h.a.createElement(Z,{type:"icon-shrink"}):h.a.createElement(Z,{type:"icon-enlarge"})))}),h.a.createElement("div",{className:"editor-container"},(e=i.state,t=e.html,n=e.text,o=e.view,r=e.htmlType,a=[],o.md&&a.push(h.a.createElement("section",{className:"sec-md",key:"md"},h.a.createElement(re,null,h.a.createElement("span",{className:"button button-type-menu",title:o.menu?"Hide menu":"Show menu",onClick:i.handleToggleMenu},o.menu?h.a.createElement(Z,{type:"icon-chevron-up"}):h.a.createElement(Z,{type:"icon-chevron-down"})),h.a.createElement("span",{className:"button button-type-preview",title:o.html?"Hide preview":"Show preview",onClick:i.handleMdPreview},o.html?h.a.createElement(Z,{type:"icon-desktop"}):h.a.createElement(Z,{type:"icon-columns"})),h.a.createElement("span",{className:"button button-type-md",title:"Preview",onClick:function(){return i.handleToggleView("md")}},h.a.createElement(Z,{type:"icon-refresh"}))),h.a.createElement("textarea",{id:"textarea",name:i.props.name||"textarea",ref:function(e){return i.nodeMdText=e},value:n,className:"input ".concat(i.config.markdownClass||""),wrap:"hard",onChange:i.handleChange,onSelect:i.handleInputSelect,onScroll:i.handleInputScroll,onMouseOver:function(){return i.handleScrollEle("md")}}))),o.html&&a.push(h.a.createElement("section",{className:"sec-html",key:"html"},h.a.createElement(re,{style:{right:"20px"}},h.a.createElement("span",{className:"button button-type-menu",title:o.menu?"hidden menu":"show menu",onClick:i.handleToggleMenu},o.menu?h.a.createElement(Z,{type:"icon-chevron-up"}):h.a.createElement(Z,{type:"icon-chevron-down"})),h.a.createElement("span",{className:"button button-type-editor",title:o.md?"Hide editor":"Show editor",onClick:i.handleHtmlPreview},o.md?h.a.createElement(Z,{type:"icon-desktop"}):h.a.createElement(Z,{type:"icon-columns"})),h.a.createElement("span",{className:"button button-type-toggle",title:"Toggle",onClick:function(){return i.handleToggleView("html")}},h.a.createElement(Z,{type:"icon-refresh"})),h.a.createElement("span",{className:"button button-type-html",title:"Show HTML",onClick:i.handleToggleHtmlType},"render"===r?h.a.createElement(Z,{type:"icon-embed"}):h.a.createElement(Z,{type:"icon-eye"}))),"render"===r?h.a.createElement("div",{className:"html-wrap",ref:function(e){return i.nodeMdPreviewWraper=e},onMouseOver:function(){return i.handleScrollEle("html")},onScroll:i.handlePreviewScroll},h.a.createElement(ve,{html:t,className:i.config.htmlClass,ref:function(e){return i.nodeMdPreview=p.a.findDOMNode(e)}})):h.a.createElement("div",{className:"html-code-wrap",ref:function(e){return i.nodeMdPreviewWraper=p.a.findDOMNode(e)},onScroll:i.handlePreviewScroll},h.a.createElement(we,{html:t,className:i.config.htmlClass,ref:function(e){return i.nodeMdPreview=p.a.findDOMNode(e)}})))),a)))}}]),ke);function ke(e){var n;return fe(this,ke),se(me(n=de(this,ye(ke).call(this,e))),"config",{}),se(me(n),"logger",{}),se(me(n),"loggerTimerId",null),se(me(n),"mdjs",null),se(me(n),"nodeMdText",null),se(me(n),"nodeMdPreview",null),se(me(n),"nodeMdPreviewWraper",null),se(me(n),"inputFile",null),se(me(n),"scale",0),se(me(n),"willScrollEle",""),se(me(n),"hasContentChanged",!0),se(me(n),"initialSelection",{isSelected:!1,start:0,end:0,text:""}),se(me(n),"selection",ue({},n.initialSelection)),n.config=n.initConfig(),n.state={text:(n.formatString(n.props.value)||"").replace(/↵/g,"\n"),html:"",view:n.config.view,htmlType:"render",dropButton:{header:!1,table:!1},fullScreen:!1,table:n.config.table},n.handleChange=n._handleChange.bind(me(n)),n.handleInputSelect=n._handleInputSelect.bind(me(n)),n.handleImageUpload=n._handleImageUpload.bind(me(n)),n.handleCustomImageUpload=n._handleCustomImageUpload.bind(me(n)),n.handleEmpty=n._handleEmpty.bind(me(n)),n.handleUndo=n._handleUndo.bind(me(n)),n.handleRedo=n._handleRedo.bind(me(n)),n.handleToggleFullScreen=n._handleToggleFullScreen.bind(me(n)),n.handleToggleMenu=n._handleToggleMenu.bind(me(n)),n.handleToggleView=n._handleToggleView.bind(me(n)),n.handleMdPreview=n._handleMdPreview.bind(me(n)),n.handleHtmlPreview=n._handleHtmlPreview.bind(me(n)),n.handleToggleHtmlType=n._handleToggleHtmlType.bind(me(n)),n.handleonKeyDown=n._handleonKeyDown.bind(me(n)),n.handleInputScroll=a(function(e){var t=n.config.syncScrollMode;(void 0===t?[]:t).includes("rightFollowLeft")&&(e.persist(),"md"===n.willScrollEle&&(n.hasContentChanged&&n._setScrollValue(),n.nodeMdPreviewWraper&&n.nodeMdText&&(n.nodeMdPreviewWraper.scrollTop=n.nodeMdText.scrollTop/n.scale)))},1e3/60),n.handlePreviewScroll=a(function(e){var t=n.config.syncScrollMode;(void 0===t?[]:t).includes("leftFollowRight")&&(e.persist(),"html"===n.willScrollEle&&(n.hasContentChanged&&n._setScrollValue(),n.nodeMdText&&n.nodeMdPreviewWraper&&(n.nodeMdText.scrollTop=n.nodeMdPreviewWraper.scrollTop*n.scale)))},1e3/60),n}function Se(){return fe(this,Se),de(this,ye(Se).apply(this,arguments))}function _e(){return fe(this,_e),de(this,ye(_e).apply(this,arguments))}se(Ee,"defaultProps",{onBeforeClear:function(){var t=this;return new Promise(function(e){window.confirm&&"function"==typeof window.confirm?e(!!window.confirm(t.config.clearTip)):e(!0)})}}),Ee.HtmlRender=ve,n.d(t,"MdEditor",function(){return Ee}),n.d(t,"HtmlRender",function(){return ve}),t.default=Ee}],r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=17);function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var a,i});