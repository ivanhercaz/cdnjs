!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("fs")):"function"==typeof define&&define.amd?define(["fs"],t):"object"==typeof exports?exports.scribble=t(require("fs")):n.scribble=t(n.fs)}(window,(function(n){return function(n){var t={};function r(e){if(t[e])return t[e].exports;var i=t[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=n,r.c=t,r.d=function(n,t,e){r.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var i in n)r.d(e,i,function(t){return n[t]}.bind(null,i));return e},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,"a",t),t},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p="",r(r.s=7)}([function(n,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNote=function(n){return/^[a-gA-G](?:#|b)?\d$/.test(n)},t.expandStr=function(n){return n=(n=(n=(n=JSON.stringify(n.split(""))).replace(/,"\[",/g,", [")).replace(/"\[",/g,"[")).replace(/,"\]"/g,"]"),JSON.parse(n)},t.shuffle=function(n){var t=n.length-1;return n.forEach((function(r,e){var i=Math.round(Math.random()*t);n[e]=n[i],n[i]=r})),n},t.sizzleMap=function(n){void 0===n&&(n=127);var t=Math.PI,r=[t/6,t/4,t/3,t/2,2*t/3,3*t/4,5*t/6,t],e=[0,t/6,t/4,t/3,t/2,2*t/3,3*t/4,5*t/6];return e.reverse(),r.concat(e).map((function(t){return Math.round(Math.sin(t)*n)}))},t.pickOne=function(n){return n.length>1?n[Math.round(Math.random())]:n[0]},t.dice=function(){return!!Math.round(Math.random())}},function(n,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=r(4),i=e.Chord.names(),o=r(0);t.getChord=function(n){if(o.isNote(n))throw new Error(n+" is not a chord!");var t=n.split("-"),r=e.Chord.tokenize(t[0]),i=r[0],u=r[1];"4"!==i[1]&&"5"!==i[1]||(u=i[1],i=i.replace(/\d/,""));var a={"4th":"4","5th":"5","7th":"7","9th":"9","11th":"11","13th":"13"};if(a[u]&&(u=a[u]),!e.Chord.exists(u))throw new TypeError("Invalid chord name: "+u);return(e.chord(u)||[]).map((function(n){var r=e.transpose.bind(null,i+(t[1]||4))(n);return e.Note.simplify(r)}))},t.chords=function(){var n={4:"4th",5:"5th",7:"7th",9:"9th",11:"11th",13:"13th"};return i.map((function(t){return/^\d+$/.test(t)&&n[t]?n[t]:t}))}},function(n,t,r){"use strict";var e=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var r in n)Object.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t.default=n,t};Object.defineProperty(t,"__esModule",{value:!0});var i=e(r(4));t.getScale=function(n){n=(n=(n=n&&n.toLowerCase()).replace("#5p","#5P")).replace("#7m","#7M");var t=i.Scale.tokenize(n)[1];if(!i.Scale.exists(t))throw new Error(n+" does not exist!");return i.Scale.notes(n).map(i.Note.simplify)},t.scales=function(){return i.Scale.names()}},function(n,t,r){"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(1),u="undefined"!=typeof window&&r(8),a={"1m":2048,"2m":4096,"3m":6144,"4m":8192,"1n":512,"2n":256,"4n":128,"8n":64,"16n":32};t.clip=function(n){if("string"==typeof(n=e(e({},{notes:["C4"],pattern:"x",shuffle:!1,sizzle:!1,sizzleReps:1,arpegiate:!1,subdiv:"4n",amp:100,accentLow:70,randomNotes:null}),n||{})).notes&&(n.notes=n.notes.replace(/\s{2,}/g," "),n.notes=n.notes.split(" ")),n.notes=n.notes.map((function(n){return i.isNote(n)?[n]:Array.isArray(n)?(n.forEach((function(n){if(!i.isNote(n))throw new TypeError("array must comprise valid notes")})),n):!Array.isArray(n)&&o.getChord(n)?n=o.getChord(n):void 0})),/[^x\-_\[\]R]/.test(n.pattern))throw new TypeError("pattern can only comprise x - _ [ ], found "+n.pattern);if(n.shuffle&&(n.notes=i.shuffle(n.notes)),n.randomNotes&&"string"==typeof n.randomNotes&&(n.randomNotes=n.randomNotes.replace(/\s{2,}/g," "),n.randomNotes=n.randomNotes.split(/\s/)),n.randomNotes&&(n.randomNotes=n.randomNotes.map((function(n){return[n]}))),n.synth||n.instrument||n.sample||n.buffer||n.player||n.samples||n.sampler)return u(n);var t=[],r=0,s=function(e,i){e.forEach((function(e){if("string"==typeof e){var o=null;"x"===e&&(o=n.notes[r],r++),"R"===e&&(Math.round(Math.random())||n.randomNotes)&&(o=n.randomNotes?n.randomNotes[Math.round(Math.random()*(n.randomNotes.length-1))]:n.notes[r],r++),"x"!==e&&"-"!==e&&"R"!==e||t.push({note:o,length:i,level:"R"!==e||n.randomNotes?n.amp:n.accentLow}),"_"===e&&t.length&&(t[t.length-1].length+=i),r===n.notes.length&&(r=0)}Array.isArray(e)&&s(e,i/e.length)}))};if(s(i.expandStr(n.pattern),a[n.subdiv]||a["4n"]),n.sizzle){var c=[],m=!0===n.sizzle?"sin":n.sizzle,l=t.length,f=n.amp,d=n.sizzleReps,p=f/(l/d);if("sin"===m||"cos"===m)for(var P=0;P<l;P++){var h=Math[m](P*Math.PI/(l/d))*f;c.push(Math.round(Math.abs(h)))}if("rampUp"===m)for(h=0,P=0;P<l;P++)P%(l/d)==0?h=0:h+=p,c.push(Math.round(Math.abs(h)));if("rampDown"===m)for(h=f,P=0;P<l;P++)P%(l/d)==0?h=f:h-=p,c.push(Math.round(Math.abs(h)));for(P=0;P<c.length;P++)t[P].level=c[P]?c[P]:1}if(n.accent){if(/[^x\-]/.test(n.accent))throw new TypeError("Accent can only have x and - characters");for(var M=0,v=0,y=t;v<y.length;v++){var b=y[v];h="x"===n.accent[M]?n.amp:n.accentLow;n.sizzle&&(h=(b.level+h)/2),b.level=Math.round(h),(M+=1)===n.accent.length&&(M=0)}}return t}},function(n,t,r){"use strict";r.r(t);var e={};r.r(e),r.d(e,"names",(function(){return f})),r.d(e,"tokenize",(function(){return h})),r.d(e,"props",(function(){return y})),r.d(e,"name",(function(){return b})),r.d(e,"pc",(function(){return g})),r.d(e,"midi",(function(){return A})),r.d(e,"midiToFreq",(function(){return _})),r.d(e,"freq",(function(){return O})),r.d(e,"freqToMidi",(function(){return w})),r.d(e,"chroma",(function(){return E})),r.d(e,"oct",(function(){return C})),r.d(e,"stepToLetter",(function(){return I})),r.d(e,"altToAcc",(function(){return x})),r.d(e,"from",(function(){return S})),r.d(e,"build",(function(){return k})),r.d(e,"fromMidi",(function(){return R})),r.d(e,"simplify",(function(){return D})),r.d(e,"enharmonic",(function(){return z}));var i={};r.r(i),r.d(i,"range",(function(){return q})),r.d(i,"rotate",(function(){return F})),r.d(i,"compact",(function(){return B})),r.d(i,"sort",(function(){return V})),r.d(i,"unique",(function(){return L})),r.d(i,"shuffle",(function(){return U})),r.d(i,"permutations",(function(){return G}));var o={};r.r(o),r.d(o,"names",(function(){return Q})),r.d(o,"tokenize",(function(){return W})),r.d(o,"qToAlt",(function(){return nn})),r.d(o,"altToQ",(function(){return tn})),r.d(o,"props",(function(){return un})),r.d(o,"num",(function(){return an})),r.d(o,"name",(function(){return sn})),r.d(o,"semitones",(function(){return cn})),r.d(o,"chroma",(function(){return mn})),r.d(o,"ic",(function(){return ln})),r.d(o,"build",(function(){return fn})),r.d(o,"simplify",(function(){return dn})),r.d(o,"invert",(function(){return pn})),r.d(o,"fromSemitones",(function(){return Mn}));var u={};r.r(u),r.d(u,"transpose",(function(){return Tn})),r.d(u,"trFifths",(function(){return jn})),r.d(u,"fifths",(function(){return wn})),r.d(u,"transposeBy",(function(){return En})),r.d(u,"addIntervals",(function(){return In})),r.d(u,"add",(function(){return Nn})),r.d(u,"subtract",(function(){return xn})),r.d(u,"interval",(function(){return Sn})),r.d(u,"semitones",(function(){return kn}));var a={};r.r(a),r.d(a,"chroma",(function(){return Bn})),r.d(a,"chromas",(function(){return Vn})),r.d(a,"modes",(function(){return Ln})),r.d(a,"isChroma",(function(){return Gn})),r.d(a,"intervals",(function(){return $n})),r.d(a,"isEqual",(function(){return Kn})),r.d(a,"isSubsetOf",(function(){return Jn})),r.d(a,"isSupersetOf",(function(){return Qn})),r.d(a,"includes",(function(){return Wn})),r.d(a,"filter",(function(){return Xn}));var s={};r.r(s),r.d(s,"dictionary",(function(){return Zn})),r.d(s,"combine",(function(){return nt})),r.d(s,"scale",(function(){return tt})),r.d(s,"chord",(function(){return rt})),r.d(s,"pcset",(function(){return et}));var c={};r.r(c),r.d(c,"props",(function(){return ot})),r.d(c,"names",(function(){return ut})),r.d(c,"intervals",(function(){return at})),r.d(c,"notes",(function(){return st})),r.d(c,"exists",(function(){return ct})),r.d(c,"tokenize",(function(){return mt})),r.d(c,"modeNames",(function(){return lt})),r.d(c,"chords",(function(){return ft})),r.d(c,"toScale",(function(){return dt})),r.d(c,"supersets",(function(){return pt})),r.d(c,"subsets",(function(){return Pt}));var m={};r.r(m),r.d(m,"names",(function(){return ht})),r.d(m,"props",(function(){return vt})),r.d(m,"intervals",(function(){return yt})),r.d(m,"notes",(function(){return bt})),r.d(m,"exists",(function(){return gt})),r.d(m,"supersets",(function(){return At})),r.d(m,"subsets",(function(){return _t})),r.d(m,"tokenize",(function(){return Tt}));var l="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" "),f=function(n){return"string"!=typeof n?l.slice():l.filter((function(t){var r=t[1]||" ";return-1!==n.indexOf(r)}))},d=f(" #"),p=f(" b"),P=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function h(n){"string"!=typeof n&&(n="");var t=P.exec(n);return[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]}var M=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),v=[0,2,4,5,7,9,11],y=function(n,t){return void 0===t&&(t={}),function(r){return t[r]||(t[r]=n(r))}}((function(n){var t=h(n);if(""===t[0]||""!==t[3])return M;var r=t[0],e=t[1],i=t[2],o={letter:r,acc:e,octStr:i,pc:r+e,name:r+e+i,step:(r.charCodeAt(0)+3)%7,alt:"b"===e[0]?-e.length:e.length,oct:i.length?+i:null,chroma:0,midi:null,freq:null};return o.chroma=(v[o.step]+o.alt+120)%12,o.midi=null!==o.oct?v[o.step]+o.alt+12*(o.oct+1):null,o.freq=_(o.midi),Object.freeze(o)})),b=function(n){return y(n).name},g=function(n){return y(n).pc},A=function(n){if("number"!=typeof n&&"string"!=typeof n)return null;var t,r=y(n).midi,e=r||0===r?r:+n;return(t=e)>=0&&t<=127?e:null},_=function(n,t){return void 0===t&&(t=440),"number"==typeof n?Math.pow(2,(n-69)/12)*t:null},O=function(n){return y(n).freq||_(n)},T=Math.log(2),j=Math.log(440),w=function(n){var t=12*(Math.log(n)-j)/T+69;return Math.round(100*t)/100},E=function(n){return y(n).chroma},C=function(n){return y(n).oct},I=function(n){return"CDEFGAB"[n]},N=function(n,t){return Array(t+1).join(n)},x=function(n){return function(n,t){return"number"!=typeof n?"":t(n)}(n,(function(n){return n<0?N("b",-n):N("#",n)}))},S=function(n,t){void 0===n&&(n={}),void 0===t&&(t=null);var r=t?Object.assign({},y(t),n):n,e=r.step,i=r.alt,o=r.oct;if("number"!=typeof e)return null;var u=I(e);if(!u)return null;var a=u+x(i);return o||0===o?a+o:a},k=S;function R(n,t){return void 0===t&&(t=!1),n=Math.round(n),(!0===t?d:p)[n%12]+(Math.floor(n/12)-1)}var D=function(n,t){void 0===t&&(t=!0);var r=y(n),e=r.alt,i=r.chroma,o=r.midi;if(null===i)return null;var u=!1===t?e<0:e>0;return null===o?g(R(i,u)):R(o,u)},z=function(n){return D(n,!1)};function q(n,t){return null===n||null===t?[]:n<t?function(n,t){for(var r=[];t--;r[t]=t+n);return r}(n,t-n+1):function(n,t){for(var r=[];t--;r[t]=n-t);return r}(n,n-t+1)}function F(n,t){var r=t.length,e=(n%r+r)%r;return t.slice(e,r).concat(t.slice(0,e))}var B=function(n){return n.filter((function(n){return 0===n||n}))},H=function(n){var t=y(n).midi;return null!==t?t:y(n+"-100").midi};function V(n){return B(n.map(b)).sort((function(n,t){return H(n)>H(t)}))}function L(n){return V(n).filter((function(n,t,r){return 0===t||n!==r[t-1]}))}var U=function(n,t){var r,e;void 0===t&&(t=Math.random);for(var i=n.length;i;)r=t()*i--|0,e=n[i],n[i]=n[r],n[r]=e;return n},G=function(n){return 0===n.length?[[]]:G(n.slice(1)).reduce((function(t,r){return t.concat(n.map((function(t,e){var i=r.slice();return i.splice(e,0,n[0]),i})))}),[])},Y=new RegExp("^([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})|(AA|A|P|M|m|d|dd)([-+]?\\d+)$"),$=[0,2,4,5,7,9,11],K=[0,1,2,3,4,5,6,5,4,3,2,1],J="1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P".split(" "),Q=function(n){return"string"!=typeof n?J.slice():J.filter((function(t){return-1!==n.indexOf(t[1])}))},W=function(n){var t=Y.exec(""+n);return null===t?null:t[1]?[t[1],t[2]]:[t[4],t[3]]},X=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null,oct:null}),Z=function(n,t){return Array(Math.abs(t)+1).join(n)},nn=function(n,t){return"M"===t&&"M"===n?0:"P"===t&&"P"===n?0:"m"===t&&"M"===n?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?"P"===n?-t.length:-t.length-1:null},tn=function(n,t){return 0===t?"M"===n?"M":"P":-1===t&&"M"===n?"m":t>0?Z("A",t):t<0?Z("d","P"===n?t:t+1):null},rn=function(n){return(Math.abs(n)-1)%7},en=function(n){var t=W(n);if(null===t)return X;var r={num:0,q:"d",name:"",type:"M",step:0,dir:-1,simple:1,alt:0,oct:0,semitones:0,chroma:0,ic:0};return r.num=+t[0],r.q=t[1],r.step=rn(r.num),r.type="PMMPPMM"[r.step],"M"===r.type&&"P"===r.q?X:(r.name=""+r.num+r.q,r.dir=r.num<0?-1:1,r.simple=8===r.num||-8===r.num?r.num:r.dir*(r.step+1),r.alt=nn(r.type,r.q),r.oct=Math.floor((Math.abs(r.num)-1)/7),r.semitones=r.dir*($[r.step]+r.alt+12*r.oct),r.chroma=(r.dir*($[r.step]+r.alt)%12+12)%12,Object.freeze(r))},on={};function un(n){return"string"!=typeof n?X:on[n]||(on[n]=en(n))}var an=function(n){return un(n).num},sn=function(n){return un(n).name},cn=function(n){return un(n).semitones},mn=function(n){return un(n).chroma},ln=function(n){return"string"==typeof n&&(n=un(n).chroma),"number"==typeof n?K[n%12]:null},fn=function(n){var t=void 0===n?{}:n,r=t.num,e=t.step,i=t.alt,o=t.oct,u=void 0===o?1:o,a=t.dir;if(void 0!==e&&(r=e+1+7*u),void 0===r)return null;if("number"!=typeof i)return null;var s="number"!=typeof a?"":a<0?"-":"",c="PMMPPMM"[rn(r)];return s+r+tn(c,i)},dn=function(n){var t=un(n);if(t===X)return null;var r=t;return r.simple+r.q},pn=function(n){var t=un(n);if(t===X)return null;var r=t,e=(7-r.step)%7,i="P"===r.type?-r.alt:-(r.alt+1);return fn({step:e,alt:i,oct:r.oct,dir:r.dir})},Pn=[1,2,2,3,3,4,5,5,6,6,7,7],hn="P m M m M P d P m M m M".split(" "),Mn=function(n){var t=n<0?-1:1,r=Math.abs(n),e=r%12,i=Math.floor(r/12);return t*(Pn[e]+7*i)+hn[e]},vn=[0,2,4,-1,1,3,5],yn=vn.map((function(n){return Math.floor(7*n/12)})),bn=[3,0,4,1,5,2,6];var gn=function(n,t,r){var e=bn[function(n){var t=(n+1)%7;return t<0?7+t:t}(n)],i=Math.floor((n+1)/7);return void 0===t?{step:e,alt:i,dir:r}:{step:e,alt:i,oct:t+4*i+yn[e],dir:r}},An=function(n){return function(n,t){return void 0===t&&(t={}),function(r){return t[r]||(t[r]=n(r))}}((function(t){var r=n(t);return null===r.name?null:function(n){var t=n.step,r=n.alt,e=n.oct,i=n.dir;void 0===i&&(i=1);var o=vn[t]+7*r;return null===e?[i*o]:[i*o,i*(e-yn[t]-4*r)]}(r)}))},_n=An(y),On=An(un);function Tn(n,t){if(1===arguments.length)return function(t){return Tn(n,t)};var r=_n(n),e=On(t);if(null===r||null===e)return null;var i=1===r.length?[r[0]+e[0]]:[r[0]+e[0],r[1]+e[1]];return k(gn(i[0],i[1]))}function jn(n,t){if(1===arguments.length)return function(t){return jn(n,t)};var r=_n(n);return null===r?null:k(gn(r[0]+t))}function wn(n,t){if(1===arguments.length)return function(t){return wn(n,t)};var r=_n(n),e=_n(t);return null===e||null===r?null:e[0]-r[0]}function En(n,t){return 1===arguments.length?function(t){return Tn(t,n)}:Tn(t,n)}var Cn=function(n){return 7*(t=n)[0]+12*t[1]<0?gn(-n[0],-n[1],-1):gn(n[0],n[1],1);var t};function In(n,t,r){var e=On(n),i=On(t);if(null===e||null===i)return null;var o=[e[0]+r*i[0],e[1]+r*i[1]];return fn(Cn(o))}function Nn(n,t){return 1===arguments.length?function(t){return Nn(n,t)}:In(n,t,1)}function xn(n,t){return 1===arguments.length?function(t){return Nn(n,t)}:In(n,t,-1)}function Sn(n,t){if(1===arguments.length)return function(t){return Sn(n,t)};var r=_n(n),e=_n(t);if(null===r||null===e||r.length!==e.length)return null;var i=1===r.length?[e[0]-r[0],-Math.floor(7*(e[0]-r[0])/12)]:[e[0]-r[0],e[1]-r[1]];return fn(Cn(i))}function kn(n,t){if(1===arguments.length)return function(t){return kn(n,t)};var r=y(n),e=y(t);return null!==r.midi&&null!==e.midi?e.midi-r.midi:null!==r.chroma&&null!==e.chroma?(e.chroma-r.chroma+12)%12:null}var Rn=r(5),Dn=r(6),zn=function(n){return E(n)||mn(n)||0},qn=function(n){return parseInt(Bn(n),2)},Fn=function(n){return n.replace(/0/g,"").length};function Bn(n){if(Gn(n))return n;if(!Array.isArray(n))return"";var t=[0,0,0,0,0,0,0,0,0,0,0,0];return n.map(zn).forEach((function(n){t[n]=1})),t.join("")}var Hn=null;function Vn(n){return Hn=Hn||q(2048,4095).map((function(n){return n.toString(2)})),"number"==typeof n?Hn.filter((function(t){return Fn(t)===n})):Hn.slice()}function Ln(n,t){t=!1!==t;var r=Bn(n).split("");return B(r.map((function(n,e){var i=F(e,r);return t&&"0"===i[0]?null:i.join("")})))}var Un=/^[01]{12}$/;function Gn(n){return Un.test(n)}var Yn="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" ");function $n(n){return Gn(n)?B(n.split("").map((function(n,t){return"1"===n?Yn[t]:null}))):[]}function Kn(n,t){return 1===arguments.length?function(t){return Kn(n,t)}:Bn(n)===Bn(t)}function Jn(n,t){return arguments.length>1?Jn(n)(t):(n=qn(n),function(t){return(t=qn(t))!==n&&(t&n)===t})}function Qn(n,t){return arguments.length>1?Qn(n)(t):(n=qn(n),function(t){return(t=qn(t))!==n&&(t|n)===t})}function Wn(n,t){return arguments.length>1?Wn(n)(t):(n=Bn(n),function(t){return"1"===n[zn(t)]})}function Xn(n,t){return 1===arguments.length?function(t){return Xn(n,t)}:t.filter(Wn(n))}var Zn=function(n){var t=Object.keys(n).sort(),r=[],e=[],i=function(n,t,i){r[n]=t,e[i]=e[i]||[],e[i].push(n)};t.forEach((function(t){var r=n[t][0].split(" "),e=n[t][1],o=Bn(r);i(t,r,o),e&&e.forEach((function(n){return i(n,r,o)}))}));var o=Object.keys(r).sort(),u=function(n){return r[n]};return u.names=function(n){return"string"==typeof n?(e[n]||[]).slice():(!0===n?o:t).slice()},u},nt=function(n,t){var r=function(r){return n(r)||t(r)};return r.names=function(r){return n.names(r).concat(t.names(r))},r},tt=Zn(Rn),rt=Zn(Dn),et=nt(tt,rt),it=Object.freeze({name:null,intervals:[],names:[],chroma:null,setnum:null}),ot=function(n,t){return function(r){return t[r]||(t[r]=n(r))}}((function(n){var t=tt(n);if(!t)return it;var r={intervals:t,name:n};return r.chroma=Bn(t),r.setnum=parseInt(r.chroma,2),r.names=tt.names(r.chroma),Object.freeze(r)}),{}),ut=tt.names,at=function(n){var t=mt(n);return ot(t[1]).intervals};function st(n,t){var r=mt(n);return t=t||r[1],at(t).map(Tn(r[0]))}function ct(n){var t=mt(n);return void 0!==tt(t[1])}function mt(n){if("string"!=typeof n)return["",""];var t=n.indexOf(" "),r=b(n.substring(0,t))||b(n)||"",e=""!==r?n.substring(r.length+1):n;return[r,e.length?e:""]}var lt=function(n){var t=at(n),r=st(n);return Ln(t).map((function(n,e){var i=tt.names(n)[0];if(i)return[r[e]||t[e],i]})).filter((function(n){return n}))},ft=function(n){var t=Jn(at(n));return rt.names().filter((function(n){return t(rt(n))}))},dt=function(n){var t=B(n.map(g));if(!t.length)return t;var r=t[0],e=L(t);return F(e.indexOf(r),e)},pt=function(n){if(!at(n).length)return[];var t=Qn(at(n));return tt.names().filter((function(n){return t(tt(n))}))},Pt=function(n){var t=Jn(at(n));return tt.names().filter((function(n){return t(tt(n))}))},ht=rt.names,Mt=Object.freeze({name:null,names:[],intervals:[],chroma:null,setnum:null}),vt=function(n,t){return void 0===t&&(t={}),function(r){return t[r]||(t[r]=n(r))}}((function(n){var t=rt(n);if(!t)return Mt;var r={intervals:t,name:n};return r.chroma=Bn(t),r.setnum=parseInt(r.chroma,2),r.names=rt.names(r.chroma),r})),yt=function(n){return vt(Tt(n)[1]).intervals};function bt(n,t){if(t)return vt(t).intervals.map(Tn(n));var r=Tt(n),e=r[0],i=r[1];return vt(i).intervals.map(Tn(e))}var gt=function(n){return void 0!==rt(Tt(n)[1])},At=function(n){if(!yt(n).length)return[];var t=Qn(yt(n));return rt.names().filter((function(n){return t(rt(n))}))},_t=function(n){var t=Jn(yt(n));return rt.names().filter((function(n){return t(rt(n))}))},Ot=/^(6|64|7|9|11|13)$/;function Tt(n){var t=h(n);return""===t[0]?["",n]:"A"===t[0]&&"ug"===t[3]?["","aug"]:Ot.test(t[2])?[t[0]+t[1],t[2]+t[3]]:[t[0]+t[1]+t[2],t[3]]}r.d(t,"transpose",(function(){return jt})),r.d(t,"interval",(function(){return wt})),r.d(t,"note",(function(){return Et})),r.d(t,"midi",(function(){return Ct})),r.d(t,"freq",(function(){return It})),r.d(t,"chord",(function(){return Nt})),r.d(t,"scale",(function(){return xt})),r.d(t,"Array",(function(){return i})),r.d(t,"Note",(function(){return e})),r.d(t,"Interval",(function(){return o})),r.d(t,"Distance",(function(){return u})),r.d(t,"Scale",(function(){return c})),r.d(t,"Chord",(function(){return m})),r.d(t,"PcSet",(function(){return a})),r.d(t,"Dictionary",(function(){return s}));const jt=Tn,wt=Sn,Et=y,Ct=A,It=O,Nt=rt,xt=tt},function(n){n.exports=JSON.parse('{"chromatic":["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],"lydian":["1P 2M 3M 4A 5P 6M 7M"],"major":["1P 2M 3M 4P 5P 6M 7M",["ionian"]],"mixolydian":["1P 2M 3M 4P 5P 6M 7m",["dominant"]],"dorian":["1P 2M 3m 4P 5P 6M 7m"],"aeolian":["1P 2M 3m 4P 5P 6m 7m",["minor"]],"phrygian":["1P 2m 3m 4P 5P 6m 7m"],"locrian":["1P 2m 3m 4P 5d 6m 7m"],"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m",["half-diminished"]],"altered":["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"phrygian dominant":["1P 2m 3M 4P 5P 6m 7m",["spanish","phrygian major"]],"half-whole diminished":["1P 2m 3m 3M 4A 5P 6M 7m",["dominant diminished"]],"diminished":["1P 2M 3m 4P 5d 6m 6M 7M",["whole-half diminished"]],"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],"iwato":["1P 2m 4P 5d 7m"],"hirajoshi":["1P 2M 3m 5P 6m"],"kumoijoshi":["1P 2m 4P 5P 6m"],"pelog":["1P 2m 3m 5P 6m"],"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],"prometheus":["1P 2M 3M 4A 6M 7m"],"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],"ritusen":["1P 2M 4P 5P 6M"],"scriabin":["1P 2m 3M 5P 6M"],"piongio":["1P 2M 4P 5P 6M 7m"],"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],"augmented":["1P 2A 3M 5P 5A 7M"],"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],"neopolitan":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],"egyptian":["1P 2M 4P 5P 7m"],"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],"oriental":["1P 2m 3M 4P 5d 6M 7m"],"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],"flamenco":["1P 2m 3m 3M 4A 5P 7m"],"balinese":["1P 2m 3m 4P 5P 6m 7M"],"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],"persian":["1P 2m 3M 4P 5d 6m 7M"],"bebop":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],"enigmatic":["1P 2m 3M 5d 6m 7m 7M"],"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],"ichikosucho":["1P 2M 3M 4P 5d 5P 6M 7M"],"six tone symmetric":["1P 2m 3M 4P 5A 6M"]}')},function(n){n.exports=JSON.parse('{"4":["1P 4P 7m 10m",["quartal"]],"5":["1P 5P"],"7":["1P 3M 5P 7m",["Dominant","Dom"]],"9":["1P 3M 5P 7m 9M",["79"]],"11":["1P 5P 7m 9M 11P"],"13":["1P 3M 5P 7m 9M 13M",["13_"]],"64":["5P 8P 10M"],"M":["1P 3M 5P",["Major",""]],"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],"M13":["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],"M6":["1P 3M 5P 13M",["6"]],"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],"M69":["1P 3M 5P 6M 9M",["69"]],"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],"M7add13":["1P 3M 5P 6M 7M 9M"],"M7b5":["1P 3M 5d 7M"],"M7b6":["1P 3M 6m 7M"],"M7b9":["1P 3M 5P 7M 9m"],"M7sus4":["1P 4P 5P 7M"],"M9":["1P 3M 5P 7M 9M",["maj9","Maj9"]],"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],"M9b5":["1P 3M 5d 7M 9M"],"M9sus4":["1P 4P 5P 7M 9M"],"Madd9":["1P 3M 5P 9M",["2","add9","add2"]],"Maj7":["1P 3M 5P 7M",["maj7","M7"]],"Mb5":["1P 3M 5d"],"Mb6":["1P 3M 13m"],"Msus2":["1P 2M 5P",["add9no3","sus2"]],"Msus4":["1P 4P 5P",["sus","sus4"]],"Maddb9":["1P 3M 5P 9m"],"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],"m":["1P 3m 5P"],"m#5":["1P 3m 5A",["m+","mb6"]],"m11":["1P 3m 5P 7m 9M 11P",["_11"]],"m11A 5":["1P 3m 6m 7m 9M 11P"],"m11b5":["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],"m13":["1P 3m 5P 7m 9M 11P 13M",["_13"]],"m6":["1P 3m 4P 5P 13M",["_6"]],"m69":["1P 3m 5P 6M 9M",["_69"]],"m7":["1P 3m 5P 7m",["minor7","_","_7"]],"m7#5":["1P 3m 6m 7m"],"m7add11":["1P 3m 5P 7m 11P",["m7add4"]],"m7b5":["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],"m9":["1P 3m 5P 7m 9M",["_9"]],"m9#5":["1P 3m 6m 7m 9M"],"m9b5":["1P 3m 7m 12d 2M",["h9","-9b5"]],"mMaj7":["1P 3m 5P 7M",["mM7","_M7"]],"mMaj7b6":["1P 3m 5P 6m 7M",["mM7b6"]],"mM9":["1P 3m 5P 7M 9M",["mMaj9","-M9"]],"mM9b6":["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],"mb6M7":["1P 3m 6m 7M"],"mb6b9":["1P 3m 6m 9m"],"o":["1P 3m 5d",["mb5","dim"]],"o7":["1P 3m 5d 13M",["diminished","m6b5","dim7"]],"o7M7":["1P 3m 5d 6M 7M"],"oM7":["1P 3m 5d 7M"],"sus24":["1P 2M 4P 5P",["sus4add9"]],"+add#9":["1P 3M 5A 9A"],"madd4":["1P 3m 4P 5P"],"madd9":["1P 3m 5P 9M"]}')},function(n,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=r(2);t.scale=e.getScale,t.mode=e.getScale,t.scales=e.scales,t.modes=e.scales;var i=r(1);t.chord=i.getChord,t.chords=i.chords;var o=r(3);t.clip=o.clip;var u=r(9);t.getChordDegrees=u.getChordDegrees,t.getChordsByProgression=u.getChordsByProgression,t.progression=u.progression;var a=r(10);t.arp=a.arp;var s=r(11);t.midi=s.midi;var c=r(15);t.Session=c.Session},function(n,t,r){"use strict";var e=this&&this.__spreadArrays||function(){for(var n=0,t=0,r=arguments.length;t<r;t++)n+=arguments[t].length;var e=Array(n),i=0;for(t=0;t<r;t++)for(var o=arguments[t],u=0,a=o.length;u<a;u++,i++)e[i]=o[u];return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(n){return void 0===n&&(n=1),Math.round(Math.random()*n)};n.exports=function(n){var t,r,u;if(!n.pattern)throw new Error("No pattern provided!");if(!(n.player||n.instrument||n.sample||n.buffer||n.synth||n.sampler||n.samples))throw new Error("No player or instrument provided!");var a,s=[];return n.effects&&(s=n.effects.map((function(n){return new Tone[n]}))),(n.sample||n.buffer)&&(n.player=new Tone.Player(n.sample||n.buffer)),n.samples&&(n.sampler=new Tone.Sampler(n.samples)),n.synth&&(n.instrument=new Tone[n.synth]),n.player?(n.volume&&(n.player.volume.value=n.volume),(t=n.player).chain.apply(t,e(s,[Tone.Master])),new Tone.Sequence((a=n.player,function(n,t){("x"===t||"R"===t&&o())&&a.start(n)}),i.expandStr(n.pattern),n.subdiv||"4n")):n.sampler?(n.volume&&(n.sampler.volume.value=n.volume),(r=n.sampler).chain.apply(r,e(s,[Tone.Master])),new Tone.Sequence(function(n){var t=0;return function(r,e){("x"===e&&n.notes[t]||"R"===e&&!n.randomNotes&&o()||"R"===e&&n.randomNotes)&&(n.sampler.triggerAttackRelease("R"===e&&n.randomNotes?n.randomNotes[o(n.randomNotes.length-1)]:n.notes[t],n.dur||n.subdiv||"8n",r),++t===n.notes.length&&(t=0))}}(n),i.expandStr(n.pattern),n.subdiv||"4n")):n.instrument?(n.volume&&(n.instrument.volume.value=n.volume),(u=n.instrument).chain.apply(u,e(s,[Tone.Master])),new Tone.Sequence(n.instrument.voices?function(n){var t=0;return function(r,e){("x"===e&&n.notes[t]||"R"===e&&!n.randomNotes&&o()||"R"===e&&n.randomNotes)&&(n.instrument.triggerAttackRelease("R"===e&&n.randomNotes?n.randomNotes[o(n.randomNotes.length-1)]:n.notes[t],n.dur||n.subdiv||"8n",r),++t===n.notes.length&&(t=0))}}(n):function(n){var t=0;return function(r,e){("x"===e&&n.notes[t]||"R"===e&&!n.randomNotes&&o()||"R"===e&&n.randomNotes)&&(n.instrument.triggerAttackRelease("R"===e&&n.randomNotes?n.randomNotes[o(n.randomNotes.length-1)]:n.notes[t][0],n.dur||n.subdiv||"8n",r),++t===n.notes.length&&(t=0))}}(n),i.expandStr(n.pattern),n.subdiv||"4n")):void 0}},function(n,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=r(2),i=r(0);t.getChordDegrees=function(n){var t={ionian:["I","ii","iii","IV","V","vi","vii°"],dorian:["i","ii","III","IV","v","vi°","VII"],phrygian:["i","II","III","iv","v°","VI","vii"],lydian:["I","II","iii","iv°","V","vi","vii"],mixolydian:["I","ii","iii°","IV","v","vi","VII"],aeolian:["i","ii°","III","iv","v","VI","VII"],locrian:["i°","II","iii","iv","V","VI","vii"],"melodic minor":["i","ii","III+","IV","V","vi°","vii°"],"harmonic minor":["i","ii°","III+","iv","V","VI","vii°"]};return t.major=t.ionian,t.minor=t.aeolian,t[n]||[]};var o={i:0,ii:1,iii:2,iv:3,v:4,vi:5,vii:6};t.getChordsByProgression=function(n,t){var r=n.split(" ");r[0].match(/\d/)||(r[0]+="4",n=r.join(" "));var i=e.getScale(n);return t.replace(/\s*,+\s*/g," ").split(" ").map((function(n,t){var r=function(n){var t=n.replace(/\W/g,""),r="M";return t.toLowerCase()===t&&(r="m"),n.includes("°")?r+"7b5":n.includes("+")?r+"#5":n.includes("7")?"M"===r?"Maj7":"m7":r}(n),e=o[n.replace(/\W|\d/g,"").toLowerCase()],u=i[e],a=u.replace(/\D+/,"");return u.replace(/\d/,"")+r+"-"+a})).toString().replace(/,/g," ")};var u=function(n){var t=n.T,r=n.P,e=n.D;return function(n){void 0===n&&(n=4);var o=[];o.push(i.pickOne(t));var u=1;for(u<n-1&&(o.push(i.pickOne(r)),u++),u<n-1&&i.dice()&&(o.push(i.pickOne(r)),u++),u<n-1&&(o.push(i.pickOne(e)),u++),u<n-1&&(o.push(i.pickOne(r)),u++),u<n-1&&(o.push(i.pickOne(e)),u++),u<n-1&&i.dice()&&(o.push(i.pickOne(r)),u++);u<n;)o.push(i.pickOne(e)),u++;return o}},a=u({T:["I","vi"],P:["ii","IV"],D:["V"]}),s=u({T:["i","VI"],P:["ii","iv"],D:["V"]});t.progression=function(n,t){return void 0===t&&(t=4),"major"===n||"M"===n?a(t):"minor"===n||"m"===n?s(t):void 0}},function(n,t,r){"use strict";var e=this&&this.__spreadArrays||function(){for(var n=0,t=0,r=arguments.length;t<r;t++)n+=arguments[t].length;var e=Array(n),i=0;for(t=0;t<r;t++)for(var o=arguments[t],u=0,a=o.length;u<a;u++,i++)e[i]=o[u];return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1);t.arp=function(n){var t=[],r={count:4,order:"0123",chords:""};if("string"==typeof n)r.chords=n;else{if(n.order&&n.order.match(/\D/g))throw new TypeError("Invalid value for order");if(n.count>8||n.count<2)throw new TypeError("Invalid value for count");n.count&&!n.order&&(r.order=Array.from(Array(n.count).keys()).join("")),Object.assign(r,n)}for(var o=function(n){var o,u,a,s,c,m=(o=i.getChord(n),u=r.count,a=function(n){return n.replace(/\d/,"")+(+n.replace(/\D/g,"")+1)},s=o.map(a),c=s.map(a),e(o,s,c).slice(0,u)),l=r.order.split("").map((function(n){return m[n]}));t=e(t,l)},u=0,a=r.chords.split(" ");u<a.length;u++){o(a[u])}return t}},function(n,t,r){"use strict";var e=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},i=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var r in n)Object.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t.default=n,t};Object.defineProperty(t,"__esModule",{value:!0});var o=e(r(12)),u=i(r(13));t.midi=function(n,t){void 0===t&&(t="music.mid");var r=function(n){var t=new u.File,r=new u.Track;t.addTrack(r);for(var e=0,i=n;e<i.length;e++){var o=i[e],a=o.level||127;o.note?"string"==typeof o.note?(r.noteOn(0,o.note,o.length,a),r.noteOff(0,o.note,o.length,a)):r.addChord(0,o.note,o.length,a):r.noteOff(0,"",o.length)}return t}(n).toBytes();if(null===t)return r;t.endsWith(".mid")||(t+=".mid"),o.default.writeFileSync(t,r,"binary"),console.log("MIDI file generated: "+t+".")}},function(t,r){t.exports=n},function(n,t,r){(function(n){var r={};!function(n){var t=n.DEFAULT_VOLUME=90,r=(n.DEFAULT_DURATION=128,n.DEFAULT_CHANNEL=0,{midi_letter_pitches:{a:21,b:23,c:12,d:14,e:16,f:17,g:19},midiPitchFromNote:function(n){var t=/([a-g])(#+|b+)?([0-9]+)$/i.exec(n),e=t[1].toLowerCase(),i=t[2]||"";return 12*parseInt(t[3],10)+r.midi_letter_pitches[e]+("#"==i.substr(0,1)?1:-1)*i.length},ensureMidiPitch:function(n){return"number"!=typeof n&&/[^0-9]/.test(n)?r.midiPitchFromNote(n):parseInt(n,10)},midi_pitches_letter:{12:"c",13:"c#",14:"d",15:"d#",16:"e",17:"f",18:"f#",19:"g",20:"g#",21:"a",22:"a#",23:"b"},midi_flattened_notes:{"a#":"bb","c#":"db","d#":"eb","f#":"gb","g#":"ab"},noteFromMidiPitch:function(n,t){var e,i=0,o=n;t=t||!1;return n>23&&(o=n-12*(i=Math.floor(n/12)-1)),e=r.midi_pitches_letter[o],t&&e.indexOf("#")>0&&(e=r.midi_flattened_notes[e]),e+i},mpqnFromBpm:function(n){var t=Math.floor(6e7/n),r=[];do{r.unshift(255&t),t>>=8}while(t);for(;r.length<3;)r.push(0);return r},bpmFromMpqn:function(n){if(void 0!==n[0]){0;for(var t=0,r=n.length-1;r>=0;++t,--r)n[t]<<r}return Math.floor(6e7/n)},codes2Str:function(n){return String.fromCharCode.apply(null,n)},str2Bytes:function(n,t){if(t)for(;n.length/2<t;)n="0"+n;for(var r=[],e=n.length-1;e>=0;e-=2){var i=0===e?n[e]:n[e-1]+n[e];r.unshift(parseInt(i,16))}return r},translateTickTime:function(n){for(var t=127&n;n>>=7;)t<<=8,t|=127&n|128;for(var r=[];r.push(255&t),128&t;)t>>=8;return r}}),e=function(n){if(!this)return new e(n);!n||null===n.type&&void 0===n.type||null===n.channel&&void 0===n.channel||null===n.param1&&void 0===n.param1||(this.setTime(n.time),this.setType(n.type),this.setChannel(n.channel),this.setParam1(n.param1),this.setParam2(n.param2))};e.NOTE_OFF=128,e.NOTE_ON=144,e.AFTER_TOUCH=160,e.CONTROLLER=176,e.PROGRAM_CHANGE=192,e.CHANNEL_AFTERTOUCH=208,e.PITCH_BEND=224,e.prototype.setTime=function(n){this.time=r.translateTickTime(n||0)},e.prototype.setType=function(n){if(n<e.NOTE_OFF||n>e.PITCH_BEND)throw new Error("Trying to set an unknown event: "+n);this.type=n},e.prototype.setChannel=function(n){if(n<0||n>15)throw new Error("Channel is out of bounds.");this.channel=n},e.prototype.setParam1=function(n){this.param1=n},e.prototype.setParam2=function(n){this.param2=n},e.prototype.toBytes=function(){var n=[],t=this.type|15&this.channel;return n.push.apply(n,this.time),n.push(t),n.push(this.param1),void 0!==this.param2&&null!==this.param2&&n.push(this.param2),n};var i=function(n){if(!this)return new i(n);this.setTime(n.time),this.setType(n.type),this.setData(n.data)};i.SEQUENCE=0,i.TEXT=1,i.COPYRIGHT=2,i.TRACK_NAME=3,i.INSTRUMENT=4,i.LYRIC=5,i.MARKER=6,i.CUE_POINT=7,i.CHANNEL_PREFIX=32,i.END_OF_TRACK=47,i.TEMPO=81,i.SMPTE=84,i.TIME_SIG=88,i.KEY_SIG=89,i.SEQ_EVENT=127,i.prototype.setTime=function(n){this.time=r.translateTickTime(n||0)},i.prototype.setType=function(n){this.type=n},i.prototype.setData=function(n){this.data=n},i.prototype.toBytes=function(){if(!this.type)throw new Error("Type for meta-event not specified.");var n=[];if(n.push.apply(n,this.time),n.push(255,this.type),Array.isArray(this.data))n.push(this.data.length),n.push.apply(n,this.data);else if("number"==typeof this.data)n.push(1,this.data);else if(null!==this.data&&void 0!==this.data){n.push(this.data.length);var t=this.data.split("").map((function(n){return n.charCodeAt(0)}));n.push.apply(n,t)}else n.push(0);return n};var o=function(n){if(!this)return new o(n);var t=n||{};this.events=t.events||[]};o.START_BYTES=[77,84,114,107],o.END_BYTES=[0,255,47,0],o.prototype.addEvent=function(n){return this.events.push(n),this},o.prototype.addNoteOn=o.prototype.noteOn=function(n,i,o,u){return this.events.push(new e({type:e.NOTE_ON,channel:n,param1:r.ensureMidiPitch(i),param2:u||t,time:o||0})),this},o.prototype.addNoteOff=o.prototype.noteOff=function(n,i,o,u){return this.events.push(new e({type:e.NOTE_OFF,channel:n,param1:r.ensureMidiPitch(i),param2:u||t,time:o||0})),this},o.prototype.addNote=o.prototype.note=function(n,t,r,e,i){return this.noteOn(n,t,e,i),r&&this.noteOff(n,t,r,i),this},o.prototype.addChord=o.prototype.chord=function(n,t,r,e){if(!Array.isArray(t)&&!t.length)throw new Error("Chord must be an array of pitches");return t.forEach((function(t){this.noteOn(n,t,0,e)}),this),t.forEach((function(t,e){0===e?this.noteOff(n,t,r):this.noteOff(n,t)}),this),this},o.prototype.setInstrument=o.prototype.instrument=function(n,t,r){return this.events.push(new e({type:e.PROGRAM_CHANGE,channel:n,param1:t,time:r||0})),this},o.prototype.setTempo=o.prototype.tempo=function(n,t){return this.events.push(new i({type:i.TEMPO,data:r.mpqnFromBpm(n),time:t||0})),this},o.prototype.toBytes=function(){var n=0,t=[],e=o.START_BYTES,i=o.END_BYTES;this.events.forEach((function(r){var e=r.toBytes();n+=e.length,t.push.apply(t,e)})),n+=i.length;var u=r.str2Bytes(n.toString(16),4);return e.concat(u,t,i)};var u=function(n){if(!this)return new u(n);var t=n||{};if(t.ticks){if("number"!=typeof t.ticks)throw new Error("Ticks per beat must be a number!");if(t.ticks<=0||t.ticks>=32768||t.ticks%1!=0)throw new Error("Ticks per beat must be an integer between 1 and 32767!")}this.ticks=t.ticks||128,this.tracks=t.tracks||[]};u.HDR_CHUNKID="MThd",u.HDR_CHUNK_SIZE="\0\0\0",u.HDR_TYPE0="\0\0",u.HDR_TYPE1="\0",u.prototype.addTrack=function(n){return n?(this.tracks.push(n),this):(n=new o,this.tracks.push(n),n)},u.prototype.toBytes=function(){var n=this.tracks.length.toString(16),t=u.HDR_CHUNKID+u.HDR_CHUNK_SIZE;return parseInt(n,16)>1?t+=u.HDR_TYPE1:t+=u.HDR_TYPE0,t+=r.codes2Str(r.str2Bytes(n,2)),t+=String.fromCharCode(this.ticks/256,this.ticks%256),this.tracks.forEach((function(n){t+=r.codes2Str(n.toBytes())})),t},n.Util=r,n.File=u,n.Track=o,n.Event=e,n.MetaEvent=i}(r),null!==n?n.exports=r:null!==t?t=r:this.Midi=r}).call(this,r(14)(n))},function(n,t){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=r(16),i=function(){function n(n){n=n||[],this.sessionChannels=n.map((function(n,t){return n.idx=n.idx||t,new e.Channel(n)}))}return n.prototype.createChannel=function(n){n.idx=n.idx||this.sessionChannels.length,this.sessionChannels.push(new e.Channel(n))},Object.defineProperty(n.prototype,"channels",{get:function(){return this.sessionChannels},enumerable:!0,configurable:!0}),n.prototype.startRow=function(n){this.sessionChannels.forEach((function(t){t.startClip(n)}))},n}();t.Session=i},function(n,t,r){"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},i=this&&this.__rest||function(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(e=Object.getOwnPropertySymbols(n);i<e.length;i++)t.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(n,e[i])&&(r[e[i]]=n[e[i]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),u=function(){var n=Tone.Transport.position.split(":");return"0"===n[0]&&"0"===n[1]?0:+n[0]+1+":0:0"},a=function(){function n(n){var t=this;this.idx=n.idx,this.activePatternIdx=-1,this.channelClips=[],n.sample&&(this.player=new Tone.Player(n.sample)),n.synth&&(this.instrument=new Tone[n.synth]),n.samples&&(this.sampler=new Tone.Sampler(n.samples));n.clips,n.samples,n.sample,n.synth;var r=i(n,["clips","samples","sample","synth"]);n.clips.forEach((function(n){t.addClip(e(e({},n),r))}),this)}return Object.defineProperty(n.prototype,"clips",{get:function(){return this.channelClips},enumerable:!0,configurable:!0}),n.prototype.startClip=function(n){this.activePatternIdx>-1&&this.activePatternIdx!==n&&this.stopClip(this.activePatternIdx),this.channelClips[n]&&"started"!==this.channelClips[n].state&&(this.activePatternIdx=n,this.channelClips[n].start(u()))},n.prototype.stopClip=function(n){this.channelClips[n].stop(u())},n.prototype.addClip=function(n,t){t=t||this.channelClips.length,n.pattern?this.channelClips[t]=o.clip(e({player:this.player,instrument:this.instrument,sampler:this.sampler},n)):this.channelClips[t]=null},Object.defineProperty(n.prototype,"activeClipIdx",{get:function(){return this.activePatternIdx},enumerable:!0,configurable:!0}),n}();t.Channel=a}])}));
//# sourceMappingURL=scribbletune.js.map