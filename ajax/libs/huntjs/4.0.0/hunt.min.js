!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Hunt=e()}(this,function(){"use strict";function s(){}function o(t){var e=null;return function(){e=e||setTimeout(function(){t.apply(this,arguments),e=null},100)}}function r(t,e){for(var n in this.element=t,this.visible=!1,e)Object.hasOwnProperty.call(e,n)&&(this[n]=e[n]);if(void 0!==t.dataset){if(void 0!==t.dataset.huntPersist)try{this.persist=JSON.parse(t.dataset.huntPersist)}catch(t){console.log("hunt: invalid data-hunt-persist value",t)}if(void 0!==t.dataset.huntOffset)try{this.offset=JSON.parse(t.dataset.huntOffset)}catch(t){console.log("hunt: invalid data-hunt-offset value",t)}}}r.prototype.offset=0,r.prototype.persist=!1,r.prototype.enter=s,r.prototype.leave=s;function t(t,e){if(t instanceof Node==!1&&"number"!=typeof t.length)throw new TypeError("hunt: observer first argument should be a node or a list of nodes");if("object"!=typeof e)throw new TypeError("hunt: observer second argument should be an object");t instanceof Node==!0&&(t=[t]),this._viewportHeight=window.innerHeight,this._huntedElements=[];for(var n=0,i=t.length;n<i;n++)this._huntedElements.push(new r(t[n],e));return function(){this._throttledHuntElements=o(this._huntElements.bind(this)),this._throttledUpdateMetrics=o(this._updateMetrics.bind(this)),window.addEventListener("scroll",this._throttledHuntElements),window.addEventListener("resize",this._throttledUpdateMetrics),this._huntElements()}.call(this),n=i=null,this}return t.prototype.trigger=t.prototype._huntElements=function(){for(var t,e,n,i=this._huntedElements.length;i;)--i,n=(e=(t=this._huntedElements[i]).element.getBoundingClientRect()).top-t.offset<this._viewportHeight&&e.top>=-(e.height+t.offset),!1===t.visible&&!0===n&&(t.enter.call(null,t.element),t.visible=!0,t.leave===s&&!0!==t.persist&&(this._huntedElements.splice(i,1),0===this._huntedElements.length&&this.disconnect())),!0===t.visible&&!1===n&&(t.leave.call(null,t.element),!(t.visible=!1)!==t.persist&&(this._huntedElements.splice(i,1),0===this._huntedElements.length&&this.disconnect()));i=t=e=n=null},t.prototype._updateMetrics=function(){this._viewportHeight=window.innerHeight,this._huntElements()},t.prototype.disconnect=function(){window.removeEventListener("scroll",this._throttledHuntElements),window.removeEventListener("resize",this._throttledUpdateMetrics)},t});