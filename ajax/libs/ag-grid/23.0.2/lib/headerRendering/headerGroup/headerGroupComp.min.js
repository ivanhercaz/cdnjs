"use strict";var __extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};return function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(r<3?i(a):3<r?i(t,o,a):i(t,o))||a);return 3<r&&a&&Object.defineProperty(t,o,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var component_1=require("../../widgets/component"),columnController_1=require("../../columnController/columnController"),gridOptionsWrapper_1=require("../../gridOptionsWrapper"),context_1=require("../../context/context"),touchListener_1=require("../../widgets/touchListener"),componentAnnotations_1=require("../../widgets/componentAnnotations"),originalColumnGroup_1=require("../../entities/originalColumnGroup"),utils_1=require("../../utils"),HeaderGroupComp=function(e){function t(){return e.call(this,t.TEMPLATE)||this}return __extends(t,e),t.prototype.init=function(e){this.params=e,this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},t.prototype.setupExpandIcons=function(){var o=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");function e(e){if(!utils_1._.isStopPropagationForAgGrid(e)){var t=!o.params.columnGroup.isExpanded();o.columnController.setColumnGroupOpened(o.params.columnGroup.getOriginalColumnGroup(),t,"uiColumnExpanded")}}this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);function t(e){utils_1._.stopPropagationForAgGrid(e)}this.addDestroyableEventListener(this.eCloseIcon,"dblclick",t),this.addDestroyableEventListener(this.eOpenIcon,"dblclick",t),this.addDestroyableEventListener(this.getGui(),"dblclick",e),this.updateIconVisibility();var n=this.params.columnGroup.getOriginalColumnGroup();this.addDestroyableEventListener(n,originalColumnGroup_1.OriginalColumnGroup.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addDestroyableEventListener(n,originalColumnGroup_1.OriginalColumnGroup.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},t.prototype.addTouchAndClickListeners=function(e,t){var o=new touchListener_1.TouchListener(e);this.addDestroyableEventListener(o,touchListener_1.TouchListener.EVENT_TAP,t),this.addDestroyFunc(function(){return o.destroy()}),this.addDestroyableEventListener(e,"click",t)},t.prototype.updateIconVisibility=function(){if(this.params.columnGroup.isExpandable()){var e=this.params.columnGroup.isExpanded();utils_1._.setDisplayed(this.eOpenIcon,!e),utils_1._.setDisplayed(this.eCloseIcon,e)}else utils_1._.setDisplayed(this.eOpenIcon,!1),utils_1._.setDisplayed(this.eCloseIcon,!1)},t.prototype.addInIcon=function(e,t){var o=utils_1._.createIconNoSpan(e,this.gridOptionsWrapper,null);this.getRefElement(t).appendChild(o)},t.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable())return utils_1._.setDisplayed(this.eOpenIcon,!1),void utils_1._.setDisplayed(this.eCloseIcon,!1)},t.prototype.setupLabel=function(){this.params.displayName&&""!==this.params.displayName&&(this.getRefElement("agLabel").innerHTML=this.params.displayName)},t.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation"><span ref="agLabel" class="ag-header-group-text" role="columnheader"></span><span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span><span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span></div>',__decorate([context_1.Autowired("columnController"),__metadata("design:type",columnController_1.ColumnController)],t.prototype,"columnController",void 0),__decorate([context_1.Autowired("gridOptionsWrapper"),__metadata("design:type",gridOptionsWrapper_1.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0),__decorate([componentAnnotations_1.RefSelector("agOpened"),__metadata("design:type",HTMLElement)],t.prototype,"eOpenIcon",void 0),__decorate([componentAnnotations_1.RefSelector("agClosed"),__metadata("design:type",HTMLElement)],t.prototype,"eCloseIcon",void 0),t}(component_1.Component);exports.HeaderGroupComp=HeaderGroupComp;