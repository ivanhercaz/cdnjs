"use strict";var __decorate=this&&this.__decorate||function(e,t,o,r){var n,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(i=(a<3?n(i):3<a?n(t,o,i):n(t,o))||i);return 3<a&&i&&Object.defineProperty(t,o,i),i},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var context_1=require("../context/context"),beans_1=require("./beans"),cellComp_1=require("./cellComp"),columnController_1=require("../columnController/columnController"),utils_1=require("../utils"),AutoHeightCalculator=function(){function e(){}return e.prototype.registerGridComp=function(e){this.gridPanel=e},e.prototype.getPreferredHeightForRow=function(o){var r=this;this.eDummyContainer||(this.eDummyContainer=document.createElement("div"),utils_1._.addCssClass(this.eDummyContainer,"ag-row ag-row-no-focus"));var e=this.gridPanel.getCenterContainer();e.appendChild(this.eDummyContainer);var n=[];this.columnController.getAllAutoRowHeightCols().filter(function(e){return e.isVisible()}).forEach(function(e){var t=new cellComp_1.CellComp(r.$scope,r.beans,e,o,null,!0,!1);t.setParentRow(r.eDummyContainer),n.push(t)});var t=n.map(function(e){return e.getCreateTemplate()}).join(" ");this.eDummyContainer.innerHTML=t,n.forEach(function(e){return e.afterAttached()});for(var a=0,i=0;i<this.eDummyContainer.children.length;i++){var l=this.eDummyContainer.children[i];l.offsetHeight>a&&(a=l.offsetHeight)}return e.removeChild(this.eDummyContainer),n.forEach(function(e){e.detach(),e.destroy()}),utils_1._.clearElement(this.eDummyContainer),a},__decorate([context_1.Autowired("beans"),__metadata("design:type",beans_1.Beans)],e.prototype,"beans",void 0),__decorate([context_1.Autowired("$scope"),__metadata("design:type",Object)],e.prototype,"$scope",void 0),__decorate([context_1.Autowired("columnController"),__metadata("design:type",columnController_1.ColumnController)],e.prototype,"columnController",void 0),e=__decorate([context_1.Bean("autoHeightCalculator")],e)}();exports.AutoHeightCalculator=AutoHeightCalculator;