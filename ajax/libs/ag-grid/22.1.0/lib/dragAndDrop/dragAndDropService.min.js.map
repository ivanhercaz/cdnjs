{"version":3,"sources":["dragAndDropService.js"],"names":["__decorate","this","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","__param","paramIndex","decorator","exports","value","DragSourceType","VDirection","HDirection","logger_1","require","context_1","gridOptionsWrapper_1","dragService_1","columnController_1","environment_1","utils_1","DragAndDropService","dragSourceAndParamsList","dropTargets","DragAndDropService_1","prototype","init","ePinnedIcon","_","createIcon","gridOptionsWrapper","ePlusIcon","eHiddenIcon","eMoveIcon","eLeftIcon","eRightIcon","eGroupIcon","eAggregateIcon","ePivotIcon","eDropNotAllowedIcon","setBeans","loggerFactory","logger","create","getStringType","type","RowDrag","HeaderCell","ToolPanel","console","warn","addDragSource","dragSource","allowTouch","params","eElement","dragStartPixels","onDragStart","bind","onDragStop","onDragging","push","dragService","removeDragSource","sourceAndParams","find","item","removeFromArray","destroy","_this","forEach","nudge","dragging","eventLastTime","mouseEvent","dragItem","dragItemCallback","lastDropTarget","dragSourceDropTarget","dragStarted","createGhost","dragStopped","draggingEvent","createDropTargetEvent","removeGhost","fromNudge","hDirection","workOutHDirection","vDirection","workOutVDirection","positionGhost","dropTarget","isMouseOnDropTarget","leaveLastTargetIfExists","enterDragTargetIfExists","dragEnterEvent","onDragEnter","setGhostIcon","getIconName","dragLeaveEvent","onDragLeave","getAllContainersFromDropTarget","containers","getContainer","secondaryContainers","getSecondaryContainers","concat","allContainers","mouseOverTarget","eContainer","rect","getBoundingClientRect","width","height","horizontalFit","clientX","left","right","verticalFit","clientY","top","bottom","isInterestedIn","addDropTarget","event","Left","Right","Up","Down","x","y","ghostHeight","eGhost","browserWidth","getBodyWidth","browserHeight","getBodyHeight","pageY","pageX","usrDocument","getDocument","windowScrollY","window","pageYOffset","documentElement","scrollTop","windowScrollX","pageXOffset","scrollLeft","clientWidth","clientHeight","style","eGhostParent","removeChild","loadTemplate","GHOST_TEMPLATE","theme","environment","getTheme","addCssClass","eGhostIcon","querySelector","innerHTML","escape","dragItemName","appendChild","iconName","shake","eIcon","clearElement","ICON_ADD","ICON_PINNED","ICON_MOVE","ICON_LEFT","ICON_RIGHT","ICON_GROUP","ICON_AGGREGATE","ICON_PIVOT","ICON_NOT_ALLOWED","addOrRemoveCssClass","Autowired","GridOptionsWrapper","DragService","Environment","ColumnController","PostConstruct","Function","Qualifier","LoggerFactory","PreDestroy","Bean"],"mappings":"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"}