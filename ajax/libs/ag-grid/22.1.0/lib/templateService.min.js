"use strict";var __decorate=this&&this.__decorate||function(e,t,a,o){var n,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;0<=i;i--)(n=e[i])&&(c=(r<3?n(c):3<r?n(t,a,c):n(t,a))||c);return 3<r&&c&&Object.defineProperty(t,a,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var context_1=require("./context/context"),context_2=require("./context/context"),TemplateService=function(){function e(){this.templateCache={},this.waitingCallbacks={}}return e.prototype.getTemplate=function(e,t){var a=this.templateCache[e];if(a)return a;var o=this.waitingCallbacks[e],n=this;if(!o){o=[],this.waitingCallbacks[e]=o;var r=new XMLHttpRequest;r.onload=function(){n.handleHttpResult(this,e)},r.open("GET",e),r.send()}return t&&o.push(t),null},e.prototype.handleHttpResult=function(e,t){if(200===e.status&&null!==e.response){this.templateCache[t]=e.response||e.responseText;for(var a=this.waitingCallbacks[t],o=0;o<a.length;o++){(0,a[o])()}if(this.$scope){var n=this;window.setTimeout(function(){n.$scope.$apply()},0)}}else console.warn("Unable to get template error "+e.status+" - "+t)},__decorate([context_2.Autowired("$scope"),__metadata("design:type",Object)],e.prototype,"$scope",void 0),e=__decorate([context_1.Bean("templateService")],e)}();exports.TemplateService=TemplateService;