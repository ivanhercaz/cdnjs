"use strict";var __decorate=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(c=(n<3?o(c):3<n?o(t,r,c):o(t,r))||c);return 3<n&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var context_1=require("../context/context"),gridOptionsWrapper_1=require("../gridOptionsWrapper"),utils_1=require("../utils"),SelectableService=function(){function e(){}return e.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.isRowSelectableFunc=this.gridOptionsWrapper.getIsRowSelectableFunc()},e.prototype.updateSelectableAfterGrouping=function(e){if(this.isRowSelectableFunc){this.recurseDown(e.childrenAfterGroup,function(e){return e.childrenAfterGroup})}},e.prototype.updateSelectableAfterFiltering=function(e){if(this.isRowSelectableFunc){this.recurseDown(e.childrenAfterGroup,function(e){return e.childrenAfterFilter})}},e.prototype.recurseDown=function(e,i){var o=this;e.forEach(function(e){if(e.group){var t;if(e.hasChildren()&&o.recurseDown(i(e),i),o.groupSelectsChildren){var r=utils_1._.find(i(e),"selectable",!0);t=utils_1._.exists(r)}else t=!!o.isRowSelectableFunc&&o.isRowSelectableFunc(e);e.setRowSelectable(t)}})},__decorate([context_1.Autowired("gridOptionsWrapper"),__metadata("design:type",gridOptionsWrapper_1.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0),__decorate([context_1.PostConstruct,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],e.prototype,"init",null),e=__decorate([context_1.Bean("selectableService")],e)}();exports.SelectableService=SelectableService;