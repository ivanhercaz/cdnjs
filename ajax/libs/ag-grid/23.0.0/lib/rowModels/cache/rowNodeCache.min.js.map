{"version":3,"sources":["rowNodeCache.js"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","exports","value","beanStub_1","require","rowNodeBlock_1","utils_1","RowNodeCache","_super","cacheParams","_this","call","maxRowFound","blocks","blockCount","virtualRowCount","initialRowCount","destroy","forEachBlockInOrder","block","destroyBlock","init","active","addDestroyFunc","isActive","getVirtualRowCount","hack_setVirtualRowCount","isMaxRowFound","onPageLoaded","event","rowNodeBlockLoader","loadComplete","checkBlockToLoad","logger","log","page","getBlockNumber","lastRow","success","checkVirtualRowCount","purgeBlocksIfNeeded","blockToExclude","blocksForPurging","push","sort","a","getLastAccessed","maxBlocksProvided","maxBlocksInCache","blocksToKeep","emptyBlocksToKeep","MAX_EMPTY_BLOCKS_TO_KEEP","forEach","index","getState","RowNodeBlock","STATE_DIRTY","isAnyNodeOpen","removeBlockFromCache","postCreateBlock","newBlock","addEventListener","EVENT_LOAD_COMPLETE","bind","setBlock","blockToRemove","onCacheUpdated","lastRowIndexPlusOverflow","blockSize","overflowSize","dynamicRowHeight","setVirtualRowCount","rowCount","_","exists","forEachNodeDeep","callback","sequence","NumberSequence","ids","getBlockIdsSorted","forEachBlockId","forEachBlockInReverseOrder","reverse","id","keys","map","idStr","parseInt","getBlock","blockId","addBlock","removeBlock","event_1","type","EVENT_CACHE_UPDATED","dispatchEvent","purgeCache","getRowNodesInRange","firstInRange","lastInRange","result","lastBlockId","inActiveRange","numberSequence","missing","foundGapInSelection","forEachNodeShallow","rowNode","hitFirstOrLast","BeanStub"],"mappings":"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"}