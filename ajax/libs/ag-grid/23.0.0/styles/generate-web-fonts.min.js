const fs=require("fs"),glob=require("glob"),webfontsGenerator=require("@vusion/webfonts-generator"),mkdirp=require("mkdirp"),formats=["woff","ttf"],mimeTypes={eot:"application/vnd.ms-fontobject",svg:"image/svg+xml",ttf:"application/x-font-ttf",woff:"application/font-woff",woff2:"font/woff2"},themes=glob.sync("ag-theme-*/icons").map(e=>e.replace("ag-theme-","").replace("/icons","")),generate=e=>{const t="base"===e?"agGridClassic":"agGrid"+e[0].toUpperCase()+e.substring(1),s=`ag-theme-${e}`,o=`${s}/sass/`;console.log(`Generating webFont for ${e} theme into ${o}`),webfontsGenerator({files:glob.sync(`${s}/icons/*.svg`),writeFiles:!1,scssFile:!0,fontName:t,fontHeight:1e3,templateOptions:{classPrefix:"ag-icon-",baseSelector:".ag-icon",theme:e},types:formats,fixedWidth:!1,dest:o,cssTemplate:"./scss-template.hbs"},(t,s)=>{t&&(console.log(t),process.exit());var r={};for(var a in formats){var n=formats[a];r[n]="data:"+mimeTypes[n]+";charset=utf-8;base64,"+Buffer.from(s[n]).toString("base64")}const i=s.generateCss(r);mkdirp.sync(o),fs.writeFileSync(`${o}/_ag-theme-${e}-font-vars.scss`,i)})},theme=process.argv[2];theme?themes.includes(theme)?generate(theme):console.error(`No such theme '${theme}', try one of: ${themes.join(", ")}.`):themes.forEach(generate);