{"version":3,"sources":["popupService.js"],"names":["__decorate","this","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","exports","value","constants_1","require","context_1","gridOptionsWrapper_1","environment_1","eventService_1","events_1","utils_1","PopupService","popupList","prototype","registerGridCore","gridCore","getDocument","gridOptionsWrapper","getPopupParent","ePopupParent","getRootGui","positionPopupForMenu","params","parentRect","sourceRect","eventSource","getBoundingClientRect","eDocument","popupParent","body","documentElement","y","top","keepYWithinBounds","minWidth","ePopup","clientWidth","style","x","maxX","right","left","xRightPosition","xLeftPosition","isEnableRtl","positionPopupUnderMouseEvent","_a","calculatePointerAlign","mouseEvent","nudgeX","nudgeY","positionPopup","keepWithinBounds","callPostProcessPopup","type","column","rowNode","e","documentRect","clientX","clientY","positionPopupUnderComponent","alignSide","offsetWidth","width","minHeight","height","positionPopupOverComponent","callback","getPostProcessPopupFunc","keepXWithinBounds","docElement","isBody","Math","min","diff","offsetHeight","clientHeight","_","getAbsoluteHeight","heightOfParent","scrollTop","abs","maxY","max","getAbsoluteWidth","widthOfParent","scrollLeft","addAsModalPopup","eChild","closeOnEsc","closedCallback","click","addPopup","modal","alwaysOnTop","_this","console","warn","pos","findIndex","popup","element","hideFunc","appendChild","eWrapper","document","createElement","theme","environment","getTheme","addCssClass","setAlwaysOnTop","bringPopupToFront","hidePopupOnKeyboardEvent","event","which","keyCode","Constants","KEY_ESCAPE","contains","activeElement","hidePopup","hidePopupOnMouseEvent","hidePopupOnTouchEvent","popupHidden","touchEvent","isEventFromCurrentPopup","isEventSameChainAsOriginalEvent","removeChild","removeEventListener","eventService","Events","EVENT_DRAG_STARTED","filter","window","setTimeout","addEventListener","push","indexOfThisChild","isElementInEventPath","el","classList","parentElement","originalClick","mouseEventOrTouch","touches","screenX_1","screenX","screenY_1","screenY","xMatch","yMatch","getWrapper","containsClass","addOrRemoveCssClass","parent","Array","slice","call","querySelectorAll","popupLen","alwaysOnTopList","onTopLength","indexOf","last","insertAdjacentElement","api","getApi","columnApi","getColumnApi","dispatchEvent","Autowired","GridOptionsWrapper","Environment","EventService","Bean"],"mappings":"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"}