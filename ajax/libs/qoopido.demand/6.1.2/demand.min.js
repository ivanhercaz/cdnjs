!function(u,r,t){"use strict";var s,o,l,c,f=u.document,e="demand"in u&&u.demand,d={version:"1.0.0",cache:{},timeout:8e3,pattern:{},modules:{},handler:"module"},n=Array.prototype,i=n.slice,a=n.concat,h=Object,p=h.create,v=h.defineProperty,m=h.getOwnPropertyNames,g=h.getOwnPropertyDescriptor,y=f.createElement("a");function w(e,t,n,r){return{__proto__:null,value:e,enumerable:!!r,configurable:!!n,writable:!!t}}function x(e,t){return typeof e===t}function b(e){return e&&x(e,"object")}function j(e){return x(e,"number")&&isFinite(e)&&Math.floor(e)===e&&0<=e}function q(e,t){return e instanceof t}function k(e,t,n,r,i){v(this,e,new w(t,n,r,i))}function R(e){for(var t,n=this.prototype,r=m(n),i={constructor:new w(this,!0,!0)},o=0;(t=r[o])&&!i[t];o++)i[t]=g(n,t);try{this.prototype=p(e.prototype||e,i)}catch(e){}if(this.prototype===n)throw new TypeError("Unable to extend, prototype is not writable");return this}k.call(Object.prototype,"defineProperty",k),k.call(u.Object.prototype,"defineProperty",k),Function.prototype.defineProperty("extends",R),u.Function.prototype.defineProperty("extends",R);var P,E=(P=/^\bv?(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)(?:-[\da-z-]+(?:\.[\da-z-]+)*)?(?:\+[\da-z-]+(?:\.[\da-z-]+)*)?\b$/i,function(e){return x(e,"string")&&P.test(e)});function M(e,t,n){for(var r,i=h.keys(e),o=0;void 0!==(r=i[o])&&!1!==t.call(n,r,e[r]);o++);return n}var C,S,T,A=function(){for(var e,t=arguments[0],n=1;void 0!==(e=arguments[n]);n++)M(e,H,t);return t},O=(T=new RegExp("[xy]","g"),function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(T,I)}),$="setImmediate"in u&&"function"==typeof u.setImmediate?u.setImmediate:"MutationObserver"in u&&"function"==typeof u.MutationObserver?(C={},S=f.createElement("div"),new MutationObserver(function(e){e.forEach(function(e){var t=e.attributeName.substr(1);C[t]&&C[t](),delete C[t]})}).observe(S,{attributes:!0}),function(e){var t=O();C[t]=e,S.setAttribute("i"+t,1)}):r;function I(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}function H(e,t){var n,r=this[e];void 0!==t&&(b(t)?(n=b(r),r=void 0!==t.length?n&&void 0!==r.length?r:[]:n&&void 0===r.length?r:{},this[e]=A(r,t)):this[e]=t)}function N(e,t,n){return i.call(e,t,n)}var D,L,B=(D=/^cache(Miss|Hit|Clear|Exceed)|queue(En|De)queue|(pre|post)(Resolve|Configure|Request|Process|Cache)|provide|reject$/,L={},W.prototype={emit:function(e,t){var n,r,i,o=L[e];if(o){for(n=N(arguments,2),r=0;i=o.on[r];r++)i.filter&&i.filter!==t||i.callback.apply(null,n);for(r=0;i=o.after[r];r++)i.filter&&i.filter!==t||i.callback.apply(null,n)}return this},on:function(e,t){return F("on",e,t),this},after:function(e,t){return F("after",e,t),this}},new W),U="WeakMap"in u&&!("ActiveXObject"in u)?u.WeakMap:(_.prototype={set:function(e,t){var n=z(this,e);return n?n[1]=t:e.defineProperty(this.id,[e,t]),this},get:function(e){var t=z(this,e);if(t)return t[1]},delete:function(e){var t=z(this,e);t&&(t.length=0,delete e[this.id])},has:function(e){return!!z(this,e)}},_);function z(e,t){var n;if((n=t[e.id])&&n[0]===t)return n}function _(){this.defineProperty("id","weakmap-"+O())}function F(e,t,n){var r,i;if(x(t,"string")&&x(n,"function"))for(t=t.split(" ");r=t.shift();)r=r.split(":"),D.test(r[0])&&((L[r[0]]||(L[r[0]]={on:[],after:[]}))[e].push({callback:n,filter:r[1]}),"on"===e&&"postConfigure"===r[0]&&(i=d.modules[r[1]])&&n(i))}function W(){}function X(){return void 0===this.uuid&&this.defineProperty("uuid",O()),this}var G,J,K,Q,V,Y,Z=(Y=new U,ne.prototype={enqueue:function(){var e=N(arguments);Y.set(this,Y.get(this).concat(e)),B.emit("queueEnqueue",this.uuid,e)},dequeue:function(){var e=Y.get(this).shift();return B.emit("queueDequeue",this.uuid,e),e},get current(){return Y.get(this)[0]},get length(){return Y.get(this).length}},ne.extends(X)),ee=(J="object"==typeof u.safari&&u.safari.pushNotification?"beforeunload":"visibilitychange",K=u.requestIdleCallback||function(e,t){var n=+new Date;return r(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(new Date-n))}})},t&&t.timeout)},Q=u.cancelIdleCallback||function(e){t(e)},V=new Z,u.addEventListener(J,function(e){var t;if(V.length&&("visibilitychange"!==e.type||"hidden"===f.visibilityState))for(G=Q(G);t&&t(),t=V.dequeue(););},!0),function(e,t){V.enqueue(e),!G&&V.length&&(G=K(te,{timeout:t}))});function te(){V.dequeue()(),G=V.length&&K(te)}function ne(){var e=X.call(this);return Y.set(e,[]),e}function re(){return+new Date}function ie(e){return y.href=e,y.href}var oe=/^(http(s?):)?\/\//i,ae=/^\/|@/,ue=/((?:\/\/|\/\*)#)\s*(sourceMappingURL)\s*=\s*(?!(?:http[s]?:)?\/\/)(.+?)\.map(?:\s+)?(\*\/)?/g,se=/\.\w+$/,ce=new RegExp("^"+ie("/")),de=new RegExp("^demand|provide|path|exports$"),le=/^(mock:)?([+-])?((?:[-\w]+\/?)+)?(?:@(.+?))?(?:#(\d+))?!/;function fe(e,t){var n=e.replace(le,"");return ae.test(n)||oe.test(n)||(n="/"+ie((t&&ie(t+"/../")||"/")+n).replace(ce,"")),n}function he(e,t){var n=e.match(le);return(n&&n[1]?"mock:":"")+(n&&n[3]||d.handler)+"!"+fe(e,t)}var pe,ve,me,ge,ye,we,xe,be=(Te.prototype={toString:function(){return this.major+"."+this.minor+"."+this.patch+(this.identifier.length?"-"+this.identifier.join("."):"")},compare:function(e){return Se(this.major,e.major)||Se(this.minor,e.minor)||Se(this.patch,e.patch)||function(e,t){var n,r,i,o,a=0;if(e.length&&!t.length)return-1;if(!e.length&&t.length)return 1;if(!e.length&&!t.length)return 0;do{if(n=e[a],o=typeof(r=t[a]),"undefined"==(i=typeof n)&&"undefined"==o)return 0;if("undefined"==o)return 1;if("undefined"==i)return-1;if(n!==r){if("string"==i&&"string"!=o)return 1;if("string"!=i&&"string"==o)return-1;if(r<n)return 1;if(n<r)return-1}}while(++a)}(this.identifier,e.identifier)}},Te),je=(ve=new RegExp("^[demand]\\[(.+?)\\][state]$"),me=/^(.+?),(\d+),(\d*),(.+?),(\d+)$/,ge=function(){try{return"localStorage"in u&&u.localStorage}catch(e){return!1}}(),ye=ge?u.localStorage:null,we=ge&&"remainingSpace"in ye,xe={},B.on("cacheMiss",function(e){ee(function(){pe.clear(e.id)})}).on("cacheExceed",function(t){s("-!/demand/cache/dispose").then(function(e){ee(function(){e(t.source.length),pe.set(t)},d.delay)})}).on("postRequest",function(e){e.source&&qe(e)&&(xe[e.id]=!0)}).after("postProcess",function(e){xe[e.id]&&ee(function(){pe.set(e)},d.delay)}),(Ce.prototype={get:ge?function(e){var t,n;if(qe(e)){if(t="[demand]["+e.id+"]",!(n=Pe(t+"[state]")))return;return 1===e.version.compare(new be(n[0]))||n[2]&&e.lifetime&&n[2]<=re()?void(e.invalid=!0):(e.source=ke(t+"[value]"),ee(function(){Ee(t+"[state]",n)},d.delay),!0)}}:function(){},resolve:ge?function(e){this.get(e)?Me("cacheHit",e):Me("cacheMiss",e)}:function(e){Me("cacheMiss",e)},set:ge?function(e){var t,n,r;if(qe(e)){t=[e.version,e.source.length,e.lifetime?re()+e.lifetime:null,s.version],n="[demand]["+e.id+"]",Me("preCache",e,t);try{if(r=we?ye.remainingSpace:null,Re(n+"[value]",e.source),Ee(n+"[state]",t),null!==r&&ye.remainingSpace===r)throw new Error;Me("postCache",e,t)}catch(t){Me("cacheExceed",e)}}}:function(){},clear:ge?function(e){var t=he(e),n="[demand]["+t+"]";ke(n+"[state]")&&(Re(n+"[state]"),Re(n+"[value]"),Me("cacheClear",Fe.get(t)||new Fe(t,null,!1)))}:function(){}}).clear.all=ge?function(){var t;M(ye,function(e){(t=e.match(ve))&&this(t[1])},this)}:function(){},Ce.prototype.clear.expired=ge?function(){var t,n;M(ye,function(e){(t=e.match(ve))&&(n=Pe("[demand]["+t[1]+"][state]"))&&0<n[2]&&n[2]<=re()&&this(t[1])},this)}:function(){},pe=new Ce);function qe(n){var r;return null!==n.cache?n.cache:(M(d.cache,function(e,t){0===n.path.indexOf(e)&&(!r||t.weight>r.weight)&&(r=t)}),r&&r.state)}function ke(e){return ye.getItem(e)}function Re(e,t){ye[t?"setItem":"removeItem"](e,t)}function Pe(e){var t,n=ke(e);if(n&&(t=n.match(me)))return N(t,1)}function Ee(e,t){t[4]=re(),Re(e,t.join(","))}function Me(e,t,n){B.emit(e,t.id,t,n)}function Ce(){ee(this.clear.expired.bind(this.clear),d.delay)}function Se(e,t){return e<t?-1:t<e?1:0}function Te(r){if(!E(r))throw new TypeError('"version" must be a valid semver version string');r=function(){for(var e,t=0,n=(n=r.split("-"))[1]?Array.prototype.concat(n[0].split("."),n[1].split(".")):n[0].split(".");e=n[t];t++)n[t]=parseInt(e,10).toString()===e?parseInt(e,10):e;return n}(),this.major=r.shift(),this.minor=r.shift(),this.patch=r.shift(),this.identifier=r}function Ae(e,t,n){return this.message=e,t&&(this.module=t),n&&(this.stack=N(n)),this}Ae.prototype={toString:function(){var e=this.message+" "+(this.module?'"'+this.module+'"':"");return this.stack&&(e=Ae.traverse(this.stack,e,1)),e}},Ae.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=Ae.traverse(r.stack,t,n+1));return t};var Oe,$e,Ie,He,Ne,De,Le,Be,Ue,ze=(Ue=new U,(ut.prototype={isPending:function(){return"pending"===Ue.get(this).state},isResolved:function(){return"resolved"===Ue.get(this).state},isRejected:function(){return"rejected"===Ue.get(this).state},then:function(e,t){var n=Ue.get(this),r=ut.defer();return n.resolved.push({handler:e||ut.resolve,dfd:r}),n.rejected.push({handler:t||ut.reject,dfd:r}),"pending"!==n.state&&$(n.handle),r.pledge},catch:function(e){return this.then(void 0,e)},always:function(e){return this.then(e,e)}}).finally=ut.prototype.always,ut.defer=function(){var n={};return n.pledge=new ut(function(e,t){n.resolve=e,n.reject=t}),n},ut.all=function(e){var t,n,r=ut.defer(),i=0;if(e.length)for(t={dfd:r,resolved:[],rejected:[],total:e.length,count:0};n=e[i];i++)ot(n,i,t);else r.resolve();return r.pledge},ut.race=function(e){for(var t,n=ut.defer(),r=0;t=e[r];r++)t.then(n.resolve,n.reject);return e.length||n.resolve(),n.pledge},ut.resolve=function(){var e=ut.defer();return e.resolve.apply(null,arguments),e.pledge},ut.reject=function(){var e=ut.defer();return e.reject.apply(null,arguments),e.pledge},ut),_e=(Be=new U,it.prototype={get:function(e){return e?Be.get(this)[e]:Be.get(this)},set:function(e,t){Be.get(this)[e]=t},remove:function(e){delete Be.get(this)[e]}},it),Fe=(Ne=new _e,De=/^(?:mock:|internal!)/i,Le=[],nt.pending=function(){return M(Ne.get(),Ze,[])},nt.resolved=function(){return M(Ne.get(),et,[])},nt.rejected=function(){return M(Ne.get(),tt,[])},rt.prototype={enqueue:!0},rt.get=function(e,t){return Ne.get(he(e,t))},rt.resolve=function(e,t){var n,r=t&&de.test(e),i=r?this.get("internal!"+t+"/"+e):this.get(e,t);if(!i)if(r){switch(i=new rt("internal!"+t+"/"+e),e){case"demand":n=M(s,Ve,s.bind(t));break;case"provide":n=o.bind(t);break;case"path":n=t;break;case"exports":n={},i.dfd.pledge.then(this.get(t).dfd.resolve)}i.dfd.resolve(n)}else i=new rt(e,t),s("/demand/handler/"+i.type).then(function(e){i.handler=e,i.mock?i.dfd.resolve(e):je.resolve(i)},function(){i.dfd.reject(new Ae("error loading (handler)",self.id))});return i},rt.remove=function(e,t,n){var r=he(e,t),i=f.querySelector('[demand-id="'+r+'"]');Ne.remove(r),Ne.remove("mock:"+r),i&&i.parentNode.removeChild(i),!1!==n&&je.clear(r)},rt.list=nt,rt),We=(He=/(.+)\/$/,Qe.prototype={matches:function(e){return this.match.test(e)},process:function(e,t){var n=this.location[t];if(n)return e.replace(this.match,n.url)}},Qe),Xe=(Ie={},function(e){var r,t="$task = "+e+"; $isTransferable = "+Je+"; onmessage = "+function(e){var t,n=Array.prototype.slice,r=e.data;function i(e){t||(t=!0,postMessage([r[0],0,e.toString()]))}try{$task.apply($task,[function(){var e;t||(t=!0,e=n.call(arguments),postMessage([r[0],1,e],e.filter($isTransferable)))},i].concat(r[1]))}catch(e){i(e)}};return(r=new Worker(URL.createObjectURL(new Blob([t],{type:"application/javascript"})))).onmessage=function(e){var t=e.data[0],n=t?Ie[t]:null;t&&n&&(e.data[1]?n.resolve.apply(null,e.data[2]):n.reject(e.data[2]),delete Ie[t])},function(){var e=ze.defer(),t=O(),n=N(arguments);return Ie[t]=e,r.postMessage([t,n],n.filter(Je)),e.pledge}}),Ge=(Oe=/^(?:\?|)$/,$e=new Xe(function(e,t,n){var r,i=new XMLHttpRequest,o=function(){this.readyState<4&&this.abort()}.bind(i);i.ontimeout=i.onerror=i.onabort=function(){t(i.statusText)},i.onprogress=i.onreadystatechange=function(){self.clearTimeout(r),r=self.setTimeout(o,1e4)},i.onload=function(){r=self.clearTimeout(r),"status"in i&&200!==i.status?t(i.statusText):e(i.responseText,i.getResponseHeader&&i.getResponseHeader("content-type"))},i.open("GET",n,!0),i.send(),r=self.setTimeout(o,1e4)}),function(r){var i;function e(e,t){t&&r.handler.validate&&!r.handler.validate(t)?r.dfd.reject(new Ae("error loading (content-type)",r.id)):(r.source=e,B.emit("postRequest",r.type,r))}oe.test(r.path)||M(d.pattern,function(e,t){t.matches(r.path)&&(!i||i.weight<t.weight)&&(i=t)}),function t(n){n=n||0,r.url=f.createElement("a"),r.url.href=i?ie(i.process(r.path,n)):r.path,r.invalid&&(r.url.search+=(Oe.test(r.url.search)?"":"&")+re()),B.emit("preRequest",r.type,r),$e(r.url.href).then(e,function(e){n++,i&&i.location[n]?t(n):r.dfd.reject(new Ae("error loading"+(e?" (status)":""),r.id))})}()});function Je(e){return e instanceof ArrayBuffer||e instanceof MessagePort||"ImageBitmap"in self&&e instanceof ImageBitmap}function Ke(e,t){this[e]={url:ie(t).replace(He,"$1"),match:new RegExp("^"+t)}}function Qe(e,t){this.weight=e.length,this.match=new RegExp("^"+e),this.location=[].concat(t),M(this.location,Ke,this.location)}function Ve(e,t){this[e]=t}function Ye(e){De.test(e)||this.push(e)}function Ze(e,t){!De.test(e)&&t.pledge.isPending()&&this.push(e)}function et(e,t){!De.test(e)&&t.pledge.isResolved()&&this.push(e)}function tt(e,t){!De.test(e)&&t.pledge.isRejected()&&this.push(e)}function nt(){return M(Ne.get(),Ye,[])}function rt(e,t,n){var r=this,i=e.match(le)||Le;return r.path=fe(e,t),r.mock=!!i[1],r.cache=i[2]?"+"===i[1]:null,r.type=i[3]||d.handler,r.version=new be(i[4]||d.version),r.lifetime=i[5]&&1e3*i[5]||d.lifetime,r.id=(r.mock?"mock:":"")+r.type+"!"+r.path,r.uri=(r.mock?"mock:":"")+r.type+"@"+r.version+(j(r.lifetime)&&0<r.lifetime?"#"+r.lifetime:"")+"!"+r.path,r.dfd=ze.defer(),r.pledge=r.dfd.pledge,r.invalid=!1,r.pledge.then(function(){r.value=N(arguments)}),!1!==n&&Ne.set(r.id,r),r}function it(){Be.set(this,{})}function ot(e,t,n){e.then(function(){n.resolved[t]=N(arguments),n.count++,at(n)},function(){n.rejected.push(N(arguments)),at(n)})}function at(e){e.count===e.total?e.dfd.resolve.apply(null,a.apply([],e.resolved)):e.rejected.length+e.count===e.total&&e.dfd.reject.apply(null,a.apply([],e.rejected))}function ut(e){return Ue.set(this,{state:"pending",handle:function(e,t){var n,r,i=Ue.get(this);for("pending"===i.state&&(i.state=e,i.value=t,"rejected"!==e||i[e].length||function(e){var t,n=0;for(console.warn("unhandled pledge rejection");void 0!==(t=e[n]);n++)if(q(t,Error)||q(t,Ae))throw t}(t));n=i[i.state].shift();)try{if(q(r=n.handler.apply(null,i.value),ut)){r.then(n.dfd.resolve,n.dfd.reject);continue}if("resolved"===i.state&&void 0===r){n.dfd.resolve.apply(null,i.value);continue}n.dfd.resolve(r)}catch(e){n.dfd.reject(e)}i.resolved.length=0,i.rejected.length=0}.bind(this),value:null,resolved:[],rejected:[],count:0}),e(function(){var e=this,t=arguments;$(function(){Ue.get(e).handle("resolved",t)})}.bind(this),function(){var e=this,t=arguments;$(function(){Ue.get(e).handle("rejected",t)})}.bind(this)),this}function st(e){return Array.isArray(e)}function ct(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}function dt(e,t){this[e]={weight:e.length,state:t}}function lt(e,t){"base"!==e&&(this[e]=new We(e,t))}function ft(e,t){var n=this[e]=this[e]||{};B.emit("preConfigure",e,n),A(n,t),B.emit("postConfigure",e,n)}function ht(){var e,t,n=N(arguments),r=this!==u?this:null,i=0;for(B.emit("preResolve",null,n,r);e=n[i];i++)x(e,"string")?n[i]=Fe.resolve(e,r).pledge:(n[i]=(t=ze.defer()).pledge,t.resolve(e));return(1<n.length?ze.all(n):n[0]).always(function(){B.emit("postResolve",null,n,r)})}ht.configure=function(e){var t=e.cache,n=e.version,r=e.delay,i=e.timeout,o=e.lifetime,a=e.base,u=e.pattern,s=e.modules,c=d.modules;return x(t,"boolean")?d.cache[""]={weight:0,state:t}:b(t)&&M(t,dt,d.cache),E(n)&&(d.version=n),j(r)&&(d.delay=1e3*r),j(i)&&(d.timeout=1e3*Math.min(Math.max(i,2),20)),j(o)&&0<o&&(d.lifetime=1e3*o),x(a,"string")&&""!==a&&(d.pattern.base=new We("",a)),b(u)&&M(u,lt,d.pattern),b(s)&&M(s,ft,c),ht},ht.version="6.1.2",ht.on=B.on.bind(ht),ht.get=function(e,t){var n=Fe.get(e,t);return n&&n.value},ht.list=Fe.list,ht.remove=Fe.remove,ht.cache={clear:je.clear},B.after("cacheMiss",function(e){new Ge(e)}).after("postRequest",function(e){var t=e.handler.onPostRequest;t&&t(e)}).after("cacheHit postRequest",function(e){B.emit("preProcess",e.id,e)}).after("preRequest",function(e){var t=e.handler.onPreRequest;t&&t(e)}).after("preProcess",function(e){var t=e.handler.onPreProcess;t&&t(e),e.pledge.then(function(){B.emit("postProcess",e.id,e)}),!0===e.enqueue?l.enqueue(e):q(e.enqueue,ze)&&e.enqueue.then(function(){l.enqueue(e)})}),s=ht,u.defineProperty("demand",s),(o=function(){var e,t,n,r=x(arguments[0],"string")?arguments[0]:null,i=this!==u?this:null,o=st(arguments[r?1:0])?arguments[r?1:0]:null,a=o?arguments[r?2:1]:arguments[r?1:0];if(!r&&c.current&&(r=(e=c.current).uri,c.process()),r)return e=e||new Fe(r,i),t=q(a,ze),n=x(a,"function"),o?s.apply(e.path,o).then(function(){e.dfd.resolve(n?a.apply(null,arguments):a)},function(){e.dfd.reject(new Ae("error providing",e.id,arguments))}):t?a.then(e.dfd.resolve,e.dfd.reject):e.dfd.resolve(n?a():a),e.dfd.pledge.then(function(){B.emit("provide",e.path,e)},function(){B.emit("reject",e.path,e)}),e.dfd.pledge;throw new Error("unspecified anonymous provide")}).amd=!0,u.defineProperty("provide",o),s.configure({cache:!0,base:"/",pattern:{"/demand":ie((e&&e.url||location.href)+"/../").slice(0,-1)}}),e&&e.settings&&s.configure(e.settings);var pt,vt=(pt=new U,mt.prototype={process:function(){var e,t=pt.get(this);!t.queue.length||(e=t.current=t.queue.dequeue()).pledge.isRejected()?t.current=null:e.handler.process&&e.handler.process(e)},get current(){return pt.get(this).current}},mt);function mt(e){var t=this,n={queue:e,current:null};pt.set(t,n),s.on("queueEnqueue:"+e.uuid,function(){n.current||t.process()})}function gt(e,t){for(var n,r;n=ue.exec(t);)y.href=e,r=oe.test(n[3])?y.protocol+"//"+y.host+n[3]:(y.pathname+=(se.test(y.pathname)?"/../":"/")+n[3],y.protocol+"//"+y.host+y.pathname),t=t.replace(n[0],n[1]+" "+n[2]+"="+r+".map"+(n[4]?" "+n[4]:""));return t}function yt(){}yt.prototype={validate:null,onPreRequest:null,onPostRequest:null,onPreProcess:null,process:null};var wt,xt,bt,jt=(wt=f.getElementsByTagName("head")[0],xt=/^(application|text)\/(x-)?javascript/,bt={suffix:".js"},s.on("postConfigure:/demand/handler/module",function(e){b(e)&&A(bt,e)}),qt.prototype={validate:function(e){return xt.test(e)},onPreRequest:function(e,t){var n;(t=void 0!==t?t:bt.suffix)&&0!==e.path.indexOf("@")&&(n=e.url.pathname,e.url.pathname=n.slice(-t.length)!==t?n+t:n)},onPostRequest:function(e){e.source=gt(e.url,e.source)},process:function(e){var t;e.source&&((t=f.createElement("script")).async=!0,t.text=e.source,t.setAttribute("demand-id",e.id),wt.appendChild(t))}},new(qt.extends(yt)));function qt(){}function Ae(e,t,n){return this.message=e,t&&(this.module=t),n&&(this.stack=N(n)),this}Ae.prototype={toString:function(){var e=this.message+" "+(this.module?'"'+this.module+'"':"");return this.stack&&(e=Ae.traverse(this.stack,e,1)),e}},Ae.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=Ae.traverse(r.stack,t,n+1));return t};var kt,Rt,Pt,Et,Mt,Ct=(Mt={},s.on("postConfigure:/demand/handler/bundle",function(e){b(e)&&M(Mt=e,Ht)}),Nt.prototype={validate:jt.validate,onPreProcess:function(e){var t,n,r,i,o,a=e.source,u=e.dfd,s=Mt[e.path];function c(){u.reject(new Ae("error resolving",e.id,arguments))}if(e.enqueue=!1,s&&(t=function(e){for(var t,n,r=0;n=e[r];r++)if(n=(n=n.match(le))&&n[3]||Mt.handler,t){if(n!==t)return!1}else t=n;return t}(s))){for(;n=ue.exec(a);)a=a.replace(n[0],"");for(e.source=a,r=[],o=0;i=s[o];o++)r.push(Fe.resolve("mock:"+i).pledge);ze.all(r).then(function(){for(r.length=0,o=0;i=s[o];o++)(i=s[o]=Fe.get(i)||new Fe(i)).handler=arguments[o],r.push(i.pledge);"module"===t?(l.enqueue.apply(l,s),jt.process(e)):(jt.process(e),l.enqueue.apply(l,s)),ze.all(r).then(u.resolve,c)},c)}else c()}},new(Nt.extends(yt))),St=(Pt=/^text\/.+$/,Et={suffix:".html"},s.on("postConfigure:/demand/handler/component",function(e){b(e)&&A(Et,e)}),It.prototype={validate:function(e){return Pt.test(e)},onPreRequest:function(e,t){var n;(t=void 0!==t?t:Et.suffix)&&(n=e.url.pathname,e.url.pathname=n.slice(-t.length)!==t?n+t:n)},onPostRequest:function(e){e.source=gt(e.url,e.source)},onPreProcess:function(o){var e,t,n,r,i=o.path,a=o.dfd,u=f.createElement("body"),s=[],c=[];function d(){a.reject(new Ae("error resolving",o.id,arguments))}for(o.enqueue=!1,u.innerHTML=o.source;e=u.firstElementChild;)(t=e.getAttribute("type"))&&(r=t+"!"+i+((n=e.getAttribute("path"))?"/"+n:""),e.parentNode.removeChild(e),s.push({source:e.textContent,uri:r}),c.push(Fe.resolve("mock:"+r).pledge));ze.all(c).then(function(){var n,r,e,i=[];for(c.length=0,n=0;r=s[n];n++)(e=Fe.get(r.uri)||new Fe(r.uri)).source=gt(e.url,r.source),e.handler=arguments[n],i.push(e),c.push(e.pledge),l.enqueue(e);ze.all(c).then(function(){var e=o.path.length+1,t={};for(n=0;r=arguments[n];n++)t[i[n].path.substr(e)||"main"]=r;a.resolve(t)},d)},d)}},new(It.extends(yt))),Tt=(kt="/demand/plugin/genie",Rt=[],s.on("postConfigure:"+kt,function(e){b(e)&&(Rt.length=0,M(e,Ot))}).on("preResolve",function(e,t){for(var n,r,i={},o=0;n=e[o];o++)!x(n,"string")||de.test(n)||Fe.get(n,t)||"module"===(n=new Fe(n,t,!1)).type&&(r=At(n.path))&&!je.get(n)&&(i[r.prefix]||(i[r.prefix]={fn:r.fn,matches:[]})).matches.push(n);M(i,$t)}),!0);function At(e){for(var t,n,r=0;t=Rt[r];r++)t.prefix.test(e)&&(!n||t.weight>n.weight)&&(n=t);return n}function Ot(e,t){Rt.push({prefix:new RegExp("^"+e),weight:e.length,fn:t})}function $t(e,t){var n,r=t.matches,i=0;if(1<r.length){for(t.id=kt+"/"+ct(JSON.stringify(t.matches));n=r[i];i++)r[i]=new Fe(n.uri);s.configure(function(e){var t,n,r=e.matches,i={pattern:{},modules:{"/demand/handler/bundle":{}}},o=0;for(i.pattern[e.id]=e.fn(r),i.modules["/demand/handler/bundle"][e.id]=t=[];n=r[o];o++)t.push(n.path);return i}(t)),s("bundle!"+t.id).then(function(){for(var e,t=0;e=this[t];t++)e.dfd.resolve(arguments[t])}.bind(r),function(){for(var e,t=0;e=this[t];t++)e.dfd.reject(new Ae("error resolving",e.id))}.bind(r))}}function It(){}function Ht(e,t){for(var n,r=0;n=t[r];r++)x(n,"string")&&(t[r]=he(n))}function Nt(){}function Dt(e,t){o(e,function(){return t})}if(l=new Z,c=new vt(l),Dt("/demand/abstract/uuid",X),Dt("/demand/abstract/handler",yt),Dt("/demand/handler/module",jt),Dt("/demand/handler/bundle",Ct),Dt("/demand/handler/component",St),Dt("/demand/plugin/genie",Tt),Dt("/demand/validator/isTypeOf",x),Dt("/demand/validator/isArray",st),Dt("/demand/validator/isObject",b),Dt("/demand/validator/isInstanceOf",q),Dt("/demand/validator/isSemver",E),Dt("/demand/function/resolveUrl",ie),Dt("/demand/function/resolveSourcemaps",gt),Dt("/demand/function/merge",A),Dt("/demand/function/iterate",M),Dt("/demand/function/hash",ct),Dt("/demand/function/defer",$),Dt("/demand/function/idle",ee),Dt("/demand/function/uuid",O),Dt("/demand/function/toArray",N),Dt("/demand/task",Xe),Dt("/demand/weakmap",U),Dt("/demand/descriptor",w),Dt("/demand/pledge",ze),Dt("/demand/queue",Z),Dt("/demand/failure",Ae),Dt("/demand/semver",be),e&&e.main)switch(typeof e.main){case"string":s(e.main);break;case"function":o("main",e.main())}}("demand-loader"===this.name?parent:this,setTimeout,clearTimeout);