function _classCallCheck(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,i){for(var e=0;e<i.length;e++){var t=i[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function _createClass(s,i,e){return i&&_defineProperties(s.prototype,i),e&&_defineProperties(s,e),s}import{isFunction,noop}from"../utils/js_utils";export var Disposable=function(){function s(i){_classCallCheck(this,s),this.isDisposed=!1,this.action=isFunction(i)?i:noop}return _createClass(s,[{key:"dispose",value:function(){this.isDisposed||(this.action(),this.isDisposed=!0)}}],[{key:"isDisposable",value:function(s){return s&&isFunction(s.dispose)}},{key:"_fixup",value:function(i){return s.isDisposable(i)?i:s.empty}},{key:"create",value:function(i){return new s(i)}}]),s}();Disposable.empty={dispose:noop};export var CompositeDisposable=function(){function s(){_classCallCheck(this,s),this.isDisposed=!1;for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];this.disposables=e}return _createClass(s,[{key:"add",value:function(s){this.isDisposed?s.dispose():this.disposables.push(s)}},{key:"remove",value:function(s){var i=!1;if(!this.isDisposed){var e=this.disposables.indexOf(s);-1!==e&&(i=!0,this.disposables.splice(e,1),s.dispose())}return i}},{key:"clear",value:function(){if(!this.isDisposed){for(var s=this.disposables.length,i=new Array(s),e=0;e<s;e++)i[e]=this.disposables[e];this.disposables=[];for(var t=0;t<s;t++)i[t].dispose()}}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;for(var s=this.disposables.length,i=new Array(s),e=0;e<s;e++)i[e]=this.disposables[e];this.disposables=[];for(var t=0;t<s;t++)i[t].dispose()}}}]),s}();export var SerialDisposable=function(){function s(){_classCallCheck(this,s),this.isDisposed=!1}return _createClass(s,[{key:"getDisposable",value:function(){return this.current}},{key:"setDisposable",value:function(s){var i=this.isDisposed;if(!i){var e=this.current;this.current=s,e&&e.dispose()}i&&s&&s.dispose()}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;var s=this.current;this.current=void 0,s&&s.dispose()}}}]),s}();