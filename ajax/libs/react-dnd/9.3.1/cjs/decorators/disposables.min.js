"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SerialDisposable=exports.CompositeDisposable=exports.Disposable=void 0;var _js_utils=require("../utils/js_utils");function _classCallCheck(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function _createClass(s,e,i){return e&&_defineProperties(s.prototype,e),i&&_defineProperties(s,i),s}function _defineProperty(s,e,i){return e in s?Object.defineProperty(s,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[e]=i,s}var Disposable=function(){function e(s){_classCallCheck(this,e),_defineProperty(this,"isDisposed",!1),_defineProperty(this,"action",void 0),this.action=(0,_js_utils.isFunction)(s)?s:_js_utils.noop}return _createClass(e,null,[{key:"isDisposable",value:function(s){return s&&(0,_js_utils.isFunction)(s.dispose)}},{key:"_fixup",value:function(s){return e.isDisposable(s)?s:e.empty}},{key:"create",value:function(s){return new e(s)}}]),_createClass(e,[{key:"dispose",value:function(){this.isDisposed||(this.action(),this.isDisposed=!0)}}]),e}();_defineProperty(exports.Disposable=Disposable,"empty",{dispose:_js_utils.noop});var CompositeDisposable=function(){function t(){_classCallCheck(this,t),_defineProperty(this,"isDisposed",!1),_defineProperty(this,"disposables",void 0);for(var s=arguments.length,e=new Array(s),i=0;i<s;i++)e[i]=arguments[i];this.disposables=e}return _createClass(t,[{key:"add",value:function(s){this.isDisposed?s.dispose():this.disposables.push(s)}},{key:"remove",value:function(s){var e=!1;if(!this.isDisposed){var i=this.disposables.indexOf(s);-1!==i&&(e=!0,this.disposables.splice(i,1),s.dispose())}return e}},{key:"clear",value:function(){if(!this.isDisposed){for(var s=this.disposables.length,e=new Array(s),i=0;i<s;i++)e[i]=this.disposables[i];this.disposables=[];for(var t=0;t<s;t++)e[t].dispose()}}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;for(var s=this.disposables.length,e=new Array(s),i=0;i<s;i++)e[i]=this.disposables[i];this.disposables=[];for(var t=0;t<s;t++)e[t].dispose()}}}]),t}();exports.CompositeDisposable=CompositeDisposable;var SerialDisposable=function(){function s(){_classCallCheck(this,s),_defineProperty(this,"isDisposed",!1),_defineProperty(this,"current",void 0)}return _createClass(s,[{key:"getDisposable",value:function(){return this.current}},{key:"setDisposable",value:function(s){var e=this.isDisposed;if(!e){var i=this.current;this.current=s,i&&i.dispose()}e&&s&&s.dispose()}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;var s=this.current;this.current=void 0,s&&s.dispose()}}}]),s}();exports.SerialDisposable=SerialDisposable;