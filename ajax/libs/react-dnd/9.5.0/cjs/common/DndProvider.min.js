"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DndProvider=void 0;var _react=_interopRequireWildcard(require("react")),_DndContext=require("./DndContext");function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,o=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(o[r]=e[r]);return o}var refCount=0,DndProvider=(0,_react.memo)(function(e){var t=e.children,r=_slicedToArray(getDndContextValue(_objectWithoutProperties(e,["children"])),2),n=r[0],o=r[1];return _react.default.useEffect(function(){return o&&refCount++,function(){o&&0===--refCount&&(getGlobalContext()[instanceSymbol]=null)}},[]),_react.default.createElement(_DndContext.DndContext.Provider,{value:n},t)});function getDndContextValue(e){return"manager"in e?[{dragDropManager:e.manager},!1]:[createSingletonDndContext(e.backend,e.context,e.options,e.debugMode),!e.context]}(exports.DndProvider=DndProvider).displayName="DndProvider";var instanceSymbol=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");function createSingletonDndContext(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:getGlobalContext(),r=2<arguments.length?arguments[2]:void 0,n=3<arguments.length?arguments[3]:void 0,o=t;return o[instanceSymbol]||(o[instanceSymbol]=(0,_DndContext.createDndContext)(e,t,r,n)),o[instanceSymbol]}function getGlobalContext(){return"undefined"!=typeof global?global:window}