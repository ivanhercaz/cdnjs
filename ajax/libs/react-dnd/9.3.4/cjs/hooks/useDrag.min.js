"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useDrag=useDrag;var _react=require("react"),_invariant=_interopRequireDefault(require("invariant")),_useMonitorOutput=require("./internal/useMonitorOutput"),_useIsomorphicLayoutEffect=require("./internal/useIsomorphicLayoutEffect"),_drag=require("./internal/drag");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,r){var t=[],n=!0,u=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(e){u=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(u)throw o}}return t}function _arrayWithHoles(e){if(Array.isArray(e))return e}function useDrag(e){var r=(0,_react.useRef)(e);r.current=e,(0,_invariant.default)(null!=e.item,"item must be defined"),(0,_invariant.default)(null!=e.item.type,"item type must be defined");var t=_slicedToArray((0,_drag.useDragSourceMonitor)(),2),n=t[0],u=t[1];(0,_drag.useDragHandler)(r,n,u);var o=(0,_useMonitorOutput.useMonitorOutput)(n,r.current.collect||function(){return{}},function(){return u.reconnect()}),i=(0,_react.useMemo)(function(){return u.hooks.dragSource()},[u]),a=(0,_react.useMemo)(function(){return u.hooks.dragPreview()},[u]);return(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)(function(){u.dragSourceOptions=r.current.options||null,u.reconnect()},[u]),(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)(function(){u.dragPreviewOptions=r.current.previewOptions||null,u.reconnect()},[u]),[o,i,a]}