"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useCollector=useCollector;var _shallowequal=_interopRequireDefault(require("shallowequal")),_react=require("react"),_useIsomorphicLayoutEffect=require("./useIsomorphicLayoutEffect");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,r){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],o=!0,a=!1,u=void 0;try{for(var l,n=e[Symbol.iterator]();!(o=(l=n.next()).done)&&(t.push(l.value),!r||t.length!==r);o=!0);}catch(e){a=!0,u=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw u}}return t}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function useCollector(r,t,o){var e=_slicedToArray((0,_react.useState)(function(){return t(r)}),2),a=e[0],u=e[1],l=(0,_react.useCallback)(function(){var e=t(r);(0,_shallowequal.default)(a,e)||(u(e),o&&o())},[a,r,o]);return(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)(l,[]),[a,l]}