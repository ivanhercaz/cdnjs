var __decorate=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,i,r):o(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};import{NgModule,Component,ElementRef,OnInit,Input,Output,EventEmitter,forwardRef,ViewChild,ChangeDetectorRef,ChangeDetectionStrategy}from"@angular/core";import{CommonModule}from"@angular/common";import{InputTextModule}from"primeng/inputtext";import{NG_VALUE_ACCESSOR}from"@angular/forms";export const SPINNER_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>Spinner),multi:!0};let Spinner=class{constructor(e,t){this.el=e,this.cd=t,this.onChange=new EventEmitter,this.onFocus=new EventEmitter,this.onBlur=new EventEmitter,this._step=1,this.onModelChange=(()=>{}),this.onModelTouched=(()=>{}),this.keyPattern=/[0-9\+\-]/,this.negativeSeparator="-"}get step(){return this._step}set step(e){if(this._step=e,null!=this._step){let e=this.step.toString().split(/[,]|[.]/);this.calculatedPrecision=e[1]?e[1].length:void 0}}ngOnInit(){this.formatInput&&(this.localeDecimalSeparator=1.1.toLocaleString().substring(1,2),this.localeThousandSeparator=1e3.toLocaleString().substring(1,2),this.thousandRegExp=new RegExp(`[${this.thousandSeparator||this.localeThousandSeparator}]`,"gim"),this.decimalSeparator&&this.thousandSeparator&&this.decimalSeparator===this.thousandSeparator&&console.warn("thousandSeparator and decimalSeparator cannot have the same value."))}repeat(e,t,i){let n=t||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,i)},n),this.spin(e,i)}spin(e,t){let i,n=this.step*t,o=this.getPrecision();i=this.value?"string"==typeof this.value?this.parseValue(this.value):this.value:0,this.value=o?parseFloat(this.toFixed(i+n,o)):i+n,void 0!==this.maxlength&&this.value.toString().length>this.maxlength&&(this.value=i),void 0!==this.min&&this.value<this.min&&(this.value=this.min),void 0!==this.max&&this.value>this.max&&(this.value=this.max),this.formatValue(),this.onModelChange(this.value),this.onChange.emit(e)}getPrecision(){return void 0===this.precision?this.calculatedPrecision:this.precision}toFixed(e,t){let i=Math.pow(10,t||0);return String(Math.round(e*i)/i)}onUpButtonMousedown(e){this.disabled||(this.inputfieldViewChild.nativeElement.focus(),this.repeat(e,null,1),this.updateFilledState(),e.preventDefault())}onUpButtonMouseup(e){this.disabled||this.clearTimer()}onUpButtonMouseleave(e){this.disabled||this.clearTimer()}onDownButtonMousedown(e){this.disabled||(this.inputfieldViewChild.nativeElement.focus(),this.repeat(e,null,-1),this.updateFilledState(),e.preventDefault())}onDownButtonMouseup(e){this.disabled||this.clearTimer()}onDownButtonMouseleave(e){this.disabled||this.clearTimer()}onInputKeydown(e){38==e.which?(this.spin(e,1),e.preventDefault()):40==e.which&&(this.spin(e,-1),e.preventDefault())}onInputChange(e){this.onChange.emit(e)}onInput(e){this.value=this.parseValue(e.target.value),this.onModelChange(this.value),this.updateFilledState()}onInputBlur(e){this.focus=!1,this.formatValue(),this.onModelTouched(),this.onBlur.emit(e)}onInputFocus(e){this.focus=!0,this.onFocus.emit(e)}parseValue(e){let t,i=this.getPrecision();return""===e.trim()?t=null:(this.formatInput&&(e=e.replace(this.thousandRegExp,"")),i?(e=this.formatInput?e.replace(this.decimalSeparator||this.localeDecimalSeparator,"."):e.replace(",","."),t=parseFloat(e)):t=parseInt(e,10),isNaN(t)?t=null:(null!==this.max&&t>this.max&&(t=this.max),null!==this.min&&t<this.min&&(t=this.min))),t}formatValue(){let e=this.value,t=this.getPrecision();null!=e?(this.formatInput&&(e=e.toLocaleString(void 0,{maximumFractionDigits:20}),this.decimalSeparator&&this.thousandSeparator&&(e=e.split(this.localeDecimalSeparator),t&&e[1]&&(e[1]=(this.decimalSeparator||this.localeDecimalSeparator)+e[1]),this.thousandSeparator&&e[0].length>3&&(e[0]=e[0].replace(new RegExp(`[${this.localeThousandSeparator}]`,"gim"),this.thousandSeparator)),e=e.join(""))),this.formattedValue=e.toString()):this.formattedValue=null,this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.formattedValue)}clearTimer(){this.timer&&clearInterval(this.timer)}writeValue(e){this.value=e,this.formatValue(),this.updateFilledState(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}updateFilledState(){this.filled=void 0!==this.value&&null!=this.value}};Spinner.ctorParameters=(()=>[{type:ElementRef},{type:ChangeDetectorRef}]),__decorate([Output()],Spinner.prototype,"onChange",void 0),__decorate([Output()],Spinner.prototype,"onFocus",void 0),__decorate([Output()],Spinner.prototype,"onBlur",void 0),__decorate([Input()],Spinner.prototype,"min",void 0),__decorate([Input()],Spinner.prototype,"max",void 0),__decorate([Input()],Spinner.prototype,"maxlength",void 0),__decorate([Input()],Spinner.prototype,"size",void 0),__decorate([Input()],Spinner.prototype,"placeholder",void 0),__decorate([Input()],Spinner.prototype,"inputId",void 0),__decorate([Input()],Spinner.prototype,"disabled",void 0),__decorate([Input()],Spinner.prototype,"readonly",void 0),__decorate([Input()],Spinner.prototype,"tabindex",void 0),__decorate([Input()],Spinner.prototype,"required",void 0),__decorate([Input()],Spinner.prototype,"name",void 0),__decorate([Input()],Spinner.prototype,"ariaLabelledBy",void 0),__decorate([Input()],Spinner.prototype,"inputStyle",void 0),__decorate([Input()],Spinner.prototype,"inputStyleClass",void 0),__decorate([Input()],Spinner.prototype,"formatInput",void 0),__decorate([Input()],Spinner.prototype,"decimalSeparator",void 0),__decorate([Input()],Spinner.prototype,"thousandSeparator",void 0),__decorate([Input()],Spinner.prototype,"precision",void 0),__decorate([ViewChild("inputfield")],Spinner.prototype,"inputfieldViewChild",void 0),__decorate([Input()],Spinner.prototype,"step",null),Spinner=__decorate([Component({selector:"p-spinner",template:'\n        <span class="ui-spinner ui-widget ui-corner-all">\n            <input #inputfield type="text" [attr.id]="inputId" [value]="formattedValue||null" [attr.name]="name" [attr.aria-valumin]="min" [attr.aria-valuemax]="max" [attr.aria-valuenow]="value" [attr.aria-labelledby]="ariaLabelledBy"\n            [attr.size]="size" [attr.maxlength]="maxlength" [attr.tabindex]="tabindex" [attr.placeholder]="placeholder" [disabled]="disabled" [readonly]="readonly" [attr.required]="required"\n            (keydown)="onInputKeydown($event)" (blur)="onInputBlur($event)" (input)="onInput($event)" (change)="onInputChange($event)" (focus)="onInputFocus($event)"\n            [ngStyle]="inputStyle" [class]="inputStyleClass" [ngClass]="\'ui-spinner-input ui-inputtext ui-widget ui-state-default ui-corner-all\'">\n            <button type="button" [ngClass]="{\'ui-spinner-button ui-spinner-up ui-corner-tr ui-button ui-widget ui-state-default\':true,\'ui-state-disabled\':disabled}" [disabled]="disabled||readonly" tabindex="-1" [attr.readonly]="readonly"\n                (mouseleave)="onUpButtonMouseleave($event)" (mousedown)="onUpButtonMousedown($event)" (mouseup)="onUpButtonMouseup($event)">\n                <span class="ui-spinner-button-icon pi pi-caret-up ui-clickable"></span>\n            </button>\n            <button type="button" [ngClass]="{\'ui-spinner-button ui-spinner-down ui-corner-br ui-button ui-widget ui-state-default\':true,\'ui-state-disabled\':disabled}" [disabled]="disabled||readonly" tabindex="-1" [attr.readonly]="readonly"\n                (mouseleave)="onDownButtonMouseleave($event)" (mousedown)="onDownButtonMousedown($event)" (mouseup)="onDownButtonMouseup($event)">\n                <span class="ui-spinner-button-icon pi pi-caret-down ui-clickable"></span>\n            </button>\n        </span>\n    ',host:{"[class.ui-inputwrapper-filled]":"filled","[class.ui-inputwrapper-focus]":"focus"},providers:[SPINNER_VALUE_ACCESSOR],changeDetection:ChangeDetectionStrategy.Default})],Spinner);export{Spinner};let SpinnerModule=class{};SpinnerModule=__decorate([NgModule({imports:[CommonModule,InputTextModule],exports:[Spinner],declarations:[Spinner]})],SpinnerModule);export{SpinnerModule};