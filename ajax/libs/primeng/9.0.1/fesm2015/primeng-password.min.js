import{ElementRef,NgZone,Input,HostListener,Directive,NgModule}from"@angular/core";import{CommonModule}from"@angular/common";import{DomHandler}from"primeng/dom";var __decorate=this&&this.__decorate||function(e,t,s,o){var a,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(n=(l<3?a(n):l>3?a(t,s,n):a(t,s))||n);return l>3&&n&&Object.defineProperty(t,s,n),n};let Password=class{constructor(e,t){this.el=e,this.zone=t,this.promptLabel="Enter a password",this.weakLabel="Weak",this.mediumLabel="Medium",this.strongLabel="Strong",this.feedback=!0}set showPassword(e){this.el.nativeElement.type=e?"text":"password"}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}createPanel(){this.panel=document.createElement("div"),this.panel.className="ui-password-panel ui-widget ui-state-highlight ui-corner-all",this.meter=document.createElement("div"),this.meter.className="ui-password-meter",this.info=document.createElement("div"),this.info.className="ui-password-info",this.info.textContent=this.promptLabel,this.panel.appendChild(this.meter),this.panel.appendChild(this.info),this.panel.style.minWidth=DomHandler.getOuterWidth(this.el.nativeElement)+"px",document.body.appendChild(this.panel)}onFocus(e){this.feedback&&(this.panel||this.createPanel(),this.panel.style.zIndex=String(++DomHandler.zindex),this.zone.runOutsideAngular(()=>{setTimeout(()=>{DomHandler.addClass(this.panel,"ui-password-panel-visible"),DomHandler.removeClass(this.panel,"ui-password-panel-hidden")},1),DomHandler.absolutePosition(this.panel,this.el.nativeElement)}))}onBlur(e){this.feedback&&(DomHandler.addClass(this.panel,"ui-password-panel-hidden"),DomHandler.removeClass(this.panel,"ui-password-panel-visible"),this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.ngOnDestroy()},150)}))}onKeyup(e){if(this.feedback){let s=e.target.value,o=null,a=null;if(0===s.length)o=this.promptLabel,a="0px 0px";else{var t=this.testStrength(s);t<30?(o=this.weakLabel,a="0px -10px"):t>=30&&t<80?(o=this.mediumLabel,a="0px -20px"):t>=80&&(o=this.strongLabel,a="0px -30px")}this.meter.style.backgroundPosition=a,this.info.textContent=o}}testStrength(e){let t,s=0;return t=e.match("[0-9]"),s+=25*this.normalize(t?t.length:.25,1),t=e.match("[a-zA-Z]"),s+=10*this.normalize(t?t.length:.5,3),t=e.match("[!@#$%^&*?_~.,;=]"),s+=35*this.normalize(t?t.length:1/6,1),t=e.match("[A-Z]"),s+=30*this.normalize(t?t.length:1/6,1),(s*=e.length/8)>100?100:s}normalize(e,t){return e-t<=0?e/t:1+e/(e+t/4)*.5}get disabled(){return this.el.nativeElement.disabled}ngOnDestroy(){this.panel&&(document.body.removeChild(this.panel),this.panel=null,this.meter=null,this.info=null)}};Password.ctorParameters=(()=>[{type:ElementRef},{type:NgZone}]),__decorate([Input()],Password.prototype,"promptLabel",void 0),__decorate([Input()],Password.prototype,"weakLabel",void 0),__decorate([Input()],Password.prototype,"mediumLabel",void 0),__decorate([Input()],Password.prototype,"strongLabel",void 0),__decorate([Input()],Password.prototype,"feedback",void 0),__decorate([Input()],Password.prototype,"showPassword",null),__decorate([HostListener("input",["$event"])],Password.prototype,"onInput",null),__decorate([HostListener("focus",["$event"])],Password.prototype,"onFocus",null),__decorate([HostListener("blur",["$event"])],Password.prototype,"onBlur",null),__decorate([HostListener("keyup",["$event"])],Password.prototype,"onKeyup",null);let PasswordModule=class{};PasswordModule=__decorate([NgModule({imports:[CommonModule],exports:[Password=__decorate([Directive({selector:"[pPassword]",host:{"[class.ui-inputtext]":"true","[class.ui-corner-all]":"true","[class.ui-state-default]":"true","[class.ui-widget]":"true","[class.ui-state-filled]":"filled"}})],Password)],declarations:[Password]})],PasswordModule);export{Password,PasswordModule};