import{Injectable,ElementRef,Input,Component,ChangeDetectionStrategy,NgModule}from"@angular/core";import{FormsModule}from"@angular/forms";import{CommonModule}from"@angular/common";import{DomHandler}from"primeng/dom";import{Subject}from"rxjs";var __decorate=this&&this.__decorate||function(e,t,n,o){var r,s=arguments.length,i=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(s<3?r(i):s>3?r(t,n,i):r(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};let TerminalService=class{constructor(){this.commandSource=new Subject,this.responseSource=new Subject,this.commandHandler=this.commandSource.asObservable(),this.responseHandler=this.responseSource.asObservable()}sendCommand(e){e&&this.commandSource.next(e)}sendResponse(e){e&&this.responseSource.next(e)}};TerminalService=__decorate([Injectable()],TerminalService);var __decorate$1=this&&this.__decorate||function(e,t,n,o){var r,s=arguments.length,i=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(s<3?r(i):s>3?r(t,n,i):r(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};let Terminal=class{constructor(e,t){this.el=e,this.terminalService=t,this.commands=[],this.subscription=t.responseHandler.subscribe(e=>{this.commands[this.commands.length-1].response=e,this.commandProcessed=!0})}ngAfterViewInit(){this.container=DomHandler.find(this.el.nativeElement,".ui-terminal")[0]}ngAfterViewChecked(){this.commandProcessed&&(this.container.scrollTop=this.container.scrollHeight,this.commandProcessed=!1)}set response(e){e&&(this.commands[this.commands.length-1].response=e,this.commandProcessed=!0)}handleCommand(e){13==e.keyCode&&(this.commands.push({text:this.command}),this.terminalService.sendCommand(this.command),this.command="")}focus(e){e.focus()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}};Terminal.ctorParameters=(()=>[{type:ElementRef},{type:TerminalService}]),__decorate$1([Input()],Terminal.prototype,"welcomeMessage",void 0),__decorate$1([Input()],Terminal.prototype,"prompt",void 0),__decorate$1([Input()],Terminal.prototype,"style",void 0),__decorate$1([Input()],Terminal.prototype,"styleClass",void 0),__decorate$1([Input()],Terminal.prototype,"response",null);let TerminalModule=class{};TerminalModule=__decorate$1([NgModule({imports:[CommonModule,FormsModule],exports:[Terminal=__decorate$1([Component({selector:"p-terminal",template:'\n        <div [ngClass]="\'ui-terminal ui-widget ui-widget-content ui-corner-all\'" [ngStyle]="style" [class]="styleClass" (click)="focus(in)">\n            <div *ngIf="welcomeMessage">{{welcomeMessage}}</div>\n            <div class="ui-terminal-content">\n                <div *ngFor="let command of commands">\n                    <span>{{prompt}}</span>\n                    <span class="ui-terminal-command">{{command.text}}</span>\n                    <div>{{command.response}}</div>\n                </div>\n            </div>\n            <div>\n                <span class="ui-terminal-content-prompt">{{prompt}}</span>\n                <input #in type="text" [(ngModel)]="command" class="ui-terminal-input" autocomplete="off" (keydown)="handleCommand($event)" autofocus>\n            </div>\n        </div>\n    ',changeDetection:ChangeDetectionStrategy.Default})],Terminal)],declarations:[Terminal]})],TerminalModule);export{Terminal,TerminalModule,TerminalService};