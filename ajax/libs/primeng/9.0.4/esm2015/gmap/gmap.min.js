var __decorate=this&&this.__decorate||function(e,t,a,o){var i,r=arguments.length,n=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var p=e.length-1;p>=0;p--)(i=e[p])&&(n=(r<3?i(n):r>3?i(t,a,n):i(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n};import{NgModule,Component,ElementRef,AfterViewChecked,DoCheck,Input,Output,EventEmitter,IterableDiffers,ChangeDetectorRef,NgZone,ChangeDetectionStrategy}from"@angular/core";import{CommonModule}from"@angular/common";let GMap=class{constructor(e,t,a,o){this.el=e,this.cd=a,this.zone=o,this.onMapClick=new EventEmitter,this.onOverlayClick=new EventEmitter,this.onOverlayDblClick=new EventEmitter,this.onOverlayDragStart=new EventEmitter,this.onOverlayDrag=new EventEmitter,this.onOverlayDragEnd=new EventEmitter,this.onMapReady=new EventEmitter,this.onMapDragEnd=new EventEmitter,this.onZoomChanged=new EventEmitter,this.differ=t.find([]).create(null)}ngAfterViewChecked(){!this.map&&this.el.nativeElement.offsetParent&&this.initialize()}initialize(){if(this.map=new google.maps.Map(this.el.nativeElement.children[0],this.options),this.onMapReady.emit({map:this.map}),this.overlays)for(let e of this.overlays)e.setMap(this.map),this.bindOverlayEvents(e);this.map.addListener("click",e=>{this.zone.run(()=>{this.onMapClick.emit(e)})}),this.map.addListener("dragend",e=>{this.zone.run(()=>{this.onMapDragEnd.emit(e)})}),this.map.addListener("zoom_changed",e=>{this.zone.run(()=>{this.onZoomChanged.emit(e)})})}bindOverlayEvents(e){e.addListener("click",t=>{this.zone.run(()=>{this.onOverlayClick.emit({originalEvent:t,overlay:e,map:this.map})})}),e.addListener("dblclick",t=>{this.zone.run(()=>{this.onOverlayDblClick.emit({originalEvent:t,overlay:e,map:this.map})})}),e.getDraggable()&&this.bindDragEvents(e)}ngDoCheck(){let e=this.differ.diff(this.overlays);e&&this.map&&(e.forEachRemovedItem(e=>{google.maps.event.clearInstanceListeners(e.item),e.item.setMap(null)}),e.forEachAddedItem(e=>{e.item.setMap(this.map),e.item.addListener("click",t=>{this.zone.run(()=>{this.onOverlayClick.emit({originalEvent:t,overlay:e.item,map:this.map})})}),e.item.getDraggable()&&this.bindDragEvents(e.item)}))}bindDragEvents(e){e.addListener("dragstart",t=>{this.zone.run(()=>{this.onOverlayDragStart.emit({originalEvent:t,overlay:e,map:this.map})})}),e.addListener("drag",t=>{this.zone.run(()=>{this.onOverlayDrag.emit({originalEvent:t,overlay:e,map:this.map})})}),e.addListener("dragend",t=>{this.zone.run(()=>{this.onOverlayDragEnd.emit({originalEvent:t,overlay:e,map:this.map})})})}getMap(){return this.map}};GMap.ctorParameters=(()=>[{type:ElementRef},{type:IterableDiffers},{type:ChangeDetectorRef},{type:NgZone}]),__decorate([Input()],GMap.prototype,"style",void 0),__decorate([Input()],GMap.prototype,"styleClass",void 0),__decorate([Input()],GMap.prototype,"options",void 0),__decorate([Input()],GMap.prototype,"overlays",void 0),__decorate([Output()],GMap.prototype,"onMapClick",void 0),__decorate([Output()],GMap.prototype,"onOverlayClick",void 0),__decorate([Output()],GMap.prototype,"onOverlayDblClick",void 0),__decorate([Output()],GMap.prototype,"onOverlayDragStart",void 0),__decorate([Output()],GMap.prototype,"onOverlayDrag",void 0),__decorate([Output()],GMap.prototype,"onOverlayDragEnd",void 0),__decorate([Output()],GMap.prototype,"onMapReady",void 0),__decorate([Output()],GMap.prototype,"onMapDragEnd",void 0),__decorate([Output()],GMap.prototype,"onZoomChanged",void 0);export{GMap};let GMapModule=class{};GMapModule=__decorate([NgModule({imports:[CommonModule],exports:[GMap=__decorate([Component({selector:"p-gmap",template:'<div [ngStyle]="style" [class]="styleClass"></div>',changeDetection:ChangeDetectionStrategy.Default})],GMap)],declarations:[GMap]})],GMapModule);export{GMapModule};