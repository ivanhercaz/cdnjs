import{EventEmitter,ElementRef,Renderer2,Input,ViewChild,Output,Component,ChangeDetectionStrategy,NgModule}from"@angular/core";import{trigger,state,style,transition,animate}from"@angular/animations";import{CommonModule}from"@angular/common";import{DomHandler}from"primeng/dom";var __decorate=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(o<3?s(a):o>3?s(t,i,a):s(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let Sidebar=class{constructor(e,t){this.el=e,this.renderer=t,this.position="left",this.blockScroll=!1,this.autoZIndex=!0,this.baseZIndex=0,this.modal=!0,this.dismissible=!0,this.showCloseIcon=!0,this.closeOnEscape=!0,this.onShow=new EventEmitter,this.onHide=new EventEmitter,this.visibleChange=new EventEmitter}ngAfterViewInit(){this.initialized=!0,this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.containerViewChild.nativeElement):DomHandler.appendChild(this.containerViewChild.nativeElement,this.appendTo)),this.visible&&this.show()}get visible(){return this._visible}set visible(e){this._visible=e,this.initialized&&this.containerViewChild&&this.containerViewChild.nativeElement&&(this._visible?this.show():this.preventVisibleChangePropagation?this.preventVisibleChangePropagation=!1:this.hide())}ngAfterViewChecked(){this.executePostDisplayActions&&(this.onShow.emit({}),this.executePostDisplayActions=!1)}show(){this.executePostDisplayActions=!0,this.autoZIndex&&(this.containerViewChild.nativeElement.style.zIndex=String(this.baseZIndex+ ++DomHandler.zindex)),this.modal&&this.enableModality()}hide(){this.onHide.emit({}),this.modal&&this.disableModality()}close(e){this.preventVisibleChangePropagation=!0,this.hide(),this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.mask||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(this.containerViewChild.nativeElement.style.zIndex)-1),DomHandler.addMultipleClasses(this.mask,"ui-widget-overlay ui-sidebar-mask"),this.dismissible&&(this.maskClickListener=this.renderer.listen(this.mask,"click",e=>{this.dismissible&&this.close(e)})),document.body.appendChild(this.mask),this.blockScroll&&DomHandler.addClass(document.body,"ui-overflow-hidden"))}disableModality(){this.mask&&(this.unbindMaskClickListener(),document.body.removeChild(this.mask),this.blockScroll&&DomHandler.removeClass(document.body,"ui-overflow-hidden"),this.mask=null)}onAnimationStart(e){switch(e.toState){case"visible":this.closeOnEscape&&this.bindDocumentEscapeListener();break;case"hidden":this.unbindGlobalListeners()}}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen("document","keydown",e=>{27==e.which&&parseInt(this.containerViewChild.nativeElement.style.zIndex)===DomHandler.zindex+this.baseZIndex&&this.close(e)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindGlobalListeners(){this.unbindMaskClickListener(),this.unbindDocumentEscapeListener()}ngOnDestroy(){this.initialized=!1,this.visible&&this.hide(),this.appendTo&&this.el.nativeElement.appendChild(this.containerViewChild.nativeElement),this.unbindGlobalListeners()}};Sidebar.ctorParameters=(()=>[{type:ElementRef},{type:Renderer2}]),__decorate([Input()],Sidebar.prototype,"position",void 0),__decorate([Input()],Sidebar.prototype,"fullScreen",void 0),__decorate([Input()],Sidebar.prototype,"appendTo",void 0),__decorate([Input()],Sidebar.prototype,"blockScroll",void 0),__decorate([Input()],Sidebar.prototype,"style",void 0),__decorate([Input()],Sidebar.prototype,"styleClass",void 0),__decorate([Input()],Sidebar.prototype,"ariaCloseLabel",void 0),__decorate([Input()],Sidebar.prototype,"autoZIndex",void 0),__decorate([Input()],Sidebar.prototype,"baseZIndex",void 0),__decorate([Input()],Sidebar.prototype,"modal",void 0),__decorate([Input()],Sidebar.prototype,"dismissible",void 0),__decorate([Input()],Sidebar.prototype,"showCloseIcon",void 0),__decorate([Input()],Sidebar.prototype,"closeOnEscape",void 0),__decorate([ViewChild("container")],Sidebar.prototype,"containerViewChild",void 0),__decorate([Output()],Sidebar.prototype,"onShow",void 0),__decorate([Output()],Sidebar.prototype,"onHide",void 0),__decorate([Output()],Sidebar.prototype,"visibleChange",void 0),__decorate([Input()],Sidebar.prototype,"visible",null);let SidebarModule=class{};SidebarModule=__decorate([NgModule({imports:[CommonModule],exports:[Sidebar=__decorate([Component({selector:"p-sidebar",template:'\n        <div #container [ngClass]="{\'ui-sidebar ui-widget ui-widget-content ui-shadow\':true, \'ui-sidebar-active\': visible, \n            \'ui-sidebar-left\': (position === \'left\'), \'ui-sidebar-right\': (position === \'right\'),\n            \'ui-sidebar-top\': (position === \'top\'), \'ui-sidebar-bottom\': (position === \'bottom\'), \n            \'ui-sidebar-full\': fullScreen}"\n            [@panelState]="visible ? \'visible\' : \'hidden\'" (@panelState.start)="onAnimationStart($event)" [ngStyle]="style" [class]="styleClass"  role="complementary" [attr.aria-modal]="modal">\n            <a [ngClass]="{\'ui-sidebar-close ui-corner-all\':true}" *ngIf="showCloseIcon" tabindex="0" role="button" (click)="close($event)" (keydown.enter)="close($event)" [attr.aria-label]="ariaCloseLabel">\n                <span class="pi pi-times"></span>\n            </a>\n            <ng-content></ng-content>\n        </div>\n    ',animations:[trigger("panelState",[state("hidden",style({opacity:0})),state("visible",style({opacity:1})),transition("visible => hidden",animate("300ms ease-in")),transition("hidden => visible",animate("300ms ease-out"))])],changeDetection:ChangeDetectionStrategy.Default})],Sidebar)],declarations:[Sidebar]})],SidebarModule);export{Sidebar,SidebarModule};