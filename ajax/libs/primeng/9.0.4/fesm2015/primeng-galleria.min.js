import{EventEmitter,ElementRef,Input,Output,Component,ChangeDetectionStrategy,NgModule}from"@angular/core";import{CommonModule}from"@angular/common";import{DomHandler}from"primeng/dom";var __decorate=this&&this.__decorate||function(e,t,i,a){var l,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,a);else for(var n=e.length-1;n>=0;n--)(l=e[n])&&(r=(s<3?l(r):s>3?l(t,i,r):l(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};let Galleria=class{constructor(e){this.el=e,this.panelWidth=600,this.panelHeight=400,this.frameWidth=60,this.frameHeight=40,this.activeIndex=0,this.showFilmstrip=!0,this.autoPlay=!0,this.transitionInterval=4e3,this.showCaption=!0,this.effectDuration=500,this.onImageClicked=new EventEmitter,this.onImageChange=new EventEmitter,this.stripLeft=0}ngAfterViewChecked(){this.imagesChanged&&(this.stopSlideshow(),Promise.resolve(null).then(()=>{this.render(),this.imagesChanged=!1}))}get images(){return this._images}set images(e){this._images=e,this.imagesChanged=!0,this.initialized&&(this.activeIndex=0)}ngAfterViewInit(){this.container=this.el.nativeElement.children[0],this.panelWrapper=DomHandler.findSingle(this.el.nativeElement,"ul.ui-galleria-panel-wrapper"),this.initialized=!0,this.showFilmstrip&&(this.stripWrapper=DomHandler.findSingle(this.container,"div.ui-galleria-filmstrip-wrapper"),this.strip=DomHandler.findSingle(this.stripWrapper,"ul.ui-galleria-filmstrip")),this.images&&this.images.length&&this.render()}render(){this.panels=DomHandler.find(this.panelWrapper,"li.ui-galleria-panel"),this.showFilmstrip&&(this.frames=DomHandler.find(this.strip,"li.ui-galleria-frame"),this.stripWrapper.style.width=DomHandler.width(this.panelWrapper)-50+"px",this.stripWrapper.style.height=this.frameHeight+"px"),this.showCaption&&(this.caption=DomHandler.findSingle(this.container,"div.ui-galleria-caption"),this.caption.style.bottom=this.showFilmstrip?DomHandler.getOuterHeight(this.stripWrapper,!0)+"px":"0px",this.caption.style.width=DomHandler.width(this.panelWrapper)+"px"),this.autoPlay&&this.startSlideshow(),this.container.style.visibility="visible"}startSlideshow(){this.interval=setInterval(()=>{this.next()},this.transitionInterval),this.slideshowActive=!0}stopSlideshow(){this.interval&&clearInterval(this.interval),this.slideshowActive=!1}clickNavRight(){this.slideshowActive&&this.stopSlideshow(),this.next()}clickNavLeft(){this.slideshowActive&&this.stopSlideshow(),this.prev()}frameClick(e){this.slideshowActive&&this.stopSlideshow(),this.select(DomHandler.index(e),!1)}prev(){0!==this.activeIndex&&this.select(this.activeIndex-1,!0)}next(){this.activeIndex!==this.panels.length-1?this.select(this.activeIndex+1,!0):(this.select(0,!1),this.stripLeft=0)}select(e,t){if(e!==this.activeIndex){this.panels[this.activeIndex];let i=this.panels[e];if(DomHandler.fadeIn(i,this.effectDuration),this.showFilmstrip){this.frames[this.activeIndex];let i=this.frames[e];if(void 0===t||!0===t){let e=i.offsetLeft,t=this.frameWidth+parseInt(getComputedStyle(i)["margin-right"],10),a=e+this.strip.offsetLeft;a+this.frameWidth>DomHandler.width(this.stripWrapper)?this.stripLeft-=t:a<0&&(this.stripLeft+=t)}}this.activeIndex=e,this.onImageChange.emit({index:e})}}clickImage(e,t,i){this.onImageClicked.emit({originalEvent:e,image:t,index:i})}ngOnDestroy(){this.stopSlideshow()}};Galleria.ctorParameters=(()=>[{type:ElementRef}]),__decorate([Input()],Galleria.prototype,"style",void 0),__decorate([Input()],Galleria.prototype,"styleClass",void 0),__decorate([Input()],Galleria.prototype,"panelWidth",void 0),__decorate([Input()],Galleria.prototype,"panelHeight",void 0),__decorate([Input()],Galleria.prototype,"frameWidth",void 0),__decorate([Input()],Galleria.prototype,"frameHeight",void 0),__decorate([Input()],Galleria.prototype,"activeIndex",void 0),__decorate([Input()],Galleria.prototype,"showFilmstrip",void 0),__decorate([Input()],Galleria.prototype,"autoPlay",void 0),__decorate([Input()],Galleria.prototype,"transitionInterval",void 0),__decorate([Input()],Galleria.prototype,"showCaption",void 0),__decorate([Input()],Galleria.prototype,"effectDuration",void 0),__decorate([Output()],Galleria.prototype,"onImageClicked",void 0),__decorate([Output()],Galleria.prototype,"onImageChange",void 0),__decorate([Input()],Galleria.prototype,"images",null);let GalleriaModule=class{};GalleriaModule=__decorate([NgModule({imports:[CommonModule],exports:[Galleria=__decorate([Component({selector:"p-galleria",template:'\n        <div [ngClass]="{\'ui-galleria ui-widget ui-widget-content ui-corner-all\':true}" [ngStyle]="style" [class]="styleClass" [style.width.px]="panelWidth">\n            <ul class="ui-galleria-panel-wrapper" [style.width.px]="panelWidth" [style.height.px]="panelHeight">\n                <li *ngFor="let image of images;let i=index" class="ui-galleria-panel" [ngClass]="{\'ui-helper-hidden\':i!=activeIndex}"\n                    [style.width.px]="panelWidth" [style.height.px]="panelHeight" (click)="clickImage($event,image,i)">\n                    <img class="ui-panel-images" [src]="image.source" [alt]="image.alt" [title]="image.title"/>\n                </li>\n            </ul>\n            <div [ngClass]="{\'ui-galleria-filmstrip-wrapper\':true}" *ngIf="showFilmstrip">\n                <ul class="ui-galleria-filmstrip" style="transition:left 1s" [style.left.px]="stripLeft">\n                    <li #frame *ngFor="let image of images;let i=index" [ngClass]="{\'ui-galleria-frame-active\':i==activeIndex}" class="ui-galleria-frame" (click)="frameClick(frame)"\n                        [style.width.px]="frameWidth" [style.height.px]="frameHeight" [style.transition]="\'opacity 0.75s ease\'">\n                        <div class="ui-galleria-frame-content">\n                            <img [src]="image.source" [alt]="image.alt" [title]="image.title" class="ui-galleria-frame-image"\n                                [style.width.px]="frameWidth" [style.height.px]="frameHeight">\n                        </div>\n                    </li>\n                </ul>\n            </div>\n            <div class="ui-galleria-nav-prev pi pi-fw pi-chevron-left" (click)="clickNavLeft()" [style.bottom.px]="frameHeight/2" *ngIf="activeIndex !== 0"></div>\n            <div class="ui-galleria-nav-next pi pi-fw pi-chevron-right" (click)="clickNavRight()" [style.bottom.px]="frameHeight/2"></div>\n            <div class="ui-galleria-caption" *ngIf="showCaption&&images" style="display:block">\n                <h4>{{images[activeIndex]?.title}}</h4><p>{{images[activeIndex]?.alt}}</p>\n            </div>\n        </div>\n    ',changeDetection:ChangeDetectionStrategy.Default})],Galleria)],declarations:[Galleria]})],GalleriaModule);export{Galleria,GalleriaModule};