import{EventEmitter,ElementRef,Input,Output,Component,NgModule}from"@angular/core";import{CommonModule}from"@angular/common";import{DomHandler}from"primeng/dom";var __decorate=this&&this.__decorate||function(t,e,i,a){var n,s=arguments.length,r=s<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,a);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},Galleria=function(){function t(t){this.el=t,this.panelWidth=600,this.panelHeight=400,this.frameWidth=60,this.frameHeight=40,this.activeIndex=0,this.showFilmstrip=!0,this.autoPlay=!0,this.transitionInterval=4e3,this.showCaption=!0,this.effectDuration=500,this.onImageClicked=new EventEmitter,this.onImageChange=new EventEmitter,this.stripLeft=0}return t.prototype.ngAfterViewChecked=function(){this.imagesChanged&&(this.stopSlideshow(),this.render(),this.imagesChanged=!1)},Object.defineProperty(t.prototype,"images",{get:function(){return this._images},set:function(t){this._images=t,this.imagesChanged=!0,this.initialized&&(this.activeIndex=0)},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){this.container=this.el.nativeElement.children[0],this.panelWrapper=DomHandler.findSingle(this.el.nativeElement,"ul.ui-galleria-panel-wrapper"),this.initialized=!0,this.showFilmstrip&&(this.stripWrapper=DomHandler.findSingle(this.container,"div.ui-galleria-filmstrip-wrapper"),this.strip=DomHandler.findSingle(this.stripWrapper,"ul.ui-galleria-filmstrip")),this.images&&this.images.length&&this.render()},t.prototype.render=function(){this.panels=DomHandler.find(this.panelWrapper,"li.ui-galleria-panel"),this.showFilmstrip&&(this.frames=DomHandler.find(this.strip,"li.ui-galleria-frame"),this.stripWrapper.style.width=DomHandler.width(this.panelWrapper)-50+"px",this.stripWrapper.style.height=this.frameHeight+"px"),this.showCaption&&(this.caption=DomHandler.findSingle(this.container,"div.ui-galleria-caption"),this.caption.style.bottom=this.showFilmstrip?DomHandler.getOuterHeight(this.stripWrapper,!0)+"px":"0px",this.caption.style.width=DomHandler.width(this.panelWrapper)+"px"),this.autoPlay&&this.startSlideshow(),this.container.style.visibility="visible"},t.prototype.startSlideshow=function(){var t=this;this.interval=setInterval(function(){t.next()},this.transitionInterval),this.slideshowActive=!0},t.prototype.stopSlideshow=function(){this.interval&&clearInterval(this.interval),this.slideshowActive=!1},t.prototype.clickNavRight=function(){this.slideshowActive&&this.stopSlideshow(),this.next()},t.prototype.clickNavLeft=function(){this.slideshowActive&&this.stopSlideshow(),this.prev()},t.prototype.frameClick=function(t){this.slideshowActive&&this.stopSlideshow(),this.select(DomHandler.index(t),!1)},t.prototype.prev=function(){0!==this.activeIndex&&this.select(this.activeIndex-1,!0)},t.prototype.next=function(){this.activeIndex!==this.panels.length-1?this.select(this.activeIndex+1,!0):(this.select(0,!1),this.stripLeft=0)},t.prototype.select=function(t,e){if(t!==this.activeIndex){this.panels[this.activeIndex];var i=this.panels[t];if(DomHandler.fadeIn(i,this.effectDuration),this.showFilmstrip){this.frames[this.activeIndex];var a=this.frames[t];if(void 0===e||!0===e){var n=a.offsetLeft,s=this.frameWidth+parseInt(getComputedStyle(a)["margin-right"],10),r=n+this.strip.offsetLeft;r+this.frameWidth>DomHandler.width(this.stripWrapper)?this.stripLeft-=s:r<0&&(this.stripLeft+=s)}}this.activeIndex=t,this.onImageChange.emit({index:t})}},t.prototype.clickImage=function(t,e,i){this.onImageClicked.emit({originalEvent:t,image:e,index:i})},t.prototype.ngOnDestroy=function(){this.stopSlideshow()},t.ctorParameters=function(){return[{type:ElementRef}]},__decorate([Input()],t.prototype,"style",void 0),__decorate([Input()],t.prototype,"styleClass",void 0),__decorate([Input()],t.prototype,"panelWidth",void 0),__decorate([Input()],t.prototype,"panelHeight",void 0),__decorate([Input()],t.prototype,"frameWidth",void 0),__decorate([Input()],t.prototype,"frameHeight",void 0),__decorate([Input()],t.prototype,"activeIndex",void 0),__decorate([Input()],t.prototype,"showFilmstrip",void 0),__decorate([Input()],t.prototype,"autoPlay",void 0),__decorate([Input()],t.prototype,"transitionInterval",void 0),__decorate([Input()],t.prototype,"showCaption",void 0),__decorate([Input()],t.prototype,"effectDuration",void 0),__decorate([Output()],t.prototype,"onImageClicked",void 0),__decorate([Output()],t.prototype,"onImageChange",void 0),__decorate([Input()],t.prototype,"images",null),t=__decorate([Component({selector:"p-galleria",template:'\n        <div [ngClass]="{\'ui-galleria ui-widget ui-widget-content ui-corner-all\':true}" [ngStyle]="style" [class]="styleClass" [style.width.px]="panelWidth">\n            <ul class="ui-galleria-panel-wrapper" [style.width.px]="panelWidth" [style.height.px]="panelHeight">\n                <li *ngFor="let image of images;let i=index" class="ui-galleria-panel" [ngClass]="{\'ui-helper-hidden\':i!=activeIndex}"\n                    [style.width.px]="panelWidth" [style.height.px]="panelHeight" (click)="clickImage($event,image,i)">\n                    <img class="ui-panel-images" [src]="image.source" [alt]="image.alt" [title]="image.title"/>\n                </li>\n            </ul>\n            <div [ngClass]="{\'ui-galleria-filmstrip-wrapper\':true}" *ngIf="showFilmstrip">\n                <ul class="ui-galleria-filmstrip" style="transition:left 1s" [style.left.px]="stripLeft">\n                    <li #frame *ngFor="let image of images;let i=index" [ngClass]="{\'ui-galleria-frame-active\':i==activeIndex}" class="ui-galleria-frame" (click)="frameClick(frame)"\n                        [style.width.px]="frameWidth" [style.height.px]="frameHeight" [style.transition]="\'opacity 0.75s ease\'">\n                        <div class="ui-galleria-frame-content">\n                            <img [src]="image.source" [alt]="image.alt" [title]="image.title" class="ui-galleria-frame-image"\n                                [style.width.px]="frameWidth" [style.height.px]="frameHeight">\n                        </div>\n                    </li>\n                </ul>\n            </div>\n            <div class="ui-galleria-nav-prev pi pi-fw pi-chevron-left" (click)="clickNavLeft()" [style.bottom.px]="frameHeight/2" *ngIf="activeIndex !== 0"></div>\n            <div class="ui-galleria-nav-next pi pi-fw pi-chevron-right" (click)="clickNavRight()" [style.bottom.px]="frameHeight/2"></div>\n            <div class="ui-galleria-caption" *ngIf="showCaption&&images" style="display:block">\n                <h4>{{images[activeIndex]?.title}}</h4><p>{{images[activeIndex]?.alt}}</p>\n            </div>\n        </div>\n    '})],t)}(),GalleriaModule=function(){function t(){}return t=__decorate([NgModule({imports:[CommonModule],exports:[Galleria],declarations:[Galleria]})],t)}();export{Galleria,GalleriaModule};