!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e()}(function(){"use strict";$.extend($.jgrid,{stringify:function(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?t.toString():t})},parseFunc:function(str){return JSON.parse(str,function(key,value){if("string"!=typeof value||-1===value.indexOf("function"))return value;var sv=value.split(" ");return sv[0]=$.trim(sv[0].toLowerCase()),0===sv[0].indexOf("function")&&"}"===value.trim().slice(-1)?eval("("+value+")"):value})},encode:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(e,t){function c(e,t){return"#text"===e?s.encode?d.encode(t):t:"function"==typeof t?"<"+e+"><![CDATA["+t+"]]></"+e+">\n":""===t?"<"+e+">__EMPTY_STRING_</"+e+">\n":"<"+e+">"+(s.encode?d.encode(t):t)+"</"+e+">\n"}var s=$.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},t||{}),d=this,f=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];void 0===r||null==r?n[n.length]="<"+e+" />":"object"==typeof r&&r.constructor==Array?n[n.length]=f(e,r):n[n.length]=("object"==typeof r?u:c)(e,r)}return n.length||(n[0]="<"+e+">__EMPTY_ARRAY_</"+e+">\n"),n.join("")},u=function(e,t){var n=[],o=[];for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];r.charAt(0)!==s.attr_prefix?null==a?n[n.length]="<"+r+" />":"object"==typeof a&&a.constructor===Array?n[n.length]=f(r,a):n[n.length]=("object"==typeof a?u:c)(r,a):o[o.length]=" "+r.substring(1)+'="'+(s.encode?d.encode(a):a)+'"'}var i=o.join(""),l=n.join("");return null==e||(l=0<n.length?l.match(/\n/)?"<"+e+i+">\n"+l+"</"+e+">\n":"<"+e+i+">"+l+"</"+e+">\n":"<"+e+i+" />\n"),l},n=u(null,e);return s.xmlDecl+n},xmlToJSON:function(root,options){var o=$.extend({force_array:[],attr_prefix:"-"},options||{});if(root){var __force_array={};if(o.force_array)for(var i=0;i<o.force_array.length;i++)__force_array[o.force_array[i]]=1;"string"==typeof root&&(root=$.parseXML(root)),root.documentElement&&(root=root.documentElement);var addNode=function(hash,key,cnts,val){if("string"==typeof val)if(-1!==val.indexOf("function"))val=eval("("+val+")");else switch(val){case"__EMPTY_ARRAY_":val=[];break;case"__EMPTY_STRING_":val="";break;case"false":val=!1;break;case"true":val=!0}__force_array[key]?(1===cnts&&(hash[key]=[]),hash[key][hash[key].length]=val):1===cnts?hash[key]=val:2===cnts?hash[key]=[hash[key],val]:hash[key][hash[key].length]=val},parseElement=function(e){if(7!==e.nodeType){if(3===e.nodeType||4===e.nodeType){if(null==e.nodeValue.match(/[^\x00-\x20]/))return;return e.nodeValue}var t,n,r,a,i={};if(e.attributes&&e.attributes.length)for(t={},n=0;n<e.attributes.length;n++)"string"==typeof(r=e.attributes[n].nodeName)&&(a=e.attributes[n].nodeValue)&&(void 0===i[r=o.attr_prefix+r]&&(i[r]=0),i[r]++,addNode(t,r,i[r],a));if(e.childNodes&&e.childNodes.length){var l=!0;for(t&&(l=!1),n=0;n<e.childNodes.length&&l;n++){var c=e.childNodes[n].nodeType;3!==c&&4!==c&&(l=!1)}if(l)for(t=t||"",n=0;n<e.childNodes.length;n++)t+=e.childNodes[n].nodeValue;else for(t=t||{},n=0;n<e.childNodes.length;n++)"string"==typeof(r=e.childNodes[n].nodeName)&&(a=parseElement(e.childNodes[n]))&&(void 0===i[r]&&(i[r]=0),i[r]++,addNode(t,r,i[r],a))}return t}},json=parseElement(root);if(__force_array[root.nodeName]&&(json=[json]),11!==root.nodeType){var tmp={};tmp[root.nodeName]=json,json=tmp}return json}},saveAs:function(e,t,n){n=$.extend(!0,{type:"plain/text;charset=utf-8"},n||{});var o,r,a=[];t=null==t||""===t?"jqGridFile.txt":t,$.isArray(e)?a=e:a[0]=e;try{o=new File(a,t,n)}catch(e){o=new Blob(a,n)}if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(o,t);else{r=URL.createObjectURL(o);var i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(r)},0)}}})});