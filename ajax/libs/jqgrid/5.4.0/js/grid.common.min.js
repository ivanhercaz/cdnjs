!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./jqModal","./jqDnR"],e):e(jQuery)}(function(C){"use strict";C.extend(C.jgrid,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal:function(e,t){var i=!(!(t=C.extend({jqm:!0,gb:"",removemodal:!1,formprop:!1,form:""},t||{})).gb||"string"!=typeof t.gb||"#gbox_"!==t.gb.substr(0,6))&&C("#"+t.gb.substr(6))[0];if(t.onClose){var a=i?t.onClose.call(i,e):t.onClose(e);if("boolean"==typeof a&&!a)return}if(t.formprop&&i&&t.form){var o,r,n=C(e)[0].style.height,l=C(e)[0].style.width;-1<n.indexOf("px")&&(n=parseFloat(n)),-1<l.indexOf("px")&&(l=parseFloat(l)),"edit"===t.form?(o="#"+C.jgrid.jqID("FrmGrid_"+t.gb.substr(6)),r="formProp"):"view"===t.form&&(o="#"+C.jgrid.jqID("ViewGrid_"+t.gb.substr(6)),r="viewProp"),C(i).data(r,{top:parseFloat(C(e).css("top")),left:parseFloat(C(e).css("left")),width:l,height:n,dataheight:C(o).height(),datawidth:C(o).width()})}if(C.fn.jqm&&!0===t.jqm)C(e).attr("aria-hidden","true").jqmHide();else{if(""!==t.gb)try{C(".jqgrid-overlay:first",t.gb).hide()}catch(e){}try{C(".jqgrid-overlay-modal").hide()}catch(e){}C(e).hide().attr("aria-hidden","true")}t.removemodal&&C(e).remove()},findPos:function(e){var t=C(e).offset();return[t.left,t.top]},createModal:function(i,e,a,t,o,r,n){a=C.extend(!0,{},C.jgrid.jqModal||{},a);var l=this,d="rtl"===C(a.gbox).attr("dir"),s=C.jgrid.styleUI[a.styleUI||"jQueryUI"].modal,u=C.jgrid.styleUI[a.styleUI||"jQueryUI"].common,c=document.createElement("div");n=C.extend({},n||{}),c.className="ui-jqdialog "+s.modal,c.id=i.themodal;var f=document.createElement("div");f.className="ui-jqdialog-titlebar "+s.header,f.id=i.modalhead,C(f).append("<span class='ui-jqdialog-title'>"+a.caption+"</span>");var m=C("<a class='ui-jqdialog-titlebar-close "+u.cornerall+"'></a>").hover(function(){m.addClass(u.hover)},function(){m.removeClass(u.hover)}).append("<span class='"+u.icon_base+" "+s.icon_close+"'></span>");C(f).append(m),d?(c.dir="rtl",C(".ui-jqdialog-title",f).css("float","right"),C(".ui-jqdialog-titlebar-close",f).css("left","0.3em")):(c.dir="ltr",C(".ui-jqdialog-title",f).css("float","left"),C(".ui-jqdialog-titlebar-close",f).css("right","0.3em"));var p=document.createElement("div");C(p).addClass("ui-jqdialog-content "+s.content).attr("id",i.modalcontent),C(p).append(e),c.appendChild(p),C(c).prepend(f),!0===r?C("body").append(c):"string"==typeof r?C(r).append(c):C(c).insertBefore(t),C(c).css(n),void 0===a.jqModal&&(a.jqModal=!0);var g={};if(C.fn.jqm&&!0===a.jqModal){if(0===a.left&&0===a.top&&a.overlay){var h;h=C.jgrid.findPos(o),a.left=h[0]+4,a.top=h[1]+4}g.top=a.top+"px",g.left=a.left}else 0===a.left&&0===a.top||(g.left=a.left,g.top=a.top+"px");if(C("a.ui-jqdialog-titlebar-close",f).click(function(){var e=C("#"+C.jgrid.jqID(i.themodal)).data("onClose")||a.onClose,t=C("#"+C.jgrid.jqID(i.themodal)).data("gbox")||a.gbox;return l.hideModal("#"+C.jgrid.jqID(i.themodal),{gb:t,jqm:a.jqModal,onClose:e,removemodal:a.removemodal||!1,formprop:!a.recreateForm||!1,form:a.form||""}),!1}),0!==a.width&&a.width||(a.width=300),0!==a.height&&a.height||(a.height=200),!a.zIndex){var v=C(t).parents("*[role=dialog]").filter(":first").css("z-index");a.zIndex=v?parseInt(v,10)+2:950}var F=0;if(d&&g.left&&!r&&(F=C(a.gbox).width()-(isNaN(a.width)?0:parseInt(a.width,10))-8,g.left=parseInt(g.left,10)+parseInt(F,10)),g.left&&(g.left+="px"),C(c).css(C.extend({width:isNaN(a.width)?"auto":a.width+"px",height:isNaN(a.height)?"auto":a.height+"px",zIndex:a.zIndex,overflow:"hidden"},g)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":i.modalhead,"aria-hidden":"true"}),void 0===a.drag&&(a.drag=!0),void 0===a.resize&&(a.resize=!0),a.drag)if(C(f).css("cursor","move"),C.fn.tinyDraggable)C(c).tinyDraggable({handle:"#"+C.jgrid.jqID(f.id)});else try{C(c).draggable({handle:C("#"+C.jgrid.jqID(f.id))})}catch(e){}if(a.resize)if(C.fn.jqResize)C(c).append("<div class='jqResize "+s.resizable+" "+u.icon_base+" "+s.icon_resizable+"'></div>"),C("#"+C.jgrid.jqID(i.themodal)).jqResize(".jqResize",!!i.scrollelm&&"#"+C.jgrid.jqID(i.scrollelm));else try{C(c).resizable({handles:"se, sw",alsoResize:!!i.scrollelm&&"#"+C.jgrid.jqID(i.scrollelm)})}catch(e){}!0===a.closeOnEscape&&C(c).keydown(function(e){if(27===e.which){var t=C("#"+C.jgrid.jqID(i.themodal)).data("onClose")||a.onClose;l.hideModal("#"+C.jgrid.jqID(i.themodal),{gb:a.gbox,jqm:a.jqModal,onClose:t,removemodal:a.removemodal||!1,formprop:!a.recreateForm||!1,form:a.form||""})}})},viewModal:function(e,t){var i="";if((t=C.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:C.jgrid.showModal,onHide:C.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},t||{})).gbox){var a=C("#"+t.gbox.substring(6))[0];try{i=C(a).jqGrid("getStyleUI",a.p.styleUI+".common","overlay",!1,"jqgrid-overlay-modal"),t.overlayClass=C(a).jqGrid("getStyleUI",a.p.styleUI+".common","overlay",!0)}catch(e){}}if(void 0===t.focusField&&(t.focusField=0),"number"==typeof t.focusField&&0<=t.focusField?t.focusField=parseInt(t.focusField,10):"boolean"!=typeof t.focusField||t.focusField?t.focusField=0:t.focusField=!1,C.fn.jqm&&!0===t.jqm)t.jqM?C(e).attr("aria-hidden","false").jqm(t).jqmShow():C(e).attr("aria-hidden","false").jqmShow();else{if(""!==t.gbox){var o=parseInt(C(e).css("z-index"))-1;t.modal?(C(".jqgrid-overlay-modal")[0]||C("body").prepend("<div "+i+"></div>"),C(".jqgrid-overlay-modal").css("z-index",o).show()):(C(".jqgrid-overlay:first",t.gbox).css("z-index",o).show(),C(e).data("gbox",t.gbox))}if(C(e).show().attr("aria-hidden","false"),0<=t.focusField)try{C(":input:visible",e)[t.focusField].focus()}catch(e){}}},info_dialog:function(e,t,i,a){var o={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};C.extend(!0,o,C.jgrid.jqModal||{},{caption:"<b>"+e+"</b>"},a||{});var r=o.jqModal,n=this,l=C.jgrid.styleUI[o.styleUI||"jQueryUI"].modal,d=C.jgrid.styleUI[o.styleUI||"jQueryUI"].common;C.fn.jqm&&!r&&(r=!1);var s,u="";if(0<o.buttons.length)for(s=0;s<o.buttons.length;s++)void 0===o.buttons[s].id&&(o.buttons[s].id="info_button_"+s),u+="<a id='"+o.buttons[s].id+"' class='fm-button "+d.button+"'>"+o.buttons[s].text+"</a>";var c="<div id='info_id'>";c+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+(isNaN(o.dataheight)?o.dataheight:o.dataheight+"px")+";"+("text-align:"+o.align+";")+"'>"+t+"</div>",c+=i?"<div class='"+l.content+"' style='text-align:"+o.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button "+d.button+"'>"+i+"</a>"+u+"</div>":""!==u?"<div class='"+l.content+"' style='text-align:"+o.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+u+"</div>":"",c+="</div>";try{"false"===C("#info_dialog").attr("aria-hidden")&&C.jgrid.hideModal("#info_dialog",{jqm:r}),C("#info_dialog").remove()}catch(e){}var f=C(".ui-jqgrid").css("font-size")||"11px";C.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},c,o,"","",!0,{"font-size":f}),u&&C.each(o.buttons,function(e){C("#"+C.jgrid.jqID(this.id),"#info_id").on("click",function(){return o.buttons[e].onClick.call(C("#info_dialog")),!1})}),C("#closedialog","#info_id").on("click",function(){return n.hideModal("#info_dialog",{jqm:r,onClose:C("#info_dialog").data("onClose")||o.onClose,gb:C("#info_dialog").data("gbox")||o.gbox}),!1}),C(".fm-button","#info_dialog").hover(function(){C(this).addClass(d.hover)},function(){C(this).removeClass(d.hover)}),C.isFunction(o.beforeOpen)&&o.beforeOpen(),C.jgrid.viewModal("#info_dialog",{onHide:function(e){e.w.hide().remove(),e.o&&e.o.remove()},modal:o.modal,jqm:r}),C.isFunction(o.afterOpen)&&o.afterOpen();try{C("#info_dialog").focus()}catch(e){}},bindEv:function(e,t){C.isFunction(t.dataInit)&&t.dataInit.call(this,e,t),t.dataEvents&&C.each(t.dataEvents,function(){void 0!==this.data?C(e).on(this.type,this.data,this.fn):C(e).on(this.type,this.fn)})},createEl:function(e,t,i,a,o){var r="",m=this;function p(i,e,t){var a=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","oper"];a=a.concat(["cacheUrlData","delimiter","separator"]),void 0!==t&&C.isArray(t)&&C.merge(a,t),C.each(e,function(e,t){-1===C.inArray(e,a)&&C(i).attr(e,t)}),e.hasOwnProperty("id")||C(i).attr("id",C.jgrid.randId())}switch(e){case"textarea":r=document.createElement("textarea"),a?t.cols||C(r).css({width:"98%"}):t.cols||(t.cols=20),t.rows||(t.rows=2),("&nbsp;"===i||"&#160;"===i||1===i.length&&160===i.charCodeAt(0))&&(i=""),r.value=i,C(r).attr({role:"textbox",multiline:"true"}),p(r,t);break;case"checkbox":if((r=document.createElement("input")).type="checkbox",t.value){var n=t.value.split(":");i===n[0]&&(r.checked=!0,r.defaultChecked=!0),r.value=n[0],C(r).attr("offval",n[1])}else{var l=(i+"").toLowerCase();l.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==l?(r.checked=!0,r.defaultChecked=!0,r.value=i):r.value="on",C(r).attr("offval","off")}C(r).attr("role","checkbox"),p(r,t,["value"]);break;case"select":(r=document.createElement("select")).setAttribute("role","select");var d,s=[];if(!0===t.multiple?(d=!0,r.multiple="multiple",C(r).attr("aria-multiselectable","true")):d=!1,null!=t.dataUrl){var u=null,g=t.postData||o.postData;try{u=t.rowId}catch(e){}m.p&&m.p.idPrefix&&(u=C.jgrid.stripPref(m.p.idPrefix,u)),C.ajax(C.extend({url:C.isFunction(t.dataUrl)?t.dataUrl.call(m,u,i,String(t.name)):t.dataUrl,type:"GET",dataType:"html",data:C.isFunction(g)?g.call(m,u,i,String(t.name)):g,context:{elem:r,options:t,vl:i},success:function(e){var t,i=[],a=this.elem,o=this.vl,r=C.extend({},this.options),n=!0===r.multiple,l=!0===r.cacheUrlData,d="",s=[],u=C.isFunction(r.buildSelect)?r.buildSelect.call(m,e):e;if("string"==typeof u&&(u=C(C.trim(u)).html()),u){if(C(a).append(u),p(a,r,g?["postData"]:void 0),void 0===r.size&&(r.size=n?3:1),n?(i=o.split(","),i=C.map(i,function(e){return C.trim(e)})):i[0]=C.trim(o),C("option",a).each(function(e){t=C(this).text(),o=C(this).val(),l&&(d+=(0!==e?";":"")+o+":"+t),0===e&&a.multiple&&(this.selected=!1),C(this).attr("role","option"),(-1<C.inArray(C.trim(t),i)||-1<C.inArray(C.trim(o),i))&&(this.selected="selected",s.push(o))}),r.hasOwnProperty("checkUpdate")&&r.checkUpdate&&(m.p.savedData[r.name]=s.join(",")),l)if("edit"===r.oper)C(m).jqGrid("setColProp",r.name,{editoptions:{buildSelect:null,dataUrl:null,value:d}});else if("search"===r.oper)C(m).jqGrid("setColProp",r.name,{searchoptions:{dataUrl:null,value:d}});else if("filter"===r.oper&&C("#fbox_"+m.p.id)[0].p){var c,f=C("#fbox_"+m.p.id)[0].p.columns;C.each(f,function(e){if(c=this.index||this.name,r.name===c)return this.searchoptions.dataUrl=null,this.searchoptions.value=d,!1})}C(m).triggerHandler("jqGridAddEditAfterSelectUrlComplete",[a])}}},o||{}))}else if(t.value){var c;void 0===t.size&&(t.size=d?3:1),d&&(s=i.split(","),s=C.map(s,function(e){return C.trim(e)})),"function"==typeof t.value&&(t.value=t.value());var f,h,v,F,b,j,y=void 0===t.separator?":":t.separator,x=void 0===t.delimiter?";":t.delimiter;if("string"==typeof t.value)for(f=t.value.split(x),c=0;c<f.length;c++)2<(h=f[c].split(y)).length&&(h[1]=C.map(h,function(e,t){if(0<t)return e}).join(y)),(v=document.createElement("option")).setAttribute("role","option"),v.value=h[0],v.innerHTML=h[1],r.appendChild(v),d||C.trim(h[0])!==C.trim(i)&&C.trim(h[1])!==C.trim(i)||(v.selected="selected"),d&&(-1<C.inArray(C.trim(h[1]),s)||-1<C.inArray(C.trim(h[0]),s))&&(v.selected="selected");else if("[object Array]"===Object.prototype.toString.call(t.value))for(F=t.value,c=0;c<F.length;c++)2===F[c].length&&(b=F[c][0],j=F[c][1],(v=document.createElement("option")).setAttribute("role","option"),v.value=b,v.innerHTML=j,r.appendChild(v),d||C.trim(b)!==C.trim(i)&&C.trim(j)!==C.trim(i)||(v.selected="selected"),d&&(-1<C.inArray(C.trim(j),s)||-1<C.inArray(C.trim(b),s))&&(v.selected="selected"));else if("object"==typeof t.value)for(b in F=t.value)F.hasOwnProperty(b)&&((v=document.createElement("option")).setAttribute("role","option"),v.value=b,v.innerHTML=F[b],r.appendChild(v),d||C.trim(b)!==C.trim(i)&&C.trim(F[b])!==C.trim(i)||(v.selected="selected"),d&&(-1<C.inArray(C.trim(F[b]),s)||-1<C.inArray(C.trim(b),s))&&(v.selected="selected"));p(r,t,["value"])}else p(r,t);break;case"image":case"file":(r=document.createElement("input")).type=e,p(r,t);break;case"custom":r=document.createElement("span");try{if(!C.isFunction(t.custom_element))throw"e1";var q=t.custom_element.call(m,i,t);if(!q)throw"e2";q=C(q).addClass("customelement").attr({id:t.id,name:t.name}),C(r).empty().append(q)}catch(e){var w=C.jgrid.getRegional(m,"errors"),D=C.jgrid.getRegional(m,"edit");"e1"===e?C.jgrid.info_dialog(w.errcap,"function 'custom_element' "+D.msg.nodefined,D.bClose,{styleUI:m.p.styleUI}):"e2"===e?C.jgrid.info_dialog(w.errcap,"function 'custom_element' "+D.msg.novalue,D.bClose,{styleUI:m.p.styleUI}):C.jgrid.info_dialog(w.errcap,"string"==typeof e?e:e.message,D.bClose,{styleUI:m.p.styleUI})}break;default:var I;I="button"===e?"button":"textbox",(r=document.createElement("input")).type=e,r.value=i,"button"!==e&&(a?t.size||C(r).css({width:"96%"}):t.size||(t.size=20)),C(r).attr("role",I),p(r,t)}return r},checkDate:function(e,t){var i,a={};if(i=-1!==(e=e.toLowerCase()).indexOf("/")?"/":-1!==e.indexOf("-")?"-":-1!==e.indexOf(".")?".":"/",e=e.split(i),3!==(t=t.split(i)).length)return!1;var o,r,n=-1,l=-1,d=-1;for(r=0;r<e.length;r++){var s=isNaN(t[r])?0:parseInt(t[r],10);a[e[r]]=s,-1!==(o=e[r]).indexOf("y")&&(n=r),-1!==o.indexOf("m")&&(d=r),-1!==o.indexOf("d")&&(l=r)}o="y"===e[n]||"yyyy"===e[n]?4:"yy"===e[n]?2:-1;var u,c;return-1!==n&&(u=a[e[n]].toString(),2===o&&1===u.length&&(o=1),u.length===o&&(0!==a[e[n]]||"00"===t[n])&&(-1!==d&&(!((u=a[e[d]].toString()).length<1||a[e[d]]<1||12<a[e[d]])&&(-1!==l&&!((u=a[e[l]].toString()).length<1||a[e[l]]<1||31<a[e[l]]||2===a[e[d]]&&a[e[l]]>((c=a[e[n]])%4!=0||c%100==0&&c%400!=0?28:29)||a[e[l]]>[0,31,29,31,30,31,30,31,31,30,31,30,31][a[e[d]]])))))},isEmpty:function(e){return!(void 0!==e&&!e.match(/^\s+$/)&&""!==e)},checkTime:function(e){var t;if(!C.jgrid.isEmpty(e)){if(!(t=e.match(/^(\d{1,2}):(\d{2})([apAP][Mm])?$/)))return!1;if(t[3]){if(t[1]<1||12<t[1])return!1}else if(23<t[1])return!1;if(59<t[2])return!1}return!0},checkValues:function(e,t,i,a){function o(e){var t,i;return!(2<=(e=e.toString()).length&&("-"===e[0]?(t=e[1],e[2]&&(i=e[2])):(t=e[0],e[1]&&(i=e[1])),"0"===t&&"."!==i))&&("number"==typeof parseFloat(e)&&isFinite(e))}var r,n,l,d,s,u,c=this,f=c.p.colModel,m=C.jgrid.getRegional(this,"edit.msg");if(void 0===i)if("string"==typeof t){for(n=0,s=f.length;n<s;n++)if(f[n].name===t){r=f[n].editrules,null!=f[t=n].formoptions&&(l=f[n].formoptions.label);break}}else 0<=t&&(r=f[t].editrules);else r=i,l=void 0===a?"_":a;if(r){if(l=l||(null!=c.p.colNames?c.p.colNames[t]:f[t].label),!0===r.required&&C.jgrid.isEmpty(e))return[!1,l+": "+m.required,""];var p=!1!==r.required;if(!0===r.number&&!(!1==p&&C.jgrid.isEmpty(e)||o(e)))return[!1,l+": "+m.number,""];if(void 0!==r.minValue&&!isNaN(r.minValue)&&parseFloat(e)<parseFloat(r.minValue))return[!1,l+": "+m.minValue+" "+r.minValue,""];if(void 0!==r.maxValue&&!isNaN(r.maxValue)&&parseFloat(e)>parseFloat(r.maxValue))return[!1,l+": "+m.maxValue+" "+r.maxValue,""];if(!0===r.email&&!(!1==p&&C.jgrid.isEmpty(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)))return[!1,l+": "+m.email,""];if(!0===r.integer&&(!1!=p||!C.jgrid.isEmpty(e))){if(!o(e))return[!1,l+": "+m.integer,""];if(e%1!=0||-1!==e.indexOf("."))return[!1,l+": "+m.integer,""]}if(!0===r.date&&!(!1==p&&C.jgrid.isEmpty(e)||(f[t].formatoptions&&f[t].formatoptions.newformat?(d=f[t].formatoptions.newformat,(u=C.jgrid.getRegional(c,"formatter.date.masks"))&&u.hasOwnProperty(d)&&(d=u[d])):d=f[t].datefmt||"Y-m-d",C.jgrid.checkDate(d,e))))return[!1,l+": "+m.date+" - "+d,""];if(!0===r.time&&!(!1==p&&C.jgrid.isEmpty(e)||C.jgrid.checkTime(e)))return[!1,l+": "+m.date+" - hh:mm (am/pm)",""];if(!0===r.url&&!(!1==p&&C.jgrid.isEmpty(e)||/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i.test(e)))return[!1,l+": "+m.url,""];if(!0===r.custom&&(!1!=p||!C.jgrid.isEmpty(e))){if(C.isFunction(r.custom_func)){var g=r.custom_func.call(c,e,l,t);return C.isArray(g)?g:[!1,m.customarray,""]}return[!1,m.customfcheck,""]}}return[!0,"",""]},validateForm:function(e){var t,i,a=!0;for(t=0;t<e.elements.length;t++)if(("INPUT"===(i=e.elements[t]).nodeName||"TEXTAREA"===i.nodeName||"SELECT"===i.nodeName)&&(void 0!==i.willValidate?("INPUT"===i.nodeName&&i.type!==i.getAttribute("type")&&i.setCustomValidity(C.jgrid.LegacyValidation(i)?"":"error"),i.reportValidity()):(i.validity=i.validity||{},i.validity.valid=C.jgrid.LegacyValidation(i)),!i.validity.valid)){a=!1;break}return a},LegacyValidation:function(e){var t=!0,i=e.value,a=e.getAttribute("type"),o="checkbox"===a||"radio"===a,r=e.getAttribute("required"),n=e.getAttribute("minlength"),l=e.getAttribute("maxlength"),d=e.getAttribute("pattern");return e.disabled||(t=(t=t&&(!r||o&&e.checked||!o&&""!==i))&&(o||(!n||i.length>=n)&&(!l||i.length<=l)))&&d&&(t=(d=new RegExp(d)).test(i)),t},buildButtons:function(e,i,a){var o,r;return C.each(e,function(e,t){t.id||(t.id=C.jgrid.randId()),t.position||(t.position="last"),t.side||(t.side="left"),o=t.icon?" fm-button-icon-"+t.side+"'><span class='"+a.icon_base+" "+t.icon+"'></span>":"'>",r="<a  data-index='"+e+"' id='"+t.id+"' class='fm-button "+a.button+o+t.text+"</a>","last"===t.position?i+=r:i=r+i}),i},setSelNavIndex:function(i,a){var e=C(".ui-pg-button",i.p.pager);C.each(e,function(e,t){if(a===t)return i.p.navIndex=e,!1}),C(a).attr("tabindex","0")},getFirstVisibleCol:function(e){for(var t=-1,i=0;i<e.p.colModel.length;i++)if(!0!==e.p.colModel[i].hidden){t=i;break}return t}})});