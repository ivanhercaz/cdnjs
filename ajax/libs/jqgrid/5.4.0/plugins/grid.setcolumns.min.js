!function(u){u.jgrid.extend({setColumns:function(m){return m=u.extend({top:0,left:0,width:200,height:"auto",dataheight:"auto",modal:!1,drag:!0,beforeShowForm:null,afterShowForm:null,afterSubmitForm:null,closeOnEscape:!0,ShrinkToFit:!1,jqModal:!1,saveicon:[!0,"left","ui-icon-disk"],closeicon:[!0,"left","ui-icon-close"],onClose:null,colnameview:!0,closeAfterSubmit:!0,updateAfterCheck:!1,recreateForm:!1},u.jgrid.col,m||{}),this.each(function(){var e=this;if(e.grid){var t="function"==typeof m.beforeShowForm,o="function"==typeof m.afterShowForm,l="function"==typeof m.afterSubmitForm,a=e.p.id,d="ColTbl_"+a,r={themodal:"colmod"+a,modalhead:"colhd"+a,modalcontent:"colcnt"+a,scrollelm:d};if(!0===m.recreateForm&&null!=u("#"+r.themodal).html()&&u("#"+r.themodal).remove(),null!=u("#"+r.themodal).html())t&&m.beforeShowForm(u("#"+d)),u.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+a,jqm:m.jqModal,jqM:!1,modal:m.modal}),o&&m.afterShowForm(u("#"+d));else{var c=isNaN(m.dataheight)?m.dataheight:m.dataheight+"px",n="<div id='"+d+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+c+";'>";for(n+="<table class='ColTable' cellspacing='1' cellpading='2' border='0'><tbody>",i=0;i<this.p.colNames.length;i++)e.p.colModel[i].hidedlg||(n+="<tr><td style='white-space: pre;'><input type='checkbox' style='margin-right:5px;' id='col_"+this.p.colModel[i].name+"' class='cbox' value='T' "+(!1===this.p.colModel[i].hidden?"checked":"")+"/><label for='col_"+this.p.colModel[i].name+"'>"+this.p.colNames[i]+(m.colnameview?" ("+this.p.colModel[i].name+")":"")+"</label></td></tr>");n+="</tbody></table></div>";var s=m.updateAfterCheck?"":"<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+m.bSubmit+"</a>",h="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+m.bCancel+"</a>";n+="<table border='0' class='EditTable' id='"+d+"_2'><tbody><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DataTD ui-widget-content'></td></tr><tr><td class='ColButton EditButton'>"+s+"&#160;"+h+"</td></tr></tbody></table>",m.gbox="#gbox_"+a,u.jgrid.createModal(r,n,m,"#gview_"+e.p.id,u("#gview_"+e.p.id)[0]),1==m.saveicon[0]&&u("#dData","#"+d+"_2").addClass("right"==m.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+m.saveicon[2]+"'></span>"),1==m.closeicon[0]&&u("#eData","#"+d+"_2").addClass("right"==m.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+m.closeicon[2]+"'></span>"),m.updateAfterCheck?u(":input","#"+d).click(function(t){var o=this.id.substr(4);return o&&(this.checked?u(e).jqGrid("showCol",o):u(e).jqGrid("hideCol",o),!0===m.ShrinkToFit&&u(e).jqGrid("setGridWidth",e.grid.width-.001,!0)),this}):u("#dData","#"+d+"_2").click(function(t){for(i=0;i<e.p.colModel.length;i++)if(!e.p.colModel[i].hidedlg){var o=e.p.colModel[i].name.replace(/\./g,"\\.");u("#col_"+o,"#"+d).attr("checked")?(u(e).jqGrid("showCol",e.p.colModel[i].name),u("#col_"+o,"#"+d).attr("defaultChecked",!0)):(u(e).jqGrid("hideCol",e.p.colModel[i].name),u("#col_"+o,"#"+d).attr("defaultChecked",""))}return!0===m.ShrinkToFit&&u(e).jqGrid("setGridWidth",e.grid.width-.001,!0),m.closeAfterSubmit&&u.jgrid.hideModal("#"+r.themodal,{gb:"#gbox_"+a,jqm:m.jqModal,onClose:m.onClose}),l&&m.afterSubmitForm(u("#"+d)),!1}),u("#eData","#"+d+"_2").click(function(t){return u.jgrid.hideModal("#"+r.themodal,{gb:"#gbox_"+a,jqm:m.jqModal,onClose:m.onClose}),!1}),u("#dData, #eData","#"+d+"_2").hover(function(){u(this).addClass("ui-state-hover")},function(){u(this).removeClass("ui-state-hover")}),t&&m.beforeShowForm(u("#"+d)),u.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+a,jqm:m.jqModal,jqM:!0,modal:m.modal}),o&&m.afterShowForm(u("#"+d))}}})}})}(jQuery);