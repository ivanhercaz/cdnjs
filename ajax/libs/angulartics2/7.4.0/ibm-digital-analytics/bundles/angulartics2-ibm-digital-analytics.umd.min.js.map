{"version":3,"sources":["ng://angulartics2/ibm-digital-analytics/ibm-digital-analytics.ts"],"names":["Angulartics2IBMDigitalAnalytics","angulartics2","this","window","console","warn","prototype","startTracking","_this","pageTrack","pipe","filterDeveloperMode","subscribe","x","path","eventTrack","action","properties","cmCreatePageviewTag","cmDisplayShops","cmCreateProductviewTag","productId","productName","categoryId","attrbute","virtualCategory","cmCreateShopAction5Tag","quantity","unitPrice","extraFields","cmCreateShopAction9Tag","registrationId","orderId","orderSubtotal","cmCreateOrderTag","orderShipping","registrantCity","registrantState","registrantPostalCode","cmCreateRegistrationTag","registrantEmail","registrantCountry","cmCreateElementTag","elementId","elementCategory","cmCreateConversionEventTag","eventId","actionType","eventCategoryId","points","Injectable","args","providedIn","Angulartics2"],"mappings":"8YAAA,IAAAA,EAAA,WAKE,SAAAA,EAAoBC,GAAAC,KAAAD,aAAAA,EAC2B,mBAAlCE,OAA4B,qBACrCC,QAAQC,KACN,iFAKNL,EAAAM,UAAAC,cAAA,WAAA,IAAAC,EAAAN,KACEA,KAAKD,aAAaQ,UACfC,KAAKR,KAAKD,aAAaU,uBACvBC,UAAU,SAAAC,GAAK,OAAAL,EAAKC,UAAUI,EAAEC,QACnCZ,KAAKD,aAAac,WACfL,KAAKR,KAAKD,aAAaU,uBACvBC,UAAU,SAAAC,GAAK,OAAAL,EAAKO,WAAWF,EAAEG,OAAQH,EAAEI,eAUhDjB,EAAAM,UAAAG,UAAA,SAAUK,IAERI,EAD4Bf,OAA4B,qBACpCW,EAAM,KAAM,KAAM,OASxCd,EAAAM,UAAAS,WAAA,SAAWC,EAAgBC,QAAA,IAAAA,IAAAA,EAAA,QACnBE,EAAiBhB,OAAuB,eAC9C,OAAQa,GAQN,IAAK,0BAEHI,EAD+BjB,OAA+B,wBAE5Dc,EAAWI,UACXJ,EAAWK,YACXL,EAAWM,WACXN,EAAWO,SACXP,EAAWQ,iBAGb,MAQF,IAAK,0BAEHC,EAD+BvB,OAA+B,wBAE5Dc,EAAWI,UACXJ,EAAWK,YACXL,EAAWU,SACXV,EAAWW,UACXX,EAAWM,WACXN,EAAWO,SACXP,EAAWY,YACXZ,EAAWQ,iBAGbN,IAEA,MASF,IAAK,0BAEHW,EAD+B3B,OAA+B,wBAE5Dc,EAAWI,UACXJ,EAAWK,YACXL,EAAWU,SACXV,EAAWW,UACXX,EAAWc,eACXd,EAAWe,QACXf,EAAWgB,cACXhB,EAAWM,WACXN,EAAWO,SACXP,EAAWY,aAGbV,IAEA,MAQF,IAAK,oBAEHe,EADyB/B,OAAyB,kBAEhDc,EAAWe,QACXf,EAAWgB,cACXhB,EAAWkB,cACXlB,EAAWc,eACXd,EAAWmB,eACXnB,EAAWoB,gBACXpB,EAAWqB,qBACXrB,EAAWO,SACXP,EAAWY,aAGb,MAQF,IAAK,2BAEHU,EADgCpC,OAAgC,yBAE9Dc,EAAWc,eACXd,EAAWuB,gBACXvB,EAAWmB,eACXnB,EAAWoB,gBACXpB,EAAWqB,qBACXrB,EAAWwB,kBACXxB,EAAWO,UAGb,MAQF,IAAK,sBAEHkB,EAD2BvC,OAA2B,oBAEpDc,EAAW0B,UACX1B,EAAW2B,gBACX3B,EAAWO,UAGb,MASF,IAAK,8BAEHqB,EADmC1C,OAAmC,4BAEpEc,EAAW6B,QACX7B,EAAW8B,WACX9B,EAAW+B,gBACX/B,EAAWgC,OACXhC,EAAWO,SACXP,EAAWY,aAGb,MAEF,QACEzB,QAAQC,KAAK,kDA3LpB6C,EAAAA,WAAUC,KAAA,CAAC,CAAEC,WAAY,oDAFjBC,EAAAA,+IADT","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Angulartics2 } from 'angulartics2';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class Angulartics2IBMDigitalAnalytics {\r\n  constructor(private angulartics2: Angulartics2) {\r\n    if (typeof window['cmCreatePageviewTag'] !== 'function') {\r\n      console.warn(\r\n        'Angulartics 2 IBM Digital Analytics Plugin: eluminate.js is not loaded',\r\n      );\r\n    }\r\n  }\r\n\r\n  startTracking(): void {\r\n    this.angulartics2.pageTrack\r\n      .pipe(this.angulartics2.filterDeveloperMode())\r\n      .subscribe(x => this.pageTrack(x.path));\r\n    this.angulartics2.eventTrack\r\n      .pipe(this.angulartics2.filterDeveloperMode())\r\n      .subscribe(x => this.eventTrack(x.action, x.properties));\r\n  }\r\n\r\n  /**\r\n   * Track Page in IBM Digital Analytics\r\n   *\r\n   * @param path location\r\n   *\r\n   * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_pageviewtag.html\r\n   */\r\n  pageTrack(path: string) {\r\n    const cmCreatePageviewTag = window['cmCreatePageviewTag'];\r\n    cmCreatePageviewTag(path, null, null, null);\r\n  }\r\n\r\n  /**\r\n   * Track an event in IBM Digital Analytics\r\n   *\r\n   * @param action A string corresponding to the type of event that needs to be tracked.\r\n   * @param properties The properties that need to be logged with the event.\r\n   */\r\n  eventTrack(action: string, properties: any = {}) {\r\n    const cmDisplayShops = window['cmDisplayShops'];\r\n    switch (action) {\r\n      /**\r\n       * @description The Product View tag captures information about vdigitalDataiews of product detail pages.\r\n       *  The Product View tag should be called on the lowest level detail page for products, which is typically\r\n       *  the Product Details page. You can view example Product View tags below.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_prodviewtag.html\r\n       */\r\n      case 'cmCreateProductviewTag':\r\n        const cmCreateProductviewTag = window['cmCreateProductviewTag'];\r\n        cmCreateProductviewTag(\r\n          properties.productId,\r\n          properties.productName,\r\n          properties.categoryId,\r\n          properties.attrbute,\r\n          properties.virtualCategory,\r\n        );\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Shop Action 5 tag captures data about selected products and which products are present in a shopping cart,\r\n       *  if any, when the cart is viewed.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_shopact5tag.html\r\n       */\r\n      case 'cmCreateShopAction5Tag':\r\n        const cmCreateShopAction5Tag = window['cmCreateShopAction5Tag'];\r\n        cmCreateShopAction5Tag(\r\n          properties.productId,\r\n          properties.productName,\r\n          properties.quantity,\r\n          properties.unitPrice,\r\n          properties.categoryId,\r\n          properties.attrbute,\r\n          properties.extraFields,\r\n          properties.virtualCategory,\r\n        );\r\n\r\n        cmDisplayShops();\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Shop Action 9 tag captures data about what products were purchased by a customer.\r\n       *  Like the Shop Action 5 tag, one tag should be sent for each product line item purchased. These tags should be sent\r\n       *  on the receipt or other completion page confirming a successful order.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_shopact9tag.html\r\n       */\r\n      case 'cmCreateShopAction9Tag':\r\n        const cmCreateShopAction9Tag = window['cmCreateShopAction9Tag'];\r\n        cmCreateShopAction9Tag(\r\n          properties.productId,\r\n          properties.productName,\r\n          properties.quantity,\r\n          properties.unitPrice,\r\n          properties.registrationId,\r\n          properties.orderId,\r\n          properties.orderSubtotal,\r\n          properties.categoryId,\r\n          properties.attrbute,\r\n          properties.extraFields,\r\n        );\r\n\r\n        cmDisplayShops();\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Order tag captures order header information such as Registration ID, order ID, order subtotal,\r\n       *  and shipping and handling. The Order tag should be sent on the receipt page confirming order completion.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_ordertag.html\r\n       */\r\n      case 'cmCreateOrderTag':\r\n        const cmCreateOrderTag = window['cmCreateOrderTag'];\r\n        cmCreateOrderTag(\r\n          properties.orderId,\r\n          properties.orderSubtotal,\r\n          properties.orderShipping,\r\n          properties.registrationId,\r\n          properties.registrantCity,\r\n          properties.registrantState,\r\n          properties.registrantPostalCode,\r\n          properties.attrbute,\r\n          properties.extraFields,\r\n        );\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Registration tag creates a Lifetime Visitor Experience Profile (LIVE Profile) by associating a single\r\n       *  common Registration ID with the IBMÂ® Digital Analytics permanent cookie set in every browser visiting the tagged site.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_registrationtag.html\r\n       */\r\n      case 'cmCreateRegistrationTag':\r\n        const cmCreateRegistrationTag = window['cmCreateRegistrationTag'];\r\n        cmCreateRegistrationTag(\r\n          properties.registrationId,\r\n          properties.registrantEmail,\r\n          properties.registrantCity,\r\n          properties.registrantState,\r\n          properties.registrantPostalCode,\r\n          properties.registrantCountry,\r\n          properties.attrbute,\r\n        );\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Element tag is used to track intra-page content in IBMÂ® Digital Analytics. Data collected by\r\n       *  the Element tag is used to populate values in the Element Categories and Top Viewed Elements reports.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_elementtag.html\r\n       */\r\n      case 'cmCreateElementTag':\r\n        const cmCreateElementTag = window['cmCreateElementTag'];\r\n        cmCreateElementTag(\r\n          properties.elementId,\r\n          properties.elementCategory,\r\n          properties.attrbute,\r\n        );\r\n\r\n        break;\r\n\r\n      /**\r\n       * @description The Conversion Event tag is employed for tracking of general non-commerce conversion events.\r\n       * The Conversion Event tag is used to populate values in the Conversion Events Reports and to create Key Segments.\r\n       * This tag and the reports it populates enable analysis of a wide variety of site activities.\r\n       *\r\n       * @link https://www.ibm.com/support/knowledgecenter/SSPG9M/Implementation/impl_conversioneventtag.html\r\n       */\r\n      case 'cmCreateConversionEventTag':\r\n        const cmCreateConversionEventTag = window['cmCreateConversionEventTag'];\r\n        cmCreateConversionEventTag(\r\n          properties.eventId,\r\n          properties.actionType,\r\n          properties.eventCategoryId,\r\n          properties.points,\r\n          properties.attrbute,\r\n          properties.extraFields,\r\n        );\r\n\r\n        break;\r\n\r\n      default:\r\n        console.warn('Unsupported Event Action');\r\n    }\r\n  }\r\n}\r\n"]}