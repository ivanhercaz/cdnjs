import*as tslib_1 from"tslib";import{Injectable}from"@angular/core";import{Title}from"@angular/platform-browser";import{Angulartics2}from"angulartics2";import*as i0 from"@angular/core";import*as i1 from"angulartics2";import*as i2 from"@angular/platform-browser";var Angulartics2Clicky=function(){function t(t,e){this.angulartics2=t,this.titleService=e,"undefined"==typeof clicky&&console.warn("Angulartics 2 Clicky Plugin: clicky global not found")}return t.prototype.startTracking=function(){var t=this;this.angulartics2.pageTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(e){return t.pageTrack(e.path)}),this.angulartics2.eventTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(e){return t.eventOrGoalTrack(e.action,e.properties)})},t.prototype.pageTrack=function(t){var e=this.titleService.getTitle();clicky.log(t,e,"pageview")},t.prototype.eventOrGoalTrack=function(t,e){if(void 0===e.goal){var i=e.title||null,r=null!=e.type?this.validateType(e.type):null;clicky.log(t,i,r)}else{var a=e.goal,n=e.revenue;clicky.goal(a,n,!!e.noQueue)}},t.prototype.validateType=function(t){return["pageview","click","download","outbound"].indexOf(t)>-1?t:"pageview"},t.ngInjectableDef=i0.ɵɵdefineInjectable({factory:function(){return new t(i0.ɵɵinject(i1.Angulartics2),i0.ɵɵinject(i2.Title))},token:t,providedIn:"root"}),t=tslib_1.__decorate([Injectable({providedIn:"root"}),tslib_1.__metadata("design:paramtypes",[Angulartics2,Title])],t)}();export{Angulartics2Clicky};