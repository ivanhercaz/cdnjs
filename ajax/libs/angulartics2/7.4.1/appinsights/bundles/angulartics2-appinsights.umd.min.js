!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/platform-browser"),require("@angular/router"),require("rxjs/operators"),require("angulartics2")):"function"==typeof define&&define.amd?define("angulartics2/appinsights",["exports","@angular/core","@angular/platform-browser","@angular/router","rxjs/operators","angulartics2"],e):e((t.angulartics2=t.angulartics2||{},t.angulartics2.appinsights={}),t.ng.core,t.ng.platformBrowser,t.ng.router,t.rxjs.operators,t.angulartics2)}(this,function(t,e,r,n,i,s){"use strict";var a=function(){return(a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},o=function c(){this.userId=null},u=function(){function t(t,e,r){var n=this;this.angulartics2=t,this.title=e,this.router=r,this.loadStartTime=null,this.loadTime=null,this.metrics=null,this.dimensions=null,this.measurements=null,"undefined"==typeof appInsights&&console.warn("appInsights not found");var i=new o;this.angulartics2.settings.appInsights=a({},i,this.angulartics2.settings.appInsights),this.angulartics2.setUsername.subscribe(function(t){return n.setUsername(t)}),this.angulartics2.setUserProperties.subscribe(function(t){return n.setUserProperties(t)})}return t.prototype.startTracking=function(){var e=this;this.angulartics2.pageTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(t){return e.pageTrack(t.path)}),this.angulartics2.eventTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(t){return e.eventTrack(t.action,t.properties)}),this.angulartics2.exceptionTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(t){return e.exceptionTrack(t)}),this.router.events.pipe(this.angulartics2.filterDeveloperMode(),i.filter(function(t){return t instanceof n.NavigationStart})).subscribe(function(t){return e.startTimer()}),this.router.events.pipe(i.filter(function(t){return t instanceof n.NavigationError||t instanceof n.NavigationEnd})).subscribe(function(t){return e.stopTimer()})},t.prototype.startTimer=function(){this.loadStartTime=Date.now(),this.loadTime=null},t.prototype.stopTimer=function(){this.loadTime=Date.now()-this.loadStartTime,this.loadStartTime=null},t.prototype.pageTrack=function(t){appInsights.trackPageView(this.title.getTitle(),t,this.dimensions,this.metrics,this.loadTime)},t.prototype.eventTrack=function(t,e){appInsights.trackEvent(t,e,this.measurements)},t.prototype.exceptionTrack=function(t){var e=t.event||t.description||t;appInsights.trackException(e)},t.prototype.setUsername=function(t){this.angulartics2.settings.appInsights.userId=t,appInsights.setAuthenticatedUserContext(t)},t.prototype.setUserProperties=function(t){t.userId&&(this.angulartics2.settings.appInsights.userId=t.userId),t.accountId?appInsights.setAuthenticatedUserContext(this.angulartics2.settings.appInsights.userId,t.accountId):appInsights.setAuthenticatedUserContext(this.angulartics2.settings.appInsights.userId)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:s.Angulartics2},{type:r.Title},{type:n.Router}]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(s.Angulartics2),e.inject(r.Title),e.inject(n.Router))},token:t,providedIn:"root"}),t}();t.AppInsightsDefaults=o,t.Angulartics2AppInsights=u,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angulartics2-appinsights.umd.min.js.map