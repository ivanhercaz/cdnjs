const b=/^(b|B)$/,symbol={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function filesize(e,i={}){if(isNaN(e))throw new TypeError("Invalid number");let t=[],o=0,a=!0===i.bits,l=!0===i.unix,r=i.base||2,s=void 0!==i.round?i.round:l?1:2,n=void 0!==i.locale?i.locale:"",B=i.localeOptions||{},c=void 0!==i.separator?i.separator:"",f=void 0!==i.spacer?i.spacer:l?"":" ",p=i.symbols||{},d=2===r&&i.standard||"jedec",u=i.output||"string",m=!0===i.fullform,y=i.fullforms instanceof Array?i.fullforms:[],g=void 0!==i.exponent?i.exponent:-1,h=Number(e),M=h<0,x=r>2?1e3:1024;return M&&(h=-h),(-1===g||isNaN(g))&&(g=Math.floor(Math.log(h)/Math.log(x)))<0&&(g=0),g>8&&(g=8),"exponent"===u?g:(0===h?(t[0]=0,t[1]=l?"":symbol[d][a?"bits":"bytes"][g]):(o=h/(2===r?Math.pow(2,10*g):Math.pow(1e3,g)),a&&(o*=8)>=x&&g<8&&(o/=x,g++),t[0]=Number(o.toFixed(g>0?s:0)),t[0]===x&&g<8&&void 0===i.exponent&&(t[0]=1,g++),t[1]=10===r&&1===g?a?"kb":"kB":symbol[d][a?"bits":"bytes"][g],l&&(t[1]="jedec"===d?t[1].charAt(0):g>0?t[1].replace(/B$/,""):t[1],b.test(t[1])&&(t[0]=Math.floor(t[0]),t[1]=""))),M&&(t[0]=-t[0]),t[1]=p[t[1]]||t[1],!0===n?t[0]=t[0].toLocaleString():n.length>0?t[0]=t[0].toLocaleString(n,B):c.length>0&&(t[0]=t[0].toString().replace(".",c)),"array"===u?t:(m&&(t[1]=y[g]?y[g]:fullform[d][g]+(a?"bit":"byte")+(1===t[0]?"":"s")),"object"===u?{value:t[0],symbol:t[1]}:t.join(f)))}filesize.partial=(e=>i=>filesize(i,e));export default filesize;