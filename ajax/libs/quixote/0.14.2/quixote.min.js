!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).quixote=t()}}(function(){return function o(s,u,a){function c(e,t){if(!u[e]){if(!s[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=u[e]={exports:{}};s[e][0].call(i.exports,function(t){return c(s[e][1][t]||t)},i,i.exports,o,s,u,a)}return u[e].exports}for(var l="function"==typeof require&&require,t=0;t<a.length;t++)c(a[t]);return c}({1:[function(t,e,n){var r,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{i="function"==typeof clearTimeout?clearTimeout:u}catch(t){i=u}}();var c,l=[],f=!1,p=-1;function h(){f&&c&&(f=!1,c.length?l=c.concat(l):p=-1,l.length&&d())}function d(){if(!f){var t=a(h);f=!0;for(var e=l.length;e;){for(c=l,l=[];++p<e;)c&&c[p].run();p=-1,e=l.length}c=null,f=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===u||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new m(t,e)),1!==l.length||f||a(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],2:[function(a,t,c){(function(t,e){var r=a("process/browser.js").nextTick,n=Function.prototype.apply,i=Array.prototype.slice,o={},s=0;function u(t,e){this._id=t,this._clearFn=e}c.setTimeout=function(){return new u(n.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new u(n.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(t){t.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},c.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},c._unrefActive=c.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},c.setImmediate="function"==typeof t?t:function(t){var e=s++,n=!(arguments.length<2)&&i.call(arguments,1);return o[e]=!0,r(function(){o[e]&&(n?t.apply(null,n):t.call(null),c.clearImmediate(e))}),e},c.clearImmediate="function"==typeof e?e:function(t){delete o[t]}}).call(this,a("timers").setImmediate,a("timers").clearImmediate)},{"process/browser.js":1,timers:2}],3:[function(t,e,n){"use strict";var u=t("./util/ensure.js"),r=t("./util/oop.js"),a=t("./util/shim.js"),i=e.exports=function(){u.unreachable("Assertable is abstract and should not be constructed directly.")};i.extend=r.extendFn(i),r.makeAbstract(i,[]),i.prototype.assert=function(t,e){u.signature(arguments,[Object,[void 0,String]]),void 0===e&&(e="Differences found");var n=this.diff(t);if(""!==n)throw new Error(e+":\n"+n+"\n")},i.prototype.diff=function(t){u.signature(arguments,[Object]);for(var e,n,r,i=[],o=a.Object.keys(t),s=0;s<o.length;s++)r=this[e=o[s]],u.that(void 0!==r,this+" doesn't have a property named '"+e+"'. Did you misspell it?"),""!==(n=r.diff(t[e]))&&i.push(n);return i.join("\n")}},{"./util/ensure.js":24,"./util/oop.js":25,"./util/shim.js":26}],4:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./position_descriptor.js"),o=t("../values/position.js"),s=e.exports=function(t,e){switch(r.signature(arguments,[String,Number]),t){case"x":i.x(this),this._value=o.x(e);break;case"y":i.y(this),this._value=o.y(e);break;default:r.unreachable("Unknown dimension: "+t)}this._dimension=t};i.extend(s),s.x=function(t){return r.signature(arguments,[Number]),new s("x",t)},s.y=function(t){return r.signature(arguments,[Number]),new s("y",t)},s.prototype.value=function(){return this._value},s.prototype.toString=function(){return this._value+" "+this._dimension+"-coordinate"}},{"../util/ensure.js":24,"../values/position.js":28,"./position_descriptor.js":12}],5:[function(t,e,n){"use strict";var i=t("../util/ensure.js"),o=t("./position_descriptor.js"),s=(t("../values/position.js"),t("./relative_position.js"),e.exports=function(t,e,n,r){i.signature(arguments,[String,o,o,String]),"x"===t?o.x(this):"y"===t?o.y(this):i.unreachable("Unknown dimension: "+t),this._dimension=t,this._position1=e,this._position2=n,this._description=r});function r(r){return function(t,e,n){return new s(r,t,e,n)}}o.extend(s),s.x=r("x"),s.y=r("y"),s.prototype.value=function(){return i.signature(arguments,[]),this._position1.value().midpoint(this._position2.value())},s.prototype.toString=function(){return i.signature(arguments,[]),this._description}},{"../util/ensure.js":24,"../values/position.js":28,"./position_descriptor.js":12,"./relative_position.js":13}],6:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),o=t("../util/oop.js"),s=t("../values/value.js"),u=e.exports=function(){r.unreachable("Descriptor is abstract and should not be constructed directly.")};u.extend=o.extendFn(u),o.makeAbstract(u,["value","toString"]),u.prototype.diff=function(e){e=function(t,e){var n=typeof e;null===e&&(n="null");if("object"===n&&(e instanceof u||e instanceof s))return e;{if(void 0===e)throw new Error("Can't compare "+t+" to "+e+". Did you misspell a property name?");if("object"===n)throw new Error("Can't compare "+t+" to "+o.instanceName(e)+" instances.");var r=t.convert(e,n);if(void 0!==r)return r;var i=e;throw"string"===n&&(i="'"+i+"'"),"function"===n&&(i="a function"),new Error("Can't compare "+t+" to "+i+".")}}(this,e);try{var t=this.value(),n=e.value();if(t.equals(n))return"";var r=t.diff(n),i=n.toString();return e instanceof u&&(i+=" ("+e+")"),this+" was "+r+".\n  Expected: "+i+"\n  But was:  "+t}catch(t){throw new Error("Can't compare "+this+" to "+e+": "+t.message)}},u.prototype.convert=function(){},u.prototype.equals=function(){return!1}},{"../util/ensure.js":24,"../util/oop.js":25,"../values/value.js":31}],7:[function(r,t,e){"use strict";var i=r("../util/ensure.js"),o=r("../values/position.js"),s=r("./position_descriptor.js"),u="right",a="left",n=t.exports=function(t,e){var n=r("../q_element.js");i.signature(arguments,[n,String]),e===a||e===u?s.x(this):"top"===e||"bottom"===e?s.y(this):i.unreachable("Unknown position: "+e),this._element=t,this._position=e};function c(e){return function(t){return new n(t,e)}}function l(t){var e=t._element,n=e.frame.body().toDomElement().contains(e.toDomElement()),r="none"===e.getRawStyle("display");return n&&!r}s.extend(n),n.top=c("top"),n.right=c(u),n.bottom=c("bottom"),n.left=c(a),n.prototype.value=function(){i.signature(arguments,[]);var t=this._element.getRawPosition(),e=t[this._position],n=this._element.frame.getRawScrollPosition();return this._position===u||this._position===a?l(this,t)?o.x(e+n.x):o.noX():l(this,t)?o.y(e+n.y):o.noY()},n.prototype.toString=function(){return i.signature(arguments,[]),this._position+" edge of "+this._element}},{"../q_element.js":18,"../util/ensure.js":24,"../values/position.js":28,"./position_descriptor.js":12}],8:[function(n,t,e){"use strict";var r=n("../util/ensure.js"),i=n("../values/render_state.js"),o=n("../values/position.js"),s=n("./descriptor.js"),u=n("./element_rendered_edge.js"),a=n("./generic_size.js"),c=n("./center.js"),l=t.exports=function(t){var e=n("../q_element.js");r.signature(arguments,[e]),this._element=t,this.top=u.top(t),this.right=u.right(t),this.bottom=u.bottom(t),this.left=u.left(t),this.width=a.create(this.left,this.right,"rendered width of "+t),this.height=a.create(this.top,this.bottom,"rendered height of "+t),this.center=c.x(this.left,this.right,"rendered center of "+t),this.middle=c.y(this.top,this.bottom,"rendered middle of "+t)};s.extend(l),l.create=function(t){return new l(t)},l.prototype.value=function(){return this.top.value().equals(o.noY())?i.notRendered():i.rendered()},l.prototype.toString=function(){return"render status of "+this._element.toString()},l.prototype.convert=function(t,e){if("boolean"===e)return t?i.rendered():i.notRendered()}},{"../q_element.js":18,"../util/ensure.js":24,"../values/position.js":28,"../values/render_state.js":29,"./center.js":5,"./descriptor.js":6,"./element_rendered_edge.js":9,"./generic_size.js":10}],9:[function(r,t,e){"use strict";var a=r("../util/ensure.js"),c=r("../quixote.js"),i=r("./position_descriptor.js"),l=r("../values/position.js"),f=r("../values/size.js"),p="top",h="right",d="bottom",m="left",n=t.exports=function(t,e){var n=r("../q_element.js");a.signature(arguments,[n,String]),e===m||e===h?i.x(this):e===p||e===d?i.y(this):_(e),this._element=t,this._position=e};function o(e){return function(t){return new n(t,e)}}function v(t){var e=t.getRawStyle("position");switch(e){case"absolute":case"fixed":return 1;case"static":case"relative":case"sticky":return;default:a.unreachable("Unknown position property: "+e)}}function g(t,e,n,r,i){return t.top=t.top.max(e),t.right=null===t.right?n:t.right.min(n),t.bottom=null===t.bottom?r:t.bottom.min(r),t.left=t.left.max(i),t}function y(t){switch(t){case p:case d:return l.noY();case m:case h:return l.noX();default:_(t)}}function _(t){a.unreachable("Unknown position: "+t)}i.extend(n),n.top=o(p),n.right=o(h),n.bottom=o(d),n.left=o(m),n.prototype.toString=function(){return a.signature(arguments,[]),this._position+" rendered edge of "+this._element},n.prototype.value=function(){var t,e=this._position,n=this._element,r=n.frame.page();if(n.top.value().equals(l.noY()))return y(e);if(n.width.value().equals(f.create(0)))return y(e);if(n.height.value().equals(f.create(0)))return y(e);a.that(!("none"!==(t=n.getRawStyle("clip-path"))&&""!==t),"Can't detect element clipping boundaries when 'clip-path' property is used.");var i={top:r.top.value(),right:null,bottom:null,left:r.left.value()};i=function(t,e){for(a.that(!c.browser.misreportsClipAutoProperty(),"Can't determine element clipping values on this browser because it misreports the value of the `clip: auto` property. You can use `quixote.browser.misreportsClipAutoProperty()` to skip this browser.");null!==t;t=t.parent()){var n=t.getRawStyle("clip");if("auto"!==n&&v(t)){var r=(o=t,{top:"auto"===(s=function(t){a.that(!c.browser.misreportsAutoValuesInClipProperty(),"Can't determine element clipping values on this browser because it misreports the value of the `clip` property. You can use `quixote.browser.misreportsAutoValuesInClipProperty()` to skip this browser.");var e=/rect\((.*?),? (.*?),? (.*?),? (.*?)\)/.exec(t);return a.that(null!==e,"Unable to parse clip property: "+t),[i(e[1],t),i(e[2],t),i(e[3],t),i(e[4],t)]}(n))[0]?o.top.value():o.top.value().plus(l.y(Number(s[0]))),right:"auto"===s[1]?o.right.value():o.left.value().plus(l.x(Number(s[1]))),bottom:"auto"===s[2]?o.bottom.value():o.top.value().plus(l.y(Number(s[2]))),left:"auto"===s[3]?o.left.value():o.left.value().plus(l.x(Number(s[3])))});e=g(e,r.top,r.right,r.bottom,r.left)}}function i(t,e){if("auto"===t)return t;var n=/^(.*?)px$/.exec(t);return a.that(null!==n,"Unable to parse '"+t+"' in clip property: "+e),n[1]}var o,s;return e}(n,i=function(t,e){for(var n=t.parent();null!==n;n=n.parent())r=n,function(t){var e=t.getRawStyle("position");switch(e){case"static":case"relative":case"absolute":case"sticky":return!0;case"fixed":return!1;default:a.unreachable("Unknown position property: "+e)}}(t)&&function(n){return t("overflow-x")||t("overflow-y");function t(t){var e=n.getRawStyle(t);switch(e){case"hidden":case"scroll":case"auto":return!0;case"visible":return!1;default:a.unreachable("Unknown "+t+" property: "+e)}}}(r)&&(e=g(e,n.top.value(),n.right.value(),n.bottom.value(),n.left.value()));var r;return e}(n,i));var o,s,u=g(i,n.top.value(),n.right.value(),n.bottom.value(),n.left.value());return s=u,0<=(o=i).top.compare(s.bottom)||null!==o.right&&o.right.compare(s.left)<=0||null!==o.bottom&&o.bottom.compare(s.top)<=0||0<=o.left.compare(s.right)?y(e):function(t,e){switch(e){case p:return t.top;case h:return t.right;case d:return t.bottom;case m:return t.left;default:_(e)}}(u,e)}},{"../q_element.js":18,"../quixote.js":23,"../util/ensure.js":24,"../values/position.js":28,"../values/size.js":30,"./position_descriptor.js":12}],10:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./position_descriptor.js"),o=t("./size_descriptor.js"),s=e.exports=function(t,e,n){r.signature(arguments,[i,i,String]),this._from=t,this._to=e,this._description=n};o.extend(s),s.create=function(t,e,n){return new s(t,e,n)},s.prototype.value=function(){return r.signature(arguments,[]),this._from.value().distanceTo(this._to.value())},s.prototype.toString=function(){return this._description}},{"../util/ensure.js":24,"./position_descriptor.js":12,"./size_descriptor.js":15}],11:[function(r,t,e){"use strict";var s=r("../util/ensure.js"),i=r("./position_descriptor.js"),u=r("../values/position.js"),a="top",c="right",l="bottom",f="left",n=t.exports=function(t,e){var n=r("../q_frame.js");s.signature(arguments,[String,n]),t===f||t===c?i.x(this):t===a||t===l?i.y(this):s.unreachable("Unknown edge: "+t),this._edge=t,this._frame=e};function o(e){return function(t){return new n(e,t)}}i.extend(n),n.top=o(a),n.right=o(c),n.bottom=o(l),n.left=o(f),n.prototype.value=function(){s.signature(arguments,[]);var t,e,n,r,i,o=(t=this._frame.toDomElement().contentDocument,e=t.documentElement,n=t.body,r=Math.max(n.scrollWidth,e.scrollWidth),i=Math.max(n.scrollHeight,e.scrollHeight),{width:r,height:i});switch(this._edge){case a:return u.y(0);case c:return u.x(o.width);case l:return u.y(o.height);case f:return u.x(0);default:s.unreachable()}},n.prototype.toString=function(){switch(s.signature(arguments,[]),this._edge){case a:return"top of page";case c:return"right side of page";case l:return"bottom of page";case f:return"left side of page";default:s.unreachable()}}},{"../q_frame.js":20,"../util/ensure.js":24,"../values/position.js":28,"./position_descriptor.js":12}],12:[function(e,t,n){"use strict";var r=e("../util/ensure.js"),i=e("../util/oop.js"),o=e("./descriptor.js"),s=e("../values/position.js");function u(){return e("./relative_position.js")}function a(){return e("./absolute_position.js")}var c=t.exports=function(t){r.signature(arguments,[String]),r.unreachable("PositionDescriptor is abstract and should not be constructed directly.")};function l(e){return function(t){t._pdbc={dimension:e}}}o.extend(c),c.extend=i.extendFn(c),c.x=l("x"),c.y=l("y"),c.prototype.plus=function(t){return"x"===this._pdbc.dimension?u().right(this,t):u().down(this,t)},c.prototype.minus=function(t){return"x"===this._pdbc.dimension?u().left(this,t):u().up(this,t)},c.prototype.to=function(t){if(r.signature(arguments,[[c,Number]]),"number"==typeof t&&(t="x"===this._pdbc.dimension?a().x(t):a().y(t)),this._pdbc.dimension!==t._pdbc.dimension)throw new Error("Can only calculate distance between two X coordinates or two Y coordinates");return e("./generic_size.js").create(this,t,"distance from "+this+" to "+t)},c.prototype.convert=function(t,e){switch(e){case"number":return"x"===this._pdbc.dimension?s.x(t):s.y(t);case"string":return"none"===t?"x"===this._pdbc.dimension?s.noX():s.noY():void 0;default:return}}},{"../util/ensure.js":24,"../util/oop.js":25,"../values/position.js":28,"./absolute_position.js":4,"./descriptor.js":6,"./generic_size.js":10,"./relative_position.js":13}],13:[function(t,e,n){"use strict";var i=t("../util/ensure.js"),o=t("./descriptor.js"),s=t("./position_descriptor.js"),u=t("../values/value.js"),a=t("../values/size.js"),c=e.exports=function(t,e,n,r){i.signature(arguments,[String,Number,o,[Number,o,u]]),"x"===t?s.x(this):"y"===t?s.y(this):i.unreachable("Unknown dimension: "+t),this._dimension=t,this._direction=e,this._relativeTo=n,"number"==typeof r?(r<0&&(this._direction*=-1),this._amount=a.create(Math.abs(r))):this._amount=r};function r(n,r){return function(t,e){return new c(n,r,t,e)}}s.extend(c),c.right=r("x",1),c.down=r("y",1),c.left=r("x",-1),c.up=r("y",-1),c.prototype.value=function(){i.signature(arguments,[]);var t=this._relativeTo.value(),e=this._amount.value();return 1===this._direction?t.plus(e):t.minus(e)},c.prototype.toString=function(){i.signature(arguments,[]);var t=this._relativeTo.toString();if(this._amount.equals(a.create(0)))return t;var e=this._amount.toString();return"x"===this._dimension?e+=1===this._direction?" to right of ":" to left of ":e+=1===this._direction?" below ":" above ",e+t}},{"../util/ensure.js":24,"../values/size.js":30,"../values/value.js":31,"./descriptor.js":6,"./position_descriptor.js":12}],14:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("../values/size.js"),o=t("./descriptor.js"),s=t("./size_descriptor.js"),u=t("../values/value.js"),a=(t("./size_multiple.js"),e.exports=function(t,e,n){r.signature(arguments,[Number,o,[Number,o,u]]),this._direction=t,this._relativeTo=e,"number"==typeof n?(this._amount=i.create(Math.abs(n)),n<0&&(this._direction*=-1)):this._amount=n});function c(n){return function(t,e){return new a(n,t,e)}}s.extend(a),a.larger=c(1),a.smaller=c(-1),a.prototype.value=function(){r.signature(arguments,[]);var t=this._relativeTo.value(),e=this._amount.value();return 1===this._direction?t.plus(e):t.minus(e)},a.prototype.toString=function(){r.signature(arguments,[]);var t=this._relativeTo.toString();if(this._amount.equals(i.create(0)))return t;var e=this._amount.toString();return 1===this._direction?e+=" larger than ":e+=" smaller than ",e+t}},{"../util/ensure.js":24,"../values/size.js":30,"../values/value.js":31,"./descriptor.js":6,"./size_descriptor.js":15,"./size_multiple.js":16}],15:[function(e,t,n){"use strict";var r=e("../util/ensure.js"),i=e("../util/oop.js"),o=e("./descriptor.js"),s=e("../values/size.js");function u(){return e("./relative_size.js")}var a=t.exports=function(){r.unreachable("SizeDescriptor is abstract and should not be constructed directly.")};o.extend(a),a.extend=i.extendFn(a),a.prototype.plus=function(t){return u().larger(this,t)},a.prototype.minus=function(t){return u().smaller(this,t)},a.prototype.times=function(t){return e("./size_multiple.js").create(this,t)},a.prototype.convert=function(t,e){switch(e){case"number":return s.create(t);case"string":return"none"===t?s.createNone():void 0;default:return}}},{"../util/ensure.js":24,"../util/oop.js":25,"../values/size.js":30,"./descriptor.js":6,"./relative_size.js":14,"./size_multiple.js":16}],16:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./descriptor.js"),o=t("./size_descriptor.js"),s=(t("../values/size.js"),e.exports=function(t,e){r.signature(arguments,[i,Number]),this._relativeTo=t,this._multiple=e});o.extend(s),s.create=function(t,e){return new s(t,e)},s.prototype.value=function(){return r.signature(arguments,[]),this._relativeTo.value().times(this._multiple)},s.prototype.toString=function(){r.signature(arguments,[]);var t,e=this._multiple,n=this._relativeTo.toString();if(1===e)return n;switch(e){case.5:t="half of ";break;case 1/3:t="one-third of ";break;case 2/3:t="two-thirds of ";break;case.25:t="one-quarter of ";break;case.75:t="three-quarters of ";break;case.2:t="one-fifth of ";break;case.4:t="two-fifths of ";break;case.6:t="three-fifths of ";break;case.8:t="four-fifths of ";break;case 1/6:t="one-sixth of ";break;case 5/6:t="five-sixths of ";break;case 1/8:t="one-eighth of ";break;case 3/8:t="three-eighths of ";break;case 5/8:t="five-eighths of ";break;case 7/8:t="seven-eighths of ";break;default:t=1<e?e+" times ":100*e+"% of "}return t+n}},{"../util/ensure.js":24,"../values/size.js":30,"./descriptor.js":6,"./size_descriptor.js":15}],17:[function(r,t,e){"use strict";var o=r("../util/ensure.js"),i=r("./position_descriptor.js"),s=r("../values/position.js"),u="right",a="bottom",c="left",n=t.exports=function(t,e){var n=r("../q_frame.js");o.signature(arguments,[String,n]),t===c||t===u?i.x(this):"top"===t||t===a?i.y(this):o.unreachable("Unknown position: "+t),this._position=t,this._frame=e};function l(e){return function(t){return new n(e,t)}}i.extend(n),n.top=l("top"),n.right=l(u),n.bottom=l(a),n.left=l(c),n.prototype.value=function(){o.signature(arguments,[]);var t,e=this._frame.getRawScrollPosition(),n=s.x(e.x),r=s.y(e.y),i={width:(t=this._frame.get("html").toDomElement()).clientWidth,height:t.clientHeight};switch(this._position){case"top":return r;case u:return n.plus(s.x(i.width));case a:return r.plus(s.y(i.height));case c:return n;default:o.unreachable()}},n.prototype.toString=function(){return o.signature(arguments,[]),this._position+" edge of viewport"}},{"../q_frame.js":20,"../util/ensure.js":24,"../values/position.js":28,"./position_descriptor.js":12}],18:[function(i,t,e){"use strict";var o=i("./util/ensure.js"),s=i("./util/shim.js"),n=i("../vendor/camelcase-1.0.1-modified.js"),u=i("./descriptors/element_rendered.js"),a=i("./descriptors/element_edge.js"),c=i("./descriptors/center.js"),l=i("./descriptors/generic_size.js"),r=i("./assertable.js"),f=t.exports=function(t,e,n){var r=i("./q_frame.js");o.signature(arguments,[Object,r,String]),this._domElement=t,this._nickname=n,this.frame=e,this.rendered=u.create(this),this.top=a.top(this),this.right=a.right(this),this.bottom=a.bottom(this),this.left=a.left(this),this.center=c.x(this.left,this.right,"center of "+this),this.middle=c.y(this.top,this.bottom,"middle of "+this),this.width=l.create(this.left,this.right,"width of "+this),this.height=l.create(this.top,this.bottom,"height of "+this)};r.extend(f),f.prototype.getRawStyle=function(t){var e;return o.signature(arguments,[String]),null==(e=window.getComputedStyle?this.frame.toDomElement().contentWindow.getComputedStyle(this._domElement).getPropertyValue(t):this._domElement.currentStyle[n(t)])&&(e=""),e},f.prototype.getRawPosition=function(){o.signature(arguments,[]);var t=this._domElement.getBoundingClientRect();return{left:t.left,right:t.right,width:void 0!==t.width?t.width:t.right-t.left,top:t.top,bottom:t.bottom,height:void 0!==t.height?t.height:t.bottom-t.top}},f.prototype.calculatePixelValue=function(t){var e,n,r,i=this._domElement;if(void 0!==i.runtimeStyle)return e=i.runtimeStyle.left,n=i.style.left,i.runtimeStyle.left=i.currentStyle.left,i.style.left=t,r=i.style.pixelLeft,i.runtimeStyle.left=e,i.style.left=n,r;var o=i.style,s=o.position,u=o.left;return o.position="absolute",o.left=t,r=parseFloat(this.getRawStyle("left")),o.position=s,o.left=u,r},f.prototype.parent=function(t){if(o.signature(arguments,[[void 0,String]]),void 0===t&&(t="parent of "+this._nickname),this.equals(this.frame.body()))return null;var e=this._domElement.parentElement;return null===e?null:new f(e,this.frame,t)},f.prototype.add=function(t,e){o.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t+" in "+this._nickname);var n=document.createElement("div");n.innerHTML=s.String.trim(t),o.that(1===n.childNodes.length,"Expected one element, but got "+n.childNodes.length+" ("+t+")");var r=n.childNodes[0];return this._domElement.appendChild(r),new f(r,this.frame,e)},f.prototype.remove=function(){o.signature(arguments,[]),s.Element.remove(this._domElement)},f.prototype.toDomElement=function(){return o.signature(arguments,[]),this._domElement},f.prototype.toString=function(){return o.signature(arguments,[]),"'"+this._nickname+"'"},f.prototype.equals=function(t){return o.signature(arguments,[f]),this._domElement===t._domElement}},{"../vendor/camelcase-1.0.1-modified.js":33,"./assertable.js":3,"./descriptors/center.js":5,"./descriptors/element_edge.js":7,"./descriptors/element_rendered.js":8,"./descriptors/generic_size.js":10,"./q_frame.js":20,"./util/ensure.js":24,"./util/shim.js":26}],19:[function(i,t,e){"use strict";var o=i("./util/ensure.js"),s=i("./q_element.js"),n=t.exports=function(t,e,n){var r=i("./q_frame.js");o.signature(arguments,[Object,r,String]),this._nodeList=t,this._frame=e,this._nickname=n};n.prototype.length=function(){return o.signature(arguments,[]),this._nodeList.length},n.prototype.at=function(t,e){o.signature(arguments,[Number,[void 0,String]]);var n=t,r=this.length();n<0&&(n=r+n),o.that(0<=n&&n<r,"'"+this._nickname+"'["+t+"] is out of bounds; list length is "+r);var i=this._nodeList[n];return void 0===e&&(e=this._nickname+"["+n+"]"),new s(i,this._frame,e)},n.prototype.toString=function(){return o.signature(arguments,[]),"'"+this._nickname+"' list"}},{"./q_element.js":18,"./q_frame.js":20,"./util/ensure.js":24}],20:[function(t,e,n){"use strict";var g=t("./util/ensure.js"),y=t("./util/shim.js"),r=(t("./quixote.js"),t("./q_element.js")),i=t("./q_element_list.js"),o=t("./q_viewport.js"),s=t("./q_page.js"),_=t("../vendor/async-1.4.2.js"),b=e.exports=function(){g.signature(arguments,[]),this._domElement=null,this._loaded=!1,this._removed=!1};function j(t,e){t._frameLoadCallback=e}function w(t,e){if(void 0===t)return e(null,!0);var n=new XMLHttpRequest;n.open("HEAD",t),n.onreadystatechange=function(){if(2===n.readyState)return e(null,404!==n.status)},n.onerror=function(){return e("XMLHttpRequest error while using HTTP HEAD on URL '"+t+"': "+n.statusText)},n.send()}function x(t,e){var n,r;void 0===e?((r=t).contentWindow.document.open(),r.contentWindow.document.write("<!DOCTYPE html>\n<html><head></head><body></body></html>"),r.contentWindow.document.close()):(n=e,t.setAttribute("src",n))}function u(t){var e;a(t),e=t,g.that(!e._removed,"Attempted to use frame after it was removed")}function a(t){g.that(t._loaded,"QFrame not loaded: Wait for frame creation callback to execute before using frame")}b.create=function(s,a,u){g.signature(arguments,[Object,[Object,Function],[void 0,Function]]),void 0===u&&(u=a,a={});var c=a.width||2e3,l=a.height||2e3,f=a.src,p=a.stylesheet||[],h=a.css;y.Array.isArray(p)||(p=[p]);var n,r,i,d=new b;function o(n,r){w(n,function(t,e){return r(t||(e?null:m("stylesheet",n)))})}function m(t,e){return new Error("404 error while loading "+t+" ("+e+")")}return r=p,i=function(t){if(t)return u(t);var e,n,r,i,o=(e=s,n=c,r=l,(i=document.createElement("iframe")).setAttribute("width",n),i.setAttribute("height",r),i.setAttribute("frameborder","0"),e.appendChild(i),i);y.EventTarget.addEventListener(o,"load",v),x(o,f),d._domElement=o,j(d,u)},w(n=f,function(t,e){return t?i(t):e?void _.each(r,o,i):i(m("src",n))}),d;function v(){setTimeout(function(){var t,e,n,r,i,o,s,u;e=c,n=l,r=f,i=p,(t=d)._loaded=!0,t._document=t._domElement.contentDocument,t._originalBody=t._document.body.innerHTML,t._originalWidth=e,t._originalHeight=n,t._originalSrc=r,t._originalStylesheets=i,o=d,s=p,u=function(){h&&function(t,e){var n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=e:n.innerHTML=e;y.Document.head(t._document).appendChild(n)}(d,a.css),d._frameLoadCallback(null,d)},_.each(s,function(t,e){var n=document.createElement("link");y.EventTarget.addEventListener(n,"load",function(t){e(null)}),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t),y.Document.head(o._document).appendChild(n)},u)},0)}},b.prototype.reset=function(){g.signature(arguments,[]),u(this),this._document.body.innerHTML=this._originalBody,this.scroll(0,0),this.resize(this._originalWidth,this._originalHeight)},b.prototype.reload=function(t){g.signature(arguments,[Function]),u(this);var e=this._domElement,n=this._originalSrc;this.resize(this._originalWidth,this._originalHeight),j(this,t),x(e,n)},b.prototype.toDomElement=function(){return g.signature(arguments,[]),u(this),this._domElement},b.prototype.remove=function(){g.signature(arguments,[]),a(this),this._removed||(this._domElement.parentNode.removeChild(this._domElement),this._removed=!0)},b.prototype.viewport=function(){return g.signature(arguments,[]),u(this),new o(this)},b.prototype.page=function(){return g.signature(arguments,[]),u(this),new s(this)},b.prototype.body=function(){return g.signature(arguments,[]),this.get("body")},b.prototype.add=function(t,e){return g.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t),this.body().add(t,e)},b.prototype.get=function(t,e){g.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t),u(this);var n=this._document.querySelectorAll(t);return g.that(1===n.length,"Expected one element to match '"+t+"', but found "+n.length),new r(n[0],this,e)},b.prototype.getAll=function(t,e){return g.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t),u(this),new i(this._document.querySelectorAll(t),this,e)},b.prototype.scroll=function(t,e){g.signature(arguments,[Number,Number]),u(this),this._domElement.contentWindow.scroll(t,e)},b.prototype.getRawScrollPosition=function(){return g.signature(arguments,[]),u(this),{x:y.Window.pageXOffset(this._domElement.contentWindow,this._document),y:y.Window.pageYOffset(this._domElement.contentWindow,this._document)}},b.prototype.resize=function(t,e){g.signature(arguments,[Number,Number]),u(this),this._domElement.setAttribute("width",""+t),this._domElement.setAttribute("height",""+e),this.body().toDomElement().offsetTop}},{"../vendor/async-1.4.2.js":32,"./q_element.js":18,"./q_element_list.js":19,"./q_page.js":21,"./q_viewport.js":22,"./quixote.js":23,"./util/ensure.js":24,"./util/shim.js":26}],21:[function(n,t,e){"use strict";var r=n("./util/ensure.js"),i=n("./descriptors/page_edge.js"),o=n("./descriptors/center.js"),s=n("./assertable.js"),u=n("./descriptors/generic_size.js"),a=t.exports=function(t){var e=n("./q_frame.js");r.signature(arguments,[e]),this.top=i.top(t),this.right=i.right(t),this.bottom=i.bottom(t),this.left=i.left(t),this.width=u.create(this.left,this.right,"width of page"),this.height=u.create(this.top,this.bottom,"height of page"),this.center=o.x(this.left,this.right,"center of page"),this.middle=o.y(this.top,this.bottom,"middle of page")};s.extend(a)},{"./assertable.js":3,"./descriptors/center.js":5,"./descriptors/generic_size.js":10,"./descriptors/page_edge.js":11,"./q_frame.js":20,"./util/ensure.js":24}],22:[function(n,t,e){"use strict";var r=n("./util/ensure.js"),i=n("./descriptors/viewport_edge.js"),o=n("./descriptors/center.js"),s=n("./assertable.js"),u=n("./descriptors/generic_size.js"),a=t.exports=function(t){var e=n("./q_frame.js");r.signature(arguments,[e]),this.top=i.top(t),this.right=i.right(t),this.bottom=i.bottom(t),this.left=i.left(t),this.width=u.create(this.left,this.right,"width of viewport"),this.height=u.create(this.top,this.bottom,"height of viewport"),this.center=o.x(this.left,this.right,"center of viewport"),this.middle=o.y(this.top,this.bottom,"middle of viewport")};s.extend(a)},{"./assertable.js":3,"./descriptors/center.js":5,"./descriptors/generic_size.js":10,"./descriptors/viewport_edge.js":17,"./q_frame.js":20,"./util/ensure.js":24}],23:[function(t,e,n){"use strict";var u=t("./util/ensure.js"),r=t("./q_frame.js"),a=t("./values/size.js"),c=null;function i(t){return function(){return u.signature(arguments,[]),u.that(null!==c,"Must create a frame before using Quixote browser feature detection."),c[t]}}n.createFrame=function(t,n){return r.create(document.body,t,function(t,e){null===c?function(o){c={};var s=r.create(document.body,{width:1500,height:200},function(t){if(t)return console.log("Error while creating Quixote browser feature detection frame: "+t),o();try{c.enlargesFrame=(i=1500,(r=s).add("<div style='width: "+(i+200)+"px'>force scrolling</div>"),!r.viewport().width.value().equals(a.create(i))),c.misreportsClipAuto="auto"!==s.add("<div style='clip: auto;'></div>").getRawStyle("clip"),c.misreportsClipValues=(e=s.add("<div style='clip: rect(auto, auto, auto, auto);'></div>"),(""!==(n=e.getRawStyle("clip"))||"auto"!==e.getRawStyle("clip-top"))&&"rect(auto, auto, auto, auto)"!==n&&"rect(auto auto auto auto)"!==n),c.roundsOffPixelCalculations=function(t){var e=t.add("<div style='font-size: 15px;'></div>").calculatePixelValue("0.5em");if(7.5===e)return!1;if(8===e)return!0;u.unreachable("Failure in roundsOffPixelValues() detection: expected 7.5 or 8, but got "+e)}(s),s.reset(),function(t,e,n){u.that(1500<=e,"Detector frame width must be larger than screen to detect font enlargement"),t.add("<div><style>p { font-size: 15px; }</style></div>");var r=t.add("<p>arbitrary text</p>");t.add("<p>must have two p tags to work</p>");r.offsetHeight;setTimeout(function(){var t=r.getRawStyle("font-size");return u.that(""!==t,"Expected font-size to be a value"),n("12pt"!==t&&"15px"!==t)},0)}(s,1500,function(t){return c.enlargesFonts=t,s.remove(),o()})}catch(t){console.log("Error during Quixote browser feature detection: "+t)}var e,n,r,i})}(function(){n(t,e)}):n(t,e)})},n.browser={},n.browser.enlargesFrameToPageSize=i("enlargesFrame"),n.browser.enlargesFonts=i("enlargesFonts"),n.browser.misreportsClipAutoProperty=i("misreportsClipAuto"),n.browser.misreportsAutoValuesInClipProperty=i("misreportsClipValues"),n.browser.roundsOffPixelCalculations=i("roundsOffPixelCalculations")},{"./q_frame.js":20,"./util/ensure.js":24,"./values/size.js":30}],24:[function(t,e,c){"use strict";var l=t("./shim.js"),o=t("./oop.js");function f(t,e){for(var n=0;n<e.length;n++)if(r(t,e[n]))return 1;return;function r(t,e){switch(i(t)){case"boolean":return e===Boolean;case"string":return e===String;case"number":return e===Number;case"array":return e===Array;case"function":return e===Function;case"object":return e===Object||t instanceof e;case"undefined":return void 0===e;case"null":return null===e;case"NaN":return"number"==typeof e&&isNaN(e);default:c.unreachable()}}}function p(t){for(var e="",n="",r=0;r<t.length;r++)n+=e+i(t[r]),e=r===t.length-2?", or ":", ";return n;function i(t){switch(t){case Boolean:return"boolean";case String:return"string";case Number:return"number";case Array:return"array";case Function:return"function";case null:return"null";case void 0:return"undefined";default:return"number"==typeof t&&isNaN(t)?"NaN":o.className(t)+" instance"}}}function h(t){var e=i(t);return"object"!==e?e:o.instanceName(t)+" instance"}function i(t){var e=typeof t;return null===t&&(e="null"),l.Array.isArray(t)&&(e="array"),"number"===e&&isNaN(t)&&(e="NaN"),e}c.that=function(t,e){if(void 0===e&&(e="Expected condition to be true"),!1===t)throw new d(c.that,e);if(!0!==t)throw new d(c.that,"Expected condition to be true or false")},c.unreachable=function(t){throw t=t||"Unreachable code executed",new d(c.unreachable,t)},c.signature=function(t,e){var n,r,i,o=(e=e||[]).length,s=t.length;if(o<s)throw new d(c.signature,"Function called with too many arguments: expected "+o+" but got "+s);for(var u=0;u<e.length;u++)if(n=t[u],r=e[u],i="Argument #"+(u+1),l.Array.isArray(r)||(r=[r]),!f(n,r)){var a=i+" expected "+p(r)+", but was "+h(n);throw new d(c.signature,a)}};var d=c.EnsureException=function(t,e){Error.captureStackTrace?Error.captureStackTrace(this,t):this.stack=(new Error).stack,this.message=e};d.prototype=l.Object.create(Error.prototype),(d.prototype.constructor=d).prototype.name="EnsureException"},{"./oop.js":25,"./shim.js":26}],25:[function(t,e,n){"use strict";var i=t("./shim.js");n.className=function(t){if("function"!=typeof t)throw new Error("Not a constructor");return i.Function.name(t)},n.instanceName=function(t){var e=i.Object.getPrototypeOf(t);if(null===e)return"<no prototype>";var n=e.constructor;return null==n?"<anon>":i.Function.name(n)},n.extendFn=function(e){return function(t){t.prototype=i.Object.create(e.prototype),t.prototype.constructor=t}},n.makeAbstract=function(r,t){var e=i.Function.name(r);i.Array.forEach(t,function(t){r.prototype[t]=function(){throw new Error(e+" subclasses must implement "+t+"() method")}}),r.prototype.checkAbstractMethods=function(){var e=[],n=this;return i.Array.forEach(t,function(t){n[t]===r.prototype[t]&&e.push(t+"()")}),e}}},{"./shim.js":26}],26:[function(t,e,n){"use strict";n.Array={isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},every:function(t,e,n){if(Array.prototype.every)return t.every(e,n);var r,i;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),s=o.length>>>0;if("function"!=typeof e)throw new TypeError;for(1<arguments.length&&(r=n),i=0;i<s;){var u;if(i in o)if(u=o[i],!e.call(r,u,i,o))return!1;i++}return!0},forEach:function(t,e,n){if(Array.prototype.forEach)return t.forEach(e,n);var r,i;if(null==t)throw new TypeError(" this is null or not defined");var o=Object(t),s=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(r=n),i=0;i<s;){var u;i in o&&(u=o[i],e.call(r,u,i,o)),i++}}},n.Document={head:function(t){return t.head?t.head:t.querySelector("head")}},n.Element={remove:function(t){t.parentNode.removeChild(t)}},n.EventTarget={addEventListener:function(t,e,n){if(t.addEventListener)return t.addEventListener(e,n);t.attachEvent("on"+e,n)}},n.Function={name:function(t){if(t.name)return t.name;var e=/function\s+(.{1,})\s*\(/.exec(t.toString());return e&&1<e.length?e[1]:"<anon>"}},n.Object={create:function(t){if(Object.create)return Object.create(t);function e(){}return e.prototype=t,new e},getPrototypeOf:function(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):(t.constructor?t.constructor.prototype:null)||null},keys:function(t){if(Object.keys)return Object.keys(t);var e=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=r.length;if("object"!=typeof t&&("function"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");var o,s,u=[];for(o in t)e.call(t,o)&&u.push(o);if(n)for(s=0;s<i;s++)e.call(t,r[s])&&u.push(r[s]);return u}},n.String={trim:function(t){return void 0!==t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},n.Window={pageXOffset:function(t,e){return void 0!==t.pageXOffset?t.pageXOffset:"CSS1Compat"===(e.compatMode||"")?e.documentElement.scrollLeft:e.body.scrollLeft},pageYOffset:function(t,e){return void 0!==t.pageYOffset?t.pageYOffset:"CSS1Compat"===(e.compatMode||"")?e.documentElement.scrollTop:e.body.scrollTop}}},{}],27:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./value.js"),o=e.exports=function(t){r.signature(arguments,[[Number,null]]),this._none=null===t,this._amount=t};i.extend(o),o.create=function(t){return new o(t)},o.createNone=function(){return new o(null)},o.ZERO=o.create(0),o.NONE=o.createNone(),o.prototype.compatibility=function(){return[o]},o.prototype.plus=i.safe(function(t){return this._none||t._none?o.createNone():new o(this._amount+t._amount)}),o.prototype.minus=i.safe(function(t){return this._none||t._none?o.createNone():new o(this._amount-t._amount)}),o.prototype.difference=i.safe(function(t){return this._none||t._none?o.createNone():new o(Math.abs(this._amount-t._amount))}),o.prototype.times=function(t){return r.signature(arguments,[Number]),this._none?o.createNone():new o(this._amount*t)},o.prototype.average=i.safe(function(t){return this._none||t._none?o.createNone():new o((this._amount+t._amount)/2)}),o.prototype.compare=i.safe(function(t){var e=!this._none&&!t._none,n=this._none&&t._none,r=!this._none&&t._none;if(e){var i=this._amount-t._amount;return Math.abs(i)<=.5?0:i}return n?0:r?1:-1}),o.min=function(t,e){return r.signature(arguments,[o,o]),t._none||e._none?o.createNone():t.compare(e)<=0?t:e},o.max=function(t,e){return r.signature(arguments,[o,o]),t._none||e._none?o.createNone():0<=t.compare(e)?t:e},o.prototype.diff=i.safe(function(t){if(0===this.compare(t))return"";if(this._none||t._none)return"non-measurable";var e=Math.abs(this._amount-t._amount),n=e;return 100*e!==Math.floor(100*e)&&(n="about "+e.toFixed(2)),n+"px"}),o.prototype.toString=function(){return r.signature(arguments,[]),this._none?"no pixels":this._amount+"px"}},{"../util/ensure.js":24,"./value.js":31}],28:[function(t,e,n){"use strict";var o=t("../util/ensure.js"),r=t("./value.js"),i=t("./pixels.js"),s=t("./size.js"),u=e.exports=function(t,e){o.signature(arguments,[String,[Number,i]]),this._dimension=t,this._value="number"==typeof e?i.create(e):e};function a(t,e){e instanceof u&&o.that(t._dimension===e._dimension,"Can't compare X coordinate to Y coordinate")}function c(t){return t._value.equals(i.NONE)}r.extend(u),u.x=function(t){return o.signature(arguments,[[Number,i]]),new u("x",t)},u.y=function(t){return o.signature(arguments,[[Number,i]]),new u("y",t)},u.noX=function(){return o.signature(arguments,[]),new u("x",i.NONE)},u.noY=function(){return o.signature(arguments,[]),new u("y",i.NONE)},u.prototype.compatibility=function(){return[u,s]},u.prototype.distanceTo=function(t){return o.signature(arguments,[u]),a(this,t),s.create(this._value.difference(t.toPixels()))},u.prototype.plus=r.safe(function(t){return a(this,t),new u(this._dimension,this._value.plus(t.toPixels()))}),u.prototype.minus=r.safe(function(t){return a(this,t),new u(this._dimension,this._value.minus(t.toPixels()))}),u.prototype.midpoint=r.safe(function(t){return a(this,t),new u(this._dimension,this._value.average(t.toPixels()))}),u.prototype.compare=r.safe(function(t){return a(this,t),this._value.compare(t.toPixels())}),u.prototype.min=r.safe(function(t){return a(this,t),new u(this._dimension,i.min(this._value,t.toPixels()))}),u.prototype.max=r.safe(function(t){return a(this,t),new u(this._dimension,i.max(this._value,t.toPixels()))}),u.prototype.diff=r.safe(function(t){o.signature(arguments,[u]),a(this,t);var e,n=this._value,r=t._value;if(n.equals(r))return"";if(c(t)&&!c(this))return"rendered when not expected";if(!c(t)&&c(this))return"not rendered";var i=n.compare(r);return e="x"===this._dimension?i<0?"further left than expected":"further right than expected":i<0?"higher than expected":"lower than expected",n.diff(r)+" "+e}),u.prototype.toString=function(){return o.signature(arguments,[]),c(this)?"not rendered":this._value.toString()},u.prototype.toPixels=function(){return o.signature(arguments,[]),this._value}},{"../util/ensure.js":24,"./pixels.js":27,"./size.js":30,"./value.js":31}],29:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./value.js"),o=e.exports=function(t){r.signature(arguments,[String]),this._state=t};i.extend(o),o.rendered=function(){return new o("rendered")},o.notRendered=function(){return new o("not rendered")},o.prototype.compatibility=function(){return[o]},o.prototype.diff=i.safe(function(t){return this._state===t._state?"":"different than expected"}),o.prototype.toString=function(){return this._state}},{"../util/ensure.js":24,"./value.js":31}],30:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./value.js"),o=t("./pixels.js"),s=e.exports=function(t){r.signature(arguments,[[Number,o]]),this._value="number"==typeof t?o.create(t):t};function u(t){return t._value.equals(o.NONE)}i.extend(s),s.create=function(t){return new s(t)},s.createNone=function(){return r.signature(arguments,[]),new s(o.NONE)},s.prototype.compatibility=function(){return[s]},s.prototype.plus=i.safe(function(t){return new s(this._value.plus(t._value))}),s.prototype.minus=i.safe(function(t){return new s(this._value.minus(t._value))}),s.prototype.times=function(t){return new s(this._value.times(t))},s.prototype.compare=i.safe(function(t){return this._value.compare(t._value)}),s.prototype.diff=i.safe(function(t){var e=this._value,n=t._value;if(e.equals(n))return"";if(u(t)&&!u(this))return"rendered when not expected";if(!u(t)&&u(this))return"not rendered";var r=0<e.compare(n)?" larger than expected":" smaller than expected";return e.diff(n)+r}),s.prototype.toString=function(){return r.signature(arguments,[]),u(this)?"not rendered":this._value.toString()},s.prototype.toPixels=function(){return r.signature(arguments,[]),this._value}},{"../util/ensure.js":24,"./pixels.js":27,"./value.js":31}],31:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),s=t("../util/oop.js"),i=(t("../util/shim.js"),e.exports=function(){});function o(e,t,n){var r=typeof n;null===n&&(r="null"),"object"!==r&&o(r);for(var i=0;i<t.length;i++)if(n instanceof t[i])return;function o(t){throw new Error(s.instanceName(e)+" isn't compatible with "+t)}o(s.instanceName(n))}i.extend=s.extendFn(i),s.makeAbstract(i,["compatibility","diff","toString"]),i.safe=function(t){return function(){return function(t,e,n){for(var r,i=0;i<n.length;i++)r=n[i],o(t,e,r)}(this,this.compatibility(),arguments),t.apply(this,arguments)}},i.prototype.value=function(){return r.signature(arguments,[]),this},i.prototype.equals=function(t){return""===this.diff(t)}},{"../util/ensure.js":24,"../util/oop.js":25,"../util/shim.js":26}],32:[function(t,W,e){(function(R,M,U){!function(){var t,h={};function d(){}function u(t){return t}function e(t){return!!t}function n(t){return!t}var r="object"==typeof self&&self.self===self&&self||"object"==typeof M&&M.global===M&&M||this;function l(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function m(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}null!=r&&(t=r.async),h.noConflict=function(){return r.async=t,h};var i=Object.prototype.toString,v=Array.isArray||function(t){return"[object Array]"===i.call(t)};function a(t){return v(t)||"number"==typeof t.length&&0<=t.length&&t.length%1==0}function g(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function c(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function o(t){return c(Array(t),function(t,e){return e})}function y(e,n){g(b(e),function(t){n(e[t],t)})}function _(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var b=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};function f(t){var e,n,r=-1;return a(t)?(e=t.length,function(){return++r<e?r:null}):(n=b(t),e=n.length,function(){return++r<e?n[r]:null})}function j(r,i){return i=null==i?r.length-1:+i,function(){for(var t=Math.max(arguments.length-i,0),e=Array(t),n=0;n<t;n++)e[n]=arguments[n+i];switch(i){case 0:return r.call(this,e);case 1:return r.call(this,arguments[0],e)}}}function s(r){return function(t,e,n){return r(t,n)}}var p="function"==typeof U&&U,w=p?function(t){p(t)}:function(t){setTimeout(t,0)};function x(c){return function(n,r,i){i=m(i||d);var o=f(n=n||[]);if(c<=0)return i(null);var s=!1,u=0,a=!1;!function e(){if(s&&u<=0)return i(null);for(;u<c&&!a;){var t=o();if(null===t)return s=!0,void(u<=0&&i(null));u+=1,r(n[t],t,l(function(t){--u,t?(i(t),a=!0):e()}))}}()}}function S(r){return function(t,e,n){return r(h.eachOf,t,e,n)}}function E(i){return function(t,e,n,r){return i(x(e),t,n,r)}}function k(r){return function(t,e,n){return r(h.eachOfSeries,t,e,n)}}function O(t,e,i,n){n=m(n||d);var o=[];t(e,function(t,n,r){i(t,function(t,e){o[n]=e,r(t)})},function(t){n(t,o)})}function T(t,e,i,n){var o=[];t(e,function(e,n,r){i(e,function(t){t&&o.push({index:n,value:e}),r()})},function(){n(c(o.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function N(t,e,n,r){T(t,e,function(t,e){n(t,function(t){e(!t)})},r)}function q(s,u,a){return function(t,e,r,i){function n(){i&&i(a(!1,void 0))}function o(e,t,n){if(!i)return n();r(e,function(t){i&&u(t)&&(i(a(!0,e)),i=r=!1),n()})}3<arguments.length?s(t,e,o,n):(i=r,r=e,s(t,o,n))}}function A(t,e){return e}function z(t,e,n){n=n||d;var i=a(e)?[]:{};t(e,function(t,n,r){t(j(function(t,e){e.length<=1&&(e=e[0]),i[n]=e,r(t)}))},function(t){n(t,i)})}function L(t,e,r,n){var i=[];t(e,function(t,e,n){r(t,function(t,e){i=i.concat(e||[]),n(t)})},function(t){n(t,i)})}function C(r,t,e){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");function n(n,t,r,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(n.started=!0,v(t)||(t=[t]),0===t.length&&n.idle())return h.setImmediate(function(){n.drain()});g(t,function(t){var e={data:t,callback:i||d};r?n.tasks.unshift(e):n.tasks.push(e),n.tasks.length===n.concurrency&&n.saturated()}),h.setImmediate(n.process)}function i(t,n){return function(){--o;var e=arguments;g(n,function(t){t.callback.apply(t,e)}),t.tasks.length+o===0&&t.drain(),t.process()}}var o=0,s={tasks:[],concurrency:t,payload:e,saturated:d,empty:d,drain:d,started:!1,paused:!1,push:function(t,e){n(s,t,!1,e)},kill:function(){s.drain=d,s.tasks=[]},unshift:function(t,e){n(s,t,!0,e)},process:function(){if(!s.paused&&o<s.concurrency&&s.tasks.length)for(;o<s.concurrency&&s.tasks.length;){var t=s.payload?s.tasks.splice(0,s.payload):s.tasks.splice(0,s.tasks.length),e=c(t,function(t){return t.data});0===s.tasks.length&&s.empty(),o+=1;var n=l(i(s,t));r(e,n)}},length:function(){return s.tasks.length},running:function(){return o},idle:function(){return s.tasks.length+o===0},pause:function(){s.paused=!0},resume:function(){if(!1!==s.paused){s.paused=!1;for(var t=Math.min(s.concurrency,s.tasks.length),e=1;e<=t;e++)h.setImmediate(s.process)}}};return s}function P(n){return j(function(t,e){t.apply(null,e.concat([j(function(t,e){"object"==typeof console&&(t?console.error&&console.error(t):console[n]&&g(e,function(t){console[n](t)}))})]))})}function F(r){return function(t,e,n){r(o(t),e,n)}}function I(o){return j(function(e,t){var n=j(function(r){var i=this,t=r.pop();return o(e,function(t,e,n){t.apply(i,r.concat([n]))},t)});return t.length?n.apply(this,t):n})}function D(r){return j(function(t){var e=t.pop();t.push(function(){var t=arguments;n?h.setImmediate(function(){e.apply(null,t)}):e.apply(null,t)});var n=!0;r.apply(this,t),n=!1})}"object"==typeof R&&"function"==typeof R.nextTick?h.nextTick=R.nextTick:h.nextTick=w,h.setImmediate=p?w:h.nextTick,h.forEach=h.each=function(t,e,n){return h.eachOf(t,s(e),n)},h.forEachSeries=h.eachSeries=function(t,e,n){return h.eachOfSeries(t,s(e),n)},h.forEachLimit=h.eachLimit=function(t,e,n,r){return x(e)(t,s(n),r)},h.forEachOf=h.eachOf=function(n,r,e){e=m(e||d);var t,i,o=a(n=n||[])?n.length:b(n).length,s=0;if(!o)return e(null);function u(t){t?e(t):o<=(s+=1)&&e(null)}i=function(t,e){r(n[e],e,l(u))},(a(t=n)?g:y)(t,i)},h.forEachOfSeries=h.eachOfSeries=function(t,r,i){i=m(i||d);var o=f(t=t||[]),s=o();!function e(){var n=!0;if(null===s)return i(null);r(t[s],s,l(function(t){if(t)i(t);else{if(null===(s=o()))return i(null);n?h.setImmediate(e):e()}})),n=!1}()},h.forEachOfLimit=h.eachOfLimit=function(t,e,n,r){x(e)(t,n,r)},h.map=S(O),h.mapSeries=k(O),h.mapLimit=E(O),h.inject=h.foldl=h.reduce=function(t,r,i,e){h.eachOfSeries(t,function(t,e,n){i(r,t,function(t,e){r=e,n(t)})},function(t){e(t||null,r)})},h.foldr=h.reduceRight=function(t,e,n,r){var i=c(t,u).reverse();h.reduce(i,e,n,r)},h.select=h.filter=S(T),h.selectLimit=h.filterLimit=E(T),h.selectSeries=h.filterSeries=k(T),h.reject=S(N),h.rejectLimit=E(N),h.rejectSeries=k(N),h.any=h.some=q(h.eachOf,e,u),h.someLimit=q(h.eachOfLimit,e,u),h.all=h.every=q(h.eachOf,n,n),h.everyLimit=q(h.eachOfLimit,n,n),h.detect=q(h.eachOf,u,A),h.detectSeries=q(h.eachOfSeries,u,A),h.detectLimit=q(h.eachOfLimit,u,A),h.sortBy=function(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:r<n?1:0}h.map(t,function(n,r){e(n,function(t,e){t?r(t):r(null,{value:n,criteria:e})})},function(t,e){if(t)return n(t);n(null,c(e.sort(r),function(t){return t.value}))})},h.auto=function(u,a){a=m(a||d);var t=b(u),e=t.length;if(!e)return a(null);var c={},l=[];function f(t){l.unshift(t)}function p(){e--,g(l.slice(0),function(t){t()})}f(function(){e||a(null,c)}),g(t,function(o){for(var t,n=v(u[o])?u[o]:[u[o]],r=j(function(t,e){if(e.length<=1&&(e=e[0]),t){var n={};y(c,function(t,e){n[e]=t}),n[o]=e,a(t,n)}else c[o]=e,h.setImmediate(p)}),e=n.slice(0,n.length-1),i=e.length;i--;){if(!(t=u[e[i]]))throw new Error("Has inexistant dependency");if(v(t)&&0<=_(t,o))throw new Error("Has cyclic dependencies")}function s(){return r=function(t,e){return t&&c.hasOwnProperty(e)},i=!0,g(e,function(t,e,n){i=r(i,t,e,n)}),i&&!c.hasOwnProperty(o);var r,i}s()?n[n.length-1](r,c):f(function t(){s()&&(0<=(e=_(l,t))&&l.splice(e,1),n[n.length-1](r,c));var e})})},h.retry=function(t,e,n){var o=[],s={times:5,interval:0};var r=arguments.length;if(r<1||3<r)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function i(n,e){function t(t,r){return function(n){t(function(t,e){n(!t||r,{err:t,result:e})},e)}}function r(e){return function(t){setTimeout(function(){t(null)},e)}}for(;s.times;){var i=!--s.times;o.push(t(s.task,i)),!i&&0<s.interval&&o.push(r(s.interval))}h.series(o,function(t,e){e=e[e.length-1],(n||s.callback)(e.err,e.result)})}return r<=2&&"function"==typeof t&&(n=e,e=t),"function"!=typeof t&&function(t,e){if("number"==typeof e)t.times=parseInt(e,10)||5;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||5,t.interval=parseInt(e.interval,10)||0}}(s,t),s.callback=n,s.task=e,s.callback?i():i},h.waterfall=function(t,o){if(o=m(o||d),!v(t)){var e=new Error("First argument to waterfall must be an array of functions");return o(e)}if(!t.length)return o();!function r(i){return j(function(t,e){if(t)o.apply(null,[t].concat(e));else{var n=i.next();n?e.push(r(n)):e.push(o),D(i).apply(null,e)}})}(h.iterator(t))()},h.parallel=function(t,e){z(h.eachOf,t,e)},h.parallelLimit=function(t,e,n){z(x(e),t,n)},h.series=function(t,e){z(h.eachOfSeries,t,e)},h.iterator=function(r){return function t(e){function n(){return r.length&&r[e].apply(null,arguments),n.next()}return n.next=function(){return e<r.length-1?t(e+1):null},n}(0)},h.apply=j(function(e,n){return j(function(t){return e.apply(null,n.concat(t))})}),h.concat=S(L),h.concatSeries=k(L),h.whilst=function(n,r,i){if(i=i||d,n()){var o=j(function(t,e){t?i(t):n.apply(this,e)?r(o):i(null)});r(o)}else i(null)},h.doWhilst=function(t,e,n){var r=0;return h.whilst(function(){return++r<=1||e.apply(this,arguments)},t,n)},h.until=function(t,e,n){return h.whilst(function(){return!t.apply(this,arguments)},e,n)},h.doUntil=function(t,e,n){return h.doWhilst(t,function(){return!e.apply(this,arguments)},n)},h.during=function(n,r,i){i=i||d;var o=j(function(t,e){t?i(t):(e.push(s),n.apply(this,e))}),s=function(t,e){t?i(t):e?r(o):i(null)};n(s)},h.doDuring=function(t,e,n){var r=0;h.during(function(t){r++<1?t(null,!0):e.apply(this,arguments)},t,n)},h.queue=function(n,t){return C(function(t,e){n(t[0],e)},t,1)},h.priorityQueue=function(t,e){function o(t,e){return t.priority-e.priority}function r(n,t,r,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(n.started=!0,v(t)||(t=[t]),0===t.length)return h.setImmediate(function(){n.drain()});g(t,function(t){var e={data:t,priority:r,callback:"function"==typeof i?i:d};n.tasks.splice(function(t,e,n){for(var r=-1,i=t.length-1;r<i;){var o=r+(i-r+1>>>1);0<=n(e,t[o])?r=o:i=o-1}return r}(n.tasks,e,o)+1,0,e),n.tasks.length===n.concurrency&&n.saturated(),h.setImmediate(n.process)})}var i=h.queue(t,e);return i.push=function(t,e,n){r(i,t,e,n)},delete i.unshift,i},h.cargo=function(t,e){return C(t,1,e)},h.log=P("log"),h.dir=P("dir"),h.memoize=function(n,r){var o={},s={};r=r||u;var t=j(function(t){var e=t.pop(),i=r.apply(null,t);i in o?h.setImmediate(function(){e.apply(null,o[i])}):i in s?s[i].push(e):(s[i]=[e],n.apply(null,t.concat([j(function(t){o[i]=t;var e=s[i];delete s[i];for(var n=0,r=e.length;n<r;n++)e[n].apply(null,t)})])))});return t.memo=o,t.unmemoized=n,t},h.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},h.times=F(h.map),h.timesSeries=F(h.mapSeries),h.timesLimit=function(t,e,n,r){return h.mapLimit(o(t),e,n,r)},h.seq=function(){var e=arguments;return j(function(t){var r=this,n=t[t.length-1];"function"==typeof n?t.pop():n=d,h.reduce(e,t,function(t,e,n){e.apply(r,t.concat([j(function(t,e){n(t,e)})]))},function(t,e){n.apply(r,[t].concat(e))})})},h.compose=function(){return h.seq.apply(null,Array.prototype.reverse.call(arguments))},h.applyEach=I(h.eachOf),h.applyEachSeries=I(h.eachOfSeries),h.forever=function(t,e){var n=l(e||d),r=D(t);!function t(e){if(e)return n(e);r(t)}()},h.ensureAsync=D,h.constant=j(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),h.wrapSync=h.asyncify=function(o){return j(function(t){var e,n,r,i=t.pop();try{e=o.apply(this,t)}catch(t){return i(t)}("function"==(r=typeof(n=e))||"object"==r&&n)&&"function"==typeof e.then?e.then(function(t){i(null,t)}).catch(function(t){i(t.message?t:new Error(t))}):i(null,e)})},"object"==typeof W&&W.exports?W.exports=h:r.async=h}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{_process:1,timers:2}],33:[function(t,e,n){"use strict";e.exports=function(t){return 1===t.length?t:t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(t,e){return e.toUpperCase()})}},{}]},{},[23])(23)});