var t=require("preact");function n(n,t){for(var r in t)n[r]=t[r];return n}function r(n){this.getChildContext=function(){return{store:n.store}}}r.prototype.render=function(n){return n.children[0]},exports.createStore=function(u){var c=[];function t(n){for(var t=[],r=0;r<c.length;r++)c[r]===n?n=null:t.push(c[r]);c=t}function r(t,r,e){u=r?t:n(n({},u),t);for(var o=c,i=0;i<o.length;i++)o[i](u,e)}return u=u||{},{action:function(o){function i(n){r(n,!1,o)}return function(){for(var n=arguments,t=[u],r=0;r<arguments.length;r++)t.push(n[r]);var e=o.apply(this,t);if(null!=e)return e.then?e.then(i):i(e)}},setState:r,subscribe:function(n){return c.push(n),function(){t(n)}},unsubscribe:t,getState:function(){return u}}},exports.Provider=r,exports.connect=function(a,p){var e;return"function"!=typeof a&&("string"==typeof(e=a||[])&&(e=e.split(/\s*,\s*/)),a=function(n){for(var t={},r=0;r<e.length;r++)t[e[r]]=n[e[r]];return t}),function(s){function r(r,e){function o(){var n=a(u?u.getState():{},i.props);for(var t in n)if(n[t]!==c[t])return c=n,i.setState();for(var r in c)if(!(r in n))return c=n,i.setState()}var i=this,u=e.store,c=a(u?u.getState():{},r),f=p?function(n,t){"function"==typeof n&&(n=n(t));var r={};for(var e in n)r[e]=t.action(n[e]);return r}(p,u):{store:u};this.componentWillReceiveProps=o,this.componentDidMount=function(){u.subscribe(o)},this.componentWillUnmount=function(){u.unsubscribe(o)},this.render=function(r){return t.h(s,n(n(n({},f),r),c))}}return(r.prototype=new t.Component).constructor=r}};