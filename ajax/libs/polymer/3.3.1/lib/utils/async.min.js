import"./boot.js";let microtaskCurrHandle=0,microtaskLastHandle=0,microtaskCallbacks=[],microtaskNodeContent=0,microtaskNode=document.createTextNode("");function microtaskFlush(){const a=microtaskCallbacks.length;for(let t=0;t<a;t++){let a=microtaskCallbacks[t];if(a)try{a()}catch(a){setTimeout(()=>{throw a})}}microtaskCallbacks.splice(0,a),microtaskLastHandle+=a}new window.MutationObserver(microtaskFlush).observe(microtaskNode,{characterData:!0});const timeOut={after:a=>({run:t=>window.setTimeout(t,a),cancel(a){window.clearTimeout(a)}}),run:(a,t)=>window.setTimeout(a,t),cancel(a){window.clearTimeout(a)}};export{timeOut};const animationFrame={run:a=>window.requestAnimationFrame(a),cancel(a){window.cancelAnimationFrame(a)}};export{animationFrame};const idlePeriod={run:a=>window.requestIdleCallback?window.requestIdleCallback(a):window.setTimeout(a,16),cancel(a){window.cancelIdleCallback?window.cancelIdleCallback(a):window.clearTimeout(a)}};export{idlePeriod};const microTask={run:a=>(microtaskNode.textContent=microtaskNodeContent++,microtaskCallbacks.push(a),microtaskCurrHandle++),cancel(a){const t=a-microtaskLastHandle;if(t>=0){if(!microtaskCallbacks[t])throw new Error("invalid async handle: "+a);microtaskCallbacks[t]=null}}};export{microTask};