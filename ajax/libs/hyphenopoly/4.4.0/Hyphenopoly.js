/**
 * @license Hyphenopoly 4.4.0 - client side hyphenation for webbrowsers
 * ©2020  Mathias Nater, Güttingen (mathiasnater at gmail dot com)
 * https://github.com/mnater/Hyphenopoly
 *
 * Released under the MIT license
 * http://mnater.github.io/Hyphenopoly/LICENSE
 */
((e,t)=>{"use strict";const n=(e,t)=>({configurable:(4&t)>0,enumerable:(2&t)>0,writable:(1&t)>0,value:e}),a=(n=>{const a=new Map([["afterElementHyphenation",[]],["beforeElementHyphenation",[]],["engineReady",[]],["error",[t=>{t.runDefault&&e.console.warn(t.msg)}]],["hyphenopolyEnd",[]],["hyphenopolyStart",[]]]);if(n.handleEvent){const e=new Map(t.entries(n.handleEvent));a.forEach((t,n)=>{e.has(n)&&t.unshift(e.get(n))})}return{fire:(e,t)=>{t.runDefault=!0,t.preventDefault=()=>{t.runDefault=!1},a.get(e).forEach(e=>{e(t)})}}})(Hyphenopoly);(e=>{function n(e){const t=new Map;function n(n){return t.has(n)?t.get(n):e.get(n)}function a(e,n){t.set(e,n)}return new Proxy(e,{get:(e,t)=>"set"===t?a:"get"===t?n:n(t),ownKeys:()=>[...new Set([...e.keys(),...t.keys()])]})}const a=n(new Map([["defaultLanguage","en-us"],["dontHyphenate",n(new Map("abbr,acronym,audio,br,button,code,img,input,kbd,label,math,option,pre,samp,script,style,sub,sup,svg,textarea,var,video".split(",").map(e=>[e,!0])))],["dontHyphenateClass","donthyphenate"],["exceptions",new Map],["keepAlive",!0],["normalize",!1],["safeCopy",!0],["substitute",new Map],["timeout",1e3]]));t.entries(e.setup).forEach(([e,r])=>{switch(e){case"selectors":a.set("selectors",t.keys(r)),t.entries(r).forEach(([e,r])=>{const o=n(new Map([["compound","hyphen"],["hyphen","­"],["leftmin",0],["leftminPerLang",0],["minWordLength",6],["mixedCase",!0],["orphanControl",1],["rightmin",0],["rightminPerLang",0]]));t.entries(r).forEach(([e,n])=>{"object"==typeof n?o.set(e,new Map(t.entries(n))):o.set(e,n)}),a.set(e,o)});break;case"dontHyphenate":case"exceptions":t.entries(r).forEach(([t,n])=>{a.get(e).set(t,n)});break;case"substitute":t.entries(r).forEach(([e,n])=>{a.substitute.set(e,new Map(t.entries(n)))});break;default:a.set(e,r)}}),e.c=a})(Hyphenopoly),(r=>{const o=r.c;let s=null;function l(e,t){try{return e.getAttribute("lang")?e.getAttribute("lang").toLowerCase():"html"===e.tagName.toLowerCase()?t?s:null:l(e.parentNode,t)}catch(e){return null}}function i(n=null,s=null){const i=function(){const e=new Map,t=[0];return{add:function(n,a,r){const o={element:n,selector:r};return e.has(a)||e.set(a,[]),e.get(a).push(o),t[0]+=1,o},counter:t,each:function(t){e.forEach((e,n)=>{t(n,e)})},list:e,rem:function(n){let r=0;e.has(n)&&(r=e.get(n).length,e.delete(n),t[0]-=r,0===t[0]&&(a.fire("hyphenopolyEnd",{msg:"hyphenopolyEnd"}),o.keepAlive||(window.Hyphenopoly=null)))}}}(),c=(()=>{let e="."+o.dontHyphenateClass;return t.getOwnPropertyNames(o.dontHyphenate).forEach(t=>{o.dontHyphenate.get(t)&&(e+=","+t)}),e})(),h=o.selectors.join(",")+","+c;function u(t,n,s,c=!1){const p=function(e,t){return e.lang&&"string"==typeof e.lang?e.lang.toLowerCase():t&&""!==t?t.toLowerCase():l(e,!0)}(t,n),g=r.cf.get("langs").get(p);"H9Y"===g?(i.add(t,p,s),!c&&o.safeCopy&&function(t){t.addEventListener("copy",t=>{t.preventDefault();const n=e.getSelection(),a=n.getRangeAt(0).cloneContents(),r=document.createElement("div");r.appendChild(a);const o=r.innerHTML,s=n.toString(),l=/­/g;t.clipboardData.setData("text/plain",s.replace(l,"")),t.clipboardData.setData("text/html",o.replace(l,""))},!0)}(t)):g||a.fire("error",{msg:`Element with '${p}' found, but '${p}.hpb' not loaded. Check language tags!`}),t.childNodes.forEach(e=>{1!==e.nodeType||e.matches(h)||u(e,p,s,!0)})}return null===n?o.selectors.forEach(t=>{e.document.querySelectorAll(t).forEach(e=>{u(e,l(e,!0),t,!1)})}):u(n,l(n,!0),s,!0),i}a.fire("hyphenopolyStart",{msg:"hyphenopolyStart"});const c=new Map,h=new Map;function u(e,t,n){const s=r.languages.get(e),l=o.get(t),i=l.minWordLength,u=RegExp(`[${s.alphabet}a-zß-öø-þāăąćĉčďđēėęěĝğģĥīįıĵķļľłńņňōőœŕřśŝşšťūŭůűųźżžſǎǐǒǔǖǘǚǜșțʼΐά-ώϐϣϥϧϩϫϭϯϲа-яё-ќўџґүөա-օևअ-ऌएऐओ-नप-रलळव-हऽॠॡঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹઅ-ઋએઐઓ-નપ-રલળવ-હઽૠଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହୠୡஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡഅ-ഌഎ-ഐഒ-നപ-ഹൠൡൺ-ൿก-ฮะาำเ-ๅა-ჰሀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏḍḷṁṃṅṇṭἀ-ἇἐ-ἕἠ-ἧἰ-ἷὀ-ὅὐ-ὗὠ-ὧὰ-ώᾀ-ᾇᾐ-ᾗᾠ-ᾧᾲ-ᾴᾶᾷῂ-ῄῆῇῒΐῖῗῢ-ῧῲ-ῴῶῷⲁⲃⲅⲇⲉⲍⲏⲑⲓⲕⲗⲙⲛⲝⲟⲡⲣⲥⲧⲩⲫⲭⲯⲱⳉⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮ-]{${i},}`,"gui");function p(n){o.normalize&&(n=n.normalize("NFC"));let r=n.replace(u,function e(t,n,r){const s=n+"-"+r;if(c.has(s))return c.get(s);const l=o.get(r),i=l.hyphen;function h(o){let s=t.cache.get(r).get(o);var c;return s||(s=t.exc.has(o)?t.exc.get(o).replace(/-/g,l.hyphen):!l.mixedCase&&(c=o,Array.prototype.map.call(c,e=>e===e.toLowerCase()).some((e,t,n)=>e!==n[0]))?o:-1===o.indexOf("-")?function(e){return e.length>61&&a.fire("error",{msg:"found word longer than 61 characters"}),t.reNotAlphabet.test(e)?e:t.hyphenate(e,i.charCodeAt(0),l.leftminPerLang.get(n),l.rightminPerLang.get(n))}(o):function(a){let o=null,s=null;return"auto"===l.compound||"all"===l.compound?(s=e(t,n,r),o=a.split("-").map(e=>e.length>=l.minWordLength?s(e):e),a="auto"===l.compound?o.join("-"):o.join("-​")):a=a.replace("-","-​"),a}(o),t.cache.get(r).set(o,s)),s}return t.cache.set(r,new Map),c.set(s,h),h}(s,e,t));return 1!==l.orphanControl&&(r=r.replace(/(\u0020*)(\S+)(\s*)$/,function(e){if(h.has(e))return h.get(e);const t=o.get(e);function n(e,n,a,r){return 3===t.orphanControl&&" "===n&&(n=" "),n+a.replace(RegExp(t.hyphen,"g"),"")+r}return h.set(e,n),n}(t))),r}let g=null;var f;return"string"==typeof n?g=p(n):n instanceof HTMLElement&&(f=n,a.fire("beforeElementHyphenation",{el:f,lang:e}),f.childNodes.forEach(e=>{3===e.nodeType&&/\S/.test(e.data)&&e.data.length>=i&&(e.data=p(e.data))}),r.res.get("els").counter[0]-=1,a.fire("afterElementHyphenation",{el:f,lang:e})),g}function p(t,n){const s=n.list.get(t);s?s.forEach(e=>{u(t,e.selector,e.element)}):a.fire("error",{msg:`engine for language '${t}' loaded, but no elements found.`}),0===n.counter[0]&&(e.clearTimeout(r.timeOutHandler),0!==o.hide&&r.hide(0,null),a.fire("hyphenopolyEnd",{msg:"hyphenopolyEnd"}),o.keepAlive||(window.Hyphenopoly=null))}function g(e){let t="";return o.exceptions.has(e)&&(t=o.exceptions.get(e)),o.exceptions.has("global")&&(""===t?t=o.exceptions.get("global"):t+=", "+o.exceptions.get("global")),""===t?new Map:new Map(t.split(", ").map(e=>[e.replace(/-/g,""),e]))}r.unhyphenate=()=>(r.res.get("els").each((e,t)=>{t.forEach(e=>{const t=e.element.firstChild;t.data=t.data.replace(RegExp(o[e.selector].hyphen,"g"),"")})}),Promise.resolve(r.res.get("els")));const f=(()=>{if(e.TextDecoder){const e=new TextDecoder("utf-16le");return t=>e.decode(t)}return e=>String.fromCharCode.apply(null,e)})();r.res.get("DOM").then(()=>{s=l(e.document.documentElement,!1),s||""===o.defaultLanguage||(s=o.defaultLanguage);const t=i();r.res.set("els",t),t.each(e=>{r.languages&&r.languages.has(e)&&r.languages.get(e).ready&&p(e,t)})}),r.res.get("he").forEach((e,s)=>{!function(e,s){const l=window.WebAssembly;function i(e){const i=e.instance.exports;let c=i.conv();c=function(e,t){return o.substitute.has(s)&&o.substitute.get(s).forEach((n,a)=>{const r=a.toUpperCase(),o=r===a?0:r.charCodeAt(0);e=t.subst(a.charCodeAt(0),o,n.charCodeAt(0))}),e}(c,i);const h={buf:i.mem.buffer,hw:l.Global?i.hwo.value:i.hwo,lm:l.Global?i.lmi.value:i.lmi,rm:l.Global?i.rmi.value:i.rmi,wo:l.Global?i.uwo.value:i.uwo};!function(e,s,l,i,c){o.selectors.forEach(t=>{const n=o.get(t);0===n.leftminPerLang&&n.set("leftminPerLang",new Map),0===n.rightminPerLang&&n.set("rightminPerLang",new Map),n.leftminPerLang.set(e,Math.max(i,n.leftmin,Number(n.leftminPerLang.get(e))||0)),n.rightminPerLang.set(e,Math.max(c,n.rightmin,Number(n.rightminPerLang.get(e))||0))}),r.languages||(r.languages=new Map),l=l.replace(/-/g,""),r.languages.set(e,t.create(null,{alphabet:n(l,2),cache:n(new Map,2),exc:n(g(e),2),hyphenate:n(s,2),ready:n(!0,2),reNotAlphabet:n(RegExp(`[^${l}]`,"gi"),2)})),r.hy6ors.get(e).resolve(function(e){return(t,n=".hyphenate")=>("string"!=typeof t&&a.fire("error",{msg:"This use of hyphenators is deprecated. See https://mnater.github.io/Hyphenopoly/Hyphenators.html"}),u(e,n,t))}(e)),a.fire("engineReady",{lang:e}),p(e,r.res.get("els"))}(s,function(e,t){const n=new Uint16Array(e.buf,e.wo,64),a=new Uint16Array(e.buf,e.hw,128);return n[0]=95,(e,r,o,s)=>{let l=0;for(const t of e)l+=1,n[l]=t.charCodeAt(0);return n[l+1]=95,n[l+2]=0,1===t(o,s,r)&&(e=f(a.subarray(1,a[0]+1))),e}}(h,i.hyphenate),f(new Uint16Array(i.mem.buffer,1026,c-1)),h.lm,h.rm)}e.w.then(t=>{if(t.ok){let n=t;e.c>1&&(n=t.clone()),l.instantiateStreaming&&"application/wasm"===t.headers.get("Content-Type")?l.instantiateStreaming(n).then(i):n.arrayBuffer().then(e=>{window.WebAssembly.instantiate(e).then(i)})}else r.res.get("els").rem(s),r.hy6ors.get(s).reject({msg:`File ${s}.wasm can't be loaded from ${r.paths.patterndir}`})})}(e,s)}),Promise.all([...r.hy6ors.entries()].reduce((e,t)=>"HTML"!==t[0]?e.concat(t[1]):e,[]).concat(r.res.get("DOM"))).then(()=>{r.hy6ors.get("HTML").resolve((e,t=".hyphenate")=>(i(e,t).each((e,t)=>{t.forEach(t=>{u(e,t.selector,t.element)})}),null))},e=>{a.fire("error",e)})})(Hyphenopoly)})(window,Object);