{"version":3,"sources":["load-image-scale.js"],"names":["factory","define","amd","module","exports","require","window","loadImage","originalTransform","transform","createCanvas","width","height","offscreen","global","OffscreenCanvas","canvas","document","createElement","img","options","callback","file","data","call","scale","transformCoordinates","getTransformedOptions","newOptions","i","aspectRatio","Object","prototype","hasOwnProperty","crop","naturalWidth","naturalHeight","maxWidth","maxHeight","drawImage","sourceX","sourceY","sourceWidth","sourceHeight","destWidth","destHeight","ctx","getContext","imageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingQuality","requiresCanvas","minWidth","minHeight","pixelRatio","downsamplingRatio","tmp","useCanvas","HTMLCanvasElement","scaleUp","Math","max","scaleDown","min","left","top","undefined","right","bottom","contain","cover","style","floor","parseFloat","orientationCropBug","setTransform"],"mappings":"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"}