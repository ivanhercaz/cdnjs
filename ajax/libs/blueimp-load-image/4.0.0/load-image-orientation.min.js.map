{"version":3,"sources":["load-image-orientation.js"],"names":["factory","define","amd","module","exports","require","window","loadImage","$","img","originalTransform","transform","originalRequiresCanvas","requiresCanvas","originalRequiresMetaData","requiresMetaData","originalTransformCoordinates","transformCoordinates","originalGetTransformedOptions","getTransformedOptions","requiresCanvasOrientation","options","withMetaData","orientation","requiresOrientationChange","autoOrientation","requiresRot180","document","createElement","onload","width","height","ctx","createCanvas","getContext","drawImage","orientationCropBug","getImageData","data","toString","src","call","callback","file","exif","get","originalWidth","originalHeight","opts","exifOrientation","top","right","bottom","left","newOptions","i","Object","prototype","hasOwnProperty","maxWidth","maxHeight","minWidth","minHeight","sourceWidth","sourceHeight","tmpTop","tmpRight","canvas","translate","scale","rotate","Math","PI"],"mappings":"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"}