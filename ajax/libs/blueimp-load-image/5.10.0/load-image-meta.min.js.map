{"version":3,"sources":["load-image-meta.js"],"names":["factory","define","amd","module","exports","require","window","loadImage","global","originalTransform","transform","blobSlice","Blob","prototype","slice","webkitSlice","mozSlice","bufferSlice","ArrayBuffer","begin","end","this","byteLength","arr1","Uint8Array","arr2","set","buffer","metaDataParsers","jpeg","65505","65517","parseMetaData","file","callback","options","data","that","executor","resolve","reject","DataView","size","type","maxMetaDataSize","readFile","call","dataView","getUint16","Error","markerBytes","markerLength","parsers","i","offset","maxOffset","headLength","console","log","disableMetaDataParsers","length","disableImageHead","imageHead","Promise","replaceJPEGHead","blob","oldHead","newHead","img","requiresMetaData","result","apply","arguments","replaceHead","head","then"],"mappings":"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"}