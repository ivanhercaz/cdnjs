{"version":3,"sources":["load-image-orientation.js"],"names":["factory","define","amd","module","exports","require","window","loadImage","originalTransform","transform","originalRequiresCanvas","requiresCanvas","originalRequiresMetaData","requiresMetaData","originalTransformCoordinates","transformCoordinates","originalGetTransformedOptions","getTransformedOptions","requiresCanvasOrientation","options","withMetaData","orientation","requiresOrientationChange","autoOrientation","requiresRot180","$","global","document","img","createElement","onload","width","height","ctx","createCanvas","getContext","drawImage","orientationCropBug","getImageData","data","toString","src","call","callback","file","exif","get","originalWidth","originalHeight","opts","exifOrientation","top","right","bottom","left","newOptions","i","Object","prototype","hasOwnProperty","maxWidth","maxHeight","minWidth","minHeight","sourceWidth","sourceHeight","tmpTop","tmpRight","canvas","translate","scale","rotate","Math","PI"],"mappings":"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"}