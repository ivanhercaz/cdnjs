!function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):"object"==typeof module&&module.exports?e(require("./load-image")):e(window.loadImage)}(function(e){"use strict";var o=e.global;o.fetch&&o.Request?e.fetchBlob=function(e,n,t){if(o.Promise&&"function"!=typeof n)return fetch(new Request(e,n)).then(function(e){return e.blob()});fetch(new Request(e,t)).then(function(e){return e.blob()}).then(n).catch(function(e){n(null,e)})}:o.XMLHttpRequest&&o.ProgressEvent&&(e.fetchBlob=function(e,n,r){function t(n,t){r=r||{};var o=new XMLHttpRequest;o.open(r.method||"GET",e),r.headers&&Object.keys(r.headers).forEach(function(e){o.setRequestHeader(e,r.headers[e])}),o.withCredentials="include"===r.credentials,o.responseType="blob",o.onload=function(){n(o.response)},o.onerror=o.onabort=o.ontimeout=function(e){n===t?t(null,e):t(e)},o.send(r.body)}return o.Promise&&"function"!=typeof n?(r=n,new Promise(t)):t(n,n)})});