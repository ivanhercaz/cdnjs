!function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):"object"==typeof module&&module.exports?e(require("./load-image")):e(window.loadImage)}(function(e){"use strict";var r=e.global;r.fetch&&r.Request?e.fetchBlob=function(e,t,n){function o(e){return e.blob()}if(r.Promise&&"function"!=typeof t)return fetch(new Request(e,t)).then(o);fetch(new Request(e,n)).then(o).then(t).catch(function(e){t(null,e)})}:r.XMLHttpRequest&&r.ProgressEvent&&(e.fetchBlob=function(e,t,i){function n(t,n){i=i||{};var o=new XMLHttpRequest;o.open(i.method||"GET",e),i.headers&&Object.keys(i.headers).forEach(function(e){o.setRequestHeader(e,i.headers[e])}),o.withCredentials="include"===i.credentials,o.responseType="blob",o.onload=function(){t(o.response)},o.onerror=o.onabort=o.ontimeout=function(e){t===n?n(null,e):n(e)},o.send(i.body)}return r.Promise&&"function"!=typeof t?(i=t,new Promise(n)):n(t,t)})});