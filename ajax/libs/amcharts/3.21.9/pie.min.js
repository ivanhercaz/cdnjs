!function(){var n=window.AmCharts;n.AmSlicedChart=n.Class({inherits:n.AmChart,construct:function(t){this.createEvents("rollOverSlice","rollOutSlice","clickSlice","pullOutSlice","pullInSlice","rightClickSlice"),n.AmSlicedChart.base.construct.call(this,t),this.colors="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74 #754DEB #DDDDDD #999999 #333333 #000000 #57032A #CA9726 #990000 #4B0C25".split(" "),this.alpha=1,this.groupPercent=0,this.groupedTitle="Other",this.groupedPulled=!1,this.groupedAlpha=1,this.marginLeft=0,this.marginBottom=this.marginTop=10,this.marginRight=0,this.hoverAlpha=1,this.outlineColor="#FFFFFF",this.outlineAlpha=0,this.outlineThickness=1,this.startAlpha=0,this.startDuration=1,this.startEffect="bounce",this.sequencedAnimation=!0,this.pullOutDuration=1,this.pullOutEffect="bounce",this.pullOnHover=this.pullOutOnlyOne=!1,this.labelsEnabled=!0,this.labelTickColor="#000000",this.labelTickAlpha=.2,this.hideLabelsPercent=0,this.urlTarget="_self",this.autoMarginOffset=10,this.gradientRatio=[],this.maxLabelWidth=200,this.accessibleLabel="[[title]]: [[percents]]% [[value]] [[description]]",n.applyTheme(this,t,"AmSlicedChart")},initChart:function(){n.AmSlicedChart.base.initChart.call(this),this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,this.setLegendData(this.chartData)),this.drawChart()},handleLegendEvent:function(t){var i=t.type,e=t.dataItem,a=this.legend;if(e.wedge&&e){var s=e.hidden;switch(t=t.event,i){case"clickMarker":s||a.switchable||this.clickSlice(e,t);break;case"clickLabel":s||this.clickSlice(e,t,!1);break;case"rollOverItem":s||this.rollOverSlice(e,!1,t);break;case"rollOutItem":s||this.rollOutSlice(e,t);break;case"hideItem":this.hideSlice(e,t);break;case"showItem":this.showSlice(e,t)}}},invalidateVisibility:function(){this.recalculatePercents(),this.initChart();var t=this.legend;t&&t.invalidateSize()},addEventListeners:function(t,i){var e=this;t.mouseover(function(t){e.rollOverSlice(i,!0,t)}).mouseout(function(t){e.rollOutSlice(i,t)}).touchend(function(t){e.rollOverSlice(i,t)}).mouseup(function(t){e.clickSlice(i,t)}).contextmenu(function(t){e.handleRightClick(i,t)})},formatString:function(t,i,e){t=n.formatValue(t,i,["value"],this.nf,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);var a=this.pf.precision;return isNaN(this.tempPrec)||(this.pf.precision=this.tempPrec),t=n.formatValue(t,i,["percents"],this.pf),t=n.massReplace(t,{"[[title]]":i.title,"[[description]]":i.description}),this.pf.precision=a,-1!=t.indexOf("[[")&&(t=n.formatDataContextValue(t,i.dataContext)),t=e?n.fixNewLines(t):n.fixBrakes(t),n.cleanFromEmpty(t)},startSlices:function(){var t;for(t=0;t<this.chartData.length;t++)0<this.startDuration&&this.sequencedAnimation?this.setStartTO(t):this.startSlice(this.chartData[t])},setStartTO:function(t){var i=this;t=setTimeout(function(){i.startSequenced.call(i)},i.startDuration/i.chartData.length*500*t),i.timeOuts.push(t)},pullSlices:function(t){var i,e=this.chartData;for(i=0;i<e.length;i++){var a=e[i];a.pulled&&this.pullSlice(a,1,t)}},startSequenced:function(){var t,i=this.chartData;for(t=0;t<i.length;t++)if(!i[t].started){this.startSlice(this.chartData[t]);break}},startSlice:function(t){t.started=!0;var i=t.wedge,e=this.startDuration,a=t.labelSet;i&&0<e&&(0<t.alpha&&i.show(),i.translate(t.startX,t.startY),this.animatable.push(i),i.animate({opacity:1,translate:"0,0"},e,this.startEffect)),a&&0<e&&(0<t.alpha&&a.show(),a.translate(t.startX,t.startY),a.animate({opacity:1,translate:"0,0"},e,this.startEffect))},showLabels:function(){var t,i=this.chartData;for(t=0;t<i.length;t++){var e=i[t];if(0<e.alpha){var a=e.label;a&&a.show(),(e=e.tick)&&e.show()}}},showSlice:function(t){isNaN(t)?t.hidden=!1:this.chartData[t].hidden=!1,this.invalidateVisibility()},hideSlice:function(t){isNaN(t)?t.hidden=!0:this.chartData[t].hidden=!0,this.hideBalloon(),this.invalidateVisibility()},rollOverSlice:function(t,i,e){if(isNaN(t)||(t=this.chartData[t]),clearTimeout(this.hoverInt),!t.hidden){this.pullOnHover&&this.pullSlice(t,1),this.hoverAlpha<1&&t.wedge&&t.wedge.attr({opacity:this.hoverAlpha});var a=t.balloonX,s=t.balloonY;t.pulled&&(a+=t.pullX,s+=t.pullY);var l=this.formatString(this.balloonText,t,!0),h=this.balloonFunction;h&&(l=h(t,l)),h=n.adjustLuminosity(t.color,-.15),l?this.showBalloon(l,h,i,a,s):this.hideBalloon(),0===t.value&&this.hideBalloon(),this.fire({type:"rollOverSlice",dataItem:t,chart:this,event:e})}},rollOutSlice:function(t,i){isNaN(t)||(t=this.chartData[t]),t.wedge&&t.wedge.attr({opacity:1}),this.hideBalloon(),this.fire({type:"rollOutSlice",dataItem:t,chart:this,event:i})},clickSlice:function(t,i,e){this.checkTouchDuration(i)&&(isNaN(t)||(t=this.chartData[t]),t.pulled?this.pullSlice(t,0):this.pullSlice(t,1),n.getURL(t.url,this.urlTarget),e||this.fire({type:"clickSlice",dataItem:t,chart:this,event:i}))},handleRightClick:function(t,i){isNaN(t)||(t=this.chartData[t]),this.fire({type:"rightClickSlice",dataItem:t,chart:this,event:i})},drawTicks:function(){var t,i=this.chartData;for(t=0;t<i.length;t++){var e=i[t];if(e.label&&!e.skipTick){var a=e.ty;a=n.line(this.container,[e.tx0,e.tx,e.tx2],[e.ty0,a,a],this.labelTickColor,this.labelTickAlpha);n.setCN(this,a,this.type+"-tick"),n.setCN(this,a,e.className,!0),e.tick=a,e.wedge.push(a),"AmFunnelChart"==this.cname&&a.toBack()}}},initialStart:function(){var t=this,i=t.startDuration,e=setTimeout(function(){t.showLabels.call(t)},1e3*i);t.timeOuts.push(e),t.chartCreated?t.pullSlices(!0):(t.startSlices(),0<i?(i=setTimeout(function(){t.pullSlices.call(t)},1200*i),t.timeOuts.push(i)):t.pullSlices(!0))},pullSlice:function(t,i,e){var a=this.pullOutDuration;!0===e&&(a=0),(e=t.wedge)&&(0<a?(e.animate({translate:i*t.pullX+","+i*t.pullY},a,this.pullOutEffect),t.labelSet&&t.labelSet.animate({translate:i*t.pullX+","+i*t.pullY},a,this.pullOutEffect)):(t.labelSet&&t.labelSet.translate(i*t.pullX,i*t.pullY),e.translate(i*t.pullX,i*t.pullY))),t=1==i?(t.pulled=!0,this.pullOutOnlyOne&&this.pullInAll(t.index),{type:"pullOutSlice",dataItem:t,chart:this}):(t.pulled=!1,{type:"pullInSlice",dataItem:t,chart:this}),this.fire(t)},pullInAll:function(t){var i,e=this.chartData;for(i=0;i<this.chartData.length;i++)i!=t&&e[i].pulled&&this.pullSlice(e[i],0)},pullOutAll:function(){var t,i=this.chartData;for(t=0;t<i.length;t++)i[t].pulled||this.pullSlice(i[t],1)},parseData:function(){var t=[];this.chartData=t;var i=this.dataProvider;if(isNaN(this.pieAlpha)||(this.alpha=this.pieAlpha),void 0!==i){var e,a,s,l=i.length,h=0;for(e=0;e<l;e++){a={};var r=i[e];null!==(a.dataContext=r)[this.valueField]&&(a.value=Number(r[this.valueField])),(s=r[this.titleField])||(s=""),a.title=s,a.pulled=n.toBoolean(r[this.pulledField],!1),(s=r[this.descriptionField])||(s=""),a.description=s,a.labelRadius=Number(r[this.labelRadiusField]),a.switchable=!0,a.className=r[this.classNameField],a.url=r[this.urlField],!(s=r[this.patternField])&&this.patterns&&(s=this.patterns[e]),a.pattern=s,a.visibleInLegend=n.toBoolean(r[this.visibleInLegendField],!0),s=r[this.alphaField],a.alpha=void 0!==s?Number(s):this.alpha,void 0!==(s=r[this.colorField])&&(a.color=s),a.labelColor=n.toColor(r[this.labelColorField]),h+=a.value,a.hidden=!1,t[e]=a}for(e=i=0;e<l;e++)(a=t[e]).percents=a.value/h*100,a.percents<this.groupPercent&&i++;for(1<i&&(this.groupValue=0,this.removeSmallSlices(),t.push({title:this.groupedTitle,value:this.groupValue,percents:this.groupValue/h*100,pulled:this.groupedPulled,color:this.groupedColor,url:this.groupedUrl,description:this.groupedDescription,alpha:this.groupedAlpha,pattern:this.groupedPattern,className:this.groupedClassName,dataContext:{}})),l=(l=this.baseColor)||this.pieBaseColor,h=(h=this.brightnessStep)||this.pieBrightnessStep,e=0;e<t.length;e++)l?s=n.adjustLuminosity(l,e*h/100):void 0===(s=this.colors[e])&&(s=n.randomColor()),void 0===t[e].color&&(t[e].color=s);this.recalculatePercents()}},recalculatePercents:function(){var t,i,e=this.chartData,a=0;for(t=0;t<e.length;t++)!(i=e[t]).hidden&&0<i.value&&(a+=i.value);for(t=0;t<e.length;t++)(i=this.chartData[t]).percents=!i.hidden&&0<i.value?100*i.value/a:0},removeSmallSlices:function(){var t,i=this.chartData;for(t=i.length-1;0<=t;t--)i[t].percents<this.groupPercent&&(this.groupValue+=i[t].value,i.splice(t,1))},animateAgain:function(){var t=this;t.startSlices();for(var i=0;i<t.chartData.length;i++){var e=t.chartData[i];e.started=!1;var a=e.wedge;a&&(a.setAttr("opacity",t.startAlpha),a.translate(e.startX,e.startY)),(a=e.labelSet)&&(a.setAttr("opacity",t.startAlpha),a.translate(e.startX,e.startY))}0<(i=t.startDuration)?(i=setTimeout(function(){t.pullSlices.call(t)},1200*i),t.timeOuts.push(i)):t.pullSlices()},measureMaxLabel:function(){var t,i=this.chartData,e=0;for(t=0;t<i.length;t++){var a=i[t],s=this.formatString(this.labelText,a),l=this.labelFunction;l&&(s=l(a,s)),e<(s=(a=n.text(this.container,s,this.color,this.fontFamily,this.fontSize)).getBBox().width)&&(e=s),a.remove()}return e}})}(),function(){var y=window.AmCharts;y.AmPieChart=y.Class({inherits:y.AmSlicedChart,construct:function(t){this.type="pie",y.AmPieChart.base.construct.call(this,t),this.cname="AmPieChart",this.pieBrightnessStep=30,this.minRadius=10,this.depth3D=0,this.startAngle=90,this.angle=this.innerRadius=0,this.startRadius="500%",this.pullOutRadius="20%",this.labelRadius=20,this.labelText="[[title]]: [[percents]]%",this.balloonText="[[title]]: [[percents]]% ([[value]])\n[[description]]",this.previousScale=1,this.adjustPrecision=!1,this.gradientType="radial",y.applyTheme(this,t,this.cname)},drawChart:function(){y.AmPieChart.base.drawChart.call(this);var t=this.chartData;if(y.ifArray(t)){if(0<this.realWidth&&0<this.realHeight){y.VML&&(this.startAlpha=1);var i=this.startDuration,e=this.container,a=this.updateWidth();this.realWidth=a;var s=this.updateHeight();this.realHeight=s;var l,h,r,n=y.toCoordinate,o=n(this.marginLeft,a),c=n(this.marginRight,a),u=n(this.marginTop,s)+this.getTitleHeight(),d=n(this.marginBottom,s)+this.depth3D,p=y.toNumber(this.labelRadius);for((v=this.measureMaxLabel())>this.maxLabelWidth&&(v=this.maxLabelWidth),this.labelText&&this.labelsEnabled||(p=v=0),l=void 0===this.pieX?(a-o-c)/2+o:n(this.pieX,this.realWidth),h=void 0===this.pieY?(s-u-d)/2+u:n(this.pieY,s),(r=n(this.radius,a,s))||(a=0<=p?a-o-c-2*v:a-o-c,s=s-u-d,r=Math.min(a,s),s<a&&(a<(r/=1-this.angle/90)&&(r=a)),s=y.toCoordinate(this.pullOutRadius,r),r=(0<=p?r-1.8*(p+s):r-1.8*s)/2),r<this.minRadius&&(r=this.minRadius),s=n(this.pullOutRadius,r),u=y.toCoordinate(this.startRadius,r),r<=(n=n(this.innerRadius,r))&&(n=r-1),d=y.fitToBounds(this.startAngle,0,360),0<this.depth3D&&(d=270<=d?270:90),360<(d-=90)&&(d-=360),a=r-r*this.angle/90,o=v=0;o<t.length;o++)!0!==(c=t[o]).hidden&&(v+=y.roundTo(c.percents,this.pf.precision));v=y.roundTo(v,this.pf.precision),this.tempPrec=NaN,this.adjustPrecision&&100!=v&&(this.tempPrec=this.pf.precision+1);var f;for(o=0;o<t.length;o++)if(!0!==(c=t[o]).hidden&&(this.showZeroSlices||0!==c.percents)){var g=360*c.percents/100,v=Math.sin((d+g/2)/180*Math.PI),m=a/r*-Math.cos((d+g/2)/180*Math.PI),b=this.outlineColor;b=b||c.color;var S=this.alpha;if(isNaN(c.alpha)||(S=c.alpha),b={fill:c.color,stroke:b,"stroke-width":this.outlineThickness,"stroke-opacity":this.outlineAlpha,"fill-opacity":S},c.url&&(b.cursor="pointer"),b=y.wedge(e,l,h,d,g,r,a,n,this.depth3D,b,this.gradientRatio,c.pattern,this.path,this.gradientType),y.setCN(this,b,"pie-item"),y.setCN(this,b.wedge,"pie-slice"),y.setCN(this,b,c.className,!0),this.addEventListeners(b,c),c.startAngle=d,t[o].wedge=b,0<i&&(this.chartCreated||b.setAttr("opacity",this.startAlpha)),c.ix=v,c.iy=m,c.wedge=b,c.index=o,c.label=null,S=e.set(),this.labelsEnabled&&this.labelText&&c.percents>=this.hideLabelsPercent){var D=d+g/2;D<0&&(D+=360),360<D&&(D-=360);var C=p;isNaN(c.labelRadius)||(C=c.labelRadius)<0&&(c.skipTick=!0);g=l+v*(r+C);var O,k,A=h+m*(r+C),x=0;if(isNaN(f)&&350<D&&1<t.length-o&&(f=o-1+Math.floor((t.length-o)/2)),0<=C)D<=90&&0<=D?(k=0,O="start",x=8):90<=D&&D<180?(k=1,O="start",x=8):180<=D&&D<270?(k=2,O="end",x=-8):270<=D&&D<=354?(k=3,O="end",x=-8):354<=D&&(x=f<o?(k=0,O="start",8):(k=3,O="end",-8)),c.labelQuarter=k;else O="middle";D=this.formatString(this.labelText,c),(C=this.labelFunction)&&(D=C(c,D)),C=(C=c.labelColor)||this.color,""!==D&&(D=y.wrappedText(e,D,C,this.fontFamily,this.fontSize,O,!1,this.maxLabelWidth),y.setCN(this,D,"pie-label"),y.setCN(this,D,c.className,!0),D.translate(g+1.5*x,A),p<0&&(D.node.style.pointerEvents="none"),D.node.style.cursor="default",c.ty=A,c.textX=g+1.5*x,S.push(D),this.axesSet.push(S),c.labelSet=S,c.label=D,this.addEventListeners(S,c)),c.tx=g,c.tx2=g+x,c.tx0=l+v*r,c.ty0=h+m*r}g=n+(r-n)/2,c.pulled&&(g+=s),this.accessible&&this.accessibleLabel&&(A=this.formatString(this.accessibleLabel,c),this.makeAccessible(b,A)),void 0!==this.tabIndex&&b.setAttr("tabindex",this.tabIndex),c.balloonX=v*g+l,c.balloonY=m*g+h,c.startX=Math.round(v*u),c.startY=Math.round(m*u),c.pullX=Math.round(v*s),c.pullY=Math.round(m*s),this.graphsSet.push(b),(0===c.alpha||0<i&&!this.chartCreated)&&(b.hide(),S&&S.hide()),360<(d+=360*c.percents/100)&&(d-=360)}0<p&&this.arrangeLabels(),this.pieXReal=l,this.pieYReal=h,this.radiusReal=r,this.innerRadiusReal=n,0<p&&this.drawTicks(),this.initialStart(),this.setDepths()}(t=this.legend)&&t.invalidateSize()}else this.cleanChart();this.dispDUpd()},setDepths:function(){var t,i=this.chartData;for(t=0;t<i.length;t++){var e,a=(e=i[t]).wedge;0<=(e=e.startAngle)&&e<180?a.toFront():180<=e&&a.toBack()}},arrangeLabels:function(){var t,i,e=this.chartData,a=e.length;for(i=a-1;0<=i;i--)0!==(t=e[i]).labelQuarter||t.hidden||this.checkOverlapping(i,t,0,!0,0);for(i=0;i<a;i++)1!=(t=e[i]).labelQuarter||t.hidden||this.checkOverlapping(i,t,1,!1,0);for(i=a-1;0<=i;i--)2!=(t=e[i]).labelQuarter||t.hidden||this.checkOverlapping(i,t,2,!0,0);for(i=0;i<a;i++)3!=(t=e[i]).labelQuarter||t.hidden||this.checkOverlapping(i,t,3,!1,0)},checkOverlapping:function(t,i,e,a,s){var l,h,r=this.chartData,n=r.length,o=i.label;if(o){if(!0===a)for(h=t+1;h<n;h++)r[h].labelQuarter==e&&(l=this.checkOverlappingReal(i,r[h],e))&&(h=n);else for(h=t-1;0<=h;h--)r[h].labelQuarter==e&&(l=this.checkOverlappingReal(i,r[h],e))&&(h=0);!0===l&&s<200&&isNaN(i.labelRadius)&&(l=i.ty+3*i.iy,i.ty=l,o.translate(i.textX,l),this.checkOverlapping(t,i,e,a,s+1))}},checkOverlappingReal:function(t,i,e){var a=!1,s=t.label,l=i.label;return t.labelQuarter!=e||t.hidden||i.hidden||!l||(s=s.getBBox(),(e={}).width=s.width,e.height=s.height,e.y=t.ty,e.x=t.tx,t=l.getBBox(),(l={}).width=t.width,l.height=t.height,l.y=i.ty,l.x=i.tx,y.hitTest(e,l)&&(a=!0)),a}})}();