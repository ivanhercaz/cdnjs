AmCharts.maps={},AmCharts.AmMap=AmCharts.Class({inherits:AmCharts.AmChart,construct:function(){this.version="3.0.9",this.svgNotSupported="This browser doesn't support SVG. Use Chrome, Firefox, Internet Explorer 9 or later.",this.createEvents("rollOverMapObject","rollOutMapObject","clickMapObject","selectedObjectChanged","homeButtonClicked","zoomCompleted","writeDevInfo"),this.zoomDuration=1,this.zoomControl=new AmCharts.ZoomControl,this.fitMapToContainer=!0,this.mouseWheelZoomEnabled=this.backgroundZoomsToTop=!1,this.useHandCursorOnClickableOjects=this.showBalloonOnSelectedObject=!0,this.showObjectsAfterZoom=this.wheelBusy=!1,this.zoomOnDoubleClick=this.useObjectColorForBalloon=!0,this.allowMultipleDescriptionWindows=!1,this.dragMap=this.centerMap=!0,this.colorSteps=5,this.showAreasInList=!0,this.showLinesInList=this.showImagesInList=!1,this.areasProcessor=new AmCharts.AreasProcessor(this),this.areasSettings=new AmCharts.AreasSettings,this.imagesProcessor=new AmCharts.ImagesProcessor(this),this.imagesSettings=new AmCharts.ImagesSettings,this.linesProcessor=new AmCharts.LinesProcessor(this),this.linesSettings=new AmCharts.LinesSettings,this.showDescriptionOnHover=!1,AmCharts.AmMap.base.construct.call(this),this.product="ammap",AmCharts.bezierX=3,AmCharts.bezierY=3,AmCharts.dx=.5,AmCharts.dy=.5},initChart:function(){if(this.zoomInstantly=!0,this.sizeChanged&&AmCharts.hasSVG&&this.chartCreated){this.container.setSize(this.realWidth,this.realHeight),this.resizeMap(),this.drawBackground(),this.redrawLabels(),this.drawTitles(),this.processObjects(),this.rescaleObjects();var t=this.container;this.zoomControl.init(this,t),this.drawBg();var e=this.smallMap;e&&e.init(this,t),(e=this.valueLegend)&&e.init(this,t),this.sizeChanged=!1,this.zoomToLongLat(this.zLevelTemp,this.zLongTemp,this.zLatTemp,!0),this.previousWidth=this.realWidth,this.previousHeight=this.realHeight,this.drb(),this.updateSmallMap(),this.linkSet.toFront()}else AmCharts.AmMap.base.initChart.call(this),AmCharts.hasSVG?(this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,t=this.legend)&&(t.position="absolute",t.invalidateSize()),this.addMouseWheel(),this.createDescriptionsDiv(),this.svgAreas=[],this.svgAreasById={},this.drawChart()):(document.createTextNode(this.svgNotSupported),this.chartDiv.style.textAlign="",this.chartDiv.setAttribute("class","ammapAlert"),this.chartDiv.innerHTML=this.svgNotSupported)},invalidateSize:function(){var t=this.zoomLongitude();isNaN(t)||(this.zLongTemp=t),t=this.zoomLatitude(),isNaN(t)||(this.zLatTemp=t),t=this.zoomLevel(),isNaN(t)||(this.zLevelTemp=t),AmCharts.AmMap.base.invalidateSize.call(this)},addMouseWheel:function(){var e=this;e.mouseWheelZoomEnabled&&(window.addEventListener&&window.addEventListener("DOMMouseScroll",function(t){e.handleWheel.call(e,t)},!1),window.onmousewheel&&(window.onmousewheel=document.onmousewheel=e.handleWheel.call(e)))},handleWheel:function(t){if(this.mouseIsOver){var e=0;(t=t||window.event).wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e&&this.handleWheelReal(e),t.preventDefault&&t.preventDefault(),t.returnValue=!1}},handleWheelReal:function(t){if(!this.wheelBusy){this.stopAnimation();var e=this.zoomLevel(),i=this.zoomControl,o=i.zoomFactor;this.wheelBusy=!0,t=AmCharts.fitToBounds(0<t?e*o:e/o,i.minZoomLevel,i.maxZoomLevel),o=this.mouseX/this.mapWidth,i=this.mouseY/this.mapHeight,o=(this.zoomX()-o)*(t/e)+o,e=(this.zoomY()-i)*(t/e)+i,this.zoomTo(t,o,e)}},addLegend:function(t){t.position="absolute",t.autoMargins=!1,t.valueWidth=0,t.switchable=!1,AmCharts.AmMap.base.addLegend.call(this,t)},handleLegendEvent:function(){},createDescriptionsDiv:function(){var t=document.createElement("div");this.div.appendChild(t),this.descriptionsDiv=t},drawChart:function(){AmCharts.AmMap.base.drawChart.call(this);var t=this.dataProvider;AmCharts.extend(t,new AmCharts.MapData),AmCharts.extend(this.areasSettings,new AmCharts.AreasSettings),AmCharts.extend(this.imagesSettings,new AmCharts.ImagesSettings),AmCharts.extend(this.linesSettings,new AmCharts.LinesSettings),this.mapContainer=this.container.set(),this.graphsSet.push(this.mapContainer);var e=t.mapVar;e?(this.svgData=e.svg,this.getBounds(),this.buildEverything()):(t=t.mapURL)&&this.loadXml(t)},drawBg:function(){var t=this;AmCharts.remove(t.bgSet);var e=AmCharts.rect(t.container,t.realWidth,t.realHeight,"#000",.001);e.click(function(){t.handleBackgroundClick()}),t.bgSet=e,t.set.push(e)},buildEverything:function(){var t=this;if(0<t.realWidth&&0<t.realHeight){var e=t.container;t.zoomControl.init(this,e),t.drawBg(),t.buildSVGMap();var i=t.smallMap;i&&i.init(t,e),i=t.dataProvider,isNaN(i.zoomX)&&isNaN(i.zoomY)&&isNaN(i.zoomLatitude)&&isNaN(i.zoomLongitude)&&(t.centerMap?(i.zoomLatitude=t.coordinateToLatitude(t.mapHeight/2),i.zoomLongitude=t.coordinateToLongitude(t.mapWidth/2)):(i.zoomX=0,i.zoomY=0),t.zoomInstantly=!0),t.selectObject(t.dataProvider),t.processAreas(),(i=t.valueLegend)&&i.init(t,e),(e=t.objectList)&&(t.clearObjectList(),e.init(t)),clearInterval(t.interval),t.interval=setInterval(function(){t.update.call(t)},AmCharts.updateRate),t.dispDUpd(),t.linkSet.toFront(),t.chartCreated=!0}else t.cleanChart()},hideGroup:function(t){this.showHideGroup(t,!1)},showGroup:function(t){this.showHideGroup(t,!0)},showHideGroup:function(t,e){this.showHideReal(this.imagesProcessor.allObjects,t,e),this.showHideReal(this.areasProcessor.allObjects,t,e),this.showHideReal(this.linesProcessor.allObjects,t,e)},showHideReal:function(t,e,i){var o;for(o=0;o<t.length;o++){var s=t[o];s.groupId==e&&(i?s.displayObject.show():s.displayObject.hide())}},update:function(){this.zoomControl.update()},animateMap:function(){var t=this;t.totalFrames=1e3*t.zoomDuration/AmCharts.updateRate,t.totalFrames+=1,t.frame=0,t.tweenPercent=0,setTimeout(function(){t.updateSize.call(t)},AmCharts.updateRate)},updateSize:function(){var t=this,e=t.totalFrames;t.frame<=e?(t.frame++,1<=(e=t.container.easeOutSine(0,t.frame,0,1,e))?(e=1,t.wheelBusy=!1):setTimeout(function(){t.updateSize.call(t)},AmCharts.updateRate)):(e=1,t.wheelBusy=!1),t.tweenPercent=e,t.rescaleMapAndObjects()},rescaleMapAndObjects:function(){var t=this.initialScale,e=this.initialX,i=this.initialY,o=this.tweenPercent;this.mapContainer.translate(e+(this.finalX-e)*o,i+(this.finalY-i)*o,t+(this.finalScale-t)*o),this.rescaleObjects(),this.updateSmallMap(),1==o&&(t={type:"zoomCompleted",chart:this},this.fire(t.type,t))},updateSmallMap:function(){this.smallMap&&this.smallMap.update()},rescaleObjects:function(){var t,e=this.mapContainer.scale,i=this.imagesProcessor.objectsToResize;for(t=0;t<i.length;t++){var o=i[t].image;o.translate(o.x,o.y,i[t].scale/e,!0)}if(o=(i=this.linesProcessor).linesToResize)for(t=0;t<o.length;t++){var s=o[t];s.line.setAttr("stroke-width",s.thickness/e)}for(i=i.objectsToResize,t=0;t<i.length;t++)(o=i[t]).translate(o.x,o.y,1/e)},handleTouchStart:function(t){this.handleMouseMove(t),this.handleMouseDown(t)},handleTouchEnd:function(t){this.previousDistance=NaN,this.handleReleaseOutside(t)},handleMouseDown:function(t){if(this.chartCreated&&this.mouseIsOver&&(AmCharts.resetMouseOver(),this.mouseIsOver=!0,this.dragMap&&(this.stopAnimation(),this.isDragging=!0,this.mapContainerClickX=this.mapContainer.x,this.mapContainerClickY=this.mapContainer.y,this.panEventsEnabled||t&&t.preventDefault&&t.preventDefault()),(t=t||window.event).shiftKey&&!0===this.developerMode&&this.getDevInfo(),t&&t.touches)){var e=this.mouseX,i=this.mouseY,o=t.touches.item(1);o&&(t=o.pageX-AmCharts.findPosX(this.div),o=o.pageY-AmCharts.findPosY(this.div),this.middleXP=(e+(t-e)/2)/this.realWidth,this.middleYP=(i+(o-i)/2)/this.realHeight)}},stopDrag:function(){this.isDragging=!1},handleReleaseOutside:function(){this.isDragging=!1,this.zoomControl.draggerUp(),this.mapWasDragged=!1;var t=this.mapContainer,e=this.mapContainerClickX,i=this.mapContainerClickY;isNaN(e)||isNaN(i)||!(2<Math.abs(t.x-e)||Math.abs(t.y-i))||(this.mapWasDragged=!0),this.mapContainerClickY=this.mapContainerClickX=NaN,this.objectWasClicked=!1,this.zoomOnDoubleClick&&this.mouseIsOver&&((t=(new Date).getTime())-this.previousClickTime<200&&20<t-this.previousClickTime&&this.doDoubleClickZoom(),this.previousClickTime=t)},handleTouchMove:function(t){this.handleMouseMove(t)},resetPinch:function(){this.mapWasPinched=!1},handleMouseMove:function(t){var e=this;AmCharts.AmMap.base.handleMouseMove.call(e,t);var i=e.previuosMouseX,o=e.previuosMouseY,s=e.mouseX,a=e.mouseY;isNaN(i)&&(i=s),isNaN(o)&&(o=a),e.mouse2X=NaN,e.mouse2Y=NaN,t&&t.touches&&((r=t.touches.item(1))&&(e.mouse2X=r.pageX-AmCharts.findPosX(e.div),e.mouse2Y=r.pageY-AmCharts.findPosY(e.div)));var r=e.mapContainer,n=e.mouse2X,h=e.mouse2Y;if(e.pinchTO&&clearTimeout(e.pinchTO),e.pinchTO=setTimeout(function(){e.resetPinch.call(e)},1e3),!isNaN(n)){e.isDragging=!1,t.preventDefault&&t.preventDefault();n=Math.sqrt(Math.pow(n-s,2)+Math.pow(h-a,2));var l=e.previousDistance;h=Math.max(e.realWidth,e.realHeight);if(Math.abs(l-n)<5&&(e.isDragging=!0),!isNaN(l)){var c=5*Math.abs(l-n)/h,d=(h=r.scale,h=l<n?h+h*c:h-h*c,l=e.zoomLevel(),e.middleXP),u=(c=e.middleYP,e.realHeight/e.mapHeight),m=e.realWidth/e.mapWidth;d=(e.zoomX()-d*m)*(h/l)+d*m,c=(e.zoomY()-c*u)*(h/l)+c*u;.1<Math.abs(h-l)&&(e.zoomTo(h,d,c,!0),e.mapWasPinched=!0,clearTimeout(e.pinchTO))}e.previousDistance=n}e.isDragging&&(e.hideBalloon(),r.translate(r.x+(s-i),r.y+(a-o),r.scale),e.updateSmallMap(),t&&t.preventDefault&&t.preventDefault()),e.previuosMouseX=s,e.previuosMouseY=a},selectObject:function(t){var e=this,i=(t=t||e.dataProvider).linkToObject;t.useTargetsZoomValues&&i&&(t.zoomX=i.zoomX,t.zoomY=i.zoomY,t.zoomLatitude=i.zoomLatitude,t.zoomLongitude=i.zoomLongitude,t.zoomLevel=i.zoomLevel);var o=e.selectedObject;o&&e.returnInitialColor(o);var s=!1;if("MapArea"==(e.selectedObject=t).objectType&&t.autoZoomReal&&(s=!0),i&&!s&&("string"==typeof i&&(i=e.getObjectById(i)),isNaN(t.zoomLevel)&&isNaN(t.zoomX)&&isNaN(t.zoomY))){if(e.extendMapData(i))return;e.selectObject(i)}else{if(e.allowMultipleDescriptionWindows||e.closeAllDescriptions(),clearTimeout(e.selectedObjectTimeOut),clearTimeout(e.processObjectsTimeOut),i=e.zoomDuration,!s&&isNaN(t.zoomLevel)&&isNaN(t.zoomX)&&isNaN(t.zoomY)?(e.showDescriptionAndGetUrl(),e.processObjects()):(e.selectedObjectTimeOut=setTimeout(function(){e.showDescriptionAndGetUrl.call(e)},1e3*i+200),e.showObjectsAfterZoom?e.processObjectsTimeOut=setTimeout(function(){e.processObjects.call(e)},1e3*i+200):e.processObjects()),(s=t.displayObject)?(s.setAttr("stroke",t.outlineColorReal),void 0!==(i=t.selectedColorReal)&&s.setAttr("fill",i),t.selectable||(s.setAttr("cursor","default"),(s=t.imageLabel)&&s.setAttr("cursor","default"))):e.returnInitialColorReal(t),s=t.groupId){var a;i=e.getGroupById(s);for(a=0;a<i.length;a++){var r=i[a];if(s=r.displayObject){var n=r.selectedColorReal;void 0!==n?s.setAttr("fill",n):e.returnInitialColor(r)}}}e.zoomToSelectedObject(),o!=t&&(t={type:"selectedObjectChanged",chart:e},e.fire(t.type,t))}},returnInitialColor:function(t,e){if(this.returnInitialColorReal(t),e&&(t.isFirst=!1),o=t.groupId){var i,o=this.getGroupById(o);for(i=0;i<o.length;i++)this.returnInitialColorReal(o[i]),e&&(o[i].isFirst=!1)}},closeAllDescriptions:function(){this.descriptionsDiv.innerHTML=""},returnInitialColorReal:function(t){t.isOver=!1;var e=t.displayObject;if(e){if("MapImage"==t.objectType){var i=t.tempScale;isNaN(i)||e.translate(e.x,e.y,i,!0)}i=t.colorReal,t.showAsSelected&&(i=t.selectedColorReal),"bubble"==t.type&&(i=void 0),void 0!==i&&e.setAttr("fill",i);var o=t.image;o&&o.setAttr("fill",i),e.setAttr("stroke",t.outlineColorReal),(e=t.imageLabel)&&!t.labelInactive&&e.setAttr("fill",t.labelColorReal)}},zoomToRectangle:function(t,e,i,o){var s=this.realWidth,a=this.realHeight,r=this.mapSet.scale,n=this.zoomControl;s=AmCharts.fitToBounds(o/a<i/s?.8*s/(i*r):.8*a/(o*r),n.minZoomLevel,n.maxZoomLevel);this.zoomToMapXY(s,(t+i/2)*r,(e+o/2)*r)},zoomToLatLongRectangle:function(t,e,i,o){var s=this.dataProvider,a=this.zoomControl,r=Math.abs(i-t),n=Math.abs(e-o),h=Math.abs(s.rightLongitude-s.leftLongitude);s=Math.abs(s.topLatitude-s.bottomLatitude),a=AmCharts.fitToBounds(n/s<r/h?.8*h/r:.8*s/n,a.minZoomLevel,a.maxZoomLevel);this.zoomToLongLat(a,t+(i-t)/2,o+(e-o)/2)},getGroupById:function(t){var e=[];return this.getGroup(this.imagesProcessor.allObjects,t,e),this.getGroup(this.linesProcessor.allObjects,t,e),this.getGroup(this.areasProcessor.allObjects,t,e),e},zoomToGroup:function(t){var e,i,o,s,a;for(t=this.getGroupById(t),a=0;a<t.length;a++){var r=(l=t[a].displayObject.getBBox()).y,n=l.y+l.height,h=l.x,l=l.x+l.width;(r<e||isNaN(e))&&(e=r),(s<n||isNaN(s))&&(s=n),(h<i||isNaN(i))&&(i=h),(o<l||isNaN(o))&&(o=l)}i-=(t=this.mapSet.getBBox()).x,o-=t.x,s-=t.y,e-=t.y,this.zoomToRectangle(i,e,o-i,s-e)},getGroup:function(t,e,i){var o;if(t)for(o=0;o<t.length;o++){var s=t[o];s.groupId==e&&i.push(s)}},zoomToStageXY:function(t,e,i,o){if(!this.objectWasClicked){var s=this.zoomLevel();i=this.coordinateToLatitude((i-this.mapContainer.y)/s),e=this.coordinateToLongitude((e-this.mapContainer.x)/s),this.zoomToLongLat(t,e,i,o)}},zoomToLongLat:function(t,e,i,o){e=this.longitudeToCoordinate(e),i=this.latitudeToCoordinate(i),this.zoomToMapXY(t,e,i,o)},zoomToMapXY:function(t,e,i,o){var s=this.mapWidth,a=this.mapHeight;this.zoomTo(t,-e/s*t+this.realWidth/s/2,-i/a*t+this.realHeight/a/2,o)},zoomToSelectedObject:function(){var t=this.selectedObject,e=t.zoomLatitude,i=t.zoomLongitude,o=t.zoomLevel,s=this.zoomInstantly,a=t.zoomX,r=t.zoomY,n=this.realWidth,h=this.realHeight;isNaN(o)||(isNaN(e)||isNaN(i)?this.zoomTo(o,a,r,s):this.zoomToLongLat(o,i,e,s)),this.zoomInstantly=!1,"MapImage"==t.objectType&&isNaN(t.zoomX)&&isNaN(t.zoomY)&&isNaN(t.zoomLatitude)&&isNaN(t.zoomLongitude)&&!isNaN(t.latitude)&&!isNaN(t.longitude)&&this.zoomToLongLat(t.zoomLevel,t.longitude,t.latitude),"MapArea"==t.objectType&&(a=t.displayObject.getBBox(),e=this.mapScale,i=a.x*e,o=a.y*e,s=a.width*e,a=a.height*e,n=t.autoZoomReal&&isNaN(t.zoomLevel)?a/h<s/n?.8*n/s:.8*h/a:t.zoomLevel,h=this.zoomControl,n=AmCharts.fitToBounds(n,h.minZoomLevel,h.maxZoomLevel),isNaN(t.zoomX)&&isNaN(t.zoomY)&&isNaN(t.zoomLatitude)&&isNaN(t.zoomLongitude)&&(t=this.mapSet.getBBox(),this.zoomToMapXY(n,-t.x*e+i+s/2,-t.y*e+o+a/2)))},zoomTo:function(t,e,i,o){var s=this.zoomControl;t=AmCharts.fitToBounds(t,s.minZoomLevel,s.maxZoomLevel),s=this.zoomLevel(),isNaN(e)&&(e=this.realWidth/this.mapWidth,e=(this.zoomX()-.5*e)*(t/s)+.5*e),isNaN(i)&&(i=this.realHeight/this.mapHeight,i=(this.zoomY()-.5*i)*(t/s)+.5*i),this.stopAnimation(),isNaN(t)||(s=this.mapContainer,this.initialX=s.x,this.initialY=s.y,this.initialScale=s.scale,this.finalX=this.mapWidth*e,this.finalY=this.mapHeight*i,this.finalScale=t,this.finalX!=this.initialX||this.finalY!=this.initialY||this.finalScale!=this.initialScale?o?(this.tweenPercent=1,this.rescaleMapAndObjects(),this.wheelBusy=!1):this.animateMap():this.wheelBusy=!1)},loadXml:function(t){var e;(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).overrideMimeType&&e.overrideMimeType("text/xml"),e.open("GET",t,!1),e.send(),this.parseXMLObject(e.responseXML),this.svgData&&this.buildEverything()},stopAnimation:function(){this.frame=this.totalFrames},processObjects:function(){var t=this.container,e=this.stageObjectsContainer;e&&e.remove(),this.stageObjectsContainer=e=t.set(),this.trendLinesSet.push(e);var i=this.mapObjectsContainer;i&&i.remove(),this.mapObjectsContainer=i=t.set(),this.mapContainer.push(i),i.toFront(),e.toFront(),(t=this.selectedObject)&&(this.imagesProcessor.reset(),this.linesProcessor.reset(),this.imagesProcessor.process(t),this.linesProcessor.process(t)),this.rescaleObjects()},processAreas:function(){this.areasProcessor.process(this.dataProvider)},buildSVGMap:function(){var t,e=this.svgData.g.path,i=this.container,o=i.set();for(void 0===e.length&&(e=[e]),t=0;t<e.length;t++){var s=e[t],a=s.title,r=i.path(s.d);r.id=s.id,this.svgAreasById[s.id]={area:r,title:a},this.svgAreas.push(r),o.push(r)}this.mapSet=o,this.mapContainer.push(o),this.resizeMap()},addObjectEventListeners:function(t,e){var i=this;t.mouseup(function(){i.clickMapObject(e)}).mouseover(function(){i.rollOverMapObject(e)}).mouseout(function(){i.rollOutMapObject(e)}).touchend(function(){i.clickMapObject(e)}).touchstart(function(){i.rollOverMapObject(e)})},checkIfSelected:function(t){if((i=this.selectedObject)==t)return!0;if(i=i.groupId){var e,i=this.getGroupById(i);for(e=0;e<i.length;e++)if(i[e]==t)return!0}return!1},clearMap:function(){this.chartDiv.innerHTML="",this.clearObjectList()},clearObjectList:function(){var t=this.objectList;t&&(t.div.innerHTML="")},checkIfLast:function(t){if(t){var e=t.parentNode;if(e&&e.lastChild==t)return!0}return!1},showAsRolledOver:function(t){var e=t.displayObject;if(!t.showAsSelected&&e&&!t.isOver){e.node.onmouseout=function(){},e.node.onmouseover=function(){},e.node.onclick=function(){},t.isFirst||(e.toFront(),t.isFirst=!0);var i,o=t.rollOverColorReal;null!=o&&("MapImage"==t.objectType?(i=t.image)&&i.setAttr("fill",o):e.setAttr("fill",o)),(i=t.imageLabel)&&!t.labelInactive&&(null!=(o=t.labelRollOverColorReal)&&i.setAttr("fill",o)),null!=(o=t.rollOverOutlineColorReal)&&("MapImage"==t.objectType?(i=t.image)&&i.setAttr("stroke",o):e.setAttr("stroke",o)),"MapImage"==t.objectType&&(i=t.rollOverScaleReal,isNaN(i)||(t.tempScale=e.scale,e.translate(e.x,e.y,e.scale*i,!0))),this.useHandCursorOnClickableOjects&&this.checkIfClickable(t)&&this.selectedObject!=t&&e.setAttr("cursor","pointer"),this.addObjectEventListeners(e,t),t.isOver=!0}},rollOverMapObject:function(t,e){if(this.chartCreated){if(this.handleMouseMove(),(o=this.previouslyHovered)&&o!=t&&!1===this.checkIfSelected(o)&&(this.returnInitialColor(o,!0),this.previouslyHovered=null),!1===this.checkIfSelected(t)){if(o=t.groupId){var i,o=this.getGroupById(o);for(i=0;i<o.length;i++)o[i]!=t&&this.showAsRolledOver(o[i])}this.showAsRolledOver(t)}else(o=t.displayObject)&&o.setAttr("cursor","default");if(this.showDescriptionOnHover)this.showDescription(t);else if((this.showBalloonOnSelectedObject||!this.checkIfSelected(t))&&!1!==e&&(i=t.balloonTextReal)&&(o=this.balloon,(i=this.formatString(i,t))&&""!==i)){var s=t.colorReal;void 0!==s&&this.useObjectColorForBalloon||(s=o.fillColor),clearTimeout(this.hoverInt),this.showBalloon(i,s,!0)}o={type:"rollOverMapObject",mapObject:t,chart:this},this.fire(o.type,o),this.previouslyHovered=t}},rollOutMapObject:function(t){this.hideBalloon(),this.chartCreated&&t.isOver&&(this.checkIfSelected(t)||this.returnInitialColor(t),t={type:"rollOutMapObject",mapObject:t,chart:this},this.fire(t.type,t))},formatString:function(t,e){var i=this.numberFormatter,o=this.percentFormatter,s=e.title;null==s&&(s="");var a=e.value;a=isNaN(a)?"":AmCharts.formatNumber(a,i),i=e.percents,i=isNaN(i)?"":AmCharts.formatNumber(i,o);null==(o=e.description)&&(o="");var r=e.customData;return null==r&&(r=""),AmCharts.massReplace(t,{"[[title]]":s,"[[value]]":a,"[[percent]]":i,"[[description]]":o,"[[customData]]":r})},clickMapObject:function(t){this.hideBalloon(),this.chartCreated&&!this.mapWasDragged&&this.checkIfClickable(t)&&!this.mapWasPinched&&(this.selectObject(t),t={type:"clickMapObject",mapObject:t,chart:this},this.fire(t.type,t),this.objectWasClicked=!0)},checkIfClickable:function(t){return!0===t.selectable||this.selectedObject!=t&&!(!("MapArea"==t.objectType&&t.autoZoomReal||null!==t.url||null!==t.linkToObject||0<t.images.length||0<t.lines.length)&&isNaN(t.zoomLevel)&&isNaN(t.zoomX)&&isNaN(t.zoomY)&&!t.description)},resizeMap:function(){var t=this.mapSet;if(t)if(this.fitMapToContainer){var e=t.getBBox(),i=this.realWidth,o=this.realHeight,s=e.width,a=e.height;i=a/o<s/i?i/s:o/a;t.translate(-e.x*i,-e.y*i,i),this.mapScale=i,this.mapHeight=a*i,this.mapWidth=s*i}else e=group.transform.match(/([\-]?[\d.]+)/g),t.translate(e[0],e[1],e[2])},zoomIn:function(){var t=this.zoomLevel()*this.zoomControl.zoomFactor;this.zoomTo(t)},zoomOut:function(){var t=this.zoomLevel()/this.zoomControl.zoomFactor;this.zoomTo(t)},moveLeft:function(){var t=this.zoomX()+this.zoomControl.panStepSize;this.zoomTo(this.zoomLevel(),t,this.zoomY())},moveRight:function(){var t=this.zoomX()-this.zoomControl.panStepSize;this.zoomTo(this.zoomLevel(),t,this.zoomY())},moveUp:function(){var t=this.zoomY()+this.zoomControl.panStepSize;this.zoomTo(this.zoomLevel(),this.zoomX(),t)},moveDown:function(){var t=this.zoomY()-this.zoomControl.panStepSize;this.zoomTo(this.zoomLevel(),this.zoomX(),t)},zoomX:function(){return this.mapSet?Math.round(1e4*this.mapContainer.x/this.mapWidth)/1e4:NaN},zoomY:function(){return this.mapSet?Math.round(1e4*this.mapContainer.y/this.mapHeight)/1e4:NaN},goHome:function(){this.selectObject(this.dataProvider);var t={type:"homeButtonClicked",chart:this};this.fire(t.type,t)},zoomLevel:function(){return Math.round(1e5*this.mapContainer.scale)/1e5},showDescriptionAndGetUrl:function(){var t=this.selectedObject;if(t){this.showDescription();var e=t.url;if(e)AmCharts.getURL(e,t.urlTarget);else if(e=t.linkToObject){if("string"==typeof e){var i=this.getObjectById(e);if(i)return void this.selectObject(i)}e&&t.passZoomValuesToTarget&&(e.zoomLatitude=this.zoomLatitude(),e.zoomLongitude=this.zoomLongitude(),e.zoomLevel=this.zoomLevel()),this.extendMapData(e)||this.selectObject(e)}}},extendMapData:function(t){var e=t.objectType;if("MapImage"!=e&&"MapArea"!=e&&"MapLine"!=e)return AmCharts.extend(t,new AmCharts.MapData),this.dataProvider=t,this.zoomInstantly=!0,this.validateData(),!0},showDescription:function(t){if(t=t||this.selectedObject,this.allowMultipleDescriptionWindows||this.closeAllDescriptions(),t.description){var e=t.descriptionWindow;e&&e.close(),e=new AmCharts.DescriptionWindow,t.descriptionWindow=e;var i=t.descriptionWindowWidth,o=t.descriptionWindowHeight,s=t.descriptionWindowX,a=t.descriptionWindowY;isNaN(s)&&(s=(s=this.mouseX)>this.realWidth/2?s-i-20:s+20),isNaN(a)&&(a=this.mouseY),e.maxHeight=o,e.show(this,this.descriptionsDiv,t.description,t.title),(t=e.div.style).width=i+"px",t.maxHeight=o+"px",t.left=s+"px",t.top=a+"px"}},parseXMLObject:function(t){var e={root:{}};this.parseXMLNode(e,"root",t),this.svgData=e.root.svg,this.getBounds()},getBounds:function(){var t=this.dataProvider;try{var e=this.svgData.defs["amcharts:ammap"];t.leftLongitude=Number(e.leftLongitude),t.rightLongitude=Number(e.rightLongitude),t.topLatitude=Number(e.topLatitude),t.bottomLatitude=Number(e.bottomLatitude),t.projection=e.projection}catch(t){}},latitudeToCoordinate:function(t){var e,i=this.dataProvider;if(this.mapSet){e=i.topLatitude;var o=i.bottomLatitude;"mercator"==i.projection&&(t=this.mercatorLatitudeToCoordinate(t),e=this.mercatorLatitudeToCoordinate(e),o=this.mercatorLatitudeToCoordinate(o)),e=(t-e)/(o-e)*this.mapHeight}return e},longitudeToCoordinate:function(t){var e,i=this.dataProvider;return this.mapSet&&(e=(t-(e=i.leftLongitude))/(i.rightLongitude-e)*this.mapWidth),e},mercatorLatitudeToCoordinate:function(t){return 89.5<t&&(t=89.5),t<-89.5&&(t=-89.5),t=AmCharts.degreesToRadians(t),t=.5*Math.log((1+Math.sin(t))/(1-Math.sin(t))),AmCharts.radiansToDegrees(t/2)},zoomLatitude:function(){return this.coordinateToLatitude((-this.mapContainer.y+this.previousHeight/2)/this.zoomLevel())},zoomLongitude:function(){return this.coordinateToLongitude((-this.mapContainer.x+this.previousWidth/2)/this.zoomLevel())},getAreaCenterLatitude:function(t){t=t.displayObject.getBBox();var e=this.mapScale;return t=-this.mapSet.getBBox().y*e+(t.y+t.height/2)*e,this.coordinateToLatitude(t)},getAreaCenterLongitude:function(t){t=t.displayObject.getBBox();var e=this.mapScale;return t=-this.mapSet.getBBox().x*e+(t.x+t.width/2)*e,this.coordinateToLongitude(t)},coordinateToLatitude:function(t){var e;if(this.mapSet){var i=this.dataProvider,o=i.bottomLatitude,s=i.topLatitude;e=this.mapHeight,e="mercator"==i.projection?(i=this.mercatorLatitudeToCoordinate(o),s=this.mercatorLatitudeToCoordinate(s),t=2*Math.atan(Math.exp(2*(t*(i-s)/e+s)*Math.PI/180))-.5*Math.PI,AmCharts.radiansToDegrees(t)):t/e*(o-s)+s}return Math.round(1e6*e)/1e6},coordinateToLongitude:function(t){var e,i=this.dataProvider;return this.mapSet&&(e=t/this.mapWidth*(i.rightLongitude-i.leftLongitude)+i.leftLongitude),Math.round(1e6*e)/1e6},milesToPixels:function(t){var e=this.dataProvider;return t*(this.mapWidth/(e.rightLongitude-e.leftLongitude))/69.172},kilometersToPixels:function(t){var e=this.dataProvider;return t*(this.mapWidth/(e.rightLongitude-e.leftLongitude))/111.325},handleBackgroundClick:function(){if(this.backgroundZoomsToTop&&!this.mapWasDragged){var t=this.dataProvider;if(this.checkIfClickable(t))this.clickMapObject(t);else{var e=t.zoomX,i=t.zoomY,o=t.zoomLongitude,s=t.zoomLatitude;t=t.zoomLevel;isNaN(e)||isNaN(i)||this.zoomTo(t,e,i),isNaN(o)||isNaN(s)||this.zoomToLongLat(t,o,s,!0)}}},parseXMLNode:function(t,e,i,o){var s,a,r;if(void 0===o&&(o=""),i){var n=i.childNodes.length;for(s=0;s<n;s++){var h=(a=i.childNodes[s]).nodeName,l=a.nodeValue?this.trim(a.nodeValue):"",c=!1;if(a.attributes&&0<a.attributes.length&&(c=!0),0!==a.childNodes.length||""!==l||!1!==c)if(3==a.nodeType||4==a.nodeType){if(""!==l){for(r in a=0,t[e])t[e].hasOwnProperty(r)&&a++;a?t[e]["#text"]=l:t[e]=l}}else if(1==a.nodeType){var d;if(void 0!==t[e][h]?void 0===t[e][h].length?(d=t[e][h],t[e][h]=[],t[e][h].push(d),t[e][h].push({}),d=t[e][h][1]):"object"==typeof t[e][h]&&(t[e][h].push({}),d=t[e][h][t[e][h].length-1]):(t[e][h]={},d=t[e][h]),a.attributes&&a.attributes.length)for(l=0;l<a.attributes.length;l++)d[a.attributes[l].name]=a.attributes[l].value;void 0!==t[e][h].length?this.parseXMLNode(t[e][h],t[e][h].length-1,a,o+"  "):this.parseXMLNode(t[e],h,a,o+"  ")}}for(r in a=0,i="",t[e])"#text"==r?i=t[e][r]:a++;0===a&&void 0===t[e].length&&(t[e]=i)}},doDoubleClickZoom:function(){if(!this.mapWasDragged){var t=this.zoomLevel()*this.zoomControl.zoomFactor;this.zoomToStageXY(t,this.mouseX,this.mouseY)}},getDevInfo:function(){var t=this.zoomLevel(),e=(e=(e=(e=(e=(e=(e="zoomLevel:"+(t={chart:this,type:"writeDevInfo",zoomLevel:t,zoomX:this.zoomX(),zoomY:this.zoomY(),zoomLatitude:this.zoomLatitude(),zoomLongitude:this.zoomLongitude(),latitude:this.coordinateToLatitude((this.mouseY-this.mapContainer.y)/t),longitude:this.coordinateToLongitude((this.mouseX-this.mapContainer.x)/t),left:this.mouseX,top:this.mouseY,right:this.realWidth-this.mouseX,bottom:this.realHeight-this.mouseY,percentLeft:Math.round(this.mouseX/this.realWidth*100)+"%",percentTop:Math.round(this.mouseY/this.realHeight*100)+"%",percentRight:Math.round((this.realWidth-this.mouseX)/this.realWidth*100)+"%",percentBottom:Math.round((this.realHeight-this.mouseY)/this.realHeight*100)+"%"}).zoomLevel+", zoomLongitude:"+t.zoomLongitude+", zoomLatitude:"+t.zoomLatitude+"\n")+"zoomX:"+t.zoomX+", zoomY:"+t.zoomY+"\n")+"latitude:"+t.latitude+", longitude:"+t.longitude+"\n")+"left:"+t.left+", top:"+t.top+"\n")+"right:"+t.right+", bottom:"+t.bottom+"\n")+'left:"'+t.percentLeft+'", top:"'+t.percentTop+'"\n')+'right:"'+t.percentRight+'", bottom:"'+t.percentBottom+'"\n';t.str=e,this.fire(t.type,t)},getXY:function(t,e,i){return void 0!==t&&(-1!=String(t).indexOf("%")?(t=Number(t.split("%").join("")),i&&(t=100-t),t=Number(t)*e/100):i&&(t=e-t)),t},getObjectById:function(t){var e=this.dataProvider;if(e.areas){var i=this.getObject(t,e.areas);if(i)return i}return(i=this.getObject(t,e.images))?i:(t=this.getObject(t,e.lines))?t:void 0},getObject:function(t,e){var i;if(e)for(i=0;i<e.length;i++){var o=e[i];if(o.id==t)return o;if(o.areas){var s=this.getObject(t,o.areas);if(s)return s}if(s=this.getObject(t,o.images))return s;if(o=this.getObject(t,o.lines))return o}},parseData:function(){var t=this.dataProvider;this.processObject(t.areas,t,"area"),this.processObject(t.images,t,"image"),this.processObject(t.lines,t,"line")},processObject:function(t,e,i){var o;if(t)for(o=0;o<t.length;o++){var s=t[o];s.parentObject=e,"area"==i&&AmCharts.extend(s,new AmCharts.MapArea),"image"==i&&AmCharts.extend(s,new AmCharts.MapImage),"line"==i&&AmCharts.extend(s,new AmCharts.MapLine),s.areas&&this.processObject(s.areas,s,"area"),s.images&&this.processObject(s.images,s,"image"),s.lines&&this.processObject(s.lines,s,"line")}},getX:function(t,e){return this.getXY(t,this.realWidth,e)},getY:function(t,e){return this.getXY(t,this.realHeight,e)},trim:function(t){if(t){var e;for(e=0;e<t.length;e++)if(-1===" \n\r\t\f\v            ​\u2028\u2029　".indexOf(t.charAt(e))){t=t.substring(e);break}for(e=t.length-1;0<=e;e--)if(-1===" \n\r\t\f\v            ​\u2028\u2029　".indexOf(t.charAt(e))){t=t.substring(0,e+1);break}return-1===" \n\r\t\f\v            ​\u2028\u2029　".indexOf(t.charAt(0))?t:""}},drb:function(){var t,e=this.product,i=e+".com";if(2<=(s=window.location.hostname.split(".")).length&&(t=s[s.length-2]+"."+s[s.length-1]),AmCharts.remove(this.bbset),t!=i){i=i+"/?utm_source=swf&utm_medium=demo&utm_campaign=jsDemo"+e;var o="chart by ",s=145;for("ammap"==e&&(o="tool by ",s=125),t=AmCharts.rect(this.container,s,20,"#FFFFFF",1),(o=AmCharts.text(this.container,o+e+".com","#000000","Verdana",11,"start")).translate(7,9),t=this.container.set([t,o]),"ammap"==e&&t.translate(this.realWidth-s,0),this.bbset=t,this.linkSet.push(t),t.setAttr("cursor","pointer"),t.click(function(){window.location.href="http://"+i}),e=0;e<t.length;e++)t[e].attr({cursor:"pointer"})}}}),AmCharts.ZoomControl=AmCharts.Class({construct:function(){this.panStepSize=.1,this.zoomFactor=2,this.maxZoomLevel=64,this.minZoomLevel=1,this.zoomControlEnabled=this.panControlEnabled=!0,this.buttonRollOverColor="#CC0000",this.buttonFillColor="#990000",this.buttonFillAlpha=1,this.buttonBorderColor="#FFFFFF",this.buttonBorderThickness=this.buttonBorderAlpha=1,this.buttonIconColor="#FFFFFF",this.buttonColorHover="#FF0000",this.gridColor=this.homeIconColor="#FFFFFF",this.gridBackgroundColor="#000000",this.gridBackgroundAlpha=.15,this.gridAlpha=1,this.buttonSize=18,this.iconSize=11,this.buttonCornerRadius=0,this.gridHeight=150,this.top=this.left=10},init:function(t,e){var i=this;i.chart=t,AmCharts.remove(i.set);var o=e.set();o.translate(t.getX(i.left),t.getY(i.top));var s,a=i.buttonSize,r=i.buttonFillColor,n=i.buttonFillAlpha,h=i.buttonBorderThickness,l=i.buttonBorderColor,c=i.buttonBorderAlpha,d=i.buttonCornerRadius,u=i.buttonRollOverColor,m=i.gridHeight,p=i.zoomFactor,g=i.minZoomLevel,v=i.maxZoomLevel;if(i.previousDY=NaN,i.zoomControlEnabled){s=e.set(),o.push(s),i.set=o,i.zoomSet=s,(b=AmCharts.rect(e,a+6,m+2*a+6,i.gridBackgroundColor,i.gridBackgroundAlpha,0,0,0,4)).translate(-3,-3),b.mouseup(function(){i.handleBgUp()}),s.push(b),(b=new AmCharts.SimpleButton).setIcon(t.pathToImages+"plus.gif",i.iconSize),b.setClickHandler(t.zoomIn,t),b.init(e,a,a,r,n,h,l,c,d,u),s.push(b.set),(b=new AmCharts.SimpleButton).setIcon(t.pathToImages+"minus.gif",i.iconSize),b.setClickHandler(t.zoomOut,t),b.init(e,a,a,r,n,h,l,c,d,u),b.set.translate(0,m+a),s.push(b.set);var f,C=Math.log(v/g)/Math.log(p)+1,b=m/C;for(f=1;f<C;f++){var A=a+f*b;A=AmCharts.line(e,[1,a-2],[A,A],i.gridColor,i.gridAlpha,1);s.push(A)}(C=new AmCharts.SimpleButton).setDownHandler(i.draggerDown,i),C.setClickHandler(i.draggerUp,i),C.init(e,a,b,r,n,h,l,c,d,u),s.push(C.set),i.dragger=C.set,i.previousY=NaN,m-=b,g=Math.log(g/100)/Math.log(p),p=Math.log(v/100)/Math.log(p),i.realStepSize=m/(p-g),i.realGridHeight=m,i.stepMax=p}i.panControlEnabled&&(p=e.set(),o.push(p),s&&s.translate(a,4*a),(s=new AmCharts.SimpleButton).setIcon(t.pathToImages+"panLeft.gif",i.iconSize),s.setClickHandler(t.moveLeft,t),s.init(e,a,a,r,n,h,l,c,d,u),s.set.translate(0,a),p.push(s.set),(s=new AmCharts.SimpleButton).setIcon(t.pathToImages+"panRight.gif",i.iconSize),s.setClickHandler(t.moveRight,t),s.init(e,a,a,r,n,h,l,c,d,u),s.set.translate(2*a,a),p.push(s.set),(s=new AmCharts.SimpleButton).setIcon(t.pathToImages+"panUp.gif",i.iconSize),s.setClickHandler(t.moveUp,t),s.init(e,a,a,r,n,h,l,c,d,u),s.set.translate(a,0),p.push(s.set),(s=new AmCharts.SimpleButton).setIcon(t.pathToImages+"panDown.gif",i.iconSize),s.setClickHandler(t.moveDown,t),s.init(e,a,a,r,n,h,l,c,d,u),s.set.translate(a,2*a),p.push(s.set),(n=new AmCharts.SimpleButton).setIcon(t.pathToImages+"homeIcon.gif",i.iconSize),n.setClickHandler(t.goHome,t),n.init(e,a,a,r,0,0,l,0,d,u),n.set.translate(a,a),p.push(n.set),o.push(p))},draggerDown:function(){this.chart.stopDrag(),this.isDragging=!0},draggerUp:function(){this.isDragging=!1},handleBgUp:function(){var t=this.chart,e=100*Math.pow(this.zoomFactor,this.stepMax-(t.mouseY-this.zoomSet.y-this.set.y-this.buttonSize-this.realStepSize/2)/this.realStepSize);t.zoomTo(e)},update:function(){var t,e=this.zoomFactor,i=this.realStepSize,o=this.stepMax,s=this.dragger,a=this.buttonSize,r=this.chart;this.isDragging?(r.stopDrag(),t=s.y+(r.mouseY-this.previousY),t=AmCharts.fitToBounds(t,a,this.realGridHeight+a),i=100*Math.pow(e,o-(t-a)/i),r.zoomTo(i,NaN,NaN,!0)):t=(o-(t=Math.log(r.zoomLevel()/100)/Math.log(e)))*i+a,this.previousY=r.mouseY,this.previousDY!=t&&s&&(s.translate(0,t),this.previousDY=t)}}),AmCharts.SimpleButton=AmCharts.Class({construct:function(){},init:function(t,e,i,o,s,a,r,n,h,l){var c=this;c.rollOverColor=l,c.color=o,l=t.set(),c.set=l,o=AmCharts.rect(t,e,i,o,s,a,r,n,h),l.push(o),(s=c.iconPath)&&(a=c.iconSize,t=t.image(s,(e-a)/2,(i-a)/2,a,a),l.push(t),t.mousedown(function(){c.handleDown()}).mouseup(function(){c.handleUp()}).mouseover(function(){c.handleOver()}).mouseout(function(){c.handleOut()})),o.mousedown(function(){c.handleDown()}).mouseup(function(){c.handleUp()}).mouseover(function(){c.handleOver()}).mouseout(function(){c.handleOut()}),c.bg=o},setIcon:function(t,e){this.iconPath=t,this.iconSize=e},setClickHandler:function(t,e){this.clickHandler=t,this.scope=e},setDownHandler:function(t,e){this.downHandler=t,this.scope=e},handleUp:function(){var t=this.clickHandler;t&&t.call(this.scope)},handleDown:function(){var t=this.downHandler;t&&t.call(this.scope)},handleOver:function(){this.bg.setAttr("fill",this.rollOverColor)},handleOut:function(){this.bg.setAttr("fill",this.color)}}),AmCharts.SmallMap=AmCharts.Class({construct:function(){this.mapColor="#e6e6e6",this.rectangleColor="#FFFFFF",this.top=this.right=10,this.minimizeButtonWidth=16,this.backgroundColor="#9A9A9A",this.backgroundAlpha=1,this.borderColor="#FFFFFF",this.borderThickness=3,this.borderAlpha=1,this.size=.2},init:function(t,e){var i=this;i.chart=t,i.container=e,i.width=t.realWidth*i.size,i.height=t.realHeight*i.size,AmCharts.remove(i.set);var o=e.set();i.set=o;var s=e.set();i.allSet=s,o.push(s),i.buildSVGMap();var a=i.borderThickness,r=i.borderColor;(l=AmCharts.rect(e,i.width+a,i.height+a,i.backgroundColor,i.backgroundAlpha,a,r,i.borderAlpha)).translate(-a/2,-a/2),s.push(l),l.toBack();var n,h,l=i.minimizeButtonWidth,c=new AmCharts.SimpleButton;c.setIcon(t.pathToImages+"arrowDown.gif",l),c.setClickHandler(i.minimize,i),c.init(e,l,l,r,1,1,r,1),c=c.set,i.downButtonSet=c,o.push(c);var d,u,m=new AmCharts.SimpleButton;m.setIcon(t.pathToImages+"arrowUp.gif",l),m.setClickHandler(i.maximize,i),m.init(e,l,l,r,1,1,r,1),r=m.set,(i.upButtonSet=r).hide(),o.push(r),isNaN(i.top)||(n=t.getY(i.top)+a,u=0),isNaN(i.bottom)||(n=t.getY(i.bottom,!0)-i.height-a,u=i.height-l+a/2),isNaN(i.left)||(h=t.getX(i.left)+a,d=-a/2),isNaN(i.right)||(h=t.getX(i.right,!0)-i.width-a,d=i.width-l+a/2),(a=e.set()).clipRect(1,1,i.width,i.height),s.push(a),i.rectangleC=a,o.translate(h,n),c.translate(d,u),r.translate(d,u),s.mouseup(function(){i.handleMouseUp()}),i.drawRectangle()},minimize:function(){this.downButtonSet.hide(),this.upButtonSet.show(),this.allSet.hide()},maximize:function(){this.downButtonSet.show(),this.upButtonSet.hide(),this.allSet.show()},buildSVGMap:function(){var t,e=this.chart,i={fill:this.mapColor,stroke:this.mapColor,"stroke-opacity":1},o=e.svgData.g.path,s=this.container,a=s.set();for(t=0;t<o.length;t++){path=o[t].d;var r=s.path(path).attr(i);a.push(r)}this.allSet.push(a),i=a.getBBox(),o=this.size*e.mapScale,s=-i.x*o,t=-i.y*o;var n=r=0;e.centerMap&&(r=(this.width-i.width*o)/2,n=(this.height-i.height*o)/2),this.mapWidth=i.width*o,this.mapHeight=i.height*o,this.dx=r,this.dy=n,a.translate(s+r,t+n,o)},update:function(){var t=(o=this.chart).zoomLevel(),e=this.width,i=o.mapContainer,o=e/(o.realWidth*t),s=(e=e/t,t=this.height/t,this.rectangle);s.translate(-i.x*o+this.dx,-i.y*o+this.dy),0<e&&0<t&&(s.setAttr("width",e),s.setAttr("height",t)),this.rWidth=e,this.rHeight=t},drawRectangle:function(){var t=this.rectangle;AmCharts.remove(t),t=AmCharts.rect(this.container,10,10,"#000",0,1,this.rectangleColor,1),this.rectangleC.push(t),this.rectangle=t},handleMouseUp:function(){var t=this.chart,e=t.zoomLevel();t.zoomTo(e,-(t.mouseX-this.set.x-this.dx-this.rWidth/2)/this.mapWidth*e,-(t.mouseY-this.set.y-this.dy-this.rHeight/2)/this.mapHeight*e)}}),AmCharts.AreasProcessor=AmCharts.Class({construct:function(t){this.chart=t},process:function(t){this.updateAllAreas(),this.allObjects=[],t=t.areas;var e,i,o=this.chart,s=o.areasSettings,a=t.length,r=0,n=0,h=o.svgAreasById,l=s.color,c=s.alpha,d=s.outlineThickness,u=s.rollOverColor,m=s.selectedColor,p=s.rollOverAlpha,g=s.outlineColor,v=s.outlineAlpha,f=s.balloonText,C=s.rollOverOutlineColor,b=0;for(e=0;e<a;e++)i=t[e],b<(i=Math.abs(i.value))&&(b=i),isNaN(i)||(r+=i);for(o.maxValue=b,e=0;e<a;e++)i=t[e],isNaN(i.value)?i.percents=void 0:(i.percents=i.value/r*100,n<i.percents&&(n=i.percents));for(e=0;e<a;e++){i=t[e],this.allObjects.push(i),i.chart=o,i.baseSettings=s,i.autoZoomReal=null==i.autoZoom?s.autoZoom:i.autoZoom,null==(r=i.color)&&(r=l),b=i.alpha,isNaN(b)&&(b=c);var A=i.rollOverAlpha;isNaN(A)&&(A=p),isNaN(A)&&(A=b);var N=i.rollOverColor;null==N&&(N=u);var z=i.selectedColor;null==z&&(z=m);var O=i.balloonText;if(O=O||f,null!=s.colorSolid)if(isNaN(i.percents))i.colorReal=r;else{var w=i.percents/n,L=100/(o.colorSteps-1);w=Math.ceil(100*w/L)*L/100;i.colorReal=AmCharts.getColorFade(r,s.colorSolid,w)}null==(w=i.outlineColor)&&(w=g),L=i.outlineAlpha,isNaN(L)&&(L=v);var T=i.outlineThickness;isNaN(T)&&(T=d);var M,S=i.rollOverOutlineColor;if(null==S&&(S=C),i.alphaReal=b,i.rollOverColorReal=N,i.rollOverAlphaReal=A,i.balloonTextReal=O,i.selectedColorReal=z,i.outlineColorReal=w,i.outlineAlphaReal=L,i.rollOverOutlineColorReal=S,AmCharts.processDescriptionWindow(s,i),N=h[i.id])if(A=N.area,(N=N.title)&&!i.title&&(i.title=N),A)i.displayObject=A,i.mouseEnabled&&o.addObjectEventListeners(A,i),null!=r&&(M=r),null!=i.colorReal&&(M=i.showAsSelected||o.selectedObject==i?i.selectedColorReal:i.colorReal),A.setAttr("fill",M),A.setAttr("stroke",w),A.setAttr("stroke-opacity",L),A.setAttr("stroke-width",T),A.setAttr("fill-opacity",b)}},updateAllAreas:function(){var t,e,i=(t=this.chart).areasSettings,o=i.unlistedAreasColor,s=i.unlistedAreasAlpha,a=i.unlistedAreasOutlineColor,r=i.unlistedAreasOutlineAlpha,n=t.svgAreas,h=(t=t.dataProvider).areas,l={};for(e=0;e<h.length;e++)l[h[e].id]=h[e];for(e=0;e<n.length;e++)if(h=n[e],null!=o&&h.setAttr("fill",o),isNaN(s)||h.setAttr("fill-opacity",s),null!=a&&h.setAttr("stroke",a),isNaN(r)||h.setAttr("stroke-opacity",r),h.setAttr("stroke-width",i.outlineThickness),t.getAreasFromMap&&!l[h.id]){var c=new AmCharts.MapArea;c.parentObject=t,c.id=h.id,t.areas.push(c)}}}),AmCharts.AreasSettings=AmCharts.Class({construct:function(){this.alpha=1,this.autoZoom=!1,this.balloonText="[[title]]",this.color="#FFCC00",this.colorSolid="#990000",this.unlistedAreasAlpha=1,this.unlistedAreasColor="#DDDDDD",this.outlineColor="#FFFFFF",this.outlineAlpha=1,this.outlineThickness=.5,this.selectedColor=this.rollOverOutlineColor="#CC0000",this.unlistedAreasOutlineColor="#FFFFFF",this.unlistedAreasOutlineAlpha=1,this.descriptionWindowWidth=250}}),AmCharts.ImagesProcessor=AmCharts.Class({construct:function(t){this.chart=t,this.reset()},process:function(t){var e,i=t.images;for(e=0;e<i.length;e++)this.createImage(i[e],e);t.parentObject&&t.remainVisible&&this.process(t.parentObject)},createImage:function(t,e){var i=this.chart,o=i.container,s=i.mapObjectsContainer,a=i.stageObjectsContainer,r=i.imagesSettings;t.remove();var n=r.color,h=r.alpha,l=r.rollOverColor,c=r.selectedColor,d=r.balloonText,u=r.outlineColor,m=r.outlineAlpha,p=r.outlineThickness,g=r.selectedScale,v=r.labelPosition,f=r.labelColor,C=r.labelFontSize,b=r.labelRollOverColor;t.index=e,t.chart=i,t.baseSettings=i.imagesSettings;var A=o.set();t.displayObject=A;var N,z=t.color;null==z&&(z=n),n=t.alpha,isNaN(n)&&(n=h),h=t.outlineAlpha,isNaN(h)&&(h=m),null==(m=t.rollOverColor)&&(m=l),null==(l=t.selectedColor)&&(l=c),(c=t.balloonText)||(c=d),null==(d=t.outlineColor)&&(d=u),null==d&&(d=z),u=t.outlineThickness,isNaN(u)&&(u=p),(p=t.labelPosition)||(p=v),null==(v=t.labelColor)&&(v=f),null==(f=t.labelRollOverColor)&&(f=b),b=t.labelFontSize,isNaN(b)&&(b=C),C=t.selectedScale,isNaN(C)&&(C=g),isNaN(t.rollOverScale),t.colorReal=z,t.alphaReal=n,t.rollOverColorReal=m,t.balloonTextReal=c,t.selectedColorReal=l,t.labelColorReal=v,t.labelRollOverColorReal=f,t.labelFontSizeReal=b,t.labelPositionReal=p,t.selectedScaleReal=C,t.rollOverScaleReal=C,AmCharts.processDescriptionWindow(r,t),t.centeredReal=null==t.centered?r.centered:t.centered,b=t.type,f=t.imageURL,m=t.svgPath,v=t.width,l=t.height,r=t.scale,isNaN(t.percentWidth)||(v=t.percentWidth/100*i.realWidth),isNaN(t.percentHeight)||(l=t.percentHeight/100*i.realHeight),f||b||m||(b="circle",v=1,h=n=0),p=g=0,C=t.selectedColorReal,b?(isNaN(v)&&(v=10),isNaN(l)&&(l=10),"kilometers"==t.widthAndHeightUnits&&(v=i.kilometersToPixels(t.width),l=i.kilometersToPixels(t.height)),"miles"==t.widthAndHeightUnits&&(v=i.milesToPixels(t.width),l=i.milesToPixels(t.height)),N=this.createPredefinedImage(z,d,u,b,v,l),p=g=0,t.centeredReal&&(g=isNaN(t.right)?-v/2:v/2,p=isNaN(t.bottom)?-l/2:l/2),N.translate(g,p)):f?(isNaN(v)&&(v=10),isNaN(l)&&(l=10),(N=o.image(f,0,0,v,l)).node.setAttribute("preserveAspectRatio","none"),N.setAttr("opacity",n),t.centeredReal&&(g=isNaN(t.right)?-v/2:v/2,p=isNaN(t.bottom)?-l/2:l/2,N.translate(g,p))):m&&(d=(N=o.path(m)).getBBox(),t.centeredReal?(g=-d.x*r-d.width*r/2,isNaN(t.right)||(g=-g),p=-d.y*r-d.height*r/2,isNaN(t.bottom)||(p=-p)):g=p=0,N.translate(g,p,r),N.x=g,N.y=p),N&&(A.push(N),(t.image=N).setAttr("stroke-opacity",h),N.setAttr("fill-opacity",n),N.setAttr("fill",z)),!t.showAsSelected&&i.selectedObject!=t||null==C||N.setAttr("fill",C),z=null,t.label&&(z=AmCharts.text(o,t.label,t.labelColorReal,i.fontFamily,t.labelFontSizeReal,t.labelAlign),t.imageLabel=z,!t.labelInactive&&t.mouseEnabled&&i.addObjectEventListeners(z,t),A.push(z)),isNaN(t.latitude)||isNaN(t.longitude)?a.push(A):s.push(A),A&&(A.rotation=t.rotation),this.updateSizeAndPosition(t),t.mouseEnabled&&i.addObjectEventListeners(A,t)},updateSizeAndPosition:function(t){var e=this.chart,i=t.displayObject,o=e.getX(t.left),s=e.getY(t.top),a=t.image.getBBox();isNaN(t.right)||(o=e.getX(t.right,!0)-a.width*t.scale),isNaN(t.bottom)||(s=e.getY(t.bottom,!0)-a.height*t.scale);var r=t.longitude,n=t.latitude;a=this.objectsToResize;this.allSvgObjects.push(i),this.allObjects.push(t);var h=t.imageLabel;isNaN(o)||isNaN(s)?isNaN(n)||isNaN(r)||(o=e.longitudeToCoordinate(r),s=e.latitudeToCoordinate(n),i.translate(o,s,NaN,!0),!t.fixedSize)||(o=1,!t.showAsSelected&&e.selectedObject!=t||(o=t.selectedScaleReal),a.push({image:i,scale:o})):i.translate(o,s),this.positionLabel(h,t,t.labelPositionReal)},positionLabel:function(t,e,i){if(t){var o=0,s=0,a=0,r=0;(n=e.image)&&(r=n.getBBox(),s=n.y,o=n.x,a=r.width,r=r.height,e.svgPath&&(a*=e.scale,r*=e.scale));var n=(h=t.getBBox()).width,h=h.height;"right"==i&&(o+=a+n/2+5,s+=r/2-2),"left"==i&&(o+=-n/2-5,s+=r/2-2),"top"==i&&(s-=h/2+3,o+=a/2),"bottom"==i&&(s+=r+h/2,o+=a/2),"middle"==i&&(o+=a/2,s+=r/2),t.translate(o+e.labelShiftX,s+e.labelShiftY)}},createPredefinedImage:function(t,e,i,o,s,a){var r,n=this.chart.container;switch(o){case"circle":r=AmCharts.circle(n,s/2,t,1,i,e,1);break;case"rectangle":(r=AmCharts.rect(n,s,a,t,1,i,e,1)).translate(-s/2,-a/2);break;case"bubble":r=AmCharts.circle(n,s/2,t,1,i,e,1,!0)}return r},reset:function(){this.objectsToResize=[],this.allSvgObjects=[],this.allObjects=[],this.allLabels=[]}}),AmCharts.ImagesSettings=AmCharts.Class({construct:function(){this.balloonText="[[title]]",this.alpha=1,this.borderAlpha=0,this.borderThickness=1,this.labelPosition="right",this.labelColor="#000000",this.labelFontSize=11,this.color="#000000",this.labelRollOverColor="#00CC00",this.centered=!0,this.rollOverScale=this.selectedScale=1,this.descriptionWindowWidth=250}}),AmCharts.LinesProcessor=AmCharts.Class({construct:function(t){this.chart=t,this.reset()},process:function(t){var e,i=t.lines,o=this.chart,s=o.linesSettings,a=this.objectsToResize,r=o.mapObjectsContainer,n=o.stageObjectsContainer,h=s.thickness,l=s.dashLength,c=s.arrow,d=s.arrowSize,u=s.arrowColor,m=s.arrowAlpha,p=s.color,g=s.alpha,v=s.rollOverColor,f=s.selectedColor,C=s.rollOverAlpha,b=s.balloonText,A=o.container;for(e=0;e<i.length;e++){var N=i[e];N.chart=o,N.baseSettings=s;var z=A.set();if(N.displayObject=z,this.allSvgObjects.push(z),this.allObjects.push(N),N.mouseEnabled&&o.addObjectEventListeners(z,N),N.remainVisible||o.selectedObject==N.parentObject){var O=N.thickness;isNaN(O)&&(O=h);var w=N.dashLength;isNaN(w)&&(w=l);var L=N.color;null==L&&(L=p);var T=N.alpha;isNaN(T)&&(T=g);var M=N.rollOverAlpha;isNaN(M)&&(M=C),isNaN(M)&&(M=T),null==(k=N.rollOverColor)&&(k=v);var S=N.selectedColor;null==S&&(S=f),R=(R=N.balloonText)||b;var j=N.arrow;j=j||c;var y=N.arrowColor;null==y&&(y=u),null==y&&(y=L);var x=N.arrowAlpha;isNaN(x)&&(x=m),isNaN(x)&&(x=T);var I=N.arrowSize;isNaN(I)&&(I=d),N.alphaReal=T,N.colorReal=L,N.rollOverColorReal=k,N.rollOverAlphaReal=M,N.balloonTextReal=R,N.selectedColorReal=S,N.thicknessReal=O,AmCharts.processDescriptionWindow(s,N);M=this.processCoordinates(N.x,o.realWidth);var D,k=this.processCoordinates(N.y,o.realHeight),B=N.longitudes,R=N.latitudes,W=B.length;if(0<W)for(M=[],D=0;D<W;D++)M.push(o.longitudeToCoordinate(B[D]));if(0<(W=R.length))for(k=[],D=0;D<W;D++)k.push(o.latitudeToCoordinate(R[D]));if(0<M.length){var F,H,X;if(AmCharts.dx=0,AmCharts.dy=0,w=AmCharts.line(A,M,k,L,1,O,w,!1,!1,!0),AmCharts.dx=.5,AmCharts.dy=.5,z.push(w),z.setAttr("opacity",T),"none"!=j)"end"!=j&&"both"!=j||(T=M[M.length-1],L=k[k.length-1],F=1<M.length?(B=M[M.length-2],k[k.length-2]):(B=T,L),F=180*Math.atan((L-F)/(T-B))/Math.PI,X=L,F=(H=T)-B<0?F-90:F+90),"both"==j&&(T=AmCharts.polygon(A,[-I/2,0,I/2],[1.5*I,0,1.5*I],y,x,1,y,x),z.push(T),T.translate(H,X),T.rotate(F),N.fixedSize&&a.push(T)),"start"!=j&&"both"!=j||(T=M[0],X=k[0],H=1<M.length?(L=M[1],k[1]):(L=T,X),F=180*Math.atan((X-H)/(T-L))/Math.PI,F=(H=T)-L<0?F-90:F+90),"middle"==j&&(T=M[M.length-1],L=k[k.length-1],F=1<M.length?(B=M[M.length-2],k[k.length-2]):(B=T,L),H=B+(T-B)/2,X=F+(L-F)/2,F=180*Math.atan((L-F)/(T-B))/Math.PI,F=T-B<0?F-90:F+90),T=AmCharts.polygon(A,[-I/2,0,I/2],[1.5*I,0,1.5*I],y,x,1,y,x),z.push(T),T.translate(H,X),T.rotate(F),N.fixedSize&&a.push(T);N.fixedSize&&w&&this.linesToResize.push({line:w,thickness:O}),N.showAsSelected&&!isNaN(S)&&w.setAttr("stroke",S),0<R.length?r.push(z):n.push(z)}}}t.parentObject&&t.remainVisible&&this.process(t.parentObject)},processCoordinates:function(t,e){var i,o=[];for(i=0;i<t.length;i++){var s=t[i],a=Number(s);isNaN(a)&&(a=Number(s.replace("%",""))*e/100),isNaN(a)||o.push(a)}return o},reset:function(){this.objectsToResize=[],this.allSvgObjects=[],this.allObjects=[],this.linesToResize=[]}}),AmCharts.LinesSettings=AmCharts.Class({construct:function(){this.balloonText="[[title]]",this.thickness=1,this.dashLength=0,this.arrowSize=10,this.arrowAlpha=1,this.arrow="none",this.color="#990000",this.descriptionWindowWidth=250}}),AmCharts.MapObject=AmCharts.Class({construct:function(){this.fixedSize=this.mouseEnabled=!0,this.images=[],this.lines=[],this.areas=[],this.remainVisible=!0,this.passZoomValuesToTarget=this.selectable=!1}}),AmCharts.MapArea=AmCharts.Class({inherits:AmCharts.MapObject,construct:function(){this.objectType="MapArea",AmCharts.MapArea.base.construct.call(this)}}),AmCharts.MapLine=AmCharts.Class({inherits:AmCharts.MapObject,construct:function(){this.longitudes=[],this.latitudes=[],this.x=[],this.y=[],this.objectType="MapLine",this.arrow="none",AmCharts.MapLine.base.construct.call(this)}}),AmCharts.MapImage=AmCharts.Class({inherits:AmCharts.MapObject,construct:function(){this.scale=1,this.widthAndHeightUnits="pixels",this.objectType="MapImage",this.labelShiftY=this.labelShiftX=0,AmCharts.MapImage.base.construct.call(this)},remove:function(){var t=this.displayObject;t&&t.remove(),(t=this.imageLabel)&&t.remove()}}),AmCharts.degreesToRadians=function(t){return t/180*Math.PI},AmCharts.radiansToDegrees=function(t){return t/Math.PI*180},AmCharts.getColorFade=function(t,e,i){e=(s=AmCharts.hex2RGB(e))[0];var o=s[1],s=s[2];t=(r=AmCharts.hex2RGB(t))[0];var a=r[1],r=r[2];return"rgb("+(t+=Math.round((e-t)*i))+","+(a+=Math.round((o-a)*i))+","+(r+=Math.round((s-r)*i))+")"},AmCharts.hex2RGB=function(t){return[parseInt(t.substring(1,3),16),parseInt(t.substring(3,5),16),parseInt(t.substring(5,7),16)]},AmCharts.processDescriptionWindow=function(t,e){var i=t.descriptionWindowX,o=t.descriptionWindowY,s=t.descriptionWindowWidth,a=t.descriptionWindowHeight,r=e.descriptionWindowX;isNaN(r)&&(r=i),i=e.descriptionWindowY,isNaN(i)&&(i=o),o=e.descriptionWindowWidth,isNaN(o)&&(o=s),s=e.descriptionWindowHeight,isNaN(s)&&(s=a),e.descriptionWindowX=r,e.descriptionWindowY=i,e.descriptionWindowWidth=o,e.descriptionWindowHeight=s},AmCharts.MapData=AmCharts.Class({inherits:AmCharts.MapObject,construct:function(){AmCharts.MapData.base.construct.call(this),this.projection="mercator",this.topLatitude=90,this.bottomLatitude=-90,this.leftLongitude=-180,this.rightLongitude=180,this.zoomLevel=1,this.objectType="MapData",this.getAreasFromMap=!1}}),AmCharts.DescriptionWindow=AmCharts.Class({construct:function(){},show:function(t,e,i,o){var s=this,a=document.createElement("div");a.style.position="absolute",a.className="ammapDescriptionWindow",s.div=a,e.appendChild(a);var r=document.createElement("img");r.className="ammapDescriptionWindowCloseButton",r.src=t.pathToImages+"xIcon.gif",r.style.cssFloat="right",r.onclick=function(){s.close()},r.onmouseover=function(){r.src=t.pathToImages+"xIconH.gif"},r.onmouseout=function(){r.src=t.pathToImages+"xIcon.gif"},a.appendChild(r),(e=document.createElement("div")).className="ammapDescriptionTitle",e.onmousedown=function(){s.div.style.zIndex=1e3},a.appendChild(e),o=document.createTextNode(o),e.appendChild(o),o=e.offsetHeight,(e=document.createElement("div")).className="ammapDescriptionText",e.style.maxHeight=s.maxHeight-o-20+"px",a.appendChild(e),e.innerHTML=i},close:function(){try{this.div.parentNode.removeChild(this.div)}catch(t){}}}),AmCharts.ValueLegend=AmCharts.Class({construct:function(){this.showAsGradient=!1,this.minValue=0,this.height=12,this.width=200,this.bottom=this.left=10,this.borderColor="#FFFFFF",this.borderAlpha=this.borderThickness=1,this.color="#000000",this.fontSize=11},init:function(t,e){var i=t.areasSettings.color,o=t.areasSettings.colorSolid,s=t.colorSteps;AmCharts.remove(this.set);var a=e.set();this.set=a;var r=0,n=this.minValue,h=this.fontSize,l=t.fontFamily,c=this.color;if(void 0!==n&&((r=AmCharts.text(e,n,c,l,h,"left")).translate(0,h/2-1),a.push(r),r=r.getBBox().height),void 0===(n=this.maxValue)&&(n=t.maxValue),void 0!==n&&((r=AmCharts.text(e,n,c,l,h,"right")).translate(this.width,h/2-1),a.push(r),r=r.getBBox().height),this.showAsGradient)(i=AmCharts.rect(e,this.width,this.height,[i,o],1,this.borderThickness,this.borderColor,1,0,0)).translate(0,r),a.push(i);else for(h=this.width/s,l=0;l<s;l++)c=AmCharts.getColorFade(i,o,l/(s-1)),(c=AmCharts.rect(e,h,this.height,c,1,this.borderThickness,this.borderColor,1)).translate(h*l,r),a.push(c);o=i=0,s=a.getBBox(),r=t.getY(this.bottom,!0),h=t.getY(this.top),l=t.getX(this.right,!0),c=t.getX(this.left),isNaN(h)||(i=h),isNaN(r)||(i=r-s.height),isNaN(c)||(o=c),isNaN(l)||(o=l-s.width),a.translate(o,i)}}),AmCharts.ObjectList=AmCharts.Class({construct:function(t){this.div="object"!=typeof t?document.getElementById(t):t},init:function(t){this.chart=t;var e=document.createElement("div");e.className="ammapObjectList",this.div.appendChild(e),this.addObjects(t.dataProvider,e)},addObjects:function(t,e){var i,o=this.chart,s=document.createElement("ul");if(t.areas)for(i=0;i<t.areas.length;i++){var a=t.areas[i];void 0===a.showInList&&(a.showInList=o.showAreasInList),this.addObject(a,s)}if(t.images)for(i=0;i<t.images.length;i++)void 0===(a=t.images[i]).showInList&&(a.showInList=o.showImagesInList),this.addObject(a,s);if(t.lines)for(i=0;i<t.lines.length;i++)void 0===(a=t.lines[i]).showInList&&(a.showInList=o.showLinesInList),this.addObject(a,s);0<s.childNodes.length&&e.appendChild(s)},addObject:function(t,e){var i=this;if(t.showInList&&void 0!==t.title){var o=document.createElement("li"),s=document.createTextNode(t.title),a=document.createElement("a");a.appendChild(s),o.appendChild(a),e.appendChild(o),this.addObjects(t,o),a.onmouseover=function(){i.chart.rollOverMapObject(t,!1)},a.onmouseout=function(){i.chart.rollOutMapObject(t)},a.onclick=function(){i.chart.clickMapObject(t)}}}});