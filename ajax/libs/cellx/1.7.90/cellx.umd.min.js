!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.cellx=e():t.cellx=e()}(window,function(){return n={},i.m=r=[function(t,h,e){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var u=e(1),c=e(3),r=e(2),f=e(4),n=e(10),i=e(13),o=e(8);h.EventEmitter=o.EventEmitter;var s=e(12);h.FreezableCollection=s.FreezableCollection;var a=e(13);h.ObservableMap=a.ObservableMap;var l=e(10);h.ObservableList=l.ObservableList;var p=e(4);h.Cell=p.Cell;var _=e(9);h.WaitError=_.WaitError;var v=Object.prototype.hasOwnProperty,d=Array.prototype.slice,g=Function("return this;")();function y(t,e,r){var n=e+"Cell";return Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:!0,value:r instanceof f.Cell?r:new f.Cell(r,{context:t})}),Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return this[n].get()},set:function(t){this[n].set(t)}}),t}function m(e,r){return Object.keys(r).forEach(function(t){y(e,t,r[t])}),e}h.map=function(t){return new i.ObservableMap(t)},h.list=function(t,e){return new n.ObservableList(t,e)},h.KEY_CELL_MAP=r.Symbol("cellx.cellMap"),h.cellx=function o(t,s){s=s||{};var a=t,l=function(t){var e=this;e&&e!=g||(e=l),v.call(e,h.KEY_CELL_MAP)||Object.defineProperty(e,h.KEY_CELL_MAP,{value:new u.Map});var r=e[h.KEY_CELL_MAP].get(l);if(!r){if("dispose"===t&&2<=arguments.length)return;r=new f.Cell(a,c.assign({context:e},s)),e[h.KEY_CELL_MAP].set(l,r)}switch(arguments.length){case 0:return r.get();case 1:return r.set(t),t;default:var n=t;switch(n){case"bind":return(l=l.bind(e)).constructor=o,l;case"unwrap":return r;default:var i=f.Cell.prototype[n].apply(r,d.call(arguments,1));return i===r?l:i}}};return l.constructor=o,(s.onChange||s.onError)&&l.call(s.context||g),l},h.defineObservableProperty=y,h.defineObservableProperties=m,h.define=function(t,e,r){return"string"==typeof e?y(t,e,r):m(t,e),t}},function(t,e,r){var n=Function("return this;")(),i=r(2).Symbol,o=Object.prototype.hasOwnProperty,s=i("map-id"),a=0,l=n.Map;if(!l||-1==l.toString().indexOf("[native code]")||!new l([[1,1]]).size){var h={value:void 0};(l=function(t){if(this._entries=Object.create(null),this._objectStamps={},this._first=null,this._last=null,this.size=0,t)for(var e=0,r=t.length;e<r;e++)this.set(t[e][0],t[e][1])}).prototype={constructor:l,has:function(t){return!!this._entries[this._getValueStamp(t)]},get:function(t){return(this._entries[this._getValueStamp(t)]||h).value},set:function(t,e){var r=this._entries,n=this._getValueStamp(t);if(r[n])r[n].value=e;else{var i=r[n]={key:t,keyStamp:n,value:e,prev:this._last,next:null};this.size++?this._last.next=i:this._first=i,this._last=i}return this},delete:function(t){var e=this._getValueStamp(t),r=this._entries[e];if(!r)return!1;if(--this.size){var n=r.prev,i=r.next;n?n.next=i:this._first=i,i?i.prev=n:this._last=n}else this._first=null,this._last=null;return delete this._entries[e],delete this._objectStamps[e],!0},clear:function(){var t=this._entries;for(var e in t)delete t[e];this._objectStamps={},this._first=null,this._last=null,this.size=0},forEach:function(t,e){for(var r=this._first;r;)for(t.call(e,r.value,r.key,this);(r=r.next)&&!this._entries[r.keyStamp];);},toString:function(){return"[object Map]"},_getValueStamp:function(t){switch(typeof t){case"undefined":return"undefined";case"object":if(null===t)return"null";break;case"boolean":return"?"+t;case"number":return"+"+t;case"string":return","+t}return this._getObjectStamp(t)},_getObjectStamp:function(t){if(!o.call(t,s)){if(!Object.isExtensible(t)){var e,r=this._objectStamps;for(e in r)if(o.call(r,e)&&r[e]==t)return e;return r[e=String(++a)]=t,e}Object.defineProperty(t,s,{value:String(++a)})}return t[s]}},[["keys",function(t){return t.key}],["values",function(t){return t.value}],["entries",function(t){return[t.key,t.value]}]].forEach(function(t){var i=t[1];l.prototype[t[0]]=function(){var t,e=this._entries,r=!1,n=this;return{next:function(){if(!r){if(t)for(;(t=t.next)&&!e[t.keyStamp];);else t=n._first;if(t)return{value:i(t),done:!1};r=!0}return{value:void 0,done:!0}}}}})}l.prototype[i.iterator]||(l.prototype[i.iterator]=l.prototype.entries);var u=n.Set;u&&-1!=u.toString().indexOf("[native code]")&&new u([1]).size||((u=function(t){this._values=new l(t?t.map(function(t){return[t,t]}):[]),this.size=0}).prototype={constructor:u,has:function(t){return this._values.has(t)},add:function(t){return this._values.set(t,t),this.size=this._values.size,this},delete:function(t){return!!this._values.delete(t)&&(this.size--,!0)},clear:function(){this._values.clear(),this.size=0},forEach:function(e,r){this._values.forEach(function(t){e.call(r,t,t,this)},this)},keys:l.prototype.keys,values:l.prototype.values,entries:l.prototype.entries}),u.prototype[i.iterator]||(u.prototype[i.iterator]=u.prototype.values),e.Map=l,e.Set=u},function(t,e,r){var n=Function("return this;")().Symbol,i=0;n||((n=function(t){return"__"+t+"_"+Math.floor(1e9*Math.random())+"_"+ ++i+"__"}).iterator=n("Symbol.iterator")),e.Symbol=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t,e){for(var r in e)t[r]=e[r];return t};e.assign=n},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var p,o=r(5),s=r(6),a=r(1),l=r(7),h=r(2),u=r(8),c=r(9),_=Number.MAX_SAFE_INTEGER||9007199254740991,f=h.Symbol("cellx.wrappers"),v=new a.Map,d=_,g=-1,y=!1,m=0,b=null,E={error:null},x=0,w=0,O=1;function j(t){if(y||t){y=!1,m++;for(var e=v.get(d);;){var r=e&&e.shift();if(r){var n=void 0,i=r._level,o=r._changeEvent;if(o)n=d;else{if(d<i||-1==r._levelInRelease){if(!e.length){if(d==g)break;e=v.get(++d)}continue}if(n=d,r.pull(),d<n){e.unshift(r),e=v.get(d);continue}if(i=r._level,d<i){e.length||(e=v.get(++d));continue}o=r._changeEvent}if(r._levelInRelease=-1,o){r._fixedValue=r._value,r._changeEvent=null;for(var s=r._pushingIndex,a=r._reactions,l=0,h=a.length;l<h;l++){var u=a[l];u._level<=i&&(u._level=i+1),s>u._pushingIndex&&(u._pushingIndex=s,u._prevChangeEvent=u._changeEvent,u._changeEvent=null,u._addToRelease())}if(r.handleEvent(o),d==_)break;if(d!=n){e=v.get(d);continue}}if(!e.length){if(d==g)break;e=v.get(++d)}}else{if(d==g)break;e=v.get(++d)}}if(!--m&&(d=_,g=-1,O++,p)){var c=p;p=null;for(l=0,h=c.length;l<h;l++){var f=c[l];"function"==typeof f?f():f[0]._push(f[1],!0,!1)}}}}function C(t,e){t.push(e)}var P,S=(P=u.EventEmitter,i(I,P),Object.defineProperty(I,"currentlyPulling",{get:function(){return!!b},enumerable:!0,configurable:!0}),I.autorun=function(e,r){var n;return new I(function(){var t=this;n=n||function(){t.dispose()},e.call(r,n)},{onChange:function(){}}),n},I.forceRelease=function(){(y||m)&&j(!0)},I.afterRelease=function(t){(p=p||[]).push(t)},I.prototype.on=function(t,e,r){return(y||m)&&j(!0),this._activate(),"object"==typeof t?P.prototype.on.call(this,t,void 0!==e?e:this.context):P.prototype.on.call(this,t,e,void 0!==r?r:this.context),this._state|=4,this},I.prototype.off=function(t,e,r){return(y||m)&&j(!0),t?"object"==typeof t?P.prototype.off.call(this,t,void 0!==e?e:this.context):P.prototype.off.call(this,t,e,void 0!==r?r:this.context):P.prototype.off.call(this),!this._reactions.length&&!this._events.has("change")&&!this._events.has("error")&&4&this._state&&(this._state^=4,this._deactivate(),this._reap&&this._reap.call(this.context)),this},I.prototype.addChangeListener=function(t,e){return this.on("change",t,void 0!==e?e:this.context)},I.prototype.removeChangeListener=function(t,e){return this.off("change",t,void 0!==e?e:this.context)},I.prototype.addErrorListener=function(t,e){return this.on("error",t,void 0!==e?e:this.context)},I.prototype.removeErrorListener=function(t,e){return this.off("error",t,void 0!==e?e:this.context)},I.prototype.subscribe=function(e,t){var r=e[f]||(e[f]=new a.Map);if(r.has(this))return this;function n(t){return e.call(this,t.data.error||null,t)}return r.set(this,n),void 0===t&&(t=this.context),this.on("change",n,t).on("error",n,t)},I.prototype.unsubscribe=function(t,e){var r=t[f],n=r&&r.get(this);return n?(r.delete(this),void 0===e&&(e=this.context),this.off("change",n,e).off("error",n,e)):this},I.prototype._addReaction=function(t){this._activate(),this._reactions.push(t),this._state|=4},I.prototype._deleteReaction=function(t){this._reactions.splice(this._reactions.indexOf(t),1),this._reactions.length||this._events.has("change")||this._events.has("error")||(this._state^=4,this._deactivate(),this._reap&&this._reap.call(this.context))},I.prototype._activate=function(){if(this._pull&&!(2&this._state)){var t=this._dependencies;if(null!==t){if(this._version<O){var e=this._pull$();!t&&!this._dependencies&&1&this._state||(e===E?this._fail(E.error,!1):this._push(e,!1,!1)),t=this._dependencies}if(t){for(var r=t.length;t[--r]._addReaction(this),r;);this._state|=2}}}},I.prototype._deactivate=function(){if(2&this._state){for(var t=this._dependencies,e=t.length;t[--e]._deleteReaction(this),e;);-1!=this._levelInRelease&&(this._levelInRelease=-1,this._changeEvent=null),this._state^=2}},I.prototype._onValueChange=function(t){if(this._pushingIndex=++x,4&this._state){var e=(t.data||(t.data={})).prevEvent=this._changeEvent;this._changeEvent=t,e?this._value===this._fixedValue&&(this._state&=-33):(this._state&=-33,this._addToRelease())}else this._version=++O+ +(0!=m)},I.prototype.get=function(){if(this._pull)if(2&this._state)(y||m&&!b)&&j(!0);else if(this._version<O+ +y+ +(0!=m)){var t=this._dependencies;if(null!==t){var e=this._pull$(),r=this._dependencies;if(t||r||!(1&this._state)){if(r&&4&this._state){for(var n=r.length;r[--n]._addReaction(this),n;);this._state|=2}e===E?this._fail(E.error,!1):this._push(e,!1,!1)}}}if(b){var i=b._dependencies,o=this._level;i?-1==i.indexOf(this)&&(i.push(this),b._level<=o&&(b._level=o+1)):(b._dependencies=[this],b._level=o+1)}if(b&&this._error&&this._error instanceof c.WaitError)throw this._error;return this._get?this._get(this._value):this._value},I.prototype.pull=function(){if(!this._pull)return!1;var t,e,r;if(y&&j(),4&this._state){t=this._dependencies,e=this._level,r=this._pull$();var n=this._dependencies,i=0;if(n){var o=n.length;do{var s=n[--o];t&&-1!=t.indexOf(s)||(s._addReaction(this),i++)}while(o)}if(t&&(n?n.length-i:0)<t.length)for(o=t.length;o;){var a=t[--o];n&&-1!=n.indexOf(a)||a._deleteReaction(this)}if(n?this._state|=2:this._state&=-3,m&&this._level>e)return this._addToRelease(),!1}else r=this._pull$();return r===E?(this._fail(E.error,!1),!0):this._push(r,!1,!0)},I.prototype._pull$=function(){if(8&this._state)throw new TypeError("Circular pulling detected");var t=this._pull;t.length&&(this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!0),this._state|=16);var e=b;(b=this)._dependencies=null,this._level=0,this._state|=8;try{return t.length?t.call(this.context,this,this._value):t.call(this.context)}catch(t){return E.error=t,E}finally{b=e,this._version=O+ +(0!=m);var r=this._pendingStatusCell;r&&2&r._state&&r.pull();var n=this._errorCell;n&&2&n._state&&n.pull(),this._state^=8}},I.prototype.getError=function(){var t=this._errorCell;if(!t){var e=this.debugKey;this._selfErrorCell=new I(this._error,e?{debugKey:e+"._selfErrorCell"}:void 0),t=this._errorCell=new I(function(){this.get();var t,e=this._selfErrorCell.get();if(e&&(t=this._errorIndex)==w)return e;var r=this._dependencies;if(r){var n=r.length;do{var i=r[--n],o=i.getError();if(o){var s=i._errorIndex;if(s==w)return o;(!e||t<s)&&(e=o,t=s)}}while(n)}return e},e?{debugKey:e+"._errorCell",context:this}:{context:this})}return t.get()},I.prototype.isPending=function(){var t=this._pendingStatusCell;if(!t){var e=this.debugKey;this._selfPendingStatusCell=new I(!!(16&this._state),e?{debugKey:e+"._selfPendingStatusCell"}:void 0),t=this._pendingStatusCell=new I(function(){if(this._selfPendingStatusCell.get())return!0;this.get();var t=this._dependencies;if(t){var e=t.length;do{if(t[--e].isPending())return!0}while(e)}return!1},e?{debugKey:e+"._pendingStatusCell",context:this}:{context:this})}return t.get()},I.prototype.set=function(t){return this._validate&&this._validate(t,this._value),this._merge&&(t=this._merge(t,this._value)),this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!0),this._state|=16,3<=this._put.length?this._put.call(this.context,this,t,this._value):this._put.call(this.context,this,t),this},I.prototype.push=function(t){return this._push(t,!0,!1),this},I.prototype._push=function(t,e,r){(e||!m&&r)&&(this._pushingIndex=++x),this._state|=1,this._error&&this._setError(null);var n=this._value;if(o.is(t,n))return(e||m&&r)&&this._resolvePending(),!1;if(this._value=t,n instanceof u.EventEmitter&&n.off("change",this._onValueChange,this),t instanceof u.EventEmitter&&t.on("change",this._onValueChange,this),4&this._state){var i=this._changeEvent||this._prevChangeEvent;i?(o.is(t,this._fixedValue)&&32&this._state?(this._levelInRelease=-1,this._changeEvent=null):this._changeEvent={target:this,type:"change",data:{prevEvent:i,prevValue:n,value:t}},this._prevChangeEvent=null):(this._state|=32,this._changeEvent={target:this,type:"change",data:{prevEvent:null,prevValue:n,value:t}},this._addToRelease())}else(e||!m&&r)&&O++,this._fixedValue=t,this._version=O+ +(0!=m);return(e||m&&r)&&this._resolvePending(),!0},I.prototype._addToRelease=function(){var t,e=this._level;e<=this._levelInRelease||((v.get(e)||(v.set(e,t=[]),t)).push(this),e<d&&(d=e),g<e&&(g=e),this._levelInRelease=e,y||m||(y=!0,l.nextTick(j)))},I.prototype.fail=function(t){return this._fail(t,!0),this},I.prototype._fail=function(t,e){t instanceof c.WaitError||(this.debugKey?s.error("["+this.debugKey+"]",t):s.error(t),t instanceof Error||(t=new Error(String(t)))),this._setError(t),e&&this._resolvePending()},I.prototype.wait=function(){throw new c.WaitError},I.prototype._setError=function(t){this._error=t,this._selfErrorCell&&this._selfErrorCell.set(t),t&&(this._errorIndex=++w,this._handleErrorEvent({target:this,type:"error",data:{error:t}}))},I.prototype._handleErrorEvent=function(t){if(this._lastErrorEvent!==t){this._lastErrorEvent=t,this.handleEvent(t);for(var e=this._reactions,r=e.length;r;)e[--r]._handleErrorEvent(t)}},I.prototype._resolvePending=function(){16&this._state&&(this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!1),this._state^=16)},I.prototype.reap=function(){this.off();for(var t=this._reactions,e=t.length;e;)t[--e].reap();return this},I.prototype.dispose=function(){return this.reap()},I);function I(t,e){var r=P.call(this)||this;return r._error=null,r._pushingIndex=0,r._errorIndex=0,r._version=0,r._dependencies=void 0,r._reactions=[],r._level=0,r._levelInRelease=-1,r._selfPendingStatusCell=null,r._pendingStatusCell=null,r._selfErrorCell=null,r._errorCell=null,r._state=32,r._prevChangeEvent=null,r._changeEvent=null,r._lastErrorEvent=null,r.debugKey=e&&e.debugKey,r.context=e&&e.context||r,r._pull="function"==typeof t?t:null,r._get=e&&e.get||null,r._validate=e&&e.validate||null,r._merge=e&&e.merge||null,r._put=e&&e.put||C,r._reap=e&&e.reap||null,r.meta=e&&e.meta||null,r._pull?r._fixedValue=r._value=void 0:(r._validate&&r._validate(t,void 0),r._merge&&(t=r._merge(t,void 0)),r._fixedValue=r._value=t,t instanceof u.EventEmitter&&t.on("change",r._onValueChange,r)),e&&(e.onChange&&r.on("change",e.onChange),e.onError&&r.on("error",e.onError)),r}e.Cell=S},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};e.is=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Function("return this;")();function n(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=i.console;(n&&n[t]||function(){}).call(n||null,("error"==t?e.map(function(t){return t===Object(t)&&t.stack||t}):e).join(" "))}var o=(s.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handler.apply(this,["log"].concat(t))},s.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handler.apply(this,["warn"].concat(t))},s.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handler.apply(this,["error"].concat(t))},s);function s(t){this.handler=t||n}e.Logger=o,e.logger=new o,e.log=e.logger.log.bind(e.logger),e.warn=e.logger.warn.bind(e.logger),e.error=e.logger.error.bind(e.logger)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=r(6),o=Function("return this;")();if(e.nextTick=n,o.process&&"[object process]"==o.process.toString()&&o.process.nextTick)e.nextTick=n=o.process.nextTick;else if(o.setImmediate)e.nextTick=n=function(t){setImmediate(t)};else if(o.Promise&&-1!=Promise.toString().indexOf("[native code]")){var s=Promise.resolve();e.nextTick=n=function(t){s.then(function(){t()})}}else{var a;o.addEventListener("message",function(){if(a){var t=a;a=null;for(var e=0,r=t.length;e<r;e++)try{t[e]()}catch(t){i.error(t)}}}),e.nextTick=n=function(t){a?a.push(t):(a=[t],postMessage("__tic__","*"))}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),i=r(1),a=!1,o=0,s=new i.Map,l=(Object.defineProperty(h,"currentlySubscribing",{get:function(){return a},set:function(t){a=t},enumerable:!0,configurable:!0}),h.transact=function(t){o++;try{t()}catch(t){n.error(t)}if(!--o){var e=s;s=new i.Map,e.forEach(function(t,e){for(var r in t)e.handleEvent(t[r])})}},h.prototype.getEvents=function(t){var r;return t?(r=this._events.get(t))?Array.isArray(r)?r:[r]:[]:(r=Object.create(null),this._events.forEach(function(t,e){r[e]=Array.isArray(t)?t:[t]}),r)},h.prototype.on=function(t,e,r){if("object"==typeof t){r=void 0!==e?e:this;var n=t;for(t in n)this._on(t,n[t],r)}else this._on(t,e,void 0!==r?r:this);return this},h.prototype.off=function(t,e,r){if(t)if("object"==typeof t){r=void 0!==e?e:this;var n=t;for(t in n)this._off(t,n[t],r)}else this._off(t,e,void 0!==r?r:this);else this._events.clear();return this},h.prototype._on=function(t,e,r){var n=t.indexOf(":");if(-1!=n){var i=t.slice(n+1);a=!0,(this[i+"Cell"]||(this[i],this[i+"Cell"])).on(t.slice(0,n),e,r),a=!1}else{var o=this._events.get(t),s={listener:e,context:r};o?Array.isArray(o)?o.push(s):this._events.set(t,[o,s]):this._events.set(t,s)}},h.prototype._off=function(t,e,r){var n=t.indexOf(":");if(-1!=n){var i=t.slice(n+1);(this[i+"Cell"]||(this[i],this[i+"Cell"])).off(t.slice(0,n),e,r)}else{var o=this._events.get(t);if(!o)return;var s=void 0;if(Array.isArray(o)){if(1!=o.length){for(var a=o.length;a;)if((s=o[--a]).listener==e&&s.context===r){o.splice(a,1);break}return}s=o[0]}else s=o;s.listener==e&&s.context===r&&this._events.delete(t)}},h.prototype.once=function(e,r,n){function i(t){return this._off(e,i,n),r.call(this,t)}return void 0===n&&(n=this),this._on(e,i,n),i},h.prototype.emit=function(t,e){if("string"==typeof t)t={target:this,type:t};else if(t.target){if(t.target!=this)throw new TypeError("Event cannot be emitted on this object")}else t.target=this;if(e&&(t.data=e),o){var r=s.get(this);r||(r=Object.create(null),s.set(this,r)),(t.data||(t.data={})).prev=r[t.type]||null,r[t.type]=t}else this.handleEvent(t);return t},h.prototype.handleEvent=function(t){var e=this._events.get(t.type);if(e)if(Array.isArray(e)){var r=e.length;if(1==r)!1===this._tryEventListener(e[0],t)&&(t.propagationStopped=!0);else{e=e.slice();for(var n=0;n<r;n++)!1===this._tryEventListener(e[n],t)&&(t.propagationStopped=!0)}}else!1===this._tryEventListener(e,t)&&(t.propagationStopped=!0)},h.prototype._tryEventListener=function(t,e){try{return t.listener.call(t.context,e)}catch(t){n.error(t)}},h);function h(){this._events=new i.Map}e.EventEmitter=l},function(t,e,r){"use strict";function n(){}Object.defineProperty(e,"__esModule",{value:!0}),(e.WaitError=n).prototype={__proto__:Error.prototype,constructor:n}},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var a=r(5),o=r(11),s=r(2),l=r(8),h=r(12),u=Array.prototype.splice;function c(t,e){return t<e?-1:e<t?1:0}var f,p=(f=l.EventEmitter,i(_,f),Object.defineProperty(_.prototype,"length",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),_.prototype._validateIndex=function(t,e){if(void 0===t)return t;if(t<0){if((t+=this._items.length)<0)throw new RangeError("Index out of valid range")}else if(t>this._items.length-(e?0:1))throw new RangeError("Index out of valid range");return t},_.prototype.contains=function(t){return-1!=this._items.indexOf(t)},_.prototype.indexOf=function(t,e){return this._items.indexOf(t,this._validateIndex(e,!0))},_.prototype.lastIndexOf=function(t,e){return this._items.lastIndexOf(t,void 0===e?-1:this._validateIndex(e,!0))},_.prototype.get=function(t){return this._items[this._validateIndex(t,!0)]},_.prototype.getRange=function(t,e){if(t=this._validateIndex(t,!0),void 0===e)return this._items.slice(t);if(t+e>this._items.length)throw new RangeError('Sum of "index" and "count" out of valid range');return this._items.slice(t,t+e)},_.prototype.set=function(t,e){if(this._sorted)throw new TypeError("Cannot set to sorted list");return t=this._validateIndex(t,!0),a.is(e,this._items[t])||(this._throwIfFrozen(),this._items[t]=e,this.emit("change")),this},_.prototype.setRange=function(t,e){if(this._sorted)throw new TypeError("Cannot set to sorted list");t=this._validateIndex(t,!0),e instanceof _&&(e=e._items.slice());var r=e.length;if(!r)return this;if(t+r>this._items.length)throw new RangeError('Sum of "index" and "values.length" out of valid range');for(var n=this._items,i=!1,o=t+r;t<o;){var s=e[--o-t];a.is(s,n[o])||(i||this._throwIfFrozen(),n[o]=s,i=!0)}return i&&this.emit("change"),this},_.prototype.add=function(t){return this._throwIfFrozen(),this._sorted?this._insertSortedValue(t):this._items.push(t),this.emit("change"),this},_.prototype.addRange=function(t){if(t instanceof _&&(t=t._items.slice()),t.length){if(this._throwIfFrozen(),this._sorted)for(var e=0,r=t.length;e<r;e++)this._insertSortedValue(t[e]);else this._items.push.apply(this._items,t);this.emit("change")}return this},_.prototype.insert=function(t,e){if(this._sorted)throw new TypeError("Cannot insert to sorted list");return t=this._validateIndex(t,!0),this._throwIfFrozen(),this._items.splice(t,0,e),this.emit("change"),this},_.prototype.insertRange=function(t,e){if(this._sorted)throw new TypeError("Cannot insert to sorted list");return t=this._validateIndex(t,!0),e instanceof _&&(e=e._items),e.length&&(this._throwIfFrozen(),u.apply(this._items,[t,0].concat(e)),this.emit("change")),this},_.prototype.remove=function(t,e){var r=this._items.indexOf(t,this._validateIndex(e,!0));return-1!=r&&(this._throwIfFrozen(),this._items.splice(r,1),this.emit("change"),!0)},_.prototype.removeAll=function(t,e){for(var r=this._validateIndex(e,!0),n=this._items,i=!1;-1!=(r=n.indexOf(t,r));)i||this._throwIfFrozen(),n.splice(r,1),i=!0;return i&&this.emit("change"),i},_.prototype.removeEach=function(t,e){e=this._validateIndex(e,!0),t instanceof _&&(t=t._items.slice());for(var r=this._items,n=!1,i=0,o=t.length;i<o;i++){var s=r.indexOf(t[i],e);-1!=s&&(n||this._throwIfFrozen(),r.splice(s,1),n=!0)}return n&&this.emit("change"),n},_.prototype.removeAllEach=function(t,e){e=this._validateIndex(e,!0),t instanceof _&&(t=t._items.slice());for(var r=this._items,n=!1,i=0,o=t.length;i<o;i++)for(var s=t[i],a=e;-1!=(a=r.indexOf(s,a));)n||this._throwIfFrozen(),r.splice(a,1),n=!0;return n&&this.emit("change"),n},_.prototype.removeAt=function(t){t=this._validateIndex(t),this._throwIfFrozen();var e=this._items.splice(t,1)[0];return this.emit("change"),e},_.prototype.removeRange=function(t,e){if(t=this._validateIndex(t,!0),void 0===e){if(!(e=this._items.length-t))return[]}else{if(!e)return[];if(t+e>this._items.length)throw new RangeError('Sum of "index" and "count" out of valid range')}this._throwIfFrozen();var r=this._items.splice(t,e);return this.emit("change"),r},_.prototype.clear=function(){return this._items.length&&(this._throwIfFrozen(),this._items.length=0,this.emit("change",{subtype:"clear"})),this},_.prototype.join=function(t){return this._items.join(t)},_.prototype.find=function(t,e){for(var r=this._items,n=0,i=r.length;n<i;n++){var o=r[n];if(t.call(e,o,n,this))return o}},_.prototype.findIndex=function(t,e){for(var r=this._items,n=0,i=r.length;n<i;n++)if(t.call(e,r[n],n,this))return n;return-1},_.prototype.clone=function(t){return new this.constructor(t?this._items.map(function(t){return t&&t.clone?t.clone(!0):t}):this,{comparator:this._comparator||void 0,sorted:this._sorted})},_.prototype.toArray=function(){return this._items.slice()},_.prototype.toString=function(){return this._items.join()},_.prototype._insertSortedValue=function(t){for(var e=this._items,r=this._comparator,n=0,i=e.length;n!=i;){var o=n+i>>1;r(t,e[o])<0?i=o:n=1+o}e.splice(n,0,t)},_);function _(t,e){var r=f.call(this)||this;if(r._items=[],h.FreezableCollection.call(r),e&&(e.sorted||e.comparator&&!1!==e.sorted)?(r._comparator=e.comparator||c,r._sorted=!0):(r._comparator=null,r._sorted=!1),t)if(r._sorted){t instanceof _&&(t=t._items.slice());for(var n=0,i=t.length;n<i;n++)r._insertSortedValue(t[n])}else r._items.push.apply(r._items,t instanceof _?t._items:t);return r}e.ObservableList=p,["forEach","map","filter","every","some"].forEach(function(t){p.prototype[t]=function(r,n){return this._items[t](function(t,e){return r.call(n,t,e,this)},this)}}),["reduce","reduceRight"].forEach(function(r){p.prototype[r]=function(n,t){var i=this;function e(t,e,r){return n(t,e,r,i)}return 2<=arguments.length?this._items[r](e,t):this._items[r](e)}}),[["keys",function(t){return t}],["values",function(t,e){return e}],["entries",function(t,e){return[t,e]}]].forEach(function(t){var n=t[1];p.prototype[t[0]]=function(){var t=this._items,e=0,r=!1;return{next:function(){if(!r){if(e<t.length)return{value:n(e,t[e++]),done:!1};r=!0}return{value:void 0,done:!0}}}}}),o.mixin(p.prototype,h.FreezableCollection.prototype,["constructor"]),p.prototype[s.Symbol.iterator]=p.prototype.values},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mixin=function(t,e,r){Array.isArray(e)||(e=[e]);for(var n=0,i=e.length;n<i;n++)for(var o=e[n],s=Object.getOwnPropertyNames(o),a=0,l=s.length;a<l;a++){var h=s[a];r&&-1!=r.indexOf(h)||Object.defineProperty(t,h,Object.getOwnPropertyDescriptor(o,h))}return t}},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=r(8),a=(o=s.EventEmitter,i(l,o),Object.defineProperty(l.prototype,"frozen",{get:function(){return this._frozen},enumerable:!0,configurable:!0}),l.prototype.freeze=function(){return this._frozen=!0,this},l.prototype.unfreeze=function(){return this._frozen=!1,this},l.prototype._throwIfFrozen=function(t){if(this._frozen)throw new TypeError(t||"Frozen collection cannot be mutated")},l);function l(){var t=null!==o&&o.apply(this,arguments)||this;return t._frozen=!1,t}e.FreezableCollection=a},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var s,o=r(5),a=r(1),l=r(11),h=r(2),u=r(8),c=r(12),f=(s=u.EventEmitter,i(p,s),Object.defineProperty(p.prototype,"size",{get:function(){return this._entries.size},enumerable:!0,configurable:!0}),p.prototype.has=function(t){return this._entries.has(t)},p.prototype.get=function(t){return this._entries.get(t)},p.prototype.set=function(t,e){var r,n=this._entries,i=n.has(t);if(i){if(r=n.get(t),o.is(e,r))return this;this._throwIfFrozen()}else this._throwIfFrozen();return n.set(t,e),this.emit("change",{subtype:i?"update":"add",key:t,prevValue:r,value:e}),this},p.prototype.delete=function(t){var e=this._entries;if(e.has(t)){this._throwIfFrozen();var r=e.get(t);return e.delete(t),this.emit("change",{subtype:"delete",key:t,value:r}),!0}return!1},p.prototype.clear=function(){return this._entries.size&&(this._throwIfFrozen(),this._entries.clear(),this.emit("change",{subtype:"clear"})),this},p.prototype.forEach=function(r,n){this._entries.forEach(function(t,e){r.call(n,t,e,this)},this)},p.prototype.keys=function(){return this._entries.keys()},p.prototype.values=function(){return this._entries.values()},p.prototype.entries=function(){return this._entries.entries()},p.prototype.clone=function(t){var r;return t&&(r=[],this._entries.forEach(function(t,e){r.push([e,t&&t.clone?t.clone(!0):t])})),new this.constructor(r||this)},p);function p(t){var e=s.call(this)||this;if(e._entries=new a.Map,c.FreezableCollection.call(e),t){var r=e._entries;if(t instanceof a.Map||t instanceof p)(t instanceof a.Map?t:t._entries).forEach(function(t,e){r.set(e,t)});else if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++)r.set(t[n][0],t[n][1]);else for(var o in t)r.set(o,t[o])}return e}e.ObservableMap=f,l.mixin(f.prototype,c.FreezableCollection.prototype,["constructor"]),f.prototype[h.Symbol.iterator]=f.prototype.entries}],i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0);function i(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var r,n});