!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.cellx=e():t.cellx=e()}(window,function(){return r={},i.m=n=[function(t,h,e){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var u=e(1),n=e(2),c=e(3),r=e(9),i=e(10),s=e(7);h.EventEmitter=s.EventEmitter;var o=e(10);h.ObservableMap=o.ObservableMap;var a=e(9);h.ObservableList=a.ObservableList;var l=e(3);h.Cell=l.Cell;var f=e(8);h.WaitError=f.WaitError;var _=Object.prototype.hasOwnProperty,p=Array.prototype.slice,v=Function("return this;")();function d(t,e,n){var r=e+"Cell";return Object.defineProperty(t,r,{configurable:!0,enumerable:!1,writable:!0,value:n instanceof c.Cell?n:new c.Cell(n,{context:t})}),Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return this[r].get()},set:function(t){this[r].set(t)}}),t}function g(e,n){return Object.keys(n).forEach(function(t){d(e,t,n[t])}),e}h.map=function(t){return new i.ObservableMap(t)},h.list=function(t,e){return new r.ObservableList(t,e)},h.KEY_CELL_MAP=n.Symbol("cellx[cellMap]"),h.cellx=function s(t,o){o=o||{};var a=t,l=function(t){var e=this;e&&e!=v||(e=l),_.call(e,h.KEY_CELL_MAP)||(e[h.KEY_CELL_MAP]=new u.Map);var n=e[h.KEY_CELL_MAP].get(l);if(!n){if("dispose"===t&&2<=arguments.length)return;n=new c.Cell(a,{__proto__:o,context:e}),e[h.KEY_CELL_MAP].set(l,n)}switch(arguments.length){case 0:return n.get();case 1:return n.set(t),t}var r=t;switch(r){case"cell":return n;case"bind":return(l=l.bind(e)).constructor=s,l}var i=c.Cell.prototype[r].apply(n,p.call(arguments,1));return i===n?l:i};return l.constructor=s,(o.onChange||o.onError)&&l.call(o.context||v),l},h.defineObservableProperty=d,h.defineObservableProperties=g,h.define=function(t,e,n){return"string"==typeof e?d(t,e,n):g(t,e),t}},function(t,e,n){var r=Function("return this;")(),i=n(2).Symbol,s=r.Map;if(!s||-1==s.toString().indexOf("[native code]")||!new s([[1,1]]).size){var o=Object.prototype.hasOwnProperty,a=i("mapId"),l=0,h={value:void 0};(s=function(t){if(this._entries=Object.create(null),this._objectStamps={},this._first=null,this._last=null,this.size=0,t)for(var e=0,n=t.length;e<n;e++)this.set(t[e][0],t[e][1])}).prototype={constructor:s,has:function(t){return!!this._entries[this._getValueStamp(t)]},get:function(t){return(this._entries[this._getValueStamp(t)]||h).value},set:function(t,e){var n=this._entries,r=this._getValueStamp(t);if(n[r])n[r].value=e;else{var i=n[r]={key:t,keyStamp:r,value:e,prev:this._last,next:null};this.size++?this._last.next=i:this._first=i,this._last=i}return this},delete:function(t){var e=this._getValueStamp(t),n=this._entries[e];if(!n)return!1;if(--this.size){var r=n.prev,i=n.next;r?r.next=i:this._first=i,i?i.prev=r:this._last=r}else this._first=null,this._last=null;return delete this._entries[e],delete this._objectStamps[e],!0},clear:function(){var t=this._entries;for(var e in t)delete t[e];this._objectStamps={},this._first=null,this._last=null,this.size=0},forEach:function(t,e){for(var n=this._first;n;)for(t.call(e,n.value,n.key,this);(n=n.next)&&!this._entries[n.keyStamp];);},toString:function(){return"[object Map]"},_getValueStamp:function(t){switch(typeof t){case"undefined":return"undefined";case"object":if(null===t)return"null";break;case"boolean":return"?"+t;case"number":return"+"+t;case"string":return","+t}return this._getObjectStamp(t)},_getObjectStamp:function(t){if(!o.call(t,a)){if(!Object.isExtensible(t)){var e,n=this._objectStamps;for(e in n)if(o.call(n,e)&&n[e]==t)return e;return n[e=String(++l)]=t,e}Object.defineProperty(t,a,{value:String(++l)})}return t[a]}},[["keys",function(t){return t.key}],["values",function(t){return t.value}],["entries",function(t){return[t.key,t.value]}]].forEach(function(t){var i=t[1];s.prototype[t[0]]=function(){var t,e=this._entries,n=!1,r=this;return{next:function(){if(!n){if(t)for(;(t=t.next)&&!e[t.keyStamp];);else t=r._first;if(t)return{value:i(t),done:!1};n=!0}return{value:void 0,done:!0}}}}})}s.prototype[i.iterator]||(s.prototype[i.iterator]=s.prototype.entries);var u=r.Set;u&&-1!=u.toString().indexOf("[native code]")&&new u([1]).size||((u=function(t){this._values=new s(t?t.map(function(t){return[t,t]}):[]),this.size=0}).prototype={constructor:u,has:function(t){return this._values.has(t)},add:function(t){return this._values.set(t,t),this.size=this._values.size,this},delete:function(t){return!!this._values.delete(t)&&(this.size--,!0)},clear:function(){this._values.clear(),this.size=0},forEach:function(e,n){this._values.forEach(function(t){e.call(n,t,t,this)},this)},keys:s.prototype.keys,values:s.prototype.values,entries:s.prototype.entries}),u.prototype[i.iterator]||(u.prototype[i.iterator]=u.prototype.values),e.Map=s,e.Set=u},function(t,e,n){var r=Function("return this;")().Symbol;if(!r){var i=0;(r=function(t){return"__"+t+"_"+Math.floor(1e9*Math.random())+"_"+ ++i+"__"}).iterator=r("Symbol.iterator")}e.Symbol=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var _,s=n(4),o=n(5),a=n(1),l=n(6),h=n(2),u=n(7),c=n(8),p=Number.MAX_SAFE_INTEGER||9007199254740991,f=h.Symbol("cellx[wrappers]"),v=new a.Map,d=p,g=-1,y=!1,m=0,b=null,E={error:null},x=0,O=0,w=1;function j(t){if(y||t){y=!1,m++;for(var e=v.get(d);;){var n=e&&e.shift();if(n){var r=void 0,i=n._level,s=n._changeEvent;if(s)r=d;else{if(d<i||-1==n._levelInRelease){if(!e.length){if(d==g)break;e=v.get(++d)}continue}if(r=d,n.pull(),d<r){e.unshift(n),e=v.get(d);continue}if(i=n._level,d<i){e.length||(e=v.get(++d));continue}s=n._changeEvent}if(n._levelInRelease=-1,s){n._fixedValue=n._value,n._changeEvent=null;for(var o=n._pushingIndex,a=n._reactions,l=0,h=a.length;l<h;l++){var u=a[l];u._level<=i&&(u._level=i+1),o>u._pushingIndex&&(u._pushingIndex=o,u._prevChangeEvent=u._changeEvent,u._changeEvent=null,u._addToRelease())}if(n.handleEvent(s),d==p)break;if(d!=r){e=v.get(d);continue}}if(!e.length){if(d==g)break;e=v.get(++d)}}else{if(d==g)break;e=v.get(++d)}}if(!--m&&(d=p,g=-1,w++,_)){var c=_;_=null;for(l=0,h=c.length;l<h;l++){var f=c[l];"function"==typeof f?f():f[0]._push(f[1],!0,!1)}}}}function S(t,e){t.push(e)}var C,P=(C=u.EventEmitter,i(I,C),Object.defineProperty(I,"currentlyPulling",{get:function(){return!!b},enumerable:!0,configurable:!0}),I.autorun=function(e,n){var r;return new I(function(){var t=this;r=r||function(){t.dispose()},e.call(n,r)},{onChange:function(){}}),r},I.forceRelease=function(){(y||m)&&j(!0)},I.afterRelease=function(t){(_=_||[]).push(t)},I.prototype.on=function(t,e,n){return(y||m)&&j(!0),this._activate(),"object"==typeof t?C.prototype.on.call(this,t,void 0!==e?e:this.context):C.prototype.on.call(this,t,e,void 0!==n?n:this.context),this._state|=4,this},I.prototype.off=function(t,e,n){return(y||m)&&j(!0),t?"object"==typeof t?C.prototype.off.call(this,t,void 0!==e?e:this.context):C.prototype.off.call(this,t,e,void 0!==n?n:this.context):C.prototype.off.call(this),!this._reactions.length&&!this._events.has("change")&&!this._events.has("error")&&4&this._state&&(this._state^=4,this._deactivate(),this._reap&&this._reap.call(this.context)),this},I.prototype.addChangeListener=function(t,e){return this.on("change",t,void 0!==e?e:this.context)},I.prototype.removeChangeListener=function(t,e){return this.off("change",t,void 0!==e?e:this.context)},I.prototype.addErrorListener=function(t,e){return this.on("error",t,void 0!==e?e:this.context)},I.prototype.removeErrorListener=function(t,e){return this.off("error",t,void 0!==e?e:this.context)},I.prototype.subscribe=function(e,t){var n=e[f]||(e[f]=new a.Map);if(n.has(this))return this;function r(t){return e.call(this,t.data.error||null,t)}return n.set(this,r),void 0===t&&(t=this.context),this.on("change",r,t).on("error",r,t)},I.prototype.unsubscribe=function(t,e){var n=t[f],r=n&&n.get(this);return r?(n.delete(this),void 0===e&&(e=this.context),this.off("change",r,e).off("error",r,e)):this},I.prototype._addReaction=function(t){this._activate(),this._reactions.push(t),this._state|=4},I.prototype._deleteReaction=function(t){this._reactions.splice(this._reactions.indexOf(t),1),this._reactions.length||this._events.has("change")||this._events.has("error")||(this._state^=4,this._deactivate(),this._reap&&this._reap.call(this.context))},I.prototype._activate=function(){if(this._pull&&!(2&this._state)){var t=this._dependencies;if(null!==t){if(this._version<w){var e=this._pull$();!t&&!this._dependencies&&1&this._state||(e===E?this._fail(E.error,!1,!1):this._push(e,!1,!1)),t=this._dependencies}if(t){for(var n=t.length;t[--n]._addReaction(this),n;);this._state|=2}}}},I.prototype._deactivate=function(){if(2&this._state){for(var t=this._dependencies,e=t.length;t[--e]._deleteReaction(this),e;);-1!=this._levelInRelease&&(this._levelInRelease=-1,this._changeEvent=null),this._state^=2}},I.prototype._onValueChange=function(t){if(this._pushingIndex=++x,4&this._state){var e=(t.data||(t.data={})).prevEvent=this._changeEvent;this._changeEvent=t,e?this._value===this._fixedValue&&(this._state&=-129):(this._state&=-129,this._addToRelease())}else this._version=++w+ +(0!=m)},I.prototype.get=function(){if(this._pull)if(2&this._state)(y||m&&!b)&&j(!0);else if(this._version<w+ +y+ +(0!=m)){var t=this._dependencies;if(null!==t){var e=this._pull$(),n=this._dependencies;if(t||n||!(1&this._state)){if(n&&4&this._state){for(var r=n.length;n[--r]._addReaction(this),r;);this._state|=2}e===E?this._fail(E.error,!1,!1):this._push(e,!1,!1)}}}if(b){var i=b._dependencies,s=this._level;i?-1==i.indexOf(this)&&(i.push(this),b._level<=s&&(b._level=s+1)):(b._dependencies=[this],b._level=s+1)}if(b&&this._error&&this._error instanceof c.WaitError)throw this._error;return this._get?this._get(this._value):this._value},I.prototype.pull=function(){if(!this._pull)return!1;var t,e,n;if(y&&j(),4&this._state){t=this._dependencies,e=this._level,n=this._pull$();var r=this._dependencies,i=0;if(r){var s=r.length;do{var o=r[--s];t&&-1!=t.indexOf(o)||(o._addReaction(this),i++)}while(s)}if(t&&(r?r.length-i:0)<t.length)for(s=t.length;s;){var a=t[--s];r&&-1!=r.indexOf(a)||a._deleteReaction(this)}if(r?this._state|=2:this._state&=-3,m&&this._level>e)return this._addToRelease(),!1}else n=this._pull$();return n===E?(this._fail(E.error,!1,!0),!0):this._push(n,!1,!0)},I.prototype._pull$=function(){if(8&this._state)throw new TypeError("Circular pulling detected");var t=this._pull;t.length&&(this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!0),this._state|=16,this._state&=-97);var e=b;(b=this)._dependencies=null,this._level=0,this._state|=8;try{return t.length?t.call(this.context,this,this._value):t.call(this.context)}catch(t){return E.error=t,E}finally{b=e,this._version=w+ +(0!=m);var n=this._pendingStatusCell;n&&2&n._state&&n.pull();var r=this._errorCell;r&&2&r._state&&r.pull(),this._state^=8}},I.prototype.getError=function(){var t=this._errorCell;if(!t){var e=this.debugKey;this._selfErrorCell=new I(this._error,e?{debugKey:e+"._selfErrorCell"}:void 0),t=this._errorCell=new I(function(){this.get();var t,e=this._selfErrorCell.get();if(e&&(t=this._errorIndex)==O)return e;var n=this._dependencies;if(n){var r=n.length;do{var i=n[--r],s=i.getError();if(s){var o=i._errorIndex;if(o==O)return s;(!e||t<o)&&(e=s,t=o)}}while(r)}return e},e?{debugKey:e+"._errorCell",context:this}:{context:this})}return t.get()},I.prototype.isPending=function(){var t=this._pendingStatusCell;if(!t){var e=this.debugKey;this._selfPendingStatusCell=new I(!!(16&this._state),e?{debugKey:e+"._selfPendingStatusCell"}:void 0),t=this._pendingStatusCell=new I(function(){if(this._selfPendingStatusCell.get())return!0;try{this.get()}catch(t){}var t=this._dependencies;if(t){var e=t.length;do{if(t[--e].isPending())return!0}while(e)}return!1},e?{debugKey:e+"._pendingStatusCell",context:this}:{context:this})}return t.get()},I.prototype.set=function(t){return this._validate&&this._validate(t,this._value),this._merge&&(t=this._merge(t,this._value)),this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!0),this._state|=16,this._state&=-97,3<=this._put.length?this._put.call(this.context,this,t,this._value):this._put.call(this.context,this,t),this},I.prototype.push=function(t){return this._push(t,!0,!1),this},I.prototype._push=function(t,e,n){(e||!m&&n)&&(this._pushingIndex=++x),this._state|=1,this._error&&this._setError(null,!1);var r=this._value;if(s.is(t,r))return(e||m&&n)&&this._fulfill(t),!1;if(this._value=t,r instanceof u.EventEmitter&&r.off("change",this._onValueChange,this),t instanceof u.EventEmitter&&t.on("change",this._onValueChange,this),4&this._state){var i=this._changeEvent||this._prevChangeEvent;i?(s.is(t,this._fixedValue)&&128&this._state?(this._levelInRelease=-1,this._changeEvent=null):this._changeEvent={target:this,type:"change",data:{prevEvent:i,prevValue:r,value:t}},this._prevChangeEvent=null):(this._state|=128,this._changeEvent={target:this,type:"change",data:{prevEvent:null,prevValue:r,value:t}},this._addToRelease())}else(e||!m&&n)&&w++,this._fixedValue=t,this._version=w+ +(0!=m);return(e||m&&n)&&this._fulfill(t),!0},I.prototype._fulfill=function(t){this._resolvePending(),32&this._state||(this._state|=32,this._onFulfilled&&this._onFulfilled(t))},I.prototype.fail=function(t){return this._fail(t,!0,!1),this},I.prototype._fail=function(t,e,n){t instanceof c.WaitError||(this.debugKey?o.error("["+this.debugKey+"]",t):o.error(t),t instanceof Error||(t=new Error(String(t)))),this._setError(t,e||0!=m&&n)},I.prototype._setError=function(t,e){this._error=t,this._selfErrorCell&&this._selfErrorCell.set(t),t&&(this._errorIndex=++O,this._handleErrorEvent({target:this,type:"error",data:{error:t}},e?t:null))},I.prototype._handleErrorEvent=function(t,e){if(this._lastErrorEvent!==t){this._lastErrorEvent=t,this.handleEvent(t),e&&this._reject(e);for(var n=this._reactions,r=n.length;r;)n[--r]._handleErrorEvent(t,e)}},I.prototype._reject=function(t){this._resolvePending(),t instanceof c.WaitError||64&this._state||(this._state|=64,this._onRejected&&this._onRejected(t))},I.prototype.wait=function(){throw new c.WaitError},I.prototype._addToRelease=function(){var t,e=this._level;e<=this._levelInRelease||((v.get(e)||(v.set(e,t=[]),t)).push(this),e<d&&(d=e),g<e&&(g=e),this._levelInRelease=e,y||m||(y=!0,l.nextTick(j)))},I.prototype._resolvePending=function(){16&this._state&&(this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!1),this._state^=16)},I.prototype.then=function(t,e){function r(){}var i=this;if(this.on("change",r),!this._pull||32&this._state)return this.off("change",r),Promise.resolve(this._get?this._get(this._value):this._value).then(t);if(64&this._state)return this.off("change",r),Promise.reject(this._error).catch(e);var s=this;return new Promise(function(e,n){s._onFulfilled=function(t){s._onFulfilled=s._onRejected=null,i.off("change",r),e(s._get?s._get(t):t)},s._onRejected=function(t){s._onFulfilled=s._onRejected=null,i.off("change",r),n(t)}}).then(t,e)},I.prototype.catch=function(t){return this.then(null,t)},I.prototype.reap=function(){this.off();for(var t=this._reactions,e=t.length;e;)t[--e].reap();return this},I.prototype.dispose=function(){return this.reap()},I);function I(t,e){var n=C.call(this)||this;return n._error=null,n._pushingIndex=0,n._errorIndex=0,n._version=0,n._dependencies=void 0,n._reactions=[],n._level=0,n._levelInRelease=-1,n._selfPendingStatusCell=null,n._pendingStatusCell=null,n._selfErrorCell=null,n._errorCell=null,n._state=128,n._prevChangeEvent=null,n._changeEvent=null,n._lastErrorEvent=null,n.debugKey=e&&e.debugKey,n.context=e&&e.context||n,n._pull="function"==typeof t?t:null,n._get=e&&e.get||null,n._validate=e&&e.validate||null,n._merge=e&&e.merge||null,n._put=e&&e.put||S,n._onFulfilled=n._onRejected=null,n._reap=e&&e.reap||null,n.meta=e&&e.meta||null,n._pull?n._fixedValue=n._value=void 0:(n._validate&&n._validate(t,void 0),n._merge&&(t=n._merge(t,void 0)),n._fixedValue=n._value=t,t instanceof u.EventEmitter&&t.on("change",n._onValueChange,n)),e&&(e.onChange&&n.on("change",e.onChange),e.onError&&n.on("error",e.onError)),n}e.Cell=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.is=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];(console[t]||function(){}).apply(console,"error"==t?e.map(function(t){return t&&"object"==typeof t&&t.stack||t}):e)}var i=(s.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handler.apply(this,["log"].concat(t))},s.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handler.apply(this,["warn"].concat(t))},s.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handler.apply(this,["error"].concat(t))},s);function s(t){this.handler=t||r}e.Logger=i,e.logger=i.$instance=new i,e.log=e.logger.log.bind(e.logger),e.warn=e.logger.warn.bind(e.logger),e.error=e.logger.error.bind(e.logger)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(5),s=Function("return this;")();if(e.nextTick=r,s.process&&"[object process]"==s.process.toString()&&s.process.nextTick)e.nextTick=r=s.process.nextTick;else if(s.setImmediate)e.nextTick=r=function(t){setImmediate(t)};else if(s.Promise&&-1!=Promise.toString().indexOf("[native code]")){var o=Promise.resolve();e.nextTick=r=function(t){o.then(function(){t()})}}else{var a;s.addEventListener("message",function(){if(a){var t=a;a=null;for(var e=0,n=t.length;e<n;e++)try{t[e]()}catch(t){i.error(t)}}}),e.nextTick=r=function(t){a?a.push(t):(a=[t],postMessage("__tic__","*"))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(1),a=!1,s=0,o=new i.Map,l=(Object.defineProperty(h,"currentlySubscribing",{get:function(){return a},set:function(t){a=t},enumerable:!0,configurable:!0}),h.transact=function(t){s++;try{t()}catch(t){r.error(t)}if(!--s){var e=o;o=new i.Map,e.forEach(function(t,e){for(var n in t)e.handleEvent(t[n])})}},h.prototype.getEvents=function(t){var n;return t?(n=this._events.get(t))?Array.isArray(n)?n:[n]:[]:(n=Object.create(null),this._events.forEach(function(t,e){n[e]=Array.isArray(t)?t:[t]}),n)},h.prototype.on=function(t,e,n){if("object"==typeof t){n=void 0!==e?e:this;var r=t;for(t in r)this._on(t,r[t],n)}else this._on(t,e,void 0!==n?n:this);return this},h.prototype.off=function(t,e,n){if(t)if("object"==typeof t){n=void 0!==e?e:this;var r=t;for(t in r)this._off(t,r[t],n)}else this._off(t,e,void 0!==n?n:this);else this._events.clear();return this},h.prototype._on=function(t,e,n){var r=t.indexOf(":");if(-1!=r){var i=t.slice(r+1);a=!0,(this[i+"Cell"]||(this[i],this[i+"Cell"])).on(t.slice(0,r),e,n),a=!1}else{var s=this._events.get(t),o={listener:e,context:n};s?Array.isArray(s)?s.push(o):this._events.set(t,[s,o]):this._events.set(t,o)}},h.prototype._off=function(t,e,n){var r=t.indexOf(":");if(-1!=r){var i=t.slice(r+1);(this[i+"Cell"]||(this[i],this[i+"Cell"])).off(t.slice(0,r),e,n)}else{var s=this._events.get(t);if(!s)return;var o=void 0;if(Array.isArray(s)){if(1!=s.length){for(var a=s.length;a;)if((o=s[--a]).listener==e&&o.context===n){s.splice(a,1);break}return}o=s[0]}else o=s;o.listener==e&&o.context===n&&this._events.delete(t)}},h.prototype.once=function(e,n,r){function i(t){return this._off(e,i,r),n.call(this,t)}return void 0===r&&(r=this),this._on(e,i,r),i},h.prototype.emit=function(t,e){if("string"==typeof t)t={target:this,type:t};else if(t.target){if(t.target!=this)throw new TypeError("Event cannot be emitted on this object")}else t.target=this;if(e&&(t.data=e),s){var n=o.get(this);n||(n=Object.create(null),o.set(this,n)),(t.data||(t.data={})).prev=n[t.type]||null,n[t.type]=t}else this.handleEvent(t);return t},h.prototype.handleEvent=function(t){var e=this._events.get(t.type);if(e)if(Array.isArray(e)){var n=e.length;if(1==n)!1===this._tryEventListener(e[0],t)&&(t.propagationStopped=!0);else{e=e.slice();for(var r=0;r<n;r++)!1===this._tryEventListener(e[r],t)&&(t.propagationStopped=!0)}}else!1===this._tryEventListener(e,t)&&(t.propagationStopped=!0)},h.prototype._tryEventListener=function(t,e){try{return t.listener.call(t.context,e)}catch(t){r.error(t)}},h);function h(){this._events=new i.Map}e.EventEmitter=l},function(t,e,n){"use strict";function r(){}Object.defineProperty(e,"__esModule",{value:!0}),(e.WaitError=r).prototype={__proto__:Error.prototype,constructor:r}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(4),s=n(2),o=n(7),l=Array.prototype.splice;function h(t,e){return t<e?-1:e<t?1:0}var u,c=(u=o.EventEmitter,i(f,u),Object.defineProperty(f.prototype,"length",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),f.prototype._validateIndex=function(t,e){if(void 0===t)return t;if(t<0){if((t+=this._items.length)<0)throw new RangeError("Index out of valid range")}else if(t>this._items.length-(e?0:1))throw new RangeError("Index out of valid range");return t},f.prototype.contains=function(t){return-1!=this._items.indexOf(t)},f.prototype.indexOf=function(t,e){return this._items.indexOf(t,this._validateIndex(e,!0))},f.prototype.lastIndexOf=function(t,e){return this._items.lastIndexOf(t,void 0===e?-1:this._validateIndex(e,!0))},f.prototype.get=function(t){return this._items[this._validateIndex(t,!0)]},f.prototype.getRange=function(t,e){if(t=this._validateIndex(t,!0),void 0===e)return this._items.slice(t);if(t+e>this._items.length)throw new RangeError('Sum of "index" and "count" out of valid range');return this._items.slice(t,t+e)},f.prototype.set=function(t,e){if(this._sorted)throw new TypeError("Cannot set to sorted list");return t=this._validateIndex(t,!0),a.is(e,this._items[t])||(this._items[t]=e,this.emit("change")),this},f.prototype.setRange=function(t,e){if(this._sorted)throw new TypeError("Cannot set to sorted list");t=this._validateIndex(t,!0),e instanceof f&&(e=e._items.slice());var n=e.length;if(!n)return this;if(t+n>this._items.length)throw new RangeError('Sum of "index" and "values.length" out of valid range');for(var r=this._items,i=!1,s=t+n;t<s;){var o=e[--s-t];a.is(o,r[s])||(r[s]=o,i=!0)}return i&&this.emit("change"),this},f.prototype.add=function(t){return this._sorted?this._insertSortedValue(t):this._items.push(t),this.emit("change"),this},f.prototype.addRange=function(t){if(t instanceof f&&(t=t._items.slice()),t.length){if(this._sorted)for(var e=0,n=t.length;e<n;e++)this._insertSortedValue(t[e]);else this._items.push.apply(this._items,t);this.emit("change")}return this},f.prototype.insert=function(t,e){if(this._sorted)throw new TypeError("Cannot insert to sorted list");return this._items.splice(this._validateIndex(t,!0),0,e),this.emit("change"),this},f.prototype.insertRange=function(t,e){if(this._sorted)throw new TypeError("Cannot insert to sorted list");return t=this._validateIndex(t,!0),e instanceof f&&(e=e._items),e.length&&(l.apply(this._items,[t,0].concat(e)),this.emit("change")),this},f.prototype.remove=function(t,e){var n=this._items.indexOf(t,this._validateIndex(e,!0));return-1!=n&&(this._items.splice(n,1),this.emit("change"),!0)},f.prototype.removeAll=function(t,e){for(var n=this._validateIndex(e,!0),r=this._items,i=!1;-1!=(n=r.indexOf(t,n));)r.splice(n,1),i=!0;return i&&this.emit("change"),i},f.prototype.removeEach=function(t,e){e=this._validateIndex(e,!0),t instanceof f&&(t=t._items.slice());for(var n=this._items,r=!1,i=0,s=t.length;i<s;i++){var o=n.indexOf(t[i],e);-1!=o&&(n.splice(o,1),r=!0)}return r&&this.emit("change"),r},f.prototype.removeAllEach=function(t,e){e=this._validateIndex(e,!0),t instanceof f&&(t=t._items.slice());for(var n=this._items,r=!1,i=0,s=t.length;i<s;i++)for(var o=t[i],a=e;-1!=(a=n.indexOf(o,a));)n.splice(a,1),r=!0;return r&&this.emit("change"),r},f.prototype.removeAt=function(t){var e=this._items.splice(this._validateIndex(t),1)[0];return this.emit("change"),e},f.prototype.removeRange=function(t,e){if(t=this._validateIndex(t,!0),void 0===e){if(!(e=this._items.length-t))return[]}else{if(!e)return[];if(t+e>this._items.length)throw new RangeError('Sum of "index" and "count" out of valid range')}var n=this._items.splice(t,e);return this.emit("change"),n},f.prototype.clear=function(){return this._items.length&&(this._items.length=0,this.emit("change",{subtype:"clear"})),this},f.prototype.join=function(t){return this._items.join(t)},f.prototype.find=function(t,e){for(var n=this._items,r=0,i=n.length;r<i;r++){var s=n[r];if(t.call(e,s,r,this))return s}},f.prototype.findIndex=function(t,e){for(var n=this._items,r=0,i=n.length;r<i;r++)if(t.call(e,n[r],r,this))return r;return-1},f.prototype.clone=function(t){return new this.constructor(t?this._items.map(function(t){return t&&t.clone?t.clone(!0):t}):this,{comparator:this._comparator||void 0,sorted:this._sorted})},f.prototype.toArray=function(){return this._items.slice()},f.prototype.toString=function(){return this._items.join()},f.prototype._insertSortedValue=function(t){for(var e=this._items,n=this._comparator,r=0,i=e.length;r!=i;){var s=r+i>>1;n(t,e[s])<0?i=s:r=1+s}e.splice(r,0,t)},f);function f(t,e){var n=u.call(this)||this;if(n._items=[],e&&(e.sorted||e.comparator&&!1!==e.sorted)?(n._comparator=e.comparator||h,n._sorted=!0):(n._comparator=null,n._sorted=!1),t)if(n._sorted){t instanceof f&&(t=t._items.slice());for(var r=0,i=t.length;r<i;r++)n._insertSortedValue(t[r])}else n._items.push.apply(n._items,t instanceof f?t._items:t);return n}e.ObservableList=c,["forEach","map","filter","every","some"].forEach(function(t){c.prototype[t]=function(n,r){return this._items[t](function(t,e){return n.call(r,t,e,this)},this)}}),["reduce","reduceRight"].forEach(function(n){c.prototype[n]=function(r,t){var i=this;function e(t,e,n){return r(t,e,n,i)}return 2<=arguments.length?this._items[n](e,t):this._items[n](e)}}),[["keys",function(t){return t}],["values",function(t,e){return e}],["entries",function(t,e){return[t,e]}]].forEach(function(t){var r=t[1];c.prototype[t[0]]=function(){var t=this._items,e=0,n=!1;return{next:function(){if(!n){if(e<t.length)return{value:r(e,t[e++]),done:!1};n=!0}return{value:void 0,done:!0}}}}}),c.prototype[s.Symbol.iterator]=c.prototype.values},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(4),a=n(1),l=n(2),h=n(7),u=(o=h.EventEmitter,i(c,o),Object.defineProperty(c.prototype,"size",{get:function(){return this._entries.size},enumerable:!0,configurable:!0}),c.prototype.has=function(t){return this._entries.has(t)},c.prototype.get=function(t){return this._entries.get(t)},c.prototype.set=function(t,e){var n,r=this._entries,i=r.has(t);return i&&(n=r.get(t),s.is(e,n))||(r.set(t,e),this.emit("change",{subtype:i?"update":"add",key:t,prevValue:n,value:e})),this},c.prototype.delete=function(t){var e=this._entries;if(e.has(t)){var n=e.get(t);return e.delete(t),this.emit("change",{subtype:"delete",key:t,value:n}),!0}return!1},c.prototype.clear=function(){return this._entries.size&&(this._entries.clear(),this.emit("change",{subtype:"clear"})),this},c.prototype.forEach=function(n,r){this._entries.forEach(function(t,e){n.call(r,t,e,this)},this)},c.prototype.keys=function(){return this._entries.keys()},c.prototype.values=function(){return this._entries.values()},c.prototype.entries=function(){return this._entries.entries()},c.prototype.clone=function(t){var n;return t&&(n=[],this._entries.forEach(function(t,e){n.push([e,t&&t.clone?t.clone(!0):t])})),new this.constructor(n||this)},c);function c(t){var e=o.call(this)||this;if(e._entries=new a.Map,t){var n=e._entries;if(t instanceof a.Map||t instanceof c)(t instanceof a.Map?t:t._entries).forEach(function(t,e){n.set(e,t)});else if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)n.set(t[r][0],t[r][1]);else for(var s in t)n.set(s,t[s])}return e}(e.ObservableMap=u).prototype[l.Symbol.iterator]=u.prototype.entries}],i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0);function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var n,r});