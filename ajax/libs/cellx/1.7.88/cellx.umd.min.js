!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.cellx=e():t.cellx=e()}(window,function(){return i={},n.m=r=[function(t,h,e){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var u=e(1),c=e(3),r=e(2),f=e(4),n=e(10),i=e(14),o=e(8);h.EventEmitter=o.EventEmitter;var s=e(12);h.FreezableCollection=s.FreezableCollection;var a=e(13);h.ObservableCollection=a.ObservableCollection;var l=e(14);h.ObservableMap=l.ObservableMap;var p=e(10);h.ObservableList=p.ObservableList;var _=e(4);h.Cell=_.Cell;var v=e(9);h.WaitError=v.WaitError;var d=Object.prototype.hasOwnProperty,g=Array.prototype.slice,y=Function("return this;")();function b(t,e,r){var n=e+"Cell";return Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:!0,value:r instanceof f.Cell?r:new f.Cell(r,{context:t})}),Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return this[n].get()},set:function(t){this[n].set(t)}}),t}function m(e,r){return Object.keys(r).forEach(function(t){b(e,t,r[t])}),e}h.map=function(t,e){return new i.ObservableMap(t,e)},h.list=function(t,e){return new n.ObservableList(t,e)},h.KEY_CELL_MAP=r.Symbol("cellx.cellMap"),h.cellx=function o(t,s){s=s||{};var a=t,l=function(t){var e=this;e&&e!=y||(e=l),d.call(e,h.KEY_CELL_MAP)||Object.defineProperty(e,h.KEY_CELL_MAP,{value:new u.Map});var r=e[h.KEY_CELL_MAP].get(l);if(!r){if("dispose"===t&&2<=arguments.length)return;r=new f.Cell(a,c.assign({context:e},s)),e[h.KEY_CELL_MAP].set(l,r)}switch(arguments.length){case 0:return r.get();case 1:return r.set(t),t;default:var n=t;switch(n){case"bind":return(l=l.bind(e)).constructor=o,l;case"unwrap":return r;default:var i=f.Cell.prototype[n].apply(r,g.call(arguments,1));return i===r?l:i}}};return l.constructor=o,(s.onChange||s.onError)&&l.call(s.context||y),l},h.defineObservableProperty=b,h.defineObservableProperties=m,h.define=function(t,e,r){return"string"==typeof e?b(t,e,r):m(t,e),t}},function(t,e,r){var n=Function("return this;")(),i=r(2).Symbol,o=Object.prototype.hasOwnProperty,s=i("map-id"),a=0,l=n.Map;if(!l||-1==l.toString().indexOf("[native code]")||!new l([[1,1]]).size){var h={value:void 0};(l=function(t){if(this._entries=Object.create(null),this._objectStamps={},this._first=null,this._last=null,this.size=0,t)for(var e=0,r=t.length;e<r;e++)this.set(t[e][0],t[e][1])}).prototype={constructor:l,has:function(t){return!!this._entries[this._getValueStamp(t)]},get:function(t){return(this._entries[this._getValueStamp(t)]||h).value},set:function(t,e){var r=this._entries,n=this._getValueStamp(t);if(r[n])r[n].value=e;else{var i=r[n]={key:t,keyStamp:n,value:e,prev:this._last,next:null};this.size++?this._last.next=i:this._first=i,this._last=i}return this},delete:function(t){var e=this._getValueStamp(t),r=this._entries[e];if(!r)return!1;if(--this.size){var n=r.prev,i=r.next;n?n.next=i:this._first=i,i?i.prev=n:this._last=n}else this._first=null,this._last=null;return delete this._entries[e],delete this._objectStamps[e],!0},clear:function(){var t=this._entries;for(var e in t)delete t[e];this._objectStamps={},this._first=null,this._last=null,this.size=0},forEach:function(t,e){for(var r=this._first;r;)for(t.call(e,r.value,r.key,this);(r=r.next)&&!this._entries[r.keyStamp];);},toString:function(){return"[object Map]"},_getValueStamp:function(t){switch(typeof t){case"undefined":return"undefined";case"object":if(null===t)return"null";break;case"boolean":return"?"+t;case"number":return"+"+t;case"string":return","+t}return this._getObjectStamp(t)},_getObjectStamp:function(t){if(!o.call(t,s)){if(!Object.isExtensible(t)){var e,r=this._objectStamps;for(e in r)if(o.call(r,e)&&r[e]==t)return e;return r[e=String(++a)]=t,e}Object.defineProperty(t,s,{value:String(++a)})}return t[s]}},[["keys",function(t){return t.key}],["values",function(t){return t.value}],["entries",function(t){return[t.key,t.value]}]].forEach(function(t){var i=t[1];l.prototype[t[0]]=function(){var t,e=this._entries,r=!1,n=this;return{next:function(){if(!r){if(t)for(;(t=t.next)&&!e[t.keyStamp];);else t=n._first;if(t)return{value:i(t),done:!1};r=!0}return{value:void 0,done:!0}}}}})}l.prototype[i.iterator]||(l.prototype[i.iterator]=l.prototype.entries);var u=n.Set;u&&-1!=u.toString().indexOf("[native code]")&&new u([1]).size||((u=function(t){this._values=new l(t?t.map(function(t){return[t,t]}):[]),this.size=0}).prototype={constructor:u,has:function(t){return this._values.has(t)},add:function(t){return this._values.set(t,t),this.size=this._values.size,this},delete:function(t){return!!this._values.delete(t)&&(this.size--,!0)},clear:function(){this._values.clear(),this.size=0},forEach:function(e,r){this._values.forEach(function(t){e.call(r,t,t,this)},this)},keys:l.prototype.keys,values:l.prototype.values,entries:l.prototype.entries}),u.prototype[i.iterator]||(u.prototype[i.iterator]=u.prototype.values),e.Map=l,e.Set=u},function(t,e,r){var n=Function("return this;")().Symbol,i=0;n||((n=function(t){return"__"+t+"_"+Math.floor(1e9*Math.random())+"_"+ ++i+"__"}).iterator=n("Symbol.iterator")),e.Symbol=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t,e){for(var r in e)t[r]=e[r];return t};e.assign=n},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var p,o=r(5),s=r(6),a=r(1),l=r(7),h=r(2),u=r(8),c=r(9),_=Number.MAX_SAFE_INTEGER||9007199254740991,f=h.Symbol("cellx.wrappers"),v=new a.Map,d=_,g=-1,y=!1,b=0,m=null,E={error:null},x=0,C=0,O=1;function w(t){if(y||t){y=!1,b++;for(var e=v.get(d);;){var r=e&&e.shift();if(r){var n=void 0,i=r._level,o=r._changeEvent;if(o)n=d;else{if(d<i||-1==r._levelInRelease){if(!e.length){if(d==g)break;e=v.get(++d)}continue}if(n=d,r.pull(),d<n){e.unshift(r),e=v.get(d);continue}if(i=r._level,d<i){e.length||(e=v.get(++d));continue}o=r._changeEvent}if(r._levelInRelease=-1,o){r._fixedValue=r._value,r._changeEvent=null;for(var s=r._pushingIndex,a=r._reactions,l=0,h=a.length;l<h;l++){var u=a[l];u._level<=i&&(u._level=i+1),s>u._pushingIndex&&(u._pushingIndex=s,u._prevChangeEvent=u._changeEvent,u._changeEvent=null,u._addToRelease())}if(r.handleEvent(o),d==_)break;if(d!=n){e=v.get(d);continue}}if(!e.length){if(d==g)break;e=v.get(++d)}}else{if(d==g)break;e=v.get(++d)}}if(!--b&&(d=_,g=-1,O++,p)){var c=p;p=null;for(l=0,h=c.length;l<h;l++){var f=c[l];"function"==typeof f?f():f[0]._push(f[1],!0,!1)}}}}function j(t,e){t.push(e)}var P,I=(P=u.EventEmitter,i(V,P),Object.defineProperty(V,"currentlyPulling",{get:function(){return!!m},enumerable:!0,configurable:!0}),V.autorun=function(e,r){var n;return new V(function(){var t=this;n=n||function(){t.dispose()},e.call(r,n)},{onChange:function(){}}),n},V.forceRelease=function(){(y||b)&&w(!0)},V.afterRelease=function(t){(p=p||[]).push(t)},V.prototype.on=function(t,e,r){return(y||b)&&w(!0),this._activate(),"object"==typeof t?P.prototype.on.call(this,t,void 0!==e?e:this.context):P.prototype.on.call(this,t,e,void 0!==r?r:this.context),this._state|=4,this},V.prototype.off=function(t,e,r){return(y||b)&&w(!0),t?"object"==typeof t?P.prototype.off.call(this,t,void 0!==e?e:this.context):P.prototype.off.call(this,t,e,void 0!==r?r:this.context):P.prototype.off.call(this),!this._reactions.length&&!this._events.has("change")&&!this._events.has("error")&&4&this._state&&(this._state^=4,this._deactivate(),this._reap&&this._reap.call(this.context)),this},V.prototype.addChangeListener=function(t,e){return this.on("change",t,void 0!==e?e:this.context)},V.prototype.removeChangeListener=function(t,e){return this.off("change",t,void 0!==e?e:this.context)},V.prototype.addErrorListener=function(t,e){return this.on("error",t,void 0!==e?e:this.context)},V.prototype.removeErrorListener=function(t,e){return this.off("error",t,void 0!==e?e:this.context)},V.prototype.subscribe=function(e,t){var r=e[f]||(e[f]=new a.Map);if(r.has(this))return this;function n(t){return e.call(this,t.data.error||null,t)}return r.set(this,n),void 0===t&&(t=this.context),this.on("change",n,t).on("error",n,t)},V.prototype.unsubscribe=function(t,e){var r=t[f],n=r&&r.get(this);return n?(r.delete(this),void 0===e&&(e=this.context),this.off("change",n,e).off("error",n,e)):this},V.prototype._addReaction=function(t){this._activate(),this._reactions.push(t),this._state|=4},V.prototype._deleteReaction=function(t){this._reactions.splice(this._reactions.indexOf(t),1),this._reactions.length||this._events.has("change")||this._events.has("error")||(this._state^=4,this._deactivate(),this._reap&&this._reap.call(this.context))},V.prototype._activate=function(){if(this._pull&&!(2&this._state)){var t=this._dependencies;if(null!==t){if(this._version<O){var e=this._$pull();!t&&!this._dependencies&&1&this._state||(e===E?this._fail(E.error,!1):this._push(e,!1,!1)),t=this._dependencies}if(t){for(var r=t.length;t[--r]._addReaction(this),r;);this._state|=2}}}},V.prototype._deactivate=function(){if(2&this._state){for(var t=this._dependencies,e=t.length;t[--e]._deleteReaction(this),e;);-1!=this._levelInRelease&&(this._levelInRelease=-1,this._changeEvent=null),this._state^=2}},V.prototype._onValueChange=function(t){if(this._pushingIndex=++x,4&this._state){var e=(t.data||(t.data={})).prevEvent=this._changeEvent;this._changeEvent=t,e?this._value===this._fixedValue&&(this._state&=-33):(this._state&=-33,this._addToRelease())}else this._version=++O+ +(0!=b)},V.prototype.get=function(){if(this._pull)if(2&this._state)(y||b&&!m)&&w(!0);else if(this._version<O+ +y+ +(0!=b)){var t=this._dependencies;if(null!==t){var e=this._$pull(),r=this._dependencies;if(t||r||!(1&this._state)){if(r&&4&this._state){for(var n=r.length;r[--n]._addReaction(this),n;);this._state|=2}e===E?this._fail(E.error,!1):this._push(e,!1,!1)}}}if(m){var i=m._dependencies,o=this._level;i?-1==i.indexOf(this)&&(i.push(this),m._level<=o&&(m._level=o+1)):(m._dependencies=[this],m._level=o+1)}if(m&&this._error&&this._error instanceof c.WaitError)throw this._error;return this._get?this._get(this._value):this._value},V.prototype.pull=function(){if(!this._pull)return!1;var t,e,r;if(y&&w(),4&this._state){t=this._dependencies,e=this._level,r=this._$pull();var n=this._dependencies,i=0;if(n){var o=n.length;do{var s=n[--o];t&&-1!=t.indexOf(s)||(s._addReaction(this),i++)}while(o)}if(t&&(n?n.length-i:0)<t.length)for(o=t.length;o;){var a=t[--o];n&&-1!=n.indexOf(a)||a._deleteReaction(this)}if(n?this._state|=2:this._state&=-3,b&&this._level>e)return this._addToRelease(),!1}else r=this._$pull();return r===E?(this._fail(E.error,!1),!0):this._push(r,!1,!0)},V.prototype._$pull=function(){if(8&this._state)throw new TypeError("Circular pulling detected");var t=this._pull;t.length&&(this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!0),this._state|=16);var e=m;(m=this)._dependencies=null,this._level=0,this._state|=8;try{return t.length?t.call(this.context,this,this._value):t.call(this.context)}catch(t){return E.error=t,E}finally{m=e,this._version=O+ +(0!=b);var r=this._pendingStatusCell;r&&2&r._state&&r.pull();var n=this._errorCell;n&&2&n._state&&n.pull(),this._state^=8}},V.prototype.getError=function(){var t=this._errorCell;if(!t){var e=this.debugKey;this._selfErrorCell=new V(this._error,e?{debugKey:e+"._selfErrorCell"}:void 0),t=this._errorCell=new V(function(){this.get();var t,e=this._selfErrorCell.get();if(e&&(t=this._errorIndex)==C)return e;var r=this._dependencies;if(r){var n=r.length;do{var i=r[--n],o=i.getError();if(o){var s=i._errorIndex;if(s==C)return o;(!e||t<s)&&(e=o,t=s)}}while(n)}return e},e?{debugKey:e+"._errorCell",context:this}:{context:this})}return t.get()},V.prototype.isPending=function(){var t=this._pendingStatusCell;if(!t){var e=this.debugKey;this._selfPendingStatusCell=new V(!!(16&this._state),e?{debugKey:e+"._selfPendingStatusCell"}:void 0),t=this._pendingStatusCell=new V(function(){if(this._selfPendingStatusCell.get())return!0;this.get();var t=this._dependencies;if(t){var e=t.length;do{if(t[--e].isPending())return!0}while(e)}return!1},e?{debugKey:e+"._pendingStatusCell",context:this}:{context:this})}return t.get()},V.prototype.set=function(t){return this._validate&&this._validate(t,this._value),this._merge&&(t=this._merge(t,this._value)),this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!0),this._state|=16,3<=this._put.length?this._put.call(this.context,this,t,this._value):this._put.call(this.context,this,t),this},V.prototype.push=function(t){return this._push(t,!0,!1),this},V.prototype._push=function(t,e,r){(e||!b&&r)&&(this._pushingIndex=++x),this._state|=1,this._error&&this._setError(null);var n=this._value;if(o.is(t,n))return(e||b&&r)&&this._resolvePending(),!1;if(this._value=t,n instanceof u.EventEmitter&&n.off("change",this._onValueChange,this),t instanceof u.EventEmitter&&t.on("change",this._onValueChange,this),4&this._state){var i=this._changeEvent||this._prevChangeEvent;i?(o.is(t,this._fixedValue)&&32&this._state?(this._levelInRelease=-1,this._changeEvent=null):this._changeEvent={target:this,type:"change",data:{prevEvent:i,prevValue:n,value:t}},this._prevChangeEvent=null):(this._state|=32,this._changeEvent={target:this,type:"change",data:{prevEvent:null,prevValue:n,value:t}},this._addToRelease())}else(e||!b&&r)&&O++,this._fixedValue=t,this._version=O+ +(0!=b);return(e||b&&r)&&this._resolvePending(),!0},V.prototype._addToRelease=function(){var t,e=this._level;e<=this._levelInRelease||((v.get(e)||(v.set(e,t=[]),t)).push(this),e<d&&(d=e),g<e&&(g=e),this._levelInRelease=e,y||b||(y=!0,l.nextTick(w)))},V.prototype.fail=function(t){return this._fail(t,!0),this},V.prototype._fail=function(t,e){t instanceof c.WaitError||(this.debugKey?s.error("["+this.debugKey+"]",t):s.error(t),t instanceof Error||(t=new Error(String(t)))),this._setError(t),e&&this._resolvePending()},V.prototype.wait=function(){throw new c.WaitError},V.prototype._setError=function(t){this._error=t,this._selfErrorCell&&this._selfErrorCell.set(t),t&&(this._errorIndex=++C,this._handleErrorEvent({target:this,type:"error",data:{error:t}}))},V.prototype._handleErrorEvent=function(t){if(this._lastErrorEvent!==t){this._lastErrorEvent=t,this.handleEvent(t);for(var e=this._reactions,r=e.length;r;)e[--r]._handleErrorEvent(t)}},V.prototype._resolvePending=function(){16&this._state&&(this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!1),this._state^=16)},V.prototype.reap=function(){this.off();for(var t=this._reactions,e=t.length;e;)t[--e].reap();return this},V.prototype.dispose=function(){return this.reap()},V);function V(t,e){var r=P.call(this)||this;return r._error=null,r._pushingIndex=0,r._errorIndex=0,r._version=0,r._dependencies=void 0,r._reactions=[],r._level=0,r._levelInRelease=-1,r._selfPendingStatusCell=null,r._pendingStatusCell=null,r._selfErrorCell=null,r._errorCell=null,r._state=32,r._prevChangeEvent=null,r._changeEvent=null,r._lastErrorEvent=null,r.debugKey=e&&e.debugKey,r.context=e&&e.context||r,r._pull="function"==typeof t?t:null,r._get=e&&e.get||null,r._validate=e&&e.validate||null,r._merge=e&&e.merge||null,r._put=e&&e.put||j,r._reap=e&&e.reap||null,r._pull?r._fixedValue=r._value=void 0:(r._validate&&r._validate(t,void 0),r._merge&&(t=r._merge(t,void 0)),r._fixedValue=r._value=t,t instanceof u.EventEmitter&&t.on("change",r._onValueChange,r)),e&&(e.onChange&&r.on("change",e.onChange),e.onError&&r.on("error",e.onError)),r}e.Cell=I},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};e.is=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Function("return this;")();function n(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=i.console;(n&&n[t]||function(){}).call(n||null,("error"==t?e.map(function(t){return t===Object(t)&&t.stack||t}):e).join(" "))}var o=(s.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handler.apply(this,["log"].concat(t))},s.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handler.apply(this,["warn"].concat(t))},s.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handler.apply(this,["error"].concat(t))},s);function s(t){this.handler=t||n}e.Logger=o,e.logger=new o,e.log=e.logger.log.bind(e.logger),e.warn=e.logger.warn.bind(e.logger),e.error=e.logger.error.bind(e.logger)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=r(6),o=Function("return this;")();if(e.nextTick=n,o.process&&"[object process]"==o.process.toString()&&o.process.nextTick)e.nextTick=n=o.process.nextTick;else if(o.setImmediate)e.nextTick=n=function(t){setImmediate(t)};else if(o.Promise&&-1!=Promise.toString().indexOf("[native code]")){var s=Promise.resolve();e.nextTick=n=function(t){s.then(function(){t()})}}else{var a;o.addEventListener("message",function(){if(a){var t=a;a=null;for(var e=0,r=t.length;e<r;e++)try{t[e]()}catch(t){i.error(t)}}}),e.nextTick=n=function(t){a?a.push(t):(a=[t],postMessage("__tic__","*"))}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),i=r(1),a=!1,o=0,s=new i.Map,l=(Object.defineProperty(h,"currentlySubscribing",{get:function(){return a},set:function(t){a=t},enumerable:!0,configurable:!0}),h.transact=function(t){o++;try{t()}catch(t){n.error(t)}if(!--o){var e=s;s=new i.Map,e.forEach(function(t,e){for(var r in t)e.handleEvent(t[r])})}},h.prototype.getEvents=function(t){var r;return t?(r=this._events.get(t))?Array.isArray(r)?r:[r]:[]:(r=Object.create(null),this._events.forEach(function(t,e){r[e]=Array.isArray(t)?t:[t]}),r)},h.prototype.on=function(t,e,r){if("object"==typeof t){r=void 0!==e?e:this;var n=t;for(t in n)this._on(t,n[t],r)}else this._on(t,e,void 0!==r?r:this);return this},h.prototype.off=function(t,e,r){if(t)if("object"==typeof t){r=void 0!==e?e:this;var n=t;for(t in n)this._off(t,n[t],r)}else this._off(t,e,void 0!==r?r:this);else this._events.clear();return this},h.prototype._on=function(t,e,r){var n=t.indexOf(":");if(-1!=n){var i=t.slice(n+1);a=!0,(this[i+"Cell"]||(this[i],this[i+"Cell"])).on(t.slice(0,n),e,r),a=!1}else{var o=this._events.get(t),s={listener:e,context:r};o?Array.isArray(o)?o.push(s):this._events.set(t,[o,s]):this._events.set(t,s)}},h.prototype._off=function(t,e,r){var n=t.indexOf(":");if(-1!=n){var i=t.slice(n+1);(this[i+"Cell"]||(this[i],this[i+"Cell"])).off(t.slice(0,n),e,r)}else{var o=this._events.get(t);if(!o)return;var s=void 0;if(Array.isArray(o)){if(1!=o.length){for(var a=o.length;a;)if((s=o[--a]).listener==e&&s.context===r){o.splice(a,1);break}return}s=o[0]}else s=o;s.listener==e&&s.context===r&&this._events.delete(t)}},h.prototype.once=function(e,r,n){function i(t){return this._off(e,i,n),r.call(this,t)}return void 0===n&&(n=this),this._on(e,i,n),i},h.prototype.emit=function(t,e){if("string"==typeof t)t={target:this,type:t};else if(t.target){if(t.target!=this)throw new TypeError("Event cannot be emitted on this object")}else t.target=this;if(e&&(t.data=e),o){var r=s.get(this);r||(r=Object.create(null),s.set(this,r)),(t.data||(t.data={})).prev=r[t.type]||null,r[t.type]=t}else this.handleEvent(t);return t},h.prototype.handleEvent=function(t){var e=this._events.get(t.type);if(e)if(Array.isArray(e)){var r=e.length;if(1==r)!1===this._tryEventListener(e[0],t)&&(t.propagationStopped=!0);else{e=e.slice();for(var n=0;n<r;n++)!1===this._tryEventListener(e[n],t)&&(t.propagationStopped=!0)}}else!1===this._tryEventListener(e,t)&&(t.propagationStopped=!0)},h.prototype._tryEventListener=function(t,e){try{return t.listener.call(t.context,e)}catch(t){n.error(t)}},h);function h(){this._events=new i.Map}e.EventEmitter=l},function(t,e,r){"use strict";function n(){}Object.defineProperty(e,"__esModule",{value:!0}),(e.WaitError=n).prototype={__proto__:Error.prototype,constructor:n}},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var a=r(5),o=r(11),s=r(2),l=r(8),h=r(12),u=r(13),c=Array.prototype.splice;function f(t,e){return t<e?-1:e<t?1:0}var p,_=(p=l.EventEmitter,i(v,p),Object.defineProperty(v.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),v.prototype._validateIndex=function(t,e){if(void 0===t)return t;if(t<0){if((t+=this._length)<0)throw new RangeError("Index out of valid range")}else if(t>this._length-(e?0:1))throw new RangeError("Index out of valid range");return t},v.prototype.contains=function(t){return this._valueCounts.has(t)},v.prototype.indexOf=function(t,e){return this._items.indexOf(t,this._validateIndex(e,!0))},v.prototype.lastIndexOf=function(t,e){return this._items.lastIndexOf(t,void 0===e?-1:this._validateIndex(e,!0))},v.prototype.get=function(t){return this._items[this._validateIndex(t,!0)]},v.prototype.getRange=function(t,e){t=this._validateIndex(t,!0);var r=this._items;if(void 0===e)return r.slice(t);if(t+e>r.length)throw new RangeError('Sum of "index" and "count" out of valid range');return r.slice(t,t+e)},v.prototype.set=function(t,e){if(this._sorted)throw new TypeError("Cannot set to sorted list");t=this._validateIndex(t,!0);var r=this._items;return a.is(e,r[t])||(this._throwIfFrozen(),this._unregisterValue(r[t]),r[t]=this._registerValue(e),this.emit("change")),this},v.prototype.setRange=function(t,e){if(this._sorted)throw new TypeError("Cannot set to sorted list");t=this._validateIndex(t,!0);var r=e.length;if(!r)return this;if(t+r>this._length)throw new RangeError('Sum of "index" and "values.length" out of valid range');e instanceof v&&(e=e._items.slice());for(var n=this._items,i=!1,o=t+r;t<o;){var s=e[--o-t];a.is(s,n[o])||(i||this._throwIfFrozen(),this._unregisterValue(n[o]),n[o]=this._registerValue(s),i=!0)}return i&&this.emit("change"),this},v.prototype.add=function(t){return this._throwIfFrozen(),this._sorted?this._insertSortedValue(t):this._items.push(this._registerValue(t)),this._length++,this.emit("change"),this},v.prototype.addRange=function(t){return t.length&&(this._throwIfFrozen(),this._addRange(t),this.emit("change")),this},v.prototype._addRange=function(t){t instanceof v&&(t=t._items.slice());var e=t.length;if(this._sorted)for(var r=0;r<e;r++)this._insertSortedValue(t[r]);else{var n=this._items,i=n.length;for(r=i+e;i<r;)n[--r]=this._registerValue(t[r-i])}this._length+=e},v.prototype.insert=function(t,e){if(this._sorted)throw new TypeError("Cannot insert to sorted list");return t=this._validateIndex(t,!0),this._throwIfFrozen(),this._items.splice(t,0,this._registerValue(e)),this._length++,this.emit("change"),this},v.prototype.insertRange=function(t,e){if(this._sorted)throw new TypeError("Cannot insert to sorted list");t=this._validateIndex(t,!0);var r=e.length;if(!r)return this;this._throwIfFrozen(),e instanceof v&&(e=e._items);for(var n=r;n;)this._registerValue(e[--n]);return c.apply(this._items,[t,0].concat(e)),this._length+=r,this.emit("change"),this},v.prototype.remove=function(t,e){var r=this._items.indexOf(t,this._validateIndex(e,!0));return-1!=r&&(this._throwIfFrozen(),this._unregisterValue(t),this._items.splice(r,1),this._length--,this.emit("change"),!0)},v.prototype.removeAll=function(t,e){for(var r=this._validateIndex(e,!0),n=this._items,i=!1;-1!=(r=n.indexOf(t,r));)i||this._throwIfFrozen(),this._unregisterValue(t),n.splice(r,1),i=!0;return i&&(this._length=n.length,this.emit("change")),i},v.prototype.removeEach=function(t,e){e=this._validateIndex(e,!0),t instanceof v&&(t=t._items.slice());for(var r=this._items,n=!1,i=0,o=t.length;i<o;i++){var s=t[i],a=r.indexOf(s,e);-1!=a&&(n||this._throwIfFrozen(),this._unregisterValue(s),r.splice(a,1),n=!0)}return n&&(this._length=r.length,this.emit("change")),n},v.prototype.removeAllEach=function(t,e){e=this._validateIndex(e,!0),t instanceof v&&(t=t._items.slice());for(var r=this._items,n=!1,i=0,o=t.length;i<o;i++)for(var s=t[i],a=e;-1!=(a=r.indexOf(s,a));)n||this._throwIfFrozen(),this._unregisterValue(s),r.splice(a,1),n=!0;return n&&(this._length=r.length,this.emit("change")),n},v.prototype.removeAt=function(t){t=this._validateIndex(t),this._throwIfFrozen();var e=this._items.splice(t,1)[0];return this._unregisterValue(e),this._length--,this.emit("change"),e},v.prototype.removeRange=function(t,e){t=this._validateIndex(t,!0);var r=this._items;if(void 0===e)e=r.length-t;else if(t+e>r.length)throw new RangeError('"index" and "count" out of valid range');if(!e)return[];this._throwIfFrozen();for(var n=t+e;t<n;)this._unregisterValue(r[--n]);var i=r.splice(t,e);return this._length-=e,this.emit("change"),i},v.prototype.clear=function(){return this._length&&(this._throwIfFrozen(),this._adoptsValueChanges&&this._valueCounts.forEach(function(t,e){e instanceof l.EventEmitter&&e.off("change",this._onItemChange,this)},this),this._valueCounts.clear(),this._items.length=0,this._length=0,this.emit("change",{subtype:"clear"})),this},v.prototype.join=function(t){return this._items.join(t)},v.prototype.find=function(t,e){for(var r=this._items,n=0,i=r.length;n<i;n++){var o=r[n];if(t.call(e,o,n,this))return o}},v.prototype.findIndex=function(t,e){for(var r=this._items,n=0,i=r.length;n<i;n++)if(t.call(e,r[n],n,this))return n;return-1},v.prototype.clone=function(t){return new this.constructor(t?this._items.map(function(t){return t.clone?t.clone():t}):this,{adoptsValueChanges:this._adoptsValueChanges,comparator:this._comparator||void 0,sorted:this._sorted})},v.prototype.toArray=function(){return this._items.slice()},v.prototype.toString=function(){return this._items.join()},v.prototype._insertSortedValue=function(t){for(var e=this._items,r=this._comparator,n=0,i=e.length;n!=i;){var o=n+i>>1;r(t,e[o])<0?i=o:n=1+o}e.splice(n,0,this._registerValue(t))},Object.defineProperty(v.prototype,"frozen",{get:function(){return!1},enumerable:!0,configurable:!0}),v.prototype.freeze=function(){return this},v.prototype.unfreeze=function(){return this},v.prototype._throwIfFrozen=function(t){},Object.defineProperty(v.prototype,"adoptsValueChanges",{get:function(){return!1},enumerable:!0,configurable:!0}),v.prototype._onItemChange=function(t){},v.prototype._registerValue=function(t){},v.prototype._unregisterValue=function(t){},v);function v(t,e){var r=p.call(this)||this;return r._items=[],r._length=0,h.FreezableCollection.call(r),u.ObservableCollection.call(r),"boolean"==typeof e&&(e={adoptsValueChanges:e}),r._adoptsValueChanges=!(!e||!e.adoptsValueChanges),e&&(e.sorted||e.comparator&&!1!==e.sorted)?(r._comparator=e.comparator||f,r._sorted=!0):(r._comparator=null,r._sorted=!1),t&&r._addRange(t),r}e.ObservableList=_,o.mixin(_.prototype,h.FreezableCollection.prototype,["constructor"]),o.mixin(_.prototype,u.ObservableCollection.prototype,["constructor"]),["forEach","map","filter","every","some"].forEach(function(t){_.prototype[t]=function(r,n){return this._items[t](function(t,e){return r.call(n,t,e,this)},this)}}),["reduce","reduceRight"].forEach(function(r){_.prototype[r]=function(n,t){var i=this;function e(t,e,r){return n(t,e,r,i)}return 2<=arguments.length?this._items[r](e,t):this._items[r](e)}}),[["keys",function(t){return t}],["values",function(t,e){return e}],["entries",function(t,e){return[t,e]}]].forEach(function(t){var n=t[1];_.prototype[t[0]]=function(){var t=this._items,e=0,r=!1;return{next:function(){if(!r){if(e<t.length)return{value:n(e,t[e++]),done:!1};r=!0}return{value:void 0,done:!0}}}}}),_.prototype[s.Symbol.iterator]=_.prototype.values},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mixin=function(t,e,r){Array.isArray(e)||(e=[e]);for(var n=0,i=e.length;n<i;n++)for(var o=e[n],s=Object.getOwnPropertyNames(o),a=0,l=s.length;a<l;a++){var h=s[a];r&&-1!=r.indexOf(h)||Object.defineProperty(t,h,Object.getOwnPropertyDescriptor(o,h))}return t}},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=r(8),a=(o=s.EventEmitter,i(l,o),Object.defineProperty(l.prototype,"frozen",{get:function(){return this._frozen},enumerable:!0,configurable:!0}),l.prototype.freeze=function(){return this._frozen=!0,this},l.prototype.unfreeze=function(){return this._frozen=!1,this},l.prototype._throwIfFrozen=function(t){if(this._frozen)throw new TypeError(t||"Frozen collection cannot be mutated")},l);function l(){var t=null!==o&&o.apply(this,arguments)||this;return t._frozen=!1,t}e.FreezableCollection=a},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=r(1),a=r(8),l=(o=a.EventEmitter,i(h,o),Object.defineProperty(h.prototype,"adoptsValueChanges",{get:function(){return this._adoptsValueChanges},enumerable:!0,configurable:!0}),h.prototype._onItemChange=function(t){this.handleEvent(t)},h.prototype._registerValue=function(t){var e=this._valueCounts,r=e.get(t);return r?e.set(t,r+1):(e.set(t,1),this._adoptsValueChanges&&t instanceof a.EventEmitter&&t.on("change",this._onItemChange,this)),t},h.prototype._unregisterValue=function(t){var e=this._valueCounts,r=e.get(t);1==r?(e.delete(t),this._adoptsValueChanges&&t instanceof a.EventEmitter&&t.off("change",this._onItemChange,this)):e.set(t,r-1)},h);function h(){var t=null!==o&&o.apply(this,arguments)||this;return t._valueCounts=new s.Map,t}e.ObservableCollection=l},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var a,o=r(5),l=r(1),s=r(11),h=r(2),u=r(8),c=r(12),f=r(13),p=(a=u.EventEmitter,i(_,a),Object.defineProperty(_.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),_.prototype.has=function(t){return this._entries.has(t)},_.prototype.contains=function(t){return this._valueCounts.has(t)},_.prototype.get=function(t){return this._entries.get(t)},_.prototype.set=function(t,e){var r,n=this._entries,i=n.has(t);if(i){if(r=n.get(t),o.is(e,r))return this;this._throwIfFrozen(),this._unregisterValue(r)}else this._throwIfFrozen();return n.set(t,this._registerValue(e)),i||this._size++,this.emit("change",{subtype:i?"update":"add",key:t,prevValue:r,value:e}),this},_.prototype.delete=function(t){var e=this._entries;if(!e.has(t))return!1;this._throwIfFrozen();var r=e.get(t);return this._unregisterValue(r),e.delete(t),this._size--,this.emit("change",{subtype:"delete",key:t,value:r}),!0},_.prototype.clear=function(){return this._size&&(this._throwIfFrozen(),this._adoptsValueChanges&&this._valueCounts.forEach(function(t,e){e instanceof u.EventEmitter&&e.off("change",this._onItemChange,this)},this),this._entries.clear(),this._valueCounts.clear(),this._size=0,this.emit("change",{subtype:"clear"})),this},_.prototype.forEach=function(r,n){this._entries.forEach(function(t,e){r.call(n,t,e,this)},this)},_.prototype.keys=function(){return this._entries.keys()},_.prototype.values=function(){return this._entries.values()},_.prototype.entries=function(){return this._entries.entries()},_.prototype.clone=function(t){var r;return t&&(r=[],this._entries.forEach(function(t,e){r.push([e,t.clone?t.clone():t])})),new this.constructor(r||this,this._adoptsValueChanges)},Object.defineProperty(_.prototype,"frozen",{get:function(){return!1},enumerable:!0,configurable:!0}),_.prototype.freeze=function(){return this},_.prototype.unfreeze=function(){return this},_.prototype._throwIfFrozen=function(t){},Object.defineProperty(_.prototype,"adoptsValueChanges",{get:function(){return!1},enumerable:!0,configurable:!0}),_.prototype._onItemChange=function(t){},_.prototype._registerValue=function(t){},_.prototype._unregisterValue=function(t){},_);function _(t,e){var r=a.call(this)||this;if(r._entries=new l.Map,c.FreezableCollection.call(r),f.ObservableCollection.call(r),"boolean"==typeof e&&(e={adoptsValueChanges:e}),r._adoptsValueChanges=!(!e||!e.adoptsValueChanges),t){var n=r._entries;if(t instanceof l.Map||t instanceof _)(t instanceof l.Map?t:t._entries).forEach(function(t,e){n.set(e,this._registerValue(t))},r);else if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)n.set(t[i][0],r._registerValue(t[i][1]));else for(var s in t)n.set(s,r._registerValue(t[s]));r._size=n.size}else r._size=0;return r}e.ObservableMap=p,s.mixin(p.prototype,c.FreezableCollection.prototype,["constructor"]),s.mixin(p.prototype,f.ObservableCollection.prototype,["constructor"]),p.prototype[h.Symbol.iterator]=p.prototype.entries}],n.c=i,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0);function n(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var r,i});