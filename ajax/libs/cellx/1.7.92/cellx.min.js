"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var map_set_polyfill_1=require("@riim/map-set-polyfill"),symbol_polyfill_1=require("@riim/symbol-polyfill"),Cell_1=require("./Cell"),ObservableList_1=require("./collections/ObservableList"),ObservableMap_1=require("./collections/ObservableMap"),EventEmitter_1=require("./EventEmitter");exports.EventEmitter=EventEmitter_1.EventEmitter;var ObservableMap_2=require("./collections/ObservableMap");exports.ObservableMap=ObservableMap_2.ObservableMap;var ObservableList_2=require("./collections/ObservableList");exports.ObservableList=ObservableList_2.ObservableList;var Cell_2=require("./Cell");exports.Cell=Cell_2.Cell;var WaitError_1=require("./WaitError");exports.WaitError=WaitError_1.WaitError;var hasOwn=Object.prototype.hasOwnProperty,slice=Array.prototype.slice,global=Function("return this;")();function map(e){return new ObservableMap_1.ObservableMap(e)}function list(e,r){return new ObservableList_1.ObservableList(e,r)}function cellx(e,i){i=i||{};var o=e,n=function(e){var r=this;r&&r!=global||(r=n),hasOwn.call(r,exports.KEY_CELL_MAP)||(r[exports.KEY_CELL_MAP]=new map_set_polyfill_1.Map);var t=r[exports.KEY_CELL_MAP].get(n);if(!t){if("dispose"===e&&2<=arguments.length)return;t=new Cell_1.Cell(o,{__proto__:i,context:r}),r[exports.KEY_CELL_MAP].set(n,t)}switch(arguments.length){case 0:return t.get();case 1:return t.set(e),e}var l=e;switch(l){case"cell":return t;case"bind":return(n=n.bind(r)).constructor=cellx,n}var s=Cell_1.Cell.prototype[l].apply(t,slice.call(arguments,1));return s===t?n:s};return n.constructor=cellx,(i.onChange||i.onError)&&n.call(i.context||global),n}function defineObservableProperty(e,r,t){var l=r+"Cell";return Object.defineProperty(e,l,{configurable:!0,enumerable:!1,writable:!0,value:t instanceof Cell_1.Cell?t:new Cell_1.Cell(t,{context:e})}),Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){return this[l].get()},set:function(e){this[l].set(e)}}),e}function defineObservableProperties(r,t){return Object.keys(t).forEach(function(e){defineObservableProperty(r,e,t[e])}),r}function define(e,r,t){return"string"==typeof r?defineObservableProperty(e,r,t):defineObservableProperties(e,r),e}exports.map=map,exports.list=list,exports.KEY_CELL_MAP=symbol_polyfill_1.Symbol("cellx[cellMap]"),exports.cellx=cellx,exports.defineObservableProperty=defineObservableProperty,exports.defineObservableProperties=defineObservableProperties,exports.define=define;