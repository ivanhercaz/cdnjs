var makeVideoPlayableInline=function(){"use strict";function d(r,e,i,n){function t(e){Boolean(r[i])===Boolean(n)&&e.stopImmediatePropagation(),delete r[i]}return r.addEventListener(e,t,!1),1}function a(e,r,i,n){function t(e){i[r]=e}n&&t(e[r]),Object.defineProperty(e,r,{get:function(){return i[r]},set:t})}function l(e,r,i){i.addEventListener(r,function(){return e.dispatchEvent(new Event(r))})}function f(e,r){Promise.resolve().then(function(){e.dispatchEvent(new Event(r))})}function m(e,r,i){(n||0)+200<Date.now()&&(e[h]=!0,n=Date.now()),i||(e.currentTime=r),E[++t%3]=100*r|0}function y(e){return e.driver.currentTime>=e.video.duration}function o(){var e=this,r=e[g];return e.webkitDisplayingFullscreen?void e[b]():("data:"!==r.driver.src&&r.driver.src!==e.src&&(m(e,0,!0),r.driver.src=e.src),void(e.paused&&(r.paused=!1,e.buffered.length||e.load(),r.driver.play(),r.updater.start(),r.hasAudio||(f(e,"play"),r.video.readyState>=r.video.HAVE_ENOUGH_DATA&&f(e,"playing")))))}function u(e){var r=this,i=r[g];i.driver.pause(),i.updater.stop(),r.webkitDisplayingFullscreen&&r[v](),i.paused&&!e||(i.paused=!0,i.hasAudio||f(r,"pause"),r.ended&&(r[h]=!0,f(r,"ended")))}function s(r,e){var i,n,t,d,a,o,u,s,c,v=r[g]={};function p(e){s=a(p,u),d(e-(c||e)),c=e}v.paused=!0,v.hasAudio=e,v.video=r,v.updater=(t=function(e){var r=this;r.video.readyState>=r.video.HAVE_FUTURE_DATA?(r.hasAudio||(r.driver.currentTime=r.video.currentTime+e*r.video.playbackRate/1e3,r.video.loop&&y(r)&&(r.driver.currentTime=0)),m(r.video,r.driver.currentTime)):r.video.networkState!==r.video.NETWORK_IDLE||r.video.buffered.length||r.video.load(),r.video.ended&&(delete r.video[h],r.video.pause(!0))}.bind(v),d=t,a=requestAnimationFrame,o=cancelAnimationFrame,{start:function(){s||p(0)},stop:function(){o(s),s=null,c=0}}),e?v.driver=(i=r,n=new Audio,l(i,"play",n),l(i,"playing",n),l(i,"pause",n),n.crossOrigin=i.crossOrigin,n.src=i.src||i.currentSrc||"data:",n):(r.addEventListener("canplay",function(){r.paused||f(r,"playing")}),v.driver={src:r.src||r.currentSrc||"data:",muted:!0,paused:!0,pause:function(){v.driver.paused=!0},play:function(){v.driver.paused=!1,y(v)&&m(r,0)},get ended(){return y(v)}}),r.addEventListener("emptied",function(){var e=!v.driver.src||"data:"===v.driver.src;v.driver.src&&v.driver.src!==r.src&&(m(r,0,!0),v.driver.src=r.src,e?v.driver.play():v.updater.stop())},!1),r.addEventListener("webkitbeginfullscreen",function(){r.paused?e&&!v.driver.buffered.length&&v.driver.load():(r.pause(),r[b]())}),e&&(r.addEventListener("webkitendfullscreen",function(){v.driver.currentTime=r.currentTime}),r.addEventListener("seeking",function(){E.indexOf(100*r.currentTime|0)<0&&(v.driver.currentTime=r.currentTime)}))}function e(e,r,i){var n,t;void 0===r&&(r=!0),void 0===i&&(i=!0),i&&!c||e[g]||(s(e,r),t=(n=e)[g],n[b]=n.play,n[v]=n.pause,n.play=o,n.pause=u,a(n,"paused",t.driver),a(n,"muted",t.driver,!0),a(n,"playbackRate",t.driver,!0),a(n,"ended",t.driver),a(n,"loop",t.driver,!0),d(n,"seeking"),d(n,"seeked"),d(n,"timeupdate",h,!1),d(n,"ended",h,!1),e.classList.add("IIV"),!r&&e.autoplay&&e.play(),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments"))}var n,r="undefined"==typeof Symbol?function(e){return"@"+(e||"@")+Math.random()}:Symbol,c="MediaSource"in window&&/iPhone|iPod/i.test(navigator.userAgent)&&!matchMedia("(-webkit-video-playable-inline)").matches,g=r(),h=r(),b=r("nativeplay"),v=r("nativepause"),E=[],t=0;return e.isWhitelisted=c,e}();