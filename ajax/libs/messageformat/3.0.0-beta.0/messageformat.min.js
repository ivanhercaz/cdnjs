"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _compiler=_interopRequireDefault(require("./compiler")),_plurals=require("./plurals");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);r&&(l=l.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,l)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(t,!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}class MessageFormat{static escape(e,r){const t=r?/[#{}]/g:/[{}]/g;return String(e).replace(t,"'$&'")}static supportedLocalesOf(e){return(Array.isArray(e)?e:[e]).filter(_plurals.hasPlural)}constructor(e,r){if(this.options=Object.assign({biDiSupport:!1,currency:"USD",customFormatters:{},returnType:"string",strictNumberSign:!1},r),"*"===e)this.plurals=(0,_plurals.getAllPlurals)(MessageFormat.defaultLocale);else if(Array.isArray(e))this.plurals=e.map(_plurals.getPlural).filter(Boolean);else if(e){const r=(0,_plurals.getPlural)(e);r&&(this.plurals=[r])}if(!this.plurals||0===this.plurals.length){const e=(0,_plurals.getPlural)(MessageFormat.defaultLocale);this.plurals=[e]}}resolvedOptions(){return _objectSpread({},this.options,{locale:this.plurals[0].locale,plurals:this.plurals})}compile(e){const r=new _compiler.default(this.options),t="return "+r.compile(e,this.plurals[0]),l=[],s=[];for(const[e,t]of Object.entries(r.runtime))l.push(e),s.push(t);return new Function(...l,t).apply(null,s)}}exports.default=MessageFormat,MessageFormat.defaultLocale="en";