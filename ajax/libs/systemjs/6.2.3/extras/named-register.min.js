!function(t){const e=t.System;o(e);const n=e.constructor.prototype,r=e.constructor,s=function(){r.call(this),o(this)};let i;function o(t){t.registerRegistry=Object.create(null)}s.prototype=n,e.constructor=s;const c=n.register;n.register=function(t,e,n){if("string"!=typeof t)return c.apply(this,arguments);const r=[e,n];return this.registerRegistry[t]=r,i||(i=r,setTimeout(function(){i=null})),c.apply(this,arguments)};const l=n.resolve;n.resolve=function(t,e){try{return l.call(this,t,e)}catch(e){if(t in this.registerRegistry)return t;throw e}};const u=n.instantiate;n.instantiate=function(t,e){return this.registerRegistry[t]||u.call(this,t,e)};const g=n.getRegister;n.getRegister=function(){const t=g.call(this),e=i||t;return i=null,e}}("undefined"!=typeof self?self:global);