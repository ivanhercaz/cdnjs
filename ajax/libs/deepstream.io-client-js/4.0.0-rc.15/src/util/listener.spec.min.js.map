{"version":3,"sources":["listener.spec.js"],"names":["Object","defineProperty","exports","value","chai_1","require","sinon","mocks_1","message_constants_1","constants_1","listener_1","describe","services","listener","listenCallback","pattern","subscription","beforeEach","stub","getServicesMock","Listener","TOPIC","EVENT","afterEach","connectionMock","verify","loggerMock","timeoutRegistryMock","it","expect","listen","bind","to","throw","unlisten","message","topic","action","EVENT_ACTIONS","LISTEN","name","expects","once","withExactArgs","RECORD","RECORD_ACTIONS","twice","simulateConnectionReestablished","restore","LISTENER_EXISTS","UNLISTEN","NOT_LISTENING","EMIT","UNSOLICITED_MESSAGE","handle","response","SUBSCRIPTION_FOR_PATTERN_FOUND","lastCall","args","assert","calledOnce","calledWithExactly","match","any","LISTEN_ACCEPT","accept","LISTEN_REJECT","reject","closeSpy","spy","onStop","SUBSCRIPTION_FOR_PATTERN_REMOVED","simulateConnectionLost"],"mappings":"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"}