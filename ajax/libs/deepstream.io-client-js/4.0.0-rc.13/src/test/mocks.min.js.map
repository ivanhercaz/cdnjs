{"version":3,"sources":["mocks.js"],"names":["Object","defineProperty","exports","value","lastMessageSent","sinon_1","require","constants_1","timer_registry_1","message_constants_1","single_notifier_1","write_ack_service_1","dirty_service_1","listener_1","bulk_subscription_service_1","getLastMessageSent","getServicesMock","onReestablished","onLost","onExitLimbo","handle","connection","sendMessage","message","getConnectionState","stub","returns","CONNECTION_STATE","OPEN","isConnected","isInLimbo","registerHandler","topic","callback","removeOnReestablished","removeOnLost","connectionMock","mock","logger","warn","error","loggerMock","expects","never","socket","timerRegistry","TimerRegistry","timeoutRegistry","add","remove","clear","timeoutRegistryMock","Socket","prototype","sendParsedMessage","onparsedmessages","onopened","onerror","onclosed","close","process","nextTick","this","simulateRemoteClose","simulateOpen","simulateError","bind","code","simulateMessages","messages","getTimeSinceLastMessage","url","storage","get","set","delete","storageMock","socketFactory","options","getSocket","socketMock","getLogger","getHandle","simulateConnectionLost","simulateConnectionReestablished","simulateExitLimbo","verify","getRecordServices","services","_a","withArgs","match","func","atLeast","callsArgWith","any","dirtyService","DirtyService","headRegistry","SingleNotifier","RECORD_ACTIONS","HEAD","readRegistry","READ","writeAckService","WriteAcknowledgementService","bulkSubscriptionService","SUBSCRIBECREATEANDREAD_BULK","BulkSubscriptionService","TOPIC","RECORD","SUBSCRIBECREATEANDREAD","UNSUBSCRIBE_BULK","UNSUBSCRIBE","SUBSCRIBEANDHEAD_BULK","SUBSCRIBEANDHEAD","SUBSCRIBEANDREAD_BULK","SUBSCRIBEANDREAD","dirtyServiceMock","readRegistryMock","headRegistryMock","writeAckServiceMock","getListenerMock","listener","Listener","listenerMock"],"mappings":"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"}