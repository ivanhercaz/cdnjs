"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Storage=function(){function e(e){if(this.isReady=!0,"undefined"==typeof localStorage||null===localStorage)try{var t=require("node-localstorage").LocalStorage;this.storage=new t(e.nodeStoragePath,1024*e.nodeStorageSize*1024)}catch(e){throw new Error("Attempting to use localStorage outside of browser without node-localstorage polyfill")}else this.storage=localStorage}return e.prototype.get=function(e,t){var o=this.storage.getItem(e);if(o){var r=JSON.parse(o);setTimeout(t.bind(this,e,r.version,r.data),0)}else setTimeout(t.bind(this,e,-1,null),0)},e.prototype.set=function(e,t,o,r){this.storage.setItem(e,JSON.stringify({recordName:e,version:t,data:o})),setTimeout(r,0)},e.prototype.delete=function(e,t){this.storage.removeItem(e),setTimeout(t,0)},e}();exports.Storage=Storage;