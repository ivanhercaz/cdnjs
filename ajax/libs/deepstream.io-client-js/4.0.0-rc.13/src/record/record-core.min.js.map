{"version":3,"sources":["record-core.js"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","defineProperty","exports","value","constants_1","require","message_constants_1","json_path_1","Emitter","utils","state_machine_1","RecordCore","_super","name","services","options","recordServices","whenComplete","_this","readyCallbacks","emitter","data","references","hasProvider","pendingWrites","isReady","offlineLoadingAborted","version","responseTimeout","discardTimeout","deletedTimeout","readyTimer","deleteResponse","Error","onConnectionLost","bind","onConnectionReestablished","stateMachine","StateMachine","logger","init","context","onStateChanged","transitions","recordStateTransitions","dirtyService","whenLoaded","onDirtyServiceLoaded","get","state","enumerable","configurable","set","usages","timeoutRegistry","clear","timerRegistry","remove","transition","RECORD_ACTIONS","SUBSCRIBE","connection","isConnected","storage","recordName","isDirty","SUBSCRIBECREATEANDREAD","onReestablished","onLost","newState","oldState","emit","EVENT","RECORD_STATE_CHANGED","whenReady","callback","Promise","resolve","whenReadyInternal","realContext","push","_a","path","checkDestroyed","oldValue","newValue","setValue","applyChange","sendUpdate","CLIENT_OFFLINE","saveUpdate","requestIdleCallback","setWithAck","args","reject","error","recordDeepCopy","subscribe","undefined","triggerNow","on","unsubscribe","off","discard","add","duration","recordReadTimeout","UNSUBSCRIBE_ACK","UNSUBSCRIBE","delete","DELETE","sendDelete","setMergeStrategy","mergeStrategy","setMergeStrategyByName","saveRecordToOffline","onSubscribing","readRegistry","register","handleReadResponse","message","topic","TOPIC","RECORD","action","READ_RESPONSE","bulkSubscriptionService","SUBSCRIBECREATEANDREAD_BULK","onResubscribing","headRegistry","handleHeadResponse","HEAD","SUBSCRIBEANDHEAD_BULK","onOfflineLoading","abortOfflineLoading","onReady","applyPendingWrites","forEach","writeCallbacks","oldData","newData","runFns","err","deepEquals","onUnsubscribed","sendMessage","RECORD_DISCARDED","destroy","onDeleted","RECORD_DELETED","handle","PATCH","UPDATE","ERASE","DELETE_SUCCESS","DELETED","VERSION_EXISTS","MESSAGE_DENIED","MESSAGE_PERMISSION_ERROR","SUBSCRIPTION_HAS_PROVIDER","SUBSCRIPTION_HAS_NO_PROVIDER","RECORD_HAS_PROVIDER_CHANGED","originalAction","SUBSCRIBEANDHEAD","SUBSCRIBEANDREAD","subscribeMsg","actionMsg","HEAD_RESPONSE","RECORD_ERROR","applyUpdate","recoverRecord","parsedData","setDirty","remoteVersion","sendCreateUpdate","sendRead","READ","writeAckService","send","CREATEANDUPDATE","inEndState","paths","eventNames","event","RECORD_DELETE_TIMEOUT","recordDeleteTimeout","remoteData","merge","onRecordRecovered","mergedData","RECORD_VERSION_EXISTS","methodName","RECORD_ALREADY_DESTROYED","removeOnReestablished","removeOnLost","from","to","handler"],"mappings":"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"}