{"version":3,"sources":["message-builder.js"],"names":["Object","defineProperty","exports","value","message_constants_1","require","utils_1","constants_1","message_validator_1","getMessage","msg","isAck","message","action","isWriteAck","ACTION_TO_WRITE_ACK","undefined","ACTIONS","topic","Error","TOPIC","meta","n","name","m","names","c","correlationId","s","subscription","v","version","p","path","r","reason","u","url","t","originalTopic","a","originalAction","x","protocolVersion","rn","requestorName","rd","requestorData","ts","trustedSender","rt","registryTopic","payloadEncoding","PAYLOAD_ENCODING","JSON","META_KEYS","metaError","validateMeta","metaStr","stringify","metaBuff","Buffer","from","payloadBuff","data","parsedData","payloadStr","hasPayload","console","error","metaBuffLength","length","payloadBuffLength","META_PAYLOAD_OVERFLOW_LENGTH","buildRaw","buildMultipart","payload","metaLength","payloadLength","messageParts","fin","metaSectionOffset","payloadSectionOffset","metaSectionLength","Math","min","payloadSectionLength","metaSection","slice","payloadSection","push","concat","messageBufferLength","HEADER_LENGTH","messageBuffer","allocUnsafe","writeUIntBE","copy","combineMultipleMessages","messages"],"mappings":"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"}