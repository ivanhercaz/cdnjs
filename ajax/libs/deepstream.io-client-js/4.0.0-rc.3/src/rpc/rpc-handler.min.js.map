{"version":3,"sources":["rpc-handler.js"],"names":["Object","defineProperty","exports","value","message_constants_1","require","constants_1","rpc_1","rpc_response_1","utils_1","RPCHandler","[object Object]","services","options","this","rpcs","Map","providers","limboQueue","connection","registerHandler","TOPIC","RPC","handle","bind","onReestablished","onConnectionReestablished","onExitLimbo","onLost","onConnectionLost","name","callback","length","Error","has","set","isConnected","sendProvide","delete","message","topic","action","RPC_ACTIONS","UNPROVIDE","timeoutRegistry","add","sendMessage","logger","warn","NOT_PROVIDED","data","correlationId","getUid","Promise","resolve","reject","error","result","isInLimbo","push","EVENT","CLIENT_OFFLINE","provider","get","parsedData","RPCResponse","REJECT","REQUEST","respondToRpc","isAck","remove","MESSAGE_PERMISSION_ERROR","MESSAGE_DENIED","originalAction","PROVIDE","invalidRPC","getRPC","rpc","ACCEPT","accept","RESPONSE","respond","REQUEST_ERROR","RESPONSE_TIMEOUT","NO_RPC_PROVIDER","undefined","UNKNOWN_CORRELATION_ID","i","forEach","clear"],"mappings":"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"}