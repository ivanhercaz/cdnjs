"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Storage{constructor(e){if("undefined"==typeof localStorage||null===localStorage){const t=require("node-localstorage").LocalStorage;this.storage=new t(e.nodeStoragePath,1024*e.nodeStorageSize*1024)}else this.storage=window.localStorage}get(e,t){const o=this.storage.getItem(e);if(o){const s=JSON.parse(o);setTimeout(t.bind(this,e,s.version,s.data),0)}else setTimeout(t.bind(this,e,-1,null),0)}set(e,t,o,s){this.storage.setItem(e,JSON.stringify({recordName:e,version:t,data:o})),setTimeout(s,0)}delete(e,t){this.storage.removeItem(e),setTimeout(t,0)}}exports.Storage=Storage;