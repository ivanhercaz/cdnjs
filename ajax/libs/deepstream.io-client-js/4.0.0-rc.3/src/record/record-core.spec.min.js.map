{"version":3,"sources":["record-core.spec.js"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","BBPromise","require","chai_1","mocks_1","message_constants_1","client_options_1","record_core_1","sinon_1","constants_1","describe","whenCompleted","recordCore","options","services","recordServices","beforeEach","spy","getServicesMock","getRecordServices","assign","DefaultOptions","discardTimeout","recordReadTimeout","connection","isConnected","RecordCore","name","connectionMock","restore","afterEach","verify","it","expects","once","withExactArgs","topic","TOPIC","RECORD","action","RECORD_ACTIONS","SUBSCRIBECREATEANDREAD","never","set","data","firstname","path","context","readySpy","whenReady","readRegistry","recieve","READ_RESPONSE","assert","calledOnce","calledWithExactly","readyContext","delay","expect","to","equal","UPDATE","parsedData","version","PATCH","UPDATE_WITH_WRITE_ACK","correlationId","callback","PATCH_WITH_WRITE_ACK","ERASE","ERASE_WITH_WRITE_ACK","discard","recordState","isReady","usages","UNSUBSCRIBE","DELETE","delete","notCalled","handle","DELETE_SUCCESS","DELETED","storageMock","callsArgWith","match","func","ackCallback","EVENT","CLIENT_OFFLINE","skip"],"mappings":"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"}