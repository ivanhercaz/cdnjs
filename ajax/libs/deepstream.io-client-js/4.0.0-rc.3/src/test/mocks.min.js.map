{"version":3,"sources":["mocks.js"],"names":["Object","defineProperty","exports","value","sinon_1","require","constants_1","timer_registry_1","message_constants_1","single_notifier_1","write_ack_service_1","dirty_service_1","listener_1","bulk_subscription_service_1","lastMessageSent","getLastMessageSent","getServicesMock","onReestablished","onLost","onExitLimbo","handle","connection","sendMessage","message","getConnectionState","stub","returns","CONNECTION_STATE","OPEN","isConnected","isInLimbo","registerHandler","topic","callback","removeOnReestablished","removeOnLost","connectionMock","mock","logger","warn","error","loggerMock","expects","never","timerRegistry","TimerRegistry","timeoutRegistry","add","remove","clear","timeoutRegistryMock","socket","storage","get","set","delete","storageMock","socketFactory","url","options","[object Object]","this","process","nextTick","onclose","close","onopen","onerror","bind","code","messages","onparsedmessages","getSocket","socketMock","getLogger","getHandle","simulateConnectionLost","simulateConnectionReestablished","simulateExitLimbo","verify","getRecordServices","services","withArgs","match","func","atLeast","callsArgWith","any","dirtyService","DirtyService","headRegistry","SingleNotifier","RECORD_ACTIONS","HEAD","readRegistry","READ","writeAckService","WriteAcknowledgementService","bulkSubscriptionService","SUBSCRIBECREATEANDREAD_BULK","BulkSubscriptionService","TOPIC","RECORD","SUBSCRIBECREATEANDREAD","UNSUBSCRIBE_BULK","UNSUBSCRIBE","SUBSCRIBEANDHEAD_BULK","SUBSCRIBEANDHEAD","SUBSCRIBEANDREAD_BULK","SUBSCRIBEANDREAD","dirtyServiceMock","readRegistryMock","headRegistryMock","writeAckServiceMock","getListenerMock","listener","Listener","prototype","listenerMock"],"mappings":"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"}