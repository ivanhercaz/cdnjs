{"version":3,"sources":["listener.spec.js"],"names":["Object","defineProperty","exports","value","chai_1","require","sinon","mocks_1","message_constants_1","constants_1","listener_1","describe","services","listener","listenCallback","beforeEach","stub","getServicesMock","Listener","TOPIC","EVENT","afterEach","connectionMock","verify","loggerMock","timeoutRegistryMock","it","expect","listen","bind","to","throw","unlisten","message","topic","action","EVENT_ACTIONS","LISTEN","name","expects","once","withExactArgs","RECORD","RECORD_ACTIONS","twice","simulateConnectionReestablished","restore","LISTENER_EXISTS","UNLISTEN","NOT_LISTENING","EMIT","subscription","UNSOLICITED_MESSAGE","handle","response","SUBSCRIPTION_FOR_PATTERN_FOUND","lastCall","args","assert","calledOnce","calledWithExactly","match","any","LISTEN_ACCEPT","accept","LISTEN_REJECT","reject","closeSpy","spy","onStop","SUBSCRIPTION_FOR_PATTERN_REMOVED","simulateConnectionLost"],"mappings":"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"}