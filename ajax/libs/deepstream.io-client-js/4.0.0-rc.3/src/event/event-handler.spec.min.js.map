{"version":3,"sources":["event-handler.spec.js"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","chai_1","require","sinon","mocks_1","constants_1","message_constants_1","bluebird_1","client_options_1","event_handler_1","describe","services","listener","eventHandler","handle","spy","name","beforeEach","getServicesMock","getListenerMock","EventHandler","assign","DefaultOptions","subscriptionInterval","getHandle","afterEach","verify","listenerMock","it","expect","subscribe","bind","to","throw","unsubscribe","emit","connectionMock","expects","once","withExactArgs","topic","TOPIC","EVENT","action","EVENT_ACTIONS","EMIT","parsedData","SUBSCRIBE","timeoutRegistryMock","message","twice","simulateConnectionReestablished","UNSUBSCRIBE","loggerMock","NOT_SUBSCRIBED","assert","calledOnce","calledWithExactly","callCount","undefined","MESSAGE_DENIED","originalAction","isAck","callback","listen","unlisten","subscriptionFoundMsg","SUBSCRIPTION_FOR_PATTERN_FOUND","subscription","subscriptionRemovedMsg","SUBSCRIPTION_FOR_PATTERN_REMOVED","UNSOLICITED_MESSAGE","connection","isConnected","isInLimbo","delay"],"mappings":"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"}