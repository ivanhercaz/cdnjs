{"version":3,"sources":["event-handler.js"],"names":["Object","defineProperty","exports","value","message_constants_1","require","constants_1","listener_1","Emitter","bulk_subscription_service_1","EventHandler","[object Object]","services","options","listeners","this","emitter","limboQueue","bulkSubscription","BulkSubscriptionService","subscriptionInterval","TOPIC","EVENT","EVENT_ACTIONS","SUBSCRIBE_BULK","SUBSCRIBE","UNSUBSCRIBE_BULK","UNSUBSCRIBE","onBulkSubscriptionSent","bind","Listener","connection","registerHandler","handle","onExitLimbo","onReestablished","onConnectionReestablished","name","callback","length","Error","hasListeners","isConnected","subscribe","on","undefined","off","unsubscribe","logger","warn","topic","action","NOT_SUBSCRIBED","data","message","EMIT","parsedData","sendMessage","isInLimbo","push","emit","pattern","listen","unlisten","isAck","timeoutRegistry","remove","MESSAGE_DENIED","error","originalAction","MULTIPLE_SUBSCRIPTIONS","assign","SUBSCRIPTION_FOR_PATTERN_FOUND","SUBSCRIPTION_FOR_PATTERN_REMOVED","INVALID_LISTEN_REGEX","UNSOLICITED_MESSAGE","subscribeList","eventNames","i","names","add"],"mappings":"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"}