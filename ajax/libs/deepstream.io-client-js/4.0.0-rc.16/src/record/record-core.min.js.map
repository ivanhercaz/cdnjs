{"version":3,"sources":["record-core.js"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","defineProperty","exports","value","constants_1","require","message_constants_1","json_path_1","Emitter","utils","state_machine_1","RecordCore","_super","name","services","options","recordServices","whenComplete","_this","isReady","hasProvider","version","references","Set","emitter","data","responseTimeout","discardTimeout","deletedTimeout","deleteResponse","pendingWrites","offlineLoadingAborted","readyTimer","readyCallbacks","Error","onConnectionLost","bind","onConnectionReestablished","stateMachine","StateMachine","logger","init","context","onStateChanged","transitions","recordStateTransitions","dirtyService","whenLoaded","onDirtyServiceLoaded","get","state","enumerable","configurable","addReference","ref","size","timeoutRegistry","clear","timerRegistry","remove","transition","RECORD_ACTIONS","SUBSCRIBE","add","removeReference","checkDestroyed","whenReadyInternal","delete","duration","recordReadTimeout","callback","UNSUBSCRIBE_ACK","UNSUBSCRIBE","connection","isConnected","storage","recordName","isDirty","SUBSCRIBECREATEANDREAD","onReestablished","onLost","newState","oldState","emit","EVENT","RECORD_STATE_CHANGED","whenReady","Promise","resolve","realContext","push","set","_a","path","oldValue","newValue","setValue","applyChange","sendUpdate","CLIENT_OFFLINE","saveUpdate","requestIdleCallback","setWithAck","args","reject","error","recordDeepCopy","subscribe","undefined","triggerNow","on","unsubscribe","off","DELETE","sendDelete","setMergeStrategy","mergeStrategy","setMergeStrategyByName","saveRecordToOffline","onSubscribing","readRegistry","register","handleReadResponse","message","topic","TOPIC","RECORD","action","READ_RESPONSE","bulkSubscriptionService","SUBSCRIBECREATEANDREAD_BULK","onResubscribing","headRegistry","handleHeadResponse","HEAD","SUBSCRIBEANDHEAD_BULK","onOfflineLoading","abortOfflineLoading","onReady","applyPendingWrites","forEach","writeCallbacks","oldData","newData","runFns","err","deepEquals","onUnsubscribed","sendMessage","RECORD_DISCARDED","destroy","onDeleted","RECORD_DELETED","handle","PATCH","UPDATE","ERASE","DELETE_SUCCESS","DELETED","VERSION_EXISTS","MESSAGE_DENIED","MESSAGE_PERMISSION_ERROR","SUBSCRIPTION_HAS_PROVIDER","SUBSCRIPTION_HAS_NO_PROVIDER","RECORD_HAS_PROVIDER_CHANGED","originalAction","SUBSCRIBEANDHEAD","SUBSCRIBEANDREAD","subscribeMsg","actionMsg","HEAD_RESPONSE","RECORD_ERROR","applyUpdate","recoverRecord","parsedData","setDirty","remoteVersion","sendCreateUpdate","sendRead","READ","writeAckService","send","CREATEANDUPDATE","inEndState","paths","eventNames","event","RECORD_DELETE_TIMEOUT","recordDeleteTimeout","remoteData","merge","onRecordRecovered","mergedData","RECORD_VERSION_EXISTS","methodName","RECORD_ALREADY_DESTROYED","removeOnReestablished","removeOnLost","from","to","handler"],"mappings":"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"}