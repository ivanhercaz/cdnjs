"use strict";var UniformResourceLocator;Object.defineProperty(exports,"__esModule",{value:!0}),UniformResourceLocator="undefined"==typeof URL?require("url").URL:URL,exports.deepEquals=function(t,o){return t===o||"object"==typeof t&&"object"==typeof o&&JSON.stringify(t)===JSON.stringify(o)},exports.deepCopy=function(t){return"object"==typeof t?JSON.parse(JSON.stringify(t)):t},exports.shallowCopy=function(t){if(Array.isArray(t))return t.slice(0);if("object"!=typeof t)return t;for(var o=Object.create(null),r=Object.keys(t),e=0;e<r.length;e++)o[r[e]]=t[r[e]];return o};var hasUrlProtocol=/^wss:|^ws:|^\/\//,unsupportedProtocol=/^http:|^https:/;exports.parseUrl=function(t,o){var r=t;if(unsupportedProtocol.test(r))throw new Error("Only ws and wss are supported");hasUrlProtocol.test(r)?0===r.indexOf("//")&&(r="ws:"+r):r="ws://"+r;var e=new UniformResourceLocator(r);if(!e.host)throw new Error("invalid url, missing host");return e.protocol=e.protocol?e.protocol:"ws:",e.pathname=e.pathname&&"/"!==e.pathname?e.pathname:o,e.href},exports.getUid=function(){return(new Date).getTime().toString(36)+"-"+(1e16*Math.random()).toString(36).replace(".","")},exports.normalizeSetArguments=function(t,o){var r;void 0===o&&(o=0);function e(t){return void 0!==t&&"object"==typeof t}function n(t){return"function"!=typeof t}function a(t){return void 0!==t&&"string"==typeof t}function i(t){return"function"==typeof t}if(t.length===o+1&&(r={path:void 0,data:e(t[o])?t[o]:void 0,callback:void 0}),t.length===o+2&&(r={path:void 0,data:void 0,callback:void 0},!i(t[o])&&n(t[o])&&(r.path=a(t[o])?t[o]:void 0),a(t[o])?r.data=n(t[o+1])?t[o+1]:void 0:r.data=e(t[o])?t[o]:void 0,a(t[o])||(r.callback=!!i(t[o+1])&&t[o+1])),t.length===o+3&&(r={path:a(t[o])?t[o]:void 0,data:n(t[o+1])?t[o+1]:void 0,callback:i(t[o+2])?t[o+2]:void 0}),r){if(void 0!==r.path&&0===r.path.length||void 0===r.path&&!r.data)throw Error("Invalid set path argument");if(void 0===r.data&&void 0===r.path)throw Error("Invalid set data argument");if(void 0!==r.callback&&!1===r.callback||void 0===r.callback&&t.length===o+3)throw Error("Invalid set callback argument");return r}throw Error("Invalid set arguments")},exports.normalizeArguments=function(t){if(1===t.length&&"object"==typeof t[0])return t[0];for(var o=Object.create(null),r=0;r<t.length;r++)"string"==typeof t[r]?o.path=t[r]:"function"==typeof t[r]?o.callback=t[r]:"boolean"==typeof t[r]&&(o.triggerNow=t[r]);return o};