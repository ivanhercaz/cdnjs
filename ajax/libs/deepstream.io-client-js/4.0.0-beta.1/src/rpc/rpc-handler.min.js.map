{"version":3,"sources":["rpc-handler.js"],"names":["Object","defineProperty","exports","value","message_constants_1","require","constants_1","rpc_1","rpc_response_1","utils_1","RPCHandler","[object Object]","services","options","this","rpcs","Map","providers","connection","registerHandler","TOPIC","RPC","handle","bind","onReestablished","reprovide","onLost","onConnectionLost","name","callback","length","Error","has","set","isConnected","sendProvide","delete","message","topic","action","RPC_ACTIONS","UNPROVIDE","timeoutRegistry","add","sendMessage","logger","warn","NOT_PROVIDED","data","timerRegistry","requestIdleCallback","EVENT","CLIENT_OFFLINE","Promise","reject","correlationId","getUid","REQUEST","parsedData","resolve","error","result","provider","get","RPCResponse","REJECT","respondToRpc","isAck","remove","MESSAGE_PERMISSION_ERROR","MESSAGE_DENIED","originalAction","PROVIDE","invalidRPC","getRPC","rpc","ACCEPT","accept","RESPONSE","respond","REQUEST_ERROR","RESPONSE_TIMEOUT","NO_RPC_PROVIDER","undefined","UNKNOWN_CORRELATION_ID","forEach","clear"],"mappings":"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"}