"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class StateMachine{constructor(t,s){this.inEndState=!1,this.logger=t,this.transitions=s.transitions,this.state=s.init,this.stateMachine=s}transition(t){let s;for(let i=0;i<this.transitions.length;i++)if(t===(s=this.transitions[i]).name&&(this.state===s.from||void 0===s.from)){const t=this.state;return this.state=s.to,this.stateMachine.onStateChanged&&this.stateMachine.onStateChanged(this.state,t),void(s.handler&&s.handler())}const i=JSON.stringify({transition:t,state:this.state});throw new Error(`Invalid state transition: ${i}`)}}exports.StateMachine=StateMachine;