{"version":3,"sources":["record-handler.js"],"names":["Object","defineProperty","exports","value","utils","require","constants_1","message_constants_1","utils_1","record_core_1","record_1","anonymous_record_1","list_1","listener_1","single_notifier_1","write_ack_service_1","Emitter","RecordHandler","[object Object]","services","options","listener","this","emitter","Listener","TOPIC","RECORD","recordCores","Map","recordServices","writeAckService","WriteAcknowledgementService","readRegistry","SingleNotifier","RECORD_ACTIONS","READ","recordReadTimeout","headRegistry","HEAD","getRecordCore","bind","connection","registerHandler","handle","name","Record","List","AnonymousRecord","pattern","callback","listen","unlisten","length","Error","undefined","recordCore","get","whenReady","Promise","resolve","reject","request","cb","error","version","head","recordName","rest","args","normalizeSetArguments","arguments","sendSetData","path","data","set","action","ERASE","CREATEANDPATCH","CREATEANDUPDATE","message","topic","parsedData","send","sendMessage","SUBSCRIPTION_FOR_PATTERN_FOUND","SUBSCRIPTION_FOR_PATTERN_REMOVED","isWriteAck","originalAction","recieve","READ_RESPONSE","isError","HEAD_RESPONSE","SUBSCRIPTION_HAS_PROVIDER","SUBSCRIPTION_HAS_NO_PROVIDER","logger","EVENT","UNSOLICITED_MESSAGE","delete","usages","RecordCore","removeRecord"],"mappings":"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"}