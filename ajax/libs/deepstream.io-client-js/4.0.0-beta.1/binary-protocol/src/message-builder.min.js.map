{"version":3,"sources":["message-builder.js"],"names":["Object","defineProperty","exports","value","message_constants_1","require","utils_1","constants_1","message_validator_1","getMessage","msg","isAck","message","action","isWriteAck","ACTION_TO_WRITE_ACK","undefined","ACTIONS","topic","Error","TOPIC","meta","create","key","META_KEYS","payloadEncoding","PAYLOAD_ENCODING","JSON","metaError","validateMeta","metaStr","stringify","metaBuff","Buffer","from","payloadBuff","data","parsedData","payloadStr","hasPayload","console","error","metaBuffLength","length","payloadBuffLength","META_PAYLOAD_OVERFLOW_LENGTH","buildRaw","buildMultipart","payload","metaLength","payloadLength","messageParts","fin","metaSectionOffset","payloadSectionOffset","metaSectionLength","Math","min","payloadSectionLength","metaSection","slice","payloadSection","push","concat","messageBufferLength","HEADER_LENGTH","messageBuffer","allocUnsafe","writeUIntBE","copy"],"mappings":"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"}