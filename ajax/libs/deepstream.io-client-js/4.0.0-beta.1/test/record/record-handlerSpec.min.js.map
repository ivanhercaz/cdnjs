{"version":3,"sources":["record-handlerSpec.js"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","bluebird_1","require","chai_1","sinon_1","mocks_1","message_constants_1","record_handler_1","client_options_1","describe","name","options","assign","DefaultOptions","services","singleNotifierMock","callbackSpy","resolveSpy","rejectSpy","recordHandler","handle","beforeEach","spy","getServicesMock","getSingleNotifierMock","RecordHandler","getHandle","afterEach","verify","it","expect","has","bind","to","throw","head","snapshot","expects","once","withExactArgs","callback","match","func","data","some","catch","topic","TOPIC","RECORD","action","RECORD_ACTIONS","READ_RESPONSE","isError","parsedData","delay","assert","calledOnce","calledWithExactly","notCalled","MESSAGE_DENIED","originalAction","READ","undefined","version","HEAD_RESPONSE","HEAD","twice"],"mappings":"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"}