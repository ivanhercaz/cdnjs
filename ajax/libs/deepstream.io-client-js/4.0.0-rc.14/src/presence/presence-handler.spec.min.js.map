{"version":3,"sources":["presence-handler.spec.js"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","_this","defineProperty","exports","bluebird_1","require","chai_1","sinon_1","mocks_1","constants_1","message_constants_1","client_options_1","presence_handler_1","message","action","user","name","topic","TOPIC","PRESENCE","messageResponseQueryAll","id","users","PRESENCE_ACTIONS","QUERY_ALL_RESPONSE","names","correlationId","toString","messageResponseQuery","usersPresence","QUERY_RESPONSE","parsedData","errorMessageResponseQueryAll","error","originalAction","QUERY_ALL","isError","errorMessageResponseQuery","QUERY","describe","services","presenceHandler","handle","callbackSpy","promiseSuccess","promiseError","counter","userA","userB","userC","options","DefaultOptions","subscriptionInterval","beforeEach","getServicesMock","PresenceHandler","getHandle","spy","afterEach","verify","it","expect","subscribe","bind","to","unsubscribe","_a","connection","isConnected","getAll","catch","delay","assert","calledOnce","calledWithExactly","EVENT","CLIENT_OFFLINE","notCalled","simulateConnectionLost","subscribeMessage","SUBSCRIBE_BULK","connectionMock","expects","once","withExactArgs","timeoutRegistryMock","subscribeAllMessage","SUBSCRIBE_ALL","queryMessage","queryAllMessage","subMsg","unsubMsg","UNSUBSCRIBE_BULK","UNSUBSCRIBE_ALL","messageAck","SUBSCRIBE_BULK_ACK","isAck","messageSubscribeAll","messageSubscribe","parseInt","getLastMessageSent","simulateConnectionReestablished","callback","messageForCallback","messageForPromise","MESSAGE_DENIED","userACallback","userBCallback","allUsersCallback","PRESENCE_JOIN","PRESENCE_JOIN_ALL","PRESENCE_LEAVE","PRESENCE_LEAVE_ALL","forEach","isInLimbo","simulateExitLimbo"],"mappings":"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"}