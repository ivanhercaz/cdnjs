{"version":3,"sources":["rpc-handler.js"],"names":["__values","this","o","m","Symbol","iterator","i","call","next","length","value","done","__read","n","r","e","ar","push","error","Object","defineProperty","exports","message_constants_1","require","constants_1","rpc_1","rpc_response_1","utils_1","RPCHandler","services","options","rpcs","Map","providers","limboQueue","connection","registerHandler","TOPIC","RPC","handle","bind","onReestablished","onConnectionReestablished","onExitLimbo","onLost","onConnectionLost","prototype","provide","name","callback","Error","has","set","isConnected","sendProvide","unprovide","delete","message","topic","action","RPC_ACTIONS","UNPROVIDE","timeoutRegistry","add","sendMessage","logger","warn","NOT_PROVIDED","make","data","_this","correlationId","getUid","Promise","resolve","reject","result","isInLimbo","EVENT","CLIENT_OFFLINE","respondToRpc","provider","get","parsedData","RPCResponse","REJECT","REQUEST","isAck","remove","MESSAGE_PERMISSION_ERROR","MESSAGE_DENIED","originalAction","PROVIDE","invalidRPC","getRPC","rpc","ACCEPT","accept","RESPONSE","respond","REQUEST_ERROR","RESPONSE_TIMEOUT","NO_RPC_PROVIDER","undefined","UNKNOWN_CORRELATION_ID","e_1","_a","_b","_c","name_1","e_1_1","return","_e","name_2","forEach","clear"],"mappings":"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"}