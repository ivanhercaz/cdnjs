var infamous=function(t){"use strict";function y(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function v(t){return Gt(y(t))}function x(t){return t<0?-1:1}function i(t){this.method=t,this._instances=[],this.state=[]}function h(t){this.options=Object.create(h.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function s(t,e,i){return(1-i)*t+i*e}function c(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,e,i,n,r){var s,o=(i(r)-i(r-1e-7))/1e-7;if(t instanceof Array){s=[];for(var a=0;a<t.length;a++)s[a]="number"==typeof t[a]?o*(t[a]-e[a])/n:0}else s=o*(t-e)/n;return s}function n(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function o(t){var e=this;this._final=ct.identity.slice(),this._finalTranslate=[0,0,0],this._finalRotate=[0,0,0],this._finalSkew=[0,0,0],this._finalScale=[1,1,1],this.translate=[],this.rotate=[],this.skew=[],this.scale=[];for(var i=0;i<3;i+=1)e.translate[i]=new gt(e._finalTranslate[i]),e.rotate[i]=new gt(e._finalRotate[i]),e.skew[i]=new gt(e._finalSkew[i]),e.scale[i]=new gt(e._finalScale[i]);t&&this.set(t)}function a(){return ct.build({translate:this._finalTranslate,rotate:this._finalRotate,skew:this._finalSkew,scale:this._finalScale})}function l(t,e){for(var i=0,n=0;n<t.length;n+=1)typeof t[n]==e+""&&(i+=1);return i}function u(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null,this._legacyStates={},this._output={transform:ct.identity,opacity:1,origin:null,align:null,size:null,proportions:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size),t.proportions&&this.proportionsFrom(t.proportions))}function f(t,e){wt[t]=e}function p(){this.result={}}function d(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}function _(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function m(){this.listeners={},this._owner=this}function g(){kt.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}function w(t){t=t||document.createDocumentFragment(),this.container=t,this.detachedNodes={},this.nodeCount=0}function S(){var t=this.container;return[t.clientWidth,t.clientHeight]}function C(t){this.container=t,this._allocator=new Pt(t),this._node=new Et,this._eventOutput=new Tt,this._size=S.call(this),this._perspectiveState=new gt(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:ct.identity,opacity:1,origin:At,align:At,size:this._size},this._eventOutput.on("resize",function(){this.setSize(S.call(this))}.bind(this))}function O(t){this._value=t,this.eventOutput=null}function E(){this.eventOutput=new Tt,this.eventOutput.bindThis(this),Tt.setOutputHandler(this,this.eventOutput)}function k(){ne.runLoop?(qt.step(),window.requestAnimationFrame(k)):te=!1}function T(){for(var t=0;t<Zt.length;t++)Zt[t].emit("resize");ie.emit("resize")}function P(){window.addEventListener("touchmove",function(t){t.preventDefault()},!0),A()}function A(){return document.body?(document.body.classList.add("famous-root"),void document.documentElement.classList.add("famous-root")):void qt.nextTick(A)}function R(i){for(var t=[],e=arguments.length-1;0<e--;)t[e]=arguments[e+1];t.forEach(function(t){for(var e in t)i[e]=t[e]})}function M(t){return t&&t.__esModule?t.default:t}function F(t,e){return t(e={exports:{}},e.exports),e.exports}function L(t){this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this._eventOutput=new Tt,this._eventOutput.bindThis(this),this.eventForwarder=function(t){this._eventOutput.emit(t.type,t)}.bind(this),this.id=St.register(this),this._element=null,this._sizeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._invisible=!1,t&&this.attach(t)}function z(t){t[12]=zt(t[12]*fe)/fe,t[13]=zt(t[13]*fe)/fe;for(var e="matrix3d(",i=0;i<15;i++)e+=t[i]<1e-6&&-1e-6<t[i]?"0,":t[i]+",";return e+=t[15]+")"}function j(t){return 100*t[0]+"% "+100*t[1]+"%"}function N(t){ge.call(this),this.options={},this.properties={},this.attributes={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._trueSizeCheck=!0,this._dirtyClasses=[],t&&this.setOptions(t),this._currentTarget=null}function U(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function D(t,e,i){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:e.origin,timestamp:si(),count:e.touches.length,history:i}}function I(t){if(this.isTouched){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=this.touchHistory[i.identifier];if(n){var r=D(i,t,n);this.eventOutput.emit("trackend",r),delete this.touchHistory[i.identifier]}}this.isTouched=!1}}function G(t){this.selective=t.selective,this.touchLimit=t.touchLimit||1,this.touchHistory={},this.eventInput=new Tt,this.eventOutput=new Tt,Tt.setInputHandler(this,this.eventInput),Tt.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",function(t){if(!(t.touches.length>this.touchLimit)){this.isTouched=!0;for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=D(i,t,null);this.eventOutput.emit("trackstart",n),this.selective||this.touchHistory[i.identifier]||this.track(n)}}}.bind(this)),this.eventInput.on("touchmove",function(t){if(!(t.touches.length>this.touchLimit))for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=this.touchHistory[i.identifier];if(n){var r=D(i,t,n);this.touchHistory[i.identifier].push(r),this.eventOutput.emit("trackmove",r)}}}.bind(this)),this.eventInput.on("touchend",I.bind(this)),this.eventInput.on("touchcancel",I.bind(this)),this.eventInput.on("unpipe",function(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}.bind(this)),this.isTouched=!1}function V(t){this.options=Object.create(V.DEFAULT_OPTIONS),this._optionsManager=new Yt(this.options),t&&this.setOptions(t),this._eventOutput=new Tt,this._touchTracker=new oi({touchLimit:this.options.touchLimit}),Tt.setOutputHandler(this,this._eventOutput),Tt.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",function(t){var e,i;i=void 0===this.options.direction?(this._position=[0,0],e=[0,0],[0,0]):(this._position=0,e=0);var n=this._payload;n.delta=i,n.position=this._position,n.velocity=e,n.clientX=t.x,n.clientY=t.y,n.count=t.count,n.touch=t.identifier,this._eventOutput.emit("start",n)}.bind(this)),this._touchTracker.on("trackmove",function(t){var e=t.history,i=e[e.length-1],n=e[e.length-2],r=e[e.length-this.options.velocitySampleLength]?e[e.length-this.options.velocitySampleLength]:e[e.length-2],s=r.timestamp,o=i.timestamp,a=i.x-n.x,l=i.y-n.y,h=i.x-r.x,c=i.y-r.y;this.options.rails&&(Dt(a)>Dt(l)?l=0:a=0,Dt(h)>Dt(c)?c=0:h=0);var u,f,p=Lt(o-s,ai),d=h/p,_=c/p,m=this.options.scale;this.options.direction===V.DIRECTION_X?(f=m*a,u=m*d,this._position+=f):this.options.direction===V.DIRECTION_Y?(f=m*l,u=m*_,this._position+=f):(f=[m*a,m*l],u=[m*d,m*_],this._position[0]+=f[0],this._position[1]+=f[1]);var g=this._payload;g.delta=f,g.velocity=u,g.position=this._position,g.clientX=t.x,g.clientY=t.y,g.count=t.count,g.touch=t.identifier,this._eventOutput.emit("update",g)}.bind(this)),this._touchTracker.on("trackend",function(t){this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function B(t,e){this._eventInput=new Tt,this._eventOutput=new Tt,Tt.setInputHandler(this,this._eventInput),Tt.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),e&&this.setOptions(e)}function H(t,e){li[t]&&(this._syncs[t]=new li[t](e),this.pipeSync(t))}function W(t,e,i){pi[0]=t.m11*e.m11+t.m21*e.m12+t.m31*e.m13+t.m41*e.m14,pi[4]=t.m11*e.m21+t.m21*e.m22+t.m31*e.m23+t.m41*e.m24,pi[8]=t.m11*e.m31+t.m21*e.m32+t.m31*e.m33+t.m41*e.m34,pi[12]=t.m11*e.m41+t.m21*e.m42+t.m31*e.m43+t.m41*e.m44,pi[1]=t.m12*e.m11+t.m22*e.m12+t.m32*e.m13+t.m42*e.m14,pi[5]=t.m12*e.m21+t.m22*e.m22+t.m32*e.m23+t.m42*e.m24,pi[9]=t.m12*e.m31+t.m22*e.m32+t.m32*e.m33+t.m42*e.m34,pi[13]=t.m12*e.m41+t.m22*e.m42+t.m32*e.m43+t.m42*e.m44,pi[2]=t.m13*e.m11+t.m23*e.m12+t.m33*e.m13+t.m43*e.m14,pi[6]=t.m13*e.m21+t.m23*e.m22+t.m33*e.m23+t.m43*e.m24,pi[10]=t.m13*e.m31+t.m23*e.m32+t.m33*e.m33+t.m43*e.m34,pi[14]=t.m13*e.m41+t.m23*e.m42+t.m33*e.m43+t.m43*e.m44,pi[3]=t.m14*e.m11+t.m24*e.m12+t.m34*e.m13+t.m44*e.m14,pi[7]=t.m14*e.m21+t.m24*e.m22+t.m34*e.m23+t.m44*e.m24,pi[11]=t.m14*e.m31+t.m24*e.m32+t.m34*e.m33+t.m44*e.m34,pi[15]=t.m14*e.m41+t.m24*e.m42+t.m34*e.m43+t.m44*e.m44,X(pi,i)}function X(t,e){var i=t.length;6===i?(e.m11=t[0],e.m12=t[1],e.m21=t[2],e.m22=t[3],e.m41=t[4],e.m42=t[5]):16===i&&(e.m11=t[0],e.m12=t[1],e.m13=t[2],e.m14=t[3],e.m21=t[4],e.m22=t[5],e.m23=t[6],e.m24=t[7],e.m31=t[8],e.m32=t[9],e.m33=t[10],e.m34=t[11],e.m41=t[12],e.m42=t[13],e.m43=t[14],e.m44=t[15])}function Y(t,e,i,n){var r=Bt,s=Ht,o=Nt,a=Ut/180*(n/2);return[1-2*(e*e+i*i)*o(r(a),2),2*(t*e*o(r(a),2)+i*r(a)*s(a)),2*(t*i*o(r(a),2)-e*r(a)*s(a)),0,2*(t*e*o(r(a),2)-i*r(a)*s(a)),1-2*(t*t+i*i)*o(r(a),2),2*(e*i*o(r(a),2)+t*r(a)*s(a)),0,2*(t*i*o(r(a),2)+e*r(a)*s(a)),2*(e*i*o(r(a),2)-t*r(a)*s(a)),1-2*(t*t+e*e)*o(r(a),2),0,0,0,0,1]}function q(){function t(t){if(void 0===t&&(t=[]),!(this instanceof bi))throw new TypeError("DOMMatrixReadOnly can't be instantiated directly. Use DOMMatrix instead.");var e=t.length;if(void 0===e||6!==e&&16!==e)throw new TypeError('DOMMatrix constructor argument "numberSequence" must be an array-like with 6 or 16 numbers.');this._matrix=new Float64Array(di),this._isIdentity=!0,this._is2D=6===e,X(t,this)}var e;_i||(e={is2D:{},isIdentity:{},a:{},b:{},c:{},d:{},e:{},f:{},m11:{},m12:{},m13:{},m14:{},m21:{},m22:{},m23:{},m24:{},m31:{},m32:{},m33:{},m34:{},m41:{},m42:{},m43:{},m44:{}},t.prototype.translate=function(t,e,i){return void 0===i&&(i=0),new bi(this).translateSelf(t,e,i)},t.prototype.scale=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),new bi(this).scaleSelf(t,e,i)},t.prototype.scale3d=function(t,e,i,n){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),new bi(this).scale3dSelf(t,e,i,n)},t.prototype.scaleNonUniform=function(t,e,i,n,r,s){return void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),new bi(this).scaleNonUniformSelf(t,e,i,n,r,s)},t.prototype.rotate=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),new bi(this).rotateSelf(t,e,i)},t.prototype.rotateFromVector=function(){throw new Error("rotateFromVector is not implemented yet.")},t.prototype.rotateAxisAngle=function(t,e,i,n){return new bi(this).rotateAxisAngleSelf(t,e,i,n)},t.prototype.skewX=function(){throw new Error("skewX is not implemented yet.")},t.prototype.skewY=function(){throw new Error("skewY is not implemented yet.")},t.prototype.multiply=function(t){return new bi(this).multiplySelf(t)},t.prototype.flipX=function(){throw new Error("flipX is not implemented yet.")},t.prototype.flipY=function(){throw new Error("flipY is not implemented yet.")},t.prototype.inverse=function(){throw new Error("inverse is not implemented yet.")},t.prototype.transformPoint=function(){throw new Error("transformPoint is not implemented yet.")},t.prototype.toFloat32Array=function(){return Float32Array.from(this._matrix)},t.prototype.toFloat64Array=function(){return Float64Array.from(this._matrix)},e.is2D.get=function(){return this._is2D},e.isIdentity.get=function(){for(var t=0,e=this._matrix.length;t<e;t+=1)if(this._matrix[t]!=di[t])return this._isIdentity=!1;return this._isIdentity=!0},e.a.get=function(){return this.m11},e.b.get=function(){return this.m12},e.c.get=function(){return this.m21},e.d.get=function(){return this.m22},e.e.get=function(){return this.m41},e.f.get=function(){return this.m42},e.m11.get=function(){return this._matrix[0]},e.m12.get=function(){return this._matrix[4]},e.m13.get=function(){return this._matrix[8]},e.m14.get=function(){return this._matrix[12]},e.m21.get=function(){return this._matrix[1]},e.m22.get=function(){return this._matrix[5]},e.m23.get=function(){return this._matrix[9]},e.m24.get=function(){return this._matrix[13]},e.m31.get=function(){return this._matrix[2]},e.m32.get=function(){return this._matrix[6]},e.m33.get=function(){return this._matrix[10]},e.m34.get=function(){return this._matrix[14]},e.m41.get=function(){return this._matrix[3]},e.m42.get=function(){return this._matrix[7]},e.m43.get=function(){return this._matrix[11]},e.m44.get=function(){return this._matrix[15]},Object.defineProperties(t.prototype,e),_i=t)}function Z(t){for(var e=Object.getOwnPropertyNames(t),i=e.length,n=0;n<i;n+=1){var r=e[n],s=r.toLowerCase();if(s!=r){var o=Object.getOwnPropertyDescriptor(t,r);void 0!==o.set&&Object.defineProperty(t,s,o)}}}function Q(t,e,i){return Ri=Ri||new Map,Mi=Mi||new MutationObserver(function(t){for(var e,i=new Map,n=0,r=t.length;n<r;n+=1)if("childList"==(e=t[n]).type){i.has(e.target)||i.set(e.target,new Map);for(var s=i.get(e.target),o=e.addedNodes,a=o.length,l=0;l<a;l+=1)s.set(o[l],(s.get(o[l])||0)+1);for(var h=e.removedNodes,c=h.length,u=0;u<c;u+=1)s.set(h[u],(s.get(h[u])||0)-1)}for(var f=0,p=i;f<p.length;f+=1)for(var d=p[f],_=d[0],m=d[1],g=Ri.get(_),y=g.onConnect,v=g.onDisconnect,b=0,x=m;b<x.length;b+=1){var w=x[b],S=w[0],C=w[1];0<C&&"function"==typeof y?y.call(_,S):C<0&&"function"==typeof v&&v.call(_,S)}}),Ri.set(t,{onConnect:e,onDisconnect:i}),Mi.observe(t,{childList:!0}),!0}function K(t){for(var e=t;e&&!(e instanceof ShadowRoot);)e=e.parentNode;return e}function J(t,e){var i,n,r,s,o,a=(n=i="100%",function(t,e,i){t.style.width=e,t.style.height=i}(r=document.createElement("canvas"),i,n),r),l=function(t,e){var i;if(t instanceof HTMLCanvasElement&&(i=t),i=i||document.querySelector(t),!(i instanceof HTMLCanvasElement))return!1;if(1==e||null==e)e="";else{if(2!=e)throw new Error("Invalid WebGL version.");e="2"}return i.getContext("webgl"+e)}(a,e);return l&&(us.has(t)&&(s=t,o=us.get(s),s.removeChild(o.canvas)),t.appendChild(a),us.set(t,l)),l}function $(t,e,i){var n=t.createShader(e);if(t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))return n;var r=new Error("*** Error compiling shader '"+n+"':"+t.getShaderInfoLog(n));throw t.deleteShader(n),r}function tt(t){return t*Ut/180}function et(){return js||(js=new Ps)}function it(t){if(!function t(e){return!!e&&(e===HTMLElement||t(e.prototype.__proto__?e.prototype.__proto__.constructor:null))}(t=t||HTMLElement))throw new TypeError("The argument to WebComponentMixin must be a constructor that extends from or is HTMLElement.");if(Zs.has(t))return Zs.get(t);var i,e=((i=t)&&(n.__proto__=i),((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.createdCallback=function(){this._attached=!1,this._initialized=!1,this._initialAttributeChange=!1,this._childObserver=null,this._style=null},n.prototype.childConnectedCallback=function(){},n.prototype.childDisconnectedCallback=function(){},n.prototype.connectedCallback=function(){i.prototype.connectedCallback&&i.prototype.connectedCallback.call(this),this._attached=!0,this._initialized||(this.init(),this._initialized=!0)},n.prototype.attachedCallback=function(){this.connectedCallback()},n.prototype._createStyles=function(){var t=ei.createRule(this.getStyles());return t.applyTo(this),t},n.prototype.disconnectedCallback=function(){var t=this;i.prototype.disconnectedCallback&&i.prototype.disconnectedCallback.call(this),this._attached=!1,Promise.resolve().then(function(){!t._attached&&t._initialized&&t.deinit()})},n.prototype.detachedCallback=function(){this.disconnectedCallback()},n.prototype.getStyles=function(){return{}},n.prototype.init=function(){var i=this;if(this._style||(this._style=this._createStyles()),!this._childObserver){var n=this.childNodes;n.length&&setTimeout(function(){for(var t=n.length,e=0;e<t;e+=1)i.childConnectedCallback(n[e])},5),this._childObserver=Q(this,this.childConnectedCallback,this.childDisconnectedCallback)}if(!this._initialAttributeChange&&this.hasAttributes())for(var t=this.attributes,e=t.length,r=0;r<e;r+=1)i.attributeChangedCallback(t[r].name,null,t[r].value)},n.prototype.attributeChangedCallback=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];i.prototype.attributeChangedCallback&&i.prototype.attributeChangedCallback.apply(this,t),this._initialAttributeChange=!0},n.prototype.deinit=function(){this._initialized=!1},n);function n(){if(i.call(this),"registerElement"in document&&!("customElements"in window))throw new Error("\n                    You cannot instantiate this class directly without first registering it\n                    with `document.registerElement(...)`. See an example at http://....\n                ");if(!("registerElement"in document||"customElements"in window))throw new Error("\n                    Your browser does not support the Custom Elements API. You'll\n                    need to install a polyfill. See how at http://....\n                ");this.createdCallback()}return Zs.set(t,e),e}function nt(t){!function(t){if(!t.match(/^\s*(((\s*(-|\+)?((\.\d+)|(\d+\.\d+)|(\d+)|(\d+(\.\d+)?e(-|\+)?(\d+)))\s*,){0,2}(\s*(-|\+)?((\.\d+)|(\d+\.\d+)|(\d+)|(\d+(\.\d+)?e(-|\+)?(\d+)))))|((\s*(-|\+)?((\.\d+)|(\d+\.\d+)|(\d+)|(\d+(\.\d+)?e(-|\+)?(\d+)))\s){0,2}(\s*(-|\+)?((\.\d+)|(\d+\.\d+)|(\d+)|(\d+(\.\d+)?e(-|\+)?(\d+))))))\s*$/g))throw new Error('Attribute must be a comma- or space-separated sequence of up to three numbers, for example "1 2.5 3". Yours was "'+t+'".')}(t);var e=t.trim().split(/(?:\s*,\s*)|(?:\s+)/g),i=e.length;return 0<i&&(e[0]=window.parseFloat(e[0])),1<i&&(e[1]=window.parseFloat(e[1])),2<i&&(e[2]=window.parseFloat(e[2])),e}function rt(t){!function(t){if(!t.match(/^\s*(((\s*([a-zA-Z]+)\s*,){0,2}(\s*([a-zA-Z]+)))|((\s*([a-zA-Z]+)\s*){1,3}))\s*$/g))throw new Error('Attribute must be a comma- or space-separated sequence of up to three strings, for example "absolute absolute". Yours was "'+t+'".')}(t);var e=t.trim().toLowerCase().split(/(?:\s*,\s*)|(?:\s+)/g),i=e.length;return 0<i&&(e[0]=e[0]),1<i&&(e[1]=e[1]),2<i&&(e[2]=e[2]),e}function st(l){return function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=this.shadowRoot,n=null;try{n=l.call.apply(l,[this].concat(t))}catch(t){throw t}if(this instanceof $s){this._hasShadowRoot=!0,i&&function(t){to.get(t).disconnect(),to.delete(t);for(var e,i=t.childNodes,n=i.length,r=0;r<n;r+=1)(e=i[r])instanceof $s&&this.imperativeCounterpart.removeChild(e.imperativeCounterpart,!0)}.call(this,i);var r=Q(n,function(t){t instanceof $s?this.imperativeCounterpart.addChild(t.imperativeCounterpart):Fi&&t instanceof HTMLContentElement||Li&&t instanceof HTMLSlotElement&&(t.addEventListener("slotchange",this),this._handleDistributedChildren(t))}.bind(this),function(t){t instanceof $s?this.imperativeCounterpart.removeChild(t.imperativeCounterpart):Fi&&t instanceof HTMLContentElement||Li&&t instanceof HTMLSlotElement&&(t.removeEventListener("slotchange",this),this._handleDistributedChildren(t),this._slotElementsAssignedNodes.delete(t))}.bind(this));to.set(n,r);for(var s=this.children,o=s.length,a=0;a<o;a+=1)s[a]instanceof $s&&(s[a]._isPossiblyDistributed=!0)}return n}}function ot(){function p(){i.apply(this,arguments)}var i;$s||((i=it(window.HTMLElement))&&(p.__proto__=i),((p.prototype=Object.create(i&&i.prototype)).constructor=p).prototype.createdCallback=function(){var t=this;i.prototype.createdCallback.call(this),this.imperativeCounterpart=null,this._hasShadowRoot=!1,this._isPossiblyDistributed=!1,this._slotElementsAssignedNodes=new WeakMap,this._shadowParent=null,this._shadowChildren=null,this._imperativeCounterpartPromise=Promise.resolve().then(function(){return t._associateImperativeNode()}),this.mountPromise=this._imperativeCounterpartPromise.then(function(){return t.imperativeCounterpart.mountPromise})},p.prototype._associateImperativeNode=function(t){this.imperativeCounterpart||(this.imperativeCounterpart=t||this._makeImperativeCounterpart())},p.prototype._makeImperativeCounterpart=function(){throw new TypeError("This method should be implemented by classes extending DeclarativeBase.")},p.prototype.childConnectedCallback=function(t){if(t instanceof Ks){if(this._hasShadowRoot&&(t._isPossiblyDistributed=!0),t.imperativeCounterpart._parent)return;this.imperativeCounterpart.addChild(t.imperativeCounterpart)}else Fi&&t instanceof HTMLContentElement&&K(this)||Li&&t instanceof HTMLSlotElement&&K(this)&&(t.addEventListener("slotchange",this),this._handleDistributedChildren(t))},p.prototype.handleEvent=function(t){if("slotchange"==t.type){var e=t.target;this._handleDistributedChildren(e)}},p.prototype._handleDistributedChildren=function(t){for(var e,i=this,n=this._getDistributedChildDifference(t),r=n.added,s=r.length,o=0;o<s;o+=1)if((e=r[o])instanceof p){var a=e._shadowParent;if(a&&a._shadowChildren){var l=a._shadowChildren;l.splice(l.indexOf(e),1),l.length||(a._shadowChildren=null)}(e._shadowParent=i)._shadowChildren||(i._shadowChildren=[]),i._shadowChildren.add(e)}for(var h,c=n.removed,u=c.length,f=0;f<u;f+=1)(h=c[f])instanceof p&&(h._shadowParent=null,i._shadowChildren.delete(h),i._shadowChildren.size||(i._shadowChildren=null))},p.prototype._getDistributedChildDifference=function(t){var e=this._slotElementsAssignedNodes.has(t)?this._slotElementsAssignedNodes.get(t):[],i=t.assignedNodes({flatten:!0});this._slotElementsAssignedNodes.set(t,i);for(var n={removed:[]},r=0,s=e.length;r<s;r+=1){var o=e[r];0<=i.indexOf(o)?i.splice(r,1):n.removed.push(o)}return n.added=i,n},p.prototype.childDisconnectedCallback=function(t){if(t instanceof Ks){if(t._isPossiblyDistributed=!1,!t.imperativeCounterpart._parent)return;this.imperativeCounterpart.removeChild(t.imperativeCounterpart)}else Fi&&t instanceof HTMLContentElement&&K(this)||Li&&t instanceof HTMLSlotElement&&K(this)&&(t.removeEventListener("slotchange",this),this._handleDistributedChildren(t),this._slotElementsAssignedNodes.delete(t))},p.prototype.setAttribute=function(t,e){i.prototype.setAttribute.call(this,t,e)},$s=p)}function at(s,o){for(var a=["constructor","parent","children","element","scene","addChild","addChildren","removeChild","removeChildren"],l=Object.getOwnPropertyNames(s.prototype),t=function(t,e){var i=l[e];if(!(0<=a.indexOf(i)||0==i.indexOf("_")||o.prototype.hasOwnProperty(i))){var n={},r=Object.getOwnPropertyDescriptor(s.prototype,i);r.set&&Object.assign(n,{set:function(t){this.imperativeCounterpart[i]=t}}),r.get&&Object.assign(n,{get:function(){return this.imperativeCounterpart[i]}}),Object.defineProperty(o.prototype,i,n)}},e=l.length,i=0;i<e;i+=1)t(0,i)}function lt(){if(!so){var s=Symbol("instanceofSymbol"),t=function(t){var i=t,n=function(n){function i(t){var e=this;void 0===t&&(t={});var i=t._motorHtmlCounterpart;n.call(this,t),this._willBeRendered=!1,this._elementManager=new po(i||this._makeElement()),this._elementManager.element._associateImperativeNode(this),this._mounted=!1,this._mountPromise=null,this._resolveMountPromise=null,this._rejectMountPromise=null,this._awaitingMountPromiseToRender=!1,this._waitingForMountConditions=!1,this.on("propertychange",function(t){"sizeMode"!=t&&"absoluteSize"!=t&&"proportionalSize"!=t||e._calcSize(),e._needsToBeRendered()})}n&&(i.__proto__=n);var t={mountPromise:{},element:{}};return((i.prototype=Object.create(n&&n.prototype)).constructor=i).prototype._makeElement=function(){throw new Error("Subclasses need to override ImperativeBase#_makeElement.")},t.mountPromise.get=function(){var i=this;return this._mountPromise||(this._mountPromise=new Promise(function(t,e){i._resolveMountPromise=t,i._rejectMountPromise=e})),this._mounted?this._mounted&&this._resolveMountPromise():this._waitForMountThenResolveMountPromise(),this._mountPromise},i.prototype._waitForMountThenResolveMountPromise=function(){},t.element.get=function(){return this._elementManager.element},i.prototype.addChild=function(t){if(t instanceof i){if(t instanceof ao)throw new Error("\n                        A Scene cannot be added to another Node or Scene (at\n                        least for now). To place a Scene in a Node, just mount\n                        a new Scene onto a MotorHTMLNode with Scene.mount().\n                    ");return n.prototype.addChild.call(this,t),(t._scene||t.scene)&&(t._resolveScenePromise&&t._resolveScenePromise(t._scene),t._giveSceneRefToChildren()),t._calcSize(),t._needsToBeRendered(),this.on("sizechange",t._onParentSizeChange),this._elementManager.connectChildElement(t),this}},i.prototype.removeChild=function(t,e){t instanceof fo&&(n.prototype.removeChild.call(this,t),this.off("sizechange",t._onParentSizeChange),t._resetSceneRef(),t._mountPromise&&t._rejectMountPromise("mountcancel"),t._mounted&&t._elementManager.shouldNotRender(),t._resetMountPromise(),e||this._elementManager.disconnectChildElement(t))},i.prototype._resetMountPromise=function(){this._mounted=!1,this._mountPromise=null,this._resolveMountPromise=null,this._rejectMountPromise=null;for(var t=this._children,e=0,i=t.length;e<i;e+=1)t[e]._resetMountPromise()},i.prototype._needsToBeRendered=function(){var t=this;if(this._awaitingMountPromiseToRender)return Promise.resolve();function i(){t._willBeRendered=!0,Ds._setNodeToBeRendered(t)}var n;return this._mounted?(i(),Promise.resolve()):(this._awaitingMountPromiseToRender=!0,this.mountPromise.then(i).catch(function(){"mountcancel"==e||(n=e)}).then(function(){if(t._awaitingMountPromiseToRender=!1,n)throw n}))},i.prototype._getAncestorToBeRendered=function(){for(var t=this._parent;t;){if(t._willBeRendered)return t;t=t._parent}return!1},i.prototype._render=function(){n.prototype._render.call(this),this._elementManager.applyImperativeNodeProperties(this)},Object.defineProperties(i.prototype,t),i}(i),r=Object.getOwnPropertyDescriptor(i.prototype,"properties").set;return Object.defineProperties(n.prototype,{properties:{set:function(t){var e;void 0===t&&(t={}),r.call(this,t),t.classes&&(e=this._elementManager).setClasses.apply(e,t.classes)},configurable:!0}}),Object.defineProperty(n,Symbol.hasInstance,{value:function(t){if(this!==n)return Object.getPrototypeOf(n)[Symbol.hasInstance].call(this,t);for(var e,i=t;i;){if((e=Object.getOwnPropertyDescriptor(i,"constructor"))&&e.value&&e.value.hasOwnProperty(s))return!0;i=Object.getPrototypeOf(i)}return!1}}),n[s]=!0,n};(so=t(Vs)).mixin=t}}var Mt=Math.min,Ft=Math.ceil,Lt=Math.max,zt=Math.round,jt=Math.floor,Nt=Math.pow,Ut=Math.PI,Dt=Math.abs,It=Math.atan2,Gt=Math.sqrt,Vt=Math.tan,Bt=Math.sin,Ht=Math.cos,ht={precision:1e-6,identity:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],multiply4x4:function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]},multiply:function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1]},thenMove:function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},moveThen:function(t,e){t[2]||(t[2]=0);var i=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],n=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],r=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return ht.thenMove(e,[i,n,r])},translate:function(t,e,i){return void 0===i&&(i=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},thenScale:function(t,e){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],0,e[0]*t[4],e[1]*t[5],e[2]*t[6],0,e[0]*t[8],e[1]*t[9],e[2]*t[10],0,e[0]*t[12],e[1]*t[13],e[2]*t[14],1]},scale:function(t,e,i){return void 0===i&&(i=1),void 0===e&&(e=t),[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},rotateX:function(t){var e=Ht(t),i=Bt(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},rotateY:function(t){var e=Ht(t),i=Bt(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},rotateZ:function(t){var e=Ht(t),i=Bt(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},rotate:function(t,e,i){var n=Ht(t),r=Bt(t),s=Ht(e),o=Bt(e),a=Ht(i),l=Bt(i);return[s*a,n*l+r*o*a,r*l-n*o*a,0,-s*l,n*a-r*o*l,r*a+n*o*l,0,o,-r*s,n*s,0,0,0,0,1]},rotateAxis:function(t,e){var i=Bt(e),n=Ht(e),r=1-n,s=t[0]*t[0]*r,o=t[0]*t[1]*r,a=t[0]*t[2]*r,l=t[1]*t[1]*r,h=t[1]*t[2]*r,c=t[2]*t[2]*r,u=t[0]*i,f=t[1]*i,p=t[2]*i;return[s+n,o+p,a-f,0,o-p,l+n,h+u,0,a+f,h-u,c+n,0,0,0,0,1]},aboutOrigin:function(t,e){var i=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),n=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),r=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return ht.thenMove(e,[i,n,r])},skew:function(t,e,i){return[1,Vt(e),0,0,Vt(i),1,0,0,0,Vt(t),1,0,0,0,0,1]},skewX:function(t){return[1,0,0,0,Vt(t),1,0,0,0,0,1,0,0,0,0,1]},skewY:function(t){return[1,Vt(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},perspective:function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},getTranslate:function(t){return[t[12],t[13],t[14]]},inverse:function(t){var e=t[5]*t[10]-t[6]*t[9],i=t[4]*t[10]-t[6]*t[8],n=t[4]*t[9]-t[5]*t[8],r=t[1]*t[10]-t[2]*t[9],s=t[0]*t[10]-t[2]*t[8],o=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],l=t[0]*t[6]-t[2]*t[4],h=t[0]*t[5]-t[1]*t[4],c=1/(t[0]*e-t[1]*i+t[2]*n),u=[c*e,-c*r,c*a,0,-c*i,c*s,-c*l,0,c*n,-c*o,c*h,0,0,0,0,1];return u[12]=-t[12]*u[0]-t[13]*u[4]-t[14]*u[8],u[13]=-t[12]*u[1]-t[13]*u[5]-t[14]*u[9],u[14]=-t[12]*u[2]-t[13]*u[6]-t[14]*u[10],u},transpose:function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},interpret:function(t){var e=[t[0],t[1],t[2]],i=x(e[0]),n=v(e),r=[e[0]+i*n,e[1],e[2]],s=2/y(r);if(1/0<=s)return{translate:ht.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];o[0]=1-s*r[0]*r[0],o[5]=1-s*r[1]*r[1],o[10]=1-s*r[2]*r[2],o[1]=-s*r[0]*r[1],o[2]=-s*r[0]*r[2],o[6]=-s*r[1]*r[2],o[4]=o[1],o[8]=o[2],o[9]=o[6];var a=ht.multiply(o,t),l=[a[5],a[6]],h=x(l[0]),c=v(l),u=[l[0]+h*c,l[1]],f=2/y(u),p=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];p[5]=1-f*u[0]*u[0],p[10]=1-f*u[1]*u[1],p[6]=-f*u[0]*u[1],p[9]=p[6];var d=ht.multiply(p,o),_=ht.multiply(d,t),m=ht.scale(_[0]<0?-1:1,_[5]<0?-1:1,_[10]<0?-1:1);_=ht.multiply(_,m),d=ht.multiply(m,d);var g={};return g.translate=ht.getTranslate(t),g.rotate=[It(-d[6],d[10]),Math.asin(d[2]),It(-d[1],d[0])],g.rotate[0]||(g.rotate[0]=0,g.rotate[2]=It(d[4],d[5])),g.scale=[_[0],_[5],_[10]],g.skew=[It(_[9],g.scale[2]),It(_[8],g.scale[2]),It(_[4],g.scale[0])],Dt(g.rotate[0])+Dt(g.rotate[2])>1.5*Ut&&(g.rotate[1]=Ut-g.rotate[1],g.rotate[1]>Ut&&(g.rotate[1]-=2*Ut),g.rotate[1]<-Ut&&(g.rotate[1]+=2*Ut),g.rotate[0]<0?g.rotate[0]+=Ut:g.rotate[0]-=Ut,g.rotate[2]<0?g.rotate[2]+=Ut:g.rotate[2]-=Ut),g},average:function(t,e,i){i=void 0===i?.5:i;for(var n=ht.interpret(t),r=ht.interpret(e),s={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},o=0;o<3;o++)s.translate[o]=(1-i)*n.translate[o]+i*r.translate[o],s.rotate[o]=(1-i)*n.rotate[o]+i*r.rotate[o],s.scale[o]=(1-i)*n.scale[o]+i*r.scale[o],s.skew[o]=(1-i)*n.skew[o]+i*r.skew[o];return ht.build(s)},build:function(t){var e=ht.scale(t.scale[0],t.scale[1],t.scale[2]),i=ht.skew(t.skew[0],t.skew[1],t.skew[2]),n=ht.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return ht.thenMove(ht.multiply(ht.multiply(n,i),e),t.translate)},equals:function(t,e){return!ht.notEquals(t,e)},notEquals:function(t,e){return!(t===e||t&&e&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10])},normalizeRotation:function(t){var e=t.slice(0);for(e[0]!==.5*Ut&&e[0]!==.5*-Ut||(e[0]=-e[0],e[1]=Ut-e[1],e[2]-=Ut),e[0]>.5*Ut&&(e[0]-=Ut,e[1]=Ut-e[1],e[2]-=Ut),e[0]<.5*-Ut&&(e[0]+=Ut,e[1]=-Ut-e[1],e[2]-=Ut);e[1]<-Ut;)e[1]+=2*Ut;for(;e[1]>=Ut;)e[1]-=2*Ut;for(;e[2]<-Ut;)e[2]+=2*Ut;for(;e[2]>=Ut;)e[2]-=2*Ut;return e},inFront:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],behind:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1]},ct=ht,ut={Direction:{X:0,Y:1,Z:2},after:function(t,e){var i=t;return function(){0===--i&&e.apply(this,arguments)}},loadURL:function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&e&&e(this.responseText)},i.open("GET",t),i.send()},createDocumentFragmentFromHTML:function(t){var e=document.createElement("div");e.innerHTML=t;for(var i=document.createDocumentFragment();e.hasChildNodes();)i.appendChild(e.firstChild);return i},clone:function(t){var e;if("object"==typeof t)for(var i in e=t instanceof Array?[]:{},t)if("object"!=typeof t[i]||null===t[i])e[i]=t[i];else if(t[i]instanceof Array){e[i]=Array(t[i].length);for(var n=0;n<t[i].length;n++)e[i][n]=ut.clone(t[i][n])}else e[i]=ut.clone(t[i]);else e=t;return e}},ft=ut;i.SUPPORTS_MULTIPLE=!0,i.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},i.prototype.set=function(t,e,i){for(var n=ft.after(t.length,i),r=0;r<t.length;r++)this._instances[r]||(this._instances[r]=new this.method),this._instances[r].set(t[r],e,n)},i.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])};var pt=i;h.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return t<=.5?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Bt(6*Ut*t)+t}},h.SUPPORTS_MULTIPLE=!0,h.DEFAULT_OPTIONS={curve:h.Curves.linear,duration:500,speed:0};var dt={};h.registerCurve=function(t,e){return!dt[t]&&(dt[t]=e,!0)},h.unregisterCurve=function(t){return!!dt[t]&&(delete dt[t],!0)},h.getCurve=function(t){var e=dt[t];if(void 0!==e)return e;throw new Error("curve not registered")},h.getCurves=function(){return dt},h.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},h.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());if(this._startValue=c(this.get()),o=e,a=this.options,l={curve:a.curve},a.duration&&(l.duration=a.duration),a.speed&&(l.speed=a.speed),o instanceof Object&&(void 0!==o.duration&&(l.duration=o.duration),o.curve&&(l.curve=o.curve),o.speed&&(l.speed=o.speed)),"string"==typeof l.curve&&(l.curve=h.getCurve(l.curve)),(e=l).speed){var n=this._startValue;if(n instanceof Object){var r=0;for(var s in n)r+=(t[s]-n[s])*(t[s]-n[s]);e.duration=Gt(r)/e.speed}else e.duration=Dt(t-n)/e.speed}var o,a,l;this._startTime=Date.now(),this._endValue=c(t),this._startVelocity=c(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=i},h.prototype.reset=function(t,e){if(this._callback){var i=this._callback;this._callback=void 0,i()}this.state=c(t),this.velocity=c(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},h.prototype.getVelocity=function(){return this.velocity},h.prototype.get=function(t){return this.update(t),this.state},h.prototype.update=function(t){if(this._active){if(t=t||Date.now(),!(this._updateTime>=t)){var e=(this._updateTime=t)-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=r(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(e<0)this.state=this._startValue,this.velocity=this._startVelocity;else{var i=e/this._duration;this.state=function(t,e,i){var n;if(t instanceof Array){n=[];for(var r=0;r<t.length;r++)n[r]="number"==typeof t[r]?s(t[r],e[r],i):t[r]}else n=s(t,e,i);return n}(this._startValue,this._endValue,this._curve(i)),this.velocity=r(this.state,this._startValue,this._curve,this._duration,i)}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},h.prototype.isActive=function(){return this._active},h.prototype.halt=function(){this.reset(this.get())},h.registerCurve("linear",h.Curves.linear),h.registerCurve("easeIn",h.Curves.easeIn),h.registerCurve("easeOut",h.Curves.easeOut),h.registerCurve("easeInOut",h.Curves.easeInOut),h.registerCurve("easeOutBounce",h.Curves.easeOutBounce),h.registerCurve("spring",h.Curves.spring),h.customCurve=function(e,i){return e=e||0,i=i||0,function(t){return e*t+(-2*e-i+3)*t*t+(e+i-2)*t*t*t}};var _t=h,mt={};n.register=function(t){var e=!0;for(var i in t)n.registerMethod(i,t[i])||(e=!1);return e},n.registerMethod=function(t,e){return!(t in mt||(mt[t]=e,0))},n.unregisterMethod=function(t){return!!(t in mt)&&(delete mt[t],!0)},n.prototype.set=function(t,e,i){return e?(this.actionQueue.push([t,e]),this.callbackQueue.push(i),this.currentAction||function t(){if(this._callback){var e=this._callback;this._callback=void 0,e()}if(this.actionQueue.length<=0)this.set(this.get());else{this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var i=null,n=this.currentAction[0],r=this.currentAction[1];r instanceof Object&&r.method?"string"==typeof(i=r.method)&&(i=mt[i]):i=_t,this._currentMethod!==i&&(this._engineInstance=!(n instanceof Object)||!0===i.SUPPORTS_MULTIPLE||n.length<=i.SUPPORTS_MULTIPLE?new i:new pt(i),this._currentMethod=i),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(r.velocity=this.velocity),this._engineInstance.set(n,r,t.bind(this))}}.call(this)):(this.reset(t),i&&i()),this},n.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},n.prototype.delay=function(t,e){var i;return i=this.actionQueue.length?this.actionQueue[this.actionQueue.length-1][0]:this.currentAction?this.currentAction[0]:this.get(),this.set(i,{duration:t,curve:function(){return 0}},e)},n.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},n.prototype.isActive=function(){return!!this.currentAction},n.prototype.halt=function(){return this.set(this.get())};var gt=n,yt={inQuad:function(t){return t*t},outQuad:function(t){return- --t*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Ht(t*(Ut/2))+1},outSine:function(t){return Bt(t*(Ut/2))},inOutSine:function(t){return-.5*(Ht(Ut*t)-1)},inExpo:function(t){return 0===t?0:Nt(2,10*(t-1))},outExpo:function(t){return 1===t?1:1-Nt(2,-10*t)},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Nt(2,10*(t-1)):.5*(2-Nt(2,-10*--t))},inCirc:function(t){return-(Gt(1-t*t)-1)},outCirc:function(t){return Gt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Gt(1-t*t)-1):.5*(Gt(1-(t-=2)*t)+1)},inElastic:function(t){var e=1.70158,i=0;return 0===t?0:1===t?1:(e=(i=i||.3)/(2*Ut)*1.5707963267948966,-(Nt(2,10*--t)*Bt(2*Ut*(t-e)/i)))},outElastic:function(t){var e=1.70158,i=0;return 0===t?0:1===t?1:(e=(i=i||.3)/(2*Ut)*1.5707963267948966,Nt(2,-10*t)*Bt(2*Ut*(t-e)/i)+1)},inOutElastic:function(t){var e=1.70158,i=0;return 0===t?0:2==(t/=.5)?1:(e=(i=i||.3*1.5)/(2*Ut)*1.5707963267948966,t<1?Nt(2,10*--t)*Bt(2*Ut*(t-e)/i)*-.5:Nt(2,-10*--t)*Bt(2*Ut*(t-e)/i)*.5+1)},inBack:function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)},outBack:function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1},inOutBack:function(t,e){return void 0===e&&(e=1.70158),(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},inBounce:function(t){return 1-yt.outBounce(1-t)},outBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return t<.5?.5*yt.inBounce(2*t):.5*yt.outBounce(2*t-1)+.5}},vt=yt;o.prototype.setTranslate=function(t,e,i){for(var n=l(t,"number"),r=i?ft.after(n,i):null,s=0;s<t.length;s+=1)"number"==typeof t[s]&&(this.translate[s].set(t[s],e,r),this._finalTranslate[s]=t[s]);return this._final=a.call(this),this},o.prototype.setTranslateX=function(t,e,i){return this.translate[0].set(t,e,i),this._finalTranslate[0]=t,this._final=a.call(this),this},o.prototype.setTranslateY=function(t,e,i){return this.translate[1].set(t,e,i),this._finalTranslate[1]=t,this._final=a.call(this),this},o.prototype.setTranslateZ=function(t,e,i){return this.translate[2].set(t,e,i),this._finalTranslate[2]=t,this._final=a.call(this),this},o.prototype.setScale=function(t,e,i){for(var n=l(t,"number"),r=i?ft.after(n,i):null,s=0;s<t.length;s+=1)"number"==typeof t[s]&&(this.scale[s].set(t[s],e,r),this._finalScale[s]=t[s]);return this._final=a.call(this),this},o.prototype.setScaleX=function(t,e,i){return this.scale[0].set(t,e,i),this._finalScale[0]=t,this._final=a.call(this),this},o.prototype.setScaleY=function(t,e,i){return this.scale[1].set(t,e,i),this._finalScale[1]=t,this._final=a.call(this),this},o.prototype.setScaleZ=function(t,e,i){return this.scale[2].set(t,e,i),this._finalScale[2]=t,this._final=a.call(this),this},o.prototype.setRotate=function(t,e,i){for(var n=l(t,"number"),r=i?ft.after(n,i):null,s=0;s<t.length;s+=1)"number"==typeof t[s]&&(this.rotate[s].set(t[s],e,r),this._finalRotate[s]=t[s]);return this._final=a.call(this),this},o.prototype.setRotateX=function(t,e,i){return this.rotate[0].set(t,e,i),this._finalRotate[0]=t,this._final=a.call(this),this},o.prototype.setRotateY=function(t,e,i){return this.rotate[1].set(t,e,i),this._finalRotate[1]=t,this._final=a.call(this),this},o.prototype.setRotateZ=function(t,e,i){return this.rotate[2].set(t,e,i),this._finalRotate[2]=t,this._final=a.call(this),this},o.prototype.setSkew=function(t,e,i){for(var n=l(t,"number"),r=i?ft.after(n,i):null,s=0;s<t.length;s+=1)"number"==typeof t[s]&&(this.skew[s].set(t[s],e,r),this._finalSkew[s]=t[s]);return this._final=a.call(this),this},o.prototype.setSkewX=function(t,e,i){return this.skew[0].set(t,e,i),this._finalSkew[0]=t,this._final=a.call(this),this},o.prototype.setSkewY=function(t,e,i){return this.skew[1].set(t,e,i),this._finalSkew[1]=t,this._final=a.call(this),this},o.prototype.setSkewZ=function(t,e,i){return this.skew[2].set(t,e,i),this._finalSkew[2]=t,this._final=a.call(this),this},o.prototype.set=function(t,e,i){var n=ct.interpret(t);this._finalTranslate=n.translate,this._finalRotate=n.rotate,this._finalSkew=n.skew,this._finalScale=n.scale,this._final=t;for(var r=i?ft.after(12,i):null,s=0;s<3;s+=1)this.translate[s].set(n.translate[s],e,r),this.rotate[s].set(n.rotate[s],e,r),this.skew[s].set(n.skew[s],e,r),this.scale[s].set(n.scale[s],e,r);return this},o.prototype.setDefaultTransition=function(t){for(var e=0;e<3;e+=1)this.translate[e].setDefault(t),this.rotate[e].setDefault(t),this.skew[e].setDefault(t),this.scale[e].setDefault(t)},o.prototype.get=function(){return this.isActive()?function(){return ct.build({translate:[this.translate[0].get(),this.translate[1].get(),this.translate[2].get()],rotate:[this.rotate[0].get(),this.rotate[1].get(),this.rotate[2].get()],skew:[this.skew[0].get(),this.skew[1].get(),this.skew[2].get()],scale:[this.scale[0].get(),this.scale[1].get(),this.scale[2].get()]})}.call(this):this._final},o.prototype.getFinal=function(){return this._final},o.prototype.isActive=function(){for(var t=!1,e=0;e<3;e+=1)if(this.translate[e].isActive()||this.rotate[e].isActive()||this.skew[e].isActive()||this.scale[e].isActive()){t=!0;break}return t},o.prototype.halt=function(){for(var t=this,e=0;e<3;e+=1)t.translate[e].halt(),t.rotate[e].halt(),t.skew[e].halt(),t.scale[e].halt(),t._finalTranslate[e]=t.translate[e].get(),t._finalRotate[e]=t.rotate[e].get(),t._finalSkew[e]=t.skew[e].get(),t._finalScale[e]=t.scale[e].get();return this._final=this.get(),this};var bt=o;u.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},u.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},u.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},u.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},u.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},u.prototype.proportionsFrom=function(t){return t instanceof Function?this._proportionGetter=t:t instanceof Object&&t.get?this._proportionGetter=t.get.bind(t):(this._proportionGetter=null,this._output.proportions=t),this},u.prototype.setTransform=function(t,e,i){return e||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new bt(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,e,i),this):this.transformFrom(t)},u.prototype.setOpacity=function(t,e,i){return e||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new gt(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,e,i)):this.opacityFrom(t)},u.prototype.setOrigin=function(t,e,i){return e||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new gt(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,e,i),this):this.originFrom(t)},u.prototype.setAlign=function(t,e,i){return e||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new gt(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,e,i),this):this.alignFrom(t)},u.prototype.setSize=function(t,e,i){return t&&(e||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new gt(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,e,i),this):this.sizeFrom(t)},u.prototype.setProportions=function(t,e,i){return t&&(e||this._legacyStates.proportions)?(this._legacyStates.proportions||(this._legacyStates.proportions=new gt(this._output.proportions||[0,0])),this._proportionGetter||this.proportionsFrom(this._legacyStates.proportions),this._legacyStates.proportions.set(t,e,i),this):this.proportionsFrom(t)},u.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._legacyStates.proportions&&this._legacyStates.proportions.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null},u.prototype.getTransform=function(){return this._transformGetter()},u.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},u.prototype.getOpacity=function(){return this._opacityGetter()},u.prototype.getOrigin=function(){return this._originGetter()},u.prototype.getAlign=function(){return this._alignGetter()},u.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},u.prototype.getProportions=function(){return this._proportionGetter?this._proportionGetter():this._output.proportions},u.prototype.modify=function(t){return function(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter()),this._proportionGetter&&(this._output.proportions=this._proportionGetter())}.call(this),this._output.target=t,this._output};var xt=u,wt=[],St={register:function(t){var e=wt.length;return f(e,t),e},unregister:function(t){f(t,null)},get:function(t){return wt[t]},set:f};p._instance=new p,p.parse=function(t,e){return p._instance.parse(t,e)},p.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,ct.identity),this.result},p.prototype.reset=function(){this.result={}};var Ct=[0,0];p.prototype._parseSpec=function(t,e,i){var n,r,s,o,a,l,h;if("number"==typeof t){if(n=t,s=e.transform,l=e.align||Ct,e.size&&l&&(l[0]||l[1])){var c=[l[0]*e.size[0],l[1]*e.size[1],0];s=ct.thenMove(s,d(c,i))}this.result[n]={transform:s,opacity:e.opacity,origin:e.origin||Ct,align:e.align||Ct,size:e.size}}else{if(!t)return;if(t instanceof Array)for(var u=0;u<t.length;u++)this._parseSpec(t[u],e,i);else{r=t.target,s=e.transform,o=e.opacity,a=e.origin,l=e.align,h=e.size;var f=i;if(void 0!==t.opacity&&(o=e.opacity*t.opacity),t.transform&&(s=ct.multiply(e.transform,t.transform)),t.origin&&(a=t.origin,f=e.transform),t.align&&(l=t.align),t.size||t.proportions){var p=h;h=[h[0],h[1]],t.size&&(void 0!==t.size[0]&&(h[0]=t.size[0]),void 0!==t.size[1]&&(h[1]=t.size[1])),t.proportions&&(void 0!==t.proportions[0]&&(h[0]*=t.proportions[0]),void 0!==t.proportions[1]&&(h[1]*=t.proportions[1])),p&&(l&&(l[0]||l[1])&&(s=ct.thenMove(s,d([l[0]*p[0],l[1]*p[1],0],i))),a&&(a[0]||a[1])&&(s=ct.moveThen([-a[0]*h[0],-a[1]*h[1],0],s))),f=e.transform,l=a=null}this._parseSpec(r,{transform:s,opacity:o,origin:a,align:l,size:h},f)}}};var Ot=p;_.prototype.add=function(t){var e=t instanceof _?t:new _(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._hasMultipleChildren=!0,this._childResult=[]):this._child=e,e},_.prototype.get=function(){return this._object||(!this._hasMultipleChildren&&this._child?this._child.get():null)},_.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=!!t.render,this._isModifier=!!t.modify,this._object=t,this._child=null,t instanceof _?t:this},_.prototype.getSize=function(){var t=null,e=this.get();return e&&e.getSize&&(t=e.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},_.prototype.commit=function(t){for(var e,i=Object.keys(this._prevResults),n=0;n<i.length;n++)if(e=i[n],void 0===this._resultCache[e]){var r=St.get(e);r.cleanup&&r.cleanup(t.allocator)}this._prevResults=this._resultCache,this._resultCache={},function t(e,i,n){for(var r=Ot.parse(e,i),s=Object.keys(r),o=0;o<s.length;o++){var a=s[o],l=St.get(a),h=r[a];h.allocator=i.allocator;var c=l.commit(h);c?t(c,i,n):n[a]=h}}(this.render(),t,this._resultCache)},_.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var e=this._child,i=0;i<e.length;i++)t[i]=e[i].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t};var Et=_;m.prototype.emit=function(t,e){var i=this.listeners[t];if(i)for(var n=0;n<i.length;n++)i[n].call(this._owner,e);return this},m.prototype.addListener=m.prototype.on=function(t,e){return t in this.listeners||(this.listeners[t]=[]),this.listeners[t].indexOf(e)<0&&this.listeners[t].push(e),this},m.prototype.removeListener=function(t,e){var i=this.listeners[t];if(void 0!==i){var n=i.indexOf(e);0<=n&&i.splice(n,1)}return this},m.prototype.bindThis=function(t){this._owner=t};var kt=m;((g.prototype=Object.create(kt.prototype)).constructor=g).setInputHandler=function(t,e){t.trigger=e.trigger.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},g.setOutputHandler=function(t,e){e instanceof g&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.addListener=t.on,t.removeListener=e.removeListener.bind(e)},g.prototype.trigger=g.prototype.emit=function(t,e){kt.prototype.emit.apply(this,arguments);var i=0;for(i=0;i<this.downstream.length;i++)this.downstream[i].trigger&&this.downstream[i].trigger(t,e);for(i=0;i<this.downstreamFn.length;i++)this.downstreamFn[i](t,e);return this},g.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream;return e.indexOf(t)<0&&e.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},g.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return!!(0<=i)&&(e.splice(i,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t)},g.prototype.addListener=g.prototype.on=function(t){if(kt.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var e=this.trigger.bind(this,t);this.upstreamListeners[t]=e;for(var i=0;i<this.upstream.length;i++)this.upstream[i].on(t,e)}return this},g.prototype.subscribe=function(t){if(this.upstream.indexOf(t)<0)for(var e in this.upstream.push(t),this.upstreamListeners)t.on(e,this.upstreamListeners[e]);return this},g.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(0<=e)for(var i in this.upstream.splice(e,1),this.upstreamListeners)t.removeListener(i,this.upstreamListeners[i]);return this};var Tt=g;w.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.firstChild);this.container=t}},w.prototype.allocate=function(t){(t=t.toLowerCase())in this.detachedNodes||(this.detachedNodes[t]=[]);var e,i=this.detachedNodes[t];return 0<i.length?e=i.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},w.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase();this.detachedNodes[e].push(t),this.nodeCount--},w.prototype.getNodeCount=function(){return this.nodeCount};var Pt=w,At=[0,0],Rt=!("perspective"in document.documentElement.style)?function(t,e){t.style.webkitPerspective=e?e.toFixed()+"px":""}:function(t,e){t.style.perspective=e?e.toFixed()+"px":""};C.prototype.getAllocator=function(){return this._allocator},C.prototype.add=function(t){return this._node.add(t)},C.prototype.migrate=function(t){t===this.container||(this.container=t,this._allocator.migrate(t))},C.prototype.getSize=function(){return this._size},C.prototype.setSize=function(t){t=t||S.call(this),this._size[0]=t[0],this._size[1]=t[1]},C.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var e=this._perspectiveState.get();e!==this._perspective&&(Rt(this.container,e),this._perspective=e),this._node.commit(this._nodeContext)},C.prototype.getPerspective=function(){return this._perspectiveState.get()},C.prototype.setPerspective=function(t,e,i){return this._perspectiveState.set(t,e,i)},C.prototype.emit=function(t,e){return this._eventOutput.emit(t,e)},C.prototype.on=function(t,e){return this._eventOutput.on(t,e)},C.prototype.removeListener=function(t,e){return this._eventOutput.removeListener(t,e)},C.prototype.pipe=function(t){return this._eventOutput.pipe(t)},C.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},O.patch=function(t){for(var e=arguments,i=new O(t),n=1;n<arguments.length;n++)i.patch(e[n]);return t},O.prototype.setOptions=O.prototype.patch=function(){for(var t,e=arguments,i=this,n=this._value,r=0;r<arguments.length;r++)for(var s in t=e[r])s in n&&t[s]&&t[s].constructor===Object&&n[s]&&n[s].constructor===Object?(n.hasOwnProperty(s)||(n[s]=Object.create(n[s])),i.key(s).patch(t[s]),i.eventOutput&&i.eventOutput.emit("change",{id:s,value:i.key(s).value()})):i.set(s,t[s]);return this},O.prototype.key=function(t){var e=new O(this._value[t]);return e._value instanceof Object&&!(e._value instanceof Array)||(e._value={}),e},O.prototype.getOptions=O.prototype.get=function(t){return t?this._value[t]:this._value},O.prototype.set=function(t,e){var i=this.get(t);return this._value[t]=e,this.eventOutput&&e!==i&&this.eventOutput.emit("change",{id:t,value:e}),this},O.prototype.on=function(){return E.call(this),this.on.apply(this,arguments)},O.prototype.removeListener=function(){return E.call(this),this.removeListener.apply(this,arguments)},O.prototype.pipe=function(){return E.call(this),this.pipe.apply(this,arguments)},O.prototype.unpipe=function(){return E.call(this),this.unpipe.apply(this,arguments)};var Wt,Xt,Yt=O,qt={},Zt=[],Qt=[],Kt=0,Jt=[],$t=Date.now(),te=!0,ee={},ie=new Tt,ne={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0,appMode:!0},re=new Yt(ne);qt.step=function(){++Kt;var t=Date.now();if(!(Xt&&t-$t<Xt)){var e=0;Wt=t-$t,$t=t,ie.emit("prerender");for(var i=Qt.length;i--;)Qt.shift()(Kt);for(;Jt.length&&Date.now()-t<10;)Jt.shift().call(this);for(e=0;e<Zt.length;e++)Zt[e].update();ie.emit("postrender")}},window.requestAnimationFrame(k),window.addEventListener("resize",T,!1),T(),qt.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(qt):ie.pipe(t)},qt.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(qt):ie.unpipe(t)},qt.on=function(t,e){return t in ee||(ee[t]=ie.emit.bind(ie,t),function(t,e){document.body?document.body.addEventListener(t,e):qt.nextTick(addEventListener.bind(this,t,e))}(t,ee[t])),ie.on(t,e)},qt.emit=function(t,e){return ie.emit(t,e)},qt.removeListener=function(t,e){return ie.removeListener(t,e)},qt.getFPS=function(){return 1e3/Wt},qt.setFPSCap=function(t){Xt=jt(1e3/t)},qt.getOptions=function(t){return re.getOptions(t)},qt.setOptions=function(){return re.setOptions.apply(re,arguments)},qt.createContext=function(t){ne.appMode&&qt.nextTick(P);var e=!1;t||((t=document.createElement(ne.containerType)).classList.add(ne.containerClass),e=!0);var i=new C(t);return qt.registerContext(i),e&&function t(e,i){return document.body?(document.body.appendChild(i),void e.emit("resize")):void qt.nextTick(t.bind(this,e,i))}(i,t),i},qt.registerContext=function(t){return Zt.push(t),t},qt.getContexts=function(){return Zt},qt.deregisterContext=function(t){var e=Zt.indexOf(t);0<=e&&Zt.splice(e,1)},qt.nextTick=function(t){Qt.push(t)},qt.defer=function(t){Jt.push(t)},re.on("change",function(t){"fpsCap"===t.id?qt.setFPSCap(t.value):"runLoop"===t.id&&!te&&t.value&&(te=!0,window.requestAnimationFrame(k))});var se=Object.freeze({contextWithPerspective:function(t){var e=qt.createContext();return e.setPerspective(t),e},simpleExtend:R});!function(){}.name&&Object.defineProperty(Function.prototype,"name",{get:function(){var t=this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];return Object.defineProperty(this,"name",{value:t}),t}});var oe,ae=function(e){function t(t){e.call(this),this._={options:{},defaultOptions:{}},R(this._.defaultOptions,{align:[.5,.5],origin:[.5,.5],transform:new bt,handler:new Tt}),this.options=t}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={options:{},transform:{}};return i.options.set=function(t){this.resetOptions(),this.setOptions(t)},i.options.get=function(){return this._.options},i.transform.set=function(t){this.setOptions({transform:t})},i.transform.get=function(){return this.options.transform},t.prototype.setOptions=function(t){for(var e in void 0!==t&&"Object"==t.constructor.name||(t={}),t)xt.prototype[e+"From"]&&this.modifier[e+"From"](t[e]),this._.options[e]=t[e]},t.prototype.resetOptions=function(){this.modifier=new xt,this.set(this.modifier),this.setOptions(this._.defaultOptions)},t.prototype.pipe=function(){var t=Array.prototype.splice.call(arguments,0);return this.options.handler.pipe.apply(this.options.handler,t)},t.prototype.unpipe=function(){var t=Array.prototype.splice.call(arguments,0);return this.options.handler.unpipe.apply(this.options.handler,t)},t.prototype.on=function(){var t=Array.prototype.splice.call(arguments,0);return this.options.handler.on.apply(this.options.handler,t)},t.prototype.off=function(){var t=Array.prototype.splice.call(arguments,0);return this.options.handler.on.apply(this.options.handler,t)},Object.defineProperties(t.prototype,i),t}(Et),le="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window,he=M(F(function(t,e){function i(t,e){for(var i=0;i<t;i+=1)e(i)}e.forLength=i,e.default=i,e.__esModule=!0})),ce=((oe=ae)&&(pe.__proto__=oe),((pe.prototype=Object.create(oe&&oe.prototype)).constructor=pe).prototype._createGridCell=function(t){var e=t%this.columns,i=jt(t/this.columns),n=null;void 0!==this.options.size[0]&&void 0!==this.options.size[1]&&((n=[])[0]=this.options.size[0]/this.columns,n[1]=this.options.size[1]/this.rows);var r=new xt({align:[0,0],origin:[0,0],size:n?[n[0],n[1]]:[void 0,void 0],transform:ct.translate(e*n[0],i*n[1],0)}),s=new xt({align:[.5,.5],origin:[.5,.5]});this.cellNodes.push(this.add(r).add(s))},pe.prototype.setChildren=function(e){return he(this.columns*this.rows,function(t){this.cellNodes[t].add(e[t])}.bind(this)),this},pe),ue=!("transform"in document.documentElement.style),fe=window.devicePixelRatio||1;function pe(t,e,i){oe.call(this,{size:i}),this.columns=t,this.rows=e,this.cellNodes=[],void 0===this.options.size&&this.setOptions({size:[void 0,void 0]}),he(this.columns*this.rows,this._createGridCell.bind(this))}L.prototype.on=function(t,e){this._element&&this._element.addEventListener(t,this.eventForwarder),this._eventOutput.on(t,e)},L.prototype.removeListener=function(t,e){this._eventOutput.removeListener(t,e)},L.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var i=this._eventOutput.emit(t,e);return i&&e&&e.stopPropagation&&e.stopPropagation(),i},L.prototype.pipe=function(t){return this._eventOutput.pipe(t)},L.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},L.prototype.render=function(){return this.id};var de=ue?function(t,e){t.style.webkitTransform=z(e)}:function(t,e){t.style.transform=z(e)},_e=ue?function(t,e){t.style.webkitTransformOrigin=j(e)}:function(t,e){t.style.transformOrigin=j(e)},me=ue?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0};L.prototype.commit=function(t){var e,i,n=this._element;if(n){var r=t.transform,s=t.opacity,o=t.origin;t.size;if(!r&&this._matrix)return this._matrix=null,this._opacity=0,void me(n);if(e=this._origin,i=o,(e&&i?e[0]!==i[0]||e[1]!==i[1]:e!==i)&&(this._originDirty=!0),ct.notEquals(this._matrix,r)&&(this._transformDirty=!0),this._invisible&&(this._invisible=!1,this._element.style.display=""),this._opacity!==s&&(this._opacity=s,n.style.opacity=1<=s?"0.999999":s),this._transformDirty||this._originDirty||this._sizeDirty){this._sizeDirty&&(this._sizeDirty=!1),this._originDirty&&(o?(this._origin||(this._origin=[0,0]),this._origin[0]=o[0],this._origin[1]=o[1]):this._origin=null,_e(n,this._origin),this._originDirty=!1),r=r||ct.identity,this._matrix=r;var a=this._size?ct.thenMove(r,[-this._size[0]*o[0],-this._size[1]*o[1],0]):r;de(n,a),this._transformDirty=!1}}},L.prototype.cleanup=function(){this._element&&(this._invisible=!0,this._element.style.display="none")},L.prototype.attach=function(t){this._element=t,function(t){for(var e in this._eventOutput.listeners)t.addEventListener(e,this.eventForwarder)}.call(this,t)},L.prototype.detach=function(){var t=this._element;return t&&(function(t){for(var e in this._eventOutput.listeners)t.removeEventListener(e,this.eventForwarder)}.call(this,t),this._invisible&&(this._invisible=!1,this._element.style.display="")),this._element=null,t};var ge=L;((N.prototype=Object.create(ge.prototype)).constructor=N).prototype.elementType="div",N.prototype.elementClass="famous-surface",N.prototype.setAttributes=function(t){for(var e in t){if("style"==e)throw new Error('Cannot set styles via "setAttributes" as it will break Famo.us.  Use "setProperties" instead.');this.attributes[e]=t[e]}this._attributesDirty=!0},N.prototype.getAttributes=function(){return this.attributes},N.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];return this._stylesDirty=!0,this},N.prototype.getProperties=function(){return this.properties},N.prototype.addClass=function(t){return this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0),this},N.prototype.removeClass=function(t){var e=this.classList.indexOf(t);return 0<=e&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0),this},N.prototype.toggleClass=function(t){return 0<=this.classList.indexOf(t)?this.removeClass(t):this.addClass(t),this},N.prototype.setClasses=function(t){var e=0,i=[];for(e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&i.push(this.classList[e]);for(e=0;e<i.length;e++)this.removeClass(i[e]);for(e=0;e<t.length;e++)this.addClass(t[e]);return this},N.prototype.getClassList=function(){return this.classList},N.prototype.setContent=function(t){return this.content!==t&&(this.content=t,this._contentDirty=!0),this},N.prototype.getContent=function(){return this.content},N.prototype.setOptions=function(t){return t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.attributes&&this.setAttributes(t.attributes),t.content&&this.setContent(t.content),this},N.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var i=0;i<this.elementClass.length;i++)e.classList.add(this.elementClass[i]);else e.classList.add(this.elementClass);e.style.display="",this.attach(e),this._opacity=null,this._currentTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._originDirty=!0,this._transformDirty=!0},N.prototype.commit=function(t){this._currentTarget||this.setup(t.allocator);var e,i,n=this._currentTarget,r=t.size;if(this._classesDirty){U.call(this,n);for(var s=this.getClassList(),o=0;o<s.length;o++)n.classList.add(s[o]);this._classesDirty=!1,this._trueSizeCheck=!0}if(this._stylesDirty&&(function(t){for(var e in this.properties)t.style[e]=this.properties[e]}.call(this,n),this._stylesDirty=!1,this._trueSizeCheck=!0),this._attributesDirty&&(function(t){for(var e in this.attributes)t.setAttribute(e,this.attributes[e])}.call(this,n),this._attributesDirty=!1,this._trueSizeCheck=!0),this.size){var a=t.size;if(void 0===(r=[this.size[0],this.size[1]])[0]&&(r[0]=a[0]),void 0===r[1]&&(r[1]=a[1]),!0===r[0]||!0===r[1]){if(!0===r[0])if(this._trueSizeCheck||0===this._size[0]){var l=n.offsetWidth;this._size&&this._size[0]!==l&&(this._size[0]=l,this._sizeDirty=!0),r[0]=l}else this._size&&(r[0]=this._size[0]);if(!0===r[1])if(this._trueSizeCheck||0===this._size[1]){var h=n.offsetHeight;this._size&&this._size[1]!==h&&(this._size[1]=h,this._sizeDirty=!0),r[1]=h}else this._size&&(r[1]=this._size[1]);this._trueSizeCheck=!1}}e=this._size,i=r,(e&&i?e[0]!==i[0]||e[1]!==i[1]:e!==i)&&(this._size||(this._size=[0,0]),this._size[0]=r[0],this._size[1]=r[1],this._sizeDirty=!0),this._sizeDirty&&(this._size&&(n.style.width=this.size&&!0===this.size[0]?"":this._size[0]+"px",n.style.height=this.size&&!0===this.size[1]?"":this._size[1]+"px"),this._eventOutput.emit("resize")),this._contentDirty&&(this.deploy(n),this._eventOutput.emit("deploy"),this._contentDirty=!1,this._trueSizeCheck=!0),ge.prototype.commit.call(this,t)},N.prototype.cleanup=function(t){var e=0,i=this._currentTarget;this._eventOutput.emit("recall"),this.recall(i),i.style.display="none",i.style.opacity="",i.style.width="",i.style.height="",function(t){for(var e in this.properties)t.style[e]=""}.call(this,i),function(t){for(var e in this.attributes)t.removeAttribute(e)}.call(this,i);var n=this.getClassList();for(U.call(this,i),e=0;e<n.length;e++)i.classList.remove(n[e]);if(this.elementClass)if(this.elementClass instanceof Array)for(e=0;e<this.elementClass.length;e++)i.classList.remove(this.elementClass[e]);else i.classList.remove(this.elementClass);this.detach(i),this._currentTarget=null,t.deallocate(i)},N.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},N.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},N.prototype.getSize=function(){return this._size?this._size:this.size},N.prototype.setSize=function(t){return this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0,this};var ye,ve,be,xe=N,we=((be=ae)&&(ri.__proto__=be),((ri.prototype=Object.create(be&&be.prototype)).constructor=ri).prototype.getContent=function(){var t=Array.prototype.splice.call(arguments,0);return this.surface.getContent.apply(this.surface,t)},ri.prototype.setContent=function(){var t=Array.prototype.splice.call(arguments,0);return this.surface.setContent.apply(this.surface,t)},ri),Se=((ve=ae)&&(ni.__proto__=ve),((ni.prototype=Object.create(ve&&ve.prototype)).constructor=ni).prototype.getContent=function(){return[this.plane1.getContent(),this.plane2.getContent()]},ni.prototype.setContent=function(t){this.plane1.setContent(t[0]),this.plane2.setContent(t[1])},ni),Ce=((ye=ae)&&(ii.__proto__=ye),((ii.prototype=Object.create(ye&&ye.prototype)).constructor=ii).prototype._createGrid=function(){var t=new ce(this.columnsRows[0],this.columnsRows[1],this.options.size);he(this.columnsRows[0]*this.columnsRows[1],function(){var t=new Se({properties:{background:"teal"}});this.planes.push(t)}.bind(this)),t.setChildren(this.planes),this.add(t)},ii.prototype._initializeTransitions=function(){this.transitions={flipDiagonal:function(){this.flipSide=+!this.flipSide;var i,n=0;this.columnsRows.forEach(function(t,e){t<this.columnsRows[n]&&(n=e)}.bind(this)),i=+!n,he(this.columnsRows[0]+this.columnsRows[1]-1,function(e){he(this.columnsRows[n],function(t){0<=e-t&&e-t<this.columnsRows[i]&&function(t,e){void 0===t.__targetRotation&&(t.__targetRotation=new gt(0));var i=new gt(t.__targetRotation.get());t.__targetRotation.set(t.__targetRotation.get()+Ut),t.children[0].get().transformFrom(function(){return ct.rotateY(i.get())}),t.children[1].get().transformFrom(function(){return ct.rotateY(i.get()+Ut)}),setTimeout(function(){i.set(t.__targetRotation.get(),{duration:2e3,curve:vt.outExpo})},0+50*e)}(this.planes[e-t+this.columnsRows[i]*t],e)}.bind(this))}.bind(this))}.bind(this)}},ii),Oe=F(function(t,e){function l(t,e){for(var i="",n=0;n<t;n++)i+="  ";return i+e}Object.defineProperty(e,"__esModule",{value:!0}),e.clone=function(t){return s(r(t))},e.isEmptyObject=function(t){for(var e in t)return!1;return!0},e.toCSS=function(t,e){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=i.indentationLevel||0,r="";for(var s in!1!==i.selector&&(r+=l(n,t+" {"),n++),e){var o=e[s];if(Array.isArray(o))for(var a=0;a<o.length;a++)r+="\n"+l(n,s+": "+o[a]+";");else r+="\n"+l(n,s+": "+o+";")}return!1!==i.selector&&(r+="\n"+l(--n,"}")),r};var i,n,r=JSON.stringify,s=JSON.parse;e.uid=function(){var t="undefined"==typeof window?le:window,e="__JSS_VERSION_COUNTER__";null==t[e]&&(t[e]=0);var i=t[e]++,n=0;return{get:function(){return"jss-"+i+"-"+n++},reset:function(){n=0}}}(),e.findClassNames=(i=/[.]/g,n=/[.][^ ,]+/g,function(t){var e=t.match(n);return e?e.join(" ").replace(i,""):""})}),Ee=F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},n=(function(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}(r,[{key:"prop",value:function(t,e){var i=this.options.Renderer.style;return null==e?(this.renderable&&null==this.style[t]&&(this.style[t]=i(this.renderable,t)),this.style[t]):(this.style[t]=e,this.renderable&&i(this.renderable,t,e),this)}},{key:"applyTo",value:function(t){for(var e in this.style){var i=this.style[e],n=this.options.Renderer.style;if(Array.isArray(i))for(var r=0;r<i.length;r++)n(t,e,i[r]);else n(t,e,i)}return this}},{key:"toJSON",value:function(){var t=Object.create(null);for(var e in this.style)"object"!=i(this.style[e])&&(t[e]=this.style[e]);return t}},{key:"toString",value:function(t){return(0,Oe.toCSS)(this.selector,this.style,t)}},{key:"selector",set:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options,i=e.Renderer,n=e.sheet;if(n&&n.unregisterRule(this),this.selectorText=t,this.className=(0,Oe.findClassNames)(t),this.renderable)return i.setSelector(this.renderable,t)?void n.registerRule(this):(delete this.renderable,void n.registerRule(this).deploy().link());n&&n.registerRule(this)},get:function(){return this.renderable?this.options.Renderer.getSelector(this.renderable):this.selectorText}}]),r);function r(t,e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,r),this.id=Oe.uid.get(),this.type="regular",this.options=i,this.selectorText=t||"",this.className=i.className||"",this.originalStyle=e,this.style=(0,Oe.clone)(e),i.named&&(this.name=t,this.className||(this.className=this.name?this.name+"--"+this.id:this.id),this.selectorText="."+this.className)}function s(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}e.default=n}),ke=F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}(n,[{key:"toString",value:function(){if(Array.isArray(this.value)){for(var t="",e=0;e<this.value.length;e++)t+=this.name+" "+this.value[e]+";",this.value[e+1]&&(t+="\n");return t}return this.name+" "+this.value+";"}}]),n);function n(t,e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.id=Oe.uid.get(),this.type="simple",this.name=t,this.value=e,this.options=i}function r(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}e.default=i}),Te=F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e,i=arguments,n=1;n<arguments.length;n++)for(var r in e=i[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i=(function(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}(n,[{key:"formatFrames",value:function(t){var e=Object.create(null);for(var i in t){var n=r({},this.options,{named:!1,parent:this});e[i]=this.options.jss.createRule(i,t[i],n)}return e}},{key:"toString",value:function(){var t=this.selector+" {\n",e={indentationLevel:1};for(var i in this.frames)t+=this.frames[i].toString(e)+"\n";return t+="}"}}]),n);function n(t,e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.id=Oe.uid.get(),this.type="keyframe",this.selector=t,this.options=i,this.frames=this.formatFrames(e)}function s(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}e.default=i}),Pe=F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var h=Object.assign||function(t){for(var e,i=arguments,n=1;n<arguments.length;n++)for(var r in e=i[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i=(function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}(r,[{key:"createRule",value:function(t,e,i){var n=h({},this.options,{parent:this}),r=n.sheet,s=n.jss,o=r&&r.getRule(t),a=o?o.className:null;(a||i)&&(n=h({},n,{className:a},i));var l=(r||s).createRule(t,e,n);return this.rules[t]=l}},{key:"toString",value:function(){var t=this.selector+" {\n";for(var e in this.rules){var i=this.rules[e];i.style&&(0,Oe.isEmptyObject)(i.style)||(t+=i.toString({indentationLevel:1})+"\n")}return t+="}"}}]),r);function r(t,e,i){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=Oe.uid.get(),this.type="conditional",this.selector=t,this.options=i,this.rules=Object.create(null),e)this.createRule(n,e[n])}function n(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}e.default=i}),Ae=F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}(n,[{key:"toString",value:function(t){if(Array.isArray(this.style)){for(var e="",i=0;i<this.style.length;i++)e+=(0,Oe.toCSS)(this.selector,this.style[i],t),this.style[i+1]&&(e+="\n");return e}return(0,Oe.toCSS)(this.selector,this.style,t)}}]),n);function n(t,e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.id=Oe.uid.get(),this.type="font-face",this.options=i,this.selector=t,this.style=e}function r(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}e.default=i}),Re=F(function(t,e){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(t&&"@"===t[0]){var n=h.exec(t)[0];return new l[n](t,e,i)}return null==i.named&&(i.named=!0),new r.default(t,e,i)};var r=i(Ee),n=i(ke),s=i(Te),o=i(Pe),a=i(Ae),l={"@charset":n.default,"@import":n.default,"@namespace":n.default,"@keyframes":s.default,"@media":o.default,"@supports":o.default,"@font-face":a.default},h=/^@[^ ]+/}),Me=F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t},n=(i(r,null,[{key:"style",value:function(t,e,i){try{if(null==i)return t.style[e];t.style[e]=i}catch(t){return!1}return!0}},{key:"setSelector",value:function(t,e){return t.selectorText=e,t.selectorText===e}},{key:"getSelector",value:function(t){return t.selectorText}}]),i(r,[{key:"attach",value:function(){this.element.parendNode||this.head.appendChild(this.element)}},{key:"detach",value:function(){this.element.parentNode.removeChild(this.element)}},{key:"deploy",value:function(t){var e="\n"+t.toString()+"\n";"sheet"in this.element?this.element.innerHTML=e:"styleSheet"in this.element&&(this.element.styleSheet.cssText=e)}},{key:"insertRule",value:function(t){var e=this.element.sheet||this.element.styleSheet,i=e.cssRules||e.rules,n=i.length;return e.insertRule?e.insertRule(t.toString(),n):e.addRule(t.selector,t.toString({selector:!1}),n),i[n]}},{key:"getRules",value:function(){for(var t,e=this.element.sheet||this.element.styleSheet,i=e.rules||e.cssRules,n=Object.create(null),r=0;r<i.length;r++)n[(t=i[r]).selectorText]=t;return n}}]),r);function r(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,r),this.head=document.head||document.getElementsByTagName("head")[0],this.element=t.element||document.createElement("style"),this.element.type="text/css",t.media&&this.element.setAttribute("media",t.media),t.meta&&this.element.setAttribute("data-meta",t.meta)}function s(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}e.default=n}),Fe=F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}(n,[{key:"attach",value:function(){}},{key:"detach",value:function(){}},{key:"deploy",value:function(){}},{key:"insertRule",value:function(){}},{key:"getRules",value:function(){return{}}}],[{key:"style",value:function(){}},{key:"setSelector",value:function(){}},{key:"getSelector",value:function(){}}]),n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}function r(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}e.default=i}),Le=F(function(t,e){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return t.Renderer?t.Renderer:t.virtual||"undefined"==typeof document?r.default:n.default};var n=i(Me),r=i(Fe)}),ze=F(function(t,e){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e,i=arguments,n=1;n<arguments.length;n++)for(var r in e=i[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n=function(t,e,i){return e&&h(t.prototype,e),i&&h(t,i),t},s=i(Re),o=i(Le),a=(n(l,[{key:"attach",value:function(){return this.attached||(this.deployed||this.deploy(),this.renderer.attach(),!this.linked&&this.options.link&&this.link(),this.attached=!0),this}},{key:"detach",value:function(){return this.attached&&(this.renderer.detach(),this.attached=!1),this}},{key:"addRule",value:function(t,e){var i=this.createRule(t,e);if(this.deployed){var n=this.renderer.insertRule(i);this.options.link&&(i.renderable=n)}return i}},{key:"addRules",value:function(t){var e=[];for(var i in t)e.push(this.addRule(i,t[i]));return e}},{key:"getRule",value:function(t){return this.rules[t]}},{key:"toString",value:function(t){var e=this.rules,i=Object.create(null),n="";for(var r in e){var s=e[r];i[s.id]||s.style&&(0,Oe.isEmptyObject)(s.style)||s.rules&&(0,Oe.isEmptyObject)(s.rules)||(n&&(n+="\n"),n+=s.toString(t),i[s.id]=!0)}return n}},{key:"createRule",value:function(t,e,i){null==(i=r({},i,{sheet:this,jss:this.options.jss,Renderer:this.options.Renderer})).named&&(i.named=this.options.named);var n=(0,s.default)(t,e,i);return this.registerRule(n),i.jss.plugins.run(n),n}},{key:"registerRule",value:function(t){return t.options.parent?t.name&&t.className&&(this.classes[t.name]=t.className):(t.name&&(this.rules[t.name]=t).className&&(this.classes[t.name]=t.className),t.selector&&(this.rules[t.selector]=t)),this}},{key:"unregisterRule",value:function(t){return t.options.parent||(delete this.rules[t.name],delete this.rules[t.selector]),delete this.classes[t.name],this}},{key:"deploy",value:function(){return this.renderer.deploy(this),this.deployed=!0,this}},{key:"link",value:function(){var t=this.renderer.getRules();for(var e in t){var i=this.rules[e];i&&(i.renderable=t[e])}return this.linked=!0,this}}]),l);function l(t,e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,l),this.options=r({},e),null==this.options.named&&(this.options.named=!0),this.rules=Object.create(null),this.classes=Object.create(null),this.attached=!1,this.deployed=!1;var i=(this.linked=!1,o.default)(this.options);for(var n in this.options.Renderer=i,this.renderer=new i(this.options),t)this.createRule(n,t[n])}function h(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}e.default=a}),je=F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}(n,[{key:"use",value:function(t){this.registry.push(t)}},{key:"run",value:function(t){for(var e=0;e<this.registry.length;e++)this.registry[e](t)}}]),n);function n(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.registry=[]}function r(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}e.default=i}),Ne=F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}(n,[{key:"add",value:function(t){this.registry.push(t)}},{key:"toString",value:function(e){return this.registry.map(function(t){return t.toString(e)}).join("\n")}}]),n);function n(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.registry=[]}function r(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}e.default=i}),Ue=F(function(t,e){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=Object.assign||function(t){for(var e,i=arguments,n=1;n<arguments.length;n++)for(var r in e=i[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n=function(t,e,i){return e&&p(t.prototype,e),i&&p(t,i),t},o=i(ze),a=i(je),l=i(Ne),h=i(Re),c=i(Le),u=(n(f,[{key:"create",value:function(){return new f}},{key:"createStyleSheet",value:function(t,e){var i=new o.default(t,s({},e,{jss:this}));return this.sheets.add(i),i}},{key:"createRule",value:function(t,e,i){"object"==(void 0===t?"undefined":r(t))&&(i=e,e=t,t=null);var n=(0,h.default)(t,e,s({},i,{jss:this,Renderer:(0,c.default)(i)}));return this.plugins.run(n),n}},{key:"use",value:function(){for(var t=arguments,e=this,i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=t[r];return n.forEach(function(t){return e.plugins.use(t)}),this}}]),f);function f(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,f),this.sheets=new l.default,this.plugins=new a.default,this.uid=Oe.uid,this.version="3.11.1"}function p(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}e.default=u}),De=M(F(function(t,e){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Rule=e.StyleSheet=e.Jss=void 0;var n=i(Ue),r=i(ze),s=i(Ee),o=new n.default;t.exports=e=o,e.Jss=n.default,e.StyleSheet=r.default,e.Rule=s.default,e.default=o})),Ie=M(F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var h=Object.assign||function(t){for(var e,i=arguments,n=1;n<arguments.length;n++)for(var r in e=i[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};e.default=function(){return function(t){if("regular"===t.type){var e,i=t.options,n=i.sheet,r=i.jss,s=i.parent,o=n||r;for(var a in s&&"conditional"===s.type&&(o=s),t.style)if("&"===a[0]){e=e||h({},t.options,{named:!1});var l=a.replace(c,t.selector);o.createRule(l,t.style[a],e),delete t.style[a]}}}};var c=/&/g})),Ge=M(F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return function(t){t.style&&t.style.extend&&(t.style=function t(e,i,n){if("string"==typeof n.extend){if(e.options&&e.options.sheet){var r=e.options.sheet.getRule(n.extend);r&&t(e,i,r.originalStyle)}}else if(Array.isArray(n.extend))for(var s=0;s<n.extend.length;s++)t(e,i,n.extend[s]);else for(var o in n.extend)"extend"==o?t(e,i,n.extend.extend):i[o]=n.extend[o];for(var a in n)"extend"!=a&&(i[a]=n[a]);return i}(t,{},t.style))}}})),Ve=M(F(function(t,e){e.__esModule=!0,e.default=function(){return function(t){var e=t.style;if(e)for(var i in e)n[i]||"number"!=typeof e[i]||(e[i]+="px")}};var n={"animation-iteration-count":!0,"box-ordinal-group":!0,"column-count":!0,"fill-opacity":!0,flex:!0,"flex-grow":!0,"flex-order":!0,"flex-shrink":!0,"font-weight":!0,"line-height":!0,opacity:!0,order:!0,orphans:!0,"stop-opacity":!0,"tab-size":1,widows:!0,"z-index":!0,zoom:!0};t.exports=e.default})),Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He="object"===("undefined"==typeof window?"undefined":Be(window))&&"object"===("undefined"==typeof document?"undefined":Be(document))&&9===document.nodeType,We=Object.freeze({isBrowser:He,default:He}),Xe=We&&He||We,Ye=F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i="",n="";if((Xe&&Xe.__esModule?Xe:{default:Xe}).default){var r={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},s=document.createElement("p").style;for(var o in r)if(o+"Transform"in s){n=r[i=o];break}}e.default={js:i,css:n}}),qe=F(function(t,e){function i(t,e){return e?e.toUpperCase():""}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.replace(n,i)};var n=/[-\s]+(.)?/g}),Ze=F(function(t,e){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return n?(null==a[t]&&(a[t]=(0,o.default)(t)in n.style?t:!!(s.default.js+(0,o.default)("-"+t)in n.style)&&s.default.css+t),a[t]):t};var n,r=i(Xe),s=i(Ye),o=i(qe),a={};if(r.default){n=document.createElement("p");var l=window.getComputedStyle(document.documentElement,"");for(var h in l)isNaN(h)||(a[l[h]]=l[h])}}),Qe=F(function(t,e){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!n)return e;if("string"!=typeof e||!isNaN(parseInt(e,10)))return e;var i=t+e;if(null!=o[i])return o[i];try{n.style[t]=e}catch(t){return o[i]=!1}return""===n.style[t]?("-ms-flex"===(e=s.default.css+e)&&(e="-ms-flexbox"),n.style[t]=e,""!==n.style[t]&&(o[i]=e)):o[i]=e,o[i]||(o[i]=!1),n.style[t]="",o[i]};var n,r=i(Xe),s=i(Ye),o={};r.default&&(n=document.createElement("p"))}),Ke=F(function(t,e){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.supportedValue=e.supportedProperty=e.prefix=void 0;var n=i(Ye),r=i(Ze),s=i(Qe);e.default={prefix:n.default,supportedProperty:r.default,supportedValue:s.default},e.prefix=n.default,e.supportedProperty=r.default,e.supportedValue=s.default}),Je=M(F(function(t,e){e.__esModule=!0,e.default=function(){return function(t){if("keyframe"!==t.type){if("regular"===t.type)for(var e in t.style){var i=t.style[e],n=!1,r=a.supportedProperty(e);r&&r!==e&&(n=!0);var s=!1,o=a.supportedValue(r,i);o&&o!==i&&(s=!0),(n||s)&&(n&&delete t.style[e],t.style[r||e]=o||i)}}else t.selector="@"+a.prefix.css+"keyframes"+t.selector.substr(10)}};var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(Ke);t.exports=e.default})),$e=M(F(function(t,e){function r(t){return"-"+t.toLowerCase()}function n(t){var e={};for(var i in t){var n=t[i];e[i=i.replace(s,r)]=n}return e}Object.defineProperty(e,"__esModule",{value:!0});var s=/([A-Z])/g;e.default=function(){return function(t){var e=t.style;if(e)if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]=n(e[i]);else t.style=n(e)}}})),ti=M(F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){function o(t,e){return t.length>e.length}return function(t){var e=t.style,i=t.type;if(e&&"regular"===i){var n={},r=Object.keys(e).sort(o);for(var s in r)n[r[s]]=e[r[s]];t.style=n}}}})),ei=De.create();function ii(t,e){ye.call(this,{size:t}),this.transition=e,this.flipSide=0,this.columnsRows=[7,6],this.planes=[],this._initializeTransitions(),this._createGrid(),setTimeout(function(){this.transitions[this.transition](),setInterval(this.transitions[this.transition],2e3)}.bind(this),800)}function ni(t){ve.call(this,t),this.children=[],this.plane1=new we(this.options),this.plane1.transform.set(ct.rotate(0,0,0)),this.setOptions({properties:{background:"orange"}}),this.plane2=new we(this.options),this.plane2.transform.set(ct.rotate(0,Math.PI,0)),this.children.push(this.plane1),this.children.push(this.plane2),this.add(this.plane2),this.add(this.plane1),this.plane1.pipe(this.options.handler),this.plane2.pipe(this.options.handler)}function ri(t){be.call(this,t),this.surface=new xe(this.options),this.add(this.surface),this.surface.pipe(this.options.handler)}ei.use(Ie()),ei.use(Ge()),ei.use(Ve()),ei.use(Je()),ei.use($e()),ei.use(ti());var si=Date.now;G.prototype.track=function(t){this.touchHistory[t.identifier]=[t]};var oi=G;V.DEFAULT_OPTIONS={direction:void 0,rails:!1,touchLimit:1,velocitySampleLength:10,scale:1},V.DIRECTION_X=0,V.DIRECTION_Y=1;var ai=8;V.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},V.prototype.getOptions=function(){return this.options},B.DIRECTION_X=0,B.DIRECTION_Y=1,B.DIRECTION_Z=2;var li={};B.register=function(t){for(var e in t)if(li[e]){if(li[e]!==t[e])throw new Error("Conflicting sync classes for key: "+e)}else li[e]=t[e]},B.prototype.setOptions=function(t){for(var e in this._syncs)this._syncs[e].setOptions(t)},B.prototype.pipeSync=function(t){var e=this._syncs[t];this._eventInput.pipe(e),e.pipe(this._eventOutput)},B.prototype.unpipeSync=function(t){var e=this._syncs[t];this._eventInput.unpipe(e),e.unpipe(this._eventOutput)},B.prototype.addSync=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)H.call(this,t[e]);else if(t instanceof Object)for(var i in t)H.call(this,i,t[i])};var hi,ci=B,ui=M(F(function(t,e){function i(t,e){var i=0;return function(){++i==t&&"function"==typeof e&&e.apply(this,arguments)}}e.callAfter=i,e.default=i,e.__esModule=!0})),fi=((hi=ae)&&(mi.__proto__=hi),((mi.prototype=Object.create(hi&&hi.prototype)).constructor=mi).prototype.setOptions=function(t){hi.prototype.setOptions.call(this,t)},mi.prototype.resetOptions=function(){hi.prototype.resetOptions.call(this)},mi.prototype._createComponents=function(){var e=this;this.touchSync=new ci(["touch"]),this.alignment="left"==this.options.menuSide?0:1,this.animationTransition=new gt(0),this.mainMol=new hi,this.menuMol=new hi({size:[this.options.menuWidth,void 0]}),this.menuMol.oldTransform=this.menuMol.transform,this.menuMol.transform=function(){var t=e.animationTransition.get();switch(e.options.animationType){case"foldDown":this.oldTransform.setTranslateX("left"==e.options.menuSide?t*(e.options.menuWidth-e.options.menuHintSize)-(e.options.menuWidth-e.options.menuHintSize):t*-(e.options.menuWidth-e.options.menuHintSize)+(e.options.menuWidth-e.options.menuHintSize));break;case"moveBack":this.oldTransform.setTranslateX("left"==e.options.menuSide?t*(e.options.menuWidth-e.options.menuHintSize)-(e.options.menuWidth-e.options.menuHintSize):t*-(e.options.menuWidth-e.options.menuHintSize)+(e.options.menuWidth-e.options.menuHintSize))}return this.oldTransform.get()}.bind(this.menuMol),this.menuContentMol=new hi,this.contentMol=new hi({size:[this.contentWidth,void 0]}),this.contentMol.oldTransform=this.contentMol.transform,this.contentMol.transform=function(){var t=e.animationTransition.get();switch(e.options.animationType){case"foldDown":this.oldTransform.setTranslateX("left"==e.options.menuSide?t*(e.options.menuWidth-e.options.menuHintSize)+e.options.menuHintSize:t*-(e.options.menuWidth-e.options.menuHintSize)-e.options.menuHintSize),this.oldTransform.setRotateY("left"==e.options.menuSide?t*Ut/8:t*-Ut/8);break;case"moveBack":this.oldTransform.setTranslateX("left"==e.options.menuSide?e.options.menuHintSize:-e.options.menuHintSize),this.oldTransform.setTranslateZ(-100*t)}return this.oldTransform.get()}.bind(this.contentMol),this.menuTouchPlane=new we({size:[this.options.menuWidth+this.options.pushAreaWidth-this.options.menuHintSize,void 0],properties:{zIndex:"-1000"}}),this.mainMol.setOptions({origin:[this.alignment,.5],align:[this.alignment,.5]}),this.menuMol.setOptions({origin:[this.alignment,.5],align:[this.alignment,.5]}),this.contentMol.setOptions({origin:[this.alignment,.5],align:[this.alignment,.5]}),this.menuTouchPlane.setOptions({origin:[this.alignment,.5],align:[this.alignment,.5]}),this.menuContentMol.transform.setTranslateZ(2),this.menuTouchPlane.transform.setTranslateZ(2),this.updateStyles=function(){var t,e;switch(this.options.animationType){case"foldDown":t=this.options.fadeStartColor,e=this.options.fadeEndColor;break;case"moveBack":t=e=this.options.fadeEndColor}var i={".infamous-fadeLeft":{background:[e,"-moz-linear-gradient(left, "+e+" 0%, "+t+" 100%)","-webkit-gradient(left top, right top, color-stop(0%, "+e+"), color-stop(100%, "+t+"))","-webkit-linear-gradient(left, "+e+" 0%, "+t+" 100%)","-o-linear-gradient(left, "+e+" 0%, "+t+" 100%)","-ms-linear-gradient(left, "+e+" 0%, "+t+" 100%)","linear-gradient(to right, "+e+" 0%, "+t+" 100%)"],filter:"progid:DXImageTransform.Microsoft.gradient( startColorstr='#cc000000', endColorstr='#4d000000', GradientType=1 )"},".infamous-fadeRight":{background:[t,"-moz-linear-gradient(left, "+t+" 0%, "+e+" 100%)","-webkit-gradient(left top, right top, color-stop(0%, "+t+"), color-stop(100%, "+e+"))","-webkit-linear-gradient(left, "+t+" 0%, "+e+" 100%)","-o-linear-gradient(left, "+t+" 0%, "+e+" 100%)","-ms-linear-gradient(left, "+t+" 0%, "+e+" 100%)","linear-gradient(to right, "+t+" 0%, "+e+" 100%)"],filter:"progid:DXImageTransform.Microsoft.gradient( startColorstr='#4d000000', endColorstr='#cc000000', GradientType=1 )"}};this.fadeStylesheet&&this.fadeStylesheet.detach(),this.fadeStylesheet=ei.createStyleSheet(i),this.fadeStylesheet.attach()},this.options.fade&&(this.updateStyles(),this.fadePlane=new we({size:[void 0,void 0],classes:["left"==this.options.menuSide?"infamous-fadeRight":"infamous-fadeLeft"],properties:{zIndex:"1000",pointerEvents:"none"}}),this.fadePlane.setOptions({origin:[this.alignment,.5],align:[this.alignment,.5]}),this.fadePlane.transform.setTranslateZ(1),this.fadePlane.setOptions({opacity:this.animationTransition}),this.contentMol.add(this.fadePlane)),this.add(this.mainMol),this.mainMol.add(this.contentMol),this.menuMol.add(this.menuTouchPlane),this.menuMol.add(this.menuContentMol),this.mainMol.add(this.menuMol)},mi.prototype._initializeEvents=function(){this.options.handler.on("update",function(t){this.isBeingDragged=!0,this._haltAnimation(!0);var e=this.animationTransition.get();switch(this.options.animationType){case"foldDown":this.animationTransition.set(e+t.delta[0]/(this.options.menuWidth-this.options.menuHintSize));break;case"moveBack":this.animationTransition.set(e+t.delta[0]/(this.options.menuWidth-this.options.menuHintSize))}1<(e=this.animationTransition.get())?this.animationTransition.set(1):e<0&&this.animationTransition.set(0)}.bind(this)),this.options.handler.on("end",function(){this.isBeingDragged=!1,this.animationTransition.get()<.5?this.closeMenu():this.openMenu()}.bind(this)),window.addEventListener("resize",function(){this.contentWidth=document.body.clientWidth-this.options.menuHintSize,this.contentMol.setOptions({size:[this.contentWidth,void 0]})}.bind(this)),this.menuTouchPlane.pipe(this.touchSync),this.menuTouchPlane.on("mouseenter",function(){this.isOpening||this.openMenu()}.bind(this)),this.menuTouchPlane.on("mouseleave",function(){this.isClosing||this.closeMenu()}.bind(this)),this.touchSync.pipe(this.options.handler)},mi.prototype.setContent=function(t){this.contentMol.add(t)},mi.prototype.setMenu=function(t){this.menuContentMol.add(t),t instanceof hi&&(t.pipe(this.touchSync),t.on("mouseenter",function(){this.isOpening||this.openMenu()}.bind(this)),t.on("mouseleave",function(){this.isClosing||this.closeMenu()}.bind(this)))},mi.prototype.openMenu=function(t,e){this._haltAnimation(e),this.isClosing=!1,this.isOpening=!0,this._animate("open",t)},mi.prototype.closeMenu=function(t,e){this._haltAnimation(e),this.isClosing=!0,this.isOpening=!1,this._animate("close",t)},mi.prototype.toggleMenu=function(t,e){this.isOpen||this.isOpening?this.closeMenu(t,e):this.isOpen&&!this.isClosing||this.openMenu(t,e)},mi.prototype._animate=function(t,e){this.isAnimating=!0,this.transitionCallback=e;var i,n=this;i=ui(1,function(){n.isAnimating=n.isOpening=n.isClosing=!1,n.isOpen="open"==t,"function"==typeof n.transitionCallback&&n.transitionCallback(),n.transitionCallback=void 0}.bind(n)),"open"==t?this.animationTransition.set(1,{duration:this.options.animationDuration,curve:vt.outExpo},i):"close"==t&&this.animationTransition.set(0,{duration:this.options.animationDuration,curve:vt.outExpo},i)},mi.prototype._haltAnimation=function(t){this.isAnimating&&(t||"function"!=typeof this.transitionCallback||this.transitionCallback(),this.transitionCallback=void 0,this.animationTransition.halt())},mi.prototype.render=function(){if(this.options.blur&&this.options.fade&&"moveBack"==this.options.animationType){var t=this.animationTransition.get()*this.options.blurRadius,e={"-webkit-filter":"blur("+t+"px)","-moz-filter":"blur("+t+"px)","-ms-filter":"blur("+t+"px)","-o-filter":"blur("+t+"px)",filter:"blur("+t+"px)"};this.contentMol._child[1].get()instanceof xe?this.contentMol.get().setProperties(e):this.contentMol._child[1]instanceof we&&this.contentMol._child[1].surface.setProperties(e)}return hi.prototype.render.call(this)},mi),pi=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],di=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],_i=null;function mi(t){hi.call(this,t),R(this._.defaultOptions,{menuSide:"left",menuWidth:200,menuHintSize:10,pushAreaWidth:40,animationDuration:1e3,animationType:"foldDown",fade:!0,fadeStartColor:"rgba(255,255,255,0)",fadeEndColor:"rgba(255,255,255,1)",blur:!1,blurRadius:5}),this.options=t,this.contentWidth=document.body.clientWidth-this.options.menuHintSize,this.isOpen=!1,this.isOpening=!1,this.isClosing=!1,this.isAnimating=!1,this.isBeingDragged=!1,this.transitionCallback=void 0,ci.register({touch:V}),this._createComponents(),this._initializeEvents()}q(),q();function gi(t){if(!vi){var e={};return(vi=new WeakMap).set(t,e),e}var i=vi.get(t);return void 0===i&&(i={},vi.set(t,i)),i}function yi(t,e,i,n){if(1===arguments.length){if(!("object"==typeof(r=t)&&"x"in r&&"y"in r&&"z"in r&&"w"in r))throw new TypeError("Expected an object with x, y, z, and w properties");gi(this).x=t.x,gi(this).y=t.y,gi(this).z=t.z,gi(this).w=t.w}else{if(4!==arguments.length)throw new TypeError("Expected 1 or 4 arguments");gi(this).x=t||0,gi(this).y=e||0,gi(this).z=i||0,gi(this).w=n||0}var r}var vi,bi=function(i){function o(t){var e=arguments.length;if(0===e)i.call(this,[1,0,0,1,0,0]);else{if(1!==e)throw new Error("Wrong number of arguments to DOMMatrix constructor.");if("string"==typeof t)throw new Error("CSS transformList arg not yet implemented.");t instanceof o?i.call(this,t._matrix):(t instanceof Float32Array||t instanceof Float64Array||t instanceof Array)&&i.call(this,t)}}i&&(o.__proto__=i);var t={a:{},b:{},c:{},d:{},e:{},f:{},m11:{},m12:{},m13:{},m14:{},m21:{},m22:{},m23:{},m24:{},m31:{},m32:{},m33:{},m34:{},m41:{},m42:{},m43:{},m44:{}};return((o.prototype=Object.create(i&&i.prototype)).constructor=o).prototype.multiplySelf=function(t){if(!(t instanceof o))throw new Error("The argument to multiplySelf must be an instance of DOMMatrix");return W(this,t,this),t.is2D||(this._is2D=!1),this},o.prototype.preMultiplySelf=function(t){if(!(t instanceof o))throw new Error("The argument to multiplySelf must be an instance of DOMMatrix");return W(t,this,this),t.is2D||(this._is2D=!1),this},o.prototype.translateSelf=function(t,e,i){if(void 0===i&&(i=0),1===arguments.length)throw new Error("The first two arguments (X and Y translation values) are required (the third, Z translation, is optional).");var n=new o([1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]);return this.multiplySelf(n),0!=i&&(this._is2D=!1),this},o.prototype.scaleSelf=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),this.translateSelf(e,i),this.multiplySelf(new o([t,0,0,t,0,0])),this.translateSelf(-e,-i),this},o.prototype.scale3dSelf=function(t,e,i,n){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.translateSelf(e,i,n),this.multiplySelf(new o([t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1])),this.translateSelf(-e,-i,-n),this},o.prototype.scaleNonUniformSelf=function(t,e,i,n,r,s){return void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),this.translateSelf(n,r,s),this.multiplySelf(new o([t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1])),this.translateSelf(-n,-r,-s),1===i&&0===s||(this._is2D=!1),this},o.prototype.rotateSelf=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.translateSelf(e,i);var n=[0,0,1],r=n[0],s=n[1],o=n[2];return this.rotateAxisAngleSelf(r,s,o,t),this.translateSelf(-e,-i),this},o.prototype.rotateFromVectorSelf=function(){throw new Error("rotateFromVectorSelf is not implemented yet.")},o.prototype.rotateAxisAngleSelf=function(t,e,i,n){var r=new o(Y(t,e,i,n));return this.multiplySelf(r),this},o.prototype.skewXSelf=function(){throw new Error("skewXSelf is not implemented yet.")},o.prototype.skewYSelf=function(){throw new Error("skewYSelf is not implemented yet.")},o.prototype.invertSelf=function(){throw new Error("invertSelf is not implemented yet.")},o.prototype.setMatrixValue=function(){throw new Error("setMatrixValue is not implemented yet.")},t.a.get=function(){return this.m11},t.b.get=function(){return this.m12},t.c.get=function(){return this.m21},t.d.get=function(){return this.m22},t.e.get=function(){return this.m41},t.f.get=function(){return this.m42},t.m11.get=function(){return this._matrix[0]},t.m12.get=function(){return this._matrix[4]},t.m13.get=function(){return this._matrix[8]},t.m14.get=function(){return this._matrix[12]},t.m21.get=function(){return this._matrix[1]},t.m22.get=function(){return this._matrix[5]},t.m23.get=function(){return this._matrix[9]},t.m24.get=function(){return this._matrix[13]},t.m31.get=function(){return this._matrix[2]},t.m32.get=function(){return this._matrix[6]},t.m33.get=function(){return this._matrix[10]},t.m34.get=function(){return this._matrix[14]},t.m41.get=function(){return this._matrix[3]},t.m42.get=function(){return this._matrix[7]},t.m43.get=function(){return this._matrix[11]},t.m44.get=function(){return this._matrix[15]},t.a.set=function(t){this.m11=t},t.b.set=function(t){this.m12=t},t.c.set=function(t){this.m21=t},t.d.set=function(t){this.m22=t},t.e.set=function(t){this.m41=t},t.f.set=function(t){this.m42=t},t.m11.set=function(t){this._matrix[0]=t},t.m12.set=function(t){this._matrix[4]=t},t.m13.set=function(t){this._matrix[8]=t},t.m14.set=function(t){this._matrix[12]=t},t.m21.set=function(t){this._matrix[1]=t},t.m22.set=function(t){this._matrix[5]=t},t.m23.set=function(t){this._matrix[9]=t},t.m24.set=function(t){this._matrix[13]=t},t.m31.set=function(t){this._matrix[2]=t},t.m32.set=function(t){this._matrix[6]=t},t.m33.set=function(t){this._matrix[10]=t},t.m34.set=function(t){this._matrix[14]=t},t.m41.set=function(t){this._matrix[3]=t},t.m42.set=function(t){this._matrix[7]=t},t.m43.set=function(t){this._matrix[11]=t},t.m44.set=function(t){this._matrix[15]=t},Object.defineProperties(o.prototype,t),o}(_i),xi={x:{},y:{},z:{},w:{}};xi.x.get=function(){return gi(this).x},xi.y.get=function(){return gi(this).y},xi.z.get=function(){return gi(this).z},xi.w.get=function(){return gi(this).w},yi.prototype.matrixTransform=function(){return new this.constructor(this)},yi.fromPoint=function(t){return new this(t)},Object.defineProperties(yi.prototype,xi);var wi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={x:{},y:{},z:{},w:{}};return i.x.set=function(t){gi(this).x=t},i.y.set=function(t){gi(this).y=t},i.z.set=function(t){gi(this).z=t},i.w.set=function(t){gi(this).w=t},Object.defineProperties(e.prototype,i),e}(yi),Si=null;"undefined"==typeof window?"undefined"!=typeof global&&(Si=global):Si=window,Si&&(Si.DOMMatrix=bi,Si.DOMMatrixReadOnly=_i,Si.DOMPoint=wi,Si.DOMPointReadOnly=yi);function Ci(t){var e,n=((e=t)&&(i.__proto__=e),((i.prototype=Object.create(e&&e.prototype)).constructor=i).prototype.on=function(t,e){if(this._eventMap||(this._eventMap=new Map),this._eventMap.has(t)||this._eventMap.set(t,[]),"function"!=typeof e)throw new Error("Expected a function in callback argument of Observable#on.");this._eventMap.get(t).push(e)},i.prototype.off=function(t,e){if(this._eventMap&&this._eventMap.has(t)){var i=this._eventMap.get(t);-1===i.indexOf(e)||(i.splice(i.indexOf(e),1),0===i.length&&this._eventMap.delete(t),0===this._eventMap.size&&(this._eventMap=null))}},i.prototype.triggerEvent=function(t,e){if(this._eventMap&&this._eventMap.has(t))for(var i=this._eventMap.get(t),n=0,r=i.length;n<r;n+=1)i[n](e)},i);function i(t){void 0===t&&(t={}),e.call(this,t)}return Object.defineProperty(n,Symbol.hasInstance,{value:function(t){if(this!==n)return Object.getPrototypeOf(n)[Symbol.hasInstance].call(this,t);for(var e,i=t;i;){if((e=Object.getOwnPropertyDescriptor(i,"constructor"))&&e.value&&e.value.hasOwnProperty(Oi))return!0;i=Object.getPrototypeOf(i)}return!1}}),n[Oi]=!0,n}var Oi=Symbol("instanceofSymbol"),Ei=Ci(function(){});Ei.mixin=Ci;var ki,Ti=((ki=Ei)&&(Pi.__proto__=ki),(Pi.prototype=Object.create(ki&&ki.prototype)).constructor=Pi);function Pi(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),ki.call(this),this._x=t,this._y=e,this._z=i}Object.defineProperties(Ti.prototype,{x:{set:function(t){this._x=t,this.triggerEvent("valuechanged",{x:t})},get:function(){return this._x},configurable:!0,enumerable:!0},y:{set:function(t){this._y=t,this.triggerEvent("valuechanged",{y:t})},get:function(){return this._y},configurable:!0,enumerable:!0},z:{set:function(t){this._z=t,this.triggerEvent("valuechanged",{z:t})},get:function(){return this._z},configurable:!0,enumerable:!0}});function Ai(t){var n=function(e){function i(t){void 0===t&&(t={}),e.call(this,t),this._parent=null,this._children=[]}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var t={parent:{},children:{},childCount:{}};return t.parent.get=function(){return this._parent},t.children.get=function(){return[].concat(this._children)},i.prototype.addChild=function(t){if(!(t instanceof i))throw new TypeError("TreeNode.addChild expects the childNode argument to be a TreeNode instance.");if(t._parent===this)throw new ReferenceError("childNode is already a child of this parent.");return t._parent&&t._parent.removeChild(t),(t._parent=this)._children.push(t),this},i.prototype.addChildren=function(t){var e=this;return t.forEach(function(t){return e.addChild(t)}),this},i.prototype.removeChild=function(t){if(!(t instanceof i))throw new Error("\n                    TreeNode.removeChild expects the childNode argument to be an\n                    instance of TreeNode. There should only be TreeNodes in the\n                    tree.\n                ");if(t._parent!==this)throw new ReferenceError("childNode is not a child of this parent.");return t._parent=null,this._children.splice(this._children.indexOf(t),1),this},i.prototype.removeChildren=function(t){var e=this;return t.forEach(function(t){return e.removeChild(t)}),this},i.prototype.removeAllChildren=function(){return this.removeChildren(this._children),this},t.childCount.get=function(){return this._children.length},Object.defineProperties(i.prototype,t),i}(t);return Object.defineProperty(n,Symbol.hasInstance,{value:function(t){if(this!==n)return Object.getPrototypeOf(n)[Symbol.hasInstance].call(this,t);for(var e,i=t;i;){if((e=Object.getOwnPropertyDescriptor(i,"constructor"))&&e.value&&e.value.hasOwnProperty(ji))return!0;i=Object.getPrototypeOf(i)}return!1}}),n[ji]=!0,n}var Ri=null,Mi=null,Fi="function"==typeof Element.prototype.createShadowRoot&&"function"==typeof HTMLContentElement,Li="function"==typeof Element.prototype.attachShadow&&"function"==typeof HTMLSlotElement,zi=Object.freeze({epsilon:function(t){return Dt(t)<1e-6?0:t},applyCSSLabel:function(t,e){return 0===t?"0px":"%"===e?100*t+"%":"px"===e?t+"px":void 0},animationFrame:function(){var e=null,t=new Promise(function(t){return e=t});return window.requestAnimationFrame(e),t},makeLowercaseSetterAliases:Z,observeChildren:Q,getShadowRootVersion:function(t){if(console.log("getShadowRootVersion"),!t)return null;var e=document.createElement("slot");t.appendChild(e),e.appendChild(document.createElement("div"));var i=e.assignedNodes({flatten:!0});return e.remove(),console.log("hmm",i.length,0<i.length?"v1":"v0"),0<i.length?"v1":"v0"},hasShadowDomV0:Fi,hasShadowDomV1:Li,getAncestorShadowRoot:K,traverse:function t(e,i){console.log(i?"distributedNode:":"node:",e);for(var n=e.children,r=n.length,s=0;s<r;s+=1)n[s]._elementManager.element._isPossiblyDistributed||t(n[s]);var o=e._elementManager.element._shadowChildren;if(o)for(var a=o.length,l=0;l<a;l+=1)t(o[l].imperativeCounterpart,!0)}}),ji=Symbol("instanceofSymbol"),Ni=Ai(function(){});Ni.mixin=Ai;var Ui=F(function(A){!function(t){function s(t,e,i,n){var s,o,a,l,r=e&&e.prototype instanceof f?e:f,h=Object.create(r.prototype),c=new d(n||[]);return h._invoke=(s=t,o=i,a=c,l=x,function(t,e){if(l==S)throw new Error("Generator is already running");if(l==C){if("throw"===t)throw e;return _()}for(a.method=t,a.arg=e;;){var i=a.delegate;if(i){var n=p(i,a);if(n){if(n===O)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(l==x)throw l=C,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);l=S;var r=u(s,o,a);if("normal"===r.type){if(l=a.done?C:w,r.arg===O)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(l=C,a.method="throw",a.arg=r.arg)}}),h}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}function f(){}function i(){}function e(){}function n(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function o(a){function l(t,e,i,n){var r=u(a[t],a,e);if("throw"!==r.type){var s=r.arg,o=s.value;return o&&"object"==typeof o&&c.call(o,"__await")?Promise.resolve(o.__await).then(function(t){l("next",t,i,n)},function(t){l("throw",t,i,n)}):Promise.resolve(o).then(function(t){s.value=t,i(s)},n)}n(r.arg)}var e;"object"==typeof t.process&&t.process.domain&&(l=t.process.domain.bind(l)),this._invoke=function(i,n){function t(){return new Promise(function(t,e){l(i,n,t,e)})}return e=e?e.then(t,t):t()}}function p(t,e){var i=t.iterator[e.method];if(void 0===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,p(t,e),"throw"===e.method))return O;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var n=u(i,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,O;var r=n.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,O):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,O)}function r(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function a(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(r,this),this.reset(!0)}function l(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function t(){for(;++i<e.length;)if(c.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:_}}function _(){return{value:void 0,done:!0}}var h=Object.prototype,c=h.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",y=m.asyncIterator||"@@asyncIterator",v=m.toStringTag||"@@toStringTag",b=t.regeneratorRuntime;if(b)A.exports=b;else{(b=t.regeneratorRuntime=A.exports).wrap=s;var x="suspendedStart",w="suspendedYield",S="executing",C="completed",O={},E={};E[g]=function(){return this};var k=Object.getPrototypeOf,T=k&&k(k(l([])));T&&T!==h&&c.call(T,g)&&(E=T);var P=e.prototype=f.prototype=Object.create(E);i.prototype=P.constructor=e,e.constructor=i,e[v]=i.displayName="GeneratorFunction",b.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},b.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,e):(t.__proto__=e,v in t||(t[v]="GeneratorFunction")),t.prototype=Object.create(P),t},b.awrap=function(t){return{__await:t}},n(o.prototype),o.prototype[y]=function(){return this},b.AsyncIterator=o,b.async=function(t,e,i,n){var r=new o(s(t,e,i,n));return b.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},n(P),P[v]="Generator",P[g]=function(){return this},P.toString=function(){return"[object Generator]"},b.keys=function(i){var n=[];for(var t in i)n.push(t);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in i)return t.value=e,t.done=!1,t}return t.done=!0,t}},b.values=l,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(a),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(i){function t(t,e){return o.type="throw",o.arg=i,n.next=t,e&&(n.method="next",n.arg=void 0),!!e}var e=this;if(this.done)throw i;for(var n=this,r=this.tryEntries.length-1;0<=r;--r){var s=e.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return t("end");if(s.tryLoc<=e.prev){var a=c.call(s,"catchLoc"),l=c.call(s,"finallyLoc");if(a&&l){if(e.prev<s.catchLoc)return t(s.catchLoc,!0);if(e.prev<s.finallyLoc)return t(s.finallyLoc)}else if(a){if(e.prev<s.catchLoc)return t(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(e.prev<s.finallyLoc)return t(s.finallyLoc)}}}},abrupt:function(t,e){for(var i,n=this.tryEntries.length-1;0<=n;--n)if((i=this.tryEntries[n]).tryLoc<=this.prev&&c.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=e,r?(this.method="next",this.next=r.finallyLoc,O):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),O},finish:function(t){for(var e,i=this.tryEntries.length-1;0<=i;--i)if((e=this.tryEntries[i]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),a(e),O},catch:function(t){for(var e,i=this.tryEntries.length-1;0<=i;--i)if((e=this.tryEntries[i]).tryLoc===t){var n=e.completion;if("throw"===n.type){var r=n.arg;a(e)}return r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:l(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),O}}}}("object"==typeof le?le:"object"==typeof window?window:"object"==typeof self?self:le)}),Di="object"==typeof le?le:"object"==typeof window?window:"object"==typeof self?self:le,Ii=Di.regeneratorRuntime&&0<=Object.getOwnPropertyNames(Di).indexOf("regeneratorRuntime"),Gi=Ii&&Di.regeneratorRuntime;if(Di.regeneratorRuntime=void 0,Ii)Di.regeneratorRuntime=Gi;else try{delete Di.regeneratorRuntime}catch(t){Di.regeneratorRuntime=void 0}function Vi(t){return isNaN(t=+t)?0:(0<t?jt:Ft)(t)}function Bi(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}function Hi(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}function Wi(n,r,t){return Hi(n),void 0===r?n:1===t?function(t){return n.call(r,t)}:2===t?function(t,e){return n.call(r,t,e)}:3===t?function(t,e,i){return n.call(r,t,e,i)}:function(){return n.apply(r,arguments)}}function Xi(t){return"object"==typeof t?null!==t:"function"==typeof t}function Yi(t){if(!Xi(t))throw TypeError(t+" is not an object!");return t}function qi(t){try{return!!t()}catch(t){return 1}}function Zi(t){return en?tn.createElement(t):{}}function Qi(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}var Ki=F(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),Ji=F(function(t){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)}),$i=!qi(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),tn=Ki.document,en=Xi(tn)&&Xi(tn.createElement),nn=!$i&&!qi(function(){return 7!=Object.defineProperty(Zi("div"),"a",{get:function(){return 7}}).a}),rn=Object.defineProperty,sn={f:$i?Object.defineProperty:function(t,e,i){if(Yi(t),e=function(t,e){if(!Xi(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!Xi(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!Xi(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!Xi(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")}(e,!0),Yi(i),nn)try{return rn(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},on=$i?function(t,e,i){return sn.f(t,e,Qi(1,i))}:function(t,e,i){return t[e]=i,t},an="prototype",ln=function(t,e,i){var n,r,s,o=t&ln.F,a=t&ln.G,l=t&ln.S,h=t&ln.P,c=t&ln.B,u=t&ln.W,f=a?Ji:Ji[e]||(Ji[e]={}),p=f[an],d=a?Ki:l?Ki[e]:(Ki[e]||{})[an];for(n in a&&(i=e),i)(r=!o&&d&&void 0!==d[n])&&n in f||(s=r?d[n]:i[n],f[n]=a&&"function"!=typeof d[n]?i[n]:c&&r?Wi(s,Ki):u&&d[n]==s?function(n){function t(t,e,i){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(t);case 2:return new n(t,e)}return new n(t,e,i)}return n.apply(this,arguments)}return t[an]=n[an],t}(s):h&&"function"==typeof s?Wi(Function.call,s):s,h&&((f.virtual||(f.virtual={}))[n]=s,t&ln.R&&p&&!p[n]&&on(p,n,s)))};ln.F=1,ln.G=2,ln.S=4,ln.P=8,ln.B=16,ln.W=32,ln.U=64,ln.R=128;function hn(t,e){return vn.call(t,e)}function cn(t){return xn.call(t).slice(8,-1)}function un(t){return wn(Bi(t))}function fn(t){return 0<t?Mt(Vi(t),9007199254740991):0}function pn(t){return Cn[t]||(Cn[t]={})}function dn(t){return"Symbol(".concat(void 0===t?"":t,")_",(++On+En).toString(36))}function _n(t){return kn[t]||(kn[t]=dn(t))}function mn(){}function gn(t,e,i){t&&!hn(t=i?t:t.prototype,In)&&Dn(t,In,{configurable:!0,value:e})}var yn=ln,vn={}.hasOwnProperty,bn={},xn={}.toString,wn=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==cn(t)?t.split(""):Object(t)},Sn="__core-js_shared__",Cn=Ki[Sn]||(Ki[Sn]={}),On=0,En=Math.random(),kn=pn("keys"),Tn=function(t,e,i){var n,r,s=un(t),o=fn(s.length),a=(r=o,(n=Vi(n=i))<0?Lt(n+r,0):Mt(n,r));for(;a<o;a++)if(a in s&&s[a]===e)return a||0;return-1},Pn=_n("IE_PROTO"),An=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Rn=Object.keys||function(t){return function(t,e){var i,n=un(t),r=0,s=[];for(i in n)i!=Pn&&hn(n,i)&&s.push(i);for(;e.length>r;)hn(n,i=e[r++])&&(~Tn(s,i)||s.push(i));return s}(t,An)},Mn=$i?Object.defineProperties:function(t,e){Yi(t);for(var i,n=Rn(e),r=n.length,s=0;s<r;)sn.f(t,i=n[s++],e[i]);return t},Fn=Ki.document&&document.documentElement,Ln=_n("IE_PROTO"),zn="prototype",jn=function(){var t,e=Zi("iframe"),i=An.length;for(e.style.display="none",Fn.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),jn=t.F;i--;)delete jn[zn][An[i]];return jn()},Nn=Object.create||function(t,e){var i;return null===t?i=jn():(mn[zn]=Yi(t),i=new mn,mn[zn]=null,i[Ln]=t),void 0===e?i:Mn(i,e)},Un=F(function(t){var e=pn("wks"),i=Ki.Symbol,n="function"==typeof i;(t.exports=function(t){return e[t]||(e[t]=n&&i[t]||(n?i:dn)("Symbol."+t))}).store=e}),Dn=sn.f,In=Un("toStringTag"),Gn={};on(Gn,Un("iterator"),function(){return this});function Vn(){return this}function Bn(t,e,i,n,r,s,o){var a,l,h;function c(t){return!qn&&t in g?g[t]:function(){return new i(this,t)}}l=e,h=n,(a=i).prototype=Nn(Gn,{next:Qi(1,h)}),gn(a,l+" Iterator");var u,f,p,d=e+" Iterator",_=r==Zn,m=!1,g=t.prototype,y=g[Yn]||g["@@iterator"]||r&&g[r],v=y||c(r),b=r?_?c("entries"):v:void 0,x="Array"==e&&g.entries||y;if(x&&((p=Xn(x.call(new t)))!==Object.prototype&&gn(p,d,!0)),_&&y&&y.name!==Zn&&(m=!0,v=function(){return y.call(this)}),o&&(qn||m||!g[Yn])&&on(g,Yn,v),bn[e]=v,bn[d]=Vn,r)if(u={values:_?v:c(Zn),keys:s?v:c("keys"),entries:b},o)for(f in u)f in g||on(g,f,u[f]);else yn(yn.P+yn.F*(qn||m),e,u);return u}var Hn=_n("IE_PROTO"),Wn=Object.prototype,Xn=Object.getPrototypeOf||function(t){return t=Object(Bi(t)),hn(t,Hn)?t[Hn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Wn:null},Yn=Un("iterator"),qn=!([].keys&&"next"in[].keys()),Zn="values",Qn=function(t,e){var i,n,r=Bi(t)+"",s=Vi(e),o=r.length;return s<0||o<=s?"":(i=r.charCodeAt(s))<55296||56319<i||s+1===o||(n=r.charCodeAt(s+1))<56320||57343<n?r.charAt(s):r.slice(s,s+2)};Bn(String,"String",function(t){this._t=t+"",this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=Qn(e,i),this._i+=t.length,{value:t,done:!1})});function Kn(t,e){return{value:e,done:!!t}}Bn(Array,"Array",function(t,e){this._t=un(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,Kn(1)):Kn(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values");bn.Arguments=bn.Array;for(var Jn=Un("toStringTag"),$n=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],tr=0;tr<5;tr++){var er=$n[tr],ir=Ki[er],nr=ir&&ir.prototype;nr&&!nr[Jn]&&on(nr,Jn,er),bn[er]=bn.Array}function rr(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ur))?i:fr?cn(e):"Object"==(n=cn(e))&&"function"==typeof e.callee?"Arguments":n}function sr(t,e,i,n){try{return n?e(Yi(i)[0],i[1]):e(i)}catch(e){var r=t.return;throw void 0!==r&&Yi(r.call(t)),e}}function or(){var t=+this;if(Cr.hasOwnProperty(t)){var e=Cr[t];delete Cr[t],e()}}function ar(t){or.call(t.data)}var lr,hr,cr,ur=Un("toStringTag"),fr="Arguments"==cn(function(){return arguments}()),pr=Un("iterator"),dr=Array.prototype,_r=Un("iterator"),mr=Ji.getIteratorMethod=function(t){if(null!=t)return t[_r]||t["@@iterator"]||bn[rr(t)]},gr=F(function(t){var p={},d={},e=t.exports=function(t,e,i,n,r){var s,o,a,l,h,c=r?function(){return t}:mr(t),u=Wi(i,n,e?2:1),f=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(void 0===(h=c)||bn.Array!==h&&dr[pr]!==h){for(a=c.call(t);!(o=a.next()).done;)if((l=sr(a,u,o.value,e))===p||l===d)return l}else for(s=fn(t.length);f<s;f++)if((l=e?u(Yi(o=t[f])[0],o[1]):u(t[f]))===p||l===d)return l};e.BREAK=p,e.RETURN=d}),yr=Un("species"),vr=Ki.process,br=Ki.setImmediate,xr=Ki.clearImmediate,wr=Ki.MessageChannel,Sr=0,Cr={},Or="onreadystatechange";br&&xr||(br=function(t){for(var e=arguments,i=[],n=1;n<arguments.length;)i.push(e[n++]);return Cr[++Sr]=function(){!function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}t.apply(i,e)}("function"==typeof t?t:Function(t),i)},lr(Sr),Sr},xr=function(t){delete Cr[t]},"process"==cn(vr)?lr=function(t){vr.nextTick(Wi(or,t,1))}:wr?(cr=(hr=new wr).port2,hr.port1.onmessage=ar,lr=Wi(cr.postMessage,cr,1)):Ki.addEventListener&&"function"==typeof postMessage&&!Ki.importScripts?(lr=function(t){Ki.postMessage(t+"","*")},Ki.addEventListener("message",ar,!1)):lr=Or in Zi("script")?function(t){Fn.appendChild(Zi("script"))[Or]=function(){Fn.removeChild(this),or.call(t)}}:function(t){setTimeout(Wi(or,t,1),0)});var Er={set:br,clear:xr},kr=Er.set,Tr=Ki.MutationObserver||Ki.WebKitMutationObserver,Pr=Ki.process,Ar=Ki.Promise,Rr="process"==cn(Pr),Mr=Un("species"),Fr=Un("iterator"),Lr=!1;try{var zr=[7][Fr]();zr.return=function(){Lr=!0},Array.from(zr,function(){throw 2})}catch(t){}function jr(){}function Nr(t,e){return t===e||t===Jr&&e===Wr}function Ur(t){var e;return Xi(t)&&"function"==typeof(e=t.then)&&e}function Dr(t){return new(Nr(Jr,t)?es:Hr)(t)}function Ir(t){try{t()}catch(t){return{error:t}}}function Gr(h,i){if(!h._n){h._n=!0;var n=h._c;qr(function(){for(var a=h._v,l=1==h._s,t=0,e=function(t){var e,i,n=l?t.ok:t.fail,r=t.resolve,s=t.reject,o=t.domain;try{n?(l||(2==h._h&&rs(h),h._h=1),!0===n?e=a:(o&&o.enter(),e=n(a),o&&o.exit()),e===t.promise?s(Qr("Promise-chain cycle")):(i=Ur(e))?i.call(e,r,s):r(e)):s(a)}catch(t){s(t)}};n.length>t;)e(n[t++]);h._c=[],h._n=!1,i&&!h._h&&is(h)})}}function Vr(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Gr(e,!0))}var Br,Hr,Wr,Xr,Yr=Er.set,qr=function(){function t(){var t,e;for(Rr&&(t=Pr.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?r():n=void 0,t}}n=void 0,t&&t.enter()}var i,n,r;if(Rr)r=function(){Pr.nextTick(t)};else if(Tr){var e=!0,s=document.createTextNode("");new Tr(t).observe(s,{characterData:!0}),r=function(){s.data=e=!e}}else if(Ar&&Ar.resolve){var o=Ar.resolve();r=function(){o.then(t)}}else r=function(){kr.call(Ki,t)};return function(t){var e={fn:t,next:void 0};n&&(n.next=e),i||(i=e,r()),n=e}}(),Zr="Promise",Qr=Ki.TypeError,Kr=Ki.process,Jr=Ki[Zr],$r=(Kr=Ki.process,"process"==rr(Kr)),ts=!!function(){try{var t=Jr.resolve(1),e=(t.constructor={})[Un("species")]=function(t){t(jr,jr)};return($r||"function"==typeof PromiseRejectionEvent)&&t.then(jr)instanceof e}catch(t){}}(),es=Hr=function(t){var i,n;this.promise=new t(function(t,e){if(null!=i||null!=n)throw Qr("Bad Promise constructor");i=t,n=e}),this.resolve=Hi(i),this.reject=Hi(n)},is=function(r){Yr.call(Ki,function(){var t,e,i,n=r._v;if(ns(r)&&(t=Ir(function(){$r?Kr.emit("unhandledRejection",n,r):(e=Ki.onunhandledrejection)?e({promise:r,reason:n}):(i=Ki.console)&&i.error&&i.error("Unhandled promise rejection",n)}),r._h=$r||ns(r)?2:1),r._a=void 0,t)throw t.error})},ns=function(t){if(1==t._h)return!1;for(var e,i=t._a||t._c,n=0;i.length>n;)if((e=i[n++]).fail||!ns(e.promise))return!1;return!0},rs=function(e){Yr.call(Ki,function(){var t;$r?Kr.emit("rejectionHandled",e):(t=Ki.onrejectionhandled)&&t({promise:e,reason:e._v})})},ss=function(t){var i,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw Qr("Promise can't be resolved itself");(i=Ur(t))?qr(function(){var e={_w:n,_d:!1};try{i.call(t,Wi(ss,e,1),Wi(Vr,e,1))}catch(t){Vr.call(e,t)}}):(n._v=t,n._s=1,Gr(n,!1))}catch(t){Vr.call({_w:n,_d:!1},t)}}};ts||(Jr=function(t){(function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!")})(this,Jr,Zr,"_h"),Hi(t),Br.call(this);try{t(Wi(ss,this,1),Wi(Vr,this,1))}catch(t){Vr.call(this,t)}},(Br=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e){for(var i in e)on(t,i,e[i]);return t}(Jr.prototype,{then:function(t,e){var i,n,r,s=Dr((i=Jr,void 0===(r=Yi(this).constructor)||null==(n=Yi(r)[yr])?i:Hi(n)));return s.ok="function"!=typeof t||t,s.fail="function"==typeof e&&e,s.domain=$r?Kr.domain:void 0,this._c.push(s),this._a&&this._a.push(s),this._s&&Gr(this,!1),s.promise},catch:function(t){return this.then(void 0,t)}}),es=function(){var t=new Br;this.promise=t,this.resolve=Wi(ss,t,1),this.reject=Wi(Vr,t,1)}),yn(yn.G+yn.W+yn.F*!ts,{Promise:Jr}),gn(Jr,Zr),Xr="function"==typeof Ji[Zr]?Ji[Zr]:Ki[Zr],$i&&Xr&&!Xr[Mr]&&sn.f(Xr,Mr,{configurable:!0,get:function(){return this}}),Wr=Ji[Zr],yn(yn.S+yn.F*!ts,Zr,{reject:function(t){var e=Dr(this);return(0,e.reject)(t),e.promise}}),yn(yn.S+!0*yn.F,Zr,{resolve:function(t){if(t instanceof Jr&&Nr(t.constructor,this))return t;var e=Dr(this);return(0,e.resolve)(t),e.promise}}),yn(yn.S+yn.F*!(ts&&function(){if(Lr){var t,e=!1;try{var i=[7],n=i[Fr]();n.next=function(){return{done:e=!0}},i[Fr]=function(){return n},t=i,Jr.all(t).catch(jr)}catch(t){}return e}}()),Zr,{all:function(t){var o=this,e=Dr(o),a=e.resolve,l=e.reject,i=Ir(function(){var n=[],r=0,s=1;gr(t,!1,function(t){var e=r++,i=!1;n.push(void 0),s++,o.resolve(t).then(function(t){i||(i=!0,n[e]=t,--s||a(n))},l)}),--s||a(n)});return i&&l(i.error),e.promise},race:function(t){var e=this,i=Dr(e),n=i.reject,r=Ir(function(){gr(t,!1,function(t){e.resolve(t).then(i.resolve,n)})});return r&&n(r.error),i.promise}});function os(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i;(i=this)._init.apply(i,t)}var as=Ji.Promise,ls=F(function(t){t.exports={default:as,__esModule:!0}}),hs=F(function(t,e){e.__esModule=!0;var l=ls&&ls.__esModule?ls:{default:ls};e.default=function(t){return function(){var a=t.apply(this,arguments);return new l.default(function(s,o){return function e(t,i){try{var n=a[t](i),r=n.value}catch(t){return void o(t)}return n.done?void s(r):l.default.resolve(r).then(function(t){e("next",t)},function(t){e("throw",t)})}("next")})}}}),cs=M(F(function(t,e){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(Ui),s=i(ls),o=i(hs);e.default=(n=(0,o.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("loading"===document.readyState)return t.next=3,new s.default(function(t){document.addEventListener("DOMContentLoaded",t)});t.next=3;break;case 3:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})})),us=new WeakMap,fs=function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},ps=function(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]},ds=function(t){var e=Gt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return 1e-5<e?[t[0]/e,t[1]/e,t[2]/e]:[0,0,0]},_s={color:{}};os.prototype._init=function(){this.verts=null,this.normals=null,this._colors=null,this._color=null,this._calcVerts(),this.color=[.5,.5,.5]},_s.color.set=function(t){if(t){var e;e="string"==typeof(this._color=t)?t.trim().split(" ").map(function(t){return parseFloat(t)}):t;for(var i=this.verts.length,n=i+i/3,r=this._colors=new Float32Array(n),s=0;s<n;s+=4)r[s+0]=e[0],r[s+1]=e[1],r[s+2]=e[2],r[s+3]=void 0===e[3]?1:e[3]}},_s.color.get=function(){return this._color},Object.defineProperties(os.prototype,_s);function ms(t){var e=[parseFloat(getComputedStyle(t.gl.canvas).width)*window.devicePixelRatio,parseFloat(getComputedStyle(t.gl.canvas).height)*window.devicePixelRatio,1e3];(function(t,e,i){var n,r,s;n=t.canvas,r=e,s=i,n.width=r,n.height=s,t.viewport(0,0,e,i)}).apply(void 0,[t.gl].concat(e)),t.projectionMatrix=Ts.perspective(45,e[0]/e[1],1,2e3)}var gs,ys,vs,bs,xs,ws=((xs=os)&&(Ls.__proto__=xs),((Ls.prototype=Object.create(xs&&xs.prototype)).constructor=Ls).prototype._init=function(t,e){this.width=t,this.height=e,xs.prototype._init.call(this)},Ls.prototype._calcVerts=function(){for(var t=this.width,e=this.height,i=this.verts=new Float32Array([-t/2,0,0,t/2,0,0,0,e,0]),n=[0,0,1],r=this.normals=new Float32Array(i.length),s=0,o=i.length;s<o;s+=3)r[s+0]=n[0],r[s+1]=n[1],r[s+2]=n[2]},Ls),Ss=((bs=os)&&(Fs.__proto__=bs),((Fs.prototype=Object.create(bs&&bs.prototype)).constructor=Fs).prototype._init=function(t,e,i){this.baseWidth=t,this.topWidth=e,this.height=i,bs.prototype._init.call(this)},Fs.prototype._calcVerts=function(){for(var t=this.baseWidth,e=this.topWidth,i=this.height,n=this.verts=new Float32Array([-t/2,0,0,t/2,0,0,e/2,i,0,e/2,i,0,-e/2,i,0,-t/2,0,0]),r=[0,0,1],s=this.normals=new Float32Array(n.length),o=0,a=n.length;o<a;o+=3)s[o+0]=r[0],s[o+1]=r[1],s[o+2]=r[2]},Fs),Cs=((vs=os)&&(Ms.__proto__=vs),((Ms.prototype=Object.create(vs&&vs.prototype)).constructor=Ms).prototype._init=function(t,e){this.width=t,this.height=e,vs.prototype._init.call(this)},Ms.prototype._calcVerts=function(){for(var t=this.width,e=this.height,i=this.verts=new Float32Array([-t/2,-e/2,0,t/2,-e/2,0,t/2,e/2,0,t/2,e/2,0,-t/2,e/2,0,-t/2,-e/2,0]),n=[0,0,1],r=this.normals=new Float32Array(i.length),s=0,o=i.length;s<o;s+=3)r[s+0]=n[0],r[s+1]=n[1],r[s+2]=n[2]},Ms),Os=((ys=os)&&(Rs.__proto__=ys),((Rs.prototype=Object.create(ys&&ys.prototype)).constructor=Rs).prototype._init=function(t,e,i){this.x=t,this.y=e,this.width=i,ys.prototype._init.call(this)},Rs.prototype._calcVerts=function(){for(var t=this.x,e=this.y,i=this.width,n=t+i,r=e+i,s=this.verts=new Float32Array([t,e,0,n,e,0,n,r,0,n,r,0,t,r,0,t,e,0,t,e,0,t,e,-i,t,r,-i,t,r,-i,t,r,0,t,e,0,n,e,0,n,e,-i,n,r,-i,n,r,-i,n,r,0,n,e,0,t,e,-i,n,e,-i,n,r,-i,n,r,-i,t,r,-i,t,e,-i,t,e,0,t,e,-i,n,e,-i,n,e,-i,n,e,0,t,e,0,t,r,0,t,r,-i,n,r,-i,n,r,-i,n,r,0,t,r,0]),o=[[0,0,1],[-1,0,0],[1,0,0],[0,0,-1],[0,-1,0],[0,1,0]],a=this.normals=new Float32Array(s.length),l=0,h=0,c=s.length;h<c;h+=18,l+=1)a[h+0]=o[l][0],a[h+1]=o[l][1],a[h+2]=o[l][2],a[h+3]=o[l][0],a[h+4]=o[l][1],a[h+5]=o[l][2],a[h+6]=o[l][0],a[h+7]=o[l][1],a[h+8]=o[l][2],a[h+9]=o[l][0],a[h+10]=o[l][1],a[h+11]=o[l][2],a[h+12]=o[l][0],a[h+13]=o[l][1],a[h+14]=o[l][2],a[h+15]=o[l][0],a[h+16]=o[l][1],a[h+17]=o[l][2]},Rs),Es=((gs=os)&&(As.__proto__=gs),((As.prototype=Object.create(gs&&gs.prototype)).constructor=As).prototype._init=function(){gs.prototype._init.call(this)},As.prototype._calcVerts=function(){this.verts=new Float32Array([-100,.087303,-100,100,.087303,-100,100,.087303,100,-100,.087303,100,100,.087303,100,100,.087303,-100,0,200.087,0,100,.087303,-100,-100,.087303,-100,0,200.087,0,-100,.087303,-100,-100,.087303,100,0,200.087,0,-100,.087303,100,100,.087303,100,0,200.087,0]),this.normals=new Float32Array([0,-1,0,0,-1,0,0,-1,0,0,-1,0,.894427,.447214,0,.894427,.447214,0,.894427,.447214,0,0,.447214,-.894427,0,.447214,-.894427,0,.447214,-.894427,-.894427,.447214,0,-.894427,.447214,0,-.894427,.447214,0,0,.447214,.894427,0,.447214,.894427,0,.447214,.894427])},As),ks={identity:Object.freeze([1,0,0,0,1,0,0,0,1]),translation:function(t,e){return[1,0,0,0,1,0,t,e,1]},rotation:function(t){var e=Ht(t),i=Bt(t);return[e,-i,0,i,e,0,0,0,1]},scaling:function(t,e){return[t,0,0,0,e,0,0,0,1]},projection:function(t,e){var i=ks.identity;return i=ks.multiply(ks.scaling(1/t,1/e),i),i=ks.multiply(ks.scaling(2,2),i),i=ks.multiply(ks.translation(-1,-1),i),i=ks.multiply(ks.scaling(1,-1),i)},multiply:function(t,e){var i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],h=t[7],c=t[8],u=e[0],f=e[1],p=e[2],d=e[3],_=e[4],m=e[5],g=e[6],y=e[7],v=e[8];return[u*i+f*s+p*l,u*n+f*o+p*h,u*r+f*a+p*c,d*i+_*s+m*l,d*n+_*o+m*h,d*r+_*a+m*c,g*i+y*s+v*l,g*n+y*o+v*h,g*r+y*a+v*c]}},Ts={identity:Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),translation:function(t,e,i){return[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},xRotation:function(t){var e=tt(t),i=Ht(e),n=Bt(e);return[1,0,0,0,0,i,n,0,0,-n,i,0,0,0,0,1]},yRotation:function(t){var e=tt(t),i=Ht(e),n=Bt(e);return[i,0,-n,0,0,1,0,0,n,0,i,0,0,0,0,1]},zRotation:function(t){var e=tt(t),i=Ht(e),n=Bt(e);return[i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1]},scaling:function(t,e,i){return[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},inverse:function(t){var e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],h=t[8],c=t[9],u=t[10],f=t[11],p=t[12],d=t[13],_=t[14],m=t[15],g=u*m,y=_*f,v=a*m,b=_*l,x=a*f,w=u*l,S=n*m,C=_*r,O=n*f,E=u*r,k=n*l,T=a*r,P=h*d,A=p*c,R=s*d,M=p*o,F=s*c,L=h*o,z=e*d,j=p*i,N=e*c,U=h*i,D=e*o,I=s*i,G=g*o+b*c+x*d-(y*o+v*c+w*d),V=y*i+S*c+E*d-(g*i+C*c+O*d),B=v*i+C*o+k*d-(b*i+S*o+T*d),H=w*i+O*o+T*c-(x*i+E*o+k*c),W=1/(e*G+s*V+h*B+p*H);return[W*G,W*V,W*B,W*H,W*(y*s+v*h+w*p-(g*s+b*h+x*p)),W*(g*e+C*h+O*p-(y*e+S*h+E*p)),W*(b*e+S*s+T*p-(v*e+C*s+k*p)),W*(x*e+E*s+k*h-(w*e+O*s+T*h)),W*(P*l+M*f+F*m-(A*l+R*f+L*m)),W*(A*r+z*f+U*m-(P*r+j*f+N*m)),W*(R*r+j*l+D*m-(M*r+z*l+I*m)),W*(L*r+N*l+I*f-(F*r+U*l+D*f)),W*(R*u+L*_+A*a-(F*_+P*a+M*u)),W*(N*_+P*n+j*u-(z*u+U*_+A*n)),W*(z*a+I*_+M*n-(D*_+R*n+j*a)),W*(D*u+F*n+U*a-(N*a+I*u+L*n))]},transpose:function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},projection:function(t,e,i){return[2/t,0,0,0,0,-2/e,0,0,0,0,2/i,0,-1,1,0,1]},orthographic:function(t,e,i,n,r,s){return[2/(e-t),0,0,0,0,2/(i-n),0,0,0,0,2/(r-s),0,(t+e)/(t-e),(n+i)/(n-i),(r+s)/(r-s),1]},perspective:function(t,e,i,n){var r=tt(t),s=Vt(.5*Ut-.5*r),o=1/(i-n);return[s/e,0,0,0,0,s,0,0,0,0,(i+n)*o,-1,0,0,i*n*o*2,0]},lookAt:function(t,e,i){var n=ds(ps(t,e)),r=fs(i,n),s=fs(n,r);return[r[0],r[1],r[2],0,s[0],s[1],s[2],0,n[0],n[1],n[2],0,t[0],t[1],t[2],1]},multiply:function(t,e){var i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],h=t[7],c=t[8],u=t[9],f=t[10],p=t[11],d=t[12],_=t[13],m=t[14],g=t[15],y=e[0],v=e[1],b=e[2],x=e[3],w=e[4],S=e[5],C=e[6],O=e[7],E=e[8],k=e[9],T=e[10],P=e[11],A=e[12],R=e[13],M=e[14],F=e[15];return[y*i+v*o+b*c+x*d,y*n+v*a+b*u+x*_,y*r+v*l+b*f+x*m,y*s+v*h+b*p+x*g,w*i+S*o+C*c+O*d,w*n+S*a+C*u+O*_,w*r+S*l+C*f+O*m,w*s+S*h+C*p+O*g,E*i+k*o+T*c+P*d,E*n+k*a+T*u+P*_,E*r+k*l+T*f+P*m,E*s+k*h+T*p+P*g,A*i+R*o+M*c+F*d,A*n+R*a+M*u+F*_,A*r+R*l+M*f+F*m,A*s+R*h+M*p+F*g]}},Ps=function(){};function As(){gs.apply(this,arguments)}function Rs(){ys.apply(this,arguments)}function Ms(){vs.apply(this,arguments)}function Fs(){bs.apply(this,arguments)}function Ls(){xs.apply(this,arguments)}Ps.prototype.initGl=function(t){var e=J(t),i=t.webGlRendererState;(i.gl=e)||console.log("You need WebGL.");var n,r,s,o,a=$(e,e.VERTEX_SHADER,"\n    attribute vec4 a_vertexPosition;\n    uniform mat4 u_worldViewProjectionMatrix;\n\n    // TODO: awaiting on transpose() method for DOMMatrix\n    //uniform mat4 u_worldInverseTransposeMatrix; // used for correct lighting normals\n\n    attribute vec4 a_color;\n    varying vec4 v_fragColor;\n\n    attribute vec3 a_normal;\n    varying vec3 v_vertNormal;\n\n    uniform mat4 u_worldMatrix;\n\n    uniform vec3 u_lightWorldPosition;\n    varying vec3 v_surfaceToLightVector;\n\n    uniform vec3 u_cameraWorldPosition;\n    varying vec3 v_surfaceToCameraVector;\n\n    attribute vec2 a_textureCoordinate;\n    varying vec2 v_textureCoordinate;\n\n    void main() {\n        vec3 surfaceWorldPosition = (u_worldMatrix * a_vertexPosition).xyz;\n\n        // compute the vector of the surface to the pointLight\n        // and pass it to the fragment shader\n        v_surfaceToLightVector = u_lightWorldPosition - surfaceWorldPosition;\n\n        // compute the vector of the surface to the camera\n        // and pass it to the fragment shader\n        v_surfaceToCameraVector = u_cameraWorldPosition - surfaceWorldPosition;\n\n        gl_Position = u_worldViewProjectionMatrix * a_vertexPosition;\n\n        v_fragColor = a_color;\n        //v_fragColor = gl_Position * 0.5 + 0.5;\n\n        // orient the normals and pass to the fragment shader\n        //v_vertNormal = mat3(u_worldInverseTransposeMatrix) * a_normal; // TODO waiting for transpose() method on DOMMatrix\n        //alternate: v_vertNormal = (u_worldInverseTransposeMatrix * vec4(a_normal, 0)).xyz;\n        v_vertNormal = mat3(u_worldMatrix) * a_normal;\n\n        v_textureCoordinate = a_textureCoordinate;\n    }\n"),l=$(e,e.FRAGMENT_SHADER,"\n    // TODO: detect highp support, see\n    // https://github.com/greggman/webgl-fundamentals/issues/80#issuecomment-306746556\n    //precision mediump float;\n    precision highp float;\n\n    varying vec4 v_fragColor;\n    varying vec3 v_vertNormal;\n\n    varying vec3 v_surfaceToLightVector;\n\n    //// TODO: use this for directional lighting (f.e. sunlight or moonlight).\n    //uniform vec3 reverseLightDirection;\n\n    varying vec3 v_surfaceToCameraVector;\n\n    uniform float u_shininess;\n    uniform vec3 u_lightColor;\n    uniform vec3 u_specularColor;\n\n    varying vec2 v_textureCoordinate;\n    uniform sampler2D u_texture;\n    uniform bool u_hasTexture;\n\n    void main(void) {\n\n        // because v_vertNormal is a varying it's interpolated\n        // so it will not be a unit vector. Normalizing it\n        // will make it a unit vector again.\n        vec3 normal = normalize(v_vertNormal);\n\n        vec3 surfaceToCameraDirection = normalize(v_surfaceToCameraVector);\n\n        vec3 surfaceToLightDirection = normalize(v_surfaceToLightVector);\n\n        // represents the unit vector oriented at half of the angle between\n        // surfaceToLightDirection and surfaceToCameraDirection.\n        vec3 halfVector = normalize(surfaceToLightDirection + surfaceToCameraDirection);\n\n        float pointLight = dot(normal, surfaceToLightDirection);\n        float pointLightIntensity = 1.0; // TODO make configurable\n        //float directionalLight = dot(normal, reverseLightDirection); // TODO make configurable\n\n        //float specular = dot(normal, halfVector);\n        float specular = 0.0;\n        if (pointLight > 0.0) {\n            specular = pow(dot(normal, halfVector), u_shininess);\n        }\n\n        // TODO make configurable\n        //vec3 ambientLight = vec3(0.361, 0.184, 0.737); // teal\n        vec3 ambientLight = vec3(1.0, 1.0, 1.0); // white\n        float ambientLightIntensity = 0.3;\n\n        // TODO: user can choose color or texture, default to a color if no texture, etc.\n        // TODO: blend texture on top of color, if texture has alpha.\n        gl_FragColor = v_fragColor;\n        if (u_hasTexture) {\n            gl_FragColor = texture2D(u_texture, v_textureCoordinate);\n        }\n\n        // Lets multiply just the color portion (not the alpha) of\n        // gl_FragColor by the pointLight + directionalLight\n        //gl_FragColor.rgb *= pointLight * u_lightColor; // point light only.\n        //gl_FragColor.rgb *= directionalLight; // directional light only.\n        //gl_FragColor.rgb *= ambientLight; // ambient light only.\n        gl_FragColor.rgb *=\n            //clamp(directionalLight, 0.0, 1.0) +\n            clamp(pointLight, 0.0, 1.0) * u_lightColor * pointLightIntensity +\n            ambientLight * ambientLightIntensity;\n\n        // Just add in the specular\n        gl_FragColor.rgb += specular * u_specularColor;\n\n        //gl_FragColor.a = 0.5;\n    }\n"),h=(r=a,s=l,o=(n=e).createProgram(),n.attachShader(o,r),n.attachShader(o,s),n.linkProgram(o),n.getProgramParameter(o,n.LINK_STATUS)?o:(console.log(" --- Error making program. GL Program Info Log:",n.getProgramInfoLog(o)),void n.deleteProgram(o)));e.useProgram(h),i.colorsBuffer=e.createBuffer(),i.colorAttributeLocation=e.getAttribLocation(h,"a_color"),e.enableVertexAttribArray(i.colorAttributeLocation),i.vertexBuffer=e.createBuffer(),i.vertexAttributeLocation=e.getAttribLocation(h,"a_vertexPosition"),e.enableVertexAttribArray(i.vertexAttributeLocation),i.normalsBuffer=e.createBuffer(),i.normalAttributeLocation=e.getAttribLocation(h,"a_normal"),e.enableVertexAttribArray(i.normalAttributeLocation),i.textureCoordinatesBuffer=e.createBuffer(),i.textureCoordinateLocation=e.getAttribLocation(h,"a_textureCoordinate"),e.enable(e.DEPTH_TEST),e.blendFunc(e.SRC_ALPHA,e.ONE),e.enable(e.BLEND),i.projectionMatrix=Ts.identity,ms(i),t.on("parentsizechange",function(){return ms(i)}),i.worldViewProjectionMatrixLocation=e.getUniformLocation(h,"u_worldViewProjectionMatrix"),i.worldMatrixLocation=e.getUniformLocation(h,"u_worldMatrix"),i.lightWorldPositionLocation=e.getUniformLocation(h,"u_lightWorldPosition"),i.cameraWorldPositionLocation=e.getUniformLocation(h,"u_cameraWorldPosition");var c=e.getUniformLocation(h,"u_shininess"),u=e.getUniformLocation(h,"u_lightColor"),f=e.getUniformLocation(h,"u_specularColor");i.textureLocation=e.getUniformLocation(h,"u_texture"),i.hasTextureLocation=e.getUniformLocation(h,"u_hasTexture"),e.uniform1f(c,200);var p=[1,1,1];e.uniform3fv(u,ds(p)),e.uniform3fv(f,ds(p)),i.lightAnimParam=0,i.lightWorldPosition=[20,30,50],i.cameraAngle=0,i.cameraRadius=200},Ps.prototype.drawScene=function(t){var e=t.webGlRendererState,i=e.gl;e.lightAnimParam+=.05,e.lightWorldPosition=[300*Bt(e.lightAnimParam),300*Bt(2*e.lightAnimParam),Dt(300*Ht(e.lightAnimParam))],i.uniform3fv(e.lightWorldPositionLocation,e.lightWorldPosition);var n=t.getAttribute("background");n="string"==typeof n?n.split(" ").map(function(t){return parseFloat(t)}):[0,0,0,0],i.clearColor.apply(i,n),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT);var r=Ts.identity;r=Ts.multiply(r,Ts.yRotation(e.cameraAngle)),r=Ts.multiply(r,Ts.translation(0,0,1.5*e.cameraRadius));var s=Ts.inverse(r);e.viewProjectionMatrix=Ts.multiply(e.projectionMatrix,s);var o=[r[12],r[13],r[14]];i.uniform3fv(e.cameraWorldPositionLocation,o);for(var a=t.imperativeCounterpart._children,l=0,h=a.length;l<h;l+=1)this.drawNodeAndRecurse(e,a[l])},Ps.prototype.drawNodeAndRecurse=function(t,e){var i=t.gl,n=e.element.getAttribute("mesh");if(n){var r=e._calculatedSize,s=Array.from(e.element.children).find(function(t){return t instanceof SVGSVGElement}),o=!!s;if("cube"==n)e.__shape instanceof Os||(e.__shape=new Os(0,0,r.x));else if("quad"!=n)"isotriangle"==n?e.__shape instanceof ws||(e.__shape=new ws(r.x,r.y)):"pyramid4"==n?e.__shape instanceof Es||(e.__shape=new Es(r.x,r.y)):"symtrap"==n?e.__shape instanceof Ss?(e.__shape.baseWidth=r.x/2,e.__shape.topWidth=r.x,e.__shape.height=r.y,e.__shape._calcVerts()):e.__shape=new Ss(r.x/2,r.x,r.y):(e.__shape instanceof Cs?(e.__shape.width=r.x,e.__shape.height=r.y,e.__shape._calcVerts()):e.__shape=new Cs(r.x,r.y),o&&(e.__shape.textureCoordinates=new Float32Array([0,0,1,0,1,1,1,1,0,1,0,0])));else if(e.__shape instanceof Cs?(e.__shape.width=r.x,e.__shape.height=r.y,e.__shape._calcVerts()):e.__shape=new Cs(r.x,r.y),o){e.__texture||(e.__shape.textureCoordinates=new Float32Array([0,0,1,0,1,1,1,1,0,1,0,0]),e.__texture=i.createTexture()),e.__two||(e.__two=new Two({type:Two.Types.webgl,fullscreen:!1,autostart:!1}),e.__two.interpret(s)),e.__two.update();var a=e.__two.renderer.domElement,l=function(t){return 0==(t&t-1)};i.bindTexture(i.TEXTURE_2D,e.__texture),i.texImage2D(i.TEXTURE_2D,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,a),l(a.width)&&l(a.height)?(i.generateMipmap(i.TEXTURE_2D),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR))}if(e.__shape){e.__shape.color=e.element.getAttribute("color"),i.bindBuffer(i.ARRAY_BUFFER,t.colorsBuffer),i.bufferData(i.ARRAY_BUFFER,e.__shape._colors,i.STATIC_DRAW);var h=i.FLOAT;i.vertexAttribPointer(t.colorAttributeLocation,4,h,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,e.__shape.verts,i.STATIC_DRAW);var c=i.FLOAT;i.vertexAttribPointer(t.vertexAttributeLocation,3,c,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t.normalsBuffer),i.bufferData(i.ARRAY_BUFFER,e.__shape.normals,i.STATIC_DRAW);var u=i.FLOAT;if(i.vertexAttribPointer(t.normalAttributeLocation,3,u,!1,0,0),o){i.uniform1i(t.hasTextureLocation,1),i.bindBuffer(i.ARRAY_BUFFER,t.textureCoordinatesBuffer),i.bufferData(i.ARRAY_BUFFER,e.__shape.textureCoordinates,i.STATIC_DRAW);var f=i.FLOAT;i.enableVertexAttribArray(t.textureCoordinateLocation),i.vertexAttribPointer(t.textureCoordinateLocation,2,f,!1,0,0),i.uniform1i(t.textureLocation,0)}else i.uniform1i(t.hasTextureLocation,0),i.disableVertexAttribArray(t.textureCoordinateLocation);i.uniformMatrix4fv(t.worldMatrixLocation,!1,e._worldMatrix.toFloat32Array());var p=Ts.multiply(t.viewProjectionMatrix,e._worldMatrix.toFloat32Array());i.uniformMatrix4fv(t.worldViewProjectionMatrixLocation,!1,p);var d=e.__shape.verts.length/3;i.drawArrays(i.TRIANGLES,0,d)}}for(var _=e._children,m=0,g=_.length;m<g;m+=1)this.drawNodeAndRecurse(t,_[m])};function zs(){this._inFrame=!1,this._rAF=null,this._animationLoopStarted=!1,this._allRenderTasks=[],this._taskIterationIndex=0,this._numberOfTasks=0,this._nodesToBeRendered=[],this._modifiedScenes=[],this._worldMatrixRootNodes=[]}var js=null,Ns=!1,Us=null;zs.prototype._startAnimationLoop=function(){var i=this;if(this._animationLoopStarted)return Promise.resolve();this._animationLoopStarted=!0;function t(){var e=function(t){i._inFrame=!0,i._runRenderTasks(t),i._renderNodes(t),i._allRenderTasks.length?i._rAF=requestAnimationFrame(e):(i._rAF=null,i._animationLoopStarted=!1),i._inFrame=!1};i._rAF=requestAnimationFrame(e)}return Ns?(t(),Promise.resolve()):cs().then(function(){Ns=!0,t()})},zs.prototype.addRenderTask=function(t){if("function"!=typeof t)throw new Error("Render task must be a function.");return this._allRenderTasks.includes(t)?void 0:(this._allRenderTasks.push(t),this._numberOfTasks+=1,this._animationLoopStarted||this._startAnimationLoop(),t)},zs.prototype.removeRenderTask=function(t){var e=this._allRenderTasks.indexOf(t);-1==e||(this._allRenderTasks.splice(e,1),--this._numberOfTasks,--this._taskIterationIndex)},zs.prototype._runRenderTasks=function(t){for(this._taskIterationIndex=0;this._taskIterationIndex<this._numberOfTasks;this._taskIterationIndex+=1){var e=this._allRenderTasks[this._taskIterationIndex];!1===e(t)&&this.removeRenderTask(e)}},zs.prototype._setNodeToBeRendered=function(t){this._nodesToBeRendered.includes(t)||(this._nodesToBeRendered.push(t),this._inFrame||this._startAnimationLoop())},zs.prototype._renderNodes=function(t){var e=this;if(this._nodesToBeRendered.length){for(var i,n=0,r=this._nodesToBeRendered.length;n<r;n+=1)(i=e._nodesToBeRendered[n])._render(t),!(i instanceof Ws)||i._getAncestorToBeRendered()instanceof Ws||e._worldMatrixRootNodes.includes(i)||e._worldMatrixRootNodes.push(i),i._scene&&!e._modifiedScenes.includes(i._scene)&&e._modifiedScenes.push(i._scene);for(var s=this._worldMatrixRootNodes,o=0,a=s.length;o<a;o+=1)s[o]._calculateWorldMatricesInSubtree();s.length=0;for(var l,h=this._modifiedScenes,c=0,u=h.length;c<u;c+=1)(l=h[c].element).webglEnabled&&(Us=Us||et())&&Us.drawScene(l);h.length=0;for(var f=this._nodesToBeRendered,p=0,d=f.length;p<d;p+=1)f[p]._willBeRendered=!1;f.length=0}};var Ds=new zs;void 0===document.createElement("div").style.transform&&Object.defineProperty(CSSStyleDeclaration.prototype,"transform",{set:function(t){this.webkitTransform=t},get:function(){return this.webkitTransform},enumerable:!0});function Is(t){var e,n=((e=Ni.mixin(Ei.mixin(t)))&&(i.__proto__=e),((i.prototype=Object.create(e&&e.prototype)).constructor=i).prototype._setDefaultProperties=function(){Object.assign(this._properties,{sizeMode:new Ti("absolute","absolute","absolute"),absoluteSize:new Ti(0,0,0),proportionalSize:new Ti(1,1,1)})},i.prototype._setPropertyObservers=function(){var t=this;this._properties.sizeMode.on("valuechanged",function(){return t.triggerEvent("propertychange","sizeMode")}),this._properties.absoluteSize.on("valuechanged",function(){return t.triggerEvent("propertychange","absoluteSize")}),this._properties.proportionalSize.on("valuechanged",function(){return t.triggerEvent("propertychange","proportionalSize")})},i.prototype._calcSize=function(){var t=this._calculatedSize,e=Object.assign({},t),i=this._properties,n=this._getParentSize();t.x="absolute"==i.sizeMode._x?i.absoluteSize._x:n.x*i.proportionalSize._x,t.y="absolute"==i.sizeMode._y?i.absoluteSize._y:n.y*i.proportionalSize._y,t.z="absolute"==i.sizeMode._z?i.absoluteSize._z:n.z*i.proportionalSize._z,e.x===t.x&&e.y===t.y&&e.z===t.z||this.triggerEvent("sizechange",Object.assign({},t))},i.prototype._getParentSize=function(){return this._parent?this._parent._calculatedSize:{x:0,y:0,z:0}},i.prototype._setPropertyXYZ=function(t,i,n){var r=this;if(!(n instanceof Object||n instanceof Array||n instanceof Function))throw new TypeError("Invalid value for "+t.name+"#"+i+".");var e=!1;n instanceof Function?(this._propertyFunctions||(this._propertyFunctions=new Map),this._propertyFunctions.has(i)&&Ds.removeRenderTask(this._propertyFunctions.get(i)),this._propertyFunctions.set(i,Ds.addRenderTask(function(t){var e=n(r._properties[i]._x,r._properties[i]._y,r._properties[i]._z,t);return!1===e?(r._propertyFunctions.delete(i),!1):void(r[i]=e)}))):n instanceof Array?(void 0!==n[0]&&(this._properties[i]._x=n[0],e=!0),void 0!==n[1]&&(this._properties[i]._y=n[1],e=!0),void 0!==n[2]&&(this._properties[i]._z=n[2],e=!0)):(void 0!==n.x&&(this._properties[i]._x=n.x,e=!0),void 0!==n.y&&(this._properties[i]._y=n.y,e=!0),void 0!==n.z&&(this._properties[i]._z=n.z,e=!0)),e&&this.triggerEvent("propertychange",i)},i.prototype._setPropertySingle=function(t,i,n,e){var r=this;if(!(typeof n==e||n instanceof Function))throw new TypeError("Invalid value for "+t.name+"#"+i+".");n instanceof Function?Ds.addRenderTask(function(t){var e=n(r._properties[i],t);return!1!==e&&void(r[i]=e)}):(this._properties[i]=n,this.triggerEvent("propertychange",i))},i.prototype._render=function(){},i);function i(t){void 0===t&&(t={}),e.call(this,t),this._propertyFunctions=null,this._calculatedSize={x:0,y:0,z:0},this._properties={},this._setDefaultProperties(),this._setPropertyObservers(),this.properties=t}return Object.defineProperties(n.prototype,{sizeMode:{set:function(t){this._setPropertyXYZ(n,"sizeMode",t)},get:function(){return this._properties.sizeMode},configurable:!0,enumerable:!0},absoluteSize:{set:function(t){this._setPropertyXYZ(n,"absoluteSize",t)},get:function(){return this._properties.absoluteSize},configurable:!0,enumerable:!0},actualSize:{get:function(){var t=this._calculatedSize;return{x:t.x,y:t.y,z:t.z}},configurable:!0,enumerable:!0},proportionalSize:{set:function(t){this._setPropertyXYZ(n,"proportionalSize",t)},get:function(){return this._properties.proportionalSize},configurable:!0,enumerable:!0},properties:{set:function(t){void 0===t&&(t={}),t.sizeMode&&(this.sizeMode=t.sizeMode),t.absoluteSize&&(this.absoluteSize=t.absoluteSize),t.proportionalSize&&(this.proportionalSize=t.proportionalSize)},configurable:!0}}),Z(n.prototype),Object.defineProperty(n,Symbol.hasInstance,{value:function(t){if(this!==n)return Object.getPrototypeOf(n)[Symbol.hasInstance].call(this,t);for(var e,i=t;i;){if((e=Object.getOwnPropertyDescriptor(i,"constructor"))&&e.value&&e.value.hasOwnProperty(Gs))return!0;i=Object.getPrototypeOf(i)}return!1}}),n[Gs]=!0,n}var Gs=Symbol("instanceofSymbol"),Vs=Is(function(){});Vs.mixin=Is;function Bs(t){var e,i=Vs.mixin(t),n=((e=i)&&(s.__proto__=e),((s.prototype=Object.create(e&&e.prototype)).constructor=s).prototype._setDefaultProperties=function(){e.prototype._setDefaultProperties.call(this),Object.assign(this._properties,{position:new Ti(0,0,0),rotation:new Ti(0,0,0),scale:new Ti(1,1,1),origin:new Ti(.5,.5,.5),align:new Ti(0,0,0),mountPoint:new Ti(0,0,0),opacity:1,transform:new window.DOMMatrix})},s.prototype._setPropertyObservers=function(){var t=this;e.prototype._setPropertyObservers.call(this),this._properties.position.on("valuechanged",function(){return t.triggerEvent("propertychange","position")}),this._properties.rotation.on("valuechanged",function(){return t.triggerEvent("propertychange","rotation")}),this._properties.scale.on("valuechanged",function(){return t.triggerEvent("propertychange","scale")}),this._properties.origin.on("valuechanged",function(){return t.triggerEvent("propertychange","origin")}),this._properties.align.on("valuechanged",function(){return t.triggerEvent("propertychange","align")}),this._properties.mountPoint.on("valuechanged",function(){return t.triggerEvent("propertychange","mountPoint")})},s.prototype._calculateMatrix=function(){var t=new window.DOMMatrix,e=this._properties,i=[0,0,0];if(this._parent){var n=this._parent._calculatedSize,r=e.align;i[0]=n.x*r.x,i[1]=n.y*r.y,i[2]=n.z*r.z}var s=[0,0,0],o=this._calculatedSize,a=e.mountPoint;s[0]=o.x*a.x,s[1]=o.y*a.y,s[2]=o.z*a.z;var l=[],h=e.position;l[0]=h.x+i[0]-s[0],l[1]=h.y+i[1]-s[1],l[2]=h.z+i[2]-s[2],t.translateSelf(l[0],l[1],l[2]);var c=e.rotation;return t.rotateAxisAngleSelf(1,0,0,c.x),t.rotateAxisAngleSelf(0,1,0,c.y),t.rotateAxisAngleSelf(0,0,1,c.z),t},s.prototype._calculateWorldMatricesInSubtree=function(){this._calculateWorldMatrixFromParent();for(var t=this._children,e=0,i=t.length;e<i;e+=1)t[e]._calculateWorldMatricesInSubtree()},s.prototype._calculateWorldMatrixFromParent=function(){var t=this._parent;this._worldMatrix=t instanceof s?this._properties.transform.multiply(t._worldMatrix):this._properties.transform},s.prototype._render=function(){e.prototype._render.call(this),this._properties.transform=this._calculateMatrix()},s),r=Object.getOwnPropertyDescriptor(i.prototype,"properties").set;function s(t){void 0===t&&(t={}),e.call(this,t),this._worldMatrix=null}return Object.defineProperties(n.prototype,{position:{set:function(t){this._setPropertyXYZ(n,"position",t)},get:function(){return this._properties.position},configurable:!0,enumerable:!0},rotation:{set:function(t){this._setPropertyXYZ(n,"rotation",t)},get:function(){return this._properties.rotation},configurable:!0,enumerable:!0},scale:{set:function(t){this._setPropertyXYZ(n,"scale",t)},get:function(){return this._properties.scale},configurable:!0,enumerable:!0},opacity:{set:function(t){var e;"number"==typeof(e=t)&&!Object.is(e,NaN)&&!Object.is(e,1/0)||(t=void 0),this._setPropertySingle(n,"opacity",t,"number")},get:function(){return this._properties.opacity},configurable:!0,enumerable:!0},align:{set:function(t){this._setPropertyXYZ(n,"align",t)},get:function(){return this._properties.align},configurable:!0,enumerable:!0},mountPoint:{set:function(t){this._setPropertyXYZ(n,"mountPoint",t)},get:function(){return this._properties.mountPoint},configurable:!0,enumerable:!0},properties:{set:function(t){void 0===t&&(t={}),r.call(this,t),t.position&&(this.position=t.position),t.rotation&&(this.rotation=t.rotation),t.scale&&(this.scale=t.scale),t.origin&&(this.origin=t.origin),t.align&&(this.align=t.align),t.mountPoint&&(this.mountPoint=t.mountPoint),t.opacity&&(this.opacity=t.opacity)},configurable:!0}}),Z(n.prototype),Object.defineProperty(n,Symbol.hasInstance,{value:function(t){if(this!==n)return Object.getPrototypeOf(n)[Symbol.hasInstance].call(this,t);for(var e,i=t;i;){if((e=Object.getOwnPropertyDescriptor(i,"constructor"))&&e.value&&e.value.hasOwnProperty(Hs))return!0;i=Object.getPrototypeOf(i)}return!1}}),n[Hs]=!0,n}var Hs=Symbol("instanceofSymbol"),Ws=Bs(function(){});Ws.mixin=Bs;var Xs={display:"none",boxSizing:"border-box",position:"absolute",top:0,left:0,transformOrigin:"50% 50% 0",transformStyle:"preserve-3d"},Ys=Object.assign({},Xs,{position:"relative",overflow:"hidden",width:"100%",height:"100%",perspective:1e3});if("function"!=typeof window.HTMLElement){var qs=function(){};qs.prototype=window.HTMLElement.prototype,window.HTMLElement=qs}var Zs=new Map;(function(t,u,i,e){function f(t,e){for(var i=0,n=t.length;i<n;i++)s(t[i],e)}function p(e){return function(t){tt(t)&&(s(t,e),f(t.querySelectorAll(N),e))}}function d(t){var e=rt.call(t,"is"),i=t.nodeName.toUpperCase(),n=D.call(z,e?M+e.toUpperCase():R+i);return e&&-1<n&&!_(i,e)?-1:n}function _(t,e){return-1<N.indexOf(t+'[is="'+e+'"]')}function a(t){var e=t.currentTarget,i=t.attrChange,n=t.attrName,r=t.target;!_t||r&&r!==e||!e.attributeChangedCallback||"style"===n||t.prevValue===t.newValue||e.attributeChangedCallback(n,i===t[E]?null:t.prevValue,i===t[T]?null:t.newValue)}function m(t){var e=p(t);return function(t){v.push(e,t.target)}}function g(t){dt&&(dt=!1,t.currentTarget.removeEventListener(A,g)),f((t.target||u).querySelectorAll(N),t.detail===C?C:S),$&&function(){for(var t,e=0,i=et.length;e<i;e++)t=et[e],U.contains(t)||(i--,et.splice(e--,1),s(t,C))}()}function n(t,e){at.call(this,t,e),o.call(this,{target:this})}function r(t,e){Q(t,e),b?b.observe(t,ht):(pt&&(t.setAttribute=n,t[w]=h(t),t.addEventListener("DOMSubtreeModified",o)),t.addEventListener(P,a)),t.createdCallback&&_t&&(t.created=!0,t.createdCallback(),t.created=!1)}function y(t){throw new Error("A "+t+" type is already registered")}function s(t,e){var i,n=d(t);-1<n&&(c(t,j[n]),n=0,e!==S||t[S]?e!==C||t[C]||(t[S]=!1,t[C]=!0,n=1):(t[C]=!1,t[S]=!0,n=1,$&&D.call(et,t)<0&&et.push(t)),n&&(i=t[e+"Callback"])&&i.call(t))}if(!(e in u)){var v,o,l,h,b,c,x,w="__"+e+(1e5*Math.random()>>0),S="attached",C="detached",O="extends",E="ADDITION",k="MODIFICATION",T="REMOVAL",P="DOMAttrModified",A="DOMContentLoaded",R="<",M="=",F=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,L=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],z=[],j=[],N="",U=u.documentElement,D=z.indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},I=i.prototype,G=I.hasOwnProperty,V=I.isPrototypeOf,B=i.defineProperty,H=i.getOwnPropertyDescriptor,W=i.getOwnPropertyNames,X=i.getPrototypeOf,Y=i.setPrototypeOf,q=!!i.__proto__,Z=i.create||function t(e){return e?(t.prototype=e,new t):this},Q=Y||(q?function(t,e){return t.__proto__=e,t}:W&&H?function(t,e){for(;xt(t,e),(e=X(e))&&!V.call(e,t););return t}:function(t,e){for(var i in e)t[i]=e[i];return t}),K=t.MutationObserver||t.WebKitMutationObserver,J=(t.HTMLElement||t.Element||t.Node).prototype,$=!V.call(J,U),tt=$?function(t){return 1===t.nodeType}:function(t){return V.call(J,t)},et=$&&[],it=J.cloneNode,nt=J.dispatchEvent,rt=J.getAttribute,st=J.hasAttribute,ot=J.removeAttribute,at=J.setAttribute,lt=u.createElement,ht=K&&{attributes:!0,characterData:!0,attributeOldValue:!0},ct=K||function(){pt=!1,U.removeEventListener(P,ct)},ut=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,10)},ft=!1,pt=!0,dt=!0,_t=!0;x=Y||q?(c=function(t,e){V.call(e,t)||r(t,e)},r):c=function(t,e){t[w]||(t[w]=i(!0),r(t,e))},$?(pt=!1,vt=H(J,"addEventListener"),bt=vt.value,vt.value=function(t,e,i){t===P&&this.attributeChangedCallback&&this.setAttribute!==gt&&(this[w]={className:{name:"class",value:this.className}},this.setAttribute=gt,this.removeAttribute=mt,bt.call(this,"propertychange",yt)),bt.call(this,t,e,i)},B(J,"addEventListener",vt)):K||(U.addEventListener(P,ct),U.setAttribute(w,1),U.removeAttribute(w),pt&&(o=function(t){var e,i,n,r=this;if(r===t.target){for(n in e=r[w],r[w]=i=h(r),i){if(!(n in e))return l(0,r,n,e[n],i[n],E);if(i[n]!==e[n])return l(1,r,n,e[n],i[n],k)}for(n in e)if(!(n in i))return l(2,r,n,e[n],i[n],T)}},l=function(t,e,i,n,r,s){var o={attrChange:t,currentTarget:e,attrName:i,prevValue:n,newValue:r};o[s]=t,a(o)},h=function(t){for(var e,i,n={},r=t.attributes,s=0,o=r.length;s<o;s++)"setAttribute"!==(i=(e=r[s]).name)&&(n[i]=e.value);return n})),u[e]=function(t,e){if(n=t.toUpperCase(),ft||(ft=!0,K?(a=p(S),l=p(C),(b=new K(function(t){for(var e,i,n,r=0,s=t.length;r<s;r++)"childList"===(e=t[r]).type?(o(e.addedNodes,a),o(e.removedNodes,l)):(i=e.target,_t&&i.attributeChangedCallback&&"style"!==e.attributeName&&(n=rt.call(i,e.attributeName))!==e.oldValue&&i.attributeChangedCallback(e.attributeName,e.oldValue,n))})).observe(u,{childList:!0,subtree:!0})):(v=[],ut(function t(){for(;v.length;)v.shift().call(null,v.shift());ut(t)}),u.addEventListener("DOMNodeInserted",m(S)),u.addEventListener("DOMNodeRemoved",m(C))),u.addEventListener(A,g),u.addEventListener("readystatechange",g),u.createElement=function(t,e){var i="string"==typeof e?e:"",n=i?lt.call(u,t,i):lt.call(u,t),r=""+t,s=D.call(z,(i?M:R)+(i||r).toUpperCase()),o=-1<s;return i&&(n.setAttribute("is",i=i.toLowerCase()),o=o&&_(r.toUpperCase(),i)),_t=!u.createElement.innerHTMLHelper,o&&x(n,j[s]),n},J.cloneNode=function(t){var e=it.call(this,!!t),i=d(e);return-1<i&&x(e,j[i]),t&&function(t){for(var e,i=0,n=t.length;i<n;i++)e=t[i],x(e,j[d(e)])}(e.querySelectorAll(N)),e}),-2<D.call(z,M+n)+D.call(z,R+n)&&y(t),!F.test(n)||-1<D.call(L,n))throw new Error("The type "+t+" is invalid");function o(t,e){for(var i=0,n=t.length;i<n;e(t[i++]));}function i(){return h?u.createElement(c,n):u.createElement(c)}var a,l,n,r,s=e||I,h=G.call(s,O),c=h?e[O].toUpperCase():n;return h&&-1<D.call(z,R+c)&&y(c),r=z.push((h?M:R)+n)-1,N=N.concat(N.length?",":"",h?c+'[is="'+t.toLowerCase()+'"]':c),i.prototype=j[r]=G.call(s,"prototype")?s.prototype:Z(J),f(u.querySelectorAll(N),S),i}}function mt(t){var e=new CustomEvent(P,{bubbles:!0});e.attrName=t,e.prevValue=rt.call(this,t),e.newValue=null,e[T]=e.attrChange=2,ot.call(this,t),nt.call(this,e)}function gt(t,e){var i=st.call(this,t),n=i&&rt.call(this,t),r=new CustomEvent(P,{bubbles:!0});at.call(this,t,e),r.attrName=t,r.prevValue=i?n:null,r.newValue=e,i?r[k]=r.attrChange=1:r[E]=r.attrChange=0,nt.call(this,r)}function yt(t){var e,i=t.currentTarget,n=i[w],r=t.propertyName;n.hasOwnProperty(r)&&(n=n[r],(e=new CustomEvent(P,{bubbles:!0})).attrName=n.name,e.prevValue=n.value||null,e.newValue=n.value=i[r]||null,null==e.prevValue?e[E]=e.attrChange=0:e[k]=e.attrChange=1,nt.call(i,e))}var vt,bt;function xt(t,e){for(var i,n=W(e),r=0,s=n.length;r<s;r++)i=n[r],G.call(t,i)||B(t,i,H(e,i))}})(window,document,Object,"registerElement"),ot();var Qs,Ks=((Qs=$s)&&(Js.__proto__=Qs),((Js.prototype=Object.create(Qs&&Qs.prototype)).constructor=Js).prototype.getStyles=function(){return Xs},Js.prototype._makeImperativeCounterpart=function(){return new fo({_motorHtmlCounterpart:this})},Js.prototype.attributeChangedCallback=function(){for(var t=this,e=[],i=arguments.length;i--;)e[i]=arguments[i];Qs.prototype.attributeChangedCallback.apply(this,e),this._imperativeCounterpartPromise.then(function(){t._updateNodeProperty.apply(t,e)})},Js.prototype._updateNodeProperty=function(t,e,i){i!==e&&(t.match(/opacity/i)?this.imperativeCounterpart[t]=window.parseFloat(i):t.match(/sizeMode/i)?this.imperativeCounterpart[t]=rt(i):(t.match(/rotation/i)||t.match(/scale/i)||t.match(/position/i)||t.match(/absoluteSize/i)||t.match(/proportionalSize/i)||t.match(/align/i)||t.match(/mountPoint/i)||t.match(/origin/i)||t.match(/skew/i))&&(this.imperativeCounterpart[t]=nt(i)))},Js);function Js(){Qs.apply(this,arguments)}at(Ws,Ks),at(Vs,Ks),Ks=document.registerElement("motor-node",Ks);var $s,to=new WeakMap;HTMLElement.prototype.createShadowRoot instanceof Function&&(HTMLElement.prototype.createShadowRoot=st(HTMLElement.prototype.createShadowRoot)),HTMLElement.prototype.attachShadow instanceof Function&&(HTMLElement.prototype.attachShadow=st(HTMLElement.prototype.attachShadow)),ot();F(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=ls&&ls.__esModule?ls:{default:ls};e.default=function(t){var e=null,i=new n.default(function(t){return e=t});return setTimeout(e,t),i}}),F(function(C){var l,h,r,c,s,o,p,a,d,i,u,f,n,_,m,g,y,v,x,w,S,t,O,E,k,T,P,A,e,R,M,F,L,z,j,N,U,D,I,G,V,B,H,W,X,Y,q,Z,Q,K,J,$,tt,et,it,nt,rt,st,ot,at,lt,ht,ct,ut,ft,pt,dt,_t,mt,gt,yt,vt,bt,xt,wt,St,Ct,Ot,Et,kt,Tt,Pt;function At(t,e){for(;t<0;)t+=e;return t%e}function Rt(t){return 1==t[0]&&0==t[3]&&0==t[1]&&1==t[4]&&0==t[2]&&0==t[5]}le.Two=function(t){function r(){var t=document.body.getBoundingClientRect(),e=this.width=t.width,i=this.height=t.height;this.renderer.setSize(e,i,this.ratio),this.trigger(tt.Events.resize,e,i)}function s(){S(s);for(var t,e=0;e<tt.Instances.length;e++)(t=tt.Instances[e]).playing&&t.update()}var o="undefined"==typeof window?void 0===le?null:le:window,J={_indexAmount:0,natural:{slice:Array.prototype.slice,indexOf:Array.prototype.indexOf,keys:Object.keys,bind:Function.prototype.bind,create:Object.create},identity:function(t){return t},isArguments:function(t){return"[object Arguments]"===toString.call(t)},isFunction:function(t){return"[object Function]"===toString.call(t)},isString:function(t){return"[object String]"===toString.call(t)},isNumber:function(t){return"[object Number]"===toString.call(t)},isDate:function(t){return"[object Date]"===toString.call(t)},isRegExp:function(t){return"[object RegExp]"===toString.call(t)},isError:function(t){return"[object Error]"===toString.call(t)},isFinite:function(t){return isFinite(t)&&!isNaN(parseFloat(t))},isNaN:function(t){return J.isNumber(t)&&t!==+t},isBoolean:function(t){return!0===t||!1===t||"[object Boolean]"===toString.call(t)},isNull:function(t){return null===t},isUndefined:function(t){return void 0===t},isEmpty:function(t){return null==t||(_&&(J.isArray(t)||J.isString(t)||J.isArguments(t))?0===t.length:0===J.keys(t).length)},isElement:function(t){return!(!t||1!==t.nodeType)},isArray:Array.isArray||function(t){return"[object Array]"===toString.call(t)},isObject:function(t){var e=typeof t;return"function"==e||"object"==e&&!!t},toArray:function(t){return t?J.isArray(t)?p.call(t):_(t)?J.map(t,J.identity):J.values(t):[]},range:function(t,e,i){null==e&&(e=t||0,t=0);for(var n=Lt(Ft((e-t)/(i=i||1)),0),r=Array(n),s=0;s<n;s++,t+=i)r[s]=t;return r},indexOf:function(t,e){if(J.natural.indexOf)return J.natural.indexOf.call(t,e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},has:function(t,e){return null!=t&&hasOwnProperty.call(t,e)},bind:function(t,e){var i=J.natural.bind;if(i&&t.bind===i)return i.apply(t,p.call(arguments,1));var n=p.call(arguments,2);return function(){t.apply(e,n)}},extend:function(t){for(var e,i=p.call(arguments,1),n=0;n<i.length;n++)for(var r in e=i[n])t[r]=e[r];return t},defaults:function(t){for(var e,i=p.call(arguments,1),n=0;n<i.length;n++)for(var r in e=i[n])void 0===t[r]&&(t[r]=e[r]);return t},keys:function(t){if(!J.isObject(t))return[];if(J.natural.keys)return J.natural.keys(t);var e=[];for(var i in t)J.has(t,i)&&e.push(i);return e},values:function(t){for(var e,i=J.keys(t),n=[],r=0;r<i.length;r++)e=i[r],n.push(t[e]);return n},each:function(t,e,i){for(var n,r=i||this,s=!_(t)&&J.keys(t),o=(s||t).length,a=0;a<o;a++)n=s?s[a]:a,e.call(r,t[n],n,t);return t},map:function(t,e,i){for(var n,r=i||this,s=!_(t)&&J.keys(t),o=(s||t).length,a=[],l=0;l<o;l++)n=s?s[l]:l,a[l]=e.call(r,t[n],n,t);return a},once:function(t){var e=!1;return function(){return e?t:(e=!0,t.apply(this,arguments))}},after:function(e,i){return function(){var t=arguments;if(--e<1)return i.apply(this,t)}},uniqueId:function(t){var e=++J._indexAmount+"";return t?t+e:e}},l=Bt,h=Ht,a=It,u=Gt,c=Ut,f=c/2,$=Nt,e=0,p=J.natural.slice,d=o.performance&&o.performance.now?o.performance:Date,_=function(t){var e,i=null==(e=t)?void 0:e.length;return"number"==typeof i&&0<=i&&i<=9007199254740991},m={temp:o.document?o.document.createElement("div"):{},hasEventListeners:J.isFunction(o.addEventListener),bind:function(t,e,i,n){return this.hasEventListeners?t.addEventListener(e,i,!!n):t.attachEvent("on"+e,i),m},unbind:function(t,e,i,n){return m.hasEventListeners?t.removeEventListeners(e,i,!!n):t.detachEvent("on"+e,i),m},getRequestAnimationFrame:function(){var t,r=0,e=["ms","moz","webkit","o"],i=o.requestAnimationFrame;if(!i){for(var n=0;n<e.length;n++)i=o[e[n]+"RequestAnimationFrame"]||i,t=o[e[n]+"CancelAnimationFrame"]||o[e[n]+"CancelRequestAnimationFrame"]||t;i=i||function(t){var e=(new Date).getTime(),i=Lt(0,16-(e-r)),n=o.setTimeout(function(){t(e+i)},i);return r=e+i,n}}return i.init=J.once(s),i}},tt=o.Two=function(t){var e=J.defaults(t||{},{fullscreen:!1,width:640,height:480,type:tt.Types.svg,autostart:!1});if(J.each(e,function(t,e){"fullscreen"===e||"autostart"===e||(this[e]=t)},this),J.isElement(e.domElement)){var i=e.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+i)||(this.type=tt.Types[i])}if(this.renderer=new tt[this.type](this),tt.Utils.setPlaying.call(this,e.autostart),this.frameCount=0,e.fullscreen){var n=J.bind(r,this);J.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),J.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),m.bind(o,"resize",n),n()}else J.isElement(e.domElement)||(this.renderer.setSize(e.width,e.height,this.ratio),this.width=e.width,this.height=e.height);this.scene=this.renderer.scene,tt.Instances.push(this),S.init()};J.extend(tt,{root:o,Array:o.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.7.0",Identifier:"two_",Properties:{hierarchy:"hierarchy",demotion:"demotion"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"},Commands:{move:"M",line:"L",curve:"C",close:"Z"},Resolution:8,Instances:[],noConflict:function(){return o.Two=t,this},uniqueId:function(){var t=e;return e++,t},Utils:J.extend(J,{performance:d,defineProperty:function(t){var e="_"+t,i="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[i]=!0}})},release:function(t){J.isObject(t)&&(J.isFunction(t.unbind)&&t.unbind(),t.vertices&&(J.isFunction(t.vertices.unbind)&&t.vertices.unbind(),J.each(t.vertices,function(t){J.isFunction(t.unbind)&&t.unbind()})),t.children&&J.each(t.children,function(t){tt.Utils.release(t)}))},xhr:function(t,e){var i=new XMLHttpRequest;return i.open("GET",t),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&e(i.responseText)},i.send(),i},Curve:{CollinearityEpsilon:$(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:.01},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},devicePixelRatio:o.devicePixelRatio||1,getBackingStoreRatio:function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1},getRatio:function(t){return tt.Utils.devicePixelRatio/b(t)},setPlaying:function(t){return this.playing=!!t,this},getComputedMatrix:function(t,i){i=i&&i.identity()||new tt.Matrix;for(var e=t,n=[];e&&e._matrix;)n.push(e._matrix),e=e.parent;return n.reverse(),J.each(n,function(t){var e=t.elements;i.multiply(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9])}),i},deltaTransformPoint:function(t,e,i){var n=e*t.a+i*t.c,r=e*t.b+i*t.d;return new tt.Vector(n,r)},decomposeMatrix:function(t){var e=tt.Utils.deltaTransformPoint(t,0,1),i=tt.Utils.deltaTransformPoint(t,1,0),n=180/Ut*It(e.y,e.x)-90,r=180/Ut*It(i.y,i.x);return{translateX:t.e,translateY:t.f,scaleX:Gt(t.a*t.a+t.b*t.b),scaleY:Gt(t.c*t.c+t.d*t.d),skewX:n,skewY:r,rotation:n}},applySvgAttributes:function(t,e){var i,n,r,s,o={},a={};if(getComputedStyle){var l=getComputedStyle(t);for(i=l.length;i--;)void 0!==(r=l[n=l[i]])&&(a[n]=r)}for(i=t.attributes.length;i--;)o[(s=t.attributes[i]).nodeName]=s.value;for(n in J.isUndefined(a.opacity)||(a["stroke-opacity"]=a.opacity,a["fill-opacity"]=a.opacity),J.extend(a,o),a.visible=!(J.isUndefined(a.display)&&"none"===a.display)||J.isUndefined(a.visibility)&&"hidden"===a.visibility,a)switch(r=a[n],n){case"transform":if("none"===r)break;if(null===(t.getCTM?t.getCTM():null))break;var h=tt.Utils.decomposeMatrix(t.getCTM());e.translation.set(h.translateX,h.translateY),e.rotation=h.rotation,e.scale=h.scaleX;var c=parseFloat((a.x+"").replace("px")),u=parseFloat((a.y+"").replace("px"));c&&(e.translation.x=c),u&&(e.translation.y=u);break;case"visible":e.visible=r;break;case"stroke-linecap":e.cap=r;break;case"stroke-linejoin":e.join=r;break;case"stroke-miterlimit":e.miter=r;break;case"stroke-width":e.linewidth=parseFloat(r);break;case"stroke-opacity":case"fill-opacity":case"opacity":e.opacity=parseFloat(r);break;case"fill":case"stroke":e[n]=/url\(\#.*\)/i.test(r)?this.getById(r.replace(/url\(\#(.*)\)/i,"$1")):"none"===r?"transparent":r;break;case"id":e.id=r;break;case"class":e.classList=r.split(" ")}return e},read:{svg:function(){return tt.Utils.read.g.apply(this,arguments)},g:function(t){var e=new tt.Group;tt.Utils.applySvgAttributes.call(this,t,e);for(var i=0,n=t.childNodes.length;i<n;i++){var r=t.childNodes[i],s=r.nodeName;if(!s)return;var o=s.replace(/svg\:/gi,"").toLowerCase();if(o in tt.Utils.read){var a=tt.Utils.read[o].call(e,r);e.add(a)}}return e},polygon:function(t,e){var i=t.getAttribute("points"),n=[];i.replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(t,e,i){n.push(new tt.Anchor(parseFloat(e),parseFloat(i)))});var r=new tt.Path(n,!e).noStroke();return r.fill="black",tt.Utils.applySvgAttributes.call(this,t,r)},polyline:function(t){return tt.Utils.read.polygon.call(this,t,!0)},path:function(t){var W,X,e=t.getAttribute("d"),Y=new tt.Anchor,q=!1,Z=!1,u=e.match(/[a-df-z][^a-df-z]*/gi),Q=u.length-1;J.each(u.slice(0),function(t,e){var i,n=t[0],r=n.toLowerCase(),s=t.slice(1).trim().split(/[\s,]+|(?=\s?[+\-])/),o=[];switch(e<=0&&(u=[]),r){case"h":case"v":1<s.length&&(i=1);break;case"m":case"l":case"t":2<s.length&&(i=2);break;case"s":case"q":4<s.length&&(i=4);break;case"c":6<s.length&&(i=6)}if(i){for(var a,l=0,h=s.length,c=0;l<h;l+=i)a=n,0<c&&("m"===n?a="l":"M"===n&&(a="L")),o.push([a].concat(s.slice(l,l+i)).join(" ")),c++;u=Array.prototype.concat.apply(u,o)}else u.push(t)});var K=[];if(J.each(u,function(t,e){var i,n,r,s,o,a,l,h,c,u,f,p,d=t[0],_=d.toLowerCase();switch(X=(X=(X=t.slice(1).trim()).replace(/(-?\d+(?:\.\d*)?)[eE]([+\-]?\d+)/g,function(t,e,i){return parseFloat(e)*$(10,i)})).split(/[\s,]+|(?=\s?[+\-])/),Z=d===_,_){case"z":Q<=e?q=!0:(n=Y.x,r=Y.y,i=new tt.Anchor(n,r,void 0,void 0,void 0,void 0,tt.Commands.close));break;case"m":case"l":n=parseFloat(X[0]),r=parseFloat(X[1]),i=new tt.Anchor(n,r,void 0,void 0,void 0,void 0,"m"===_?tt.Commands.move:tt.Commands.line),Z&&i.addSelf(Y),Y=i;break;case"h":case"v":var m="x"==(M="h"===_?"x":"y")?"y":"x";(i=new tt.Anchor(void 0,void 0,void 0,void 0,void 0,void 0,tt.Commands.line))[M]=parseFloat(X[0]),i[m]=Y[m],Z&&(i[M]+=Y[M]),Y=i;break;case"c":case"s":s=Y.x,o=Y.y,W=W||new tt.Vector,f="c"===_?(a=parseFloat(X[0]),l=parseFloat(X[1]),h=parseFloat(X[2]),c=parseFloat(X[3]),u=parseFloat(X[4]),parseFloat(X[5])):(a=(p=it(Y,W,Z)).x,l=p.y,h=parseFloat(X[0]),c=parseFloat(X[1]),u=parseFloat(X[2]),parseFloat(X[3])),Z&&(a+=s,l+=o,h+=s,c+=o,u+=s,f+=o),J.isObject(Y.controls)||tt.Anchor.AppendCurveProperties(Y),Y.controls.right.set(a-Y.x,l-Y.y),i=new tt.Anchor(u,f,h-u,c-f,void 0,void 0,tt.Commands.curve),W=(Y=i).controls.left;break;case"t":case"q":s=Y.x,o=Y.y,(W=W||new tt.Vector).isZero()?(a=s,l=o):(a=W.x,o=W.y),f="q"===_?(h=parseFloat(X[0]),c=parseFloat(X[1]),u=parseFloat(X[1]),parseFloat(X[2])):(h=(p=it(Y,W,Z)).x,c=p.y,u=parseFloat(X[0]),parseFloat(X[1])),Z&&(a+=s,l+=o,h+=s,c+=o,u+=s,f+=o),J.isObject(Y.controls)||tt.Anchor.AppendCurveProperties(Y),Y.controls.right.set(a-Y.x,l-Y.y),i=new tt.Anchor(u,f,h-u,c-f,void 0,void 0,tt.Commands.curve),W=(Y=i).controls.left;break;case"a":s=Y.x,o=Y.y;var g=parseFloat(X[0]),y=parseFloat(X[1]),v=parseFloat(X[2])*Ut/180,b=parseFloat(X[3]),x=parseFloat(X[4]);u=parseFloat(X[5]),f=parseFloat(X[6]),Z&&(u+=s,f+=o);var w=(u-s)/2,S=(f-o)/2,C=w*Ht(v)+S*Bt(v),O=-w*Bt(v)+S*Ht(v),E=g*g,k=y*y,T=C*C,P=O*O,A=T/E+P/k;1<A&&(g*=Gt(A),y*=Gt(A));var R=Gt((E*k-E*P-k*T)/(E*P+k*T));J.isNaN(R)?R=0:b!=x&&0<R&&(R*=-1);var M,F=R*g*O/y,L=-R*y*C/g,z=F*Ht(v)-L*Bt(v)+(s+u)/2,j=F*Bt(v)+L*Ht(v)+(o+f)/2,N=function(t){return Gt(Nt(t[0],2)+Nt(t[1],2))},U=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(N(t)*N(e))},D=(M=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(U(t,e))})([1,0],[(C-F)/g,(O-L)/y]),I=[(C-F)/g,(O-L)/y],G=[(-C-F)/g,(-O-L)/y],V=M(I,G);U(I,G)<=-1&&(V=Ut),1<=U(I,G)&&(V=0),b&&(V=et(V,2*Ut)),x&&0<V&&(V-=2*Ut);var B=tt.Resolution,H=(new tt.Matrix).translate(z,j).rotate(v);(i=J.map(J.range(B),function(t){var e=(1-t/(B-1))*V+D,i=g*Ht(e),n=y*Bt(e),r=H.multiply(i,n,1);return new tt.Anchor(r.x,r.y,!1,!1,!1,!1,tt.Commands.line)})).push(new tt.Anchor(u,f,!1,!1,!1,!1,tt.Commands.line)),Y=i[i.length-1],W=Y.controls.left}i&&(J.isArray(i)?K=K.concat(i):K.push(i))}),!(K.length<=1)){(e=new tt.Path(K,q,void 0,!0).noStroke()).fill="black";var i=e.getBoundingClientRect(!0);return i.centroid={x:i.left+i.width/2,y:i.top+i.height/2},J.each(e.vertices,function(t){t.subSelf(i.centroid)}),e.translation.addSelf(i.centroid),tt.Utils.applySvgAttributes.call(this,t,e)}},circle:function(t){var e=parseFloat(t.getAttribute("cx")),i=parseFloat(t.getAttribute("cy")),n=parseFloat(t.getAttribute("r")),r=new tt.Circle(e,i,n).noStroke();return r.fill="black",tt.Utils.applySvgAttributes.call(this,t,r)},ellipse:function(t){var e=parseFloat(t.getAttribute("cx")),i=parseFloat(t.getAttribute("cy")),n=parseFloat(t.getAttribute("rx")),r=parseFloat(t.getAttribute("ry")),s=new tt.Ellipse(e,i,n,r).noStroke();return s.fill="black",tt.Utils.applySvgAttributes.call(this,t,s)},rect:function(t){var e=parseFloat(t.getAttribute("x"))||0,i=parseFloat(t.getAttribute("y"))||0,n=parseFloat(t.getAttribute("width")),r=parseFloat(t.getAttribute("height")),s=new tt.Rectangle(e+n/2,i+r/2,n,r).noStroke();return s.fill="black",tt.Utils.applySvgAttributes.call(this,t,s)},line:function(t){var e=parseFloat(t.getAttribute("x1")),i=parseFloat(t.getAttribute("y1")),n=parseFloat(t.getAttribute("x2")),r=parseFloat(t.getAttribute("y2")),s=new tt.Line(e,i,n,r).noFill();return tt.Utils.applySvgAttributes.call(this,t,s)},lineargradient:function(t){for(var e=parseFloat(t.getAttribute("x1")),i=parseFloat(t.getAttribute("y1")),n=parseFloat(t.getAttribute("x2")),r=parseFloat(t.getAttribute("y2")),s=(n+e)/2,o=(r+i)/2,a=[],l=0;l<t.children.length;l++){var h,c=t.children[l],u=parseFloat(c.getAttribute("offset")),f=c.getAttribute("stop-color"),p=c.getAttribute("stop-opacity"),d=c.getAttribute("style");if(J.isNull(f))f=(h=!!d&&d.match(/stop\-color\:\s?([\#a-fA-F0-9]*)/))&&1<h.length?h[1]:void 0;if(J.isNull(p))p=(h=!!d&&d.match(/stop\-opacity\:\s?([0-9\.\-]*)/))&&1<h.length?parseFloat(h[1]):1;a.push(new tt.Gradient.Stop(u,f,p))}var _=new tt.LinearGradient(e-s,i-o,n-s,r-o,a);return tt.Utils.applySvgAttributes.call(this,t,_)},radialgradient:function(t){var e=parseFloat(t.getAttribute("cx"))||0,i=parseFloat(t.getAttribute("cy"))||0,n=parseFloat(t.getAttribute("r")),r=parseFloat(t.getAttribute("fx")),s=parseFloat(t.getAttribute("fy"));J.isNaN(r)&&(r=e),J.isNaN(s)&&(s=i);for(var o=Dt(e+r)/2,a=Dt(i+s)/2,l=[],h=0;h<t.children.length;h++){var c,u=t.children[h],f=parseFloat(u.getAttribute("offset")),p=u.getAttribute("stop-color"),d=u.getAttribute("stop-opacity"),_=u.getAttribute("style");if(J.isNull(p))p=(c=!!_&&_.match(/stop\-color\:\s?([\#a-fA-F0-9]*)/))&&1<c.length?c[1]:void 0;if(J.isNull(d))d=(c=!!_&&_.match(/stop\-opacity\:\s?([0-9\.\-]*)/))&&1<c.length?parseFloat(c[1]):1;l.push(new tt.Gradient.Stop(f,p,d))}var m=new tt.RadialGradient(e-o,i-a,n,l,r-o,s-a);return tt.Utils.applySvgAttributes.call(this,t,m)}},subdivide:function(r,s,o,a,l,h,c,u,t){var f=(t=t||tt.Utils.Curve.RecursionLimit)+1;return r===c&&s===u?[new tt.Anchor(c,u)]:J.map(J.range(0,f),function(t){var e=t/f,i=x(e,r,o,l,c),n=x(e,s,a,h,u);return new tt.Anchor(i,n)})},getPointOnCubicBezier:function(t,e,i,n,r){var s=1-t;return s*s*s*e+3*s*s*t*i+3*s*t*t*n+t*t*t*r},getCurveLength:function(n,r,s,o,a,l,h,c,t){if(n!==s||r!==o||a!==h||l!==c)return w(function(t){var e=((9*(s-a)+3*(h-n))*t+(6*(n+a)-12*s))*t+3*(s-n),i=((9*(o-l)+3*(c-r))*t+(6*(r+l)-12*o))*t+3*(o-r);return u(e*e+i*i)},0,1,t||tt.Utils.Curve.RecursionLimit);var e=h-n,i=c-r;return u(e*e+i*i)},integrate:function(t,e,i,n){for(var r,s=tt.Utils.Curve.abscissas[n-2],o=tt.Utils.Curve.weights[n-2],a=.5*(i-e),l=a+e,h=0,c=1&n?o[h++]*t(l):0;h<n+1>>1;)r=a*s[h],c+=o[h++]*(t(l+r)+t(l-r));return a*c},getCurveFromPoints:function(t,e){for(var i,n=t.length,r=0;r<n;r++){i=t[r],J.isObject(i.controls)||tt.Anchor.AppendCurveProperties(i);var s=e?et(r-1,n):Lt(r-1,0),o=e?et(r+1,n):Mt(r+1,n-1),a=t[s],l=i,h=t[o];v(a,l,h),l._command=0===r?tt.Commands.move:tt.Commands.curve,l.controls.left.x=J.isNumber(l.controls.left.x)?l.controls.left.x:l.x,l.controls.left.y=J.isNumber(l.controls.left.y)?l.controls.left.y:l.y,l.controls.right.x=J.isNumber(l.controls.right.x)?l.controls.right.x:l.x,l.controls.right.y=J.isNumber(l.controls.right.y)?l.controls.right.y:l.y}},getControlPoints:function(t,e,i){var n=y(t,e),r=y(i,e),s=g(t,e),o=g(i,e),a=(n+r)/2;return e.u=J.isObject(e.controls.left)?e.controls.left:new tt.Vector(0,0),e.v=J.isObject(e.controls.right)?e.controls.right:new tt.Vector(0,0),s<1e-4||o<1e-4?e._relative||(e.controls.left.copy(e),e.controls.right.copy(e)):(s*=.33,o*=.33,r<n?a+=f:a-=f,e.controls.left.x=h(a)*s,e.controls.left.y=l(a)*s,a-=c,e.controls.right.x=h(a)*o,e.controls.right.y=l(a)*o,e._relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y)),e},getReflection:function(t,e,i){return new tt.Vector(2*t.x-(e.x+t.x)-(i?t.x:0),2*t.y-(e.y+t.y)-(i?t.y:0))},getAnchorsFromArcData:function(t,e,o,a,l,h,c){(new tt.Matrix).translate(t.x,t.y).rotate(e);var u=tt.Resolution;return J.map(J.range(u),function(t){var e=(t+1)/u;c&&(e=1-e);var i=e*h+l,n=o*Ht(i),r=a*Bt(i),s=new tt.Anchor(n,r);return tt.Anchor.AppendCurveProperties(s),s.command=tt.Commands.line,s})},ratioBetween:function(t,e){return(t.x*e.x+t.y*e.y)/(t.length()*e.length())},angleBetween:function(t,e){var i,n;return n=4<=arguments.length?(i=t-arguments[2],e-arguments[3]):(i=t.x-e.x,t.y-e.y),a(n,i)},distanceBetweenSquared:function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},distanceBetween:function(t,e){return u(i(t,e))},lerp:function(t,e,i){return i*(e-t)+t},toFixed:function(t){return jt(1e3*t)/1e3},mod:function(t,e){for(;t<0;)t+=e;return t%e},Collection:function(){Array.call(this),1<arguments.length?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(t){this.name="two.js",this.message=t},Events:{on:function(t,e){return this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push(e),this},off:function(t,e){if(!this._events)return this;if(!t&&!e)return this._events={},this;for(var i=t?[t]:J.keys(this._events),n=0,r=i.length;n<r;n++){t=i[n];var s=this._events[t];if(s){var o=[];if(e)for(var a,l=0,h=s.length;l<h;l++)a=(a=s[l]).callback?a.callback:a,e&&e!==a&&o.push(a);this._events[t]=o}}return this},trigger:function(t){if(!this._events)return this;var e=p.call(arguments,1),i=this._events[t];return i&&n(this,i,e),this},listen:function(t,e,i){var n=this;if(t){var r=function(){i.apply(n,arguments)};r.obj=t,r.name=e,r.callback=i,t.on(e,r)}return this},ignore:function(t,e,i){return t.off(e,i),this}}})}),tt.Utils.Events.bind=tt.Utils.Events.on,tt.Utils.Events.unbind=tt.Utils.Events.off;var n=function(e,i,n){var t;switch(n.length){case 0:t=function(t){i[t].call(e,n[0])};break;case 1:t=function(t){i[t].call(e,n[0],n[1])};break;case 2:t=function(t){i[t].call(e,n[0],n[1],n[2])};break;case 3:t=function(t){i[t].call(e,n[0],n[1],n[2],n[3])};break;default:t=function(t){i[t].apply(e,n)}}for(var r=0;r<i.length;r++)t(r)};tt.Utils.Error.prototype=new Error,tt.Utils.Error.prototype.constructor=tt.Utils.Error,tt.Utils.Collection.prototype=[],tt.Utils.Collection.prototype.constructor=tt.Utils.Collection,J.extend(tt.Utils.Collection.prototype,tt.Utils.Events,{pop:function(){var t=Array.prototype.pop.apply(this,arguments);return this.trigger(tt.Events.remove,[t]),t},shift:function(){var t=Array.prototype.shift.apply(this,arguments);return this.trigger(tt.Events.remove,[t]),t},push:function(){var t=Array.prototype.push.apply(this,arguments);return this.trigger(tt.Events.insert,arguments),t},unshift:function(){var t=Array.prototype.unshift.apply(this,arguments);return this.trigger(tt.Events.insert,arguments),t},splice:function(){var t,e=Array.prototype.splice.apply(this,arguments);return this.trigger(tt.Events.remove,e),2<arguments.length&&(t=this.slice(arguments[0],arguments[0]+arguments.length-2),this.trigger(tt.Events.insert,t),this.trigger(tt.Events.order)),e},sort:function(){return Array.prototype.sort.apply(this,arguments),this.trigger(tt.Events.order),this},reverse:function(){return Array.prototype.reverse.apply(this,arguments),this.trigger(tt.Events.order),this}});var g=tt.Utils.distanceBetween,i=(tt.Utils.getAnchorsFromArcData,tt.Utils.distanceBetweenSquared),y=(tt.Utils.ratioBetween,tt.Utils.angleBetween),v=tt.Utils.getControlPoints,et=(tt.Utils.getCurveFromPoints,tt.Utils.solveSegmentIntersection,tt.Utils.decoupleShapes,tt.Utils.mod),b=tt.Utils.getBackingStoreRatio,x=tt.Utils.getPointOnCubicBezier,w=(tt.Utils.getCurveLength,tt.Utils.integrate),it=tt.Utils.getReflection;J.extend(tt.prototype,tt.Utils.Events,{appendTo:function(t){return t.appendChild(this.renderer.domElement),this},play:function(){return tt.Utils.setPlaying.call(this,!0),this.trigger(tt.Events.play)},pause:function(){return this.playing=!1,this.trigger(tt.Events.pause)},update:function(){var t=!!this._lastFrame,e=d.now();this.frameCount++,t&&(this.timeDelta=parseFloat((e-this._lastFrame).toFixed(3))),this._lastFrame=e;var i=this.width,n=this.height,r=this.renderer;return i===r.width&&n===r.height||r.setSize(i,n,this.ratio),this.trigger(tt.Events.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(tt.Events.render,this.frameCount)},add:function(t){var e=t;return e instanceof Array||(e=J.toArray(arguments)),this.scene.add(e),this},remove:function(t){var e=t;return e instanceof Array||(e=J.toArray(arguments)),this.scene.remove(e),this},clear:function(){return this.scene.remove(J.toArray(this.scene.children)),this},makeLine:function(t,e,i,n){var r=new tt.Line(t,e,i,n);return this.scene.add(r),r},makeRectangle:function(t,e,i,n){var r=new tt.Rectangle(t,e,i,n);return this.scene.add(r),r},makeRoundedRectangle:function(t,e,i,n,r){var s=new tt.RoundedRectangle(t,e,i,n,r);return this.scene.add(s),s},makeCircle:function(t,e,i){var n=new tt.Circle(t,e,i);return this.scene.add(n),n},makeEllipse:function(t,e,i,n){var r=new tt.Ellipse(t,e,i,n);return this.scene.add(r),r},makeStar:function(t,e,i,n,r){var s=new tt.Star(t,e,i,n,r);return this.scene.add(s),s},makeCurve:function(t){var e=arguments,i=arguments.length,n=t;if(!J.isArray(t)){n=[];for(var r,s,o=0;o<i&&(r=e[o],J.isNumber(r));o+=2)s=e[o+1],n.push(new tt.Anchor(r,s))}var a=arguments[i-1],l=new tt.Path(n,!J.isBoolean(a)||!a,!0),h=l.getBoundingClientRect();return l.center().translation.set(h.left+h.width/2,h.top+h.height/2),this.scene.add(l),l},makePolygon:function(t,e,i,n){var r=new tt.Polygon(t,e,i,n);return this.scene.add(r),r},makeArcSegment:function(t,e,i,n,r,s,o){var a=new tt.ArcSegment(t,e,i,n,r,s,o);return this.scene.add(a),a},makePath:function(t){var e=arguments,i=arguments.length,n=t;if(!J.isArray(t)){n=[];for(var r,s,o=0;o<i&&(r=e[o],J.isNumber(r));o+=2)s=e[o+1],n.push(new tt.Anchor(r,s))}var a=arguments[i-1],l=new tt.Path(n,!J.isBoolean(a)||!a),h=l.getBoundingClientRect();return l.center().translation.set(h.left+h.width/2,h.top+h.height/2),this.scene.add(l),l},makeText:function(t,e,i,n){var r=new tt.Text(t,e,i,n);return this.add(r),r},makeLinearGradient:function(t,e,i,n){var r=p.call(arguments,4),s=new tt.LinearGradient(t,e,i,n,r);return this.add(s),s},makeRadialGradient:function(t,e,i){var n=p.call(arguments,3),r=new tt.RadialGradient(t,e,i,n);return this.add(r),r},makeSprite:function(t,e,i,n,r,s,o){var a=new tt.Sprite(t,e,i,n,r,s);return o&&a.play(),this.add(a),a},makeImageSequence:function(t,e,i,n,r){var s=new tt.ImageSequence(t,e,i,n);return r&&s.play(),this.add(s),s},makeTexture:function(t,e){return new tt.Texture(t,e)},makeGroup:function(t){var e=t;e instanceof Array||(e=J.toArray(arguments));var i=new tt.Group;return this.scene.add(i),i.add(e),i},interpret:function(t,e){var i=t.tagName.toLowerCase();if(!(i in tt.Utils.read))return null;var n=tt.Utils.read[i].call(this,t);return e&&n instanceof tt.Group?this.add(n.children):this.add(n),n},load:function(t,e){var i,n,r=[];if(/.*\.svg/gi.test(t))return tt.Utils.xhr(t,J.bind(function(t){for(m.temp.innerHTML=t,n=0;n<m.temp.children.length;n++)i=m.temp.children[n],r.push(this.interpret(i));e(r.length<=1?r[0]:r,m.temp.children.length<=1?m.temp.children[0]:m.temp.children)},this)),this;for(m.temp.innerHTML=t,n=0;n<m.temp.children.length;n++)i=m.temp.children[n],r.push(this.interpret(i));return e(r.length<=1?r[0]:r,m.temp.children.length<=1?m.temp.children[0]:m.temp.children),this}});var S=m.getRequestAnimationFrame();return C.exports&&(C.exports=tt),tt}(le.Two),kt=le.Two,Tt=kt.Utils,Pt=kt.Registry=function(){this.map={}},Tt.extend(Pt,{}),Tt.extend(Pt.prototype,{add:function(t,e){return this.map[t]=e,this},remove:function(t){return delete this.map[t],this},get:function(t){return this.map[t]},contains:function(t){return t in this.map}}),function(i){var t=i.Utils,e=i.Vector=function(t,e){this.x=t||0,this.y=e||0};t.extend(e,{zero:new i.Vector}),t.extend(e.prototype,i.Utils.Events,{set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new e(this.x,this.y)},add:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this},multiplySelf:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divideScalar:function(t){return t?(this.x/=t,this.y/=t):this.set(0,0),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Gt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Gt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e},lerp:function(t,e){var i=(t.x-this.x)*e+this.x,n=(t.y-this.y)*e+this.y;return this.set(i,n)},isZero:function(t){return t=void 0===t?1e-4:t,this.length()<t},toString:function(){return this.x+", "+this.y},toObject:function(){return{x:this.x,y:this.y}},rotate:function(t){var e=Ht(t),i=Bt(t);return this.x=this.x*e-this.y*i,this.y=this.x*i+this.y*e,this}});var n={set:function(t,e){return this._x=t,this._y=e,this.trigger(i.Events.change)},copy:function(t){return this._x=t.x,this._y=t.y,this.trigger(i.Events.change)},clear:function(){return this._x=0,this._y=0,this.trigger(i.Events.change)},clone:function(){return new e(this._x,this._y)},add:function(t,e){return this._x=t.x+e.x,this._y=t.y+e.y,this.trigger(i.Events.change)},addSelf:function(t){return this._x+=t.x,this._y+=t.y,this.trigger(i.Events.change)},sub:function(t,e){return this._x=t.x-e.x,this._y=t.y-e.y,this.trigger(i.Events.change)},subSelf:function(t){return this._x-=t.x,this._y-=t.y,this.trigger(i.Events.change)},multiplySelf:function(t){return this._x*=t.x,this._y*=t.y,this.trigger(i.Events.change)},multiplyScalar:function(t){return this._x*=t,this._y*=t,this.trigger(i.Events.change)},divideScalar:function(t){return t?(this._x/=t,this._y/=t,this.trigger(i.Events.change)):this.clear()},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this._x*t.x+this._y*t.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},length:function(){return Gt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Gt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this._x-t.x,i=this._y-t.y;return e*e+i*i},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e},lerp:function(t,e){var i=(t.x-this._x)*e+this._x,n=(t.y-this._y)*e+this._y;return this.set(i,n)},isZero:function(t){return t=void 0===t?1e-4:t,this.length()<t},toString:function(){return this._x+", "+this._y},toObject:function(){return{x:this._x,y:this._y}},rotate:function(t){var e=Ht(t),i=Bt(t);return this._x=this._x*e-this._y*i,this._y=this._x*i+this._y*e,this}},r={enumerable:!0,get:function(){return this._x},set:function(t){this._x=t,this.trigger(i.Events.change,"x")}},s={enumerable:!0,get:function(){return this._y},set:function(t){this._y=t,this.trigger(i.Events.change,"y")}};i.Vector.prototype.bind=i.Vector.prototype.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",r),Object.defineProperty(this,"y",s),t.extend(this,n),this._bound=!0),i.Utils.Events.bind.apply(this,arguments),this}}(le.Two),function(a){var l=a.Commands,h=a.Utils,c=a.Anchor=function(t,e,i,n,r,s,o){return a.Vector.call(this,t,e),this._broadcast=h.bind(function(){this.trigger(a.Events.change)},this),this._command=o||l.move,this._relative=!0,o?(c.AppendCurveProperties(this),h.isNumber(i)&&(this.controls.left.x=i),h.isNumber(n)&&(this.controls.left.y=n),h.isNumber(r)&&(this.controls.right.x=r),void(h.isNumber(s)&&(this.controls.right.y=s))):this};h.extend(c,{AppendCurveProperties:function(t){t.controls={left:new a.Vector(0,0),right:new a.Vector(0,0)}}});var t={listen:function(){return h.isObject(this.controls)||c.AppendCurveProperties(this),this.controls.left.bind(a.Events.change,this._broadcast),this.controls.right.bind(a.Events.change,this._broadcast),this},ignore:function(){return this.controls.left.unbind(a.Events.change,this._broadcast),this.controls.right.unbind(a.Events.change,this._broadcast),this},clone:function(){var t=this.controls,e=new a.Anchor(this.x,this.y,t&&t.left.x,t&&t.left.y,t&&t.right.x,t&&t.right.y,this.command);return e.relative=this._relative,e},toObject:function(){var t={x:this.x,y:this.y};return this._command&&(t.command=this._command),this._relative&&(t.relative=this._relative),this.controls&&(t.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),t},toString:function(){return this.controls?[this._x,this._y,this.controls.left.x,this.controls.left.y,this.controls.right.x,this.controls.right.y].join(", "):[this._x,this._y].join(", ")}};Object.defineProperty(c.prototype,"command",{enumerable:!0,get:function(){return this._command},set:function(t){return this._command=t,this._command!==l.curve||h.isObject(this.controls)||c.AppendCurveProperties(this),this.trigger(a.Events.change)}}),Object.defineProperty(c.prototype,"relative",{enumerable:!0,get:function(){return this._relative},set:function(t){return this._relative==t?this:(this._relative=!!t,this.trigger(a.Events.change))}}),h.extend(c.prototype,a.Vector.prototype,t),a.Anchor.prototype.bind=a.Anchor.prototype.on=function(){a.Vector.prototype.bind.apply(this,arguments),h.extend(this,t)},a.Anchor.prototype.unbind=a.Anchor.prototype.off=function(){a.Vector.prototype.unbind.apply(this,arguments),h.extend(this,t)}}(le.Two),St=le.Two,Ct=Vt,Ot=St.Utils,Et=St.Matrix=function(t){this.elements=new St.Array(9);var e=t;Ot.isArray(e)||(e=Ot.toArray(arguments)),this.identity().set(e)},Ot.extend(Et,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(t,e,i){if(e.length<=3){var n=e[0]||0,r=e[1]||0,s=e[2]||0;return{x:t[0]*n+t[1]*r+t[2]*s,y:t[3]*n+t[4]*r+t[5]*s,z:t[6]*n+t[7]*r+t[8]*s}}var o=t[0],a=t[1],l=t[2],h=t[3],c=t[4],u=t[5],f=t[6],p=t[7],d=t[8],_=e[0],m=e[1],g=e[2],y=e[3],v=e[4],b=e[5],x=e[6],w=e[7],S=e[8];return(i=i||new St.Array(9))[0]=o*_+a*y+l*x,i[1]=o*m+a*v+l*w,i[2]=o*g+a*b+l*S,i[3]=h*_+c*y+u*x,i[4]=h*m+c*v+u*w,i[5]=h*g+c*b+u*S,i[6]=f*_+p*y+d*x,i[7]=f*m+p*v+d*w,i[8]=f*g+p*b+d*S,i}}),Ot.extend(Et.prototype,St.Utils.Events,{set:function(t){var e=t;return Ot.isArray(e)||(e=Ot.toArray(arguments)),Ot.extend(this.elements,e),this.trigger(St.Events.change)},identity:function(){return this.set(Et.Identity),this},multiply:function(i,t,e,n,r){var s=arguments,o=s.length;if(o<=1)return Ot.each(this.elements,function(t,e){this.elements[e]=t*i},this),this.trigger(St.Events.change);if(o<=3)return i=i||0,t=t||0,e=e||0,{x:(r=this.elements)[0]*i+r[1]*t+r[2]*e,y:r[3]*i+r[4]*t+r[5]*e,z:r[6]*i+r[7]*t+r[8]*e};var a=this.elements,l=a[0],h=a[1],c=a[2],u=a[3],f=a[4],p=a[5],d=a[6],_=a[7],m=a[8],g=s[0],y=s[1],v=s[2],b=s[3],x=s[4],w=s[5],S=s[6],C=s[7],O=s[8];return this.elements[0]=l*g+h*b+c*S,this.elements[1]=l*y+h*x+c*C,this.elements[2]=l*v+h*w+c*O,this.elements[3]=u*g+f*b+p*S,this.elements[4]=u*y+f*x+p*C,this.elements[5]=u*v+f*w+p*O,this.elements[6]=d*g+_*b+m*S,this.elements[7]=d*y+_*x+m*C,this.elements[8]=d*v+_*w+m*O,this.trigger(St.Events.change)},inverse:function(t){var e=this.elements;t=t||new St.Matrix;var i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],h=e[7],c=e[8],u=c*o-a*h,f=-c*s+a*l,p=h*s-o*l,d=i*u+n*f+r*p;return d?(d=1/d,t.elements[0]=u*d,t.elements[1]=(-c*n+r*h)*d,t.elements[2]=(a*n-r*o)*d,t.elements[3]=f*d,t.elements[4]=(c*i-r*l)*d,t.elements[5]=(-a*i+r*s)*d,t.elements[6]=p*d,t.elements[7]=(-h*i+n*l)*d,t.elements[8]=(o*i-n*s)*d,t):null},scale:function(t,e){return arguments.length<=1&&(e=t),this.multiply(t,0,0,0,e,0,0,0,1)},rotate:function(t){var e=Ht(t),i=Bt(t);return this.multiply(e,-i,0,i,e,0,0,0,1)},translate:function(t,e){return this.multiply(1,0,t,0,1,e,0,0,1)},skewX:function(t){var e=Ct(t);return this.multiply(1,e,0,0,1,0,0,0,1)},skewY:function(t){var e=Ct(t);return this.multiply(1,0,0,e,1,0,0,0,1)},toString:function(t){var e=[];return this.toArray(t,e),e.join(" ")},toArray:function(t,e){var i=this.elements,n=!!e,r=parseFloat(i[0].toFixed(3)),s=parseFloat(i[1].toFixed(3)),o=parseFloat(i[2].toFixed(3)),a=parseFloat(i[3].toFixed(3)),l=parseFloat(i[4].toFixed(3)),h=parseFloat(i[5].toFixed(3));if(t){var c=parseFloat(i[6].toFixed(3)),u=parseFloat(i[7].toFixed(3)),f=parseFloat(i[8].toFixed(3));return n?(e[0]=r,e[1]=a,e[2]=c,e[3]=s,e[4]=l,e[5]=u,e[6]=o,e[7]=h,void(e[8]=f)):[r,a,c,s,l,u,o,h,f]}return n?(e[0]=r,e[1]=a,e[2]=s,e[3]=l,e[4]=o,void(e[5]=h)):[r,a,s,l,o,h]},clone:function(){var t,e,i,n,r,s,o,a,l;return t=this.elements[0],e=this.elements[1],i=this.elements[2],n=this.elements[3],r=this.elements[4],s=this.elements[5],o=this.elements[6],a=this.elements[7],l=this.elements[8],new St.Matrix(t,e,i,n,r,s,o,a,l)}}),gt=le.Two,yt=gt.Utils.mod,vt=gt.Utils.toFixed,bt=gt.Utils,xt={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(t,e){var i=t,n=document.createElementNS(this.ns,i);return"svg"===i&&(e=bt.defaults(e||{},{version:this.version})),bt.isEmpty(e)||xt.setAttributes(n,e),n},setAttributes:function(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)t.setAttribute(i[n],e[i[n]]);return this},removeAttributes:function(t,e){for(var i in e)t.removeAttribute(i);return this},toString:function(t,e){for(var i,n=t.length,r=n-1,s="",o=0;o<n;o++){var a,l,h,c,u,f,p,d,_,m=t[o],g=e?yt(o-1,n):Lt(o-1,0),y=e?yt(o+1,n):Mt(o+1,r),v=t[g],b=t[y],x=vt(m._x),w=vt(m._y);switch(m._command){case gt.Commands.close:a=gt.Commands.close;break;case gt.Commands.curve:f=v.controls&&v.controls.right||gt.Vector.zero,p=m.controls&&m.controls.left||gt.Vector.zero,h=v._relative?(l=vt(f.x+v.x),vt(f.y+v.y)):(l=vt(f.x),vt(f.y)),u=m._relative?(c=vt(p.x+m.x),vt(p.y+m.y)):(c=vt(p.x),vt(p.y)),a=(0===o?gt.Commands.move:gt.Commands.curve)+" "+l+" "+h+" "+c+" "+u+" "+x+" "+w;break;case gt.Commands.move:i=m,a=gt.Commands.move+" "+x+" "+w;break;default:a=m._command+" "+x+" "+w}r<=o&&e&&(m._command===gt.Commands.curve&&(b=i,d=m.controls&&m.controls.right||m,_=b.controls&&b.controls.left||b,h=m._relative?(l=vt(d.x+m.x),vt(d.y+m.y)):(l=vt(d.x),vt(d.y)),u=b._relative?(c=vt(_.x+b.x),vt(_.y+b.y)):(c=vt(_.x),vt(_.y)),a+=" C "+l+" "+h+" "+c+" "+u+" "+(x=vt(b.x))+" "+(w=vt(b.y))),a+=" Z"),s+=a+" "}return s},getClip:function(t){var e=t._renderer.clip;if(!e){for(var i=t;i.parent;)i=i.parent;e=t._renderer.clip=xt.createElement("clipPath"),i.defs.appendChild(e)}return e},group:{appendChild:function(t){var e=t._renderer.elem;if(e){var i=e.nodeName;!i||/(radial|linear)gradient/i.test(i)||t._clip||this.elem.appendChild(e)}},removeChild:function(t){var e=t._renderer.elem;e&&e.parentNode==this.elem&&(!e.nodeName||t._clip||this.elem.removeChild(e))},orderChild:function(t){this.elem.appendChild(t._renderer.elem)},renderChild:function(t){xt[t._renderer.type].render.call(t,this)},render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;this._renderer.elem||(this._renderer.elem=xt.createElement("g",{id:this.id}),t.appendChild(this._renderer.elem));var e=this._matrix.manual||this._flagMatrix,i={domElement:t,elem:this._renderer.elem};e&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var n,r=0;r<this.children.length;r++)n=this.children[r],xt[n._renderer.type].render.call(n,t);return this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagAdditions&&this.additions.forEach(xt.group.appendChild,i),this._flagSubtractions&&this.subtractions.forEach(xt.group.removeChild,i),this._flagOrder&&this.children.forEach(xt.group.orderChild,i),this._flagMask&&(this._mask?this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")"):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},path:{render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagVertices){var i=xt.toString(this._vertices,this._closed);e.d=i}if(this._fill&&this._fill._renderer&&(this._fill._update(),xt[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),xt[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._flagCap&&(e["stroke-linecap"]=this._cap),this._flagJoin&&(e["stroke-linejoin"]=this._join),this._flagMiter&&(e["stroke-miterlimit"]=this._miter),this._renderer.elem?xt.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=xt.createElement("path",e),t.appendChild(this._renderer.elem)),this._flagClip){var n=xt.getClip(this),r=this._renderer.elem;this._clip?(r.removeAttribute("id"),n.setAttribute("id",this.id),n.appendChild(r)):(n.removeAttribute("id"),r.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(r))}return this.flagReset()}},text:{render:function(t){this._update();var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagFamily&&(e["font-family"]=this._family),this._flagSize&&(e["font-size"]=this._size),this._flagLeading&&(e["line-height"]=this._leading),this._flagAlignment&&(e["text-anchor"]=xt.alignments[this._alignment]||this._alignment),this._flagBaseline&&(e["alignment-baseline"]=e["dominant-baseline"]=this._baseline),this._flagStyle&&(e["font-style"]=this._style),this._flagWeight&&(e["font-weight"]=this._weight),this._flagDecoration&&(e["text-decoration"]=this._decoration),this._fill&&this._fill._renderer&&(this._fill._update(),xt[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),xt[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e.opacity=this._opacity),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._renderer.elem?xt.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=xt.createElement("text",e),t.defs.appendChild(this._renderer.elem)),this._flagClip){var i=xt.getClip(this),n=this._renderer.elem;this._clip?(n.removeAttribute("id"),i.setAttribute("id",this.id),i.appendChild(n)):(i.removeAttribute("id"),n.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(n))}return this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(t,e){e||this._update();var i={};if(this._flagEndPoints&&(i.x1=this.left._x,i.y1=this.left._y,i.x2=this.right._x,i.y2=this.right._y),this._flagSpread&&(i.spreadMethod=this._spread),this._renderer.elem?xt.setAttributes(this._renderer.elem,i):(i.id=this.id,i.gradientUnits="userSpaceOnUse",this._renderer.elem=xt.createElement("linearGradient",i),t.defs.appendChild(this._renderer.elem)),this._flagStops){var n=this._renderer.elem.childNodes.length!==this.stops.length;n&&(this._renderer.elem.childNodes.length=0);for(var r=0;r<this.stops.length;r++){var s=this.stops[r],o={};s._flagOffset&&(o.offset=100*s._offset+"%"),s._flagColor&&(o["stop-color"]=s._color),s._flagOpacity&&(o["stop-opacity"]=s._opacity),s._renderer.elem?xt.setAttributes(s._renderer.elem,o):s._renderer.elem=xt.createElement("stop",o),n&&this._renderer.elem.appendChild(s._renderer.elem),s.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(t,e){e||this._update();var i={};if(this._flagCenter&&(i.cx=this.center._x,i.cy=this.center._y),this._flagFocal&&(i.fx=this.focal._x,i.fy=this.focal._y),this._flagRadius&&(i.r=this._radius),this._flagSpread&&(i.spreadMethod=this._spread),this._renderer.elem?xt.setAttributes(this._renderer.elem,i):(i.id=this.id,i.gradientUnits="userSpaceOnUse",this._renderer.elem=xt.createElement("radialGradient",i),t.defs.appendChild(this._renderer.elem)),this._flagStops){var n=this._renderer.elem.childNodes.length!==this.stops.length;n&&(this._renderer.elem.childNodes.length=0);for(var r=0;r<this.stops.length;r++){var s=this.stops[r],o={};s._flagOffset&&(o.offset=100*s._offset+"%"),s._flagColor&&(o["stop-color"]=s._color),s._flagOpacity&&(o["stop-opacity"]=s._opacity),s._renderer.elem?xt.setAttributes(s._renderer.elem,o):s._renderer.elem=xt.createElement("stop",o),n&&this._renderer.elem.appendChild(s._renderer.elem),s.flagReset()}}return this.flagReset()}},texture:{render:function(t,e){e||this._update();var i={},n={},r=this.image;if(this._flagLoaded&&this.loaded)switch(r.nodeName.toLowerCase()){case"canvas":n.href=r.toDataURL("image/png");break;case"img":case"image":n.href=this.src}if((this._flagOffset||this._flagLoaded||this._flagScale)&&(i.x=this._offset.x,i.y=this._offset.y,r&&(i.x-=r.width/2,i.y-=r.height/2,this._scale instanceof gt.Vector?(i.x*=this._scale.x,i.y*=this._scale.y):(i.x*=this._scale,i.y*=this._scale))),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(i.width=0,i.height=0,r)){switch(n.width=i.width=r.width,n.height=i.height=r.height,this._repeat){case"no-repeat":i.width+=1,i.height+=1}this._scale instanceof gt.Vector?(i.width*=this._scale.x,i.height*=this._scale.y):(i.width*=this._scale,i.height*=this._scale)}return(this._flagScale||this._flagLoaded)&&(this._renderer.image?bt.isEmpty(n)||xt.setAttributes(this._renderer.image,n):this._renderer.image=xt.createElement("image",n)),this._renderer.elem?bt.isEmpty(i)||xt.setAttributes(this._renderer.elem,i):(i.id=this.id,i.patternUnits="userSpaceOnUse",this._renderer.elem=xt.createElement("pattern",i),t.defs.appendChild(this._renderer.elem)),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}},wt=gt[gt.Types.svg]=function(t){this.domElement=t.domElement||xt.createElement("svg"),this.scene=new gt.Group,(this.scene.parent=this).defs=xt.createElement("defs"),this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"},bt.extend(wt,{Utils:xt}),bt.extend(wt.prototype,gt.Utils.Events,{setSize:function(t,e){return this.width=t,this.height=e,xt.setAttributes(this.domElement,{width:t,height:e}),this},render:function(){return xt.group.render.call(this.scene,this.domElement),this}}),ct=le.Two,ut=ct.Utils.mod,ft=ct.Utils.toFixed,pt=ct.Utils.getRatio,dt=ct.Utils,_t={isHidden:/(none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(t){return t.tagName="canvas",t.nodeType=1,t},group:{renderChild:function(t){_t[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){this._update();var e=this._matrix.elements,i=this.parent;this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1);var n=Rt(e),r=this._mask;this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,n||(t.save(),t.transform(e[0],e[3],e[1],e[4],e[2],e[5])),r&&_t[r._renderer.type].render.call(r,t,!0);for(var s,o=0;o<this.children.length;o++)s=this.children[o],_t[s._renderer.type].render.call(s,t);return n||t.restore(),this.flagReset()}},path:{render:function(t,e,i){var n,r,s,o,a,l,h,c,u,f,p,d,_,m,g,y,v,b,x,w,S,C,O,E,k,T,P,A,R,M,F,L;if(this._update(),n=this._matrix.elements,r=this._stroke,s=this._linewidth,o=this._fill,a=this._opacity*this.parent._renderer.opacity,l=this._visible,h=this._cap,c=this._join,u=this._miter,f=this._closed,_=(d=(p=this._vertices).length)-1,F=Rt(n),M=this._clip,!e&&(!l||M))return this;F||(t.save(),t.transform(n[0],n[3],n[1],n[4],n[2],n[5])),o&&(dt.isString(o)?t.fillStyle=o:(_t[o._renderer.type].render.call(o,t),t.fillStyle=o._renderer.effect)),r&&(dt.isString(r)?t.strokeStyle=r:(_t[r._renderer.type].render.call(r,t),t.strokeStyle=r._renderer.effect)),s&&(t.lineWidth=s),u&&(t.miterLimit=u),c&&(t.lineJoin=c),h&&(t.lineCap=h),dt.isNumber(a)&&(t.globalAlpha=a),t.beginPath();for(var z=0;z<p.length;z++)switch(v=p[z],A=ft(v._x),R=ft(v._y),v._command){case ct.Commands.close:t.closePath();break;case ct.Commands.curve:g=f?ut(z-1,d):Lt(z-1,0),m=f?ut(z+1,d):Mt(z+1,_),y=p[g],b=p[m],E=y.controls&&y.controls.right||ct.Vector.zero,k=v.controls&&v.controls.left||ct.Vector.zero,O=y._relative?(C=E.x+ft(y._x),E.y+ft(y._y)):(C=ft(E.x),ft(E.y)),S=v._relative?(w=k.x+ft(v._x),k.y+ft(v._y)):(w=ft(k.x),ft(k.y)),t.bezierCurveTo(C,O,w,S,A,R),_<=z&&f&&(b=x,T=v.controls&&v.controls.right||ct.Vector.zero,P=b.controls&&b.controls.left||ct.Vector.zero,O=v._relative?(C=T.x+ft(v._x),T.y+ft(v._y)):(C=ft(T.x),ft(T.y)),S=b._relative?(w=P.x+ft(b._x),P.y+ft(b._y)):(w=ft(P.x),ft(P.y)),A=ft(b._x),R=ft(b._y),t.bezierCurveTo(C,O,w,S,A,R));break;case ct.Commands.line:t.lineTo(A,R);break;case ct.Commands.move:x=v,t.moveTo(A,R)}return f&&t.closePath(),M||i||(_t.isHidden.test(o)||((L=o._renderer&&o._renderer.offset)&&(t.save(),t.translate(-o._renderer.offset.x,-o._renderer.offset.y),t.scale(o._renderer.scale.x,o._renderer.scale.y)),t.fill(),L&&t.restore()),_t.isHidden.test(r)||((L=r._renderer&&r._renderer.offset)&&(t.save(),t.translate(-r._renderer.offset.x,-r._renderer.offset.y),t.scale(r._renderer.scale.x,r._renderer.scale.y),t.lineWidth=s/r._renderer.scale.x),t.stroke(),L&&t.restore())),F||t.restore(),M&&!i&&t.clip(),this.flagReset()}},text:{render:function(t,e,i){this._update();var n,r,s,o,a,l,h,c=this._matrix.elements,u=this._stroke,f=this._linewidth,p=this._fill,d=this._opacity*this.parent._renderer.opacity,_=this._visible,m=Rt(c),g=p._renderer&&p._renderer.offset&&u._renderer&&u._renderer.offset,y=this._clip;return e||_&&!y?(m||(t.save(),t.transform(c[0],c[3],c[1],c[4],c[2],c[5])),g||(t.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),t.textAlign=_t.alignments[this._alignment]||this._alignment,t.textBaseline=this._baseline,p&&(dt.isString(p)?t.fillStyle=p:(_t[p._renderer.type].render.call(p,t),t.fillStyle=p._renderer.effect)),u&&(dt.isString(u)?t.strokeStyle=u:(_t[u._renderer.type].render.call(u,t),t.strokeStyle=u._renderer.effect)),f&&(t.lineWidth=f),dt.isNumber(d)&&(t.globalAlpha=d),y||i||(_t.isHidden.test(p)||(p._renderer&&p._renderer.offset?(l=ft(p._renderer.scale.x),h=ft(p._renderer.scale.y),t.save(),t.translate(-ft(p._renderer.offset.x),-ft(p._renderer.offset.y)),t.scale(l,h),n=this._size/p._renderer.scale.y,r=this._leading/p._renderer.scale.y,t.font=[this._style,this._weight,ft(n)+"px/",ft(r)+"px",this._family].join(" "),s=p._renderer.offset.x/p._renderer.scale.x,o=p._renderer.offset.y/p._renderer.scale.y,t.fillText(this.value,ft(s),ft(o)),t.restore()):t.fillText(this.value,0,0)),_t.isHidden.test(u)||(u._renderer&&u._renderer.offset?(l=ft(u._renderer.scale.x),h=ft(u._renderer.scale.y),t.save(),t.translate(-ft(u._renderer.offset.x),-ft(u._renderer.offset.y)),t.scale(l,h),n=this._size/u._renderer.scale.y,r=this._leading/u._renderer.scale.y,t.font=[this._style,this._weight,ft(n)+"px/",ft(r)+"px",this._family].join(" "),s=u._renderer.offset.x/u._renderer.scale.x,o=u._renderer.offset.y/u._renderer.scale.y,a=f/u._renderer.scale.x,t.lineWidth=ft(a),t.strokeText(this.value,ft(s),ft(o)),t.restore()):t.strokeText(this.value,0,0))),m||t.restore(),y&&!i&&t.clip(),this.flagReset()):this}},"linear-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var e,i=0;i<this.stops.length;i++)e=this.stops[i],this._renderer.effect.addColorStop(e._offset,e._color)}return this.flagReset()}},"radial-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var e,i=0;i<this.stops.length;i++)e=this.stops[i],this._renderer.effect.addColorStop(e._offset,e._color)}return this.flagReset()}},texture:{render:function(t){this._update();var e=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=t.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof ct.Vector||(this._renderer.offset=new ct.Vector),this._renderer.offset.x=this._offset.x,this._renderer.offset.y=this._offset.y,e&&(this._renderer.offset.x-=e.width/2,this._renderer.offset.y+=e.height/2,this._scale instanceof ct.Vector?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof ct.Vector||(this._renderer.scale=new ct.Vector),this._scale instanceof ct.Vector?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}}},mt=ct[ct.Types.canvas]=function(t){var e=!1!==t.smoothing;this.domElement=t.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=t.overdraw||!1,dt.isUndefined(this.ctx.imageSmoothingEnabled)||(this.ctx.imageSmoothingEnabled=e),this.scene=new ct.Group,this.scene.parent=this},dt.extend(mt,{Utils:_t}),dt.extend(mt.prototype,ct.Utils.Events,{setSize:function(t,e,i){return this.width=t,this.height=e,this.ratio=dt.isUndefined(i)?pt(this.ctx):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,this.domElement.style&&dt.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this},render:function(){var t=1===this.ratio;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),_t.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}}),function(j){var t=j.root,a=j.Matrix.Multiply,N=j.Utils.mod,s=[1,0,0,0,1,0,0,0,1],l=new j.Array(9),r=j.Utils.getRatio,U=(j.Utils.getComputedMatrix,j.Utils.toFixed),D=j.Utils,I={isHidden:/(none|transparent)/i,canvas:t.document?t.document.createElement("canvas"):{getContext:D.identity},alignments:{left:"start",middle:"center",right:"end"},matrix:new j.Matrix,uv:new j.Array([0,0,1,0,0,1,0,1,1,0,1,1]),group:{removeChild:function(t,e){if(t.children)for(var i=0;i<t.children.length;i++)I.group.removeChild(t.children[i],e);else e.deleteTexture(t._renderer.texture),delete t._renderer.texture},renderChild:function(t){I[t._renderer.type].render.call(t,this.gl,this.program)},render:function(t,e){this._update();var i=this.parent,n=i._matrix&&i._matrix.manual||i._flagMatrix,r=this._matrix.manual||this._flagMatrix;if((n||r)&&(this._renderer.matrix||(this._renderer.matrix=new j.Array(9)),this._matrix.toArray(!0,l),a(l,i._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*i._renderer.scale,n&&(this._flagMatrix=!0)),this._mask&&(t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.colorMask(!1,!1,!1,!0),t.stencilOp(t.KEEP,t.KEEP,t.INCR),I[this._mask._renderer.type].render.call(this._mask,t,e,this),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)),this._flagOpacity=i._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1),this._flagSubtractions)for(var s=0;s<this.subtractions.length;s++)I.group.removeChild(this.subtractions[s],t);return this.children.forEach(I.group.renderChild,{gl:t,program:e}),this._mask&&(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),I[this._mask._renderer.type].render.call(this._mask,t,e,this),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.disable(t.STENCIL_TEST)),this.flagReset()}},path:{updateCanvas:function(t){var e,i,n,r,s,o,a,l,h,c,u,f,p,d,_,m=t._vertices,g=this.canvas,y=this.ctx,v=t._renderer.scale,x=t._stroke,w=t._linewidth,S=t._fill,C=t._renderer.opacity||t._opacity,O=t._cap,E=t._join,k=t._miter,T=t._closed,P=m.length,A=P-1;g.width=Lt(Ft(t._renderer.rect.width*v),1),g.height=Lt(Ft(t._renderer.rect.height*v),1);var R,M=t._renderer.rect.centroid,F=M.x,L=M.y;y.clearRect(0,0,g.width,g.height),S&&(D.isString(S)?y.fillStyle=S:(I[S._renderer.type].render.call(S,y,t),y.fillStyle=S._renderer.effect)),x&&(D.isString(x)?y.strokeStyle=x:(I[x._renderer.type].render.call(x,y,t),y.strokeStyle=x._renderer.effect)),w&&(y.lineWidth=w),k&&(y.miterLimit=k),E&&(y.lineJoin=E),O&&(y.lineCap=O),D.isNumber(C)&&(y.globalAlpha=C),y.save(),y.scale(v,v),y.translate(F,L),y.beginPath();for(var z=0;z<m.length;z++)switch(b=m[z],p=U(b._x),d=U(b._y),b._command){case j.Commands.close:y.closePath();break;case j.Commands.curve:i=T?N(z-1,P):Lt(z-1,0),e=T?N(z+1,P):Mt(z+1,A),n=m[i],r=m[e],h=n.controls&&n.controls.right||j.Vector.zero,c=b.controls&&b.controls.left||j.Vector.zero,l=n._relative?(a=U(h.x+n._x),U(h.y+n._y)):(a=U(h.x),U(h.y)),o=b._relative?(s=U(c.x+b._x),U(c.y+b._y)):(s=U(c.x),U(c.y)),y.bezierCurveTo(a,l,s,o,p,d),A<=z&&T&&(r=R,u=b.controls&&b.controls.right||j.Vector.zero,f=r.controls&&r.controls.left||j.Vector.zero,l=b._relative?(a=U(u.x+b._x),U(u.y+b._y)):(a=U(u.x),U(u.y)),o=r._relative?(s=U(f.x+r._x),U(f.y+r._y)):(s=U(f.x),U(f.y)),p=U(r._x),d=U(r._y),y.bezierCurveTo(a,l,s,o,p,d));break;case j.Commands.line:y.lineTo(p,d);break;case j.Commands.move:R=b,y.moveTo(p,d)}T&&y.closePath(),I.isHidden.test(S)||((_=S._renderer&&S._renderer.offset)&&(y.save(),y.translate(-S._renderer.offset.x,-S._renderer.offset.y),y.scale(S._renderer.scale.x,S._renderer.scale.y)),y.fill(),_&&y.restore()),I.isHidden.test(x)||((_=x._renderer&&x._renderer.offset)&&(y.save(),y.translate(-x._renderer.offset.x,-x._renderer.offset.y),y.scale(x._renderer.scale.x,x._renderer.scale.y),y.lineWidth=w/x._renderer.scale.x),y.stroke(),_&&y.restore()),y.restore()},getBoundingClientRect:function(t,e,i){var n,r,c=1/0,u=-1/0,f=1/0,p=-1/0;t.forEach(function(t){var e,i,n,r,s,o,a=t.x,l=t.y,h=t.controls;f=Mt(l,f),c=Mt(a,c),u=Lt(a,u),p=Lt(l,p),t.controls&&(s=h.left,o=h.right,s&&o)&&(e=t._relative?s.x+a:s.x,i=t._relative?s.y+l:s.y,n=t._relative?o.x+a:o.x,r=t._relative?o.y+l:o.y,e&&i&&n&&r&&(f=Mt(i,r,f),c=Mt(e,n,c),u=Lt(e,n,u),p=Lt(i,r,p)))}),D.isNumber(e)&&(f-=e,c-=e,u+=e,p+=e),n=u-c,r=p-f,i.top=f,i.left=c,i.right=u,i.bottom=p,i.width=n,i.height=r,i.centroid||(i.centroid={}),i.centroid.x=-c,i.centroid.y=-f},render:function(t,e,i){if(!this._visible||!this._opacity)return this;this._update();var n=this.parent,r=n._matrix.manual||n._flagMatrix,s=this._matrix.manual||this._flagMatrix,o=this._flagVertices||this._flagFill||this._fill instanceof j.LinearGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof j.RadialGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof j.Texture&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof j.LinearGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof j.RadialGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof j.Texture&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||n._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||!this._renderer.texture;return(r||s)&&(this._renderer.matrix||(this._renderer.matrix=new j.Array(9)),this._matrix.toArray(!0,l),a(l,n._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*n._renderer.scale),o&&(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new j.Array(12)),this._renderer.opacity=this._opacity*n._renderer.opacity,I.path.getBoundingClientRect(this._vertices,this._linewidth,this._renderer.rect),I.getTriangles(this._renderer.rect,this._renderer.triangles),I.updateBuffer.call(I,t,this,e),I.updateTexture.call(I,t,this)),!this._clip||i?(t.bindBuffer(t.ARRAY_BUFFER,this._renderer.textureCoordsBuffer),t.vertexAttribPointer(e.textureCoords,2,t.FLOAT,!1,0,0),t.bindTexture(t.TEXTURE_2D,this._renderer.texture),t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.bindBuffer(t.ARRAY_BUFFER,this._renderer.buffer),t.vertexAttribPointer(e.position,2,t.FLOAT,!1,0,0),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()):void 0}},text:{updateCanvas:function(t){var e=this.canvas,i=this.ctx,n=t._renderer.scale,r=t._stroke,s=t._linewidth*n,o=t._fill,a=t._renderer.opacity||t._opacity;e.width=Lt(Ft(t._renderer.rect.width*n),1),e.height=Lt(Ft(t._renderer.rect.height*n),1);var l,h,c,u,f,p,d,_=t._renderer.rect.centroid,m=_.x,g=_.y,y=o._renderer&&o._renderer.offset&&r._renderer&&r._renderer.offset;i.clearRect(0,0,e.width,e.height),y||(i.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" ")),i.textAlign="center",i.textBaseline="middle",o&&(D.isString(o)?i.fillStyle=o:(I[o._renderer.type].render.call(o,i,t),i.fillStyle=o._renderer.effect)),r&&(D.isString(r)?i.strokeStyle=r:(I[r._renderer.type].render.call(r,i,t),i.strokeStyle=r._renderer.effect)),s&&(i.lineWidth=s),D.isNumber(a)&&(i.globalAlpha=a),i.save(),i.scale(n,n),i.translate(m,g),I.isHidden.test(o)||(o._renderer&&o._renderer.offset?(p=U(o._renderer.scale.x),d=U(o._renderer.scale.y),i.save(),i.translate(-U(o._renderer.offset.x),-U(o._renderer.offset.y)),i.scale(p,d),l=t._size/o._renderer.scale.y,h=t._leading/o._renderer.scale.y,i.font=[t._style,t._weight,U(l)+"px/",U(h)+"px",t._family].join(" "),c=o._renderer.offset.x/o._renderer.scale.x,u=o._renderer.offset.y/o._renderer.scale.y,i.fillText(t.value,U(c),U(u)),i.restore()):i.fillText(t.value,0,0)),I.isHidden.test(r)||(r._renderer&&r._renderer.offset?(p=U(r._renderer.scale.x),d=U(r._renderer.scale.y),i.save(),i.translate(-U(r._renderer.offset.x),-U(r._renderer.offset.y)),i.scale(p,d),l=t._size/r._renderer.scale.y,h=t._leading/r._renderer.scale.y,i.font=[t._style,t._weight,U(l)+"px/",U(h)+"px",t._family].join(" "),c=r._renderer.offset.x/r._renderer.scale.x,u=r._renderer.offset.y/r._renderer.scale.y,f=s/r._renderer.scale.x,i.lineWidth=U(f),i.strokeText(t.value,U(c),U(u)),i.restore()):i.strokeText(t.value,0,0)),i.restore()},getBoundingClientRect:function(t,e){var i=I.ctx;i.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" "),i.textAlign="center",i.textBaseline=t._baseline;var n=i.measureText(t._value).width,r=Lt(t._size||t._leading);this._linewidth&&!I.isHidden.test(this._stroke)&&(r+=this._linewidth);var s=n/2,o=r/2;switch(I.alignments[t._alignment]||t._alignment){case I.alignments.left:e.left=0,e.right=n;break;case I.alignments.right:e.left=-n,e.right=0;break;default:e.left=-s,e.right=s}switch(t._baseline){case"bottom":e.top=-r,e.bottom=0;break;case"top":e.top=0,e.bottom=r;break;default:e.top=-o,e.bottom=o}e.width=n,e.height=r,e.centroid||(e.centroid={}),e.centroid.x=s,e.centroid.y=o},render:function(t,e,i){if(!this._visible||!this._opacity)return this;this._update();var n=this.parent,r=n._matrix.manual||n._flagMatrix,s=this._matrix.manual||this._flagMatrix,o=this._flagVertices||this._flagFill||this._fill instanceof j.LinearGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof j.RadialGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof j.Texture&&this._fill._flagLoaded&&this._fill.loaded||this._stroke instanceof j.LinearGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof j.RadialGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._texture instanceof j.Texture&&this._texture._flagLoaded&&this._texture.loaded||this._flagStroke||this._flagLinewidth||this._flagOpacity||n._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||!this._renderer.texture;return(r||s)&&(this._renderer.matrix||(this._renderer.matrix=new j.Array(9)),this._matrix.toArray(!0,l),a(l,n._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*n._renderer.scale),o&&(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new j.Array(12)),this._renderer.opacity=this._opacity*n._renderer.opacity,I.text.getBoundingClientRect(this,this._renderer.rect),I.getTriangles(this._renderer.rect,this._renderer.triangles),I.updateBuffer.call(I,t,this,e),I.updateTexture.call(I,t,this)),!this._clip||i?(t.bindBuffer(t.ARRAY_BUFFER,this._renderer.textureCoordsBuffer),t.vertexAttribPointer(e.textureCoords,2,t.FLOAT,!1,0,0),t.bindTexture(t.TEXTURE_2D,this._renderer.texture),t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.bindBuffer(t.ARRAY_BUFFER,this._renderer.buffer),t.vertexAttribPointer(e.position,2,t.FLOAT,!1,0,0),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()):void 0}},"linear-gradient":{render:function(t){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var e,i=0;i<this.stops.length;i++)e=this.stops[i],this._renderer.effect.addColorStop(e._offset,e._color)}return this.flagReset()}}},"radial-gradient":{render:function(t){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var e,i=0;i<this.stops.length;i++)e=this.stops[i],this._renderer.effect.addColorStop(e._offset,e._color)}return this.flagReset()}}},texture:{render:function(t){if(t.canvas.getContext("2d")){this._update();var e=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=t.createPattern(e,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof j.Vector||(this._renderer.offset=new j.Vector),this._renderer.offset.x=this._offset.x,this._renderer.offset.y=this._offset.y,e&&(this._renderer.offset.x-=e.width/2,this._renderer.offset.y+=e.height/2,this._scale instanceof j.Vector?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof j.Vector||(this._renderer.scale=new j.Vector),this._scale instanceof j.Vector?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}}},getTriangles:function(t,e){var i=t.top,n=t.left,r=t.right,s=t.bottom;e[0]=n,e[1]=i,e[2]=r,e[3]=i,e[4]=n,e[5]=s,e[6]=n,e[7]=s,e[8]=r,e[9]=i,e[10]=r,e[11]=s},updateTexture:function(t,e){this[e._renderer.type].updateCanvas.call(I,e),e._renderer.texture&&t.deleteTexture(e._renderer.texture),t.bindBuffer(t.ARRAY_BUFFER,e._renderer.textureCoordsBuffer),e._renderer.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,e._renderer.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.canvas.width<=0||this.canvas.height<=0||t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas)},updateBuffer:function(t,e,i){D.isObject(e._renderer.buffer)&&t.deleteBuffer(e._renderer.buffer),e._renderer.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._renderer.buffer),t.enableVertexAttribArray(i.position),t.bufferData(t.ARRAY_BUFFER,e._renderer.triangles,t.STATIC_DRAW),D.isObject(e._renderer.textureCoordsBuffer)&&t.deleteBuffer(e._renderer.textureCoordsBuffer),e._renderer.textureCoordsBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._renderer.textureCoordsBuffer),t.enableVertexAttribArray(i.textureCoords),t.bufferData(t.ARRAY_BUFFER,this.uv,t.STATIC_DRAW)},program:{create:function(e,t){var i,n;if(i=e.createProgram(),D.each(t,function(t){e.attachShader(i,t)}),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw n=e.getProgramInfoLog(i),e.deleteProgram(i),new j.Utils.Error("unable to link program: "+n);return i}},shaders:{create:function(t,e,i){var n,r;if(n=t.createShader(t[i]),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw r=t.getShaderInfoLog(n),t.deleteShader(n),new j.Utils.Error("unable to compile shader "+n+": "+r);return n},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:"attribute vec2 a_position;\nattribute vec2 a_textureCoords;\n\nuniform mat3 u_matrix;\nuniform vec2 u_resolution;\n\nvarying vec2 v_textureCoords;\n\nvoid main() {\n   vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;\n   vec2 normal = projected / u_resolution;\n   vec2 clipspace = (normal * 2.0) - 1.0;\n\n   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n   v_textureCoords = a_textureCoords;\n}",fragment:"precision mediump float;\n\nuniform sampler2D u_image;\nvarying vec2 v_textureCoords;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_textureCoords);\n}"},TextureRegistry:new j.Registry};I.ctx=I.canvas.getContext("2d");var e=j[j.Types.webgl]=function(t){var e,i,n,r;if(this.domElement=t.domElement||document.createElement("canvas"),this.scene=new j.Group,(this.scene.parent=this)._renderer={matrix:new j.Array(s),scale:1,opacity:1},this._flagMatrix=!0,e=D.defaults(t||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=e.overdraw,i=this.ctx=this.domElement.getContext("webgl",e)||this.domElement.getContext("experimental-webgl",e),!this.ctx)throw new j.Utils.Error("unable to create a webgl context. Try using another renderer.");n=I.shaders.create(i,I.shaders.vertex,I.shaders.types.vertex),r=I.shaders.create(i,I.shaders.fragment,I.shaders.types.fragment),this.program=I.program.create(i,[n,r]),i.useProgram(this.program),this.program.position=i.getAttribLocation(this.program,"a_position"),this.program.matrix=i.getUniformLocation(this.program,"u_matrix"),this.program.textureCoords=i.getAttribLocation(this.program,"a_textureCoords"),i.disable(i.DEPTH_TEST),i.enable(i.BLEND),i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA)};D.extend(e,{Utils:I}),D.extend(e.prototype,j.Utils.Events,{setSize:function(t,e,i){this.width=t,this.height=e,this.ratio=D.isUndefined(i)?r(this.ctx):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,D.extend(this.domElement.style,{width:t+"px",height:e+"px"}),t*=this.ratio,e*=this.ratio,this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,this.ctx.viewport(0,0,t,e);var n=this.ctx.getUniformLocation(this.program,"u_resolution");return this.ctx.uniform2f(n,t,e),this},render:function(){var t=this.ctx;return this.overdraw||t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),I.group.render.call(this.scene,t,this.program),this._flagMatrix=!1,this}})}(le.Two),at=le.Two,lt=at.Utils,ht=at.Shape=function(){this._renderer={},this._renderer.flagMatrix=lt.bind(ht.FlagMatrix,this),this.isShape=!0,this.id=at.Identifier+at.uniqueId(),this.classList=[],this._matrix=new at.Matrix,this.translation=new at.Vector,this.rotation=0,this.scale=1},lt.extend(ht,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(t){Object.defineProperty(t,"translation",{enumerable:!0,get:function(){return this._translation},set:function(t){this._translation&&this._translation.unbind(at.Events.change,this._renderer.flagMatrix),this._translation=t,this._translation.bind(at.Events.change,this._renderer.flagMatrix),ht.FlagMatrix.call(this)}}),Object.defineProperty(t,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof at.Vector&&this._scale.unbind(at.Events.change,this._renderer.flagMatrix),this._scale=t,this._scale instanceof at.Vector&&this._scale.bind(at.Events.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}})}}),lt.extend(ht.prototype,at.Utils.Events,{_flagMatrix:!0,_flagScale:!1,_rotation:0,_scale:1,_translation:null,addTo:function(t){return t.add(this),this},clone:function(){var e=new ht;return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,lt.each(ht.Properties,function(t){e[t]=this[t]},this),e._update()},_update:function(t){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.translation.x,this.translation.y),this._scale instanceof at.Vector?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation)),t&&this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagMatrix=this._flagScale=!1,this}}),ht.MakeObservable(ht.prototype),function(x){function a(t,e,i){var n,r,s,o,a,l,h,c,u=e.controls&&e.controls.right,f=t.controls&&t.controls.left;return n=e.x,a=e.y,r=(u||e).x,l=(u||e).y,s=(f||t).x,h=(f||t).y,o=t.x,c=t.y,u&&e._relative&&(r+=e.x,l+=e.y),f&&t._relative&&(s+=t.x,h+=t.y),x.Utils.getCurveLength(n,a,r,l,s,h,o,c,i)}function l(t,e,i){var n,r,s,o,a,l,h,c,u=e.controls&&e.controls.right,f=t.controls&&t.controls.left;return n=e.x,a=e.y,r=(u||e).x,l=(u||e).y,s=(f||t).x,h=(f||t).y,o=t.x,c=t.y,u&&e._relative&&(r+=e.x,l+=e.y),f&&t._relative&&(s+=t.x,h+=t.y),x.Utils.subdivide(n,a,r,l,s,h,o,c,i)}var f=Mt,p=Lt,s=zt,d=x.Utils.getComputedMatrix,i={},w=x.Utils;w.each(x.Commands,function(t,e){i[e]=new RegExp(t)});var r=x.Path=function(t,e,i,n){x.Shape.call(this),this._renderer.type="path",this._renderer.flagVertices=w.bind(r.FlagVertices,this),this._renderer.bindVertices=w.bind(r.BindVertices,this),this._renderer.unbindVertices=w.bind(r.UnbindVertices,this),this._renderer.flagFill=w.bind(r.FlagFill,this),this._renderer.flagStroke=w.bind(r.FlagStroke,this),this._closed=!!e,this._curved=!!i,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this._vertices=[],this.vertices=t,this.automatic=!n};w.extend(r,{Properties:["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"],FlagVertices:function(){this._flagVertices=!0,this._flagLength=!0},BindVertices:function(t){for(var e=t.length;e--;)t[e].bind(x.Events.change,this._renderer.flagVertices);this._renderer.flagVertices()},UnbindVertices:function(t){for(var e=t.length;e--;)t[e].unbind(x.Events.change,this._renderer.flagVertices);this._renderer.flagVertices()},FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){x.Shape.MakeObservable(t),w.each(r.Properties.slice(2,8),x.Utils.defineProperty,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof x.Gradient||this._fill instanceof x.LinearGradient||this._fill instanceof x.RadialGradient||this._fill instanceof x.Texture)&&this._fill.unbind(x.Events.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof x.Gradient||this._fill instanceof x.LinearGradient||this._fill instanceof x.RadialGradient||this._fill instanceof x.Texture)&&this._fill.bind(x.Events.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof x.Gradient||this._stroke instanceof x.LinearGradient||this._stroke instanceof x.RadialGradient||this._stroke instanceof x.Texture)&&this._stroke.unbind(x.Events.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof x.Gradient||this._stroke instanceof x.LinearGradient||this._stroke instanceof x.RadialGradient||this._stroke instanceof x.Texture)&&this._stroke.bind(x.Events.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length}}),Object.defineProperty(t,"closed",{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"curved",{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"automatic",{enumerable:!0,get:function(){return this._automatic},set:function(t){if(t!==this._automatic){this._automatic=!!t;var e=this._automatic?"ignore":"listen";w.each(this.vertices,function(t){t[e]()})}}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}}),Object.defineProperty(t,"vertices",{enumerable:!0,get:function(){return this._collection},set:function(t){this._renderer.flagVertices;var e=this._renderer.bindVertices,i=this._renderer.unbindVertices;this._collection&&this._collection.unbind(x.Events.insert,e).unbind(x.Events.remove,i),this._collection=new x.Utils.Collection((t||[]).slice(0)),this._collection.bind(x.Events.insert,e).bind(x.Events.remove,i),e(this._collection)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}})}}),w.extend(r.prototype,x.Shape.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_clip:!1,clone:function(t){t=t||this.parent;var e=w.map(this.vertices,function(t){return t.clone()}),i=new r(e,this.closed,this.curved,!this.automatic);return w.each(x.Path.Properties,function(t){i[t]=this[t]},this),i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,t&&t.add(i),i},toObject:function(){var e={vertices:w.map(this.vertices,function(t){return t.toObject()})};return w.each(x.Shape.Properties,function(t){e[t]=this[t]},this),e.translation=this.translation.toObject,e.rotation=this.rotation,e.scale=this.scale,e},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke="transparent",this},corner:function(){var e=this.getBoundingClientRect(!0);return e.centroid={x:e.left+e.width/2,y:e.top+e.height/2},w.each(this.vertices,function(t){t.addSelf(e.centroid)}),this},center:function(){var e=this.getBoundingClientRect(!0);return e.centroid={x:e.left+e.width/2,y:e.top+e.height/2},w.each(this.vertices,function(t){t.subSelf(e.centroid)}),this},remove:function(){return this.parent&&this.parent.remove(this),this},getBoundingClientRect:function(t){var e,i,n,r,s,o,a,l=1/0,h=-1/0,c=1/0,u=-1/0;if(this._update(!0),e=t?this._matrix:d(this),i=this.linewidth/2,(n=this._vertices.length)<=0)return{top:(a=e.multiply(0,0,1)).y,left:a.x,right:a.x,bottom:a.y,width:0,height:0};for(o=0;o<n;o++)r=(a=this._vertices[o]).x,s=a.y,a=e.multiply(r,s,1),c=f(a.y-i,c),l=f(a.x-i,l),h=p(a.x+i,h),u=p(a.y+i,u);return{top:c,left:l,right:h,bottom:u,width:h-l,height:u-c}},getPointAt:function(t,e){for(var i,n,r,s,o,a,l,h,c,u,f,p,d=this.length*Mt(Lt(t,0),1),_=this.vertices.length,m=null,g=null,y=0,v=this._lengths.length,b=0;y<v;y++){if(b+this._lengths[y]>d){m=this.vertices[this.closed?x.Utils.mod(y,_):y],g=this.vertices[Mt(Lt(y-1,0),_-1)],t=(d-=b)/this._lengths[y];break}b+=this._lengths[y]}return w.isNull(m)||w.isNull(g)?null:(p=g.controls&&g.controls.right,f=m.controls&&m.controls.left,n=g.x,l=g.y,r=(p||g).x,h=(p||g).y,s=(f||m).x,c=(f||m).y,o=m.x,u=m.y,p&&g._relative&&(r+=g.x,h+=g.y),f&&m._relative&&(s+=m.x,c+=m.y),i=x.Utils.getPointOnCubicBezier(t,n,r,s,o),a=x.Utils.getPointOnCubicBezier(t,l,h,c,u),w.isObject(e)?(e.x=i,e.y=a,e):new x.Vector(i,a))},plot:function(){if(this.curved)return x.Utils.getCurveFromPoints(this._vertices,this.closed),this;for(var t=0;t<this._vertices.length;t++)this._vertices[t]._command=0===t?x.Commands.move:x.Commands.line;return this},subdivide:function(n){this._update();var r=this.vertices.length-1,s=this.vertices[r],o=this._closed||this.vertices[r]._command===x.Commands.close,a=[];return w.each(this.vertices,function(t,e){if(e<=0&&!o)s=t;else{if(t.command===x.Commands.move)return a.push(new x.Anchor(s.x,s.y)),0<e&&(a[a.length-1].command=x.Commands.line),void(s=t);var i=l(t,s,n);a=a.concat(i),w.each(i,function(t,e){t.command=e<=0&&s.command===x.Commands.move?x.Commands.move:x.Commands.line}),r<=e&&(this._closed&&this._automatic?(i=l(s=t,s,n),a=a.concat(i),w.each(i,function(t,e){t.command=e<=0&&s.command===x.Commands.move?x.Commands.move:x.Commands.line})):o&&a.push(new x.Anchor(t.x,t.y)),a[a.length-1].command=o?x.Commands.close:x.Commands.line),s=t}},this),this._automatic=!1,this._curved=!1,this.vertices=a,this},_updateLength:function(i){this._update();var n=this.vertices.length-1,r=this.vertices[n],s=this._closed||this.vertices[n]._command===x.Commands.close,o=0;return w.isUndefined(this._lengths)&&(this._lengths=[]),w.each(this.vertices,function(t,e){return e<=0&&!s||t.command===x.Commands.move?(r=t,void(this._lengths[e]=0)):(this._lengths[e]=a(t,r,i),o+=this._lengths[e],n<=e&&s&&(r=t,this._lengths[e+1]=a(t,r,i),o+=this._lengths[e+1]),void(r=t))},this),this._length=o,this},_update:function(){if(this._flagVertices){var t,e=this.vertices.length-1,i=s(this._beginning*e),n=s(this._ending*e);this._vertices.length=0;for(var r=i;r<n+1;r++)t=this.vertices[r],this._vertices.push(t);this._automatic&&this.plot()}return x.Shape.prototype._update.apply(this,arguments),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,x.Shape.prototype.flagReset.call(this),this}}),r.MakeObservable(r.prototype)}(le.Two),nt=le.Two,rt=nt.Path,st=nt.Utils,ot=nt.Line=function(t,e,i,n){var r=(i-t)/2,s=(n-e)/2;rt.call(this,[new nt.Anchor(-r,-s),new nt.Anchor(r,s)]),this.translation.set(t+r,e+s)},st.extend(ot.prototype,rt.prototype),rt.MakeObservable(ot.prototype),$=le.Two,tt=$.Path,et=$.Utils,it=$.Rectangle=function(t,e,i,n){tt.call(this,[new $.Anchor,new $.Anchor,new $.Anchor,new $.Anchor],!0),this.width=i,this.height=n,this._update(),this.translation.set(t,e)},et.extend(it,{Properties:["width","height"],MakeObservable:function(t){tt.MakeObservable(t),et.each(it.Properties,$.Utils.defineProperty,t)}}),et.extend(it.prototype,tt.prototype,{_width:0,_height:0,_flagWidth:0,_flagHeight:0,_update:function(){if(this._flagWidth||this._flagHeight){var t=this._width/2,e=this._height/2;this.vertices[0].set(-t,-e),this.vertices[1].set(t,-e),this.vertices[2].set(t,e),this.vertices[3].set(-t,e)}return tt.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,tt.prototype.flagReset.call(this),this}}),it.MakeObservable(it.prototype),Z=le.Two,Q=Z.Path,K=Z.Utils,J=Z.Ellipse=function(t,e,i,n){K.isNumber(n)||(n=i);var r=Z.Resolution,s=K.map(K.range(r),function(){return new Z.Anchor},this);Q.call(this,s,!0,!0),this.width=2*i,this.height=2*n,this._update(),this.translation.set(t,e)},K.extend(J,{Properties:["width","height"],MakeObservable:function(t){Q.MakeObservable(t),K.each(J.Properties,Z.Utils.defineProperty,t)}}),K.extend(J.prototype,Q.prototype,{_width:0,_height:0,_flagWidth:!1,_flagHeight:!1,_update:function(){if(this._flagWidth||this._flagHeight)for(var t=0,e=this.vertices.length;t<e;t++){var i=2*Ut*(t/e),n=this._width*Ht(i)/2,r=this._height*Bt(i)/2;this.vertices[t].set(n,r)}return Q.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,Q.prototype.flagReset.call(this),this}}),J.MakeObservable(J.prototype),W=le.Two,X=W.Path,Y=W.Utils,q=W.Circle=function(t,e,i){var n=W.Resolution,r=Y.map(Y.range(n),function(){return new W.Anchor},this);X.call(this,r,!0,!0),this.radius=i,this._update(),this.translation.set(t,e)},Y.extend(q,{Properties:["radius"],MakeObservable:function(t){X.MakeObservable(t),Y.each(q.Properties,W.Utils.defineProperty,t)}}),Y.extend(q.prototype,X.prototype,{_radius:0,_flagRadius:!1,_update:function(){if(this._flagRadius)for(var t=0,e=this.vertices.length;t<e;t++){var i=2*Ut*(t/e),n=this._radius*Ht(i),r=this._radius*Bt(i);this.vertices[t].set(n,r)}return X.prototype._update.call(this),this},flagReset:function(){return this._flagRadius=!1,X.prototype.flagReset.call(this),this}}),q.MakeObservable(q.prototype),G=le.Two,V=G.Path,B=G.Utils,H=G.Polygon=function(t,e,i,n){n=Lt(n||0,3);var r=B.map(B.range(n),function(){return new G.Anchor});V.call(this,r,!0),this.width=2*i,this.height=2*i,this.sides=n,this._update(),this.translation.set(t,e)},B.extend(H,{Properties:["width","height","sides"],MakeObservable:function(t){V.MakeObservable(t),B.each(H.Properties,G.Utils.defineProperty,t)}}),B.extend(H.prototype,V.prototype,{_width:0,_height:0,_sides:0,_flagWidth:!1,_flagHeight:!1,_flagSides:!1,_update:function(){if(this._flagWidth||this._flagHeight||this._flagSides){var t=this._sides,e=this.vertices.length;t<e&&this.vertices.splice(t-1,e-t);for(var i=0;i<t;i++){var n=2*Ut*((i+.5)/t)+Ut/2,r=this._width*Ht(n),s=this._height*Bt(n);e<=i?this.vertices.push(new G.Anchor(r,s)):this.vertices[i].set(r,s)}}return V.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagSides=!1,V.prototype.flagReset.call(this),this}}),H.MakeObservable(H.prototype),z=le.Two,j=z.Path,N=2*Ut,U=Ut/2,D=z.Utils,I=z.ArcSegment=function(t,e,i,n,r,s,o){var a=D.map(D.range(o||3*z.Resolution),function(){return new z.Anchor});j.call(this,a,!1,!1,!0),this.innerRadius=i,this.outerRadius=n,this.startAngle=r,this.endAngle=s,this._update(),this.translation.set(t,e)},D.extend(I,{Properties:["startAngle","endAngle","innerRadius","outerRadius"],MakeObservable:function(t){j.MakeObservable(t),D.each(I.Properties,z.Utils.defineProperty,t)}}),D.extend(I.prototype,j.prototype,{_flagStartAngle:!1,_flagEndAngle:!1,_flagInnerRadius:!1,_flagOuterRadius:!1,_startAngle:0,_endAngle:N,_innerRadius:0,_outerRadius:0,_update:function(){if(this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){var t,e=this._startAngle,i=this._endAngle,n=this._innerRadius,r=this._outerRadius,s=At(e,N)===At(i,N),o=0<n,a=this.vertices,l=o?a.length/2:a.length,h=0;s?l--:o||(l-=2);for(var c=0,u=l-1;c<l;c++){var f=c/u,p=a[h],d=f*(i-e)+e,_=(i-e)/l,m=r*Ht(d),g=r*Bt(d);if(t=0===c?z.Commands.move:z.Commands.curve,p.command=t,p.x=m,p.y=g,p.controls.left.clear(),p.controls.right.clear(),p.command===z.Commands.curve){var y=r*_/Ut;p.controls.left.x=y*Ht(d-U),p.controls.left.y=y*Bt(d-U),p.controls.right.x=y*Ht(d+U),p.controls.right.y=y*Bt(d+U),1===c&&p.controls.left.multiplyScalar(2),c===u&&p.controls.right.multiplyScalar(2)}h++}if(o)for(s?(a[h].command=z.Commands.close,h++):u=--l-1,c=0;c<l;c++)f=c/u,p=a[h],_=(i-e)/l,m=n*Ht(d=(1-f)*(i-e)+e),g=n*Bt(d),t=z.Commands.curve,c<=0&&(t=s?z.Commands.move:z.Commands.line),p.command=t,p.x=m,p.y=g,p.controls.left.clear(),p.controls.right.clear(),p.command===z.Commands.curve&&(y=n*_/Ut,p.controls.left.x=y*Ht(d+U),p.controls.left.y=y*Bt(d+U),p.controls.right.x=y*Ht(d-U),p.controls.right.y=y*Bt(d-U),1===c&&p.controls.left.multiplyScalar(2),c===u&&p.controls.right.multiplyScalar(2)),h++;else s||(a[h].command=z.Commands.line,a[h].x=0,a[h].y=0,h++);a[h].command=z.Commands.close}return j.prototype._update.call(this),this},flagReset:function(){return j.prototype.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this}}),I.MakeObservable(I.prototype),R=le.Two,M=R.Path,F=R.Utils,L=R.Star=function(t,e,i,n,r){F.isNumber(n)||(n=i/2),(!F.isNumber(r)||r<=0)&&(r=5);var s=2*r,o=F.map(F.range(s),function(){return new R.Anchor});M.call(this,o,!0),this.innerRadius=n,this.outerRadius=i,this.sides=r,this._update(),this.translation.set(t,e)},F.extend(L,{Properties:["innerRadius","outerRadius","sides"],MakeObservable:function(t){M.MakeObservable(t),F.each(L.Properties,R.Utils.defineProperty,t)}}),F.extend(L.prototype,M.prototype,{_innerRadius:0,_outerRadius:0,_sides:0,_flagInnerRadius:!1,_flagOuterRadius:!1,_flagSides:!1,_update:function(){if(this._flagInnerRadius||this._flagOuterRadius||this._flagSides){var t=2*this._sides,e=this.vertices.length;t<e&&this.vertices.splice(t-1,e-t);for(var i=0;i<t;i++){var n=2*Ut*((i+.5)/t),r=i%2?this._innerRadius:this._outerRadius,s=r*Ht(n),o=r*Bt(n);e<=i?this.vertices.push(new R.Anchor(s,o)):this.vertices[i].set(s,o)}}return M.prototype._update.call(this),this},flagReset:function(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,M.prototype.flagReset.call(this),this}}),L.MakeObservable(L.prototype),T=le.Two,P=T.Path,A=T.Utils,e=T.RoundedRectangle=function(t,e,i,n,r){A.isNumber(r)||(r=jt(Mt(i,n)/12));var s=A.map(A.range(10),function(t){return new T.Anchor(0,0,0,0,0,0,0===t?T.Commands.move:T.Commands.curve)});s[s.length-1].command=T.Commands.close,P.call(this,s,!1,!1,!0),this.width=i,this.height=n,this.radius=r,this._update(),this.translation.set(t,e)},A.extend(e,{Properties:["width","height","radius"],MakeObservable:function(t){P.MakeObservable(t),A.each(e.Properties,T.Utils.defineProperty,t)}}),A.extend(e.prototype,P.prototype,{_width:0,_height:0,_radius:0,_flagWidth:!1,_flagHeight:!1,_flagRadius:!1,_update:function(){if(this._flagWidth||this._flagHeight||this._flagRadius){var t,e=this._width,i=this._height,n=Mt(Lt(this._radius,0),Mt(e,i)),r=e/2,s=i/2;(t=this.vertices[0]).x=-(r-n),t.y=-s,(t=this.vertices[1]).x=r-n,t.y=-s,t.controls.left.clear(),t.controls.right.x=n,t.controls.right.y=0,(t=this.vertices[2]).x=r,t.y=-(s-n),t.controls.right.clear(),t.controls.left.clear(),(t=this.vertices[3]).x=r,t.y=s-n,t.controls.left.clear(),t.controls.right.x=0,t.controls.right.y=n,(t=this.vertices[4]).x=r-n,t.y=s,t.controls.right.clear(),t.controls.left.clear(),(t=this.vertices[5]).x=-(r-n),t.y=s,t.controls.left.clear(),t.controls.right.x=-n,t.controls.right.y=0,(t=this.vertices[6]).x=-r,t.y=s-n,t.controls.left.clear(),t.controls.right.clear(),(t=this.vertices[7]).x=-r,t.y=-(s-n),t.controls.left.clear(),t.controls.right.x=0,t.controls.right.y=-n,(t=this.vertices[8]).x=-(r-n),t.y=-s,t.controls.left.clear(),t.controls.right.clear(),(t=this.vertices[9]).copy(this.vertices[8])}return P.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,P.prototype.flagReset.call(this),this}}),e.MakeObservable(e.prototype),S=le.Two,t=S.root,O=S.Utils.getComputedMatrix,E=S.Utils,(t.document?t.document.createElement("canvas"):{getContext:E.identity}).getContext("2d"),k=S.Text=function(t,e,i,n){return S.Shape.call(this),this._renderer.type="text",this._renderer.flagFill=E.bind(k.FlagFill,this),this._renderer.flagStroke=E.bind(k.FlagStroke,this),this.value=t,E.isNumber(e)&&(this.translation.x=e),E.isNumber(i)&&(this.translation.y=i),E.isObject(n)?void E.each(S.Text.Properties,function(t){t in n&&(this[t]=n[t])},this):this},E.extend(S.Text,{Properties:["value","family","size","leading","alignment","linewidth","style","weight","decoration","baseline","opacity","visible","fill","stroke"],FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){S.Shape.MakeObservable(t),E.each(S.Text.Properties.slice(0,12),S.Utils.defineProperty,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof S.Gradient||this._fill instanceof S.LinearGradient||this._fill instanceof S.RadialGradient||this._fill instanceof S.Texture)&&this._fill.unbind(S.Events.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof S.Gradient||this._fill instanceof S.LinearGradient||this._fill instanceof S.RadialGradient||this._fill instanceof S.Texture)&&this._fill.bind(S.Events.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof S.Gradient||this._stroke instanceof S.LinearGradient||this._stroke instanceof S.RadialGradient||this._stroke instanceof S.Texture)&&this._stroke.unbind(S.Events.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof S.Gradient||this._stroke instanceof S.LinearGradient||this._stroke instanceof S.RadialGradient||this._stroke instanceof S.Texture)&&this._stroke.bind(S.Events.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}})}}),E.extend(S.Text.prototype,S.Shape.prototype,{_flagValue:!0,_flagFamily:!0,_flagSize:!0,_flagLeading:!0,_flagAlignment:!0,_flagBaseline:!0,_flagStyle:!0,_flagWeight:!0,_flagDecoration:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagClip:!1,_value:"",_family:"sans-serif",_size:13,_leading:17,_alignment:"center",_baseline:"middle",_style:"normal",_weight:500,_decoration:"none",_fill:"#000",_stroke:"transparent",_linewidth:1,_opacity:1,_visible:!0,_clip:!1,remove:function(){return this.parent&&this.parent.remove(this),this},clone:function(t){t=t||this.parent;var e=new S.Text(this.value);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,E.each(S.Text.Properties,function(t){e[t]=this[t]},this),t&&t.add(e),e},toObject:function(){var e={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};return E.each(S.Text.Properties,function(t){e[t]=this[t]},this),e},noStroke:function(){return this.stroke="transparent",this},noFill:function(){return this.fill="transparent",this},getBoundingClientRect:function(t){var e;return this._update(!0),{top:(e=(t?this._matrix:O(this)).multiply(0,0,1)).x,left:e.y,right:e.x,bottom:e.y,width:0,height:0}},flagReset:function(){return this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpaicty=this._flagVisible=this._flagClip=this._flagDecoration=this._flagBaseline=!1,S.Shape.prototype.flagReset.call(this),this}}),S.Text.MakeObservable(S.Text.prototype),function(n){var r=n.Utils,s=n.Stop=function(t,e,i){this._renderer={},this._renderer.type="stop",this.offset=r.isNumber(t)?t:s.Index<=0?0:1,this.opacity=r.isNumber(i)?i:1,this.color=r.isString(e)?e:s.Index<=0?"#fff":"#000",s.Index=(s.Index+1)%2};r.extend(s,{Index:0,Properties:["offset","opacity","color"],MakeObservable:function(t){r.each(s.Properties,function(t){var e="_"+t,i="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[i]=!0,this.parent&&(this.parent._flagStops=!0)}})},t)}}),r.extend(s.prototype,n.Utils.Events,{clone:function(){var e=new s;return r.each(s.Properties,function(t){e[t]=this[t]},this),e},toObject:function(){var e={};return r.each(s.Properties,function(t){e[t]=this[t]},this),e},flagReset:function(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,this}}),s.MakeObservable(s.prototype);var o=n.Gradient=function(t){this._renderer={},this._renderer.type="gradient",this.id=n.Identifier+n.uniqueId(),this.classList=[],this._renderer.flagStops=r.bind(o.FlagStops,this),this._renderer.bindStops=r.bind(o.BindStops,this),this._renderer.unbindStops=r.bind(o.UnbindStops,this),this.spread="pad",this.stops=t};r.extend(o,{Stop:s,Properties:["spread"],MakeObservable:function(t){r.each(o.Properties,n.Utils.defineProperty,t),Object.defineProperty(t,"stops",{enumerable:!0,get:function(){return this._stops},set:function(t){this._renderer.flagStops;var e=this._renderer.bindStops,i=this._renderer.unbindStops;this._stops&&this._stops.unbind(n.Events.insert,e).unbind(n.Events.remove,i),this._stops=new n.Utils.Collection((t||[]).slice(0)),this._stops.bind(n.Events.insert,e).bind(n.Events.remove,i),e(this._stops)}})},FlagStops:function(){this._flagStops=!0},BindStops:function(t){for(var e=t.length;e--;)t[e].bind(n.Events.change,this._renderer.flagStops),t[e].parent=this;this._renderer.flagStops()},UnbindStops:function(t){for(var e=t.length;e--;)t[e].unbind(n.Events.change,this._renderer.flagStops),delete t[e].parent;this._renderer.flagStops()}}),r.extend(o.prototype,n.Utils.Events,{_flagStops:!1,_flagSpread:!1,clone:function(t){t=t||this.parent;var e=r.map(this.stops,function(t){return t.clone()}),i=new o(e);return r.each(n.Gradient.Properties,function(t){i[t]=this[t]},this),t&&t.add(i),i},toObject:function(){var e={stops:r.map(this.stops,function(t){return t.toObject()})};return r.each(o.Properties,function(t){e[t]=this[t]},this),e},_update:function(){return(this._flagSpread||this._flagStops)&&this.trigger(n.Events.change),this},flagReset:function(){return this._flagSpread=this._flagStops=!1,this}}),o.MakeObservable(o.prototype)}(le.Two),v=le.Two,x=v.Utils,w=v.LinearGradient=function(t,e,i,n,r){v.Gradient.call(this,r),this._renderer.type="linear-gradient";var s=x.bind(w.FlagEndPoints,this);this.left=(new v.Vector).bind(v.Events.change,s),this.right=(new v.Vector).bind(v.Events.change,s),x.isNumber(t)&&(this.left.x=t),x.isNumber(e)&&(this.left.y=e),x.isNumber(i)&&(this.right.x=i),x.isNumber(n)&&(this.right.y=n)},x.extend(w,{Stop:v.Gradient.Stop,MakeObservable:function(t){v.Gradient.MakeObservable(t)},FlagEndPoints:function(){this._flagEndPoints=!0}}),x.extend(w.prototype,v.Gradient.prototype,{_flagEndPoints:!1,clone:function(t){t=t||this.parent;var e=x.map(this.stops,function(t){return t.clone()}),i=new w(this.left._x,this.left._y,this.right._x,this.right._y,e);return x.each(v.Gradient.Properties,function(t){i[t]=this[t]},this),t&&t.add(i),i},toObject:function(){var t=v.Gradient.prototype.toObject.call(this);return t.left=this.left.toObject(),t.right=this.right.toObject(),t},_update:function(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(v.Events.change),this},flagReset:function(){return this._flagEndPoints=!1,v.Gradient.prototype.flagReset.call(this),this}}),w.MakeObservable(w.prototype),m=le.Two,g=m.Utils,y=m.RadialGradient=function(t,e,i,n,r,s){m.Gradient.call(this,n),this._renderer.type="radial-gradient",this.center=(new m.Vector).bind(m.Events.change,g.bind(function(){this._flagCenter=!0},this)),this.radius=g.isNumber(i)?i:20,this.focal=(new m.Vector).bind(m.Events.change,g.bind(function(){this._flagFocal=!0},this)),g.isNumber(t)&&(this.center.x=t),g.isNumber(e)&&(this.center.y=e),this.focal.copy(this.center),g.isNumber(r)&&(this.focal.x=r),g.isNumber(s)&&(this.focal.y=s)},g.extend(y,{Stop:m.Gradient.Stop,Properties:["radius"],MakeObservable:function(t){m.Gradient.MakeObservable(t),g.each(y.Properties,m.Utils.defineProperty,t)}}),g.extend(y.prototype,m.Gradient.prototype,{_flagRadius:!1,_flagCenter:!1,_flagFocal:!1,clone:function(t){t=t||this.parent;var e=g.map(this.stops,function(t){return t.clone()}),i=new y(this.center._x,this.center._y,this._radius,e,this.focal._x,this.focal._y);return g.each(m.Gradient.Properties.concat(y.Properties),function(t){i[t]=this[t]},this),t&&t.add(i),i},toObject:function(){var e=m.Gradient.prototype.toObject.call(this);return g.each(y.Properties,function(t){e[t]=this[t]},this),e.center=this.center.toObject(),e.focal=this.focal.toObject(),e},_update:function(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(m.Events.change),this},flagReset:function(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,m.Gradient.prototype.flagReset.call(this),this}}),y.MakeObservable(y.prototype),u=le.Two,f=u.Utils,n={video:/\.(mp4|webm)$/i,image:/\.(jpe?g|png|gif|tiff)$/i},_=u.Texture=function(t,e){if(this._renderer={},this._renderer.type="texture",this._renderer.flagOffset=f.bind(_.FlagOffset,this),this._renderer.flagScale=f.bind(_.FlagScale,this),this.id=u.Identifier+u.uniqueId(),this.classList=[],this.offset=new u.Vector,f.isFunction(e)){var i=f.bind(function(){this.unbind(u.Events.load,i),f.isFunction(e)&&e()},this);this.bind(u.Events.load,i)}f.isString(t)?this.src=t:f.isElement(t)&&(this.image=t),this._update()},f.extend(_,{Properties:["src","image","loaded","repeat"],ImageRegistry:new u.Registry,getImage:function(t){return _.ImageRegistry.contains(t)?_.ImageRegistry.get(t):((e=n.video.test(t)?document.createElement("video"):document.createElement("img")).crossOrigin="anonymous",e);var e},Register:{canvas:function(t,e){t._src="#"+t.id,_.ImageRegistry.add(t.src,t.image),f.isFunction(e)&&e()},img:function(t,e){if(!t.image||!t.image.getAttribute("two-src")){var i=function(){t.image.removeEventListener("load",i,!1),t.image.removeEventListener("error",n,!1),f.isFunction(e)&&e()},n=function(){throw t.image.removeEventListener("load",i,!1),t.image.removeEventListener("error",n,!1),new u.Utils.Error("unable to load "+t.src)};t.image.addEventListener("load",i,!1),t.image.addEventListener("error",n,!1),t.image.setAttribute("two-src",t.src),_.ImageRegistry.add(t.src,t.image),t.image.src=t.src}},video:function(t,e){if(!t.image||!t.image.getAttribute("two-src")){var i=function(){t.image.removeEventListener("load",i,!1),t.image.removeEventListener("error",n,!1),t.image.width=t.image.videoWidth,t.image.height=t.image.videoHeight,t.image.play(),f.isFunction(e)&&e()},n=function(){throw t.image.removeEventListener("load",i,!1),t.image.removeEventListener("error",n,!1),new u.Utils.Error("unable to load "+t.src)};t.image.addEventListener("canplaythrough",i,!1),t.image.addEventListener("error",n,!1),t.image.setAttribute("two-src",t.src),_.ImageRegistry.add(t.src,t.image),t.image.src=t.src,t.image.loop=!0,t.image.load()}}},load:function(t,e){t.src;var i=t.image,n=i&&i.nodeName.toLowerCase();t._flagImage&&(/canvas/i.test(n)?_.Register.canvas(t,e):(t._src=i.getAttribute("two-src")||i.src,_.Register[n](t,e))),t._flagSrc&&(i||(t.image=_.getImage(t.src)),n=t.image.nodeName.toLowerCase(),_.Register[n](t,e))},FlagOffset:function(){this._flagOffset=!0},FlagScale:function(){this._flagScale=!0},MakeObservable:function(t){f.each(_.Properties,u.Utils.defineProperty,t),Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset&&this._offset.unbind(u.Events.change,this._renderer.flagOffset),this._offset=t,this._offset.bind(u.Events.change,this._renderer.flagOffset),this._flagOffset=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof u.Vector&&this._scale.unbind(u.Events.change,this._renderer.flagScale),this._scale=t,this._scale instanceof u.Vector&&this._scale.bind(u.Events.change,this._renderer.flagScale),this._flagScale=!0}})}}),f.extend(_.prototype,u.Utils.Events,u.Shape.prototype,{_flagSrc:!1,_flagImage:!1,_flagLoaded:!1,_flagRepeat:!1,_flagOffset:!1,_flagScale:!1,_src:"",_image:null,_loaded:!1,_repeat:"no-repeat",_scale:1,_offset:null,clone:function(){return new _(this.src)},toObject:function(){return{src:this.src,image:this.image}},_update:function(){return(this._flagSrc||this._flagImage)&&(this.trigger(u.Events.change),this.loaded=!1,_.load(this,f.bind(function(){this.loaded=!0,this.trigger(u.Events.change).trigger(u.Events.load)},this))),4<=this.image.readyState&&(this._flagImage=!0),this},flagReset:function(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagScale=this._flagOffset=!1,this}}),_.MakeObservable(_.prototype),o=le.Two,p=o.Utils,a=o.Path,d=o.Rectangle,i=o.Sprite=function(t,e,i,n,r,s){a.call(this,[new o.Anchor,new o.Anchor,new o.Anchor,new o.Anchor],!0),this.noStroke(),this.noFill(),t instanceof o.Texture?this.texture=t:p.isString(t)&&(this.texture=new o.Texture(t)),this._update(),this.translation.set(e||0,i||0),p.isNumber(n)&&(this.columns=n),p.isNumber(r)&&(this.rows=r),p.isNumber(s)&&(this.frameRate=s)},p.extend(i,{Properties:["texture","columns","rows","frameRate"],MakeObservable:function(t){d.MakeObservable(t),p.each(i.Properties,o.Utils.defineProperty,t)}}),p.extend(i.prototype,d.prototype,{_flagTexture:!1,_flagColumns:!1,_flagRows:!1,_flagFrameRate:!1,_amount:1,_duration:0,_index:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_texture:null,_columns:1,_rows:1,_frameRate:0,play:function(t,e,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=p.performance.now(),p.isNumber(t)&&(this._firstFrame=t),p.isNumber(e)&&(this._lastFrame=e),p.isFunction(i)?this._onLastFrame=i:delete this._onLastFrame,this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(t){t=t||this.parent;var e=new i(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(e.play(this._firstFrame,this._lastFrame),e._loop=this._loop),t&&t.add(e),e},_update:function(){var t,e,i,n,r,s,o,a,l=this._texture,h=this._columns,c=this._rows;if((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=this._texture),this._texture.loaded){t=(o=l.image.width)/h,e=(a=l.image.height)/c,n=this._amount,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this._playing&&0<this._frameRate&&(p.isNaN(this._lastFrame)&&(this._lastFrame=n-1),i=p.performance.now()-this._startTime,r=1e3*(this._lastFrame-this._firstFrame)/this._frameRate,this._loop?i%=r:i=Mt(i,r),s=p.lerp(this._firstFrame,this._lastFrame,i/r),(s=jt(s))!==this._index&&((this._index=s)>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()));var u=(o-t)/2+t*(this._index%h+1),f=e*jt(this._index/h)-(a-e)/2;u!==l.offset.x&&(l.offset.x=u),f!==l.offset.y&&(l.offset.y=f)}return d.prototype._update.call(this),this},flagReset:function(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,d.prototype.flagReset.call(this),this}}),i.MakeObservable(i.prototype),l=le.Two,h=l.Utils,r=l.Path,c=l.Rectangle,s=l.ImageSequence=function(t,e,i,n){r.call(this,[new l.Anchor,new l.Anchor,new l.Anchor,new l.Anchor],!0),this._renderer.flagTextures=h.bind(s.FlagTextures,this),this._renderer.bindTextures=h.bind(s.BindTextures,this),this._renderer.unbindTextures=h.bind(s.UnbindTextures,this),this.noStroke(),this.noFill(),this.textures=h.map(t,s.GenerateTexture,this),this._update(),this.translation.set(e||0,i||0),this.frameRate=h.isNumber(n)?n:s.DefaultFrameRate},h.extend(s,{Properties:["frameRate"],DefaultFrameRate:30,FlagTextures:function(){this._flagTextures=!0},BindTextures:function(t){for(var e=t.length;e--;)t[e].bind(l.Events.change,this._renderer.flagTextures);this._renderer.flagTextures()},UnbindTextures:function(t){for(var e=t.length;e--;)t[e].unbind(l.Events.change,this._renderer.flagTextures);this._renderer.flagTextures()},MakeObservable:function(t){c.MakeObservable(t),h.each(s.Properties,l.Utils.defineProperty,t),Object.defineProperty(t,"textures",{enumerable:!0,get:function(){return this._textures},set:function(t){this._renderer.flagTextures;var e=this._renderer.bindTextures,i=this._renderer.unbindTextures;this._textures&&this._textures.unbind(l.Events.insert,e).unbind(l.Events.remove,i),this._textures=new l.Utils.Collection((t||[]).slice(0)),this._textures.bind(l.Events.insert,e).bind(l.Events.remove,i),e(this._textures)}})},GenerateTexture:function(t){return t instanceof l.Texture?t:h.isString(t)?new l.Texture(t):void 0}}),h.extend(s.prototype,c.prototype,{_flagTextures:!1,_flagFrameRate:!1,_amount:1,_duration:0,_index:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_textures:null,_frameRate:0,play:function(t,e,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=h.performance.now(),h.isNumber(t)&&(this._firstFrame=t),h.isNumber(e)&&(this._lastFrame=e),h.isFunction(i)?this._onLastFrame=i:delete this._onLastFrame,this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(t){t=t||this.parent;var e=new s(this.textures,this.translation.x,this.translation.y,this.frameRate);return e._loop=this._loop,this._playing&&e.play(),t&&t.add(e),e},_update:function(){var t,e,i,n,r,s,o,a=this._textures;return this._flagTextures&&(this._amount=a.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&0<this._frameRate?(n=this._amount,h.isNaN(this._lastFrame)&&(this._lastFrame=n-1),i=h.performance.now()-this._startTime,r=1e3*(this._lastFrame-this._firstFrame)/this._frameRate,this._loop?i%=r:i=Mt(i,r),o=h.lerp(this._firstFrame,this._lastFrame,i/r),(o=jt(o))!==this._index&&(this._index=o,(s=a[this._index]).loaded&&(t=s.image.width,e=s.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this.fill=s,o>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):this.fill instanceof l.Texture||(s=a[this._index]).loaded&&(t=s.image.width,e=s.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this.fill=s),c.prototype._update.call(this),this},flagReset:function(){return this._flagTextures=this._flagFrameRate=!1,c.prototype.flagReset.call(this),this}}),s.MakeObservable(s.prototype),function(s){function i(t,e){var i,n=t.parent;return n===e?(this.additions.push(t),void(this._flagAdditions=!0)):(n&&n.children.ids[t.id]&&(i=h.indexOf(n.children,t),n.children.splice(i,1),0<=(i=h.indexOf(n.additions,t))?n.additions.splice(i,1):(n.subtractions.push(t),n._flagSubtractions=!0)),e?(t.parent=e,this.additions.push(t),void(this._flagAdditions=!0)):(0<=(i=h.indexOf(this.additions,t))?this.additions.splice(i,1):(this.subtractions.push(t),this._flagSubtractions=!0),void delete t.parent))}var a=Mt,l=Lt,h=s.Utils,r=function(){s.Utils.Collection.apply(this,arguments),Object.defineProperty(this,"_events",{value:{},enumerable:!1}),this.ids={},this.on(s.Events.insert,this.attach),this.on(s.Events.remove,this.detach),r.prototype.attach.apply(this,arguments)};r.prototype=new s.Utils.Collection,r.prototype.constructor=r,h.extend(r.prototype,{attach:function(t){for(var e=0;e<t.length;e++)this.ids[t[e].id]=t[e];return this},detach:function(t){for(var e=0;e<t.length;e++)delete this.ids[t[e].id];return this}});var o=s.Group=function(){s.Shape.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=arguments};h.extend(o,{Children:r,InsertChildren:function(t){for(var e=0;e<t.length;e++)i.call(this,t[e],this)},RemoveChildren:function(t){for(var e=0;e<t.length;e++)i.call(this,t[e])},OrderChildren:function(){this._flagOrder=!0},MakeObservable:function(t){var e=s.Path.Properties.slice(0),i=h.indexOf(e,"opacity");0<=i&&(e.splice(i,1),Object.defineProperty(t,"opacity",{enumerable:!0,get:function(){return this._opacity},set:function(t){this._flagOpacity=this._opacity!=t,this._opacity=t}})),s.Shape.MakeObservable(t),o.MakeGetterSetters(t,e),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return this._children},set:function(t){var e=h.bind(o.InsertChildren,this),i=h.bind(o.RemoveChildren,this),n=h.bind(o.OrderChildren,this);this._children&&this._children.unbind(),this._children=new r(t),this._children.bind(s.Events.insert,e),this._children.bind(s.Events.remove,i),this._children.bind(s.Events.order,n)}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}})},MakeGetterSetters:function(e,t){h.isArray(t)||(t=[t]),h.each(t,function(t){o.MakeGetterSetter(e,t)})},MakeGetterSetter:function(t,i){var n="_"+i;Object.defineProperty(t,i,{enumerable:!0,get:function(){return this[n]},set:function(e){this[n]=e,h.each(this.children,function(t){t[i]=e})}})}}),h.extend(o.prototype,s.Shape.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_flagOrder:!1,_flagOpacity:!0,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_mask:null,clone:function(t){t=t||this.parent;var e=new o,i=h.map(this.children,function(t){return t.clone(e)});return e.add(i),e.opacity=this.opacity,this.mask&&(e.mask=this.mask),e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,t&&t.add(e),e},toObject:function(){var i={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale,opacity:this.opacity,mask:this.mask?this.mask.toObject():null};return h.each(this.children,function(t,e){i.children[e]=t.toObject()},this),i},corner:function(){var t=this.getBoundingClientRect(!0),e={x:t.left,y:t.top};return this.children.forEach(function(t){t.translation.subSelf(e)}),this},center:function(){var e=this.getBoundingClientRect(!0);return e.centroid={x:e.left+e.width/2,y:e.top+e.height/2},this.children.forEach(function(t){t.isShape&&t.translation.subSelf(e.centroid)}),this},getById:function(t){var r=function(t,e){if(t.id===e)return t;if(t.children)for(var i,n=t.children.length;n--;)if(i=r(t.children[n],e))return i};return r(this,t)||null},getByClassName:function(t){var i=[],n=function(t,e){return-1==t.classList.indexOf(e)?t.children&&t.children.forEach(function(t){n(t,e)}):i.push(t),i};return n(this,t)},getByType:function(t){var n=[],r=function(t,e){for(var i in t.children)t.children[i]instanceof e?n.push(t.children[i]):t.children[i]instanceof s.Group&&r(t.children[i],e);return n};return r(this,t)},add:function(t){t=t instanceof Array?t.slice():h.toArray(arguments);for(var e=0;e<t.length;e++)t[e]&&t[e].id&&this.children.push(t[e]);return this},remove:function(t){var e=arguments.length,i=this.parent;if(e<=0&&i)return i.remove(this),this;t=t instanceof Array?t.slice():h.toArray(arguments);for(var n=0;n<t.length;n++)t[n]&&this.children.ids[t[n].id]&&this.children.splice(h.indexOf(this.children,t[n]),1);return this},getBoundingClientRect:function(e){var i;this._update(!0);var n=1/0,r=-1/0,s=1/0,o=-1/0;return this.children.forEach(function(t){/(linear-gradient|radial-gradient|gradient)/.test(t._renderer.type)||(i=t.getBoundingClientRect(e),h.isNumber(i.top)&&h.isNumber(i.left)&&h.isNumber(i.right)&&h.isNumber(i.bottom)&&(s=a(i.top,s),n=a(i.left,n),r=l(i.right,r),o=l(i.bottom,o)))},this),{top:s,left:n,right:r,bottom:o,width:r-n,height:o-s}},noFill:function(){return this.children.forEach(function(t){t.noFill()}),this},noStroke:function(){return this.children.forEach(function(t){t.noStroke()}),this},subdivide:function(){var e=arguments;return this.children.forEach(function(t){t.subdivide.apply(t,e)}),this},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=!1,s.Shape.prototype.flagReset.call(this),this}}),o.MakeObservable(o.prototype)}(le.Two)});ot();var eo,io=((eo=Ei.mixin($s))&&(no.__proto__=eo),((no.prototype=Object.create(eo&&eo.prototype)).constructor=no).prototype.createdCallback=function(){var t=this;eo.prototype.createdCallback.call(this),this._sizePollTask=null,this._parentSize={x:0,y:0,z:0},this._imperativeCounterpartPromise.then(function(){t.imperativeCounterpart._mounted||t.parentNode&&t.imperativeCounterpart.mount(t.parentNode)}),this.initWebGl()},no.prototype.initWebGl=function(){var t=this;this.mountPromise.then(function(){t.webglEnabled=!!t.getAttribute("webglenabled"),t.webglEnabled&&(t.webGlRendererState={},et().initGl(t))})},no.prototype._startSizePolling=function(){this._sizePollTask||(this._sizePollTask=Ds.addRenderTask(this._checkSize.bind(this)))},no.prototype._checkSize=function(){var t=this.parentNode,e=this._parentSize,i=getComputedStyle(t),n=parseFloat(i.width),r=parseFloat(i.height);e.x==n&&e.y==r||(e.x=n,e.y=r,this.triggerEvent("parentsizechange",Object.assign({},e)))},no.prototype._makeImperativeCounterpart=function(){return new ao({_motorHtmlCounterpart:this})},no.prototype.getStyles=function(){return Ys},no.prototype.deinit=function(){eo.prototype.deinit.call(this),this.imperativeCounterpart.unmount()},no.prototype._stopSizePolling=function(){Ds.removeRenderTask(this._sizePollTask),this._sizePollTask=null},no);function no(){eo.apply(this,arguments)}at(Vs,io),io=document.registerElement("motor-scene",io),lt();var ro,so,oo=so.mixin(Vs),ao=((ro=oo)&&(uo.__proto__=ro),((uo.prototype=Object.create(ro&&ro.prototype)).constructor=uo).prototype._setDefaultProperties=function(){ro.prototype._setDefaultProperties.call(this),Object.assign(this._properties,{sizeMode:new Ti("proportional","proportional","absolute")})},uo.prototype._startOrStopSizePolling=function(){!this._mounted||"proportional"!=this._properties.sizeMode.x&&"proportional"!=this._properties.sizeMode.y&&"proportional"!=this._properties.sizeMode.z?this._stopSizePolling():this._startSizePolling()},uo.prototype._startSizePolling=function(){this._elementManager&&(this._elementManager.element._startSizePolling(),this._elementManager.element.on("parentsizechange",this._onElementParentSizeChange))},uo.prototype._stopSizePolling=function(){this._elementManager&&(this._elementManager.element.off("parentsizechange",this._onElementParentSizeChange),this._elementManager.element._stopSizePolling())},uo.prototype._getParentSize=function(){return this._mounted?this._elementParentSize:{x:0,y:0,z:0}},uo.prototype._makeElement=function(){return new io},uo.prototype.mount=function(t){function e(){if(void 0===t?t=document.body:"string"==typeof t&&(t=document.querySelector(t)),!(t instanceof window.HTMLElement))throw new Error("Invalid mount point specified in Scene.mount() call. Pass a selector, an actual HTMLElement, or don't pass anything to mount to <body>.");i._mounted&&i.unmount(),t!==i._elementManager.element.parentNode&&t.appendChild(i._elementManager.element),i._mounted=!0,i._mountPromise&&i._resolveMountPromise(),i._elementManager.shouldRender(),i._startOrStopSizePolling()}var i=this;return"loading"==document.readyState?cs().then(e):(e(),Promise.resolve())},uo.prototype.unmount=function(){this._mounted&&(this._elementManager.shouldNotRender(),this._stopSizePolling(),this._elementManager.element.parentNode&&this._elementManager.element.parentNode.removeChild(this._elementManager.element),this._mountPromise&&this._rejectMountPromise("mountcancel"),this._resetMountPromise())},uo),lo=Object.getOwnPropertyDescriptor(Vs.prototype,"sizeMode"),ho=lo.set,co=lo.get;function uo(t){var e=this;void 0===t&&(t={}),ro.call(this,t),this._elementParentSize={x:0,y:0,z:0},this._onElementParentSizeChange=function(t){e._elementParentSize=t,e._calcSize(),e._needsToBeRendered()},this._calcSize(),this._needsToBeRendered()}Object.defineProperties(ao.prototype,{sizeMode:{set:function(t){ho.call(this,t),this._startOrStopSizePolling()},get:function(){return co.call(this)},configurable:!0,enumerable:!0}}),lt(),lt();var fo=function(i){function t(t){var e=this;void 0===t&&(t={}),i.call(this,t),this._scene=null,this._scenePromise=null,this._resolveScenePromise=null,this._onParentSizeChange=function(){"proportional"!==e._properties.sizeMode.x&&"proportional"!==e._properties.sizeMode.y&&"proportional"!==e._properties.sizeMode.z&&0===e._properties.align.x&&0===e._properties.align.y&&0===e._properties.align.z||(e._calcSize(),e._needsToBeRendered())},this._calcSize(),this._needsToBeRendered()}i&&(t.__proto__=i);var n={scene:{}};return((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype._waitForMountThenResolveMountPromise=function(){var t,i=this;return this._awaitingScenePromise?Promise.resolve():(this._awaitingScenePromise=!0,this._getScenePromise().then(function(){return i._scene.mountPromise}).then(function(){i._mounted=!0,i._resolveMountPromise(),i._elementManager.shouldRender()}).catch(function(){"mountcancel"==e||(t=e)}).then(function(){if(i._awaitingScenePromise=!1,t)throw t}))},t.prototype._makeElement=function(){return new Ks},t.prototype._getScenePromise=function(){var e=this;return this._scenePromise||(this._scenePromise=new Promise(function(t){e._resolveScenePromise=t})),this._scene&&this._resolveScenePromise(),this._scenePromise},n.scene.get=function(){return this._scene||!this._parent||(this._scene=this._parent._scene?this._parent._scene:this._parent instanceof ao?this._parent:this._parent.scene),this._scene},t.prototype._giveSceneRefToChildren=function(){for(var t,e=this._children,i=0,n=e.length;i<n;i+=1)(t=e[i])._scene=this._scene,t._resolveScenePromise&&t._resolveScenePromise(t._scene),t._giveSceneRefToChildren()},t.prototype._resetSceneRef=function(){this._scene=null,this._scenePromise=null,this._resolveScenePromise=null;for(var t=this._children,e=0,i=t.length;e<i;e+=1)t[e]._resetSceneRef()},Object.defineProperties(t.prototype,n),t}(so.mixin(Ws)),po=function(t){this.element=t};po.prototype.setClasses=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.length&&(i=this.element.classList).add.apply(i,t),this;var i},po.prototype.applyStyle=function(t,e){this.element.style[t]=e},po.prototype.addChild=function(t){this.element.appendChild(t.element)},po.prototype.removeChild=function(t){t.element.parentNode===this.element&&this.element.removeChild(t.element)},po.prototype.connectChildElement=function(t){(!t._elementManager.element.parentNode||t._elementManager.element.parentElement&&t._elementManager.element.parentElement!==this.element)&&this.addChild(t._elementManager)},po.prototype.disconnectChildElement=function(t){t._elementManager.element.parentNode&&this.removeChild(t._elementManager)},po.prototype.applyTransform=function(t){var e="matrix3d(\n            "+t.m11+",\n            "+t.m12+",\n            "+t.m13+",\n            "+t.m14+",\n            "+t.m21+",\n            "+t.m22+",\n            "+t.m23+",\n            "+t.m24+",\n            "+t.m31+",\n            "+t.m32+",\n            "+t.m33+",\n            "+t.m34+",\n            "+t.m41+",\n            "+t.m42+",\n            "+t.m43+",\n            "+t.m44+"\n        )";this.applyStyle("transform",e)},po.prototype.applySize=function(t){var e=t.x,i=t.y;this.applyStyle("width",e+"px"),this.applyStyle("height",i+"px")},po.prototype.applyOpacity=function(t){this.applyStyle("opacity",t)},po.prototype.applyImperativeNodeProperties=function(t){t instanceof fo&&(this.applyOpacity(t._properties.opacity),this.applyTransform(t._properties.transform)),this.applySize(t._calculatedSize)},po.prototype.shouldRender=function(){var t=this,e=Ds.addRenderTask(function(){t.applyStyle("display","block"),Ds.removeRenderTask(e)})},po.prototype.shouldNotRender=function(){var t=this,e=Ds.addRenderTask(function(){t.applyStyle("display","none"),Ds.removeRenderTask(e)})};var _o,mo,go,yo=Object.freeze({ElementManager:po,Motor:Ds,Node:fo,Scene:ao,Sizeable:Vs,Transformable:Ws,TreeNode:Ni,XYZValues:Ti,Utility:zi}),vo=((go=fo)&&(Eo.__proto__=go),(Eo.prototype=Object.create(go&&go.prototype)).constructor=Eo),bo=((mo=Ks)&&(Oo.__proto__=mo),((Oo.prototype=Object.create(mo&&mo.prototype)).constructor=Oo).prototype.createdCallback=function(){console.log(" -- MotorHTMLPushPaneLayout created"),mo.prototype.createdCallback.call(this)},Oo.prototype._makeImperativeCounterpart=function(){return new vo({},this)},Oo),xo=Object.freeze({get MotorHTMLBase(){return $s},get MotorHTMLNode(){return Ks},MotorHTMLPushPaneLayout:bo,get MotorHTMLScene(){return io},WebComponent:it}),wo=((_o=fo)&&(Co.__proto__=_o),((Co.prototype=Object.create(_o&&_o.prototype)).constructor=Co).prototype._createCubeSide=function(t){var e=new _o({align:[.5,.5],mountPoint:[.5,.5]}),i=new _o({align:[.5,.5],mountPoint:[.5,.5],absoluteSize:[this.size,this.size]});this.sides.push(i),e.addChild(i),t<4?e.rotation.y=90*t:e.rotation.x=90*(t%2?-1:1),i.position.z=this.size/2,this.addChild(e)},Co.prototype.setContent=function(e){var i=this;return he(6,function(t){i.sides[t].addChild(e[t])}),this},Co),So=Object.freeze({Cube:wo,PushPaneLayout:vo});function Co(t,e){var i=this;_o.call(this,Object.assign({},{absoluteSize:[t,t,t]},e)),this.size=t,this.sides=[],he(6,function(t){return i._createCubeSide(t)})}function Oo(){mo.apply(this,arguments)}function Eo(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];console.log(" -- PushPaneLayout created"),go.apply(this,t)}return t.Calendar=Ce,t.DoubleSidedPlane=Se,t.Grid=ce,t.Molecule=ae,t.Plane=we,t.PushMenuLayout=fi,t.utils=se,t.core=yo,t.html=xo,t.components=So,t.version="17.0.5",t}({});