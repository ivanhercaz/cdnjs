!function(n,t){"use strict";"object"==typeof module&&module.exports?module.exports=t(require("./")):"function"==typeof define&&define.amd?define(["moment"],t):t(n.moment)}(this,function(n){"use strict";if(!n.tz)throw new Error("moment-timezone-utils.js must be loaded after moment-timezone.js");var s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX",u=1e-6;function f(n,t){for(var r="",e=Math.abs(n),o=Math.floor(e),i=function(n,t){for(var r,e=".",o="";0<t;)--t,n*=60,r=Math.floor(n+u),e+=s[r],n-=r,r&&(o+=e,e="");return o}(e-o,Math.min(~~t,10));0<o;)r=s[o%60]+r,o=Math.floor(o/60);return n<0&&(r="-"+r),r&&i?r+i:(i||"-"!==r)&&(r||i)||"0"}function a(n){return function(n){if(!n.name)throw new Error("Missing name");if(!n.abbrs)throw new Error("Missing abbrs");if(!n.untils)throw new Error("Missing untils");if(!n.offsets)throw new Error("Missing offsets");if(n.offsets.length!==n.untils.length||n.offsets.length!==n.abbrs.length)throw new Error("Mismatched array lengths")}(n),[n.name,function(n){var t,r,e=0,o=[],i=[],s=[],u={};for(t=0;t<n.abbrs.length;t++)void 0===u[r=n.abbrs[t]+"|"+n.offsets[t]]&&(o[u[r]=e]=n.abbrs[t],i[e]=f(Math.round(60*n.offsets[t])/60,1),e++),s[t]=f(u[r],0);return o.join(" ")+"|"+i.join(" ")+"|"+s.join("")}(n),function(n){var t,r=[],e=0;for(t=0;t<n.length-1;t++)r[t]=f(Math.round((n[t]-e)/1e3)/60,1),e=n[t];return r.join(" ")}(n.untils),function(n){if(!n)return"";if(n<1e3)return n;var t=String(0|n).length-2;return Math.round(n/Math.pow(10,t))+"e"+t}(n.population)].join("|")}function l(n){return[n.name,n.zones.join(" ")].join("|")}function p(n,t){var r;if(n.length!==t.length)return!1;for(r=0;r<n.length;r++)if(n[r]!==t[r])return!1;return!0}function h(n,t){var r=[],e=[];return n.links&&(e=n.links.slice()),function(n,t,r,e){var o,i,s,u,f,a,l,h,c=[];for(o=0;o<n.length;o++){for(a=!1,s=n[o],i=0;i<c.length;i++)u=(f=c[i])[0],h=u,p((l=s).offsets,h.offsets)&&p(l.abbrs,h.abbrs)&&p(l.untils,h.untils)&&(s.population>u.population||s.population===u.population&&e&&e[s.name]?f.unshift(s):f.push(s),a=!0);a||c.push([s])}for(o=0;o<c.length;o++)for(f=c[o],t.push(f[0]),i=1;i<f.length;i++)r.push(f[0].name+"|"+f[i].name)}(n.zones,r,e,t),{version:n.version,zones:r,links:e.sort()}}function c(n,t,r){var e=Array.prototype.slice,o=function(n,t,r){var e,o,i=0,s=n.length+1;for((r=r||t)<t&&(o=t,t=r,r=o),o=0;o<n.length;o++)null!=n[o]&&((e=new Date(n[o]).getUTCFullYear())<t&&(i=o+1),r<e&&(s=Math.min(s,o+1)));return[i,s]}(n.untils,t,r),i=e.apply(n.untils,o);return i[i.length-1]=null,{name:n.name,abbrs:e.apply(n.abbrs,o),untils:i,offsets:e.apply(n.offsets,o),population:n.population,countries:n.countries}}return n.tz.pack=a,n.tz.packBase60=f,n.tz.createLinks=h,n.tz.filterYears=c,n.tz.filterLinkPack=function(n,t,r,e){var o,i,s=n.zones,u=[];for(o=0;o<s.length;o++)u[o]=c(s[o],t,r);for(i=h({zones:u,links:n.links.slice(),version:n.version},e),o=0;o<i.zones.length;o++)i.zones[o]=a(i.zones[o]);return i.countries=n.countries?n.countries.map(function(n){return l(n)}):[],i},n.tz.packCountry=l,n});