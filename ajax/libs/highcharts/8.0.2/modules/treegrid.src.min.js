"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/treegrid",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function i(t,e,i,n){t.hasOwnProperty(e)||(t[e]=n.apply(null,i))}i(e,"mixins/tree-series.js",[e["parts/Color.js"],e["parts/Utilities.js"]],function(k,t){function f(t){return"boolean"==typeof t}var u=t.extend,l=t.isArray,d=t.isNumber,c=t.isObject,h=t.merge,b=t.pick;return{getColor:function(t,e){var i,n,o,s,r,a,l,d,c=e.index,h=e.mapOptionsToLevel,f=e.parentColor,u=e.parentColorIndex,p=e.series,m=e.colors,v=e.siblings,g=p.points,x=p.chart.options.chart;return t&&(i=g[t.i],n=h[t.level]||{},i&&n.colorByPoint&&(s=i.index%(m?m.length:x.colorCount),o=m&&m[s]),p.chart.styledMode||(r=b(i&&i.options.color,n&&n.color,o,f&&(l=f,(d=n&&n.colorVariation)&&"brightness"===d.key?k.parse(l).brighten(d.to*(c/v)).get():l),p.color)),a=b(i&&i.options.colorIndex,n&&n.colorIndex,s,u,e.colorIndex)),{color:r,colorIndex:a}},getLevelOptions:function(t){var s,e,i,r,n,o,a=null;if(c(t))for(a={},r=d(t.from)?t.from:1,o=t.levels,e={},s=c(t.defaults)?t.defaults:{},l(o)&&(e=o.reduce(function(t,e){var i,n,o;return c(e)&&d(e.level)&&(o=h({},e),n=f(o.levelIsConstant)?o.levelIsConstant:s.levelIsConstant,delete o.levelIsConstant,delete o.level,i=e.level+(n?0:r-1),c(t[i])?u(t[i],o):t[i]=o),t},{})),n=d(t.to)?t.to:1,i=0;i<=n;i++)a[i]=h({},s,c(e[i])?e[i]:{});return a},setTreeValues:function n(o,s){var t,e=s.before,i=s.idRoot,r=s.mapIdToNode[i],a=!f(s.levelIsConstant)||s.levelIsConstant,l=s.points[o.i],d=l&&l.options||{},c=0,h=[];return u(o,{levelDynamic:o.level-(a?0:r.level),name:b(l&&l.name,""),visible:i===o.id||!!f(s.visible)&&s.visible}),"function"==typeof e&&(o=e(o,s)),o.children.forEach(function(t,e){var i=u({},s);u(i,{index:e,siblings:o.children.length,visible:o.visible}),t=n(t,i),h.push(t),t.visible&&(c+=t.val)}),o.visible=0<c||o.visible,t=b(d.value,c),u(o,{children:h,childrenTotal:c,isLeaf:o.visible&&!c,val:t}),o},updateRootId:function(t){var e,i;return c(t)&&(i=c(t.options)?t.options:{},e=b(t.rootNode,i.rootId,""),c(t.userOptions)&&(t.userOptions.rootId=e),t.rootNode=e),e}}}),i(e,"parts-gantt/Tree.js",[e["parts/Utilities.js"]],function(t){function p(t){return"function"==typeof t}function o(t,n){var o=t.reduce(function(t,e){var i=g(e.parent,"");return void 0===t[i]&&(t[i]=[]),t[i].push(e),t},{});return Object.keys(o).forEach(function(t,e){var i=o[t];""!==t&&-1===n.indexOf(t)&&(i.forEach(function(t){e[""].push(t)}),delete e[t])}),o}var m=t.extend,v=t.isNumber,g=t.pick,x=function(o,t,s,e,r,a){var l,d,i,c=0,h=0,n=a&&a.after,f=a&&a.before,u={data:e,depth:s-1,id:o,level:s,parent:t};return p(f)&&f(u,a),i=(r[o]||[]).map(function(t){var e=x(t.id,o,s+1,t,r,a),i=t.start,n=!0===t.milestone?i:t.end;return l=!v(l)||i<l?i:l,d=!v(d)||d<n?n:d,c=c+1+e.descendants,h=Math.max(e.height+1,h),e}),e&&(e.start=g(e.start,l),e.end=g(e.end,d)),m(u,{children:i,descendants:c,height:h}),p(n)&&n(u,a),u};return{getListOfParents:o,getNode:x,getTree:function(t,e){var i=t.map(function(t){return t.id}),n=o(t,i);return x("",null,1,null,n,e)}}}),i(e,"parts-gantt/GridAxis.js",[e["parts/Globals.js"],e["parts/Tick.js"],e["parts/Utilities.js"]],function(t,e,i){function T(t){return i.isObject(t,!0)}var n=i.addEvent,o=i.defined,h=i.erase,f=i.find,I=i.isArray,E=i.isNumber,u=i.merge,k=i.pick,c=i.timeUnits,p=i.wrap,s=t.dateFormat,r=t.Chart,m=t.Axis,L={top:0,right:1,bottom:2,left:3,0:"top",1:"right",2:"bottom",3:"left"};m.prototype.isOuterAxis=function(){var i=this,t=i.chart,e=i.columnIndex,n=i.linkedParent&&i.linkedParent.columns||i.columns,o=e?i.linkedParent:i,s=-1,r=0;return t[i.coll].forEach(function(t,e){t.side!==i.side||t.options.isInternal||(r=e,t===o&&(s=e))}),r===s&&(!E(e)||n.length===e)},m.prototype.getMaxLabelDimensions=function(s,t){var r={width:0,height:0};return t.forEach(function(t){var e,i=s[t],n=0,o=0;T(i)&&(n=(e=T(i.label)?i.label:{}).getBBox?e.getBBox().height:0,e.textStr&&!E(e.textPxLength)&&(e.textPxLength=e.getBBox().width),o=E(e.textPxLength)?Math.round(e.textPxLength):0,r.height=Math.max(n,r.height),r.width=Math.max(o,r.width))}),r},t.dateFormats.W=function(t){var e=new this.Date(t),i=(this.get("Day",e)+6)%7,n=new this.Date(e.valueOf());this.set("Date",n,this.get("Date",e)-i+3);var o=new this.Date(this.get("FullYear",n),0,1);return 4!==this.get("Day",o)&&(this.set("Month",e,0),this.set("Date",e,1+(11-this.get("Day",o))%7)),(1+Math.floor((n.valueOf()-o.valueOf())/6048e5)).toString()},t.dateFormats.E=function(t){return s("%a",t,!0).charAt(0)},n(e,"afterGetLabelPosition",function(t){var e,i,n,o,s,r,a,l=this.label,d=this.axis,c=d.reversed,h=d.chart,f=d.options,u=f&&T(f.grid)?f.grid:{},p=d.options.labels,m=p.align,v=L[d.side],g=t.tickmarkOffset,x=d.tickPositions,k=this.pos-g,b=E(x[t.index+1])?x[t.index+1]-g:d.max+g,y=d.tickSize("tick",!0),P=I(y)?y[0]:0,O=y&&y[1]/2;!0===u.enabled&&("top"===v?s=(o=d.top+d.offset)-P:"bottom"===v?o=(s=h.chartHeight-d.bottom+d.offset)+P:(o=d.top+d.len-d.translate(c?b:k),s=d.top+d.len-d.translate(c?k:b)),"right"===v?a=(r=h.chartWidth-d.right+d.offset)+P:"left"===v?r=(a=d.left+d.offset)-P:(r=Math.round(d.left+d.translate(c?b:k))-O,a=Math.round(d.left+d.translate(c?k:b))-O),this.slotWidth=a-r,t.pos.x="left"===m?r:"right"===m?a:r+(a-r)/2,t.pos.y=s+(o-s)/2,i=h.renderer.fontMetrics(p.style.fontSize,l.element),e=l.getBBox().height,p.useHTML?t.pos.y+=i.b+-e/2:(n=Math.round(e/i.h),t.pos.y+=(i.b-(i.h-i.f))/2+-(n-1)*i.h/2),t.pos.x+=d.horiz&&p.x||0)}),n(m,"afterTickSize",function(t){var e=this.defaultLeftAxisOptions,i=this.horiz,n=this.options.grid,o=void 0===n?{}:n,s=this.maxLabelDimensions;if(o.enabled){var r=2*Math.abs(e.labels.x),a=i?o.cellHeight||r+s.height:r+s.width;I(t.tickSize)?t.tickSize[0]=a:t.tickSize=[a]}}),n(m,"afterGetTitlePosition",function(t){var e=this,i=e.options;if(!0===(i&&T(i.grid)?i.grid:{}).enabled){var n=e.axisTitle,o=n&&n.getBBox().width,s=e.horiz,r=e.left,a=e.top,l=e.width,d=e.height,c=i.title,h=e.opposite,f=e.offset,u=e.tickSize()||[0],p=c.x||0,m=c.y||0,v=k(c.margin,s?5:10),g=e.chart.renderer.fontMetrics(c.style&&c.style.fontSize,n).f,x=(s?a+d:r)+(s?1:-1)*(h?-1:1)*(u[0]/2)+(e.side===L.bottom?g:0);t.titlePosition.x=s?r-o/2-v+p:x+(h?l:0)+f+p,t.titlePosition.y=s?x-(h?d:0)+(h?g:-g)/2+f+m:a-v+m}}),p(m.prototype,"unsquish",function(t){var e,i=this.options;return!0===(i&&T(i.grid)?i.grid:{}).enabled&&this.categories?this.tickInterval:t.apply(this,(e=arguments,Array.prototype.slice.call(e,1)))}),n(m,"afterSetOptions",function(t){var d,e=this.options,i=t.userOptions,n=e&&T(e.grid)?e.grid:{};!0===n.enabled&&(d=u(!0,{className:"highcharts-grid-axis "+(i.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},i),"xAxis"===this.coll&&(o(i.linkedTo)&&!o(i.tickPixelInterval)&&(d.tickPixelInterval=350),o(i.tickPixelInterval)||!o(i.linkedTo)||o(i.tickPositioner)||o(i.tickInterval)||(d.tickPositioner=function(t,e){var i=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(i){var n,o,s,r,a,l=d.units;for(r=0;r<l.length;r++)if(l[r][0]===i.unitName){n=r;break}return l[n+1]?(s=l[n+1][0],o=(l[n+1][1]||[1])[0]):"year"===i.unitName&&(s="year",o=10*i.count),a=c[s],this.tickInterval=a*o,this.getTimeTicks({unitRange:a,count:o,unitName:s},t,e,this.options.startOfWeek)}})),u(!0,this.options,d),this.horiz&&(e.minPadding=k(i.minPadding,0),e.maxPadding=k(i.maxPadding,0)),E(e.grid.borderWidth)&&(e.tickWidth=e.lineWidth=n.borderWidth))}),n(m,"afterSetAxisTranslation",function(){var t=this.options,e=t&&T(t.grid)?t.grid:{},i=this.tickPositions&&this.tickPositions.info,n=this.userOptions.labels||{};this.horiz&&(!0===e.enabled&&this.series.forEach(function(t){t.options.pointRange=0}),i&&(!1===t.dateTimeLabelFormats[i.unitName].range||1<i.count)&&!o(n.align)&&(t.labels.align="left",o(n.x)||(t.labels.x=3)))}),n(m,"trimTicks",function(){var t=this,e=t.options,i=e&&T(e.grid)?e.grid:{},n=t.categories,o=t.tickPositions,s=o[0],r=o[o.length-1],a=t.linkedParent&&t.linkedParent.min,l=t.linkedParent&&t.linkedParent.max,d=a||t.min,c=l||t.max,h=t.tickInterval,f=s<d&&d<s+h,u=c<r&&r-h<c;!0!==i.enabled||n||!t.horiz&&!t.isLinked||(f&&!e.startOnTick&&(o[0]=d),u&&!e.endOnTick&&(o[o.length-1]=c))}),n(m,"afterRender",function(){var t,e,i,n,o=this,s=o.options,r=s&&T(s.grid)?s.grid:{},a=o.chart.renderer;if(!0===r.enabled){if(o.maxLabelDimensions=o.getMaxLabelDimensions(o.ticks,o.tickPositions),o.rightWall&&o.rightWall.destroy(),o.isOuterAxis()&&o.axisLine){var l=s.lineWidth;if(l){var d=o.getLinePath(l);i=d.indexOf("M")+1,n=d.indexOf("L")+1,t=d.indexOf("M")+2,e=d.indexOf("L")+2;var c=(o.tickSize("tick")[0]-1)*(o.side===L.top||o.side===L.left?-1:1);o.horiz?(d[t]=d[t]+c,d[e]=d[e]+c):(d[i]=d[i]+c,d[n]=d[n]+c),o.axisLineExtra?o.axisLineExtra.animate({d:d}):(o.axisLineExtra=a.path(d).attr({zIndex:7}).addClass("highcharts-axis-line").add(o.axisGroup),a.styledMode||o.axisLineExtra.attr({stroke:s.lineColor,"stroke-width":l})),o.axisLine[o.showAxis?"show":"hide"](!0)}}(o.columns||[]).forEach(function(t){t.render()})}});var a={afterGetOffset:function(){(this.columns||[]).forEach(function(t){t.getOffset()})},afterInit:function(){var t,e,i=this,n=i.chart,o=i.userOptions,s=i.options,r=s&&T(s.grid)?s.grid:{};if(r.enabled&&((e=(t=i).options).labels||(e.labels={}),e.labels.align=k(e.labels.align,"center"),t.categories||(e.showLastLabel=!1),t.labelRotation=0,e.labels.rotation=0,p(i,"labelFormatter",function(t){var e=this.axis,i=e.tickPositions,n=this.value,o=(e.isLinked?e.linkedParent:e).series[0],s=n===i[0],r=n===i[i.length-1],a=o&&f(o.options.data,function(t){return t[e.isXAxis?"x":"y"]===n});return this.isFirst=s,this.isLast=r,this.point=a,t.call(this)})),r.columns)for(var a=i.columns=[],l=i.columnIndex=0;++l<r.columns.length;){var d=u(o,r.columns[r.columns.length-l-1],{linkedTo:0,type:"category"});delete d.grid.columns;var c=new m(i.chart,d,!0);c.isColumn=!0,c.columnIndex=l,h(n.axes,c),h(n[i.coll],c),a.push(c)}},afterSetOptions:function(t){var e=t.userOptions,i=e&&T(e.grid)?e.grid:{},n=i.columns;i.enabled&&n&&u(!0,this.options,n[n.length-1])},afterSetScale:function(){(this.columns||[]).forEach(function(t){t.setScale()})},destroy:function(e){(this.columns||[]).forEach(function(t){t.destroy(e.keepEvents)})},init:function(t){var e=t.userOptions,i=e&&T(e.grid)?e.grid:{};i.enabled&&o(i.borderColor)&&(e.tickColor=e.lineColor=i.borderColor)}};Object.keys(a).forEach(function(t){n(m,t,a[t])}),n(r,"afterSetChartSize",function(){this.axes.forEach(function(t){(t.columns||[]).forEach(function(t){t.setAxisSize(),t.setAxisTranslation()})})})}),i(e,"modules/broken-axis.src.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(d,t){function a(e,t){return n(t,function(t){return t.from<e&&e<t.to})}var e=t.addEvent,i=t.extend,n=t.find,u=t.fireEvent,o=t.isArray,p=t.pick,m=d.Axis,s=d.Series;i(m.prototype,{isInBreak:function(t,e){var i=t.repeat||1/0,n=t.from,o=t.to-t.from,s=n<=e?(e-n)%i:i-(n-e)%i;return t.inclusive?s<=o:s<o&&0!=s},isInAnyBreak:function(t,e){var i,n,o,s=this.options.breaks,r=s&&s.length;if(r){for(;r--;)this.isInBreak(s[r],t)&&(i=!0,n=n||p(s[r].showPoints,!this.isXAxis));o=i&&e?i&&!n:i}return o}}),e(m,"afterInit",function(){"function"==typeof this.setBreaks&&this.setBreaks(this.options.breaks,!1)}),e(m,"afterSetTickPositions",function(){if(this.isBroken){var t,e=this.tickPositions,i=this.tickPositions.info,n=[];for(t=0;t<e.length;t++)this.isInAnyBreak(e[t])||n.push(e[t]);this.tickPositions=n,this.tickPositions.info=i}}),e(m,"afterSetOptions",function(){this.isBroken&&(this.options.ordinal=!1)}),m.prototype.setBreaks=function(t,e){var f=this,i=o(t)&&!!t.length;function n(t){var e,i,n=t;for(i=0;i<f.breakArray.length;i++)if((e=f.breakArray[i]).to<=t)n-=e.len;else{if(e.from>=t)break;if(f.isInBreak(e,t)){n-=t-e.from;break}}return n}f.isDirty=f.isBroken!==i,f.isBroken=i,f.options.breaks=f.userOptions.breaks=t,f.forceRedraw=!0,f.series.forEach(function(t){t.isDirty=!0}),i||f.val2lin!==n||(delete f.val2lin,delete f.lin2val),i&&(f.userOptions.ordinal=!1,f.val2lin=n,f.lin2val=function(t){var e,i,n=t;for(i=0;i<f.breakArray.length&&!((e=f.breakArray[i]).from>=n);i++)e.to<n?n+=e.len:f.isInBreak(e,n)&&(n+=e.len);return n},f.setExtremes=function(t,e,i,n,o){if(this.isBroken){for(var s,r=this.options.breaks;s=a(t,r);)t=s.to;for(;s=a(e,r);)e=s.from;e<t&&(e=t)}m.prototype.setExtremes.call(this,t,e,i,n,o)},f.setAxisTranslation=function(t){if(m.prototype.setAxisTranslation.call(this,t),this.unitLength=null,this.isBroken){var e,i,n,o,s=f.options.breaks,r=[],a=[],l=0,d=f.userMin||f.min,c=f.userMax||f.max,h=p(f.pointRangePadding,0);s.forEach(function(t){i=t.repeat||1/0,f.isInBreak(t,d)&&(d+=t.to%i-d%i),f.isInBreak(t,c)&&(c-=c%i-t.from%i)}),s.forEach(function(t){for(n=t.from,i=t.repeat||1/0;d<n-i;)n-=i;for(;n<d;)n+=i;for(o=n;o<c;o+=i)r.push({value:o,move:"in"}),r.push({value:o+(t.to-t.from),move:"out",size:t.breakSize})}),r.sort(function(t,e){return t.value===e.value?("in"===t.move?0:1)-("in"===e.move?0:1):t.value-e.value}),e=0,n=d,r.forEach(function(t){1===(e+="in"===t.move?1:-1)&&"in"===t.move&&(n=t.value),0===e&&(a.push({from:n,to:t.value,len:t.value-n-(t.size||0)}),l+=t.value-n-(t.size||0))}),f.breakArray=a,f.unitLength=c-d-l+h,u(f,"afterBreaks"),f.staticScale?f.transA=f.staticScale:f.unitLength&&(f.transA*=(c-f.min+h)/f.unitLength),h&&(f.minPixelPadding=f.transA*f.minPointOffset),f.min=d,f.max=c}}),p(e,!0)&&this.chart.redraw()},e(s,"afterGeneratePoints",function(){var t=this,e=t.isDirty,i=t.options.connectNulls,n=t.points,o=t.xAxis,s=t.yAxis;if(e)for(var r=n.length;r--;){var a=n[r],l=!(null===a.y&&!1===i)&&(o&&o.isInAnyBreak(a.x,!0)||s&&s.isInAnyBreak(a.y,!0));a.visible=!l&&!1!==a.options.visible}}),e(s,"afterRender",function(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,p(this.pointArrayMap,["y"]))}),d.Series.prototype.drawBreaks=function(i,t){var n,o,s,r,e=this,a=e.points;i&&t.forEach(function(t){n=i.breakArray||[],o=i.isXAxis?i.min:p(e.options.threshold,i.min),a.forEach(function(e){r=p(e["stack"+t.toUpperCase()],e[t]),n.forEach(function(t){s=!1,o<t.from&&r>t.to||o>t.from&&r<t.from?s="pointBreak":(o<t.from&&r>t.from&&r<t.to||o>t.from&&r>t.to&&r<t.from)&&(s="pointInBreak"),s&&u(i,s,{point:e,brk:t})})})})},d.Series.prototype.gappedPath=function(){var t=this.currentDataGrouping,e=t&&t.gapSize,i=this.options.gapSize,n=this.points.slice(),o=n.length-1,s=this.yAxis;if(i&&0<o){"value"!==this.options.gapUnit&&(i*=this.basePointRange),e&&i<e&&e>=this.basePointRange&&(i=e);for(var r=void 0,a=void 0;o--;)if(a&&!1!==a.visible||(a=n[o+1]),r=n[o],!1!==a.visible&&!1!==r.visible){if(a.x-r.x>i){var l=(r.x+a.x)/2;n.splice(o+1,0,{isNull:!0,x:l}),this.options.stacking&&((s.stacks[this.stackKey][l]=new d.StackItem(s,s.options.stackLabels,!1,l,this.stack)).total=0)}a=r}}return this.getGraphPath(n)}}),i(e,"parts-gantt/TreeGrid.js",[e["parts/Globals.js"],e["mixins/tree-series.js"],e["parts/Tick.js"],e["parts-gantt/Tree.js"],e["parts/Utilities.js"]],function(t,e,i,y,n){function N(t){return Array.prototype.slice.call(t,1)}function S(t){return n.isObject(t,!0)}function o(t,e){var i,n;for(i in e)Object.hasOwnProperty.call(e,i)&&(n=e[i],c(t,i,n))}function s(t,e){var i=t.collapseStart,n=t.collapseEnd;return e<=n&&(i-=.5),{from:i,to:n,showPoints:!1}}function M(t,e){var i=t.options.breaks||[],n=s(e,t.max);return i.some(function(t){return t.from===n.from&&t.to===n.to})}function P(t,e){var i=t.options.breaks||[],n=s(e,t.max);return i.push(n),i}function a(t,e){var i=t.options.breaks||[],n=s(e,t.max);return i.reduce(function(t,e){return e.to===n.to&&e.from===n.from||t.push(e),t},[])}function r(b){b.target.axes.filter(function(t){return"treegrid"===t.options.type}).forEach(function(i){var t,e,n,o,s,r,a,l,d,c,h,f,u,p,m,v=i.options||{},g=v.labels,x=v.uniqueNames,k=0;i.mapOfPosToGridNode&&!i.series.some(function(t){return!t.hasRendered||t.isDirtyData||t.isDirty})||(e=i.series.reduce(function(e,t){return t.visible&&(t.options.data.forEach(function(t){S(t)&&(t.seriesIndex=k,e.push(t))}),!0===x&&k++),e},[]),o=e,r=!0===(s=x)?k:1,c=[],h=[],f={},u={},p=-1,m="boolean"==typeof s&&s,l={after:function(t){var e=u[t.pos],i=0,n=0;e.children.forEach(function(t){n+=t.descendants+1,i=Math.max(t.height+1,i)}),e.descendants=n,e.height=i,e.collapsed&&h.push(e)},before:function(t){var e,i,n=S(t.data)?t.data:{},o=O(n.name)?n.name:"",s=f[t.parent],r=S(s)?u[s.pos]:null;m&&S(r)&&(e=I(r.children,function(t){return t.name===o}))?(i=e.pos,e.nodes.push(t)):i=p++,u[i]||(u[i]=e={depth:r?r.depth+1:0,name:o,nodes:[t],children:[],pos:i},-1!==i&&c.push(o),S(r)&&r.children.push(e)),O(t.id)&&(f[t.id]=t),!0===n.collapsed&&(e.collapsed=!0),t.pos=i}},d=function(t,a){var l=function(t,i,e){var n=t.nodes,o=i+(-1===i?0:a-1),s=(o-i)/2,r=i+s;return n.forEach(function(t){var e=t.data;S(e)&&(e.y=i+e.seriesIndex,delete e.seriesIndex),t.pos=r}),(e[r]=t).pos=r,t.tickmarkOffset=.5+s,t.collapseStart=o+.5,t.children.forEach(function(t){l(t,o+1,e),o=t.collapseEnd-.5}),t.collapseEnd=o+.5,e};return l(t[-1],-1,{})},a=y.getTree(o,l),u=d(u,r),n={categories:c,mapOfIdToNode:f,mapOfPosToGridNode:u,collapsedNodes:h,tree:a},i.categories=n.categories,i.mapOfPosToGridNode=n.mapOfPosToGridNode,i.hasNames=!0,i.tree=n.tree,i.series.forEach(function(t){var e=t.options.data.map(function(t){return S(t)?T(t):t});t.visible&&t.setData(e,!1)}),i.mapOptionsToLevel=E({defaults:g,from:1,levels:g.levels,to:i.tree.height}),"beforeRender"===b.type&&(t=C(i,"foundExtremes",function(){n.collapsedNodes.forEach(function(t){var e=P(i,t);i.setBreaks(e,!1)}),t()})))})}var C=n.addEvent,G=n.defined,l=n.fireEvent,d=n.extend,j=n.isNumber,O=n.isString,T=n.merge,z=n.pick,c=n.wrap,I=n.find,E=e.getLevelOptions,h=t.Axis,f=i;o(h.prototype,{init:function(t,e,i){var n="treegrid"===i.type;n&&(C(e,"beforeRender",r),C(e,"beforeRedraw",r),i=T({grid:{enabled:!0},labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],symbol:{type:"triangle",x:-5,y:-5,height:10,width:10,padding:5}},uniqueNames:!1},i,{reversed:!0,grid:{columns:void 0}})),t.apply(this,[e,i]),n&&(this.hasNames=!0,this.options.showLastLabel=!0)},getMaxLabelDimensions:function(t){var e,i=this.options,n=i&&i.labels,o=n&&j(n.indentation)?i.labels.indentation:0,s=t.apply(this,N(arguments));return"treegrid"===this.options.type&&this.mapOfPosToGridNode&&(e=this.mapOfPosToGridNode[-1].height,s.width+=o*(e-1)),s},generateTick:function(t,e){var i,n,o,s=this,r=S(s.mapOptionsToLevel)?s.mapOptionsToLevel:{},a="treegrid"===s.options.type,l=s.ticks,d=l[e];a?((i=r[(o=s.mapOfPosToGridNode[e]).depth])&&(n={labels:i}),d?(d.parameters.category=o.name,d.options=n,d.addLabel()):l[e]=d=new f(s,e,null,void 0,{category:o.name,tickmarkOffset:o.tickmarkOffset,options:n})):t.apply(s,N(arguments))},setTickInterval:function(t){var n,e=this,i=e.options;"treegrid"===i.type?(e.min=z(e.userMin,i.min,e.dataMin),e.max=z(e.userMax,i.max,e.dataMax),l(e,"foundExtremes"),e.setAxisTranslation(!0),e.tickmarkOffset=.5,e.tickInterval=1,e.tickPositions=this.mapOfPosToGridNode?(n=e,Object.keys(n.mapOfPosToGridNode).reduce(function(t,e){var i=+e;return n.min<=i&&n.max>=i&&!n.isInAnyBreak(i)&&t.push(i),t},[])):[]):t.apply(e,N(arguments))}}),o(f.prototype,{getLabelPosition:function(t,e,i,n,o,s,r,a,l){var d,c,h,f,u,p=this,m=z(p.options&&p.options.labels,s),v=p.pos,g=p.axis,x="treegrid"===g.options.type,k=t.apply(p,[e,i,n,o,m,r,a,l]);return x&&(d=m&&S(m.symbol)?m.symbol:{},c=m&&j(m.indentation)?m.indentation:0,u=(f=(h=g.mapOfPosToGridNode)&&h[v])&&f.depth||1,k.x+=d.width+2*d.padding+(u-1)*c),k},renderLabel:function(t){var e,i,n,o,s,r,a,l,d,c,h,f,u,p,m,v=this,g=v.pos,x=v.axis,k=v.label,b=x.mapOfPosToGridNode,y=x.options,P=z(v.options&&v.options.labels,y&&y.labels),O=P&&S(P.symbol)?P.symbol:{},T=b&&b[g],I=T&&T.depth,E="treegrid"===y.type,L=!(!k||!k.element),A=-1<x.tickPositions.indexOf(g),B="highcharts-treegrid-node-",w=x.chart.styledMode;E&&T&&L&&k.addClass(B+"level-"+I),t.apply(v,N(arguments)),E&&T&&L&&0<T.descendants&&(e=M(x,T),o=v,s={color:!w&&k.styles.color,collapsed:e,group:k.parentGroup,options:O,renderer:k.renderer,show:A,xy:k.xy},r=o.labelIcon,a=!r,l=s.renderer,d=s.xy,c=s.options,h=c.width,f=c.height,u={x:d.x-h/2-c.padding,y:d.y-f/2},p=s.collapsed?90:180,m=s.show&&j(u.y),a&&(o.labelIcon=r=l.path(l.symbols[c.type](c.x,c.y,h,f)).addClass("highcharts-label-icon").add(s.group)),m||r.attr({y:-9999}),l.styledMode||r.attr({"stroke-width":1,fill:z(s.color,"#666666")}).css({cursor:"pointer",stroke:c.lineColor,strokeWidth:c.lineWidth}),r[a?"attr":"animate"]({translateX:u.x,translateY:u.y,rotation:p}),i=B+(e?"collapsed":"expanded"),n=B+(e?"expanded":"collapsed"),k.addClass(i).removeClass(n),w||k.css({cursor:"pointer"}),[k,v.labelIcon].forEach(function(t){t.attachedTreeGridEvents||(C(t.element,"mouseover",function(){var t;(t=k).addClass("highcharts-treegrid-node-active"),t.renderer.styledMode||t.css({textDecoration:"underline"})}),C(t.element,"mouseout",function(){var t,e,i;t=k,i=G((e=P).style)?e.style:{},t.removeClass("highcharts-treegrid-node-active"),t.renderer.styledMode||t.css({textDecoration:i.textDecoration})}),C(t.element,"click",function(){v.toggleCollapse()}),t.attachedTreeGridEvents=!0)}))}}),d(f.prototype,{collapse:function(t){var e=this.axis,i=this.pos,n=e.mapOfPosToGridNode[i],o=P(e,n);e.setBreaks(o,z(t,!0))},expand:function(t){var e=this.axis,i=this.pos,n=e.mapOfPosToGridNode[i],o=a(e,n);e.setBreaks(o,z(t,!0))},toggleCollapse:function(t){var e,i,n=this.axis,o=this.pos,s=n.mapOfPosToGridNode[o],r=(M(e=n,i=s)?a:P)(e,i);n.setBreaks(r,z(t,!0))}}),h.prototype.utils={getNode:y.getNode}}),i(e,"masters/modules/treegrid.src.js",[],function(){})});