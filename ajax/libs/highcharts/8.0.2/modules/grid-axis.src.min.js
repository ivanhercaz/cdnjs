"use strict";!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/grid-axis",["highcharts"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var i=t?t._modules:{};function e(t,i,e,n){t.hasOwnProperty(i)||(t[i]=n.apply(null,e))}e(i,"parts-gantt/GridAxis.js",[i["parts/Globals.js"],i["parts/Tick.js"],i["parts/Utilities.js"]],function(t,i,e){function O(t){return e.isObject(t,!0)}var n=e.addEvent,s=e.defined,c=e.erase,f=e.find,S=e.isArray,z=e.isNumber,u=e.merge,b=e.pick,d=e.timeUnits,g=e.wrap,o=t.dateFormat,a=t.Chart,x=t.Axis,w={top:0,right:1,bottom:2,left:3,0:"top",1:"right",2:"bottom",3:"left"};x.prototype.isOuterAxis=function(){var e=this,t=e.chart,i=e.columnIndex,n=e.linkedParent&&e.linkedParent.columns||e.columns,s=i?e.linkedParent:e,o=-1,a=0;return t[e.coll].forEach(function(t,i){t.side!==e.side||t.options.isInternal||(a=i,t===s&&(o=i))}),a===o&&(!z(i)||n.length===i)},x.prototype.getMaxLabelDimensions=function(o,t){var a={width:0,height:0};return t.forEach(function(t){var i,e=o[t],n=0,s=0;O(e)&&(n=(i=O(e.label)?e.label:{}).getBBox?i.getBBox().height:0,i.textStr&&!z(i.textPxLength)&&(i.textPxLength=i.getBBox().width),s=z(i.textPxLength)?Math.round(i.textPxLength):0,a.height=Math.max(n,a.height),a.width=Math.max(s,a.width))}),a},t.dateFormats.W=function(t){var i=new this.Date(t),e=(this.get("Day",i)+6)%7,n=new this.Date(i.valueOf());this.set("Date",n,this.get("Date",i)-e+3);var s=new this.Date(this.get("FullYear",n),0,1);return 4!==this.get("Day",s)&&(this.set("Month",i,0),this.set("Date",i,1+(11-this.get("Day",s))%7)),(1+Math.floor((n.valueOf()-s.valueOf())/6048e5)).toString()},t.dateFormats.E=function(t){return o("%a",t,!0).charAt(0)},n(i,"afterGetLabelPosition",function(t){var i,e,n,s,o,a,r,l=this.label,h=this.axis,d=h.reversed,c=h.chart,f=h.options,u=f&&O(f.grid)?f.grid:{},g=h.options.labels,x=g.align,m=w[h.side],p=t.tickmarkOffset,k=h.tickPositions,b=this.pos-p,v=z(k[t.index+1])?k[t.index+1]-p:h.max+p,P=h.tickSize("tick",!0),y=S(P)?P[0]:0,L=P&&P[1]/2;!0===u.enabled&&("top"===m?o=(s=h.top+h.offset)-y:"bottom"===m?s=(o=c.chartHeight-h.bottom+h.offset)+y:(s=h.top+h.len-h.translate(d?v:b),o=h.top+h.len-h.translate(d?b:v)),"right"===m?r=(a=c.chartWidth-h.right+h.offset)+y:"left"===m?a=(r=h.left+h.offset)-y:(a=Math.round(h.left+h.translate(d?v:b))-L,r=Math.round(h.left+h.translate(d?b:v))-L),this.slotWidth=r-a,t.pos.x="left"===x?a:"right"===x?r:a+(r-a)/2,t.pos.y=o+(s-o)/2,e=c.renderer.fontMetrics(g.style.fontSize,l.element),i=l.getBBox().height,g.useHTML?t.pos.y+=e.b+-i/2:(n=Math.round(i/e.h),t.pos.y+=(e.b-(e.h-e.f))/2+-(n-1)*e.h/2),t.pos.x+=h.horiz&&g.x||0)}),n(x,"afterTickSize",function(t){var i=this.defaultLeftAxisOptions,e=this.horiz,n=this.options.grid,s=void 0===n?{}:n,o=this.maxLabelDimensions;if(s.enabled){var a=2*Math.abs(i.labels.x),r=e?s.cellHeight||a+o.height:a+o.width;S(t.tickSize)?t.tickSize[0]=r:t.tickSize=[r]}}),n(x,"afterGetTitlePosition",function(t){var i=this,e=i.options;if(!0===(e&&O(e.grid)?e.grid:{}).enabled){var n=i.axisTitle,s=n&&n.getBBox().width,o=i.horiz,a=i.left,r=i.top,l=i.width,h=i.height,d=e.title,c=i.opposite,f=i.offset,u=i.tickSize()||[0],g=d.x||0,x=d.y||0,m=b(d.margin,o?5:10),p=i.chart.renderer.fontMetrics(d.style&&d.style.fontSize,n).f,k=(o?r+h:a)+(o?1:-1)*(c?-1:1)*(u[0]/2)+(i.side===w.bottom?p:0);t.titlePosition.x=o?a-s/2-m+g:k+(c?l:0)+f+g,t.titlePosition.y=o?k-(c?h:0)+(c?p:-p)/2+f+x:r-m+x}}),g(x.prototype,"unsquish",function(t){var i,e=this.options;return!0===(e&&O(e.grid)?e.grid:{}).enabled&&this.categories?this.tickInterval:t.apply(this,(i=arguments,Array.prototype.slice.call(i,1)))}),n(x,"afterSetOptions",function(t){var h,i=this.options,e=t.userOptions,n=i&&O(i.grid)?i.grid:{};!0===n.enabled&&(h=u(!0,{className:"highcharts-grid-axis "+(e.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},e),"xAxis"===this.coll&&(s(e.linkedTo)&&!s(e.tickPixelInterval)&&(h.tickPixelInterval=350),s(e.tickPixelInterval)||!s(e.linkedTo)||s(e.tickPositioner)||s(e.tickInterval)||(h.tickPositioner=function(t,i){var e=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(e){var n,s,o,a,r,l=h.units;for(a=0;a<l.length;a++)if(l[a][0]===e.unitName){n=a;break}return l[n+1]?(o=l[n+1][0],s=(l[n+1][1]||[1])[0]):"year"===e.unitName&&(o="year",s=10*e.count),r=d[o],this.tickInterval=r*s,this.getTimeTicks({unitRange:r,count:s,unitName:o},t,i,this.options.startOfWeek)}})),u(!0,this.options,h),this.horiz&&(i.minPadding=b(e.minPadding,0),i.maxPadding=b(e.maxPadding,0)),z(i.grid.borderWidth)&&(i.tickWidth=i.lineWidth=n.borderWidth))}),n(x,"afterSetAxisTranslation",function(){var t=this.options,i=t&&O(t.grid)?t.grid:{},e=this.tickPositions&&this.tickPositions.info,n=this.userOptions.labels||{};this.horiz&&(!0===i.enabled&&this.series.forEach(function(t){t.options.pointRange=0}),e&&(!1===t.dateTimeLabelFormats[e.unitName].range||1<e.count)&&!s(n.align)&&(t.labels.align="left",s(n.x)||(t.labels.x=3)))}),n(x,"trimTicks",function(){var t=this,i=t.options,e=i&&O(i.grid)?i.grid:{},n=t.categories,s=t.tickPositions,o=s[0],a=s[s.length-1],r=t.linkedParent&&t.linkedParent.min,l=t.linkedParent&&t.linkedParent.max,h=r||t.min,d=l||t.max,c=t.tickInterval,f=o<h&&h<o+c,u=d<a&&a-c<d;!0!==e.enabled||n||!t.horiz&&!t.isLinked||(f&&!i.startOnTick&&(s[0]=h),u&&!i.endOnTick&&(s[s.length-1]=d))}),n(x,"afterRender",function(){var t,i,e,n,s=this,o=s.options,a=o&&O(o.grid)?o.grid:{},r=s.chart.renderer;if(!0===a.enabled){if(s.maxLabelDimensions=s.getMaxLabelDimensions(s.ticks,s.tickPositions),s.rightWall&&s.rightWall.destroy(),s.isOuterAxis()&&s.axisLine){var l=o.lineWidth;if(l){var h=s.getLinePath(l);e=h.indexOf("M")+1,n=h.indexOf("L")+1,t=h.indexOf("M")+2,i=h.indexOf("L")+2;var d=(s.tickSize("tick")[0]-1)*(s.side===w.top||s.side===w.left?-1:1);s.horiz?(h[t]=h[t]+d,h[i]=h[i]+d):(h[e]=h[e]+d,h[n]=h[n]+d),s.axisLineExtra?s.axisLineExtra.animate({d:h}):(s.axisLineExtra=r.path(h).attr({zIndex:7}).addClass("highcharts-axis-line").add(s.axisGroup),r.styledMode||s.axisLineExtra.attr({stroke:o.lineColor,"stroke-width":l})),s.axisLine[s.showAxis?"show":"hide"](!0)}}(s.columns||[]).forEach(function(t){t.render()})}});var r={afterGetOffset:function(){(this.columns||[]).forEach(function(t){t.getOffset()})},afterInit:function(){var t,i,e=this,n=e.chart,s=e.userOptions,o=e.options,a=o&&O(o.grid)?o.grid:{};if(a.enabled&&((i=(t=e).options).labels||(i.labels={}),i.labels.align=b(i.labels.align,"center"),t.categories||(i.showLastLabel=!1),t.labelRotation=0,i.labels.rotation=0,g(e,"labelFormatter",function(t){var i=this.axis,e=i.tickPositions,n=this.value,s=(i.isLinked?i.linkedParent:i).series[0],o=n===e[0],a=n===e[e.length-1],r=s&&f(s.options.data,function(t){return t[i.isXAxis?"x":"y"]===n});return this.isFirst=o,this.isLast=a,this.point=r,t.call(this)})),a.columns)for(var r=e.columns=[],l=e.columnIndex=0;++l<a.columns.length;){var h=u(s,a.columns[a.columns.length-l-1],{linkedTo:0,type:"category"});delete h.grid.columns;var d=new x(e.chart,h,!0);d.isColumn=!0,d.columnIndex=l,c(n.axes,d),c(n[e.coll],d),r.push(d)}},afterSetOptions:function(t){var i=t.userOptions,e=i&&O(i.grid)?i.grid:{},n=e.columns;e.enabled&&n&&u(!0,this.options,n[n.length-1])},afterSetScale:function(){(this.columns||[]).forEach(function(t){t.setScale()})},destroy:function(i){(this.columns||[]).forEach(function(t){t.destroy(i.keepEvents)})},init:function(t){var i=t.userOptions,e=i&&O(i.grid)?i.grid:{};e.enabled&&s(e.borderColor)&&(i.tickColor=i.lineColor=e.borderColor)}};Object.keys(r).forEach(function(t){n(x,t,r[t])}),n(a,"afterSetChartSize",function(){this.axes.forEach(function(t){(t.columns||[]).forEach(function(t){t.setAxisSize(),t.setAxisTranslation()})})})}),e(i,"masters/modules/grid-axis.src.js",[],function(){})});