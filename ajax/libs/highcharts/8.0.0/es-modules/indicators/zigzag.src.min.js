"use strict";import H from"../parts/Globals.js";import"../parts/Utilities.js";var UNDEFINED,seriesType=H.seriesType;seriesType("zigzag","sma",{params:{lowIndex:2,highIndex:1,deviation:1}},{nameComponents:["deviation"],nameSuffixes:["%"],nameBase:"Zig Zag",getValues:function(e,s){var a,i,t,p,n,h,r,u=s.lowIndex,o=s.highIndex,g=s.deviation/100,l=1+g,D=1-g,m=e.xData,d=e.yData,f=d?d.length:0,x=[],I=[],v=[],E=!1,N=!1;if(!(!m||m.length<=1||f&&(d[0][u]===UNDEFINED||d[0][o]===UNDEFINED))){for(p=d[0][u],n=d[0][o],a=1;a<f;a++)d[a][u]<=n*D?(x.push([m[0],n]),t=[m[a],d[a][u]],h=!0,E=!0):d[a][o]>=p*l&&(x.push([m[0],p]),t=[m[a],d[a][o]],h=!1,E=!0),E&&(I.push(x[0][0]),v.push(x[0][1]),i=a++,a=f);for(a=i;a<f;a++)h?(d[a][u]<=t[1]&&(t=[m[a],d[a][u]]),d[a][o]>=t[1]*l&&(N=o)):(d[a][o]>=t[1]&&(t=[m[a],d[a][o]]),d[a][u]<=t[1]*D&&(N=u)),!1!==N&&(x.push(t),I.push(t[0]),v.push(t[1]),t=[m[a],d[a][N]],h=!h,N=!1);return 0!==(r=x.length)&&x[r-1][0]<m[f-1]&&(x.push(t),I.push(t[0]),v.push(t[1])),{values:x,xData:I,yData:v}}}});