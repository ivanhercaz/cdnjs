"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var clamp=U.clamp,extend=U.extend,isNumber=U.isNumber,pick=U.pick,pInt=U.pInt,wrap=U.wrap;import"../parts/Options.js";import"../parts-more/GaugeSeries.js";var colorAxisMethods,Renderer=H.Renderer;wrap(Renderer.prototype.symbols,"arc",function(t,o,s,a,e,r){var n=t(o,s,a,e,r);if(r.rounded){var i=((r.r||a)-r.innerR)/2,l=["A",i,i,0,1,1,n[1],n[2]],d=["A",i,i,0,1,1,n[12],n[13]];n.splice.apply(n,[n.length-1,0].concat(l)),n.splice.apply(n,[11,3].concat(d))}return n}),colorAxisMethods={initDataClasses:function(t){var o,s=this.chart,a=0,e=this.options;this.dataClasses=o=[],t.dataClasses.forEach(function(r,n){var i;r=H.merge(r),o.push(r),r.color||("category"===e.dataClassColor?(i=s.options.colors,r.color=i[a++],a===i.length&&(a=0)):r.color=H.color(e.minColor).tweenTo(H.color(e.maxColor),n/(t.dataClasses.length-1)))})},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],this.stops.forEach(function(t){t.color=H.color(t[1])})},toColor:function(t,o){var s,a,e,r,n,i,l=this.stops,d=this.dataClasses;if(d){for(i=d.length;i--;)if(a=(n=d[i]).from,e=n.to,(void 0===a||t>=a)&&(void 0===e||t<=e)){r=n.color,o&&(o.dataClass=i);break}}else{for(this.isLog&&(t=this.val2lin(t)),s=1-(this.max-t)/(this.max-this.min),i=l.length;i--&&!(s>l[i][0]););a=l[i]||l[i+1],s=1-((e=l[i+1]||a)[0]-s)/(e[0]-a[0]||1),r=a.color.tweenTo(e.color,s)}return r}};var solidGaugeOptions={colorByPoint:!0,dataLabels:{y:0}};H.seriesType("solidgauge","gauge",solidGaugeOptions,{drawLegendSymbol:H.LegendSymbolMixin.drawRectangle,translate:function(){var t=this.yAxis;extend(t,colorAxisMethods),!t.dataClasses&&t.options.dataClasses&&t.initDataClasses(t.options),t.initStops(t.options),H.seriesTypes.gauge.prototype.translate.call(this)},drawPoints:function(){var t,o=this,s=o.yAxis,a=s.center,e=o.options,r=o.chart.renderer,n=e.overshoot,i=isNumber(n)?n/180*Math.PI:0;isNumber(e.threshold)&&(t=s.startAngleRad+s.translate(e.threshold,null,null,null,!0)),this.thresholdAngleRad=pick(t,s.startAngleRad),o.points.forEach(function(t){if(!t.isNull){var n,l,d,p,c=t.graphic,h=s.startAngleRad+s.translate(t.y,null,null,null,!0),u=pInt(pick(t.options.radius,e.radius,100))*a[2]/200,g=pInt(pick(t.options.innerRadius,e.innerRadius,60))*a[2]/200,m=s.toColor(t.y,t),f=Math.min(s.startAngleRad,s.endAngleRad),R=Math.max(s.startAngleRad,s.endAngleRad);"none"===m&&(m=t.color||o.color||"none"),"none"!==m&&(t.color=m),h=clamp(h,f-i,R+i),!1===e.wrap&&(h=clamp(h,f,R)),d=Math.min(h,o.thresholdAngleRad),(p=Math.max(h,o.thresholdAngleRad))-d>2*Math.PI&&(p=d+2*Math.PI),t.shapeArgs=n={x:a[0],y:a[1],r:u,innerR:g,start:d,end:p,rounded:e.rounded},t.startR=u,c?(l=n.d,c.animate(extend({fill:m},n)),l&&(n.d=l)):t.graphic=c=r.arc(n).attr({fill:m,"sweep-flag":0}).add(o.group),o.chart.styledMode||("square"!==e.linecap&&c.attr({"stroke-linecap":"round","stroke-linejoin":"round"}),c.attr({stroke:e.borderColor||"none","stroke-width":e.borderWidth||0})),c&&c.addClass(t.getClassName(),!0)}})},animate:function(t){t||(this.startAngleRad=this.thresholdAngleRad,H.seriesTypes.pie.prototype.animate.call(this,t))}});