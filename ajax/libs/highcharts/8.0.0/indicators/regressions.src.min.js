"use strict";!function(n){"object"==typeof module&&module.exports?module.exports=n.default=n:"function"==typeof define&&define.amd?define("highcharts/indicators/regressions",["highcharts","highcharts/modules/stock"],function(e){return n(e),n.Highcharts=e,n}):n("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){var n=e?e._modules:{};function t(e,n,t,r){e.hasOwnProperty(n)||(e[n]=r.apply(null,t))}t(n,"indicators/regressions.src.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,n){var f=n.isArray,t=e.seriesType;t("linearRegression","sma",{params:{xAxisUnit:void 0},tooltip:{valueDecimals:4}},{nameBase:"Linear Regression Indicator",getRegressionLineParameters:function(e,n){function t(e,n){return f(e)?e[n]:e}var r,s,i,o=this.options.params.index,a=e.reduce(function(e,n){return n+e},0),c=n.reduce(function(e,n){return t(n,o)+e},0),u=a/e.length,l=c/n.length,p=0,g=0;for(s=0;s<e.length;s++)p+=(r=e[s]-u)*(t(n[s],o)-l),g+=Math.pow(r,2);return{slope:i=g?p/g:0,intercept:l-i*u}},getEndPointY:function(e,n){return e.slope*n+e.intercept},transformXData:function(e,n){var t=e[0];return e.map(function(e){return(e-t)/n})},findClosestDistance:function(e){var n,t,r;for(r=1;r<e.length-1;r++)0<(n=e[r]-e[r-1])&&(void 0===t||n<t)&&(t=n);return t},getValues:function(e,n){var t,r,s,i,o,a,c,u,l,p=e.xData,g=e.yData,f=n.period,h={xData:[],yData:[],values:[]},d=this.options.params.xAxisUnit||this.findClosestDistance(p);for(r=f-1;r<=p.length-1;r++)s=r-f+1,i=r+1,o=p[r],c=p.slice(s,i),u=g.slice(s,i),l=this.transformXData(c,d),t=this.getRegressionLineParameters(l,u),a=this.getEndPointY(t,l[l.length-1]),h.values.push({regressionLineParameters:t,x:o,y:a}),h.xData.push(o),h.yData.push(a);return h}}),t("linearRegressionSlope","linearRegression",{},{nameBase:"Linear Regression Slope Indicator",getEndPointY:function(e){return e.slope}}),t("linearRegressionIntercept","linearRegression",{},{nameBase:"Linear Regression Intercept Indicator",getEndPointY:function(e){return e.intercept}}),t("linearRegressionAngle","linearRegression",{tooltip:{pointFormat:'<span style="color:{point.color}">●</span>{series.name}: <b>{point.y}°</b><br/>'}},{nameBase:"Linear Regression Angle Indicator",slopeToAngle:function(e){return Math.atan(e)*(180/Math.PI)},getEndPointY:function(e){return this.slopeToAngle(e.slope)}})}),t(n,"masters/indicators/regressions.src.js",[],function(){})});