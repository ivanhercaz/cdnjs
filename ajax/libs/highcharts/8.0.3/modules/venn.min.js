!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/venn",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,r,n){t.hasOwnProperty(e)||(t[e]=n.apply(null,r))}e(t=t?t._modules:{},"mixins/draw-point.js",[],function(){return function(t){(t.attribs=t.attribs||{}).class=this.getClassName(),function(t){var e=this,r=e.graphic,n=t.animatableAttribs,i=t.onComplete,o=t.css,a=t.renderer;if(e.shouldDraw())r||(e.graphic=r=a[t.shapeType](t.shapeArgs).add(t.group)),r.css(o).attr(t.attribs).animate(n,!t.isNew&&void 0,i);else if(r){function s(){e.graphic=r=r.destroy(),"function"==typeof i&&i()}Object.keys(n).length?r.animate(n,void 0,function(){s()}):s()}}.call(this,t)}}),e(t,"mixins/geometry.js",[],function(){return{getAngleBetweenPoints:function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)},getCenterOfPoints:function(t){var e=t.reduce(function(t,e){return t.x+=e.x,t.y+=e.y,t},{x:0,y:0});return{x:e.x/t.length,y:e.y/t.length}},getDistanceBetweenPoints:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}}}),e(t,"mixins/geometry-circles.js",[t["mixins/geometry.js"]],function(t){function c(t,e){return e=Math.pow(10,e),Math.round(t*e)/e}function i(t){if(t<=0)throw Error("radius of circle must be a positive number.");return Math.PI*t*t}function o(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function a(t,e){var r=h(t,e),n=t.r,i=e.r,o=[];if(r<n+i&&r>Math.abs(n-i)){var a=((n*=n)-i*i+r*r)/(2*r);i=Math.sqrt(n-a*a),n=t.x,o=e.x,t=t.y;var s=e.y;e=n+a*(o-n)/r,a=t+a*(s-t)/r,t=i/r*-(s-t),r=i/r*-(o-n),o=[{x:c(e+t,14),y:c(a-r,14)},{x:c(e-t,14),y:c(a+r,14)}]}return o}function r(t){return t.reduce(function(t,i,o,e){return e=e.slice(o+1).reduce(function(t,e,r){var n=[o,r+o+1];return t.concat(a(i,e).map(function(t){return t.indexes=n,t}))},[]),t.concat(e)},[])}function n(t,e){return h(t,e)<=e.r+1e-10}function s(e,t){return!t.some(function(t){return!n(e,t)})}function u(e){return r(e).filter(function(t){return s(t,e)})}var l=t.getAngleBetweenPoints,f=t.getCenterOfPoints,h=t.getDistanceBetweenPoints;return{getAreaOfCircle:i,getAreaOfIntersectionBetweenCircles:function(s){var t=u(s);if(1<t.length){var e=f(t),r=(t=t.map(function(t){return t.angle=l(e,t),t}).sort(function(t,e){return e.angle-t.angle}))[t.length-1];if(0!==(t=t.reduce(function(t,i){var o=t.startPoint,a=f([o,i]),e=i.indexes.filter(function(t){return-1<o.indexes.indexOf(t)}).reduce(function(t,e){e=s[e];var r=l(e,i),n=l(e,o);return r=n-(n-r+(n<r?2*Math.PI:0))/2,r=h(a,{x:e.x+e.r*Math.sin(r),y:e.y+e.r*Math.cos(r)}),2*(e=e.r)<r&&(r=2*e),(!t||t.width>r)&&(t={r:e,largeArc:e<r?1:0,width:r,x:i.x,y:i.y}),t},null);if(e){var r=e.r;t.arcs.push(["A",r,r,0,e.largeArc,1,e.x,e.y]),t.startPoint=i}return t},{startPoint:r,arcs:[]}).arcs).length&&1!==t.length){t.unshift(["M",r.x,r.y]);var n={center:e,d:t}}}return n},getCircleCircleIntersection:a,getCirclesIntersectionPoints:r,getCirclesIntersectionPolygon:u,getCircularSegmentArea:o,getOverlapBetweenCircles:function(t,e,r){var n=0;return r<t+e&&(n=c(n=r<=Math.abs(e-t)?i(t<e?t:e):(r-=n=(t*t-e*e+r*r)/(2*r),o(t,t-n)+o(e,e-r)),14)),n},isCircle1CompletelyOverlappingCircle2:function(t,e){return h(t,e)+e.r<t.r+1e-10},isPointInsideCircle:n,isPointInsideAllCircles:s,isPointOutsideAllCircles:function(e,t){return!t.some(function(t){return n(e,t)})},round:c}}),e(t,"mixins/nelder-mead.js",[],function(){function f(t){function e(t,e){return t.sum+=e[t.i],t}for(var r=(t=t.slice(0,-1)).length,n=[],i=0;i<r;i++)n[i]=t.reduce(e,{sum:0,i:i}).sum/r;return n}return{getCentroid:f,nelderMead:function(o,t){function e(t,e){return t.fx-e.fx}function i(r,t,n,i){return t.map(function(t,e){return r*t+n*i[e]})}function r(t,e){return e.fx=o(e),t[t.length-1]=e,t}function n(t){var e=t[0];return t.map(function(t){return(t=i(.5,e,.5,t)).fx=o(t),t})}function a(t,e,r,n){return(t=i(r,t,n,e)).fx=o(t),t}t=function(t){var e=t.length,r=Array(e+1);r[0]=t,r[0].fx=o(t);for(var n=0;n<e;++n){var i=t.slice();i[n]=i[n]?1.05*i[n]:.001,i.fx=o(i),r[n+1]=i}return r}(t);for(var s=0;s<100;s++){t.sort(e);var c=t[t.length-1],u=f(t),l=a(u,c,2,-1);t=l.fx<t[0].fx?r(t,(c=a(u,c,3,-2)).fx<l.fx?c:l):l.fx>=t[t.length-2].fx?l.fx>c.fx?(u=a(u,c,.5,.5)).fx<c.fx?r(t,u):n(t):(u=a(u,c,1.5,-.5)).fx<l.fx?r(t,u):n(t):r(t,l)}return t[0]}}}),e(t,"modules/venn.src.js",[t["parts/Globals.js"],t["mixins/draw-point.js"],t["mixins/geometry.js"],t["mixins/geometry-circles.js"],t["mixins/nelder-mead.js"],t["parts/Color.js"],t["parts/Utilities.js"]],function(t,e,r,n,i,o,a){function h(t){var s={},c={};if(0<t.length){var u=N(t),l=t.filter(T);t.forEach(function(t){var e,r,n,i,o=t.sets,a=o.join();(o=T(t)?u[a]:f(o.map(function(t){return u[t]})))&&(s[a]=o,c[a]=(r=l,n=(e=t).sets,(i=r.reduce(function(t,e){return t[-1<n.indexOf(e.sets[0])?"internal":"external"].push(e.circle),t},{internal:[],external:[]})).external=i.external.filter(function(e){return i.internal.some(function(t){return!p(e,t)})}),{position:e=k(i.internal,i.external),width:r=U(e,i.internal,i.external)}))})}return{mapOfIdToShape:s,mapOfIdToLabelValues:c}}var s=n.getAreaOfCircle,f=n.getAreaOfIntersectionBetweenCircles,d=n.getCircleCircleIntersection,c=n.getCirclesIntersectionPolygon,u=n.getOverlapBetweenCircles,p=n.isCircle1CompletelyOverlappingCircle2,l=n.isPointInsideAllCircles,g=n.isPointInsideCircle,v=n.isPointOutsideAllCircles,x=i.nelderMead,y=o.parse;o=a.addEvent;var m=a.animObject,b=a.extend,C=a.isArray,A=a.isNumber,O=a.isObject,M=a.isString,w=a.merge;a=a.seriesType;var P=r.getCenterOfPoints,j=r.getDistanceBetweenPoints;t=t.seriesTypes;function E(o,t){return t.reduce(function(t,e){var r,n,i=0;return 1<e.sets.length&&(i=e.value,r=e.sets.map(function(t){return o[t]}),n=0,2===r.length&&(n=r[0],r=r[1],n=u(n.r,r.r,j(n,r))),e=i-(e=n),i=Math.round(e*e*1e11)/1e11),t+i},0)}function I(t,e,r,n,i){var o=t(e),a=t(r);i=i||100,n=n||1e-10;var s=r-e,c=1;if(r<=e)throw Error("a must be smaller than b.");if(0<o*a)throw Error("f(a) and f(b) must have opposite signs.");if(0===o)var u=e;else if(0===a)u=r;else for(;c++<=i&&0!==l&&n<s;){var l=t(u=e+(s=(r-e)/2));0<o*l?e=u:r=u}return u}function B(e,r,n){var t=e+r;return n<=0?t:s(e<r?e:r)<=n?0:I(function(t){return t=u(e,r,t),n-t},0,t)}function T(t){return C(t.sets)&&1===t.sets.length}function L(r,t,e){return t=t.reduce(function(t,e){return(e=e.r-j(r,e))<=t?e:t},Number.MAX_VALUE),e.reduce(function(t,e){return(e=j(r,e)-e.r)<=t?e:t},t)}function D(t){var e=t.filter(function(t){return 2===t.sets.length}).reduce(function(n,i){return i.sets.forEach(function(t,e,r){O(n[t])||(n[t]={overlapping:{},totalOverlap:0}),n[t].totalOverlap+=i.value,n[t].overlapping[r[1-e]]=i.value}),n},{});return t.filter(T).forEach(function(t){b(t,e[t.sets[0]])}),t}function V(t,e){return e.totalOverlap-t.totalOverlap}function N(t){var u=[],l={};function r(t,e){var r=t.circle;r.x=e.x,r.y=e.y,u.push(t)}t.filter(function(t){return 1===t.sets.length}).forEach(function(t){l[t.sets[0]]=t.circle={x:Number.MAX_VALUE,y:Number.MAX_VALUE,r:Math.sqrt(t.value/Math.PI)}}),D(t);var e=t.filter(T).sort(V);r(e.shift(),{x:0,y:0});var f=t.filter(function(t){return 2===t.sets.length});return e.forEach(function(t){var a=t.circle,s=a.r,c=t.overlapping,e=u.reduce(function(r,t,e){var n=t.circle,i=B(s,n.r,c[t.sets[0]]),o=[{x:n.x+i,y:n.y},{x:n.x-i,y:n.y},{x:n.x,y:n.y+i},{x:n.x,y:n.y-i}];return u.slice(e+1).forEach(function(t){var e=t.circle;t=B(s,e.r,c[t.sets[0]]),o=o.concat(d({x:n.x,y:n.y,r:i},{x:e.x,y:e.y,r:t}))}),o.forEach(function(t){a.x=t.x,a.y=t.y;var e=E(l,f);e<r.loss&&(r.loss=e,r.coordinates=t)}),r},{loss:Number.MAX_VALUE,coordinates:void 0});r(t,e.coordinates)}),l}function X(t){var r={};return O(t)&&A(t.value)&&-1<t.value&&C(t.sets)&&0<t.sets.length&&!t.sets.some(function(t){var e=!1;return!r[t]&&M(t)?r[t]=!0:e=!0,e})}function S(t){var e,r=(t=C(t)?t:[]).reduce(function(t,e){return X(e)&&T(e)&&0<e.value&&-1===t.indexOf(e.sets[0])&&t.push(e.sets[0]),t},[]).sort(),n=t.reduce(function(t,e){return X(e)&&!e.sets.some(function(t){return-1===r.indexOf(t)})&&(t[e.sets.sort().join()]=e),t},{});return r.reduce(function(e,r,t,n){return n.slice(t+1).forEach(function(t){e.push(r+","+t)}),e},[]).forEach(function(t){if(!n[t]){var e={sets:t.split(","),value:0};n[t]=e}}),e=n,Object.keys(e).map(function(t){return e[t]})}var k=function(n,i){var t=n.reduce(function(t,e){var r=e.r/2;return[{x:e.x,y:e.y},{x:e.x+r,y:e.y},{x:e.x-r,y:e.y},{x:e.x,y:e.y+r},{x:e.x,y:e.y-r}].reduce(function(t,e){var r=L(e,n,i);return t.margin<r&&(t.point=e,t.margin=r),t},t)},{point:void 0,margin:-Number.MAX_VALUE}).point;return t={x:(t=x(function(t){return-L({x:t[0],y:t[1]},n,i)},[t.x,t.y]))[0],y:t[1]},l(t,n)&&v(t,i)||(t=1<n.length?P(c(n)):{x:n[0].x,y:n[0].y}),t},U=function(i,o,t){var e=o.reduce(function(t,e){return Math.min(e.r,t)},1/0),a=t.filter(function(t){return!g(i,t)});return t=function(r,n){return I(function(t){var e={x:i.x+n*t,y:i.y};return e=l(e,o)&&v(e,a),-(r-t)+(e?0:Number.MAX_VALUE)},0,r)},2*Math.min(t(e,-1),t(e,1))};a("venn","scatter",{borderColor:"#cccccc",borderDashStyle:"solid",borderWidth:1,brighten:0,clip:!1,colorByPoint:!0,dataLabels:{enabled:!0,verticalAlign:"middle",formatter:function(){return this.point.name}},inactiveOtherPoints:!0,marker:!1,opacity:.75,showInLegend:!1,states:{hover:{opacity:1,borderColor:"#333333"},select:{color:"#cccccc",borderColor:"#000000",animation:!1},inactive:{opacity:.075}},tooltip:{pointFormat:"{point.name}: {point.value}"}},{isCartesian:!1,axisTypes:[],directTouch:!0,pointArrayMap:["value"],translate:function(){var t=this.chart;this.processedXData=this.xData,this.generatePoints();var e,r,n,i,o,a=S(this.options.data),s=(a=h(a)).mapOfIdToShape,c=a.mapOfIdToLabelValues;a=Object.keys(s).filter(function(t){return(t=s[t])&&A(t.r)}).reduce(function(t,e){var r=s[e];e=r.x-r.r;var n=r.x+r.r,i=r.y+r.r;return r=r.y-r.r,(!A(t.left)||t.left>e)&&(t.left=e),(!A(t.right)||t.right<n)&&(t.right=n),(!A(t.top)||t.top>r)&&(t.top=r),(!A(t.bottom)||t.bottom<i)&&(t.bottom=i),t},{top:0,bottom:0,left:0,right:0}),e=t.plotWidth,r=t.plotHeight,i=(n=a).bottom-n.top,o=n.right-n.left;var u=(t={scale:i=Math.min(0<o?1/o*e:1,0<i?1/i*r:1),centerX:e/2-(n.right+n.left)/2*i,centerY:r/2-(n.top+n.bottom)/2*i}).scale,l=t.centerX,f=t.centerY;this.points.forEach(function(t){var e,r=C(t.sets)?t.sets:[],n=r.join(),i=s[n],o=c[n]||{};n=o.width,o=o.position;var a=t.options&&t.options.dataLabels;i&&(i.r?e={x:l+i.x*u,y:f+i.y*u,r:i.r*u}:i.d&&(e={d:i.d.reduce(function(t,e){return"M"===e[0]?(e[1]=l+e[1]*u,e[2]=f+e[2]*u):"A"===e[0]&&(e[1]*=u,e[2]*=u,e[6]=l+e[6]*u,e[7]=f+e[7]*u),t.concat(e)},[]).join(" ")}),o?(o.x=l+o.x*u,o.y=f+o.y*u):o={},A(n)&&(n=Math.round(n*u))),t.shapeArgs=e,o&&e&&(t.plotX=o.x,t.plotY=o.y),n&&e&&(t.dlOptions=w(!0,{style:{width:n}},O(a)&&a)),t.name=t.options.name||r.join("∩")})},drawPoints:function(){var n=this,i=n.chart,o=n.group,a=i.renderer;(n.points||[]).forEach(function(t){var e={zIndex:C(t.sets)?t.sets.length:0},r=t.shapeArgs;i.styledMode||b(e,n.pointAttribs(t,t.state)),t.draw({isNew:!t.graphic,animatableAttribs:r,attribs:e,group:o,renderer:a,shapeType:r&&r.d?"path":"circle"})})},pointAttribs:function(t,e){var r=this.options||{};return t=w(r,{color:t&&t.color},t&&t.options||{},e&&r.states[e]||{}),{fill:y(t.color).setOpacity(t.opacity).brighten(t.brightness).get(),stroke:t.borderColor,"stroke-width":t.borderWidth,dashstyle:t.borderDashStyle}},animate:function(t){if(!t){var i=m(this.options.animation);this.points.forEach(function(t){var e=t.shapeArgs;if(t.graphic&&e){var r={},n={};e.d?r.opacity=.001:(r.r=0,n.r=e.r),t.graphic.attr(r).animate(n,i),e.d&&setTimeout(function(){t&&t.graphic&&t.graphic.animate({opacity:1})},i.duration)}},this)}},utils:{addOverlapToSets:D,geometry:r,geometryCircles:n,getLabelWidth:U,getMarginFromCircles:L,getDistanceBetweenCirclesByOverlap:B,layoutGreedyVenn:N,loss:E,nelderMead:i,processVennData:S,sortByTotalOverlap:V}},{draw:e,shouldDraw:function(){return!!this.shapeArgs},isValid:function(){return A(this.value)}}),o(t.venn,"afterSetOptions",function(t){var e=t.options.states;this.is("venn")&&Object.keys(e).forEach(function(t){e[t].halo=!1})})}),e(t,"masters/modules/venn.src.js",[],function(){})});