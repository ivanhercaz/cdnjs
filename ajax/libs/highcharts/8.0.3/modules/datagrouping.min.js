!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/datagrouping",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,a,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,a))}e(t=t?t._modules:{},"parts/DataGrouping.js",[t["parts/Globals.js"],t["parts/Point.js"],t["parts/Tooltip.js"],t["parts/Utilities.js"]],function(t,e,a,o){var i=o.addEvent,r=o.arrayMax,n=o.arrayMin,s=o.correctFloat,b=o.defined,p=o.error,d=o.extend,g=o.format,A=o.isNumber,S=o.merge,c=o.pick,u=t.Axis,l=t.defaultPlotOptions;o=t.Series;function h(t,e,a,o){var i,r=this,n=r.data,s=r.options&&r.options.data,p=[],u=[],l=[],h=t.length,d=!!e,g=[],c=r.pointArrayMap,f=c&&c.length,m=["x"].concat(c||["y"]),D=0,v=0;o="function"==typeof o?o:P[o]?P[o]:P[r.getDGApproximation&&r.getDGApproximation()||"average"],f?c.forEach(function(){g.push([])}):g.push([]);var y=f||1;for(i=0;i<=h&&!(t[i]>=a[0]);i++);for(;i<=h;i++){for(;void 0!==a[D+1]&&t[i]>=a[D+1]||i===h;){var G=a[D];r.dataGroupInfo={start:r.cropStart+v,length:g[0].length};var x=o.apply(r,g);for(r.pointClass&&!b(r.dataGroupInfo.options)&&(r.dataGroupInfo.options=S(r.pointClass.prototype.optionsToObject.call({series:r},r.options.data[r.cropStart+v])),m.forEach(function(t){delete r.dataGroupInfo.options[t]})),void 0!==x&&(p.push(G),u.push(x),l.push(r.dataGroupInfo)),v=i,G=0;G<y;G++)g[G].length=0,g[G].hasNulls=!1;if(D+=1,i===h)break}if(i===h)break;if(c)for(G=r.cropStart+i,x=n&&n[G]||r.pointClass.prototype.applyOptions.apply({series:r},[s[G]]),G=0;G<f;G++){var M=x[c[G]];A(M)?g[G].push(M):null===M&&(g[G].hasNulls=!0)}else G=d?e[i]:null,A(G)?g[0].push(G):null===G&&(g[0].hasNulls=!0)}return{groupedXData:p,groupedYData:u,groupMap:l}}var P=t.approximations={sum:function(t){var e=t.length;if(!e&&t.hasNulls)var a=null;else if(e)for(a=0;e--;)a+=t[e];return a},average:function(t){var e=t.length;return t=P.sum(t),A(t)&&e&&(t=s(t/e)),t},averages:function(){var e=[];return[].forEach.call(arguments,function(t){e.push(P.average(t))}),void 0===e[0]?void 0:e},open:function(t){return t.length?t[0]:t.hasNulls?null:void 0},high:function(t){return t.length?r(t):t.hasNulls?null:void 0},low:function(t){return t.length?n(t):t.hasNulls?null:void 0},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:void 0},ohlc:function(t,e,a,o){if(t=P.open(t),e=P.high(e),a=P.low(a),o=P.close(o),A(t)||A(e)||A(a)||A(o))return[t,e,a,o]},range:function(t,e){return t=P.low(t),e=P.high(e),A(t)||A(e)?[t,e]:null===t&&null===e?null:void 0}},f={approximations:P,groupData:h},m=o.prototype,D=m.processData,v=m.generatePoints,y={groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},G={line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5}},x=t.defaultDataGroupingUnits=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]];return m.getDGApproximation=function(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("column")?"sum":"average"},m.groupData=h,m.processData=function(){var t,e=this.chart,a=this.options.dataGrouping,o=!1!==this.allowDG&&a&&c(a.enabled,e.options.isStock),i=this.visible||!e.options.chart.ignoreHiddenSeries,r=this.currentDataGrouping,n=!1;if(this.forceCrop=o,this.groupPixelWidth=null,this.hasProcessed=!0,o&&!this.requireSorting&&(this.requireSorting=n=!0),o=!1===D.apply(this,arguments)||!o,n&&(this.requireSorting=!1),!o){this.destroyGroupedData(),o=a.groupAll?this.xData:this.processedXData;var s=a.groupAll?this.yData:this.processedYData,p=e.plotSizeX,u=(e=this.xAxis).options.ordinal,l=this.groupPixelWidth=e.getGroupPixelWidth&&e.getGroupPixelWidth();if(l){this.isDirty=t=!0,this.points=null;var h=(n=e.getExtremes()).min;l=l*((n=n.max)-h)/p*(u=u&&e.getGroupIntervalFactor(h,n,this)||1),p=e.getTimeTicks(e.normalizeTimeTickInterval(l,a.units||x),Math.min(h,o[0]),Math.max(n,o[o.length-1]),e.options.startOfWeek,o,this.closestPointRange),o=(s=m.groupData.apply(this,[o,s,p,a.approximation])).groupedXData,u=s.groupedYData;var d=0;if(a.smoothed&&o.length){var g=o.length-1;for(o[g]=Math.min(o[g],n);g--&&0<g;)o[g]+=l/2;o[0]=Math.max(o[0],h)}for(g=1;g<p.length;g++)p.info.segmentStarts&&-1!==p.info.segmentStarts.indexOf(g)||(d=Math.max(p[g]-p[g-1],d));(h=p.info).gapSize=d,this.closestPointRange=p.info.totalRange,this.groupMap=s.groupMap,b(o[0])&&o[0]<e.min&&i&&((!b(e.options.min)&&e.min<=e.dataMin||e.min===e.dataMin)&&(e.min=Math.min(o[0],e.min)),e.dataMin=Math.min(o[0],e.dataMin)),a.groupAll&&(o=(a=this.cropData(o,u,e.min,e.max,1)).xData,u=a.yData),this.processedXData=o,this.processedYData=u}else this.groupMap=null;this.hasGroupedData=t,this.currentDataGrouping=h,this.preventGraphAnimation=(r&&r.totalRange)!==(h&&h.totalRange)}},m.destroyGroupedData=function(){this.groupedData&&(this.groupedData.forEach(function(t,e){t&&(this.groupedData[e]=t.destroy?t.destroy():null)},this),this.groupedData.length=0)},m.generatePoints=function(){v.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},i(e,"update",function(){if(this.dataGroup)return p(24,!1,this.series.chart),!1}),i(a,"headerFormatter",function(t){var e=this.chart,a=e.time,o=t.labelConfig,i=o.series,r=i.tooltipOptions,n=i.options.dataGrouping,s=r.xDateFormat,p=i.xAxis,u=r[(t.isFooter?"footer":"header")+"Format"];if(p&&"datetime"===p.options.type&&n&&A(o.key)){var l=i.currentDataGrouping;if(n=n.dateTimeLabelFormats||y.dateTimeLabelFormats,l)if(r=n[l.unitName],1===l.count)s=r[0];else{s=r[1];var h=r[2]}else!s&&n&&(s=this.getXDateFormat(o,r,p));s=a.dateFormat(s,o.key),h&&(s+=a.dateFormat(h,o.key+l.totalRange-1)),i.chart.styledMode&&(u=this.styledModeFormat(u)),t.text=g(u,{point:d(o.point,{key:s}),series:i},e),t.preventDefault()}}),i(o,"destroy",m.destroyGroupedData),i(o,"afterSetOptions",function(t){t=t.options;var e=this.type,a=this.chart.options.plotOptions,o=l[e].dataGrouping,i=this.useCommonDataGrouping&&y;(G[e]||i)&&(o=o||S(y,G[e]),t.dataGrouping=S(i,o,a.series&&a.series.dataGrouping,a[e].dataGrouping,this.userOptions.dataGrouping))}),i(u,"afterSetScale",function(){this.series.forEach(function(t){t.hasProcessed=!1})}),u.prototype.getGroupPixelWidth=function(){var t,e,a=this.series,o=a.length,i=0,r=!1;for(t=o;t--;)(e=a[t].options.dataGrouping)&&(i=Math.max(i,c(e.groupPixelWidth,y.groupPixelWidth)));for(t=o;t--;)(e=a[t].options.dataGrouping)&&a[t].hasProcessed&&(o=(a[t].processedXData||a[t].data).length,a[t].groupPixelWidth||o>this.chart.plotSizeX/i||o&&e.forced)&&(r=!0);return r?i:0},u.prototype.setDataGrouping=function(e,t){var a;if(t=c(t,!0),e=e||{forced:!1,units:null},this instanceof u)for(a=this.series.length;a--;)this.series[a].update({dataGrouping:e},!1);else this.chart.options.series.forEach(function(t){t.dataGrouping=e},!1);this.ordinalSlope=null,t&&this.chart.redraw()},t.dataGrouping=f}),e(t,"masters/modules/datagrouping.src.js",[t["parts/DataGrouping.js"]],function(t){return t})});