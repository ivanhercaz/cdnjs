"use strict";import H from"./Globals.js";import"./Chart.js";import U from"./Utilities.js";var find=U.find,isArray=U.isArray,isObject=U.isObject,merge=U.merge,objectEach=U.objectEach,pick=U.pick,splat=U.splat,uniqueKey=U.uniqueKey,Chart=H.Chart;Chart.prototype.setResponsive=function(t,i){var e,s,r=this.options.responsive,n=[],o=this.currentResponsive;!i&&r&&r.rules&&r.rules.forEach(function(t){void 0===t._id&&(t._id=uniqueKey()),this.matchResponsiveRule(t,n)},this);var c=merge.apply(0,n.map(function(t){return find(r.rules,function(i){return i._id===t}).chartOptions}));c.isResponsiveOptions=!0,n=n.toString()||void 0,e=o&&o.ruleIds,n!==e&&(o&&this.update(o.undoOptions,t,!0),n?((s=this.currentOptions(c)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:n,mergedOptions:c,undoOptions:s},this.update(c,t,!0)):this.currentResponsive=void 0)},Chart.prototype.matchResponsiveRule=function(t,i){var e=t.condition;(e.callback||function(){return this.chartWidth<=pick(e.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=pick(e.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=pick(e.minWidth,0)&&this.chartHeight>=pick(e.minHeight,0)}).call(this)&&i.push(t._id)},Chart.prototype.currentOptions=function(t){var i=this,e={};return function t(e,s,r,n){var o;objectEach(e,function(e,c){if(!n&&i.collectionsWithUpdate.indexOf(c)>-1)for(e=splat(e),r[c]=[],o=0;o<e.length;o++)s[c][o]&&(r[c][o]={},t(e[o],s[c][o],r[c][o],n+1));else isObject(e)?(r[c]=isArray(e)?[]:{},t(e,s[c]||{},r[c],n+1)):void 0===s[c]?r[c]=null:r[c]=s[c]})}(t,this.options,e,0),e};