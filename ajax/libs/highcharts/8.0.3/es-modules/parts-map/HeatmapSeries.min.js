"use strict";import H from"../parts/Globals.js";import LegendSymbolMixin from"../mixins/legend-symbol.js";import U from"../parts/Utilities.js";var clamp=U.clamp,extend=U.extend,fireEvent=U.fireEvent,merge=U.merge,pick=U.pick,seriesType=U.seriesType;import"../parts/Options.js";import"../parts/Series.js";import"./ColorMapSeriesMixin.js";var colorMapPointMixin=H.colorMapPointMixin,colorMapSeriesMixin=H.colorMapSeriesMixin,noop=H.noop,Series=H.Series,seriesTypes=H.seriesTypes;seriesType("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}}},merge(colorMapSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var t;seriesTypes.scatter.prototype.init.apply(this,arguments),(t=this.options).pointRange=pick(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1},translate:function(){this.generatePoints();var t=this.options,i=t.colsize,e=void 0===i?1:i,o=t.pointPadding,a=void 0===o?0:o,n=t.rowsize,s=void 0===n?1:n,r=this.points,p=this.xAxis,l=this.yAxis,h=e/2,c=s/2,m=this.pointPlacementToXValue(),d=function(t){return Math.round(clamp(p.translate(t,!1,!1,!1,!0,m),0,p.len))},u=function(t){return Math.round(clamp(l.translate(t,!1,!0,!1,!0),0,l.len))};r.forEach(function(t){var i=d(t.x-h),e=d(t.x+h),o=u(t.y-c),n=u(t.y+c),s=pick(t.pointPadding,a);t.plotX=t.clientX=(i+e)/2,t.plotY=(o+n)/2,t.shapeType="rect",t.shapeArgs={x:Math.min(i,e)+s,y:Math.min(o,n)+s,width:Math.max(Math.abs(e-i)-2*s,0),height:Math.max(Math.abs(n-o)-2*s,0)}}),fireEvent(this,"afterTranslate")},drawPoints:function(){var t=this.chart.styledMode?"css":"animate";seriesTypes.column.prototype.drawPoints.call(this),this.points.forEach(function(i){i.graphic[t](this.colorAttribs(i))},this)},hasData:function(){return!!this.processedXData.length},getValidPoints:function(t,i){return Series.prototype.getValidPoints.call(this,t,i,!0)},animate:noop,getBox:noop,drawLegendSymbol:LegendSymbolMixin.drawRectangle,alignDataLabel:seriesTypes.column.prototype.alignDataLabel,getExtremes:function(){Series.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,Series.prototype.getExtremes.call(this)}}),extend({haloPath:function(t){if(!t)return[];var i=this.shapeArgs;return["M",i.x-t,i.y-t,"L",i.x-t,i.y+i.height+t,i.x+i.width+t,i.y+i.height+t,i.x+i.width+t,i.y-t,"Z"]}},colorMapPointMixin));