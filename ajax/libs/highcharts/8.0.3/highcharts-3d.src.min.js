"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/highcharts-3d",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function i(t,e,i,s){t.hasOwnProperty(e)||(t[e]=s.apply(null,i))}i(e,"parts-3d/Math.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(c,t){var d=t.pick,x=c.deg2rad;c.perspective3D=function(t,e,i){var s=0<i&&i<Number.POSITIVE_INFINITY?i/(t.z+e.z+i):1;return{x:t.x*s,y:t.y*s}},c.perspective=function(t,e,i,s){var o=e.options.chart.options3d,n=d(s,!!i&&e.inverted),l={x:e.plotWidth/2,y:e.plotHeight/2,z:o.depth/2,vd:d(o.depth,1)*d(o.viewDistance,0)},h=e.scale3d||1,r=x*o.beta*(n?-1:1),a=x*o.alpha*(n?-1:1),p={cosA:Math.cos(a),cosB:Math.cos(-r),sinA:Math.sin(a),sinB:Math.sin(-r)};return i||(l.x+=e.plotLeft,l.y+=e.plotTop),t.map(function(t){var e,i,s,o,r=(e=(n?t.y:t.x)-l.x,i=(n?t.x:t.y)-l.y,s=(t.z||0)-l.z,{x:(o=p).cosB*e-o.sinB*s,y:-o.sinA*o.sinB*e+o.cosA*i-o.cosB*o.sinA*s,z:o.cosA*o.sinB*e+o.sinA*i+o.cosA*o.cosB*s}),a=c.perspective3D(r,l,l.vd);return a.x=a.x*h+l.x,a.y=a.y*h+l.y,a.z=r.z*h+l.z,{x:n?a.y:a.x,y:n?a.x:a.y,z:a.z}})},c.pointCameraDistance=function(t,e){var i=e.options.chart.options3d,s=e.plotWidth/2,o=e.plotHeight/2,r=d(i.depth,1)*d(i.viewDistance,0)+i.depth;return Math.sqrt(Math.pow(s-d(t.plotX,t.x),2)+Math.pow(o-d(t.plotY,t.y),2)+Math.pow(r-d(t.plotZ,t.z),2))},c.shapeArea=function(t){var e,i,s=0;for(e=0;e<t.length;e++)i=(e+1)%t.length,s+=t[e].x*t[i].y-t[i].x*t[e].y;return s/2},c.shapeArea3d=function(t,e,i){return c.shapeArea(c.perspective(t,e,i))}}),i(e,"parts-3d/SVGRenderer.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(m,t){var p,e,i,c=t.animObject,n=t.defined,s=t.extend,d=t.merge,h=t.objectEach,x=t.pick,Z=Math.cos,W=Math.PI,C=Math.sin,M=m.charts,r=m.color,a=m.deg2rad,A=m.perspective,y=m.SVGElement,o=m.SVGRenderer;function O(t,e,i,s,o,r,a,n){var l=[],h=r-o;return o<r&&r-o>Math.PI/2+1e-4?l=(l=l.concat(O(t,e,i,s,o,o+Math.PI/2,a,n))).concat(O(t,e,i,s,o+Math.PI/2,r,a,n)):r<o&&o-r>Math.PI/2+1e-4?l=(l=l.concat(O(t,e,i,s,o,o-Math.PI/2,a,n))).concat(O(t,e,i,s,o-Math.PI/2,r,a,n)):["C",t+i*Math.cos(o)-i*p*h*Math.sin(o)+a,e+s*Math.sin(o)+s*p*h*Math.cos(o)+n,t+i*Math.cos(r)+i*p*h*Math.sin(r)+a,e+s*Math.sin(r)-s*p*h*Math.cos(r)+n,t+i*Math.cos(r)+a,e+s*Math.sin(r)+n]}p=4*(Math.sqrt(2)-1)/3/(W/2),o.prototype.toLinePath=function(t,e){var i=[];return t.forEach(function(t){i.push("L",t.x,t.y)}),t.length&&(i[0]="M",e&&i.push("Z")),i},o.prototype.toLineSegments=function(t){var e=[],i=!0;return t.forEach(function(t){e.push(i?"M":"L",t.x,t.y),i=!i}),e},o.prototype.face3d=function(t){var a=this,e=this.createElement("path");return e.vertexes=[],e.insidePlotArea=!1,e.enabled=!0,e.attr=function(t){if("object"==typeof t&&(n(t.enabled)||n(t.vertexes)||n(t.insidePlotArea))){this.enabled=x(t.enabled,this.enabled),this.vertexes=x(t.vertexes,this.vertexes),this.insidePlotArea=x(t.insidePlotArea,this.insidePlotArea),delete t.enabled,delete t.vertexes,delete t.insidePlotArea;var e=M[a.chartIndex],i=A(this.vertexes,e,this.insidePlotArea),s=a.toLinePath(i,!0),o=m.shapeArea(i),r=this.enabled&&0<o?"visible":"hidden";t.d=s,t.visibility=r}return y.prototype.attr.apply(this,arguments)},e.animate=function(t){if("object"==typeof t&&(n(t.enabled)||n(t.vertexes)||n(t.insidePlotArea))){this.enabled=x(t.enabled,this.enabled),this.vertexes=x(t.vertexes,this.vertexes),this.insidePlotArea=x(t.insidePlotArea,this.insidePlotArea),delete t.enabled,delete t.vertexes,delete t.insidePlotArea;var e=M[a.chartIndex],i=A(this.vertexes,e,this.insidePlotArea),s=a.toLinePath(i,!0),o=m.shapeArea(i),r=this.enabled&&0<o?"visible":"hidden";t.d=s,this.attr("visibility",r)}return y.prototype.animate.apply(this,arguments)},e.attr(t)},o.prototype.polyhedron=function(t){var r=this,a=this.g(),e=a.destroy;return this.styledMode||a.attr({"stroke-linejoin":"round"}),a.faces=[],a.destroy=function(){for(var t=0;t<a.faces.length;t++)a.faces[t].destroy();return e.call(this)},a.attr=function(t,e,i,s){if("object"==typeof t&&n(t.faces)){for(;a.faces.length>t.faces.length;)a.faces.pop().destroy();for(;a.faces.length<t.faces.length;)a.faces.push(r.face3d().add(a));for(var o=0;o<t.faces.length;o++)r.styledMode&&delete t.faces[o].fill,a.faces[o].attr(t.faces[o],null,i,s);delete t.faces}return y.prototype.attr.apply(this,arguments)},a.animate=function(t,e,i){if(t&&t.faces){for(;a.faces.length>t.faces.length;)a.faces.pop().destroy();for(;a.faces.length<t.faces.length;)a.faces.push(r.face3d().add(a));for(var s=0;s<t.faces.length;s++)a.faces[s].animate(t.faces[s],e,i);delete t.faces}return y.prototype.animate.apply(this,arguments)},a.attr(t)},i=d(e={initArgs:function(t){var e=this,i=e.renderer,s=i[e.pathType+"Path"](t),o=s.zIndexes;e.parts.forEach(function(t){e[t]=i.path(s[t]).attr({class:"highcharts-3d-"+t,zIndex:o[t]||0}).add(e)}),e.attr({"stroke-linejoin":"round",zIndex:o.group}),e.originalDestroy=e.destroy,e.destroy=e.destroyParts},singleSetterForParts:function(i,t,s,e,o,r){var a={},n=[null,null,e||"attr",o,r],l=s&&s.zIndexes;return s?(l&&l.group&&this.attr({zIndex:l.group}),h(s,function(t,e){a[e]={},a[e][i]=t,l&&(a[e].zIndex=s.zIndexes[e]||0)}),n[1]=a):(a[i]=t,n[0]=a),this.processParts.apply(this,n)},processParts:function(e,i,s,o,r){var a=this;return a.parts.forEach(function(t){i&&(e=x(i[t],!1)),!1!==e&&a[t][s](e,o,r)}),a},destroyParts:function(){return this.processParts(null,null,"destroy"),this.originalDestroy()}},{parts:["front","top","side"],pathType:"cuboid",attr:function(t,e,i,s){if("string"==typeof t&&void 0!==e){var o=t;(t={})[o]=e}return t.shapeArgs||n(t.x)?this.singleSetterForParts("d",null,this.renderer[this.pathType+"Path"](t.shapeArgs||t)):y.prototype.attr.call(this,t,void 0,i,s)},animate:function(t,e,i){if(n(t.x)&&n(t.y)){var s=this.renderer[this.pathType+"Path"](t);this.singleSetterForParts("d",null,s,"animate",e,i),this.attr({zIndex:s.zIndexes.group})}else y.prototype.animate.call(this,t,e,i);return this},fillSetter:function(t){return this.singleSetterForParts("fill",null,{front:t,top:r(t).brighten(.1).get(),side:r(t).brighten(-.1).get()}),this.color=this.fill=t,this}}),o.prototype.elements3d={base:e,cuboid:i},o.prototype.element3d=function(t,e){var i=this.g();return s(i,this.elements3d[t]),i.initArgs(e),i},o.prototype.cuboid=function(t){return this.element3d("cuboid",t)},m.SVGRenderer.prototype.cuboidPath=function(t){var e,i,s,o,r,a,n,l,h=t.x,p=t.y,c=t.z,d=t.height,x=t.width,y=t.depth,f=M[this.chartIndex],u=f.options.chart.options3d.alpha,z=0,b=[{x:h,y:p,z:c},{x:h+x,y:p,z:c},{x:h+x,y:p+d,z:c},{x:h,y:p+d,z:c},{x:h,y:p+d,z:c+y},{x:h+x,y:p+d,z:c+y},{x:h+x,y:p,z:c+y},{x:h,y:p,z:c+y}];function g(t){return 0===d&&1<t&&t<6?{x:b[t].x,y:b[t].y+10,z:b[t].z}:b[t]}function v(t){return b[t]}return b=A(b,f,t.insidePlotArea),i=(e=(l=function(t,e){var i=[[],-1],s=t.map(v),o=e.map(v),r=t.map(g),a=e.map(g);return m.shapeArea(r)<0?i=[s,0]:m.shapeArea(a)<0&&(i=[o,1]),i})([3,2,1,0],[7,6,5,4]))[0],r=e[1],s=(e=l([1,6,7,0],[4,5,2,3]))[0],a=e[1],o=(e=l([1,2,5,6],[0,7,4,3]))[0],1===(n=e[1])?z+=1e6*(f.plotWidth-h):n||(z+=1e6*h),z+=10*(!a||0<=u&&u<=180||u<360&&357.5<u?f.plotHeight-p:10+p),1===r?z+=100*c:r||(z+=100*(1e3-c)),{front:this.toLinePath(i,!0),top:this.toLinePath(s,!0),side:this.toLinePath(o,!0),zIndexes:{group:Math.round(z)},isFront:r,isTop:a}},m.SVGRenderer.prototype.arc3d=function(t){var l=this.g(),e=l.renderer,o=["x","y","r","innerR","start","end","depth"];function h(t){var e,i=!1,s={};for(e in t=d(t))-1!==o.indexOf(e)&&(s[e]=t[e],delete t[e],i=!0);return!!i&&s}return(t=d(t)).alpha=(t.alpha||0)*a,t.beta=(t.beta||0)*a,l.top=e.path(),l.side1=e.path(),l.side2=e.path(),l.inn=e.path(),l.out=e.path(),l.onAdd=function(){var e=l.parentGroup,i=l.attr("class");l.top.add(l),["out","inn","side1","side2"].forEach(function(t){l[t].attr({class:i+" highcharts-3d-side"}).add(e)})},["addClass","removeClass"].forEach(function(i){l[i]=function(){var e=arguments;["top","out","inn","side1","side2"].forEach(function(t){l[t][i].apply(l[t],e)})}}),l.setPaths=function(t){var e=l.renderer.arc3dPath(t),i=100*e.zTop;l.attribs=t,l.top.attr({d:e.top,zIndex:e.zTop}),l.inn.attr({d:e.inn,zIndex:e.zInn}),l.out.attr({d:e.out,zIndex:e.zOut}),l.side1.attr({d:e.side1,zIndex:e.zSide1}),l.side2.attr({d:e.side2,zIndex:e.zSide2}),l.zIndex=i,l.attr({zIndex:i}),t.center&&(l.top.setRadialReference(t.center),delete t.center)},l.setPaths(t),l.fillSetter=function(t){var e=r(t).brighten(-.1).get();return this.fill=t,this.side1.attr({fill:e}),this.side2.attr({fill:e}),this.inn.attr({fill:e}),this.out.attr({fill:e}),this.top.attr({fill:t}),this},["opacity","translateX","translateY","visibility"].forEach(function(t){l[t+"Setter"]=function(e,i){l[i]=e,["out","inn","side1","side2","top"].forEach(function(t){l[t].attr(i,e)})}}),l.attr=function(t){var e;return"object"==typeof t&&(e=h(t))&&(s(l.attribs,e),l.setPaths(l.attribs)),y.prototype.attr.apply(l,arguments)},l.animate=function(t,e,i){var s,o,r,a=this.attribs,n="data-"+Math.random().toString(26).substring(2,9);return delete t.center,delete t.z,delete t.alpha,delete t.beta,(r=c(x(e,this.renderer.globalAnimation))).duration&&(s=h(t),l[n]=0,t[n]=1,l[n+"Setter"]=m.noop,s&&(o=s,r.step=function(t,e){function i(t){return a[t]+(x(o[t],a[t])-a[t])*e.pos}e.prop===n&&e.elem.setPaths(d(a,{x:i("x"),y:i("y"),r:i("r"),innerR:i("innerR"),start:i("start"),end:i("end"),depth:i("depth")}))}),e=r),y.prototype.animate.call(this,t,e,i)},l.destroy=function(){return this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),y.prototype.destroy.call(this)},l.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},l.show=function(t){this.top.show(t),this.out.show(t),this.inn.show(t),this.side1.show(t),this.side2.show(t)},l},o.prototype.arc3dPath=function(t){var e=t.x,i=t.y,s=t.start,o=t.end-1e-5,r=t.r,a=t.innerR||0,n=t.depth||0,l=t.alpha,h=t.beta,p=Math.cos(s),c=Math.sin(s),d=Math.cos(o),x=Math.sin(o),y=r*Math.cos(h),f=r*Math.cos(l),u=a*Math.cos(h),z=a*Math.cos(l),b=n*Math.sin(h),g=n*Math.sin(l),v=["M",e+y*p,i+f*c];v=(v=(v=(v=v.concat(O(e,i,y,f,s,o,0,0))).concat(["L",e+u*d,i+z*x])).concat(O(e,i,u,z,o,s,0,0))).concat(["Z"]);var m=0<h?Math.PI/2:0,M=0<l?0:Math.PI/2,A=-m<s?s:-m<o?-m:s,P=o<W-M?o:s<W-M?W-M:o,k=2*W-M,S=["M",e+y*Z(A),i+f*C(A)];S=S.concat(O(e,i,y,f,A,P,0,0)),k<o&&s<k?S=(S=(S=(S=(S=(S=(S=(S=S.concat(["L",e+y*Z(P)+b,i+f*C(P)+g])).concat(O(e,i,y,f,P,k,b,g))).concat(["L",e+y*Z(k),i+f*C(k)])).concat(O(e,i,y,f,k,o,0,0))).concat(["L",e+y*Z(o)+b,i+f*C(o)+g])).concat(O(e,i,y,f,o,k,b,g))).concat(["L",e+y*Z(k),i+f*C(k)])).concat(O(e,i,y,f,k,P,0,0)):W-M<o&&s<W-M&&(S=(S=(S=(S=S.concat(["L",e+y*Math.cos(P)+b,i+f*Math.sin(P)+g])).concat(O(e,i,y,f,P,o,b,g))).concat(["L",e+y*Math.cos(o),i+f*Math.sin(o)])).concat(O(e,i,y,f,o,P,0,0))),S=(S=(S=S.concat(["L",e+y*Math.cos(P)+b,i+f*Math.sin(P)+g])).concat(O(e,i,y,f,P,A,b,g))).concat(["Z"]);var L=["M",e+u*p,i+z*c];L=(L=(L=(L=L.concat(O(e,i,u,z,s,o,0,0))).concat(["L",e+u*Math.cos(o)+b,i+z*Math.sin(o)+g])).concat(O(e,i,u,z,o,s,b,g))).concat(["Z"]);var I=["M",e+y*p,i+f*c,"L",e+y*p+b,i+f*c+g,"L",e+u*p+b,i+z*c+g,"L",e+u*p,i+z*c,"Z"],w=["M",e+y*d,i+f*x,"L",e+y*d+b,i+f*x+g,"L",e+u*d+b,i+z*x+g,"L",e+u*d,i+z*x,"Z"],D=Math.atan2(g,-b),F=Math.abs(o+D),j=Math.abs(s+D),E=Math.abs((s+o)/2+D);function T(t){return(t%=2*Math.PI)>Math.PI&&(t=2*Math.PI-t),t}F=T(F),j=T(j);var G=1e5*(E=T(E)),X=1e5*j,Y=1e5*F;return{top:v,zTop:1e5*Math.PI+1,out:S,zOut:Math.max(G,X,Y),inn:L,zInn:Math.max(G,X,Y),side1:I,zSide1:.99*Y,side2:w,zSide2:.99*X}}}),i(e,"parts-3d/Chart.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(I,t){var e=t.addEvent,o=t.isArray,i=t.merge,w=t.pick,s=t.wrap,r=I.Chart,D=I.perspective;r.prototype.is3d=function(){return this.options.chart.options3d&&this.options.chart.options3d.enabled},r.prototype.propsRequireDirtyBox.push("chart.options3d"),r.prototype.propsRequireUpdateSeries.push("chart.options3d"),e(r,"afterInit",function(){var e=this.options;this.is3d()&&(e.series||[]).forEach(function(t){"scatter"===(t.type||e.chart.type||e.chart.defaultSeriesType)&&(t.type="scatter3d")})}),e(r,"addSeries",function(t){this.is3d()&&"scatter"===t.options.type&&(t.options.type="scatter3d")}),s(I.Chart.prototype,"isInsidePlot",function(t){return this.is3d()||t.apply(this,[].slice.call(arguments,1))});i(!0,I.getOptions(),{chart:{options3d:{enabled:!1,alpha:0,beta:0,depth:100,fitToPlot:!0,viewDistance:25,axisLabelPosition:null,frame:{visible:"default",size:1,bottom:{},top:{},left:{},right:{},back:{},front:{}}}}}),e(r,"afterGetContainer",function(){this.styledMode&&(this.renderer.definition({tagName:"style",textContent:".highcharts-3d-top{filter: url(#highcharts-brighter)}\n.highcharts-3d-side{filter: url(#highcharts-darker)}\n"}),[{name:"darker",slope:.6},{name:"brighter",slope:1.4}].forEach(function(t){this.renderer.definition({tagName:"filter",id:"highcharts-"+t.name,children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncR",type:"linear",slope:t.slope},{tagName:"feFuncG",type:"linear",slope:t.slope},{tagName:"feFuncB",type:"linear",slope:t.slope}]}]})},this))}),s(r.prototype,"setClassName",function(t){t.apply(this,[].slice.call(arguments,1)),this.is3d()&&(this.container.className+=" highcharts-3d-chart")}),e(I.Chart,"afterSetChartSize",function(){var t,e,i,s,o,r,a,n,l,h,p,c=this,d=c.options.chart.options3d;if(c.is3d()){d&&(d.alpha=d.alpha%360+(0<=d.alpha?0:360),d.beta=d.beta%360+(0<=d.beta?0:360));var x=c.inverted,y=c.clipBox,f=c.margin,u=x?"x":"y",z=x?"height":"width",b=x?"width":"height";y[x?"y":"x"]=-(f[3]||0),y[u]=-(f[0]||0),y[z]=c.chartWidth+(f[3]||0)+(f[1]||0),y[b]=c.chartHeight+(f[0]||0)+(f[2]||0),c.scale3d=1,!0===d.fitToPlot&&(c.scale3d=(t=c,e=d.depth,s=t.plotLeft,o=t.plotWidth+s,r=t.plotTop,a=t.plotHeight+r,n=s+t.plotWidth/2,l=r+t.plotHeight/2,h={minX:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,minY:Number.MAX_VALUE,maxY:-Number.MAX_VALUE},i=[{x:s,y:r,z:0},{x:s,y:r,z:e}],[0,p=1].forEach(function(t){i.push({x:o,y:i[t].y,z:i[t].z})}),[0,1,2,3].forEach(function(t){i.push({x:i[t].x,y:a,z:i[t].z})}),(i=D(i,t,!1)).forEach(function(t){h.minX=Math.min(h.minX,t.x),h.maxX=Math.max(h.maxX,t.x),h.minY=Math.min(h.minY,t.y),h.maxY=Math.max(h.maxY,t.y)}),s>h.minX&&(p=Math.min(p,1-Math.abs((s+n)/(h.minX+n))%1)),o<h.maxX&&(p=Math.min(p,(o-n)/(h.maxX-n))),r>h.minY&&(p=h.minY<0?Math.min(p,(r+l)/(-h.minY+r+l)):Math.min(p,1-(r+l)/(h.minY+l)%1)),a<h.maxY&&(p=Math.min(p,Math.abs((a-l)/(h.maxY-l)))),p)),c.frame3d=this.get3dFrame()}}),e(r,"beforeRedraw",function(){this.is3d()&&(this.isDirtyBox=!0)}),e(r,"beforeRender",function(){this.is3d()&&(this.frame3d=this.get3dFrame())}),s(r.prototype,"renderSeries",function(t){var e,i=this.series.length;if(this.is3d())for(;i--;)(e=this.series[i]).translate(),e.render();else t.call(this)}),e(r,"afterDrawChartBox",function(){if(this.is3d()){var t=this.renderer,e=this.options.chart.options3d,i=this.get3dFrame(),s=this.plotLeft,o=this.plotLeft+this.plotWidth,r=this.plotTop,a=this.plotTop+this.plotHeight,n=e.depth,l=s-(i.left.visible?i.left.size:0),h=o+(i.right.visible?i.right.size:0),p=r-(i.top.visible?i.top.size:0),c=a+(i.bottom.visible?i.bottom.size:0),d=0-(i.front.visible?i.front.size:0),x=n+(i.back.visible?i.back.size:0),y=this.hasRendered?"animate":"attr";this.frame3d=i,this.frameShapes||(this.frameShapes={bottom:t.polyhedron().add(),top:t.polyhedron().add(),left:t.polyhedron().add(),right:t.polyhedron().add(),back:t.polyhedron().add(),front:t.polyhedron().add()}),this.frameShapes.bottom[y]({class:"highcharts-3d-frame highcharts-3d-frame-bottom",zIndex:i.bottom.frontFacing?-1e3:1e3,faces:[{fill:I.color(i.bottom.color).brighten(.1).get(),vertexes:[{x:l,y:c,z:d},{x:h,y:c,z:d},{x:h,y:c,z:x},{x:l,y:c,z:x}],enabled:i.bottom.visible},{fill:I.color(i.bottom.color).brighten(.1).get(),vertexes:[{x:s,y:a,z:n},{x:o,y:a,z:n},{x:o,y:a,z:0},{x:s,y:a,z:0}],enabled:i.bottom.visible},{fill:I.color(i.bottom.color).brighten(-.1).get(),vertexes:[{x:l,y:c,z:d},{x:l,y:c,z:x},{x:s,y:a,z:n},{x:s,y:a,z:0}],enabled:i.bottom.visible&&!i.left.visible},{fill:I.color(i.bottom.color).brighten(-.1).get(),vertexes:[{x:h,y:c,z:x},{x:h,y:c,z:d},{x:o,y:a,z:0},{x:o,y:a,z:n}],enabled:i.bottom.visible&&!i.right.visible},{fill:I.color(i.bottom.color).get(),vertexes:[{x:h,y:c,z:d},{x:l,y:c,z:d},{x:s,y:a,z:0},{x:o,y:a,z:0}],enabled:i.bottom.visible&&!i.front.visible},{fill:I.color(i.bottom.color).get(),vertexes:[{x:l,y:c,z:x},{x:h,y:c,z:x},{x:o,y:a,z:n},{x:s,y:a,z:n}],enabled:i.bottom.visible&&!i.back.visible}]}),this.frameShapes.top[y]({class:"highcharts-3d-frame highcharts-3d-frame-top",zIndex:i.top.frontFacing?-1e3:1e3,faces:[{fill:I.color(i.top.color).brighten(.1).get(),vertexes:[{x:l,y:p,z:x},{x:h,y:p,z:x},{x:h,y:p,z:d},{x:l,y:p,z:d}],enabled:i.top.visible},{fill:I.color(i.top.color).brighten(.1).get(),vertexes:[{x:s,y:r,z:0},{x:o,y:r,z:0},{x:o,y:r,z:n},{x:s,y:r,z:n}],enabled:i.top.visible},{fill:I.color(i.top.color).brighten(-.1).get(),vertexes:[{x:l,y:p,z:x},{x:l,y:p,z:d},{x:s,y:r,z:0},{x:s,y:r,z:n}],enabled:i.top.visible&&!i.left.visible},{fill:I.color(i.top.color).brighten(-.1).get(),vertexes:[{x:h,y:p,z:d},{x:h,y:p,z:x},{x:o,y:r,z:n},{x:o,y:r,z:0}],enabled:i.top.visible&&!i.right.visible},{fill:I.color(i.top.color).get(),vertexes:[{x:l,y:p,z:d},{x:h,y:p,z:d},{x:o,y:r,z:0},{x:s,y:r,z:0}],enabled:i.top.visible&&!i.front.visible},{fill:I.color(i.top.color).get(),vertexes:[{x:h,y:p,z:x},{x:l,y:p,z:x},{x:s,y:r,z:n},{x:o,y:r,z:n}],enabled:i.top.visible&&!i.back.visible}]}),this.frameShapes.left[y]({class:"highcharts-3d-frame highcharts-3d-frame-left",zIndex:i.left.frontFacing?-1e3:1e3,faces:[{fill:I.color(i.left.color).brighten(.1).get(),vertexes:[{x:l,y:c,z:d},{x:s,y:a,z:0},{x:s,y:a,z:n},{x:l,y:c,z:x}],enabled:i.left.visible&&!i.bottom.visible},{fill:I.color(i.left.color).brighten(.1).get(),vertexes:[{x:l,y:p,z:x},{x:s,y:r,z:n},{x:s,y:r,z:0},{x:l,y:p,z:d}],enabled:i.left.visible&&!i.top.visible},{fill:I.color(i.left.color).brighten(-.1).get(),vertexes:[{x:l,y:c,z:x},{x:l,y:p,z:x},{x:l,y:p,z:d},{x:l,y:c,z:d}],enabled:i.left.visible},{fill:I.color(i.left.color).brighten(-.1).get(),vertexes:[{x:s,y:r,z:n},{x:s,y:a,z:n},{x:s,y:a,z:0},{x:s,y:r,z:0}],enabled:i.left.visible},{fill:I.color(i.left.color).get(),vertexes:[{x:l,y:c,z:d},{x:l,y:p,z:d},{x:s,y:r,z:0},{x:s,y:a,z:0}],enabled:i.left.visible&&!i.front.visible},{fill:I.color(i.left.color).get(),vertexes:[{x:l,y:p,z:x},{x:l,y:c,z:x},{x:s,y:a,z:n},{x:s,y:r,z:n}],enabled:i.left.visible&&!i.back.visible}]}),this.frameShapes.right[y]({class:"highcharts-3d-frame highcharts-3d-frame-right",zIndex:i.right.frontFacing?-1e3:1e3,faces:[{fill:I.color(i.right.color).brighten(.1).get(),vertexes:[{x:h,y:c,z:x},{x:o,y:a,z:n},{x:o,y:a,z:0},{x:h,y:c,z:d}],enabled:i.right.visible&&!i.bottom.visible},{fill:I.color(i.right.color).brighten(.1).get(),vertexes:[{x:h,y:p,z:d},{x:o,y:r,z:0},{x:o,y:r,z:n},{x:h,y:p,z:x}],enabled:i.right.visible&&!i.top.visible},{fill:I.color(i.right.color).brighten(-.1).get(),vertexes:[{x:o,y:r,z:0},{x:o,y:a,z:0},{x:o,y:a,z:n},{x:o,y:r,z:n}],enabled:i.right.visible},{fill:I.color(i.right.color).brighten(-.1).get(),vertexes:[{x:h,y:c,z:d},{x:h,y:p,z:d},{x:h,y:p,z:x},{x:h,y:c,z:x}],enabled:i.right.visible},{fill:I.color(i.right.color).get(),vertexes:[{x:h,y:p,z:d},{x:h,y:c,z:d},{x:o,y:a,z:0},{x:o,y:r,z:0}],enabled:i.right.visible&&!i.front.visible},{fill:I.color(i.right.color).get(),vertexes:[{x:h,y:c,z:x},{x:h,y:p,z:x},{x:o,y:r,z:n},{x:o,y:a,z:n}],enabled:i.right.visible&&!i.back.visible}]}),this.frameShapes.back[y]({class:"highcharts-3d-frame highcharts-3d-frame-back",zIndex:i.back.frontFacing?-1e3:1e3,faces:[{fill:I.color(i.back.color).brighten(.1).get(),vertexes:[{x:h,y:c,z:x},{x:l,y:c,z:x},{x:s,y:a,z:n},{x:o,y:a,z:n}],enabled:i.back.visible&&!i.bottom.visible},{fill:I.color(i.back.color).brighten(.1).get(),vertexes:[{x:l,y:p,z:x},{x:h,y:p,z:x},{x:o,y:r,z:n},{x:s,y:r,z:n}],enabled:i.back.visible&&!i.top.visible},{fill:I.color(i.back.color).brighten(-.1).get(),vertexes:[{x:l,y:c,z:x},{x:l,y:p,z:x},{x:s,y:r,z:n},{x:s,y:a,z:n}],enabled:i.back.visible&&!i.left.visible},{fill:I.color(i.back.color).brighten(-.1).get(),vertexes:[{x:h,y:p,z:x},{x:h,y:c,z:x},{x:o,y:a,z:n},{x:o,y:r,z:n}],enabled:i.back.visible&&!i.right.visible},{fill:I.color(i.back.color).get(),vertexes:[{x:s,y:r,z:n},{x:o,y:r,z:n},{x:o,y:a,z:n},{x:s,y:a,z:n}],enabled:i.back.visible},{fill:I.color(i.back.color).get(),vertexes:[{x:l,y:c,z:x},{x:h,y:c,z:x},{x:h,y:p,z:x},{x:l,y:p,z:x}],enabled:i.back.visible}]}),this.frameShapes.front[y]({class:"highcharts-3d-frame highcharts-3d-frame-front",zIndex:i.front.frontFacing?-1e3:1e3,faces:[{fill:I.color(i.front.color).brighten(.1).get(),vertexes:[{x:l,y:c,z:d},{x:h,y:c,z:d},{x:o,y:a,z:0},{x:s,y:a,z:0}],enabled:i.front.visible&&!i.bottom.visible},{fill:I.color(i.front.color).brighten(.1).get(),vertexes:[{x:h,y:p,z:d},{x:l,y:p,z:d},{x:s,y:r,z:0},{x:o,y:r,z:0}],enabled:i.front.visible&&!i.top.visible},{fill:I.color(i.front.color).brighten(-.1).get(),vertexes:[{x:l,y:p,z:d},{x:l,y:c,z:d},{x:s,y:a,z:0},{x:s,y:r,z:0}],enabled:i.front.visible&&!i.left.visible},{fill:I.color(i.front.color).brighten(-.1).get(),vertexes:[{x:h,y:c,z:d},{x:h,y:p,z:d},{x:o,y:r,z:0},{x:o,y:a,z:0}],enabled:i.front.visible&&!i.right.visible},{fill:I.color(i.front.color).get(),vertexes:[{x:o,y:r,z:0},{x:s,y:r,z:0},{x:s,y:a,z:0},{x:o,y:a,z:0}],enabled:i.front.visible},{fill:I.color(i.front.color).get(),vertexes:[{x:h,y:c,z:d},{x:l,y:c,z:d},{x:l,y:p,z:d},{x:h,y:p,z:d}],enabled:i.front.visible}]})}}),r.prototype.retrieveStacks=function(e){var i,s=this.series,o={},r=1;return this.series.forEach(function(t){i=w(t.options.stack,e?0:s.length-1-t.index),o[i]?o[i].series.push(t):(o[i]={series:[t],position:r},r++)}),o.totalStacks=r+1,o},r.prototype.get3dFrame=function(){function t(t){var e=I.shapeArea3d(t,a);return.5<e?1:e<-.5?-1:0}var a=this,e=a.options.chart.options3d,i=e.frame,s=a.plotLeft,o=a.plotLeft+a.plotWidth,r=a.plotTop,n=a.plotTop+a.plotHeight,l=e.depth,h=t([{x:s,y:n,z:l},{x:o,y:n,z:l},{x:o,y:n,z:0},{x:s,y:n,z:0}]),p=t([{x:s,y:r,z:0},{x:o,y:r,z:0},{x:o,y:r,z:l},{x:s,y:r,z:l}]),c=t([{x:s,y:r,z:0},{x:s,y:r,z:l},{x:s,y:n,z:l},{x:s,y:n,z:0}]),d=t([{x:o,y:r,z:l},{x:o,y:r,z:0},{x:o,y:n,z:0},{x:o,y:n,z:l}]),x=t([{x:s,y:n,z:0},{x:o,y:n,z:0},{x:o,y:r,z:0},{x:s,y:r,z:0}]),y=t([{x:s,y:r,z:l},{x:o,y:r,z:l},{x:o,y:n,z:l},{x:s,y:n,z:l}]),f=!1,u=!1,z=!1,b=!1;[].concat(a.xAxis,a.yAxis,a.zAxis).forEach(function(t){t&&(t.horiz?t.opposite?u=!0:f=!0:t.opposite?b=!0:z=!0)});function g(t,e,i){for(var s=["size","color","visible"],o={},r=0;r<s.length;r++)for(var a=s[r],n=0;n<t.length;n++)if("object"==typeof t[n]){var l=t[n][a];if(null!=l){o[a]=l;break}}var h=i;return!0===o.visible||!1===o.visible?h=o.visible:"auto"===o.visible&&(h=0<e),{size:w(o.size,1),color:w(o.color,"none"),frontFacing:0<e,visible:h}}var v={axes:{},bottom:g([i.bottom,i.top,i],h,f),top:g([i.top,i.bottom,i],p,u),left:g([i.left,i.right,i.side,i],c,z),right:g([i.right,i.left,i.side,i],d,b),back:g([i.back,i.front,i],y,!0),front:g([i.front,i.back,i],x,!1)};if("auto"===e.axisLabelPosition){var m=function(t,e){return t.visible!==e.visible||t.visible&&e.visible&&t.frontFacing!==e.frontFacing},M=[];m(v.left,v.front)&&M.push({y:(r+n)/2,x:s,z:0,xDir:{x:1,y:0,z:0}}),m(v.left,v.back)&&M.push({y:(r+n)/2,x:s,z:l,xDir:{x:0,y:0,z:-1}}),m(v.right,v.front)&&M.push({y:(r+n)/2,x:o,z:0,xDir:{x:0,y:0,z:1}}),m(v.right,v.back)&&M.push({y:(r+n)/2,x:o,z:l,xDir:{x:-1,y:0,z:0}});var A=[];m(v.bottom,v.front)&&A.push({x:(s+o)/2,y:n,z:0,xDir:{x:1,y:0,z:0}}),m(v.bottom,v.back)&&A.push({x:(s+o)/2,y:n,z:l,xDir:{x:-1,y:0,z:0}});var P=[];m(v.top,v.front)&&P.push({x:(s+o)/2,y:r,z:0,xDir:{x:1,y:0,z:0}}),m(v.top,v.back)&&P.push({x:(s+o)/2,y:r,z:l,xDir:{x:-1,y:0,z:0}});var k=[];m(v.bottom,v.left)&&k.push({z:(0+l)/2,y:n,x:s,xDir:{x:0,y:0,z:-1}}),m(v.bottom,v.right)&&k.push({z:(0+l)/2,y:n,x:o,xDir:{x:0,y:0,z:1}});var S=[];m(v.top,v.left)&&S.push({z:(0+l)/2,y:r,x:s,xDir:{x:0,y:0,z:-1}}),m(v.top,v.right)&&S.push({z:(0+l)/2,y:r,x:o,xDir:{x:0,y:0,z:1}});var L=function(t,e,i){if(0===t.length)return null;if(1===t.length)return t[0];for(var s=0,o=D(t,a,!1),r=1;r<o.length;r++)i*o[r][e]>i*o[s][e]?s=r:i*o[r][e]==i*o[s][e]&&o[r].z<o[s].z&&(s=r);return t[s]};v.axes={y:{left:L(M,"x",-1),right:L(M,"x",1)},x:{top:L(P,"y",-1),bottom:L(A,"y",1)},z:{top:L(S,"y",-1),bottom:L(k,"y",1)}}}else v.axes={y:{left:{x:s,z:0,xDir:{x:1,y:0,z:0}},right:{x:o,z:0,xDir:{x:0,y:0,z:1}}},x:{top:{y:r,z:0,xDir:{x:1,y:0,z:0}},bottom:{y:n,z:0,xDir:{x:1,y:0,z:0}}},z:{top:{x:z?o:s,y:r,xDir:z?{x:0,y:0,z:1}:{x:0,y:0,z:-1}},bottom:{x:z?o:s,y:n,xDir:z?{x:0,y:0,z:1}:{x:0,y:0,z:-1}}}};return v},I.Fx.prototype.matrixSetter=function(){var t;if(this.pos<1&&(o(this.start)||o(this.end))){var e=this.start||[1,0,0,1,0,0],i=this.end||[1,0,0,1,0,0];t=[];for(var s=0;s<6;s++)t.push(this.pos*i[s]+(1-this.pos)*e[s])}else t=this.end;this.elem.attr(this.prop,t,null,!0)}}),i(e,"parts-3d/Axis.js",[e["parts/Globals.js"],e["parts/Tick.js"],e["parts/Utilities.js"]],function(t,e,i){var s,o=i.addEvent,r=i.extend,a=i.merge,I=i.pick,n=i.splat,l=i.wrap,h=t.Axis,p=t.Chart,w=t.deg2rad,D=t.perspective,y=t.perspective3D,F=t.shapeArea;function c(t,e,i){if(!t.chart.is3d()||"colorAxis"===t.coll)return e;var s,o=t.chart,r=w*o.options.chart.options3d.alpha,a=w*o.options.chart.options3d.beta,n=I(i&&t.options.title.position3d,t.options.labels.position3d),l=I(i&&t.options.title.skew3d,t.options.labels.skew3d),h=o.frame3d,p=o.plotLeft,c=o.plotWidth+p,d=o.plotTop,x=o.plotHeight+d,y=!1,f=0,u=0,z={x:0,y:1,z:0};if(e=t.swapZ({x:e.x,y:e.y,z:0}),t.isZAxis)if(t.opposite){if(null===h.axes.z.top)return{};u=e.y-d,e.x=h.axes.z.top.x,e.y=h.axes.z.top.y,s=h.axes.z.top.xDir,y=!h.top.frontFacing}else{if(null===h.axes.z.bottom)return{};u=e.y-x,e.x=h.axes.z.bottom.x,e.y=h.axes.z.bottom.y,s=h.axes.z.bottom.xDir,y=!h.bottom.frontFacing}else if(t.horiz)if(t.opposite){if(null===h.axes.x.top)return{};u=e.y-d,e.y=h.axes.x.top.y,e.z=h.axes.x.top.z,s=h.axes.x.top.xDir,y=!h.top.frontFacing}else{if(null===h.axes.x.bottom)return{};u=e.y-x,e.y=h.axes.x.bottom.y,e.z=h.axes.x.bottom.z,s=h.axes.x.bottom.xDir,y=!h.bottom.frontFacing}else if(t.opposite){if(null===h.axes.y.right)return{};f=e.x-c,e.x=h.axes.y.right.x,e.z=h.axes.y.right.z,s={x:(s=h.axes.y.right.xDir).z,y:s.y,z:-s.x}}else{if(null===h.axes.y.left)return{};f=e.x-p,e.x=h.axes.y.left.x,e.z=h.axes.y.left.z,s=h.axes.y.left.xDir}if("chart"!==n)if("flap"===n)if(t.horiz){var b=Math.sin(r),g=Math.cos(r);t.opposite&&(b=-b),y&&(b=-b),z={x:s.z*b,y:g,z:-s.x*b}}else s={x:Math.cos(a),y:0,z:Math.sin(a)};else if("ortho"===n)if(t.horiz){var v=Math.sin(r),m=Math.cos(r),M=Math.sin(a)*m,A=-v,P=-m*Math.cos(a);z={x:s.y*P-s.z*A,y:s.z*M-s.x*P,z:s.x*A-s.y*M};var k=1/Math.sqrt(z.x*z.x+z.y*z.y+z.z*z.z);y&&(k=-k),z={x:k*z.x,y:k*z.y,z:k*z.z}}else s={x:Math.cos(a),y:0,z:Math.sin(a)};else t.horiz?z={x:Math.sin(a)*Math.sin(r),y:Math.cos(r),z:-Math.cos(a)*Math.sin(r)}:s={x:Math.cos(a),y:0,z:Math.sin(a)};e.x+=f*s.x+u*z.x,e.y+=f*s.y+u*z.y,e.z+=f*s.z+u*z.z;var S=D([e],t.chart)[0];if(l){F(D([e,{x:e.x+s.x,y:e.y+s.y,z:e.z+s.z},{x:e.x+z.x,y:e.y+z.y,z:e.z+z.z}],t.chart))<0&&(s={x:-s.x,y:-s.y,z:-s.z});var L=D([{x:e.x,y:e.y,z:e.z},{x:e.x+s.x,y:e.y+s.y,z:e.z+s.z},{x:e.x+z.x,y:e.y+z.y,z:e.z+z.z}],t.chart);S.matrix=[L[1].x-L[0].x,L[1].y-L[0].y,L[2].x-L[0].x,L[2].y-L[0].y,S.x,S.y],S.matrix[4]-=S.x*S.matrix[0]+S.y*S.matrix[2],S.matrix[5]-=S.x*S.matrix[1]+S.y*S.matrix[3]}return S}a(!0,h.prototype.defaultOptions,{labels:{position3d:"offset",skew3d:!1},title:{position3d:null,skew3d:null}}),o(h,"afterSetOptions",function(){var t;this.chart.is3d&&this.chart.is3d()&&"colorAxis"!==this.coll&&((t=this.options).tickWidth=I(t.tickWidth,0),t.gridLineWidth=I(t.gridLineWidth,1))}),l(h.prototype,"getPlotLinePath",function(t){var e=t.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d()||"colorAxis"===this.coll)return e;if(null===e)return e;var i=this.chart,s=i.options.chart.options3d,o=this.isZAxis?i.plotWidth:s.depth,r=i.frame3d,a=[this.swapZ({x:e[1],y:e[2],z:0}),this.swapZ({x:e[1],y:e[2],z:o}),this.swapZ({x:e[4],y:e[5],z:0}),this.swapZ({x:e[4],y:e[5],z:o})],n=[];return this.horiz?(this.isZAxis?(r.left.visible&&n.push(a[0],a[2]),r.right.visible&&n.push(a[1],a[3])):(r.front.visible&&n.push(a[0],a[2]),r.back.visible&&n.push(a[1],a[3])),r.top.visible&&n.push(a[0],a[1]),r.bottom.visible&&n.push(a[2],a[3])):(r.front.visible&&n.push(a[0],a[2]),r.back.visible&&n.push(a[1],a[3]),r.left.visible&&n.push(a[0],a[1]),r.right.visible&&n.push(a[2],a[3])),n=D(n,this.chart,!1),this.chart.renderer.toLineSegments(n)}),l(h.prototype,"getLinePath",function(t){return this.chart.is3d()&&"colorAxis"!==this.coll?[]:t.apply(this,[].slice.call(arguments,1))}),l(h.prototype,"getPlotBandPath",function(t){if(!this.chart.is3d()||"colorAxis"===this.coll)return t.apply(this,[].slice.call(arguments,1));var e=arguments,i=e[1],s=e[2],o=[],r=this.getPlotLinePath({value:i}),a=this.getPlotLinePath({value:s});if(r&&a)for(var n=0;n<r.length;n+=6)o.push("M",r[n+1],r[n+2],"L",r[n+4],r[n+5],"L",a[n+4],a[n+5],"L",a[n+1],a[n+2],"Z");return o}),l(e.prototype,"getMarkPath",function(t){var e=t.apply(this,[].slice.call(arguments,1)),i=[c(this.axis,{x:e[1],y:e[2],z:0}),c(this.axis,{x:e[4],y:e[5],z:0})];return this.axis.chart.renderer.toLineSegments(i)}),o(e,"afterGetLabelPosition",function(t){r(t.pos,c(this.axis,t.pos))}),l(h.prototype,"getTitlePosition",function(t){return c(this,t.apply(this,[].slice.call(arguments,1)),!0)}),o(h,"drawCrosshair",function(t){this.chart.is3d()&&"colorAxis"!==this.coll&&t.point&&(t.point.crosshairPos=this.isXAxis?t.point.axisXpos:this.len-t.point.axisYpos)}),o(h,"destroy",function(){["backFrame","bottomFrame","sideFrame"].forEach(function(t){this[t]&&(this[t]=this[t].destroy())},this)}),p.prototype.addZAxis=function(t){return new s(this,t)},p.prototype.collectionsWithUpdate.push("zAxis"),p.prototype.collectionsWithInit.zAxis=[p.prototype.addZAxis],h.prototype.swapZ=function(t,e){if(this.isZAxis){var i=e?0:this.chart.plotLeft;return{x:i+t.z,y:t.y,z:t.x-i}}return t},s=t.ZAxis=function(){this.init.apply(this,arguments)},r(s.prototype,h.prototype),r(s.prototype,{isZAxis:!0,setOptions:function(t){t=a({offset:0,lineWidth:0},t),h.prototype.setOptions.call(this,t),this.coll="zAxis"},setAxisSize:function(){h.prototype.setAxisSize.call(this),this.width=this.len=this.chart.options.chart.options3d.depth,this.right=this.chart.chartWidth-this.width-this.left},getSeriesExtremes:function(){var s=this,o=s.chart;s.hasVisibleSeries=!1,s.dataMin=s.dataMax=s.ignoreMinPadding=s.ignoreMaxPadding=null,s.buildStacks&&s.buildStacks(),s.series.forEach(function(t){if(t.visible||!o.options.chart.ignoreHiddenSeries){var e,i=t.options.threshold;s.hasVisibleSeries=!0,s.positiveValuesOnly&&i<=0&&(i=null),(e=t.zData).length&&(s.dataMin=Math.min(I(s.dataMin,e[0]),Math.min.apply(null,e)),s.dataMax=Math.max(I(s.dataMax,e[0]),Math.max.apply(null,e)))}})}}),o(p,"afterGetAxes",function(){var i=this,t=this.options,e=t.zAxis=n(t.zAxis||{});i.is3d()&&(this.zAxis=[],e.forEach(function(t,e){t.index=e,t.isX=!0,i.addZAxis(t).setScale()}))}),l(h.prototype,"getSlotWidth",function(t,e){if(this.chart.is3d()&&e&&e.label&&this.categories&&this.chart.frameShapes){var i,s,o,r=this.chart,a=this.ticks,n=this.gridGroup.element.childNodes[0].getBBox(),l=r.frameShapes.left.getBBox(),h=r.options.chart.options3d,p={x:r.plotWidth/2,y:r.plotHeight/2,z:h.depth/2,vd:I(h.depth,1)*I(h.viewDistance,0)},c=e.pos,d=a[c-1],x=a[c+1];return 0!==c&&d&&d.label.xy&&(s=y({x:d.label.xy.x,y:d.label.xy.y,z:null},p,p.vd)),x&&x.label.xy&&(o=y({x:x.label.xy.x,y:x.label.xy.y,z:null},p,p.vd)),i={x:e.label.xy.x,y:e.label.xy.y,z:null},i=y(i,p,p.vd),Math.abs(s?i.x-s.x:o?o.x-i.x:n.x-l.x)}return t.apply(this,[].slice.call(arguments,1))})}),i(e,"parts-3d/Series.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(t,e){var i=e.addEvent,h=e.pick,p=t.perspective;i(t.Series,"afterTranslate",function(){this.chart.is3d()&&this.translate3dPoints()}),t.Series.prototype.translate3dPoints=function(){var t,e,i,s,o,r=this,a=r.chart,n=h(r.zAxis,a.options.zAxis[0]),l=[];for(o=0;o<r.data.length;o++)t=r.data[o],n&&n.translate?(s=n.isLog&&n.val2lin?n.val2lin(t.z):t.z,t.plotZ=n.translate(s),t.isInside=!!t.isInside&&(s>=n.min&&s<=n.max)):t.plotZ=0,t.axisXpos=t.plotX,t.axisYpos=t.plotY,t.axisZpos=t.plotZ,l.push({x:t.plotX,y:t.plotY,z:t.plotZ});for(e=p(l,a,!0),o=0;o<r.data.length;o++)t=r.data[o],i=e[o],t.plotX=i.x,t.plotY=i.y,t.plotZ=i.z}}),i(e,"parts-3d/Column.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(t,e){var i=e.addEvent,c=e.pick,s=e.wrap,x=t.perspective,o=t.Series,y=t.seriesTypes,r=t.svg;function a(t){var e=t.apply(this,[].slice.call(arguments,1));return this.chart.is3d&&this.chart.is3d()&&(e.stroke=this.options.edgeColor||e.fill,e["stroke-width"]=c(this.options.edgeWidth,1)),e}function n(t,e,i){var s=this.chart.is3d&&this.chart.is3d();s&&(this.options.inactiveOtherPoints=!0),t.call(this,e,i),s&&(this.options.inactiveOtherPoints=!1)}function l(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return this.series.chart.is3d()?this.graphic&&"g"!==this.graphic.element.nodeName:t.apply(this,e)}s(y.column.prototype,"translate",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.translate3dShapes()}),s(t.Series.prototype,"justifyDataLabel",function(t){return!arguments[2].outside3dPlot&&t.apply(this,[].slice.call(arguments,1))}),y.column.prototype.translate3dPoints=function(){},y.column.prototype.translate3dShapes=function(){var e,r=this,a=r.chart,t=r.options,n=t.depth,l=(t.stacking?t.stack||0:r.index)*(n+(t.groupZPadding||1)),h=r.borderWidth%2?.5:0;a.inverted&&!r.yAxis.reversed&&(h*=-1),!1!==t.grouping&&(l=0),l+=t.groupZPadding||1,r.data.forEach(function(i){if((i.outside3dPlot=null)!==i.y){var s,o=i.shapeArgs,t=i.tooltipPos;[["x","width"],["y","height"]].forEach(function(t){if((s=o[t[0]]-h)<0&&(o[t[1]]+=o[t[0]]+h,o[t[0]]=-h,s=0),s+o[t[1]]>r[t[0]+"Axis"].len&&0!==o[t[1]]&&(o[t[1]]=r[t[0]+"Axis"].len-o[t[0]]),0!==o[t[1]]&&(o[t[0]]>=r[t[0]+"Axis"].len||o[t[0]]+o[t[1]]<=h)){for(var e in o)o[e]=0;i.outside3dPlot=!0}}),"rect"===i.shapeType&&(i.shapeType="cuboid"),o.z=l,o.depth=n,o.insidePlotArea=!0,e={x:o.x+o.width/2,y:o.y,z:l+n/2},a.inverted&&(e.x=o.height,e.y=i.clientX),i.plot3d=x([e],a,!0,!1)[0],t=x([{x:t[0],y:t[1],z:l+n/2}],a,!0,!1)[0],i.tooltipPos=[t.x,t.y]}}),r.z=l},s(y.column.prototype,"animate",function(t){if(this.chart.is3d()){var e=arguments[1],i=this.yAxis,s=this,o=this.yAxis.reversed;r&&(e?s.data.forEach(function(t){null!==t.y&&(t.height=t.shapeArgs.height,t.shapey=t.shapeArgs.y,t.shapeArgs.height=1,o||(t.stackY?t.shapeArgs.y=t.plotY+i.translate(t.stackY):t.shapeArgs.y=t.plotY+(t.negative?-t.height:t.height)))}):(s.data.forEach(function(t){null!==t.y&&(t.shapeArgs.height=t.height,t.shapeArgs.y=t.shapey,t.graphic&&t.graphic.animate(t.shapeArgs,s.options.animation))}),this.drawDataLabels()))}else t.apply(this,[].slice.call(arguments,1))}),s(y.column.prototype,"plotGroup",function(t,e,i,s,o,r){return"dataLabelsGroup"!==e&&this.chart.is3d()&&(this[e]&&delete this[e],r&&(this.chart.columnGroup||(this.chart.columnGroup=this.chart.renderer.g("columnGroup").add(r)),this[e]=this.chart.columnGroup,this.chart.columnGroup.attr(this.getPlotBox()),this[e].survive=!0,"group"!==e&&"markerGroup"!==e||(arguments[3]="visible"))),t.apply(this,Array.prototype.slice.call(arguments,1))}),s(y.column.prototype,"setVisible",function(t,e){var i,s=this;s.chart.is3d()&&s.data.forEach(function(t){t.visible=t.options.visible=e=void 0===e?!c(s.visible,t.visible):e,i=e?"visible":"hidden",s.options.data[s.data.indexOf(t)]=t.options,t.graphic&&t.graphic.attr({visibility:i})}),t.apply(this,Array.prototype.slice.call(arguments,1))}),y.column.prototype.handle3dGrouping=!0,i(o,"afterInit",function(){if(this.chart.is3d()&&this.handle3dGrouping){var t=this.options,e=t.grouping,i=t.stacking,s=c(this.yAxis.options.reversedStacks,!0),o=0;if(void 0===e||e){var r,a=this.chart.retrieveStacks(i),n=t.stack||0;for(r=0;r<a[n].series.length&&a[n].series[r]!==this;r++);o=10*(a.totalStacks-a[n].position)+(s?r:-r),this.xAxis.reversed||(o=10*a.totalStacks-o)}t.depth=t.depth||25,this.z=this.z||0,t.zIndex=o}}),s(y.column.prototype,"pointAttribs",a),s(y.column.prototype,"setState",n),s(y.column.prototype.pointClass.prototype,"hasNewShapeType",l),y.columnrange&&(s(y.columnrange.prototype,"pointAttribs",a),s(y.columnrange.prototype,"setState",n),s(y.columnrange.prototype.pointClass.prototype,"hasNewShapeType",l),y.columnrange.prototype.plotGroup=y.column.prototype.plotGroup,y.columnrange.prototype.setVisible=y.column.prototype.setVisible),s(o.prototype,"alignDataLabel",function(t,e,i,s,o){var r=this.chart;if(s.outside3dPlot=e.outside3dPlot,r.is3d()&&this.is("column")){var a=this.options,n=c(s.inside,!!this.options.stacking),l=r.options.chart.options3d,h=e.pointWidth/2||0,p={x:o.x+h,y:o.y,z:this.z+a.depth/2};r.inverted&&(n&&(o.width=0,p.x+=e.shapeArgs.height/2),90<=l.alpha&&l.alpha<=270&&(p.y+=e.shapeArgs.width)),p=x([p],r,!0,!1)[0],o.x=p.x-h,o.y=e.outside3dPlot?-9e9:p.y}t.apply(this,[].slice.call(arguments,1))}),s(t.StackItem.prototype,"getStackBox",function(t,e,i,s,o,r,a,n){var l=t.apply(this,[].slice.call(arguments,1));if(e.is3d()&&i.base){var h=+i.base.split(",")[0],p=e.series[h],c=e.options.chart.options3d;if(p&&p instanceof y.column){var d={x:l.x+(e.inverted?a:r/2),y:l.y,z:p.options.depth/2};e.inverted&&(l.width=0,90<=c.alpha&&c.alpha<=270&&(d.y+=r)),d=x([d],e,!0,!1)[0],l.x=d.x-r/2,l.y=d.y}}return l})}),i(e,"parts-3d/Pie.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(t,e){var r=e.pick,i=e.wrap,c=t.deg2rad,s=t.seriesTypes,n=t.svg;i(s.pie.prototype,"translate",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var s=this,o=s.options,r=o.depth||0,e=s.chart.options.chart.options3d,a=e.alpha,n=e.beta,l=o.stacking?(o.stack||0)*r:s._i*r;l+=r/2,!1!==o.grouping&&(l=0),s.data.forEach(function(t){var e,i=t.shapeArgs;t.shapeType="arc3d",i.z=l,i.depth=.75*r,i.alpha=a,i.beta=n,i.center=s.center,e=(i.end+i.start)/2,t.slicedTranslation={translateX:Math.round(Math.cos(e)*o.slicedOffset*Math.cos(a*c)),translateY:Math.round(Math.sin(e)*o.slicedOffset*Math.cos(a*c))}})}}),i(s.pie.prototype.pointClass.prototype,"haloPath",function(t){var e=arguments;return this.series.chart.is3d()?[]:t.call(this,e[1])}),i(s.pie.prototype,"pointAttribs",function(t,e,i){var s=t.call(this,e,i),o=this.options;return this.chart.is3d()&&!this.chart.styledMode&&(s.stroke=o.edgeColor||e.color||this.color,s["stroke-width"]=r(o.edgeWidth,1)),s}),i(s.pie.prototype,"drawDataLabels",function(t){if(this.chart.is3d()){var p=this.chart.options.chart.options3d;this.data.forEach(function(t){var e=t.shapeArgs,i=e.r,s=(e.alpha||p.alpha)*c,o=(e.beta||p.beta)*c,r=(e.start+e.end)/2,a=t.labelPosition,n=a.connectorPosition,l=-i*(1-Math.cos(s))*Math.sin(r),h=i*(Math.cos(o)-1)*Math.cos(r);[a.natural,n.breakAt,n.touchingSliceAt].forEach(function(t){t.x+=h,t.y+=l})})}t.apply(this,[].slice.call(arguments,1))}),i(s.pie.prototype,"addPoint",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.update(this.userOptions,!0)}),i(s.pie.prototype,"animate",function(t){if(this.chart.is3d()){var e,i=arguments[1],s=this.options.animation,o=this.center,r=this.group,a=this.markerGroup;n&&(!0===s&&(s={}),i?(r.oldtranslateX=r.translateX,r.oldtranslateY=r.translateY,e={translateX:o[0],translateY:o[1],scaleX:.001,scaleY:.001},r.attr(e),a&&(a.attrSetters=r.attrSetters,a.attr(e))):(e={translateX:r.oldtranslateX,translateY:r.oldtranslateY,scaleX:1,scaleY:1},r.animate(e,s),a&&a.animate(e,s)))}else t.apply(this,[].slice.call(arguments,1))})}),i(e,"parts-3d/Scatter.js",[e["parts/Globals.js"],e["parts/Point.js"],e["parts/Utilities.js"]],function(i,t,e){var s=e.seriesType,o=i.seriesTypes;s("scatter3d","scatter",{tooltip:{pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>"}},{pointAttribs:function(t){var e=o.scatter.prototype.pointAttribs.apply(this,arguments);return this.chart.is3d()&&t&&(e.zIndex=i.pointCameraDistance(t,this.chart)),e},axisTypes:["xAxis","yAxis","zAxis"],pointArrayMap:["x","y","z"],parallelArrays:["x","y","z"],directTouch:!0},{applyOptions:function(){return t.prototype.applyOptions.apply(this,arguments),void 0===this.z&&(this.z=0),this}})}),i(e,"parts-3d/VMLRenderer.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(t,e){var i=e.addEvent,s=t.Axis,o=t.SVGRenderer,r=t.VMLRenderer;r&&(t.setOptions({animate:!1}),r.prototype.face3d=o.prototype.face3d,r.prototype.polyhedron=o.prototype.polyhedron,r.prototype.elements3d=o.prototype.elements3d,r.prototype.element3d=o.prototype.element3d,r.prototype.cuboid=o.prototype.cuboid,r.prototype.cuboidPath=o.prototype.cuboidPath,r.prototype.toLinePath=o.prototype.toLinePath,r.prototype.toLineSegments=o.prototype.toLineSegments,r.prototype.arc3d=function(t){var e=o.prototype.arc3d.call(this,t);return e.css({zIndex:e.zIndex}),e},t.VMLRenderer.prototype.arc3dPath=t.SVGRenderer.prototype.arc3dPath,i(s,"render",function(){this.sideFrame&&(this.sideFrame.css({zIndex:0}),this.sideFrame.front.attr({fill:this.sideFrame.color})),this.bottomFrame&&(this.bottomFrame.css({zIndex:1}),this.bottomFrame.front.attr({fill:this.bottomFrame.color})),this.backFrame&&(this.backFrame.css({zIndex:0}),this.backFrame.front.attr({fill:this.backFrame.color}))}))}),i(e,"masters/highcharts-3d.src.js",[],function(){})});