!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/indicators/supertrend",["highcharts","highcharts/modules/stock"],function(o){return e(o),e.Highcharts=o,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(o){function e(o,e,t,r){o.hasOwnProperty(e)||(o[e]=r.apply(null,t))}e(o=o?o._modules:{},"indicators/supertrend.src.js",[o["parts/Globals.js"],o["parts/Utilities.js"]],function(o,e){function T(o,e,t){return{index:e,close:o.yData[e][t],x:o.xData[e]}}var C=e.correctFloat,D=e.merge,t=e.seriesType,v=e.isArray,b=e.objectEach,S=o.seriesTypes.atr,j=o.seriesTypes.sma;t("supertrend","sma",{params:{multiplier:3,period:10},risingTrendColor:"#06B535",fallingTrendColor:"#F21313",changeTrendLine:{styles:{lineWidth:1,lineColor:"#333333",dashStyle:"LongDash"}}},{nameBase:"Supertrend",nameComponents:["multiplier","period"],requiredIndicators:["atr"],init:function(){j.prototype.init.apply(this,arguments);var o=this.options;o.cropThreshold=this.linkedParent.options.cropThreshold-(o.params.period-1)},drawGraph:function(){var t=this,o=t.options,e=t.linkedParent,r=e?e.points:[],i=t.points,l=t.graph,n=i.length,s=r.length-n;s=0<s?s:0;for(var a,p,c,d,h,u,y,g,x={options:{gapSize:o.gapSize}},f={top:[],bottom:[],intersect:[]},m={top:{styles:{lineWidth:o.lineWidth,lineColor:o.fallingTrendColor||o.color,dashStyle:o.dashStyle}},bottom:{styles:{lineWidth:o.lineWidth,lineColor:o.risingTrendColor||o.color,dashStyle:o.dashStyle}},intersect:o.changeTrendLine};n--;)a=i[n],p=i[n-1],c=r[n-1+s],d=r[n-2+s],h=r[n+s],u=r[n+s+1],y=a.options.color,g={x:a.x,plotX:a.plotX,plotY:a.plotY,isNull:!1},!d&&c&&e.yData[c.index-1]&&(d=T(e,c.index-1,3)),!u&&h&&e.yData[h.index+1]&&(u=T(e,h.index+1,3)),!c&&d&&e.yData[d.index+1]?c=T(e,d.index+1,3):!c&&h&&e.yData[h.index-1]&&(c=T(e,h.index-1,3)),a&&c&&h&&d&&a.x!==c.x&&(a.x===h.x?(d=c,c=h):a.x===d.x?(c=d,d={close:e.yData[c.index-1][3],x:e.xData[c.index-1]}):u&&a.x===u.x&&(c=u,d=h)),p&&d&&c?(h={x:p.x,plotX:p.plotX,plotY:p.plotY,isNull:!1},a.y>=c.close&&p.y>=d.close?(a.color=y||o.fallingTrendColor||o.color,f.top.push(g)):a.y<c.close&&p.y<d.close?(a.color=y||o.risingTrendColor||o.color,f.bottom.push(g)):(f.intersect.push(g),f.intersect.push(h),f.intersect.push(D(h,{isNull:!0})),a.y>=c.close&&p.y<d.close?(a.color=y||o.fallingTrendColor||o.color,p.color=y||o.risingTrendColor||o.color,f.top.push(g),f.top.push(D(h,{isNull:!0}))):a.y<c.close&&p.y>=d.close&&(a.color=y||o.risingTrendColor||o.color,p.color=y||o.fallingTrendColor||o.color,f.bottom.push(g),f.bottom.push(D(h,{isNull:!0}))))):c&&(a.y>=c.close?(a.color=y||o.fallingTrendColor||o.color,f.top.push(g)):(a.color=y||o.risingTrendColor||o.color,f.bottom.push(g)));b(f,function(o,e){t.points=o,t.options=D(m[e].styles,x),t.graph=t["graph"+e+"Line"],j.prototype.drawGraph.call(t),t["graph"+e+"Line"]=t.graph}),t.points=i,t.options=o,t.graph=l},getValues:function(o,e){var t=e.period;e=e.multiplier;var r,i=o.xData,l=o.yData,n=[],s=[],a=[],p=0===t?0:t-1,c=[],d=[];if(!(i.length<=t||!v(l[0])||4!==l[0].length||t<0)){for(o=S.prototype.getValues.call(this,o,{period:t}).yData,r=0;r<o.length;r++){var h=l[p+r],u=l[p+r-1]||[],y=c[r-1],g=d[r-1],x=a[r-1];0===r&&(y=g=x=0),t=C((h[1]+h[2])/2+e*o[r]);var f=C((h[1]+h[2])/2-e*o[r]);if(c[r]=t<y||y<u[3]?t:y,d[r]=g<f||u[3]<g?f:g,x===y&&h[3]<c[r]||x===g&&h[3]<d[r])var m=c[r];else(x===y&&h[3]>c[r]||x===g&&h[3]>d[r])&&(m=d[r]);n.push([i[p+r],m]),s.push(i[p+r]),a.push(m)}return{values:n,xData:s,yData:a}}}})}),e(o,"masters/indicators/supertrend.src.js",[],function(){})});