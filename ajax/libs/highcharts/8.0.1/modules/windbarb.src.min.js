"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/windbarb",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function i(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i))}i(e,"mixins/on-series.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(t,e){var w=e.defined,k=e.stableSort,A=t.seriesTypes;return{getPlotBox:function(){return t.Series.prototype.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this)},translate:function(){A.column.prototype.translate.apply(this);var t,o,e,i,r,s,n,a=this,l=a.options,p=a.chart,h=a.points,c=h.length-1,u=l.onSeries,f=u&&p.get(u),d=l.onKey||"y",b=f&&f.options.step,g=f&&f.points,x=g&&g.length,m=p.inverted,v=a.xAxis,y=a.yAxis,L=0;if(f&&f.visible&&x)for(L=(f.pointXOffset||0)+(f.barW||0)/2,s=f.currentDataGrouping,i=g[x-1].x+(s?s.totalRange:0),k(h,function(t,e){return t.x-e.x}),d="plot"+d[0].toUpperCase()+d.substr(1);x--&&h[c]&&(e=g[x],(t=h[c]).y=e.y,!(e.x<=t.x&&void 0!==e[d]&&(t.x<=i&&(t.plotY=e[d],e.x<t.x&&!b&&(r=g[x+1])&&void 0!==r[d]&&(n=(t.x-e.x)/(r.x-e.x),t.plotY+=n*(r[d]-e[d]),t.y+=n*(r.y-e.y))),x++,--c<0))););h.forEach(function(t,e){var i;t.plotX+=L,void 0!==t.plotY&&!m||(0<=t.plotX&&t.plotX<=v.len?m?(t.plotY=v.translate(t.x,0,1,0,1),t.plotX=w(t.y)?y.translate(t.y,0,0,0,1):0):t.plotY=(v.opposite?0:a.yAxis.len)+v.offset:t.shapeArgs={}),(o=h[e-1])&&o.plotX===t.plotX&&(void 0===o.stackIndex&&(o.stackIndex=0),i=o.stackIndex+1),t.stackIndex=i}),this.onSeries=f}}}),i(e,"modules/windbarb.src.js",[e["parts/Globals.js"],e["parts/Utilities.js"],e["mixins/on-series.js"]],function(n,t,e){var i=t.animObject,o=t.isNumber,a=t.pick,r=t.seriesType,s=n.noop;function l(){n.approximations&&!n.approximations.windbarb&&(n.approximations.windbarb=function(t,e){var i,o=0,r=0,s=t.length;for(i=0;i<s;i++)o+=t[i]*Math.cos(e[i]*n.deg2rad),r+=t[i]*Math.sin(e[i]*n.deg2rad);return[t.reduce(function(t,e){return t+e},0)/t.length,Math.atan2(r,o)/n.deg2rad]})}l(),r("windbarb","column",{dataGrouping:{enabled:!0,approximation:"windbarb",groupPixelWidth:30},lineWidth:2,onSeries:null,states:{hover:{lineWidthPlus:0}},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> {series.name}: <b>{point.value}</b> ({point.beaufort})<br/>'},vectorLength:20,colorKey:"value",yOffset:-20,xOffset:0},{pointArrayMap:["value","direction"],parallelArrays:["x","value","direction"],beaufortName:["Calm","Light air","Light breeze","Gentle breeze","Moderate breeze","Fresh breeze","Strong breeze","Near gale","Gale","Strong gale","Storm","Violent storm","Hurricane"],beaufortFloor:[0,.3,1.6,3.4,5.5,8,10.8,13.9,17.2,20.8,24.5,28.5,32.7],trackerGroups:["markerGroup"],init:function(t,e){l(),n.Series.prototype.init.call(this,t,e)},pointAttribs:function(t,e){var i=this.options,o=t.color||this.color,r=this.options.lineWidth;return e&&(o=i.states[e].color||o,r=(i.states[e].lineWidth||r)+(i.states[e].lineWidthPlus||0)),{stroke:o,"stroke-width":r}},markerAttribs:function(){},getPlotBox:e.getPlotBox,windArrow:function(t){var e,i,o=1.943844*t.value,r=t.beaufortLevel,s=this.options.vectorLength/20,n=-10;if(t.isNull)return[];if(0===r)return this.chart.renderer.symbols.circle(-10*s,-10*s,20*s,20*s);if(e=["M",0,7*s,"L",-1.5*s,7*s,0,10*s,1.5*s,7*s,0,7*s,0,-10*s],0<(i=(o-o%50)/50))for(;i--;)e.push(-10===n?"L":"M",0,n*s,"L",5*s,n*s+2,"L",0,n*s+4),o-=50,n+=7;if(0<(i=(o-o%10)/10))for(;i--;)e.push(-10===n?"L":"M",0,n*s,"L",7*s,n*s),o-=10,n+=3;if(0<(i=(o-o%5)/5))for(;i--;)e.push(-10===n?"L":"M",0,n*s,"L",4*s,n*s),o-=5,n+=3;return e},translate:function(){var i=this.beaufortFloor,o=this.beaufortName;e.translate.call(this),this.points.forEach(function(t){for(var e=0;e<i.length&&!(i[e]>t.value);e++);t.beaufortLevel=e-1,t.beaufort=o[e-1]})},drawPoints:function(){var o=this.chart,r=this.yAxis,s=o.inverted,n=this.options.vectorLength/2;this.points.forEach(function(t){var e=t.plotX,i=t.plotY;!1===this.options.clip||o.isInsidePlot(e,0,!1)?(t.graphic||(t.graphic=this.chart.renderer.path().add(this.markerGroup).addClass("highcharts-point highcharts-color-"+a(t.colorIndex,t.series.colorIndex))),t.graphic.attr({d:this.windArrow(t),translateX:e+this.options.xOffset,translateY:i+this.options.yOffset,rotation:t.direction}),this.chart.styledMode||t.graphic.attr(this.pointAttribs(t))):t.graphic&&(t.graphic=t.graphic.destroy()),t.tooltipPos=[e+this.options.xOffset+(s&&!this.onSeries?n:0),i+this.options.yOffset-(s?0:n+r.pos-o.plotTop)]},this)},animate:function(t){t?this.markerGroup.attr({opacity:.01}):(this.markerGroup.animate({opacity:1},i(this.options.animation)),this.animate=null)},invertGroups:s,getExtremes:s},{isValid:function(){return o(this.value)&&0<=this.value}})}),i(e,"masters/modules/windbarb.src.js",[],function(){})});