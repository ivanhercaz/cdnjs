!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts","highcharts/modules/sankey"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,n,a){t.hasOwnProperty(e)||(t[e]=a.apply(null,n))}e(t=t?t._modules:{},"modules/dependency-wheel.src.js",[t["parts/Globals.js"],t["parts/Utilities.js"]],function(t,e){var n=e.animObject;e=e.seriesType;var a=t.seriesTypes.sankey.prototype;e("dependencywheel","sankey",{center:[null,null],curveFactor:.6,startAngle:0},{orderNodes:!1,getCenter:t.seriesTypes.pie.prototype.getCenter,createNodeColumns:function(){var e=[this.createNodeColumn()];return this.nodes.forEach(function(t){t.column=0,e[0].push(t)}),e},getNodePadding:function(){return this.options.nodePadding/Math.PI},createNode:function(t){var r=a.createNode.call(this,t);return r.index=this.nodes.length-1,r.getSum=function(){return r.linksFrom.concat(r.linksTo).reduce(function(t,e){return t+e.weight},0)},r.offset=function(t){function n(t){return t.fromNode===r?t.toNode:t.fromNode}var e,a=0,i=r.linksFrom.concat(r.linksTo);for(i.sort(function(t,e){return n(t).index-n(e).index}),e=0;e<i.length;e++)if(n(i[e]).index>r.index){i=i.slice(0,e).reverse().concat(i.slice(e).reverse());var s=!0;break}for(s||i.reverse(),e=0;e<i.length;e++){if(i[e]===t)return a;a+=i[e].weight}},r},translate:function(){var d=this.options,u=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),i=this.getCenter(),l=(d.startAngle-90)*t.deg2rad;a.translate.call(this),this.nodeColumns[0].forEach(function(t){if(t.sum){var e=t.shapeArgs,o=i[0],c=i[1],n=i[2]/2,h=n-d.nodeWidth,a=l+u*e.y;e=l+u*(e.y+e.height),t.angle=a+(e-a)/2,t.shapeType="arc",t.shapeArgs={x:o,y:c,r:n,innerR:h,start:a,end:e},t.dlBox={x:o+Math.cos((a+e)/2)*(n+h)/2,y:c+Math.sin((a+e)/2)*(n+h)/2,width:1,height:1},t.linksFrom.forEach(function(s){if(s.linkBase){var r,t=s.linkBase.map(function(t,e){t*=u;var n=Math.cos(l+t)*(1+h),a=Math.sin(l+t)*(1+h),i=d.curveFactor;return(r=Math.abs(s.linkBase[3-e]*u-t))>Math.PI&&(r=2*Math.PI-r),(r*=h)<h&&(i*=r/h),{x:o+n,y:c+a,cpX:o+(1-i)*n,cpY:c+(1-i)*a}});s.shapeArgs={d:["M",t[0].x,t[0].y,"A",h,h,0,0,1,t[1].x,t[1].y,"C",t[1].cpX,t[1].cpY,t[2].cpX,t[2].cpY,t[2].x,t[2].y,"A",h,h,0,0,1,t[3].x,t[3].y,"C",t[3].cpX,t[3].cpY,t[0].cpX,t[0].cpY,t[0].x,t[0].y]}}})}})},animate:function(t){if(!t){var a=n(this.options.animation).duration/2/this.nodes.length;this.nodes.forEach(function(t,e){var n=t.graphic;n&&(n.attr({opacity:0}),setTimeout(function(){n.animate({opacity:1},{duration:a})},a*e))},this),this.points.forEach(function(t){var e=t.graphic;!t.isNode&&e&&e.attr({opacity:0}).animate({opacity:1},this.options.animation)},this),this.animate=null}}},{setState:t.NodesMixin.setNodeState,getDataLabelPath:function(t){var e=this.series.chart.renderer,n=this.shapeArgs,a=this.angle<0||this.angle>Math.PI,i=n.start,s=n.end;return this.dataLabelPath||(this.dataLabelPath=e.arc({open:!0}).add(t)),this.dataLabelPath.attr({x:n.x,y:n.y,r:n.r+(this.dataLabel.options.distance||0),start:a?i:s,end:a?s:i,clockwise:+a}),this.dataLabelPath},isValid:function(){return!0}})}),e(t,"masters/modules/dependency-wheel.src.js",[],function(){})});