"use strict";import H from"../../../../parts/Globals.js";import U from"../../../../parts/Utilities.js";var addEvent=U.addEvent,merge=U.merge;function isWithinDescriptionThreshold(e){var r=e.chart.options.accessibility;return e.points.length<r.series.pointDescriptionEnabledThreshold||!1===r.series.pointDescriptionEnabledThreshold}function isWithinNavigationThreshold(e){var r=e.chart.options.accessibility.keyboardNavigation.seriesNavigation;return e.points.length<r.pointNavigationEnabledThreshold||!1===r.pointNavigationEnabledThreshold}function shouldForceMarkers(e){var r=e.chart.options.accessibility.enabled,t=!1!==(e.options.accessibility&&e.options.accessibility.enabled),i=isWithinDescriptionThreshold(e),s=isWithinNavigationThreshold(e);return r&&t&&(i||s)}function unforceMarkerOptions(e){var r=e.resetA11yMarkerOptions;merge(!0,e.options,{marker:{enabled:r.enabled,states:{normal:{opacity:r.states&&r.states.normal&&r.states.normal.opacity}}}})}function forceZeroOpacityMarkerOptions(e){merge(!0,e,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function getPointMarkerOpacity(e){return e.marker.states&&e.marker.states.normal&&e.marker.states.normal.opacity||1}function forceDisplayPointMarker(e){merge(!0,e.marker,{states:{normal:{opacity:getPointMarkerOpacity(e)}}})}function handleForcePointMarkers(e){for(var r=e.length;r--;){var t=e[r].options;t.marker&&(t.marker.enabled?forceDisplayPointMarker(t):forceZeroOpacityMarkerOptions(t))}}function addForceMarkersEvents(){addEvent(H.Series,"render",function(){var e=this.options;shouldForceMarkers(this)?(e.marker&&!1===e.marker.enabled&&(this.a11yMarkersForced=!0,forceZeroOpacityMarkerOptions(this.options)),this._hasPointMarkers&&this.points&&this.points.length&&handleForcePointMarkers(this.points)):this.a11yMarkersForced&&this.resetMarkerOptions&&(delete this.a11yMarkersForced,unforceMarkerOptions(this))}),addEvent(H.Series,"afterSetOptions",function(e){this.resetA11yMarkerOptions=merge(e.options.marker||{},this.userOptions.marker||{})})}export default addForceMarkersEvents;