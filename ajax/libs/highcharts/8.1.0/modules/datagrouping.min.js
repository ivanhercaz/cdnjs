!function(a){"object"==typeof module&&module.exports?module.exports=a.default=a:"function"==typeof define&&define.amd?define("highcharts/modules/datagrouping",["highcharts"],function(t){return a(t),a.Highcharts=t,a}):a("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function a(t,a,e,o){t.hasOwnProperty(a)||(t[a]=o.apply(null,e))}a(t=t?t._modules:{},"parts/DataGrouping.js",[t["parts/DateTimeAxis.js"],t["parts/Globals.js"],t["parts/Point.js"],t["parts/Tooltip.js"],t["parts/Utilities.js"]],function(c,t,a,e,o){var i=o.addEvent,r=o.arrayMax,n=o.arrayMin,s=o.correctFloat,A=o.defined,p=o.error,d=o.extend,g=o.format,b=o.isNumber,P=o.merge,f=o.pick,u=t.Axis,l=t.defaultPlotOptions;o=t.Series;function h(t,a,e,o){var i=this,r=i.data,n=i.options&&i.options.data,s=[],p=[],u=[],l=t.length,h=!!a,d=[],g=i.pointArrayMap,c=g&&g.length,f=["x"].concat(g||["y"]),m=0,D=0;o="function"==typeof o?o:S[o]?S[o]:S[i.getDGApproximation&&i.getDGApproximation()||"average"],c?g.forEach(function(){d.push([])}):d.push([]);for(var y=c||1,v=0;v<=l&&!(t[v]>=e[0]);v++);for(;v<=l;v++){for(;void 0!==e[m+1]&&t[v]>=e[m+1]||v===l;){var x=e[m];i.dataGroupInfo={start:i.cropStart+D,length:d[0].length};var G=o.apply(i,d);for(i.pointClass&&!A(i.dataGroupInfo.options)&&(i.dataGroupInfo.options=P(i.pointClass.prototype.optionsToObject.call({series:i},i.options.data[i.cropStart+D])),f.forEach(function(t){delete i.dataGroupInfo.options[t]})),void 0!==G&&(s.push(x),p.push(G),u.push(i.dataGroupInfo)),D=v,x=0;x<y;x++)d[x].length=0,d[x].hasNulls=!1;if(m+=1,v===l)break}if(v===l)break;if(g)for(x=i.cropStart+v,G=r&&r[x]||i.pointClass.prototype.applyOptions.apply({series:i},[n[x]]),x=0;x<c;x++){var M=G[g[x]];b(M)?d[x].push(M):null===M&&(d[x].hasNulls=!0)}else x=h?a[v]:null,b(x)?d[0].push(x):null===x&&(d[0].hasNulls=!0)}return{groupedXData:s,groupedYData:p,groupMap:u}}var S=t.approximations={sum:function(t){var a=t.length;if(!a&&t.hasNulls)var e=null;else if(a)for(e=0;a--;)e+=t[a];return e},average:function(t){var a=t.length;return t=S.sum(t),b(t)&&a&&(t=s(t/a)),t},averages:function(){var a=[];return[].forEach.call(arguments,function(t){a.push(S.average(t))}),void 0===a[0]?void 0:a},open:function(t){return t.length?t[0]:t.hasNulls?null:void 0},high:function(t){return t.length?r(t):t.hasNulls?null:void 0},low:function(t){return t.length?n(t):t.hasNulls?null:void 0},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:void 0},ohlc:function(t,a,e,o){if(t=S.open(t),a=S.high(a),e=S.low(e),o=S.close(o),b(t)||b(a)||b(e)||b(o))return[t,a,e,o]},range:function(t,a){return t=S.low(t),a=S.high(a),b(t)||b(a)?[t,a]:null===t&&null===a?null:void 0}},m={approximations:S,groupData:h},D=o.prototype,y=D.processData,v=D.generatePoints,x={groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},G={line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5}},M=t.defaultDataGroupingUnits=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]];return D.getDGApproximation=function(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("column")?"sum":"average"},D.groupData=h,D.processData=function(){var t,a=this.chart,e=this.options.dataGrouping,o=!1!==this.allowDG&&e&&f(e.enabled,a.options.isStock),i=this.visible||!a.options.chart.ignoreHiddenSeries,r=this.currentDataGrouping,n=!1;if(this.forceCrop=o,this.groupPixelWidth=null,this.hasProcessed=!0,o&&!this.requireSorting&&(this.requireSorting=n=!0),o=!1===y.apply(this,arguments)||!o,n&&(this.requireSorting=!1),!o){this.destroyGroupedData(),o=e.groupAll?this.xData:this.processedXData;var s=e.groupAll?this.yData:this.processedYData,p=a.plotSizeX,u=(a=this.xAxis).options.ordinal;if(h=this.groupPixelWidth=a.getGroupPixelWidth&&a.getGroupPixelWidth()){this.isDirty=t=!0,this.points=null;var l=(n=a.getExtremes()).min,h=h*((n=n.max)-l)/p*(u=u&&a.ordinal&&a.ordinal.getGroupIntervalFactor(l,n,this)||1),p=a.getTimeTicks(c.AdditionsClass.prototype.normalizeTimeTickInterval(h,e.units||M),Math.min(l,o[0]),Math.max(n,o[o.length-1]),a.options.startOfWeek,o,this.closestPointRange),o=(s=D.groupData.apply(this,[o,s,p,e.approximation])).groupedXData;u=s.groupedYData;var d=0;if(e.smoothed&&o.length){var g=o.length-1;for(o[g]=Math.min(o[g],n);g--&&0<g;)o[g]+=h/2;o[0]=Math.max(o[0],l)}for(g=1;g<p.length;g++)p.info.segmentStarts&&-1!==p.info.segmentStarts.indexOf(g)||(d=Math.max(p[g]-p[g-1],d));(l=p.info).gapSize=d,this.closestPointRange=p.info.totalRange,this.groupMap=s.groupMap,A(o[0])&&o[0]<a.min&&i&&((!A(a.options.min)&&a.min<=a.dataMin||a.min===a.dataMin)&&(a.min=Math.min(o[0],a.min)),a.dataMin=Math.min(o[0],a.dataMin)),e.groupAll&&(o=(e=this.cropData(o,u,a.min,a.max,1)).xData,u=e.yData),this.processedXData=o,this.processedYData=u}else this.groupMap=null;this.hasGroupedData=t,this.currentDataGrouping=l,this.preventGraphAnimation=(r&&r.totalRange)!==(l&&l.totalRange)}},D.destroyGroupedData=function(){this.groupedData&&(this.groupedData.forEach(function(t,a){t&&(this.groupedData[a]=t.destroy?t.destroy():null)},this),this.groupedData.length=0)},D.generatePoints=function(){v.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},i(a,"update",function(){if(this.dataGroup)return p(24,!1,this.series.chart),!1}),i(e,"headerFormatter",function(t){var a,e,o=this.chart,i=o.time,r=t.labelConfig,n=r.series,s=n.tooltipOptions,p=n.options.dataGrouping,u=s.xDateFormat,l=n.xAxis,h=s[(t.isFooter?"footer":"header")+"Format"];l&&"datetime"===l.options.type&&p&&b(r.key)&&(a=n.currentDataGrouping,p=p.dateTimeLabelFormats||x.dateTimeLabelFormats,a?(s=p[a.unitName],1===a.count?u=s[0]:(u=s[1],e=s[2])):!u&&p&&(u=this.getXDateFormat(r,s,l)),u=i.dateFormat(u,r.key),e&&(u+=i.dateFormat(e,r.key+a.totalRange-1)),n.chart.styledMode&&(h=this.styledModeFormat(h)),t.text=g(h,{point:d(r.point,{key:u}),series:n},o),t.preventDefault())}),i(o,"destroy",D.destroyGroupedData),i(o,"afterSetOptions",function(t){t=t.options;var a=this.type,e=this.chart.options.plotOptions,o=l[a].dataGrouping,i=this.useCommonDataGrouping&&x;(G[a]||i)&&(o=o||P(x,G[a]),t.dataGrouping=P(i,o,e.series&&e.series.dataGrouping,e[a].dataGrouping,this.userOptions.dataGrouping))}),i(u,"afterSetScale",function(){this.series.forEach(function(t){t.hasProcessed=!1})}),u.prototype.getGroupPixelWidth=function(){for(var t,a=this.series,e=a.length,o=0,i=!1,r=e;r--;)(t=a[r].options.dataGrouping)&&(o=Math.max(o,f(t.groupPixelWidth,x.groupPixelWidth)));for(r=e;r--;)(t=a[r].options.dataGrouping)&&a[r].hasProcessed&&(e=(a[r].processedXData||a[r].data).length,a[r].groupPixelWidth||e>this.chart.plotSizeX/o||e&&t.forced)&&(i=!0);return i?o:0},u.prototype.setDataGrouping=function(a,t){var e;if(t=f(t,!0),a=a||{forced:!1,units:null},this instanceof u)for(e=this.series.length;e--;)this.series[e].update({dataGrouping:a},!1);else this.chart.options.series.forEach(function(t){t.dataGrouping=a},!1);this.ordinal&&(this.ordinal.slope=void 0),t&&this.chart.redraw()},t.dataGrouping=m}),a(t,"masters/modules/datagrouping.src.js",[t["parts/DataGrouping.js"]],function(t){return t})});