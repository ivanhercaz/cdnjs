!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/funnel",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,i,a){t.hasOwnProperty(e)||(t[e]=a.apply(null,i))}e(t=t?t._modules:{},"modules/funnel.src.js",[t["parts/Globals.js"],t["parts/Utilities.js"]],function(p,t){var i=t.isArray,Y=t.pick;t=p.seriesType;var r=p.seriesTypes,j=p.fireEvent,e=p.addEvent,E=p.noop;t("funnel","pie",{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}},{animate:E,translate:function(){function t(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)}var e,i,a,n,o,l,s,r,h,d,c=0,p=this,g=p.chart,u=p.options,f=u.reversed,b=u.ignoreHiddenPoint,m=g.plotWidth,g=g.plotHeight,v=0,L=u.center,y=t(L[0],m),W=t(L[1],g),A=t(u.width,m),x=t(u.height,g),D=t(u.neckWidth,m),H=t(u.neckHeight,g),k=W-x/2+x-H,m=p.data,w="left"===u.dataLabels.position?1:0;p.getWidthAt=function(t){return k<t||x===H?D:D+(A-D)*(1-(t-(W-x/2))/(x-H))},p.getX=function(t,e,i){return y+(e?-1:1)*(p.getWidthAt(f?2*W-t:t)/2+i.labelDistance)},p.center=[y,W,x],p.centerX=y,m.forEach(function(t){b&&!1===t.visible||(c+=t.y)}),m.forEach(function(t){d=null,a=c?t.y/c:0,r=(o=W-x/2+v*x)+a*x,e=p.getWidthAt(o),l=(n=y-e/2)+e,e=p.getWidthAt(r),h=(s=y-e/2)+e,k<o?(n=s=y-D/2,l=h=y+D/2):k<r&&(d=r,e=p.getWidthAt(k),h=(s=y-e/2)+e,r=k),f&&(o=2*W-o,r=2*W-r,null!==d&&(d=2*W-d)),i=[["M",n,o],["L",l,o],["L",h,r]],null!==d&&i.push(["L",h,d],["L",s,d]),i.push(["L",s,r],["Z"]),t.shapeType="path",t.shapeArgs={d:i},t.percentage=100*a,t.plotX=y,t.plotY=(o+(d||r))/2,t.tooltipPos=[y,t.plotY],t.dlBox={x:s,y:o,topWidth:l-n,bottomWidth:h-s,height:Math.abs(Y(d,r)-o),width:NaN},t.slice=E,t.half=w,b&&!1===t.visible||(v+=a)}),j(p,"afterTranslate")},sortByAngle:function(t){t.sort(function(t,e){return t.plotY-e.plotY})},drawDataLabels:function(){var t,e=this.data,i=this.options.dataLabels.distance,a=e.length;for(this.center[2]-=2*i;a--;){var n=e[a],o=(t=n.half)?1:-1,l=n.plotY;n.labelDistance=Y(n.options.dataLabels&&n.options.dataLabels.distance,i),this.maxLabelDistance=Math.max(n.labelDistance,this.maxLabelDistance||0);var s=this.getX(l,t,n);n.labelPosition={natural:{x:0,y:l},final:{},alignment:t?"right":"left",connectorPosition:{breakAt:{x:s+(n.labelDistance-5)*o,y:l},touchingSliceAt:{x:s+n.labelDistance*o,y:l}}}}r[this.options.dataLabels.inside?"column":"pie"].prototype.drawDataLabels.call(this)},alignDataLabel:function(t,e,i,a,n){a=(d=t.series).options.reversed;var o=t.dlBox||t.shapeArgs,l=i.align,s=i.verticalAlign,r=((d.options||{}).dataLabels||{}).inside,h=d.center[1],d=d.getWidthAt((a?2*h-t.plotY:t.plotY)-o.height/2+e.height);d="middle"===s?(o.topWidth-o.bottomWidth)/4:(d-o.bottomWidth)/2,h=o.y;var c=o.x;"middle"===s?h=o.y-o.height/2+e.height/2:"top"===s&&(h=o.y-o.height+e.height+i.padding),("top"===s&&!a||"bottom"===s&&a||"middle"===s)&&("right"===l?c=o.x-i.padding+d:"left"===l&&(c=o.x+i.padding-d)),a={x:c,y:a?h-o.height:h,width:o.bottomWidth,height:o.height},i.verticalAlign="bottom",r&&!t.visible||p.Series.prototype.alignDataLabel.call(this,t,e,i,a,n),r&&(!t.visible&&t.dataLabel&&(t.dataLabel.placed=!1),t.contrastColor&&e.css({color:t.contrastColor}))}}),e(p.Chart,"afterHideAllOverlappingLabels",function(){this.series.forEach(function(t){var e=t.options&&t.options.dataLabels;i(e)&&(e=e[0]),t.is("pie")&&t.placeDataLabels&&e&&!e.inside&&t.placeDataLabels()})}),t("pyramid","funnel",{neckWidth:"0%",neckHeight:"0%",reversed:!0})}),e(t,"masters/modules/funnel.src.js",[],function(){})});