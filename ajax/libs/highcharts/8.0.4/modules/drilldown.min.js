!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/drilldown",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i))}e(t=t?t._modules:{},"modules/drilldown.src.js",[t["parts/Globals.js"],t["parts/Color.js"],t["parts/Point.js"],t["parts/Tick.js"],t["parts/Utilities.js"]],function(t,h,e,i,o){var l=o.addEvent,d=o.animObject,c=o.extend,p=o.fireEvent,r=o.format,u=o.merge,n=o.objectEach,f=o.pick,s=o.syncTimeout,v=t.noop;o=t.defaultOptions;var a=t.Chart,m=t.seriesTypes,g=m.pie;m=m.column;var w=1;c(o.lang,{drillUpText:"‚óÅ Back to {series.name}"}),o.drilldown={activeAxisLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},activeDataLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}},t.SVGRenderer.prototype.Element.prototype.fadeIn=function(t){this.attr({opacity:.1,visibility:"inherit"}).animate({opacity:f(this.newOpacity,1)},t||{duration:250})},a.prototype.addSeriesAsDrilldown=function(t,e){this.addSingleSeriesAsDrilldown(t,e),this.applyDrilldown()},a.prototype.addSingleSeriesAsDrilldown=function(t,e){var i,o=t.series,r=o.xAxis,s=o.yAxis,l=[],n=[],a=this.styledMode?{colorIndex:f(t.colorIndex,o.colorIndex)}:{color:t.color||o.color};this.drilldownLevels||(this.drilldownLevels=[]);var d=o.options._levelNumber||0;(i=this.drilldownLevels[this.drilldownLevels.length-1])&&i.levelNumber!==d&&(i=void 0),e=c(c({_ddSeriesId:w++},a),e);var p=o.points.indexOf(t);o.chart.series.forEach(function(t){t.xAxis!==r||t.isDrilling||(t.options._ddSeriesId=t.options._ddSeriesId||w++,t.options._colorIndex=t.userOptions._colorIndex,t.options._levelNumber=t.options._levelNumber||d,i?(l=i.levelSeries,n=i.levelSeriesOptions):(l.push(t),t.purgedOptions=u({_ddSeriesId:t.options._ddSeriesId,_levelNumber:t.options._levelNumber,selected:t.options.selected},t.userOptions),n.push(t.purgedOptions)))}),t=c({levelNumber:d,seriesOptions:o.options,seriesPurgedOptions:o.purgedOptions,levelSeriesOptions:n,levelSeries:l,shapeArgs:t.shapeArgs,bBox:t.graphic?t.graphic.getBBox():{},color:t.isNull?new h(a.color).setOpacity(0).get():a.color,lowerSeriesOptions:e,pointOptions:o.options.data[p],pointIndex:p,oldExtremes:{xMin:r&&r.userMin,xMax:r&&r.userMax,yMin:s&&s.userMin,yMax:s&&s.userMax},resetZoomButton:this.resetZoomButton},a),this.drilldownLevels.push(t),r&&r.names&&(r.names.length=0),(e=t.lowerSeries=this.addSeries(e,!1)).options._levelNumber=d+1,r&&(r.oldPos=r.pos,r.userMin=r.userMax=null,s.userMin=s.userMax=null),o.type===e.type&&(e.animate=e.animateDrilldown||v,e.options.animation=!0)},a.prototype.applyDrilldown=function(){var t=this.drilldownLevels;if(t&&0<t.length){var e=t[t.length-1].levelNumber;this.drilldownLevels.forEach(function(t){t.levelNumber===e&&t.levelSeries.forEach(function(t){t.options&&t.options._levelNumber===e&&t.remove(!1)})})}this.resetZoomButton&&(this.resetZoomButton.hide(),delete this.resetZoomButton),this.pointer.reset(),this.redraw(),this.showDrillUpButton(),p(this,"afterDrilldown")},a.prototype.getDrilldownBackText=function(){var t=this.drilldownLevels;if(t&&0<t.length)return(t=t[t.length-1]).series=t.seriesOptions,r(this.options.lang.drillUpText,t)},a.prototype.showDrillUpButton=function(){var t,e=this,i=this.getDrilldownBackText(),o=e.options.drilldown.drillUpButton;if(this.drillUpButton)this.drillUpButton.attr({text:i}).align();else{var r=(t=o.theme)&&t.states;this.drillUpButton=this.renderer.button(i,null,null,function(){e.drillUp()},t,r&&r.hover,r&&r.select).addClass("highcharts-drillup-button").attr({align:o.position.align,zIndex:7}).add().align(o.position,!1,o.relativeTo||"plotBox")}},a.prototype.drillUp=function(){if(this.drilldownLevels&&0!==this.drilldownLevels.length){function t(e){d.forEach(function(t){t.options._ddSeriesId===e._ddSeriesId&&(i=t)});var i=i||l.addSeries(e,!1);i.type===r.type&&i.animateDrillupTo&&(i.animate=i.animateDrillupTo),e===o.seriesPurgedOptions&&(s=i)}for(var e,o,r,s,l=this,i=l.drilldownLevels,n=i[i.length-1].levelNumber,a=i.length,d=l.series;a--;)if((o=i[a]).levelNumber===n){if(i.pop(),!(r=o.lowerSeries).chart)for(e=d.length;e--;)if(d[e].options.id===o.lowerSeriesOptions.id&&d[e].options._levelNumber===n+1){r=d[e];break}r.xData=[],o.levelSeriesOptions.forEach(t),p(l,"drillup",{seriesOptions:o.seriesPurgedOptions||o.seriesOptions}),s.type===r.type&&(s.drilldownLevel=o,s.options.animation=l.options.drilldown.animation,r.animateDrillupFrom&&r.chart&&r.animateDrillupFrom(o)),s.options._levelNumber=n,r.remove(!1),s.xAxis&&(e=o.oldExtremes,s.xAxis.setExtremes(e.xMin,e.xMax,!1),s.yAxis.setExtremes(e.yMin,e.yMax,!1)),o.resetZoomButton&&(l.resetZoomButton=o.resetZoomButton,l.resetZoomButton.show())}this.redraw(),0===this.drilldownLevels.length?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align(),this.ddDupes.length=[],p(l,"drillupall")}},l(a,"afterInit",function(){var i=this;i.drilldown={update:function(t,e){u(!0,i.options.drilldown,t),f(e,!0)&&i.redraw()}}}),l(a,"beforeShowResetZoom",function(){if(this.drillUpButton)return!1}),l(a,"render",function(){(this.xAxis||[]).forEach(function(s){s.ddPoints={},s.series.forEach(function(t){var e,i=t.xData||[],o=t.points;for(e=0;e<i.length;e++){var r=t.options.data[e];"number"!=typeof r&&((r=t.pointClass.prototype.optionsToObject.call({series:t},r)).drilldown&&(s.ddPoints[i[e]]||(s.ddPoints[i[e]]=[]),s.ddPoints[i[e]].push(!o||o[e])))}}),n(s.ticks,i.prototype.drillable)})}),m.prototype.animateDrillupTo=function(t){if(!t){var e=this,r=e.drilldownLevel;this.points.forEach(function(t){var e=t.dataLabel;t.graphic&&t.graphic.hide(),e&&(e.hidden="hidden"===e.attr("visibility"),e.hidden||(e.hide(),t.connector&&t.connector.hide()))}),s(function(){e.points&&e.points.forEach(function(t,e){var i="show"===(e=e===(r&&r.pointIndex)?"show":"fadeIn")||void 0,o=t.dataLabel;t.graphic&&t.graphic[e](i),o&&!o.hidden&&(o.fadeIn(),t.connector&&t.connector.fadeIn())})},Math.max(this.chart.options.drilldown.animation.duration-50,0)),delete this.animate}},m.prototype.animateDrilldown=function(t){var i,o=this,e=this.chart,r=e.drilldownLevels,s=d(e.options.drilldown.animation),l=this.xAxis,n=e.styledMode;t||(r.forEach(function(t){o.options._ddSeriesId===t.lowerSeriesOptions._ddSeriesId&&(i=t.shapeArgs,n||(i.fill=t.color))}),i.x+=f(l.oldPos,l.pos)-l.pos,this.points.forEach(function(t){var e=t.shapeArgs;n||(e.fill=t.color),t.graphic&&t.graphic.attr(i).animate(c(t.shapeArgs,{fill:t.color||o.color}),s),t.dataLabel&&t.dataLabel.fadeIn(s)}),delete this.animate)},m.prototype.animateDrillupFrom=function(r){var s=d(this.chart.options.drilldown.animation),l=this.group,n=l!==this.chart.columnGroup,a=this;a.trackerGroups.forEach(function(t){a[t]&&a[t].on("mouseover")}),n&&delete this.group,this.points.forEach(function(t){function e(){i.destroy(),l&&n&&(l=l.destroy())}var i=t.graphic,o=r.shapeArgs;i&&(delete t.graphic,a.chart.styledMode||(o.fill=r.color),s.duration?i.animate(o,u(s,{complete:e})):(i.attr(o),e()))})},g&&c(g.prototype,{animateDrillupTo:m.prototype.animateDrillupTo,animateDrillupFrom:m.prototype.animateDrillupFrom,animateDrilldown:function(t){var o=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],r=this.chart.options.drilldown.animation,s=o.shapeArgs,l=s.start,n=(s.end-l)/this.points.length,a=this.chart.styledMode;t||(this.points.forEach(function(t,e){var i=t.shapeArgs;a||(s.fill=o.color,i.fill=t.color),t.graphic&&t.graphic.attr(u(s,{start:l+e*n,end:l+(e+1)*n}))[r?"animate":"attr"](i,r)}),delete this.animate)}}),e.prototype.doDrilldown=function(o,t,e){var i=this.series.chart,r=i.options.drilldown,s=(r.series||[]).length;for(i.ddDupes||(i.ddDupes=[]);s--&&!l;)if(r.series[s].id===this.drilldown&&-1===i.ddDupes.indexOf(this.drilldown)){var l=r.series[s];i.ddDupes.push(this.drilldown)}p(i,"drilldown",{point:this,seriesOptions:l,category:t,originalEvent:e,points:void 0!==t&&this.series.xAxis.getDDPoints(t).slice(0)},function(t){var e=t.point.series&&t.point.series.chart,i=t.seriesOptions;e&&i&&(o?e.addSingleSeriesAsDrilldown(t.point,i):e.addSeriesAsDrilldown(t.point,i))})},t.Axis.prototype.drilldownCategory=function(e,i){n(this.getDDPoints(e),function(t){t&&t.series&&t.series.visible&&t.doDrilldown&&t.doDrilldown(!0,e,i)}),this.chart.applyDrilldown()},t.Axis.prototype.getDDPoints=function(t){return this.ddPoints&&this.ddPoints[t]},i.prototype.drillable=function(){var e=this.pos,t=this.label,i=this.axis,o="xAxis"===i.coll&&i.getDDPoints,r=o&&i.getDDPoints(e),s=i.chart.styledMode;o&&(t&&r&&r.length?(t.drillable=!0,t.basicStyles||s||(t.basicStyles=u(t.styles)),t.addClass("highcharts-drilldown-axis-label"),t.removeOnDrillableClick=l(t.element,"click",function(t){i.drilldownCategory(e,t)}),s||t.css(i.chart.options.drilldown.activeAxisLabelStyle)):t&&t.removeOnDrillableClick&&(s||(t.styles={},t.css(t.basicStyles)),t.removeOnDrillableClick(),t.removeClass("highcharts-drilldown-axis-label")))},l(e,"afterInit",function(){var e=this,i=e.series;return e.drilldown&&l(e,"click",function(t){i.xAxis&&!1===i.chart.options.drilldown.allowPointDrilldown?i.xAxis.drilldownCategory(e.x,t):e.doDrilldown(void 0,void 0,t)}),e}),l(t.Series,"afterDrawDataLabels",function(){var o=this.chart.options.drilldown.activeDataLabelStyle,r=this.chart.renderer,s=this.chart.styledMode;this.points.forEach(function(t){var e=t.options.dataLabels,i=f(t.dlOptions,e&&e.style,{});t.drilldown&&t.dataLabel&&("contrast"!==o.color||s||(i.color=r.getContrast(t.color||this.color)),e&&e.color&&(i.color=e.color),t.dataLabel.addClass("highcharts-drilldown-data-label"),s||t.dataLabel.css(o).css(i))},this)});function x(t,e,i,o){t[i?"addClass":"removeClass"]("highcharts-drilldown-point"),o||t.css({cursor:e})}l(t.Series,"afterDrawTracker",function(){var e=this.chart.styledMode;this.points.forEach(function(t){t.drilldown&&t.graphic&&x(t.graphic,"pointer",!0,e)})}),l(e,"afterSetState",function(){var t=this.series.chart.styledMode;this.drilldown&&this.series.halo&&"hover"===this.state?x(this.series.halo,"pointer",!0,t):this.series.halo&&x(this.series.halo,"auto",!1,t)})}),e(t,"masters/modules/drilldown.src.js",[],function(){})});