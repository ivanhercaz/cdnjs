!function(e,t){var n;"function"==typeof define&&define.amd?define(["exports","./navigation-menu-panel","../../globals/js/misc/on","../../globals/js/misc/event-matches","../../globals/js/settings"],t):"undefined"!=typeof exports?t(exports,require("./navigation-menu-panel"),require("../../globals/js/misc/on"),require("../../globals/js/misc/event-matches"),require("../../globals/js/settings")):(t(n={},e.navigationMenuPanel,e.on,e.eventMatches,e.settings),e.navigationMenu=n)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,a,i,r,l){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a=t(a),i=t(i),r=t(r),l=t(l);var o=function(){function o(e,t){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(s=f(this,g(o).call(this,e,t))).getCurrentNavigation=function(){return s.element.ownerDocument.activeElement},s.navigate=function(e){var t,n,o,a,i,r,l=u(s.element.querySelectorAll(s.options.selectorFocusableNavItems)),c=s.getCurrentNavigation();t=c,r=Math.max(l.indexOf(t)+e,-1),l[a=r,i=l.length,n=a-(a<i?0:i),o=l.length,n+(0<=n?0:o)].focus()},s._handleKeyDown=function(e){var t=!s.element.hasAttribute("hidden");if(27===e.which&&t)return s.changeState("collapsed"),void(s.triggerButton&&s.triggerButton.focus());var n,o=(0,r.default)(e,s.options.selectorShellNavSubmenu),a=(0,r.default)(e,s.options.selectorShellNavLink);!o&&!a||(n={38:s.constructor.NAVIGATE.BACKWARD,40:s.constructor.NAVIGATE.FORWARD}[e.which])&&(e.preventDefault(),s.navigate(n))},s._handleFocusOut=function(e){var t=s.element.contains(e.relatedTarget)||e.relatedTarget===s.triggerButton||!e.relatedTarget;s.element.contains(e.target)&&!t&&(s.changeState("collapsed"),s.triggerButton.focus())},s.changeNavSubmenuState=function(e){var t=e.matchesNavSubmenu,n=e.shouldBeCollapsed,o=t.closest(s.options.selectorShellNavCategory);o&&(t.setAttribute("aria-expanded",!n),o.classList.toggle(s.options.classShellNavCategoryExpanded),Array.prototype.forEach.call(o.querySelectorAll(s.options.selectorShellNavLink),function(e){e.tabIndex=n?-1:0}))},s._handleClick=function(e){var t,n=(0,r.default)(e,s.options.selectorShellNavSubmenu),o=(0,r.default)(e,s.options.selectorShellNavLink),a=(0,r.default)(e,s.options.selectorShellNestedNavLink);if(n||o){if(a)return u(s.element.querySelectorAll(s.options.selectorShellNavLinkCurrent)).forEach(function(e){e.classList.remove(s.options.classShellNavItemActive,s.options.classShellNavLinkCurrent)}),void a.closest(s.options.selectorShellNavNestedCategory).classList.add(s.options.classShellNavItemActive);n?(t="true"===n.getAttribute("aria-expanded"),s.changeNavSubmenuState({matchesNavSubmenu:n,isExpanded:t})):o&&(u(s.element.querySelectorAll(s.options.selectorShellNavLinkCurrent)).forEach(function(e){e.classList.remove(s.options.classShellNavItemActive,s.options.classShellNavLinkCurrent)}),o.closest(s.options.selectorShellNavItem).classList.add(s.options.classShellNavItemActive))}},s.manage((0,i.default)(e,"click",s._handleClick)),s.manage((0,i.default)(e,"keydown",s._handleKeyDown)),s.manage((0,i.default)(s.element.ownerDocument,"click",function(e){s.element.hasAttribute("hidden")||s.triggerButton.contains(e.target)||s.element.contains(e.target)||s.changeState("collapsed")}));var n="onfocusout"in window;return s.manage((0,i.default)(s.element,n?"focusout":"blur",s._handleFocusOut,!n)),s}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,a.default),e=o,n=[{key:"options",get:function(){var e=l.default.prefix;return Object.assign(Object.create(a.default.options),{selectorInit:"[data-navigation-menu]",attribInitTarget:"data-navigation-menu-target",selectorShellNavSubmenu:".".concat(e,"--navigation__category-toggle"),selectorShellNavLink:".".concat(e,"--navigation-link"),selectorShellNestedNavLink:".".concat(e,"--navigation__category-item > a.").concat(e,"--navigation-link"),selectorShellNavLinkCurrent:".".concat(e,"--navigation-item--active,.").concat(e,"--navigation__category-item--active"),selectorFocusableNavItems:"\n        .".concat(e,"--navigation__category-toggle,\n        .").concat(e,"--navigation-item > .").concat(e,"--navigation-link,\n        .").concat(e,'--navigation-link[tabindex="0"]\n      '),selectorShellNavItem:".".concat(e,"--navigation-item"),selectorShellNavCategory:".".concat(e,"--navigation__category"),selectorShellNavNestedCategory:".".concat(e,"--navigation__category-item"),classShellNavItemActive:"".concat(e,"--navigation-item--active"),classShellNavLinkCurrent:"".concat(e,"--navigation__category-item--active"),classShellNavCategoryExpanded:"".concat(e,"--navigation__category--expanded")})}}],(t=null)&&c(e.prototype,t),n&&c(e,n),o.components=new WeakMap,o.NAVIGATE={BACKWARD:-1,FORWARD:1},o}();e.default=o});