!function(e,t){var n;"function"==typeof define&&define.amd?define(["exports","../../globals/js/settings","../../globals/js/misc/mixin","../../globals/js/mixins/create-component","../../globals/js/mixins/init-component-by-search","../../globals/js/mixins/evented-state","../../globals/js/mixins/handles","../../globals/js/misc/on"],t):"undefined"!=typeof exports?t(exports,require("../../globals/js/settings"),require("../../globals/js/misc/mixin"),require("../../globals/js/mixins/create-component"),require("../../globals/js/mixins/init-component-by-search"),require("../../globals/js/mixins/evented-state"),require("../../globals/js/mixins/handles"),require("../../globals/js/misc/on")):(t(n={},e.settings,e.mixin,e.createComponent,e.initComponentBySearch,e.eventedState,e.handles,e.on),e.slider=n)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,o,s,u,l,a,r,c){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o=t(o),s=t(s),u=t(u),l=t(l),a=t(a),r=t(r),c=t(c);var i=function(){function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=d(this,f(i).call(this,e,t)))._changeState=function(e,t,n){n()},n.sliderActive=!1,n.dragging=!1,n.track=n.element.querySelector(n.options.selectorTrack),n.filledTrack=n.element.querySelector(n.options.selectorFilledTrack),n.thumb=n.element.querySelector(n.options.selectorThumb),n.input=n.element.querySelector(n.options.selectorInput),n.element.dataset.sliderInputBox&&(n.boundInput=n.element.ownerDocument.querySelector(n.element.dataset.sliderInputBox),n._updateInput(),n.manage((0,c.default)(n.boundInput,"change",function(e){n.setValue(e.target.value)})),n.manage((0,c.default)(n.boundInput,"focus",function(e){e.target.select()})),n.manage((0,c.default)(n.boundInput,"mouseup",function(e){e.preventDefault()}))),n._updatePosition(),n.manage((0,c.default)(n.thumb,"mousedown",function(){n.sliderActive=!0})),n.manage((0,c.default)(n.element.ownerDocument,"mouseup",function(){n.sliderActive=!1})),n.manage((0,c.default)(n.element.ownerDocument,"mousemove",function(e){var t=n.element.classList.contains(n.options.classDisabled);!0!==n.sliderActive||t||n._updatePosition(e)})),n.manage((0,c.default)(n.thumb,"keydown",function(e){n.element.classList.contains(n.options.classDisabled)||n._updatePosition(e)})),n.manage((0,c.default)(n.track,"click",function(e){n.element.classList.contains(n.options.classDisabled)||n._updatePosition(e)})),n}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,(0,s.default)(u.default,l.default,a.default,r.default)),e=i,n=[{key:"options",get:function(){var e=o.default.prefix;return{selectorInit:"[data-slider]",selectorTrack:".".concat(e,"--slider__track"),selectorFilledTrack:".".concat(e,"--slider__filled-track"),selectorThumb:".".concat(e,"--slider__thumb"),selectorInput:".".concat(e,"--slider__input"),classDisabled:"".concat(e,"--slider--disabled"),classThumbClicked:"".concat(e,"--slider__thumb--clicked"),eventBeforeSliderValueChange:"slider-before-value-change",eventAfterSliderValueChange:"slider-after-value-change",stepMultiplier:4}}}],(t=[{key:"_updatePosition",value:function(e){var t=this,n=this._calcValue(e),i=n.left,o=n.newValue;this.dragging||(this.dragging=!0,requestAnimationFrame(function(){t.dragging=!1,t.thumb.style.left="".concat(i,"%"),t.filledTrack.style.transform="translate(0%, -50%) scaleX(".concat(i/100,")"),t.input.value=o,t._updateInput(),t.changeState("slider-value-change",{value:o})}))}},{key:"_calcValue",value:function(e){var t,n,i,o,s,u,l,a,r=this.getInputProps(),c=r.value,p=r.min,d=r.max,f=r.step,m=d-p,b=(c-p)/m*100;return o=b,s=c,e&&("keydown"!==(t=e.type)||void 0!==(n={40:-1,37:-1,38:1,39:1}[e.which])&&(o=b+(i=f*(!0===e.shiftKey?m/f/this.options.stepMultiplier:1))/m*100*n,s=Number(c)+i*n),"mousemove"!==t&&"click"!==t||("click"===t?this.element.querySelector(this.options.selectorThumb).classList.add(this.options.classThumbClicked):this.element.querySelector(this.options.selectorThumb).classList.remove(this.options.classThumbClicked),u=this.track.getBoundingClientRect(),l=(e.clientX-u.left)/u.width,o=(a=Math.round(m*l/f)*f)/m*100,s=a+p)),s<=Number(p)&&(o=0,s=p),s>=Number(d)&&(o=100,s=d),{left:o,newValue:s}}},{key:"_updateInput",value:function(){this.boundInput&&(this.boundInput.value=this.input.value)}},{key:"getInputProps",value:function(){return{value:Number(this.input.value),min:Number(this.input.min),max:Number(this.input.max),step:this.input.step?Number(this.input.step):1}}},{key:"setValue",value:function(e){this.input.value=e,this._updatePosition()}},{key:"stepUp",value:function(){this.input.stepUp(),this._updatePosition()}},{key:"stepDown",value:function(){this.input.stepDown(),this._updatePosition()}}])&&p(e.prototype,t),n&&p(e,n),i.components=new WeakMap,i}();e.default=i});