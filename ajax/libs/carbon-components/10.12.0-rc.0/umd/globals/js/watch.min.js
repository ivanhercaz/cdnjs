function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){var o;"function"==typeof define&&define.amd?define(["exports","./components"],t):"undefined"!=typeof exports?t(exports,require("./components")):(t(o={},e.components),e.watch=o)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,c){"use strict";function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t.nodeType!==Node.ELEMENT_NODE&&t.nodeType!==Node.DOCUMENT_NODE)throw new TypeError("DOM document or DOM element should be given to watch for DOM node to create/release components.");var n=Object.keys(c).map(function(e){return c[e]}).filter(function(e){return"function"==typeof e.init}),r=n.map(function(e){return e.init(t,o)}).filter(Boolean),f=n.filter(function(e){return!e.forLazyInit}),i=new MutationObserver(function(e){u(e,n,f,o)});return i.observe(t,{childList:!0,subtree:!0}),{release:function(){for(var e=r.pop();e;e=r.pop())e.release();i&&(i.disconnect(),i=null)}}},c=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e){var f;Object.prototype.hasOwnProperty.call(e,r)&&((f=n?Object.getOwnPropertyDescriptor(e,r):null)&&(f.get||f.set)?Object.defineProperty(o,r,f):o[r]=e[r])}o.default=e,t&&t.set(e,o);return o}(c);var f=Array.prototype.forEach,u=function(e,o,n,r){e.forEach(function(e){f.call(e.addedNodes,function(t){t.nodeType===Node.ELEMENT_NODE&&n.forEach(function(e){e.init(t,r)})}),f.call(e.removedNodes,function(t){t.nodeType===Node.ELEMENT_NODE&&o.forEach(function(o){var e;t.matches(o.options.selectorInit)?(e=o.components.get(t))&&e.release():f.call(t.querySelectorAll(o.options.selectorInit),function(e){var t=o.components.get(e);t&&t.release()})})})})}});