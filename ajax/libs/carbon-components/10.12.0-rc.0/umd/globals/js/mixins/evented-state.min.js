!function(t,e){var n;"function"==typeof define&&define.amd?define(["exports"],e):"undefined"!=typeof exports?e(exports):(e(n={}),t.eventedState=n)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(t){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){return function(){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,!(e=i(n).apply(this,arguments))||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e;var t,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t),function(t,e,n){e&&r(t.prototype,e);n&&r(t,n)}(n,[{key:"_changeState",value:function(){throw new Error("_changeState() should be overriden to perform actual change in state.")}},{key:"changeState",value:function(){for(var t=this,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var r,i,a,f,c,u,l,s="string"==typeof n[0]?n.shift():void 0,p=Object(n[0])===n[0]&&"function"!=typeof n[0]?n.shift():void 0,y="function"==typeof n[0]?n.shift():void 0;"function"!=typeof this.shouldStateBeChanged||this.shouldStateBeChanged(s,p)?(r={group:p&&p.group,state:s},i=[r.group,s].filter(Boolean).join("-").split("-").map(function(t){return t[0].toUpperCase()+t.substr(1)}).join(""),a=new CustomEvent(this.options["eventBefore".concat(i)],{bubbles:!0,cancelable:!0,detail:p}),!(f=p&&p.delegatorNode||this.element).dispatchEvent(a)?y&&((c=new Error("Changing state (".concat(JSON.stringify(r),") has been canceled."))).canceled=!0,y(c)):(u=[s,p].filter(Boolean),this._changeState.apply(this,(function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(l=u)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()).concat([function(){f.dispatchEvent(new CustomEvent(t.options["eventAfter".concat(i)],{bubbles:!0,cancelable:!0,detail:p})),y&&y()}])))):y&&y(null,!0)}}]),n}()}});