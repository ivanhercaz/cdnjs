!function(e,t){if("function"==typeof define&&define.amd)define(["exports","./navigation-menu-panel","../../globals/js/misc/on","../../globals/js/settings","../../globals/js/misc/on-focus-by-keyboard"],t);else if("undefined"!=typeof exports)t(exports,require("./navigation-menu-panel"),require("../../globals/js/misc/on"),require("../../globals/js/settings"),require("../../globals/js/misc/on-focus-by-keyboard"));else{var n={};t(n,e.navigationMenuPanel,e.on,e.settings,e.onFocusByKeyboard),e.productSwitcher=n}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,r,a,c,i){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r=t(r),a=t(a),c=t(c),i=t(i);var p=0,o=function(){function n(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=l(this,f(n).call(this,e,t))).current="",r.triggerButtonIds=new Set,r._handleFocusOut=function(e){if(!r.element.contains(e.relatedTarget)){var t=r.element.ownerDocument.getElementById(r.current);t&&e.relatedTarget&&!e.relatedTarget.matches(r.options.selectorFloatingMenus)&&t.focus()}},r._handleKeyDown=function(e){var t=!r.element.hasAttribute("hidden");if(27===e.which&&t){var n=r.current;r.changeState(r.constructor.SELECT_NONE),r.element.ownerDocument.getElementById(n).focus()}},r.createdByLauncher=function(e){var t=r.element.classList.contains(r.options.classProductSwitcherExpanded),n=e.delegateTarget;n.id||(n.id="__carbon-product-switcher-launcher-".concat(p++));var o=n.id;r.changeState(t&&r.current===o?r.constructor.SELECT_NONE:o)},r.shouldStateBeChanged=function(e){return r.current!==e},r._changeState=function(e,t){r.element.classList.toggle(r.options.classProductSwitcherExpanded,e!==r.constructor.SELECT_NONE),r.current=e,r.current!==r.constructor.SELECT_NONE&&r.triggerButtonIds.add(r.current),r.triggerButtonIds.forEach(function(e){var t=r.element.ownerDocument.getElementById(e),n=t.getAttribute(r.options.attribLabelExpand);t.classList.remove(r.options.classNavigationMenuPanelHeaderActionActive),t.setAttribute("aria-label",n),t.setAttribute("title",n)});var n=r.element.ownerDocument.getElementById(r.current);if(n){var o=n.getAttribute(r.options.attribLabelCollapse);n.classList.toggle(r.options.classNavigationMenuPanelHeaderActionActive),n.setAttribute("aria-label",o),n.setAttribute("title",o)}e!==r.constructor.SELECT_NONE?(r.element.setAttribute("tabindex","0"),r.element.focus()):r.element.setAttribute("tabindex","-1"),t()},r.manage((0,a.default)(e,"keydown",r._handleKeyDown)),r.manage((0,i.default)(e,"blur",r._handleFocusOut)),r}var e,t,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,r.default),e=n,o=[{key:"options",get:function(){var e=c.default.prefix;return Object.assign(Object.create(r.default.options),{selectorInit:"[data-product-switcher]",selectorFloatingMenus:"\n        .".concat(e,"--overflow-menu-options,\n        .").concat(e,"--overflow-menu-options *,\n        .").concat(e,"--tooltip,\n        .").concat(e,"--tooltip *,\n        .flatpicker-calendar,\n        .flatpicker-calendar *\n        "),attribInitTarget:"data-product-switcher-target",classProductSwitcherExpanded:"".concat(e,"--panel--expanded")})}}],(t=[{key:"release",value:function(){return this.triggerButtonIds.clear(),s(f(n.prototype),"release",this).call(this)}}])&&u(e.prototype,t),o&&u(e,o),n.SELECT_NONE="__carbon-product-switcher-launcher-NONE",n.components=new WeakMap,n}();e.default=o});