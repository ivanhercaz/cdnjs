"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bitapScore(t,e){var r=e.errors,i=void 0===r?0:r,n=e.currentLocation,a=void 0===n?0:n,s=e.expectedLocation,o=void 0===s?0:s,c=e.distance,h=void 0===c?100:c,u=i/t.length,f=Math.abs(o-a);return h?u+f/h:f?1:u}function matchedIndiced(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=[],i=-1,n=-1,a=0,s=t.length;a<s;a+=1){var o=t[a];o&&-1===i?i=a:o||-1===i||(e<=(n=a-1)-i+1&&r.push([i,n]),i=-1)}return t[a-1]&&e<=a-i&&r.push([i,a-1]),r}function bitapSearch(t,e,r,i){for(var n=i.location,a=void 0===n?0:n,s=i.distance,o=void 0===s?100:s,c=i.threshold,h=void 0===c?.6:c,u=i.findAllMatches,f=void 0!==u&&u,l=i.minMatchCharLength,v=void 0===l?1:l,d=i.includeMatches,p=void 0!==d&&d,g=e.length,y=t.length,m=Math.max(0,Math.min(a,y)),x=h,M=t.indexOf(e,m),S=[],_=0;_<y;_+=1)S[_]=0;if(-1!==M){var b=bitapScore(e,{errors:0,currentLocation:M,expectedLocation:m,distance:o});if(x=Math.min(b,x),-1!==(M=t.lastIndexOf(e,m+g))){var k=bitapScore(e,{errors:0,currentLocation:M,expectedLocation:m,distance:o});x=Math.min(k,x)}}M=-1;for(var $=[],P=1,I=g+y,O=1<<(g<=31?g-1:30),A=0;A<g;A+=1){for(var C=0,w=I;C<w;){bitapScore(e,{errors:A,currentLocation:m+w,expectedLocation:m,distance:o})<=x?C=w:I=w,w=Math.floor((I-C)/2+C)}I=w;var F=Math.max(1,m-w+1),z=f?y:Math.min(m+w,y)+g,E=Array(z+2);E[z+1]=(1<<A)-1;for(var L=z;F<=L;--L){var j=L-1,N=r[t.charAt(j)];if(N&&(S[j]=1),E[L]=(E[L+1]<<1|1)&N,0!==A&&(E[L]|=($[L+1]|$[L])<<1|1|$[L+1]),E[L]&O&&(P=bitapScore(e,{errors:A,currentLocation:j,expectedLocation:m,distance:o}))<=x){if(x=P,(M=j)<=m)break;F=Math.max(1,2*m-M)}}if(x<bitapScore(e,{errors:A+1,currentLocation:m,expectedLocation:m,distance:o}))break;$=E}var D={isMatch:0<=M,score:P||.001};return p&&(D.matchedIndices=matchedIndiced(S,v)),D}function patternAlphabet(t){for(var e={},r=t.length,i=0;i<r;i+=1)e[t.charAt(i)]=0;for(var n=0;n<r;n+=1)e[t.charAt(n)]|=1<<r-n-1;return e}var MAX_BITS=32,BitapSearch=function(){function g(t,e){var r=e.location,i=void 0===r?0:r,n=e.distance,a=void 0===n?100:n,s=e.threshold,o=void 0===s?.6:s,c=e.isCaseSensitive,h=void 0!==c&&c,u=e.findAllMatches,f=void 0!==u&&u,l=e.minMatchCharLength,v=void 0===l?1:l,d=e.includeMatches,p=void 0!==d&&d;if(_classCallCheck(this,g),this.options={location:i,distance:a,threshold:o,isCaseSensitive:h,findAllMatches:f,includeMatches:p,minMatchCharLength:v},t.length>MAX_BITS)throw new Error("Pattern length exceeds max of ".concat(MAX_BITS,"."));this.pattern=h?t:t.toLowerCase(),this.patternAlphabet=patternAlphabet(this.pattern)}return _createClass(g,[{key:"searchIn",value:function(t){var e=t.$;return this.searchInString(e)}},{key:"searchInString",value:function(t){var e=this.options,r=e.isCaseSensitive,i=e.includeMatches;if(r||(t=t.toLowerCase()),this.pattern===t){var n={isMatch:!0,score:0};return i&&(n.matchedIndices=[[0,t.length-1]]),n}var a=this.options,s=a.location,o=a.distance,c=a.threshold,h=a.findAllMatches,u=a.minMatchCharLength;return bitapSearch(t,this.pattern,this.patternAlphabet,{location:s,distance:o,threshold:c,findAllMatches:h,minMatchCharLength:u,includeMatches:i})}}]),g}(),isForPattern=function(t){return"'"==t.charAt(0)},sanitize=function(t){return t.substr(1)},match=function(t,e){var r=sanitize(t);return{isMatch:-1<e.indexOf(r),score:0}},exactMatch={isForPattern:isForPattern,sanitize:sanitize,match:match},isForPattern$1=function(t){return"!"==t.charAt(0)},sanitize$1=function(t){return t.substr(1)},match$1=function(t,e){var r=sanitize$1(t);return{isMatch:-1===e.indexOf(r),score:0}},inverseExactMatch={isForPattern:isForPattern$1,sanitize:sanitize$1,match:match$1},isForPattern$2=function(t){return"^"==t.charAt(0)},sanitize$2=function(t){return t.substr(1)},match$2=function(t,e){var r=sanitize$2(t);return{isMatch:e.startsWith(r),score:0}},prefixExactMatch={isForPattern:isForPattern$2,sanitize:sanitize$2,match:match$2},isForPattern$3=function(t){return"!"==t.charAt(0)&&"^"==t.charAt(1)},sanitize$3=function(t){return t.substr(2)},match$3=function(t,e){var r=sanitize$3(t);return{isMatch:!e.startsWith(r),score:0}},inversePrefixExactMatch={isForPattern:isForPattern$3,sanitize:sanitize$3,match:match$3},isForPattern$4=function(t){return"$"==t.charAt(t.length-1)},sanitize$4=function(t){return t.substr(0,t.length-1)},match$4=function(t,e){var r=sanitize$4(t);return{isMatch:e.endsWith(r),score:0}},suffixExactMatch={isForPattern:isForPattern$4,sanitize:sanitize$4,match:match$4},isForPattern$5=function(t){return"!"==t.charAt(0)&&"$"==t.charAt(t.length-1)},sanitize$5=function(t){return t.substring(1,t.length-1)},match$5=function(t,e){var r=sanitize$5(t);return{isMatch:!e.endsWith(r),score:0}},inverseSuffixExactMatch={isForPattern:isForPattern$5,sanitize:sanitize$5,match:match$5},INFINITY=1/0,isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},baseToString=function(t){if("string"==typeof t)return t;var e=t+"";return"0"==e&&1/t==-INFINITY?"-0":e},toString=function(t){return null==t?"":baseToString(t)},isString=function(t){return"string"==typeof t},isNumber=function(t){return"number"==typeof t},isDefined=function(t){return null!=t},queryfy=function(t){return t.split("|").map(function(t){return t.trim().split(/ +/g)})},ExtendedSearch=function(){function i(t,e){_classCallCheck(this,i);var r=e.isCaseSensitive;this.query=null,this.options=e,this._fuzzyCache={},isString(t)&&0<t.trim().length&&(this.pattern=r?t:t.toLowerCase(),this.query=queryfy(this.pattern))}return _createClass(i,[{key:"searchIn",value:function(t){var e=this.query;if(!this.query)return{isMatch:!1,score:1};var r=t.$;r=this.options.isCaseSensitive?r:r.toLowerCase();for(var i=!1,n=0,a=e.length;n<a;n+=1){var s=e[n],o=null;i=!0;for(var c=0,h=s.length;c<h;c+=1){var u=s[c];if(!(o=this._search(u,r)).isMatch){i=!1;break}}if(i)return o}return{isMatch:!1,score:1}}},{key:"_search",value:function(t,e){if(exactMatch.isForPattern(t))return exactMatch.match(t,e);if(prefixExactMatch.isForPattern(t))return prefixExactMatch.match(t,e);if(inversePrefixExactMatch.isForPattern(t))return inversePrefixExactMatch.match(t,e);if(inverseSuffixExactMatch.isForPattern(t))return inverseSuffixExactMatch.match(t,e);if(suffixExactMatch.isForPattern(t))return suffixExactMatch.match(t,e);if(inverseExactMatch.isForPattern(t))return inverseExactMatch.match(t,e);var r=this._fuzzyCache[t];return r||(r=new BitapSearch(t,this.options),this._fuzzyCache[t]=r),r.searchInString(e)}}]),i}(),NGRAM_LEN=3;function ngram(t,e){var r=e.n,i=void 0===r?NGRAM_LEN:r,n=e.pad,a=void 0===n||n,s=e.sort,o=void 0!==s&&s,c=[];if(null==t)return c;t=t.toLowerCase(),a&&(t=" ".concat(t," "));var h=t.length-i+1;if(h<1)return c;for(;h--;)c[h]=t.substr(h,i);return o&&c.sort(function(t,e){return t==e?0:t<e?-1:1}),c}function union(t,e){for(var r=[],i=0,n=0;i<t.length&&n<e.length;){var a=t[i],s=e[n];a<s?(r.push(a),i+=1):(s<a?r.push(s):(r.push(s),i+=1),n+=1)}for(;i<t.length;)r.push(t[i]),i+=1;for(;n<e.length;)r.push(e[n]),n+=1;return r}function intersection(t,e){for(var r=[],i=0,n=0;i<t.length&&n<e.length;){var a=t[i],s=e[n];a==s?(r.push(a),i+=1,n+=1):a<s?i+=1:(s<a||(i+=1),n+=1)}return r}function jaccardDistance(t,e){var r=union(t,e);return 1-intersection(t,e).length/r.length}var NGramSearch=function(){function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{threshold:.6};_classCallCheck(this,r),this.options=e,this.patternNgram=ngram(t,{sort:!0})}return _createClass(r,[{key:"searchIn",value:function(t){var e=t.ng;e||(e=ngram(t.$,{sort:!0}),t.ng=e);var r=jaccardDistance(this.patternNgram,e),i=r<this.options.threshold;return{score:i?r:1,isMatch:i}}}]),r}();function get(t,e){var h=[],u=!1;return function t(e,r){if(r){var i=r.indexOf("."),n=r,a=null;-1!==i&&(n=r.slice(0,i),a=r.slice(i+1));var s=e[n];if(isDefined(s))if(a||!isString(s)&&!isNumber(s))if(isArray(s)){u=!0;for(var o=0,c=s.length;o<c;o+=1)t(s[o],a)}else a&&t(s,a);else h.push(toString(s))}else h.push(e)}(t,e),u?h:h[0]}function createIndex(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=r.getFn,n=void 0===i?get:i,a=r.ngrams,s=void 0!==a&&a,o=[];if(isString(e[0]))for(var c=0,h=e.length;c<h;c+=1){var u=e[c];if(isDefined(u)){var f={$:u,idx:c};s&&(f.ng=ngram(u,{sort:!0})),o.push(f)}}else for(var l=t.length,v=0,d=e.length;v<d;v+=1){for(var p=e[v],g={idx:v,$:{}},y=0;y<l;y+=1){var m=t[y],x=n(p,m);if(isDefined(x))if(isArray(x)){for(var M=[],S=[{arrayIndex:-1,value:x}];S.length;){var _=S.pop(),b=_.arrayIndex,k=_.value;if(isDefined(k))if(isString(k)){var $={$:k,idx:b};s&&($.ng=ngram(k,{sort:!0})),M.push($)}else if(isArray(k))for(var P=0,I=k.length;P<I;P+=1)S.push({arrayIndex:P,value:k[P]})}g.$[m]=M}else{var O={$:x};s&&(O.ng=ngram(x,{sort:!0})),g.$[m]=O}}o.push(g)}return o}var KeyStore=function(){function f(t){if(_classCallCheck(this,f),this._keys={},this._keyNames=[],this._length=t.length,t.length&&isString(t[0]))for(var e=0;e<this._length;e+=1){var r=t[e];this._keys[r]={weight:1},this._keyNames.push(r)}else{for(var i=0,n=0;n<this._length;n+=1){var a=t[n];if(!Object.prototype.hasOwnProperty.call(a,"name"))throw new Error('Missing "name" property in key object');var s=a.name;if(this._keyNames.push(s),!Object.prototype.hasOwnProperty.call(a,"weight"))throw new Error('Missing "weight" property in key object');var o=a.weight;if(o<=0||1<=o)throw new Error('"weight" property in key must be in the range of (0, 1)');this._keys[s]={weight:o},i+=o}for(var c=0;c<this._length;c+=1){var h=this._keyNames[c],u=this._keys[h].weight;this._keys[h].weight=u/i}}}return _createClass(f,[{key:"get",value:function(t,e){return this._keys[t]?this._keys[t][e]:-1}},{key:"keys",value:function(){return this._keyNames}},{key:"count",value:function(){return this._length}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),f}();function transformMatches(t,e){var r=t.matches;if(e.matches=[],isDefined(r))for(var i=0,n=r.length;i<n;i+=1){var a=r[i];if(isDefined(a.indices)&&0!==a.indices.length){var s={indices:a.indices,value:a.value};a.key&&(s.key=a.key),-1<a.idx&&(s.refIndex=a.idx),e.matches.push(s)}}}function transformScore(t,e){e.score=t.score}var BasicOptions={isCaseSensitive:!1,findAllMatches:!1,includeMatches:!1,includeScore:!1,keys:[],minMatchCharLength:1,shouldSort:!0,sortFn:function(t,e){return t.score-e.score}},FuzzyOptions={location:0,threshold:.6,distance:100},AdvancedOptions={useExtendedSearch:!1,getFn:get},defaultOptions=_objectSpread2({},BasicOptions,{},FuzzyOptions,{},AdvancedOptions),Fuse=function(){function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:defaultOptions,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,i),this.options=_objectSpread2({},defaultOptions,{},e),this.options.isCaseSensitive=e.caseSensitive,delete this.options.caseSensitive,this._processKeys(this.options.keys),this.setCollection(t,r)}return _createClass(i,[{key:"setCollection",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:null;this.list=t,this.listIsStringArray=isString(t[0]),r?this.setIndex(r):this.setIndex(this._createIndex())}},{key:"setIndex",value:function(t){this._indexedList=t}},{key:"_processKeys",value:function(t){this._keyStore=new KeyStore(t)}},{key:"_createIndex",value:function(){return createIndex(this._keyStore.keys(),this.list,{getFn:this.options.getFn})}},{key:"search",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:{limit:!1},i=this.options,n=i.useExtendedSearch,a=i.shouldSort,s=null;s=new(n?ExtendedSearch:t.length>MAX_BITS?NGramSearch:BitapSearch)(t,this.options);var o=this._searchUsing(s);return this._computeScore(o),a&&this._sort(o),r.limit&&isNumber(r.limit)&&(o=o.slice(0,r.limit)),this._format(o)}},{key:"_searchUsing",value:function(t){var e=this._indexedList,r=[],i=this.options.includeMatches;if(this.listIsStringArray)for(var n=0,a=e.length;n<a;n+=1){var s=e[n],o=s.$,c=s.idx;if(isDefined(o)){var h=t.searchIn(s),u=h.isMatch,f=h.score;if(u){var l={score:f,value:o};i&&(l.indices=h.matchedIndices),r.push({item:o,idx:c,matches:[l]})}}}else for(var v=this._keyStore.keys(),d=this._keyStore.count(),p=0,g=e.length;p<g;p+=1){var y=e[p],m=y.$,x=y.idx;if(isDefined(m)){for(var M=[],S=0;S<d;S+=1){var _=v[S],b=m[_];if(isDefined(b))if(isArray(b))for(var k=0,$=b.length;k<$;k+=1){var P=b[k],I=P.$,O=P.idx;if(isDefined(I)){var A=t.searchIn(P),C=A.isMatch,w=A.score;if(C){var F={score:w,key:_,value:I,idx:O};i&&(F.indices=A.matchedIndices),M.push(F)}}}else{var z=b.$,E=t.searchIn(b),L=E.isMatch,j=E.score;if(!L)continue;var N={score:j,key:_,value:z};i&&(N.indices=E.matchedIndices),M.push(N)}}M.length&&r.push({idx:x,item:m,matches:M})}}return r}},{key:"_computeScore",value:function(t){for(var e=0,r=t.length;e<r;e+=1){for(var i=t[e],n=i.matches,a=n.length,s=1,o=0;o<a;o+=1){var c=n[o],h=c.key,u=this._keyStore.get(h,"weight"),f=-1<u?u:1,l=0===c.score&&-1<u?Number.EPSILON:c.score;s*=Math.pow(l,f)}i.score=s}}},{key:"_sort",value:function(t){t.sort(this.options.sortFn)}},{key:"_format",value:function(t){var e=[],r=this.options,i=r.includeMatches,n=r.includeScore,a=[];i&&a.push(transformMatches),n&&a.push(transformScore);for(var s=0,o=t.length;s<o;s+=1){var c=t[s],h=c.idx,u={item:this.list[h],refIndex:h};if(a.length)for(var f=0,l=a.length;f<l;f+=1)a[f](c,u);e.push(u)}return e}}]),i}();Fuse.version="5.1.0",Fuse.createIndex=createIndex,Fuse.defaultOptions=defaultOptions,module.exports=Fuse;