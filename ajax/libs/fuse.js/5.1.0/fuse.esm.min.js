function bitapScore(t,{errors:e=0,currentLocation:s=0,expectedLocation:i=0,distance:n=100}){const r=e/t.length,a=Math.abs(i-s);return n?r+a/n:a?1:r}function matchedIndiced(t=[],e=1){let s=[],i=-1,n=-1,r=0;for(let a=t.length;r<a;r+=1){let a=t[r];a&&-1===i?i=r:a||-1===i||((n=r-1)-i+1>=e&&s.push([i,n]),i=-1)}return t[r-1]&&r-i>=e&&s.push([i,r-1]),s}function bitapSearch(t,e,s,{location:i=0,distance:n=100,threshold:r=.6,findAllMatches:a=!1,minMatchCharLength:c=1,includeMatches:o=!1}){const h=e.length,l=t.length,u=Math.max(0,Math.min(i,l));let f=r,d=t.indexOf(e,u);const p=[];for(let t=0;t<l;t+=1)p[t]=0;if(-1!==d){let s=bitapScore(e,{errors:0,currentLocation:d,expectedLocation:u,distance:n});if(f=Math.min(s,f),-1!==(d=t.lastIndexOf(e,u+h))){let t=bitapScore(e,{errors:0,currentLocation:d,expectedLocation:u,distance:n});f=Math.min(t,f)}}d=-1;let g=[],m=1,x=h+l;const y=1<<(h<=31?h-1:30);for(let i=0;i<h;i+=1){let r=0,c=x;for(;r<c;){bitapScore(e,{errors:i,currentLocation:u+c,expectedLocation:u,distance:n})<=f?r=c:x=c,c=Math.floor((x-r)/2+r)}x=c;let o=Math.max(1,u-c+1),M=a?l:Math.min(u+c,l)+h,S=Array(M+2);S[M+1]=(1<<i)-1;for(let r=M;r>=o;r-=1){let a=r-1,c=s[t.charAt(a)];if(c&&(p[a]=1),S[r]=(S[r+1]<<1|1)&c,0!==i&&(S[r]|=(g[r+1]|g[r])<<1|1|g[r+1]),S[r]&y&&(m=bitapScore(e,{errors:i,currentLocation:a,expectedLocation:u,distance:n}))<=f){if(f=m,(d=a)<=u)break;o=Math.max(1,2*u-d)}}if(bitapScore(e,{errors:i+1,currentLocation:u,expectedLocation:u,distance:n})>f)break;g=S}let M={isMatch:d>=0,score:m||.001};return o&&(M.matchedIndices=matchedIndiced(p,c)),M}function patternAlphabet(t){let e={},s=t.length;for(let i=0;i<s;i+=1)e[t.charAt(i)]=0;for(let i=0;i<s;i+=1)e[t.charAt(i)]|=1<<s-i-1;return e}const MAX_BITS=32;class BitapSearch{constructor(t,{location:e=0,distance:s=100,threshold:i=.6,isCaseSensitive:n=!1,findAllMatches:r=!1,minMatchCharLength:a=1,includeMatches:c=!1}){if(this.options={location:e,distance:s,threshold:i,isCaseSensitive:n,findAllMatches:r,includeMatches:c,minMatchCharLength:a},t.length>MAX_BITS)throw new Error(`Pattern length exceeds max of ${MAX_BITS}.`);this.pattern=n?t:t.toLowerCase(),this.patternAlphabet=patternAlphabet(this.pattern)}searchIn(t){let e=t.$;return this.searchInString(e)}searchInString(t){const{isCaseSensitive:e,includeMatches:s}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return s&&(e.matchedIndices=[[0,t.length-1]]),e}const{location:i,distance:n,threshold:r,findAllMatches:a,minMatchCharLength:c}=this.options;return bitapSearch(t,this.pattern,this.patternAlphabet,{location:i,distance:n,threshold:r,findAllMatches:a,minMatchCharLength:c,includeMatches:s})}}const isForPattern=t=>"'"==t.charAt(0),sanitize=t=>t.substr(1),match=(t,e)=>{const s=sanitize(t);return{isMatch:e.indexOf(s)>-1,score:0}};var exactMatch={isForPattern:isForPattern,sanitize:sanitize,match:match};const isForPattern$1=t=>"!"==t.charAt(0),sanitize$1=t=>t.substr(1),match$1=(t,e)=>{const s=sanitize$1(t);return{isMatch:-1===e.indexOf(s),score:0}};var inverseExactMatch={isForPattern:isForPattern$1,sanitize:sanitize$1,match:match$1};const isForPattern$2=t=>"^"==t.charAt(0),sanitize$2=t=>t.substr(1),match$2=(t,e)=>{const s=sanitize$2(t);return{isMatch:e.startsWith(s),score:0}};var prefixExactMatch={isForPattern:isForPattern$2,sanitize:sanitize$2,match:match$2};const isForPattern$3=t=>"!"==t.charAt(0)&&"^"==t.charAt(1),sanitize$3=t=>t.substr(2),match$3=(t,e)=>{const s=sanitize$3(t);return{isMatch:!e.startsWith(s),score:0}};var inversePrefixExactMatch={isForPattern:isForPattern$3,sanitize:sanitize$3,match:match$3};const isForPattern$4=t=>"$"==t.charAt(t.length-1),sanitize$4=t=>t.substr(0,t.length-1),match$4=(t,e)=>{const s=sanitize$4(t);return{isMatch:e.endsWith(s),score:0}};var suffixExactMatch={isForPattern:isForPattern$4,sanitize:sanitize$4,match:match$4};const isForPattern$5=t=>"!"==t.charAt(0)&&"$"==t.charAt(t.length-1),sanitize$5=t=>t.substring(1,t.length-1),match$5=(t,e)=>{const s=sanitize$5(t);return{isMatch:!e.endsWith(s),score:0}};var inverseSuffixExactMatch={isForPattern:isForPattern$5,sanitize:sanitize$5,match:match$5};const INFINITY=1/0,isArray=t=>Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t),baseToString=t=>{if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e},toString=t=>null==t?"":baseToString(t),isString=t=>"string"==typeof t,isNumber=t=>"number"==typeof t,isDefined=t=>null!=t,queryfy=t=>t.split("|").map(t=>t.trim().split(/ +/g));class ExtendedSearch{constructor(t,e){const{isCaseSensitive:s}=e;this.query=null,this.options=e,this._fuzzyCache={},isString(t)&&t.trim().length>0&&(this.pattern=s?t:t.toLowerCase(),this.query=queryfy(this.pattern))}searchIn(t){const e=this.query;if(!this.query)return{isMatch:!1,score:1};let s=t.$;s=this.options.isCaseSensitive?s:s.toLowerCase();let i=!1;for(let t=0,n=e.length;t<n;t+=1){const n=e[t];let r=null;i=!0;for(let t=0,e=n.length;t<e;t+=1){let e=n[t];if(!(r=this._search(e,s)).isMatch){i=!1;break}}if(i)return r}return{isMatch:!1,score:1}}_search(t,e){if(exactMatch.isForPattern(t))return exactMatch.match(t,e);if(prefixExactMatch.isForPattern(t))return prefixExactMatch.match(t,e);if(inversePrefixExactMatch.isForPattern(t))return inversePrefixExactMatch.match(t,e);if(inverseSuffixExactMatch.isForPattern(t))return inverseSuffixExactMatch.match(t,e);if(suffixExactMatch.isForPattern(t))return suffixExactMatch.match(t,e);if(inverseExactMatch.isForPattern(t))return inverseExactMatch.match(t,e);{let s=this._fuzzyCache[t];return s||(s=new BitapSearch(t,this.options),this._fuzzyCache[t]=s),s.searchInString(e)}}}const NGRAM_LEN=3;function ngram(t,{n:e=NGRAM_LEN,pad:s=!0,sort:i=!1}){let n=[];if(null==t)return n;t=t.toLowerCase(),s&&(t=` ${t} `);let r=t.length-e+1;if(r<1)return n;for(;r--;)n[r]=t.substr(r,e);return i&&n.sort((t,e)=>t==e?0:t<e?-1:1),n}function union(t,e){let s=[],i=0,n=0;for(;i<t.length&&n<e.length;){let r=t[i],a=e[n];r<a?(s.push(r),i+=1):a<r?(s.push(a),n+=1):(s.push(a),i+=1,n+=1)}for(;i<t.length;)s.push(t[i]),i+=1;for(;n<e.length;)s.push(e[n]),n+=1;return s}function intersection(t,e){let s=[],i=0,n=0;for(;i<t.length&&n<e.length;){let r=t[i],a=e[n];r==a?(s.push(r),i+=1,n+=1):r<a?i+=1:r>a?n+=1:(i+=1,n+=1)}return s}function jaccardDistance(t,e){let s=union(t,e);return 1-intersection(t,e).length/s.length}class NGramSearch{constructor(t,e={threshold:.6}){this.options=e,this.patternNgram=ngram(t,{sort:!0})}searchIn(t){let e=t.ng;e||(e=ngram(t.$,{sort:!0}),t.ng=e);let s=jaccardDistance(this.patternNgram,e);const i=s<this.options.threshold;return{score:i?s:1,isMatch:i}}}function get(t,e){let s=[],i=!1;const n=(t,e)=>{if(e){const r=e.indexOf(".");let a=e,c=null;-1!==r&&(a=e.slice(0,r),c=e.slice(r+1));const o=t[a];if(isDefined(o))if(c||!isString(o)&&!isNumber(o))if(isArray(o)){i=!0;for(let t=0,e=o.length;t<e;t+=1)n(o[t],c)}else c&&n(o,c);else s.push(toString(o))}else s.push(t)};return n(t,e),i?s:s[0]}function createIndex(t,e,{getFn:s=get,ngrams:i=!1}={}){let n=[];if(isString(e[0]))for(let t=0,s=e.length;t<s;t+=1){const s=e[t];if(isDefined(s)){let e={$:s,idx:t};i&&(e.ng=ngram(s,{sort:!0})),n.push(e)}}else{const r=t.length;for(let a=0,c=e.length;a<c;a+=1){let c=e[a],o={idx:a,$:{}};for(let e=0;e<r;e+=1){let n=t[e],r=s(c,n);if(isDefined(r))if(isArray(r)){let t=[];const e=[{arrayIndex:-1,value:r}];for(;e.length;){const{arrayIndex:s,value:n}=e.pop();if(isDefined(n))if(isString(n)){let e={$:n,idx:s};i&&(e.ng=ngram(n,{sort:!0})),t.push(e)}else if(isArray(n))for(let t=0,s=n.length;t<s;t+=1)e.push({arrayIndex:t,value:n[t]})}o.$[n]=t}else{let t={$:r};i&&(t.ng=ngram(r,{sort:!0})),o.$[n]=t}}n.push(o)}}return n}class KeyStore{constructor(t){if(this._keys={},this._keyNames=[],this._length=t.length,t.length&&isString(t[0]))for(let e=0;e<this._length;e+=1){const s=t[e];this._keys[s]={weight:1},this._keyNames.push(s)}else{let e=0;for(let s=0;s<this._length;s+=1){const i=t[s];if(!Object.prototype.hasOwnProperty.call(i,"name"))throw new Error('Missing "name" property in key object');const n=i.name;if(this._keyNames.push(n),!Object.prototype.hasOwnProperty.call(i,"weight"))throw new Error('Missing "weight" property in key object');const r=i.weight;if(r<=0||r>=1)throw new Error('"weight" property in key must be in the range of (0, 1)');this._keys[n]={weight:r},e+=r}for(let t=0;t<this._length;t+=1){const s=this._keyNames[t],i=this._keys[s].weight;this._keys[s].weight=i/e}}}get(t,e){return this._keys[t]?this._keys[t][e]:-1}keys(){return this._keyNames}count(){return this._length}toJSON(){return JSON.stringify(this._keys)}}function transformMatches(t,e){const s=t.matches;if(e.matches=[],isDefined(s))for(let t=0,i=s.length;t<i;t+=1){let i=s[t];if(!isDefined(i.indices)||0===i.indices.length)continue;let n={indices:i.indices,value:i.value};i.key&&(n.key=i.key),i.idx>-1&&(n.refIndex=i.idx),e.matches.push(n)}}function transformScore(t,e){e.score=t.score}const BasicOptions={isCaseSensitive:!1,findAllMatches:!1,includeMatches:!1,includeScore:!1,keys:[],minMatchCharLength:1,shouldSort:!0,sortFn:(t,e)=>t.score-e.score},FuzzyOptions={location:0,threshold:.6,distance:100},AdvancedOptions={useExtendedSearch:!1,getFn:get},defaultOptions={...BasicOptions,...FuzzyOptions,...AdvancedOptions};class Fuse{constructor(t,e=defaultOptions,s=null){this.options={...defaultOptions,...e},this.options.isCaseSensitive=e.caseSensitive,delete this.options.caseSensitive,this._processKeys(this.options.keys),this.setCollection(t,s)}setCollection(t,e=null){this.list=t,this.listIsStringArray=isString(t[0]),e?this.setIndex(e):this.setIndex(this._createIndex())}setIndex(t){this._indexedList=t}_processKeys(t){this._keyStore=new KeyStore(t)}_createIndex(){return createIndex(this._keyStore.keys(),this.list,{getFn:this.options.getFn})}search(t,e={limit:!1}){const{useExtendedSearch:s,shouldSort:i}=this.options;let n=null;n=s?new ExtendedSearch(t,this.options):t.length>MAX_BITS?new NGramSearch(t,this.options):new BitapSearch(t,this.options);let r=this._searchUsing(n);return this._computeScore(r),i&&this._sort(r),e.limit&&isNumber(e.limit)&&(r=r.slice(0,e.limit)),this._format(r)}_searchUsing(t){const e=this._indexedList,s=[],{includeMatches:i}=this.options;if(this.listIsStringArray)for(let n=0,r=e.length;n<r;n+=1){let r=e[n],{$:a,idx:c}=r;if(!isDefined(a))continue;let o=t.searchIn(r);const{isMatch:h,score:l}=o;if(!h)continue;let u={score:l,value:a};i&&(u.indices=o.matchedIndices),s.push({item:a,idx:c,matches:[u]})}else{const n=this._keyStore.keys(),r=this._keyStore.count();for(let a=0,c=e.length;a<c;a+=1){let{$:c,idx:o}=e[a];if(!isDefined(c))continue;let h=[];for(let e=0;e<r;e+=1){let s=n[e],r=c[s];if(isDefined(r))if(isArray(r))for(let e=0,n=r.length;e<n;e+=1){let n=r[e],a=n.$,c=n.idx;if(!isDefined(a))continue;let o=t.searchIn(n);const{isMatch:l,score:u}=o;if(!l)continue;let f={score:u,key:s,value:a,idx:c};i&&(f.indices=o.matchedIndices),h.push(f)}else{let e=r.$,n=t.searchIn(r);const{isMatch:a,score:c}=n;if(!a)continue;let o={score:c,key:s,value:e};i&&(o.indices=n.matchedIndices),h.push(o)}}h.length&&s.push({idx:o,item:c,matches:h})}}return s}_computeScore(t){for(let e=0,s=t.length;e<s;e+=1){const s=t[e],i=s.matches,n=i.length;let r=1;for(let t=0;t<n;t+=1){const e=i[t],s=e.key,n=this._keyStore.get(s,"weight"),a=n>-1?n:1,c=0===e.score&&n>-1?Number.EPSILON:e.score;r*=Math.pow(c,a)}s.score=r}}_sort(t){t.sort(this.options.sortFn)}_format(t){const e=[],{includeMatches:s,includeScore:i}=this.options;let n=[];s&&n.push(transformMatches),i&&n.push(transformScore);for(let s=0,i=t.length;s<i;s+=1){const i=t[s],{idx:r}=i,a={item:this.list[r],refIndex:r};if(n.length)for(let t=0,e=n.length;t<e;t+=1)n[t](i,a);e.push(a)}return e}}Fuse.version="5.1.0",Fuse.createIndex=createIndex,Fuse.defaultOptions=defaultOptions;export default Fuse;