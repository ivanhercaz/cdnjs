"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dictionary_1=require("./dictionary"),regex_1=require("./regex"),transform_1=require("./transform"),utils_1=require("./utils"),list=function(s){if(!regex_1.finalRegex.test(s))return[];regex_1.finalRegex.lastIndex=0;for(var t=[],r=null,e=function(){var e=r.index,n=e+r[0].length,i=r[0];return-1<dictionary_1.closingParenthesis.indexOf(s.charAt(n))&&dictionary_1.parenthesis.forEach(function(e){var t=e.charAt(0),r=e.charAt(1);utils_1.checkParenthesis(t,r,i,s.charAt(n))&&(i+=s.charAt(n),n++)}),("'"===s.charAt(e-1)||'"'===s.charAt(e-1))&&utils_1.isInsideAttribute(s.charAt(e-1),s.substring(e-utils_1.maximumAttrLength-5,e))||-1<s.substring(n,s.length).indexOf("</a>")&&-1<s.substring(0,e).indexOf("<a")&&utils_1.isInsideAnchorTag(i,s,n)?"continue":void t.push({start:e,end:n,string:i})};null!==(r=regex_1.finalRegex.exec(s));)e();return t},anchorme=function(e){var t="string"==typeof e?{input:e,options:void 0,extensions:void 0}:e,r=t.input,n=t.options,i=t.extensions;if(i)for(var s=0;s<i.length;s++){var a=i[s];r=r.replace(a.test,a.transform)}var u=list(r),o="";for(s=0;s<u.length;s++)o=(o||(0===s?r.substring(0,u[s].start):""))+transform_1.transform(u[s].string,n)+(u[s+1]?r.substring(u[s].end,u[s+1].start):r.substring(u[s].end));return o||r};anchorme.list=function(e){return list(e)},anchorme.validate={ip:function(e){return regex_1.ipRegex.test(e)},email:function(e){return regex_1.emailRegex.test(e)},file:function(e){return regex_1.fileRegex.test(e)},url:function(e){return regex_1.urlRegex.test(e)||regex_1.ipRegex.test(e)}},exports.default=anchorme;