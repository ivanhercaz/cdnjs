"use strict";exports.__esModule=!0,exports.getGlobal=getGlobal,exports.deleteGlobal=deleteGlobal,exports.globalStore=globalStore,exports.getWildcard=getWildcard,exports.windowStore=windowStore,exports.WildCard=void 0;var _src=require("cross-domain-safe-weakmap/src"),_src2=require("belter/src");function getGlobal(e=window){if(e!==window)return e[__POST_ROBOT__.__GLOBAL_KEY__];return e[__POST_ROBOT__.__GLOBAL_KEY__]=e[__POST_ROBOT__.__GLOBAL_KEY__]||{}}function deleteGlobal(){delete window[__POST_ROBOT__.__GLOBAL_KEY__]}const getObj=()=>({});function globalStore(e="store",t=getObj){return(0,_src2.getOrSet)(getGlobal(),e,()=>{let e=t();return{has:t=>e.hasOwnProperty(t),get:(t,r)=>e.hasOwnProperty(t)?e[t]:r,set:(t,r)=>(e[t]=r,r),del:t=>{delete e[t]},getOrSet:(t,r)=>(0,_src2.getOrSet)(e,t,r),reset:()=>{e=t()},keys:()=>Object.keys(e)}})}class WildCard{}function getWildcard(){const e=getGlobal();return e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new WildCard,e.WINDOW_WILDCARD}function windowStore(e="store",t=getObj){return globalStore("windowStore").getOrSet(e,()=>{const r=new _src.WeakMap,o=e=>r.getOrSet(e,t);return{has:t=>{return o(t).hasOwnProperty(e)},get:(t,r)=>{const _=o(t);return _.hasOwnProperty(e)?_[e]:r},set:(t,r)=>{return o(t)[e]=r,r},del:t=>{delete o(t)[e]},getOrSet:(t,r)=>{const _=o(t);return(0,_src2.getOrSet)(_,e,r)}}})}exports.WildCard=WildCard;