!function(O){O.extend(!0,window,{Slick:{Plugins:{CellMenu:function(t){var h,w,b,k,m=-1,p=-1,f="",i=new Slick.EventHandler,g=this,o={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!0,maxHeight:"none",width:"auto"};function l(e){var t=w.getCellFromEvent(e);m=t&&t.cell,p=t&&t.row;var i=w.getColumns()[m],o=w.getDataItem(p),n=h.commandItems||[],l=h.optionItems||[];if(i&&i.cellMenu&&(n.length||!l.length)&&(C(),0!=g.onBeforeMenuShow.notify({cell:m,row:p,grid:w},e,g))){var s,a,d=isNaN(h.maxHeight)?h.maxHeight:h.maxHeight+"px",c=isNaN(h.width)?h.width:h.width+"px",r=O('<div class="slick-cell-menu '+f+'" style="'+("width: "+c+"; max-height: "+d)+'" />').css("top",e.pageY+5).css("left",e.pageX).css("display","none"),u='<button type="button" class="close" data-dismiss="slick-cell-menu" aria-label="Close"><span class="close" aria-hidden="true">&times;</span></button>';if(!h.hideOptionSection&&0<l.length&&(s=O('<div class="slick-cell-menu-option-list" />'),h.hideCloseButton||O(u).on("click",C).appendTo(r),s.appendTo(r),function(e,t,i,o){if(!o||!i||!e)return;e&&e.optionTitle&&O('<div class="title"/>').append(e.optionTitle).appendTo(t);for(var n=0,l=i.length;n<l;n++){var s,a,d,c=i[n],r=S(c.itemVisibilityOverride,o),u=S(c.itemUsabilityOverride,o);r&&(Object.prototype.hasOwnProperty.call(c,"itemUsabilityOverride")&&(c.disabled=!u),s=O('<div class="slick-cell-menu-item"></div>').data("option",c.option||"").data("item",c).on("click",y).appendTo(t),c.divider||"divider"===c?s.addClass("slick-cell-menu-item-divider"):(!c.disabled&&u||s.addClass("slick-cell-menu-item-disabled"),c.cssClass&&s.addClass(c.cssClass),c.tooltip&&s.attr("title",c.tooltip),a=O('<div class="slick-cell-menu-icon"></div>').appendTo(s),c.iconCssClass&&a.addClass(c.iconCssClass),c.iconImage&&a.css("background-image","url("+c.iconImage+")"),d=O('<span class="slick-cell-menu-content"></span>').text(c.title).appendTo(s),c.textCssClass&&d.addClass(c.textCssClass)))}}(h,s,l,{cell:m,row:p,column:i,dataContext:o,grid:w})),!h.hideCommandSection&&0<n.length&&(a=O('<div class="slick-cell-menu-command-list" />'),h.hideCloseButton||0!==l.length&&!h.hideOptionSection||O(u).on("click",C).appendTo(r),a.appendTo(r),function(e,t,i,o){if(!o||!i||!e)return;e&&e.commandTitle&&O('<div class="title"/>').append(e.commandTitle).appendTo(t);for(var n=0,l=i.length;n<l;n++){var s,a,d,c=i[n],r=S(c.itemVisibilityOverride,o),u=S(c.itemUsabilityOverride,o);r&&(Object.prototype.hasOwnProperty.call(c,"itemUsabilityOverride")&&(c.disabled=!u),s=O('<div class="slick-cell-menu-item"></div>').data("command",c.command||"").data("item",c).on("click",v).appendTo(t),c.divider||"divider"===c?s.addClass("slick-cell-menu-item-divider"):(!c.disabled&&u||s.addClass("slick-cell-menu-item-disabled"),c.cssClass&&s.addClass(c.cssClass),c.tooltip&&s.attr("title",c.tooltip),a=O('<div class="slick-cell-menu-icon"></div>').appendTo(s),c.iconCssClass&&a.addClass(c.iconCssClass),c.iconImage&&a.css("background-image","url("+c.iconImage+")"),d=O('<span class="slick-cell-menu-content"></span>').text(c.title).appendTo(s),c.textCssClass&&d.addClass(c.textCssClass)))}}(h,a,n,{cell:m,row:p,column:i,dataContext:o,grid:w})),r.show(),r.appendTo("body"),0!=g.onAfterMenuShow.notify({cell:m,row:p,grid:w},e,g))return r}}function C(e,t){if((k=k||O(".slick-cell-menu."+f))&&k.remove){if(0<k.length&&0==g.onBeforeMenuClose.notify({cell:t&&t.cell,row:t&&t.row,grid:w,menu:k},e,g))return;k.remove(),k=null}}function s(e){var t,i,o,n,l,s,a,d,c=O(e.target).closest(".slick-cell"),r=c?c.offset().left:e.pageX,u=c?c.offset().top:e.pageY,m=c.outerWidth(),p=k.outerHeight()||0,f=k.outerWidth()||h.width||0,g=b.rowHeight,C=h.autoAdjustDropOffset,v=h.autoAlignSideOffset;h.autoAdjustDrop&&(s=c,a=O(window).innerHeight()||0,d=O(window).scrollTop()||0,t=s&&s.offset&&0<s.length?a-(s.offset().top-d):0,n=c,l=O(window).scrollTop()||0,i=n&&n.offset&&0<n.length?n.offset().top-l:0,u="top"==((o=t+C-g)<p&&o<i-C+g?"top":"bottom")?(k.removeClass("dropdown").addClass("dropup"),u-p-C):(k.removeClass("dropup").addClass("dropdown"),u+g+C)),h.autoAlignSide&&("left"==(r+f>=w.getGridPosition().width?"left":"right")?(k.removeClass("dropright").addClass("dropleft"),r=r-(f-m)-v):(k.removeClass("dropleft").addClass("dropright"),r+=v)),k.css("top",u),k.css("left",r)}function n(e,t){var i=w.getCellFromEvent(e),o=w.getDataItem(i.row),n=w.getColumns()[i.cell];n&&n.cellMenu&&e.preventDefault(),h=O.extend({},h,n.cellMenu),(t=t||{}).columnDef=n,t.dataContext=o,t.grid=w,S(h.menuUsabilityOverride,t)&&((k=l(e))&&(s(e),k.data("cell",m).data("row",p).show()),O("body").on("mousedown."+f,a))}function a(e){k&&k[0]!=e.target&&!O.contains(k[0],e.target)&&d(e,{cell:m,row:p})}function d(e,t){if(k&&0<k.length){if(0==g.onBeforeMenuClose.notify({cell:t&&t.cell,row:t&&t.row,grid:w,menu:k},e,g))return;k&&k.remove&&(k.remove(),k=null)}}function v(e){var t,i,o,n,l,s=O(this).data("command"),a=O(this).data("item");!a||a.disabled||a.divider||"divider"===a||(t=k.data("row"),i=k.data("cell"),o=w.getColumns()[i],n=w.getDataItem(t),null!==s&&""!==s&&(d(e,{cell:i,row:t}),l={cell:i,row:t,grid:w,command:s,item:a,column:o,dataContext:n},g.onCommand.notify(l,e,g),"function"==typeof a.action&&a.action.call(this,e,l)))}function y(e){var t,i,o,n,l,s=O(this).data("option"),a=O(this).data("item");!a||a.disabled||a.divider||"divider"===a||w.getEditorLock().commitCurrentEdit()&&(t=k.data("row"),i=k.data("cell"),o=w.getColumns()[i],n=w.getDataItem(t),void 0!==s&&(d(e,{cell:i,row:t}),l={cell:i,row:t,grid:w,option:s,item:a,column:o,dataContext:n},g.onOptionSelected.notify(l,e,g),"function"==typeof a.action&&a.action.call(this,e,l)))}function S(e,t){return"function"!=typeof e||e.call(this,t)}O.extend(this,{init:function(e){b=(w=e).getOptions(),h=O.extend({},o,t),f=e&&e.getUID?e.getUID():"",i.subscribe(w.onClick,n),h.hideMenuOnScroll&&i.subscribe(w.onScroll,C)},closeMenu:C,destroy:function(){g.onAfterMenuShow.unsubscribe(),g.onBeforeMenuShow.unsubscribe(),g.onBeforeMenuClose.unsubscribe(),g.onCommand.unsubscribe(),g.onOptionSelected.unsubscribe(),i.unsubscribeAll(),k&&k.remove&&k.remove()},pluginName:"CellMenu",setOptions:function(e){h=O.extend({},h,e)},onAfterMenuShow:new Slick.Event,onBeforeMenuShow:new Slick.Event,onBeforeMenuClose:new Slick.Event,onCommand:new Slick.Event,onOptionSelected:new Slick.Event})}}}})}(jQuery);