!function(O){O.extend(!0,window,{Slick:{Plugins:{CellMenu:function(t){var h,w,b,k,m=-1,p=-1,f="",i=new Slick.EventHandler,v=this,o={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!0,maxHeight:"none",width:"auto"};function l(e){var t=w.getCellFromEvent(e);m=t&&t.cell,p=t&&t.row;var i=w.getColumns()[m],o=w.getDataItem(p),n=h.commandItems||[],l=h.optionItems||[];if(i&&i.cellMenu&&(n.length||!l.length)&&(g(),0!=v.onBeforeMenuShow.notify({cell:m,row:p,grid:w},e,v))){var s=isNaN(h.maxHeight)?h.maxHeight:h.maxHeight+"px",a=isNaN(h.width)?h.width:h.width+"px",d=O('<div class="slick-cell-menu '+f+'" style="'+("width: "+a+"; max-height: "+s)+'" />').css("top",e.pageY+5).css("left",e.pageX).css("display","none"),c='<button type="button" class="close" data-dismiss="slick-cell-menu" aria-label="Close"><span class="close" aria-hidden="true">&times;</span></button>';if(!h.hideOptionSection&&0<l.length){var r=O('<div class="slick-cell-menu-option-list" />');h.hideCloseButton||O(c).on("click",g).appendTo(d),r.appendTo(d),function(e,t,i,o){if(!o||!i||!e)return;e&&e.optionTitle&&O('<div class="title"/>').append(e.optionTitle).appendTo(t);for(var n=0,l=i.length;n<l;n++){var s=i[n],a=S(s.itemVisibilityOverride,o),d=S(s.itemUsabilityOverride,o);if(a){Object.prototype.hasOwnProperty.call(s,"itemUsabilityOverride")&&(s.disabled=!d);var c=O('<div class="slick-cell-menu-item"></div>').data("option",s.option||"").data("item",s).on("click",y).appendTo(t);if(s.divider||"divider"===s)c.addClass("slick-cell-menu-item-divider");else{!s.disabled&&d||c.addClass("slick-cell-menu-item-disabled"),s.cssClass&&c.addClass(s.cssClass),s.tooltip&&c.attr("title",s.tooltip);var r=O('<div class="slick-cell-menu-icon"></div>').appendTo(c);s.iconCssClass&&r.addClass(s.iconCssClass),s.iconImage&&r.css("background-image","url("+s.iconImage+")");var u=O('<span class="slick-cell-menu-content"></span>').text(s.title).appendTo(c);s.textCssClass&&u.addClass(s.textCssClass)}}}}(h,r,l,{cell:m,row:p,column:i,dataContext:o,grid:w})}if(!h.hideCommandSection&&0<n.length){var u=O('<div class="slick-cell-menu-command-list" />');h.hideCloseButton||0!==l.length&&!h.hideOptionSection||O(c).on("click",g).appendTo(d),u.appendTo(d),function(e,t,i,o){if(!o||!i||!e)return;e&&e.commandTitle&&O('<div class="title"/>').append(e.commandTitle).appendTo(t);for(var n=0,l=i.length;n<l;n++){var s=i[n],a=S(s.itemVisibilityOverride,o),d=S(s.itemUsabilityOverride,o);if(a){Object.prototype.hasOwnProperty.call(s,"itemUsabilityOverride")&&(s.disabled=!d);var c=O('<div class="slick-cell-menu-item"></div>').data("command",s.command||"").data("item",s).on("click",C).appendTo(t);if(s.divider||"divider"===s)c.addClass("slick-cell-menu-item-divider");else{!s.disabled&&d||c.addClass("slick-cell-menu-item-disabled"),s.cssClass&&c.addClass(s.cssClass),s.tooltip&&c.attr("title",s.tooltip);var r=O('<div class="slick-cell-menu-icon"></div>').appendTo(c);s.iconCssClass&&r.addClass(s.iconCssClass),s.iconImage&&r.css("background-image","url("+s.iconImage+")");var u=O('<span class="slick-cell-menu-content"></span>').text(s.title).appendTo(c);s.textCssClass&&u.addClass(s.textCssClass)}}}}(h,u,n,{cell:m,row:p,column:i,dataContext:o,grid:w})}if(d.show(),d.appendTo("body"),0!=v.onAfterMenuShow.notify({cell:m,row:p,grid:w},e,v))return d}}function g(e,t){if((k=k||O(".slick-cell-menu."+f))&&k.remove){if(0<k.length&&0==v.onBeforeMenuClose.notify({cell:t&&t.cell,row:t&&t.row,grid:w,menu:k},e,v))return;k.remove(),k=null}}function s(e){var t,i,o,n,l,s=O(e.target).closest(".slick-cell"),a=s?s.offset().left:e.pageX,d=s?s.offset().top:e.pageY,c=s.outerWidth(),r=k.outerHeight()||0,u=k.outerWidth()||h.width||0,m=b.rowHeight,p=h.autoAdjustDropOffset,f=h.autoAlignSideOffset;if(h.autoAdjustDrop){var v=(o=s,n=O(window).innerHeight()||0,l=O(window).scrollTop()||0,o&&o.offset&&0<o.length?n-(o.offset().top-l):0),g=(t=s,i=O(window).scrollTop()||0,t&&t.offset&&0<t.length?t.offset().top-i:0),C=v+p-m;d="top"==(C<r&&C<g-p+m?"top":"bottom")?(k.removeClass("dropdown").addClass("dropup"),d-r-p):(k.removeClass("dropup").addClass("dropdown"),d+m+p)}h.autoAlignSide&&("left"==(a+u>=w.getGridPosition().width?"left":"right")?(k.removeClass("dropright").addClass("dropleft"),a=a-(u-c)-f):(k.removeClass("dropleft").addClass("dropright"),a+=f));k.css("top",d),k.css("left",a)}function n(e,t){e.preventDefault();var i=w.getCellFromEvent(e),o=w.getDataItem(i.row),n=w.getColumns()[i.cell];h=O.extend({},h,n.cellMenu),(t=t||{}).columnDef=n,t.dataContext=o,t.grid=w,S(h.menuUsabilityOverride,t)&&((k=l(e))&&(s(e),k.data("cell",m).data("row",p).show()),O("body").on("mousedown."+f,a))}function a(e){k&&k[0]!=e.target&&!O.contains(k[0],e.target)&&d(e,{cell:m,row:p})}function d(e,t){if(k&&0<k.length){if(0==v.onBeforeMenuClose.notify({cell:t&&t.cell,row:t&&t.row,grid:w,menu:k},e,v))return;k&&k.remove&&(k.remove(),k=null)}}function C(e){var t=O(this).data("command"),i=O(this).data("item");if(i&&!i.disabled&&!i.divider&&"divider"!==i){var o=k.data("row"),n=k.data("cell"),l=w.getColumns()[n],s=w.getDataItem(o);if(null!==t&&""!==t){d(e,{cell:n,row:o});var a={cell:n,row:o,grid:w,command:t,item:i,column:l,dataContext:s};v.onCommand.notify(a,e,v),"function"==typeof i.action&&i.action.call(this,e,a)}}}function y(e){var t=O(this).data("option"),i=O(this).data("item");if(i&&!i.disabled&&!i.divider&&"divider"!==i&&w.getEditorLock().commitCurrentEdit()){var o=k.data("row"),n=k.data("cell"),l=w.getColumns()[n],s=w.getDataItem(o);if(void 0!==t){d(e,{cell:n,row:o});var a={cell:n,row:o,grid:w,option:t,item:i,column:l,dataContext:s};v.onOptionSelected.notify(a,e,v),"function"==typeof i.action&&i.action.call(this,e,a)}}}function S(e,t){return"function"!=typeof e||e.call(this,t)}O.extend(this,{init:function(e){b=(w=e).getOptions(),h=O.extend({},o,t),f=e&&e.getUID?e.getUID():"",i.subscribe(w.onClick,n),h.hideMenuOnScroll&&i.subscribe(w.onScroll,g)},closeMenu:g,destroy:function(){v.onAfterMenuShow.unsubscribe(),v.onBeforeMenuShow.unsubscribe(),v.onBeforeMenuClose.unsubscribe(),v.onCommand.unsubscribe(),v.onOptionSelected.unsubscribe(),i.unsubscribeAll(),k&&k.remove&&k.remove()},pluginName:"CellMenu",setOptions:function(e){h=O.extend({},h,e)},onAfterMenuShow:new Slick.Event,onBeforeMenuShow:new Slick.Event,onBeforeMenuClose:new Slick.Event,onCommand:new Slick.Event,onOptionSelected:new Slick.Event})}}}})}(jQuery);