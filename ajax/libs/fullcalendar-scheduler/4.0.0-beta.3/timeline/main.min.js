!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@fullcalendar/core")):"function"==typeof define&&define.amd?define(["exports","@fullcalendar/core"],t):t((e=e||self).FullCalendarTimeline={},e.FullCalendar)}(this,function(e,b){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function t(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var r=function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=(o.prototype.setGutters=function(e){e?r(this.gutters,e):this.gutters={},this.updateSize()},o.prototype.setWidth=function(e){this.width=e,this.updateSize()},o.prototype.setMinWidth=function(e){this.minWidth=e,this.updateSize()},o.prototype.clearWidth=function(){this.width=null,this.minWidth=null,this.updateSize()},o.prototype.updateSize=function(){var e=this.gutters,t=this.el;b.forceClassName(t,"fc-gutter-left",e.left),b.forceClassName(t,"fc-gutter-right",e.right),b.forceClassName(t,"fc-gutter-top",e.top),b.forceClassName(t,"fc-gutter-bottom",e.bottom),b.applyStyle(t,{paddingLeft:e.left||"",paddingRight:e.right||"",paddingTop:e.top||"",paddingBottom:e.bottom||"",width:null!=this.width?this.width+(e.left||0)+(e.right||0):"",minWidth:null!=this.minWidth?this.minWidth+(e.left||0)+(e.right||0):""}),b.applyStyle(this.bgEl,{left:e.left||"",right:e.right||"",top:e.top||"",bottom:e.bottom||""})},o);function o(){this.gutters={},this.el=b.htmlToElement('<div class="fc-scroller-canvas"> <div class="fc-content"></div> <div class="fc-bg"></div> </div>'),this.contentEl=this.el.querySelector(".fc-content"),this.bgEl=this.el.querySelector(".fc-bg")}var s,l,a=(t(c,s=b.ScrollComponent),c.prototype.destroy=function(){s.prototype.destroy.call(this),this.unbindHandlers()},c.prototype.disableTouchScroll=function(){this.isTouchScrollEnabled=!1,this.bindPreventTouchScroll()},c.prototype.enableTouchScroll=function(){this.isTouchScrollEnabled=!0,this.isTouching||this.unbindPreventTouchScroll()},c.prototype.bindPreventTouchScroll=function(){this.preventTouchScrollHandler||this.el.addEventListener("touchmove",this.preventTouchScrollHandler=b.preventDefault)},c.prototype.unbindPreventTouchScroll=function(){this.preventTouchScrollHandler&&(this.el.removeEventListener("touchmove",this.preventTouchScrollHandler),this.preventTouchScrollHandler=null)},c.prototype.bindHandlers=function(){this.el.addEventListener("scroll",this.reportScroll),this.el.addEventListener("touchstart",this.reportTouchStart,{passive:!0}),this.el.addEventListener("touchend",this.reportTouchEnd)},c.prototype.unbindHandlers=function(){this.el.removeEventListener("scroll",this.reportScroll),this.el.removeEventListener("touchstart",this.reportTouchStart,{passive:!0}),this.el.removeEventListener("touchend",this.reportTouchEnd)},c.prototype.reportMovingEnd=function(){this.isMoving=!1,this.isTouching||this.reportScrollEnd()},c.prototype.reportScrollEnd=function(){this.isScrolling&&(this.trigger("scrollEnd"),this.isScrolling=!1)},c.prototype.getScrollLeft=function(){var e=this.el,t=window.getComputedStyle(e).direction,r=e.scrollLeft;if("rtl"===t)switch(d()){case"positive":r=r+e.clientWidth-e.scrollWidth;break;case"reverse":r=-r}return r},c.prototype.setScrollLeft=function(e){var t=this.el;if("rtl"===window.getComputedStyle(t).direction)switch(d()){case"positive":e=e-t.clientWidth+t.scrollWidth;break;case"reverse":e=-e}t.scrollLeft=e},c.prototype.getScrollFromLeft=function(){var e=this.el,t=window.getComputedStyle(e).direction,r=e.scrollLeft;if("rtl"===t)switch(d()){case"negative":r=r-e.clientWidth+e.scrollWidth;break;case"reverse":r=-r-e.clientWidth+e.scrollWidth}return r},c);function c(e,t){var r=s.call(this,e,t)||this;return r.reportScroll=function(){r.isScrolling||r.reportScrollStart(),r.trigger("scroll"),r.isMoving=!0,r.requestMovingEnd()},r.reportScrollStart=function(){r.isScrolling||(r.isScrolling=!0,r.trigger("scrollStart",r.isTouching))},r.reportTouchStart=function(){r.isTouching=!0,r.isTouchedEver=!0},r.reportTouchEnd=function(){r.isTouching&&(r.isTouching=!1,r.isTouchScrollEnabled&&r.unbindPreventTouchScroll(),r.isMoving||r.reportScrollEnd())},r.isScrolling=!1,r.isTouching=!1,r.isTouchedEver=!1,r.isMoving=!1,r.isTouchScrollEnabled=!0,r.requestMovingEnd=b.debounce(r.reportMovingEnd,500),r.canvas=new i,r.el.appendChild(r.canvas.el),r.applyOverflow(),r.bindHandlers(),r}function d(){return l=l||function(){var e,t=b.htmlToElement('<div style=" position: absolute; top: -1000px; width: 1px; height: 1px; overflow: scroll; direction: rtl; font-size: 100px; ">A</div>');document.body.appendChild(t),e=0<t.scrollLeft?"positive":(t.scrollLeft=1,0<t.scrollLeft?"reverse":"negative");return b.removeElement(t),e}()}b.EmitterMixin.mixInto(a);var h=(u.prototype.destroy=function(){b.removeElement(this.el)},u.prototype.updateSize=function(){var e=this.enhancedScroll,t=e.el,r=b.computeEdges(t),n={marginLeft:0,marginRight:0,marginTop:0,marginBottom:0};this.isVScrollbarsClipped&&(n.marginLeft=-r.scrollbarLeft,n.marginRight=-r.scrollbarRight),this.isHScrollbarsClipped&&(n.marginBottom=-r.scrollbarBottom),b.applyStyle(t,n),!this.isHScrollbarsClipped&&"hidden"!==e.overflowX||!this.isVScrollbarsClipped&&"hidden"!==e.overflowY||r.scrollbarLeft||r.scrollbarRight||r.scrollbarBottom?t.classList.remove("fc-no-scrollbars"):t.classList.add("fc-no-scrollbars")},u.prototype.setHeight=function(e){this.enhancedScroll.setHeight(e)},u.prototype.getScrollbarWidths=function(){var e=this.enhancedScroll.getScrollbarWidths();return this.isVScrollbarsClipped&&(e.left=0,e.right=0),this.isHScrollbarsClipped&&(e.bottom=0),e},u);function u(e,t,r){this.isHScrollbarsClipped=!1,this.isVScrollbarsClipped=!1,"clipped-scroll"===e&&(e="scroll",this.isHScrollbarsClipped=!0),"clipped-scroll"===t&&(t="scroll",this.isVScrollbarsClipped=!0),this.enhancedScroll=new a(e,t),r.appendChild(this.el=b.createElement("div",{className:"fc-scroller-clip"})),this.el.appendChild(this.enhancedScroll.el)}var p=(f.prototype.initScroller=function(n){function t(){i.assignMasterScroller(n)}var i=this,o=n.enhancedScroll;"wheel mousewheel DomMouseScroll MozMousePixelScroll".split(" ").forEach(function(e){o.el.addEventListener(e,t)}),o.on("scrollStart",function(){i.masterScroller||i.assignMasterScroller(n)}).on("scroll",function(){if(n===i.masterScroller)for(var e=0,t=i.scrollers;e<t.length;e++){var r=t[e];if(r!==n)switch(i.axis){case"horizontal":r.enhancedScroll.el.scrollLeft=o.el.scrollLeft;break;case"vertical":r.enhancedScroll.setScrollTop(o.getScrollTop())}}}).on("scrollEnd",function(){n===i.masterScroller&&i.unassignMasterScroller()})},f.prototype.assignMasterScroller=function(e){this.unassignMasterScroller(),this.masterScroller=e;for(var t=0,r=this.scrollers;t<r.length;t++){var n=r[t];n!==e&&n.enhancedScroll.disableTouchScroll()}},f.prototype.unassignMasterScroller=function(){if(this.masterScroller){for(var e=0,t=this.scrollers;e<t.length;e++)t[e].enhancedScroll.enableTouchScroll();this.masterScroller=null}},f.prototype.update=function(){for(var e,t,r=this.scrollers.map(function(e){return e.getScrollbarWidths()}),n=0,i=0,o=0,s=0,l=0,a=r;l<a.length;l++)e=a[l],n=Math.max(n,e.left),i=Math.max(i,e.right),o=Math.max(o,e.top),s=Math.max(s,e.bottom);for(t=0;t<this.scrollers.length;t++){var c=this.scrollers[t];e=r[t],c.enhancedScroll.canvas.setGutters("horizontal"===this.axis?{left:n-e.left,right:i-e.right}:{top:o-e.top,bottom:s-e.bottom})}},f);function f(e,t){this.axis=e,this.scrollers=t;for(var r=0,n=this.scrollers;r<n.length;r++){var i=n[r];this.initScroller(i)}}var v=(m.prototype.destroy=function(){this.headerScroller.destroy(),this.bodyScroller.destroy()},m.prototype.setHeight=function(e,t){var r;r=t?"auto":e-this.queryHeadHeight(),this.bodyScroller.setHeight(r),this.headerScroller.updateSize(),this.bodyScroller.updateSize(),this.scrollJoiner.update()},m.prototype.queryHeadHeight=function(){return this.headerScroller.enhancedScroll.canvas.contentEl.offsetHeight},m);function m(e,t,r){this.headerScroller=new h("clipped-scroll","hidden",e),this.bodyScroller=new h("auto",r,t),this.scrollJoiner=new p("horizontal",[this.headerScroller,this.bodyScroller])}var g,S=(t(y,g=b.Component),y.prototype.destroy=function(){b.removeElement(this.tableEl),g.prototype.destroy.call(this)},y.prototype.render=function(e){this.renderDates(e.tDateProfile)},y.prototype.renderDates=function(e){for(var t=this.dateEnv,r=this.theme,n=e.cellRows,i=n[n.length-1],o=b.asRoughMs(e.labelInterval)>b.asRoughMs(e.slotDuration),s=b.isSingleDay(e.slotDuration),l="<colgroup>",a=0,c=i;a<c.length;a++)c[a],l+="<col/>";l+="</colgroup>",l+="<tbody>";for(var d=0,h=n;d<h.length;d++){var u=h[d];l+="<tr"+(o&&u===i?' class="fc-chrono"':"")+">";for(var p=0,f=u;p<f.length;p++){var v=f[p],m=[r.getClass("widgetHeader")];v.isWeekStart&&m.push("fc-em-cell"),s&&(m=m.concat(b.getDayClasses(v.date,this.props.dateProfile,this.context,!0))),l+='<th class="'+m.join(" ")+'" data-date="'+t.formatIso(v.date,{omitTime:!e.isTimeScale,omitTimeZoneOffset:!0})+'"'+(1<v.colspan?' colspan="'+v.colspan+'"':"")+'><div class="fc-cell-content">'+v.spanHtml+"</div></th>"}l+="</tr>"}l+="</tbody>",this.tableEl.innerHTML=l,this.slatColEls=b.findElements(this.tableEl,"col"),this.innerEls=b.findElements(this.tableEl.querySelector("tr:last-child"),"th .fc-cell-text")},y);function y(e,t){var r=g.call(this,e)||this;return t.appendChild(r.tableEl=b.createElement("table",{className:r.theme.getClass("tableGrid")})),r}var E,D=(t(w,E=b.Component),w.prototype.destroy=function(){b.removeElement(this.el),E.prototype.destroy.call(this)},w.prototype.render=function(e){this.renderDates(e.tDateProfile)},w.prototype.renderDates=function(e){for(var t=this.theme,r=e.slotDates,n=e.isWeekStarts,i='<table class="'+t.getClass("tableGrid")+'"><colgroup>',o=0;o<r.length;o++)i+="<col/>";for(i+="</colgroup>",i+="<tbody><tr>",o=0;o<r.length;o++)i+=this.slatCellHtml(r[o],n[o],e);i+="</tr></tbody></table>",this.el.innerHTML=i,this.slatColEls=b.findElements(this.el,"col"),this.slatEls=b.findElements(this.el,"td"),this.outerCoordCache=new b.PositionCache(this.el,this.slatEls,!0,!1),this.innerCoordCache=new b.PositionCache(this.el,b.findChildren(this.slatEls,"div"),!0,!1)},w.prototype.slatCellHtml=function(e,t,r){var n,i=this.theme,o=this.dateEnv;return r.isTimeScale?(n=[]).push(b.isInt(o.countDurationsBetween(r.normalizedRange.start,e,r.labelInterval))?"fc-major":"fc-minor"):(n=b.getDayClasses(e,this.props.dateProfile,this.context)).push("fc-day"),n.unshift(i.getClass("widgetContent")),t&&n.push("fc-em-cell"),'<td class="'+n.join(" ")+'" data-date="'+o.formatIso(e,{omitTime:!r.isTimeScale,omitTimeZoneOffset:!0})+'"><div></div></td>'},w.prototype.updateSize=function(){this.outerCoordCache.build(),this.innerCoordCache.build()},w.prototype.positionToHit=function(e){var t=this.outerCoordCache,r=this.props.tDateProfile,n=t.leftToIndex(e);if(null==n)return null;var i=t.getWidth(n),o=this.isRtl?(t.rights[n]-e)/i:(e-t.lefts[n])/i,s=Math.floor(o*r.snapsPerSlot),l=this.dateEnv.add(r.slotDates[n],b.multiplyDuration(r.snapDuration,s));return{dateSpan:{range:{start:l,end:this.dateEnv.add(l,r.snapDuration)},allDay:!this.props.tDateProfile.isTimeScale},dayEl:this.slatColEls[n],left:t.lefts[n],right:t.rights[n]}},w);function w(e,t){var r=E.call(this,e)||this;return t.appendChild(r.el=b.createElement("div",{className:"fc-slats"})),r}var C=18,T=6,R=200;b.config.MAX_TIMELINE_SLOTS=1e3;var x=[{years:1},{months:1},{days:1},{hours:1},{minutes:30},{minutes:15},{minutes:10},{minutes:5},{minutes:1},{seconds:30},{seconds:15},{seconds:10},{seconds:5},{seconds:1},{milliseconds:500},{milliseconds:100},{milliseconds:10},{milliseconds:1}];function I(e,t){var r=t.dateEnv,n={labelInterval:P(t,"slotLabelInterval"),slotDuration:P(t,"slotDuration")};!function(e,t,r){var n=t.currentRange;if(e.labelInterval){r.countDurationsBetween(n.start,n.end,e.labelInterval)>b.config.MAX_TIMELINE_SLOTS&&(console.warn("slotLabelInterval results in too many cells"),e.labelInterval=null)}if(e.slotDuration){r.countDurationsBetween(n.start,n.end,e.slotDuration)>b.config.MAX_TIMELINE_SLOTS&&(console.warn("slotDuration results in too many cells"),e.slotDuration=null)}if(e.labelInterval&&e.slotDuration){var i=b.wholeDivideDurations(e.labelInterval,e.slotDuration);(null===i||i<1)&&(console.warn("slotLabelInterval must be a multiple of slotDuration"),e.slotDuration=null)}}(n,e,r),H(n,e,r),function(e,t,r){var n=t.currentRange,i=e.slotDuration;if(!i){for(var o=H(e,t,r),s=0,l=x;s<l.length;s++){var a=l[s],c=b.createDuration(a),d=b.wholeDivideDurations(o,c);if(null!==d&&1<d&&d<=T){i=c;break}}if(i){var h=r.countDurationsBetween(n.start,n.end,i);R<h&&(i=null)}i=i||o,e.slotDuration=i}}(n,e,r);var i=t.opt("slotLabelFormat"),o=Array.isArray(i)?i:null!=i?[i]:function(e,t,r,n){var i,o,s=e.labelInterval,l=b.greatestDurationDenominator(s).unit,a=n.opt("weekNumbers"),c=i=o=null;"week"!==l||a||(l="day");switch(l){case"year":c={year:"numeric"};break;case"month":1<L("years",t,r)&&(c={year:"numeric"}),i={month:"short"};break;case"week":1<L("years",t,r)&&(c={year:"numeric"}),i={week:"narrow"};break;case"day":1<L("years",t,r)?c={year:"numeric",month:"long"}:1<L("months",t,r)&&(c={month:"long"}),a&&(i={week:"short"}),o={weekday:"narrow",day:"numeric"};break;case"hour":a&&(c={week:"short"}),1<L("days",t,r)&&(i={weekday:"short",day:"numeric",month:"numeric",omitCommas:!0}),o={hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"};break;case"minute":b.asRoughMinutes(s)/60>=T?(c={hour:"numeric",meridiem:"short"},i=function(e){return":"+b.padStart(e.date.minute,2)}):c={hour:"numeric",minute:"numeric",meridiem:"short"};break;case"second":b.asRoughSeconds(s)/60>=T?(c={hour:"numeric",minute:"2-digit",meridiem:"lowercase"},i=function(e){return":"+b.padStart(e.date.second,2)}):c={hour:"numeric",minute:"2-digit",second:"2-digit",meridiem:"lowercase"};break;case"millisecond":c={hour:"numeric",minute:"2-digit",second:"2-digit",meridiem:"lowercase"},i=function(e){return"."+b.padStart(e.millisecond,3)}}return[].concat(c||[],i||[],o||[])}(n,e,r,t);n.headerFormats=o.map(function(e){return b.createFormatter(e)}),n.isTimeScale=Boolean(n.slotDuration.milliseconds);var s=null;if(!n.isTimeScale){var l=b.greatestDurationDenominator(n.slotDuration).unit;/year|month|week/.test(l)&&(s=l)}n.largeUnit=s,n.emphasizeWeeks=b.isSingleDay(n.slotDuration)&&2<=L("weeks",e,r)&&!t.opt("businessHours");var a,c,d=t.opt("snapDuration");d&&(a=b.createDuration(d),c=b.wholeDivideDurations(n.slotDuration,a)),null==c&&(a=n.slotDuration,c=1),n.snapDuration=a,n.snapsPerSlot=c;var h=b.asRoughMs(e.maxTime)-b.asRoughMs(e.minTime),u=M(e.renderRange.start,n,r),p=M(e.renderRange.end,n,r);n.isTimeScale&&(u=r.add(u,e.minTime),p=r.add(b.addDays(p,-1),e.maxTime)),n.timeWindowMs=h,n.normalizedRange={start:u,end:p};for(var f=[],v=u;v<p;)z(v,n,e,t)&&f.push(v),v=r.add(v,n.slotDuration);n.slotDates=f;var m=-1,g=0,S=[],y=[];for(v=u;v<p;)z(v,n,e,t)?(m++,S.push(m),y.push(g)):S.push(m+.5),v=r.add(v,n.snapDuration),g++;return n.snapDiffToIndex=S,n.snapIndexToDiff=y,n.snapCnt=m+1,n.slotCnt=n.snapCnt/n.snapsPerSlot,n.isWeekStarts=function(e,t){for(var r=e.slotDates,n=e.emphasizeWeeks,i=null,o=[],s=0,l=r;s<l.length;s++){var a=l[s],c=t.computeWeekNumber(a),d=n&&null!==i&&i!==c;i=c,o.push(d)}return o}(n,r),n.cellRows=function(e,t,r){for(var n=e.slotDates,i=e.headerFormats,o=i.map(function(e){return[]}),s=i.map(function(e){return e.getLargestUnit?e.getLargestUnit():null}),l=0;l<n.length;l++)for(var a=n[l],c=e.isWeekStarts[l],d=0;d<i.length;d++){var h=i[d],u=o[d],p=u[u.length-1],f=1<i.length&&d<i.length-1,v=null;if(f){var m=t.format(a,h);p&&p.text===m?p.colspan+=1:v=W(a,m,s[d],r)}else if(!p||b.isInt(t.countDurationsBetween(e.normalizedRange.start,a,e.labelInterval))){m=t.format(a,h);v=W(a,m,s[d],r)}else p.colspan+=1;v&&(v.weekStart=c,u.push(v))}return o}(n,r,t),n}function M(e,t,r){var n=e;return t.isTimeScale||(n=b.startOfDay(n),t.largeUnit&&(n=r.startOf(n,t.largeUnit))),n}function z(e,t,r,n){if(n.dateProfileGenerator.isHiddenDay(e))return!1;if(t.isTimeScale){var i=b.startOfDay(e),o=e.valueOf()-i.valueOf()-b.asRoughMs(r.minTime);return(o=(o%864e5+864e5)%864e5)<t.timeWindowMs}return!0}function P(e,t){var r=e.opt(t);if(null!=r)return b.createDuration(r)}function H(e,t,r){var n=t.currentRange,i=e.labelInterval;if(!i){var o=void 0;if(e.slotDuration){for(var s=0,l=x;s<l.length;s++){o=l[s];var a=b.createDuration(o),c=b.wholeDivideDurations(a,e.slotDuration);if(null!==c&&c<=T){i=a;break}}i=i||e.slotDuration}else for(var d=0,h=x;d<h.length;d++){o=h[d],i=b.createDuration(o);var u=r.countDurationsBetween(n.start,n.end,i);if(C<=u)break}e.labelInterval=i}return i}function L(e,t,r){var n=t.currentRange,i=null;return"years"===e?i=r.diffWholeYears(n.start,n.end):"months"===e||"weeks"===e?i=r.diffWholeMonths(n.start,n.end):"days"===e&&(i=b.diffWholeDays(n.start,n.end)),i||0}function W(e,t,r,n){return{text:t,spanHtml:b.buildGotoAnchorHtml(n,{date:e,type:r,forceOff:!r},{class:"fc-cell-text"},b.htmlEscape(t)),date:e,colspan:1,isWeekStart:!1}}var k=(A.prototype.render=function(e,t){var r=t?{right:-e}:{left:e};this.headParent.appendChild(this.arrowEl=b.createElement("div",{className:"fc-now-indicator fc-now-indicator-arrow",style:r})),this.bodyParent.appendChild(this.lineEl=b.createElement("div",{className:"fc-now-indicator fc-now-indicator-line",style:r}))},A.prototype.unrender=function(){this.arrowEl&&b.removeElement(this.arrowEl),this.lineEl&&b.removeElement(this.lineEl)},A);function A(e,t){this.headParent=e,this.bodyParent=t}var O,B=(t(N,O=b.Component),N.prototype.destroy=function(){this.layout.destroy(),this.header.destroy(),this.slats.destroy(),this.nowIndicator.unrender(),O.prototype.destroy.call(this)},N.prototype.render=function(e){var t=this.tDateProfile=I(e.dateProfile,this.view);this.header.receiveProps({dateProfile:e.dateProfile,tDateProfile:t}),this.slats.receiveProps({dateProfile:e.dateProfile,tDateProfile:t})},N.prototype.getNowIndicatorUnit=function(e){var t=this.tDateProfile=I(e,this.view);if(t.isTimeScale)return b.greatestDurationDenominator(t.slotDuration).unit},N.prototype.renderNowIndicator=function(e){b.rangeContainsMarker(this.tDateProfile.normalizedRange,e)&&this.nowIndicator.render(this.dateToCoord(e),this.isRtl)},N.prototype.unrenderNowIndicator=function(){this.nowIndicator.unrender()},N.prototype.updateSize=function(e,t,r){this.applySlotWidth(this.computeSlotWidth()),this.layout.setHeight(t,r),this.slats.updateSize()},N.prototype.computeSlotWidth=function(){var e=this.opt("slotWidth")||"";return""===e&&(e=this.computeDefaultSlotWidth(this.tDateProfile)),e},N.prototype.computeDefaultSlotWidth=function(e){var r=0;this.header.innerEls.forEach(function(e,t){r=Math.max(r,e.offsetWidth)});var t=r+1,n=b.wholeDivideDurations(e.labelInterval,e.slotDuration),i=Math.ceil(t/n),o=window.getComputedStyle(this.header.slatColEls[0]).minWidth;return(o=o&&parseInt(o,10))&&(i=Math.max(i,o)),i},N.prototype.applySlotWidth=function(e){var t=this.layout,r=this.tDateProfile,n="",i="",o="";if(""!==e){n=(e=Math.round(e))*r.slotDates.length,i="",o=e;var s=t.bodyScroller.enhancedScroll.getClientWidth();n<s&&(i=s,n="",o=Math.floor(s/r.slotDates.length))}t.headerScroller.enhancedScroll.canvas.setWidth(n),t.headerScroller.enhancedScroll.canvas.setMinWidth(i),t.bodyScroller.enhancedScroll.canvas.setWidth(n),t.bodyScroller.enhancedScroll.canvas.setMinWidth(i),""!==o&&this.header.slatColEls.slice(0,-1).concat(this.slats.slatColEls.slice(0,-1)).forEach(function(e){e.style.width=o+"px"})},N.prototype.computeDateSnapCoverage=function(e){var t=this.dateEnv,r=this.tDateProfile,n=t.countDurationsBetween(r.normalizedRange.start,e,r.snapDuration);if(n<0)return 0;if(n>=r.snapDiffToIndex.length)return r.snapCnt;var i=Math.floor(n),o=r.snapDiffToIndex[i];return b.isInt(o)?o+=n-i:o=Math.ceil(o),o},N.prototype.dateToCoord=function(e){var t=this.tDateProfile,r=this.computeDateSnapCoverage(e)/t.snapsPerSlot,n=Math.floor(r),i=r-(n=Math.min(n,t.slotCnt-1)),o=this.slats.innerCoordCache;return this.isRtl?o.rights[n]-o.getWidth(n)*i-o.originClientRect.width:o.lefts[n]+o.getWidth(n)*i},N.prototype.rangeToCoords=function(e){return this.isRtl?{right:this.dateToCoord(e.start),left:this.dateToCoord(e.end)}:{left:this.dateToCoord(e.start),right:this.dateToCoord(e.end)}},N.prototype.computeInitialDateScroll=function(){var e=this.dateEnv,t=this.props.dateProfile,r=0;if(t){var n=this.opt("scrollTime");n&&(n=b.createDuration(n),r=this.dateToCoord(e.add(b.startOfDay(t.activeRange.start),n)))}return{left:r}},N.prototype.queryDateScroll=function(){return{left:this.layout.bodyScroller.enhancedScroll.getScrollLeft()}},N.prototype.applyDateScroll=function(e){this.layout.bodyScroller.enhancedScroll.setScrollLeft(e.left||0)},N);function N(e,t,r){var n=O.call(this,e)||this,i=n.layout=new v(t,r,"auto");return n.header=new S(e,i.headerScroller.enhancedScroll.canvas.contentEl),n.slats=new D(e,i.bodyScroller.enhancedScroll.canvas.bgEl),n.nowIndicator=new k(i.headerScroller.enhancedScroll.canvas.el,i.bodyScroller.enhancedScroll.canvas.el),n}var _,F=(t(q,_=b.FgEventRenderer),q.prototype.renderSegHtml=function(e,t){var r=e.eventRange,n=r.def,i=r.ui,o=i.startEditable||function(e,t){var r=e.resourceEditable;if(null==r){var n=e.sourceId&&t.state.eventSources[e.sourceId];n&&(r=n.extendedProps.resourceEditable),null==r&&null==(r=t.opt("eventResourceEditable"))&&(r=!0)}return r}(n,this.timeAxis.calendar),s=e.isStart&&i.durationEditable&&this.context.options.eventResizableFromStart,l=e.isEnd&&i.durationEditable,a=this.getSegClasses(e,o,s||l,t);a.unshift("fc-timeline-event","fc-h-event");var c=this.getTimeText(r);return'<a class="'+a.join(" ")+'" style="'+b.cssToStr(this.getSkinCss(i))+'"'+(n.url?' href="'+b.htmlEscape(n.url)+'"':"")+'><div class="fc-content">'+(c?'<span class="fc-time">'+b.htmlEscape(c)+"</span>":"")+'<span class="fc-title">'+(n.title?b.htmlEscape(n.title):"&nbsp;")+'</span></div><div class="fc-bg"></div>'+(s?'<div class="fc-resizer fc-start-resizer"></div>':"")+(l?'<div class="fc-resizer fc-end-resizer"></div>':"")+"</a>"},q.prototype.computeDisplayEventTime=function(){return!this.timeAxis.tDateProfile.isTimeScale},q.prototype.computeDisplayEventEnd=function(){return!1},q.prototype.computeEventTimeFormat=function(){return{hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"}},q.prototype.attachSegs=function(e,t){if(!this.el&&this.masterContainerEl&&(this.el=b.createElement("div",{className:"fc-event-container"}),t&&this.el.classList.add("fc-mirror-container"),this.masterContainerEl.appendChild(this.el)),this.el)for(var r=0,n=e;r<n.length;r++){var i=n[r];this.el.appendChild(i.el)}},q.prototype.detachSegs=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];b.removeElement(n.el)}},q.prototype.computeSegSizes=function(e){for(var t=this.timeAxis,r=0,n=e;r<n.length;r++){var i=n[r],o=t.rangeToCoords(i);b.applyStyle(i.el,{left:i.left=o.left,right:-(i.right=o.right)})}},q.prototype.assignSegSizes=function(e){if(this.el){for(var t=0,r=e;t<r.length;t++)(s=r[t]).height=b.computeHeightAndMargins(s.el);this.buildSegLevels(e);var n=U(e);b.applyStyleProp(this.el,"height",n);for(var i=0,o=e;i<o.length;i++){var s=o[i];b.applyStyleProp(s.el,"top",s.top)}}},q.prototype.buildSegLevels=function(e){for(var t=[],r=0,n=e=this.sortEventSegs(e);r<n.length;r++){var i=n[r];i.above=[];for(var o=0;o<t.length;){for(var s=!1,l=0,a=t[o];l<a.length;l++){var c=a[l];V(i,c)&&(i.above.push(c),s=!0)}if(!s)break;o+=1}for((t[o]||(t[o]=[])).push(i),o+=1;o<t.length;){for(var d=0,h=t[o];d<h.length;d++){var u=h[d];V(i,u)&&u.above.push(i)}o+=1}}return t},q);function q(e,t,r){var n=_.call(this,e)||this;return n.masterContainerEl=t,n.timeAxis=r,n}function U(e){for(var t=0,r=0,n=e;r<n.length;r++){var i=n[r];t=Math.max(t,j(i))}return t}function j(e){return null==e.top&&(e.top=U(e.above)),e.top+e.height}function V(e,t){return e.left<t.right&&e.right>t.left}var G,X=(t(Z,G=b.FillRenderer),Z.prototype.attachSegs=function(e,t){if(t.length){var r=void 0;r="businessHours"===e?"bgevent":e.toLowerCase();var n=b.createElement("div",{className:"fc-"+r+"-container"});this.masterContainerEl.appendChild(n);for(var i=0,o=t;i<o.length;i++){var s=o[i];n.appendChild(s.el)}return[n]}},Z.prototype.computeSegSizes=function(e){for(var t=this.timeAxis,r=0,n=e;r<n.length;r++){var i=n[r],o=t.rangeToCoords(i);i.left=o.left,i.right=o.right}},Z.prototype.assignSegSizes=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];b.applyStyle(n.el,{left:n.left,right:-n.right})}},Z);function Z(e,t,r){var n=G.call(this,e)||this;return n.masterContainerEl=t,n.timeAxis=r,n}var J,Y=(t(K,J=b.DateComponent),K.prototype.render=function(e){var t=this.slicer.sliceProps(e,e.dateProfile,this.timeAxis.tDateProfile.isTimeScale?null:e.nextDayThreshold,this,this.timeAxis);this.renderBusinessHours(t.businessHourSegs),this.renderDateSelection(t.dateSelectionSegs),this.renderBgEvents(t.bgEventSegs),this.renderFgEvents(t.fgEventSegs),this.renderEventSelection(t.eventSelection),this.renderEventDrag(t.eventDrag),this.renderEventResize(t.eventResize)},K.prototype.destroy=function(){J.prototype.destroy.call(this),this.renderBusinessHours.unrender(),this.renderDateSelection.unrender(),this.renderBgEvents.unrender(),this.renderFgEvents.unrender(),this.renderEventSelection.unrender(),this.renderEventDrag.unrender(),this.renderEventResize.unrender()},K.prototype._renderEventDrag=function(e){e&&(this.eventRenderer.hideByHash(e.affectedInstances),this.mirrorRenderer.renderSegs(e.segs,{isDragging:!0,sourceSeg:e.sourceSeg}))},K.prototype._unrenderEventDrag=function(e){e&&(this.eventRenderer.showByHash(e.affectedInstances),this.mirrorRenderer.unrender(e.segs,{isDragging:!0,sourceSeg:e.sourceSeg}))},K.prototype._renderEventResize=function(e){if(e){var t=e.segs.map(function(e){return r({},e)});this.eventRenderer.hideByHash(e.affectedInstances),this.fillRenderer.renderSegs("highlight",t),this.mirrorRenderer.renderSegs(e.segs,{isDragging:!0,sourceSeg:e.sourceSeg})}},K.prototype._unrenderEventResize=function(e){e&&(this.eventRenderer.showByHash(e.affectedInstances),this.fillRenderer.unrender("highlight"),this.mirrorRenderer.unrender(e.segs,{isDragging:!0,sourceSeg:e.sourceSeg}))},K.prototype.updateSize=function(e){var t=this.fillRenderer,r=this.eventRenderer,n=this.mirrorRenderer;t.computeSizes(e),r.computeSizes(e),n.computeSizes(e),t.assignSizes(e),r.assignSizes(e),n.assignSizes(e)},K);function K(e,t,r,n){var i=J.call(this,e,r)||this;i.slicer=new $,i.renderEventDrag=b.memoizeRendering(i._renderEventDrag,i._unrenderEventDrag),i.renderEventResize=b.memoizeRendering(i._renderEventResize,i._unrenderEventResize);var o=i.fillRenderer=new X(e,r,n),s=i.eventRenderer=new F(e,t,n);return i.mirrorRenderer=new F(e,t,n),i.renderBusinessHours=b.memoizeRendering(o.renderSegs.bind(o,"businessHours"),o.unrender.bind(o,"businessHours")),i.renderDateSelection=b.memoizeRendering(o.renderSegs.bind(o,"highlight"),o.unrender.bind(o,"highlight")),i.renderBgEvents=b.memoizeRendering(o.renderSegs.bind(o,"bgEvent"),o.unrender.bind(o,"bgEvent")),i.renderFgEvents=b.memoizeRendering(s.renderSegs.bind(s),s.unrender.bind(s)),i.renderEventSelection=b.memoizeRendering(s.selectByInstanceId.bind(s),s.unselectByInstanceId.bind(s),[i.renderFgEvents]),i.timeAxis=n,i}var Q,$=(t(ee,Q=b.Slicer),ee.prototype.sliceRange=function(e,t){var r=t.tDateProfile,n=t.props.dateProfile,i=function(e,t,r){if(!t.isTimeScale&&(e=b.computeVisibleDayRange(e),t.largeUnit)){var n=e;((e={start:r.startOf(e.start,t.largeUnit),end:r.startOf(e.end,t.largeUnit)}).end.valueOf()!==n.end.valueOf()||e.end<=e.start)&&(e={start:e.start,end:r.add(e.end,t.slotDuration)})}return e}(e,r,t.dateEnv),o=[];if(t.computeDateSnapCoverage(i.start)<t.computeDateSnapCoverage(i.end)){var s=b.intersectRanges(i,r.normalizedRange);s&&o.push({start:s.start,end:s.end,isStart:s.start.valueOf()===i.start.valueOf()&&z(s.start,r,n,t.view),isEnd:s.end.valueOf()===i.end.valueOf()&&z(b.addMs(s.end,-1),r,n,t.view)})}return o},ee);function ee(){return null!==Q&&Q.apply(this,arguments)||this}var te,re=(t(ne,te=b.View),ne.prototype.destroy=function(){this.timeAxis.destroy(),this.lane.destroy(),te.prototype.destroy.call(this),this.calendar.unregisterInteractiveComponent(this)},ne.prototype.renderSkeletonHtml=function(){var e=this.theme;return'<table class="'+e.getClass("tableGrid")+'"> <thead class="fc-head"> <tr> <td class="fc-time-area '+e.getClass("widgetHeader")+'"></td> </tr> </thead> <tbody class="fc-body"> <tr> <td class="fc-time-area '+e.getClass("widgetContent")+'"></td> </tr> </tbody> </table>'},ne.prototype.render=function(e){te.prototype.render.call(this,e),this.timeAxis.receiveProps({dateProfile:e.dateProfile}),this.lane.receiveProps(r({},e,{nextDayThreshold:this.nextDayThreshold}))},ne.prototype.updateSize=function(e,t,r){this.timeAxis.updateSize(e,t,r),this.lane.updateSize(e)},ne.prototype.getNowIndicatorUnit=function(e){return this.timeAxis.getNowIndicatorUnit(e)},ne.prototype.renderNowIndicator=function(e){this.timeAxis.renderNowIndicator(e)},ne.prototype.unrenderNowIndicator=function(){this.timeAxis.unrenderNowIndicator()},ne.prototype.computeInitialDateScroll=function(){return this.timeAxis.computeInitialDateScroll()},ne.prototype.applyDateScroll=function(e){this.timeAxis.applyDateScroll(e)},ne.prototype.queryScroll=function(){var e=this.timeAxis.layout.bodyScroller.enhancedScroll;return{top:e.getScrollTop(),left:e.getScrollLeft()}},ne.prototype.queryHit=function(e,t,r,n){var i=this.timeAxis.slats.positionToHit(e);if(i)return{component:this,dateSpan:i.dateSpan,rect:{left:i.left,right:i.right,top:0,bottom:n},dayEl:i.dayEl,layer:0}},ne);function ne(e,t,r,n){var i=te.call(this,e,t,r,n)||this;return i.el.classList.add("fc-timeline"),!1===i.opt("eventOverlap")&&i.el.classList.add("fc-no-overlap"),i.el.innerHTML=i.renderSkeletonHtml(),i.timeAxis=new B(i.context,i.el.querySelector("thead .fc-time-area"),i.el.querySelector("tbody .fc-time-area")),i.lane=new Y(i.context,i.timeAxis.layout.bodyScroller.enhancedScroll.canvas.contentEl,i.timeAxis.layout.bodyScroller.enhancedScroll.canvas.bgEl,i.timeAxis),e.calendar.registerInteractiveComponent(i,{el:i.timeAxis.slats.el}),i}var ie=b.createPlugin({defaultView:"timelineDay",views:{timeline:{class:re,eventResizableFromStart:!0},timelineDay:{type:"timeline",duration:{days:1}},timelineWeek:{type:"timeline",duration:{weeks:1}},timelineMonth:{type:"timeline",duration:{months:1}},timelineYear:{type:"timeline",duration:{years:1}}}});e.TimelineView=re,e.default=ie,e.TimelineLane=Y,e.ScrollJoiner=p,Object.defineProperty(e,"__esModule",{value:!0})});