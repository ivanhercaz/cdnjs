(function(e){"use strict";var t=function(e){var t=void 0!==e.prototype?e.prototype.toString:function(){return""};e.prototype.toString=function(){return["ComplexStorageCache","debug","info","warn","QC_Append","set","get","done","componentDone","_new_","__new__","Class","ClassFactory","New","Export","Package","Import","subelements","componentLoader","buildComponents","Controller","View","VO","Service","serviceLoader","JSONService","ConfigService","SourceJS","SourceCSS","ArrayList","ArrayCollection","Effect","Timer"].includes(this.name)?this.name+"{ [QCObjects native code] }":t.call(this)}};t(Function);var n="undefined"!=typeof window&&void 0!==window.self&&window===window.self,o=function(e){return n?document.createElement(e):{}};if(!n){require("fs")}var r=function(e){var t,n;return JSON.stringify(e,(t=new WeakSet,n=0,function(e,o){if("object"==typeof o&&null!==o){if(t.has(o))return(n+=1)<=3?_(o):null;t.add(o)}return o}))};if(n){var a=function(e){return[...this.querySelectorAll(e)]};Element.prototype.subelements=a,HTMLDocument.prototype.subelements=a,HTMLElement.prototype.subelements=a}if(n)try{(e=void 0!==window.top?window.top:window)._allowed_=!0}catch(t){try{(e=document)._allowed_=!0}catch(t){try{(e=global)._allowed_=!0}catch(t){(e={})._allowed_=!0}}}else"undefined"!=typeof global&&(e=global);var i=function(){var t="";if(n){var o=e.document.baseURI.split("/");o.pop(),t=o.join("/")+"/"}else{var r;try{r=require("process")}catch(e){}t=void 0!==r?`${r.cwd()}/`:""}return t}();if(n){"Promise"in e||(e.Promise=function(e){var t={then:function(){},catch:function(){},_then:function(e){this.then.call(t,e)},_catch:function(e){this.catch.call(t,e)}};return e.call(t,t._then,t._catch),t}),void 0===e.console&&(e.console=function(){},e.console.prototype.log=function(e){});var s="undefined"!=typeof document&&""!==document.domain?document.domain:"localhost",c=e[(!1+[])[+!+[]+ +!+[]]+(typeof!1)[+!+[]]+(typeof[])[(+!+[]+ +!+[])*(+!+[]+ +!+[])]+(!1+[])[+!+[]]+(!0+[])[+[]]+([]+[]+[][[]])[+[+!+[]+[+[]]]/(+!+[]+ +!+[])]+(typeof!1)[+!+[]]+([]+[]+[][[]])[+!+[]]]["h"+(typeof!1)[+!+[]]+(!1+[])[+!+[]+ +!+[]+ +!+[]]+(!0+[])[+[]]].toLowerCase(),l="undefined"!=typeof cordova}else c="secret",s="localhost";e._asyncLoad=[];var u=function(t,n){var o={func:t,args:n,dispatch:function(){this.func.apply(null,this.args)}};return e._asyncLoad.push(o),o};if(n){document.onreadystatechange=function(){if("complete"===document.readyState)for(var t in e._asyncLoad)e._asyncLoad[t].dispatch()}}else"undefined"!=typeof global&&(global._fireAsyncLoad=function(){for(var t in e._asyncLoad){e._asyncLoad[t].dispatch()}});e.asyncLoad=u;var d=new function(){return{debugEnabled:!0,infoEnabled:!0,warnEnabled:!0,debug:function(e){this.debugEnabled&&console.log("[35m%s[0m","[DEBUG] "+e)},info:function(e){this.infoEnabled&&console.info("[33m%s[0m","[INFO] "+e)},warn:function(e){this.warnEnabled&&console.warn("[31m%s[0m","[WARN] "+e)}}};d.debugEnabled=!1,d.infoEnabled=!1,e.logger=d;var h={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,o,r,a,i,s,c="",l=0;for(e=h._utf8_encode(e);l<e.length;)r=(t=e.charCodeAt(l++))>>2,a=(3&t)<<4|(n=e.charCodeAt(l++))>>4,i=(15&n)<<2|(o=e.charCodeAt(l++))>>6,s=63&o,isNaN(n)?i=s=64:isNaN(o)&&(s=64),c=c+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(i)+this._keyStr.charAt(s);return c},decode:function(e){var t,n,o,r,a,i,s="",c=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");c<e.length;)t=this._keyStr.indexOf(e.charAt(c++))<<2|(r=this._keyStr.indexOf(e.charAt(c++)))>>4,n=(15&r)<<4|(a=this._keyStr.indexOf(e.charAt(c++)))>>2,o=(3&a)<<6|(i=this._keyStr.indexOf(e.charAt(c++))),s+=String.fromCharCode(t),64!==a&&(s+=String.fromCharCode(n)),64!==i&&(s+=String.fromCharCode(o));return s=h._utf8_decode(s)},_utf8_encode:function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},_utf8_decode:function(e){for(var t,n="",o=0,r=0,a=0;o<e.length;)(r=e.charCodeAt(o))<128?(n+=String.fromCharCode(r),o++):r>191&&r<224?(a=e.charCodeAt(o+1),n+=String.fromCharCode((31&r)<<6|63&a),o+=2):(a=e.charCodeAt(o+1),t=e.charCodeAt(o+2),n+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&t),o+=3);return n}},p=function(e){var t,n,o;t=e.index,n=e.load,o=e.alternate;var r=this.getID(t),a=localStorage.getItem(r);if(this.isEmpty(a)){var i=n.call(null,{cachedObjectID:r,cachedResponse:a,cache:this});this.save(t,i),d.debug("RESPONSE OF {{cachedObjectID}} CACHED".replace("{{cachedObjectID}}",r))}else{o.call(null,{cachedObjectID:r,cachedResponse:a,cache:this});d.debug("RESPONSE OF {{cachedObjectID}} IS ALREADY CACHED ".replace("{{cachedObjectID}}",r))}return this};if(p.prototype.getItem=function(e){var t=localStorage.getItem(e);return this.isEmpty(t)?null:JSON.parse(t)},p.prototype.setItem=function(e,t){localStorage.setItem(e,r(t))},p.prototype.isEmpty=function(e){var t=!1;switch(!0){case void 0===e:case"string"==typeof e&&""===e:case"string"==typeof e&&"undefined"===e:case"number"==typeof e&&0===e:case null===e:t=!0;break;default:t=!1}return t},p.prototype.getID=function(e){return"cachedObject_"+h.encode(r(e).replace(",","_").replace("{","_").replace("}","_"))},p.prototype.save=function(e,t){var n=this.getID(e);d.debug("CACHING THE RESPONSE OF {{cachedObjectID}} ".replace("{{cachedObjectID}}",n)),this.setItem(n,t)},p.prototype.getCached=function(e){var t=this.getID(e);return this.getItem(t)},p.prototype.clear=function(){for(var e in localStorage)e.startsWith("cachedObject_")&&localStorage.removeItem(e)},n){var f=!1;try{var g=Object.defineProperty({},"passive",{get:function(){return f=!0}});window.addEventListener("testPassive",null,g),window.removeEventListener("testPassive",null,g)}catch(e){}var m=function(){return!!f&&{passive:!0}}}var b,y,v=function(){};v.prototype={find:function(e){var t=[];if(n){var o=document.subelements(e);for(var r in o){var a=o[r];void 0!==o[r]&&o[r].parentNode.tagName===this.parentNode.tagName&&t.push(E(a,new v))}}return t}},Object.create=(y=Object.prototype.hasOwnProperty,function(e){if("object"!=typeof e)throw TypeError("Object prototype may only be an Object or null. The type is "+typeof e);v.prototype=e;var t=new v;if(v.prototype=null,arguments.length>1){var n=Object(arguments[1]);for(var o in n)y.call(n,o)&&(t[o]=n[o])}return t}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),o=1;o<arguments.length;o++){var r=arguments[o];if(null!==r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0});var _=function(e){var t;switch(typeof e){case"string":case"number":t=e;break;case"object":case"function":t=Object.assign({},e)}return t},O={},C={},w=[],N=[],P=function(e){var t="";return"function"==typeof e.constructor?t=e.constructor.name:"object"==typeof e.constructor&&(t=e.constructor.toString().split(" ")[1].replace("]","")),t},E=function(e,t){for(var n in e)if(void 0!==e[n])try{t[n]=e[n]}catch(e){}return t},I=function(e,t){for(var n in e)if(void 0!==e[n]&&"function"!=typeof e[n])try{t[n]=e[n]}catch(e){}else if("function"==typeof e[n])try{t[n]=e[n].bind(t)}catch(e){}return t},T=function(o,r,a){var i;o=arguments[0];if(n)r=arguments.length>2?arguments[1]:HTMLElement;else r=arguments.length>2?arguments[1]:Object;a=arguments.length>2?arguments[2]:arguments.length>1?arguments[1]:{};return void 0===r?r=n?HTMLElement:Object:a=E(void 0===a?{}:a,void 0!==r.__definition?_(r.__definition):{}),r=r.hasOwnProperty.call(r,"prototype")?r.prototype:_(r),void 0===a||a.hasOwnProperty.call(a,"__new__")||(a.__new__=function(e){I(e,this)},t(a.__new__)),void 0===a||a.hasOwnProperty.call(a,"css")||(a.css=function(e){void 0!==this.body&&"undefined"!==this.body.style&&(d.debug("body style"),this.body.style=E(e,this.body.style))},t(a.css)),void 0===a||a.hasOwnProperty.call(a,"hierarchy")||(a.hierarchy=function(){var e,t=[];return t.push((e=this).hasOwnProperty.call(e,"__classType")?e.__classType:e.hasOwnProperty.call(e,"__definition")?e.__definition.__classType:P(e)),this.hasOwnProperty.call(this,"__definition")&&(t=t.concat(this.__definition.hierarchy.call(this.__definition))),t}),void 0===a||a.hasOwnProperty.call(a,"append")||(a.append=function(){var e=arguments.length>0?arguments[0]:this.body;void 0!==this.body&&(d.debug("append element"),arguments.lenght>0?(d.debug("append to element"),this.body.append(e),void 0===this.childs&&(this.childs=[]),this.childs.push(e)):n&&(d.debug("append to body"),document.body.append(e)))},t(a.append)),void 0===a||a.hasOwnProperty.call(a,"attachIn")||(a.attachIn=function(e){if(n)for(var t=document.subelements(e),o=0,r=t.length;o<r;o++)t[o].append(this)},t(a.attachIn)),void 0!==a&&a.hasOwnProperty.call(a,"__instanceID")&&delete a.__instanceID,(i=Object.create(r,a)).__definition=a,i.__definition.__classType=o,O[o]=i,e[o]=O[o],e[o]};T.prototype.toString=function(){return"Class(name, type, definition) { [QCObjects native code] }"};var S=function(e){var t;if(null!==e&&e.indexOf(".")>-1){var n=e.split(".").slice(0,e.split(".").length-1).join("."),o=e.split(".").slice(-1).join(""),r=D(n),a=void 0!==r?r.filter(e=>void 0!==e&&e.hasOwnProperty.call(e,"__definition")&&G(e)&&e.__definition.__classType===o&&!e.hasOwnProperty.call(e,"__instanceID")).reverse():[];a.length>0&&(t=a[0])}else null!==e&&O.hasOwnProperty.call(O,e)&&(t=O[e]);return t};n&&(Element.prototype.append=function(e){void 0!==e.__definition&&void 0!==e.__definition.__classType&&(e.body,1)?this.appendChild(e.body):this.appendChild(e)},Element.prototype.render=function(e){if(void 0!==this.innerHTML)try{this.innerHTML+=e}catch(t){!function(e,t){if(void 0!==document.implementation.createHTMLDocument){var n=document.implementation.createHTMLDocument("");n.innerHTML=t,n.body.subelements("*").map(function(t){return e.append(t)})}}(this,e)}});var A=function(e,t,n){return S(e)[t]};A.prototype.toString=function(){return"_super_(className,classMethodName,params) { [QCObjects native code] }"};var L=function(e,t){t=arguments.length>1?arguments[1]:{};Object.__instanceID=void 0===Object.__instanceID||null===Object.__instanceID?0:Object.__instanceID+1,b=Object.__instanceID;var r=void 0===e?Object.create({}.constructor.prototype,{}):Object.create(e.constructor.prototype,e.__definition);if(r.__definition=E({__instanceID:b},void 0!==e?e.__definition:{}),r.__instanceID=b,r.hasOwnProperty.call(r,"definition")&&void 0!==r.__definition&&null!==r.__definition&&(r.__definition.__instanceID=b),r.hasOwnProperty.call(r,"__new__")){if(void 0===r||r.__definition.hasOwnProperty.call(r.__definition,"body"))r.__definition.hasOwnProperty.call(r.__definition,"body")&&(r.body=r.__definition.body);else try{n?(r.body=E(r.__definition,o(r.__definition.__classType)),r.body.style=E(r.__definition,r.body.style)):(r.body={},r.body.style={})}catch(e){r.body={},r.body.style={}}r.__new__(t),r.hasOwnProperty.call(r,"_new_")&&r._new_(t)}return r};L.prototype.toString=function(){return"New(QCObjectsClassName, args) { [QCObjects native code] }"};var F=function(t){if(n)try{e[t.name]=t,window[t.name]=t}catch(e){}else"undefined"!=typeof global&&(global.hasOwnProperty.call(global,t.name)||(global[t.name]=t))};if(F.prototype.toString=function(){return"Export(function or symbol) { [QCObjects native code] }"},!n){var j=function(e){const t=require("fs");var n=null;try{var o=[`${S("CONFIG").get("projectPath")}${S("CONFIG").get("relativeImportPath")}`,`${S("CONFIG").get("basePath")}${S("CONFIG").get("relativeImportPath")}`,`${S("CONFIG").get("projectPath")}`,`${S("CONFIG").get("basePath")}`,`${S("CONFIG").get("relativeImportPath")}`,`${process.cwd()}${S("CONFIG").get("relativeImportPath")}`,`${process.cwd()}/node_modules/`+e,`${process.cwd()}/node_modules`,`${process.cwd()}`,"node_modules","./",""].concat(module.paths);(o=o.filter(n=>t.existsSync(n+"/"+e))).length>0&&(n=o[0],d.info(e+" is Installed."))}catch(e){console.log(e)}return n};F(j)}T("_Crypt",Object,{last_string:"",last_key:"",construct:!1,_new_:function(e){var t=e.string,n=e.hasOwnProperty.call(e,"key")?e.key:null;this.__new__(e),n=null===n?this.__instanceID:n,this.last_key=n,this.last_string=t,this.construct=!0},_encrypt:function(){for(var e,t,n=this.last_string,o=this.last_key,r="",a=0;a<n.length;a++)e=n.substr(a,1),t=o.substr(a%o.length-1,1),r+=e=String.fromCharCode(e.charCodeAt(0)+t.charCodeAt(0));return this.last_string=h.encode(r),this.last_string},_decrypt:function(){var e,t,n=this.last_string,o=this.last_key,r="";n=h.decode(n);for(var a=0;a<n.length;a++)e=n.substr(a,1),t=o.substr(a%o.length-1,1),r+=e=String.fromCharCode(e.charCodeAt(0)-t.charCodeAt(0));return this.last_string=r,this.last_string},encrypt:function(e,t){return L(S("_Crypt"),{string:e,key:t})._encrypt()},decrypt:function(e,t){return L(S("_Crypt"),{string:e,key:t})._decrypt()}});var M=function(e){return JSON.parse(S("_Crypt").decrypt(e,c))};T("CONFIG",Object,{_CONFIG:{relativeImportPath:"",remoteImportsPath:"",remoteSDKPath:"https://sdk.qcobjects.dev/",asynchronousImportsLoad:!1,removePackageScriptAfterLoading:!0,componentsBasePath:"",delayForReady:0,preserveComponentBodyTag:!0,overrideComponentTag:!1,useConfigService:!1,routingWay:"hash",useSDK:!0,useLocalSDK:!1,basePath:i},_CONFIG_ENC:null,set:function(e,t){"basePath"===e&&(i=t);var n,o=function(e){null===e._CONFIG_ENC&&(e._CONFIG_ENC=S("_Crypt").encrypt(r({}),c));var t=e._CONFIG_ENC.valueOf(),n=e._CONFIG.valueOf();return I(n,M(t))}(this);o[e]=t,this._CONFIG_ENC=(n=o,S("_Crypt").encrypt(r(n),c)),this._CONFIG.hasOwnProperty.call(this._CONFIG,e)&&(this._CONFIG[e]=t)},get:function(e,t){var n;try{var o=function(e){null===e._CONFIG_ENC&&(e._CONFIG_ENC=S("_Crypt").encrypt(r({}),c));var t=e._CONFIG_ENC.valueOf(),n=e._CONFIG.valueOf();return I(n,M(t))}(this);void 0!==o[e]?n=o[e]:void 0!==t&&(n=t)}catch(o){d.debug("Something wrong when trying to get CONFIG values"),d.debug("No config value for: "+e),n=t}return n}});var R=S("CONFIG");F(R),F(function(e,t){setTimeout(function(){!function(e,t){var n=0,o=setInterval(function(){t.call()?(clearInterval(o),e.call(),d.debug("Ejecuting "+e.name+" after wait")):n<2e3?(n+=1,d.debug("WAIT UNTIL "+e.name+" is true, "+n.toString()+" cycles")):(d.debug("Max execution time for "+e.name+" expression until true"),clearInterval(o))},1)}(e,t)},1)}),F(A),F(p),F(S);var G=function(e){return!("object"!=typeof e||e.hasOwnProperty.call(e,"__instanceID")||!e.hasOwnProperty.call(e,"__definition")||void 0===e.__definition||!e.__definition.hasOwnProperty.call(e.__definition,"__classType"))},D=function(e,t){if(C.hasOwnProperty.call(C,e)&&void 0!==C[e]&&C[e].hasOwnProperty.call(C[e],"length")&&C[e].length>0&&void 0!==t&&t.hasOwnProperty.call(t,"length")&&t.length>0){for(var n in t.filter(function(e){return G(e)}))t[n].__definition.__namespace=e;C[e]=C[e].concat(t)}else if(void 0!==t){if("object"==typeof t&&t.hasOwnProperty.call(t,"length"))for(var n in t.filter(function(e){return G(e)}))t[n].__definition.__namespace=e;else G(t)&&(t.__definition.__namespace=e);C[e]=t}return C.hasOwnProperty.call(C,e)?C[e]:void 0};D.prototype.toString=function(){return"Package(namespace, classes) { [QCObjects native code] }"};var k=function(){var e,t,r=function(){},a=!1;if(!(arguments.length<1))return 1===arguments.length?e=arguments[0]:2===arguments.length?(e=arguments[0],r=arguments[1]):arguments.length>2&&(e=arguments[0],r=arguments[1],a=arguments[2],d.debug("[Import] Setting external="+a.toString()+" resource to import: "+e)),a?d.debug("[Import] Registering external resource to import: "+e):d.debug("[Import] Registering local resource to import: "+e),n?(t=new Promise(function(s,c){var l=function(o){if(w.push(r),function(){var e=0;for(var t in C)e++;return!(e<w.length)}())for(var a in w)N.push(w[a]);n&&S("CONFIG").get("removePackageScriptAfterLoading")&&o.target.remove(),s.call(t,{_imported_:o.target,_package_name_:e})};if(!C.hasOwnProperty.call(C,e)){var u=o("script");u.type="text/javascript",u.async=!!S("CONFIG").get("asynchronousImportsLoad"),u.onreadystatechange=function(){"complete"===u.readyState&&l.call()},u.onload=l,u.onerror=function(n){c.call(t,{_imported_:u,_package_name_:e})},u.src=a?S("CONFIG").get("remoteImportsPath")+e+".js":i+S("CONFIG").get("relativeImportPath")+e+".js",document.getElementsByTagName("head")[0].appendChild(u)}})).catch(function(){d.debug("Import: Error loading a package ")}):t=new Promise(function(n,o){try{var r=j(e),a="";if(null!==r)a=r+"/"+e;else{var s=j(e+".js");a=null!==s?s+"/"+e+".js":i+S("CONFIG").get("relativeImportPath")+e}try{n.call(t,{_imported_:require(`${a}`),_package_name_:e})}catch(n){console.log(n),o.call(t,{_imported_:null,_package_name_:e})}}catch(n){console.log(n),o.call(t,{_imported_:null,_package_name_:e})}}).catch(function(t){console.log(t),d.debug("Something happened when importing "+e)}),t};k.prototype.toString=function(){return"Import(packagename,ready,external) { [QCObjects native code] }"},n&&(Element.prototype.Cast=function(e){return e.__definition.body=this,e=L(e)}),T("TagElements",Array,{show:function(){this.map(function(e){return e.style.opacity=1})},hide:function(){this.map(function(e){return e.style.opacity=0})},effect:function(){var e=[...arguments].slice(1),t=arguments[0];"string"===(typeof t).toLowerCase()&&(t=S(t)),this.map(function(n){return t.apply.apply(t,[n].concat(e))})},findElements:function(e){var t=L(S("TagElements"));if(n)for(var o in this)"number"==typeof o&&"function"!=typeof this[o]&&this[o].hasOwnProperty.call(this[o],"subelements")&&t.push(this[o].subelements(e));return t}});var H=function(e,t){var o=L(S("TagElements"));if(n)for(var r=document.subelements(e),a=[],i=0;i<r.length;i++)void 0!==t&&r[i].hasOwnProperty.call(r[i],"innerHTML")&&(r[i].innerHTML=t),a.indexOf(i)<0&&(o.push(r[i]),a.push(i));return o};function x(e){n?N.push(e.bind(window)):"undefined"!=typeof global&&N.push(e.bind(global))}var q=x,U=function(t){var o=function(){for(var e in N)"function"==typeof N[e]&&(N[e].call(),delete N[e])};S("CONFIG").get("delayForReady")>0?n?setTimeout(o.bind(window),S("CONFIG").get("delayForReady")):"undefined"!=typeof global&&setTimeout(o.bind(global),S("CONFIG").get("delayForReady")):o.call(e)};n?(window.onload=U,l&&document.addEventListener("deviceready",U,m)):global.onload=U,T("DDO",Object,{_new_:function({instance:e,name:t,fget:n,fset:o,value:r}){var a;t=void 0===t?P(this):t;Object.defineProperty(e,t,{set:e=>(a=e,d.debug("value changed "+t),void 0!==o&&"function"==typeof o?o(a):a),get(){d.debug("returning value "+t);var e=function(e){return"object"==typeof e&&e.hasOwnProperty.call(e,"value")?e.value:e};return void 0!==n&&"function"==typeof n?n(e(a)):e(a)}})}}),T("InheritClass",Object,{}),T("DefaultTemplateHandler",Object,{template:"",assign:function(e){var t=this.template;for(var n in e)t=t.replace(new RegExp("{{"+n+"}}","g"),e[n]);return t}}),e.__oldpopstate=e.onpopstate,T("Component",Object,{domain:s,basePath:i,templateURI:"",templateHandler:"DefaultTemplateHandler",tplsource:"default",url:"",name:"",method:"GET",data:{},reload:!1,shadowed:!1,cached:!0,done:function(){},fail:function(){},set:function(e,t){this[e]=t},get:function(e){return this[e]},rebuild:function(){var e=this,t=new Promise(function(n,o){switch(!0){case void 0!==e.get("tplsource")&&"default"===e.get("tplsource")&&void 0!==e.get("templateURI")&&""!==e.get("templateURI"):e.set("url",e.get("basePath")+e.get("templateURI")),B(e,!1).then(function(e){n.call(t,e)},function(e){o.call(t,e)});break;case void 0!==e.get("tplsource")&&"external"===e.get("tplsource")&&void 0!==e.get("templateURI")&&""!==e.get("templateURI"):e.set("url",e.get("templateURI")),B(e,!1).then(function(e){n.call(t,e)},function(e){o.call(t,e)});break;case void 0!==e.get("tplsource")&&"none"===e.get("tplsource"):d.debug("Component "+e.name+" has specified template-source=none, so no template load was done");var r={request:null,component:e};"function"==typeof e.done&&e.done.call(e,r),n(t,r);break;default:d.debug("Component "+e.name+" will not be rebuilt because no templateURI is present"),o.call(t,{request:null,component:e})}});return t},Cast:function(e){return E(this,e)},routingWay:null,validRoutingWays:["pathname","hash","search"],routingNodes:[],routings:[],routingPath:"",routingSelected:[],_bindroute:function(){n&&(S("Component")._bindroute.__assigned||document.addEventListener("componentsloaded",function(t){t.stopImmediatePropagation(),t.stopPropagation(),S("Component")._bindroute.__assigned||(e.onpopstate=function(e){e.stopImmediatePropagation(),e.stopPropagation(),S("Component").route(),void 0!==e.target.__oldpopstate&&"function"==typeof e.target.__oldpopstate&&e.target.__oldpopstate.call(e.target,e)},H("a").map(function(e){return e.oldclick=e.onclick,e.onclick=function(e){var t=!0;global.get("routingPaths")||global.set("routingPaths",[]);var n=S("CONFIG").get("routingWay"),o=e.target[n];return global.get("routingPaths").includes(o)&&e.target[n]!==document.location[n]&&e.target.href!==document.location.href?(d.debug("A ROUTING WAS FOUND: "+o),window.history.pushState({href:e.target.href},e.target.href,e.target.href),S("Component").route(),t=!1):d.debug("NO ROUTING FOUND FOR: "+o),void 0!==e.target.oldclick&&"function"==typeof e.target.oldclick&&e.target.oldclick.call(e.target,e),t},null}),S("Component")._bindroute.__assigned=!0)},m))},route:function(){var e=this,t=!(!e.hasOwnProperty.call(e,"__instanceID")||!e.hasOwnProperty.call(e,"subcomponents")),n=function(t){for(var o=0;o<t.length;o++){var r=t[o];r._reroute_(),r.hasOwnProperty.call(r,"subcomponents")&&void 0!==r.subcomponents&&r.subcomponents.length>0&&(d.debug("LOOKING FOR ROUTINGS IN SUBCOMPONENTS FOR: "+r.name),n.call(e,r.subcomponents))}};t||global.hasOwnProperty.call(global,"componentsStack")?(t&&e.hasOwnProperty.call(e,"name")&&d.debug("loading routings for instance"+e.name),n.call(e,t?e.subcomponents:global.componentsStack)):d.debug("An undetermined result expected if load routings. So will not be loaded this time.")},fullscreen:function(){if(n){var e=this.body;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},closefullscreen:function(){n&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())},_generateRoutingPaths:function(e){if(n&&this.validRoutingWays.includes(this.routingWay)&&void 0!==e){this.innerHTML=e.innerHTML,this.routingNodes=e.subelements("routing"),this.routings=[];for(var t=0;t<this.routingNodes.length;t++){for(var o=this.routingNodes[t],r=o.getAttributeNames(),a={},i=0;i<r.length;i++)a[r[i]]=o.getAttribute(r[i]);this.routings.push(a),global.get("routingPaths")||global.set("routingPaths",[]),global.get("routingPaths").includes(a.path)||global.get("routingPaths").push(a.path)}}},parseTemplate:function(e){var t;if(this.hasOwnProperty.call(this,"templateHandler")){var n=e,o=(this.templateHandler,S(this.templateHandler));t=L(o,{template:n}).assign(self.data)}else t=n;return t},_new_:function(e){this.routingWay=S("CONFIG").get("routingWay");var t=this;Object.defineProperty(t,"body",{set(e){t._body=e,t._generateRoutingPaths(e)},get:()=>t._body}),Object.defineProperty(t,"cacheIndex",{set(e){d.debug("[cacheIndex] This property is readonly")},get:()=>h.encode(t.name+r(t.routingSelected))}),Object.defineProperty(t,"parsedAssignmentText",{set(e){d.debug("[parsedAssignmentText] This property is readonly")},get:()=>(t._parsedAssignmentText=t.parseTemplate(t.template),t._parsedAssignmentText)}),Object.defineProperty(t,"shadowRoot",{set(e){void 0===t.__shadowRoot?t.__shadowRoot=e:d.debug("[shadowRoot] This property can only be assigned once!")},get:()=>t.__shadowRoot}),this.__new__(e),this._reroute_()||this.rebuild().catch(function(e){d.debug("Component not rebuilt")})},_reroute_:function(){var e=this,t=!1;if(e.validRoutingWays.includes(e.routingWay)){e.routingPath=document.location[e.routingWay],e.routingSelected=e.routings.filter(function(t){return new RegExp(t.path,"g").test(e.routingPath)}).reverse();for(var n=0;n<e.routingSelected.length;n++){var o=e.routingSelected[n],r=W({COMPONENTS_BASE_PATH:S("CONFIG").get("componentsBasePath"),COMPONENT_NAME:o.name.toString(),TPLEXTENSION:e.tplextension,TPL_SOURCE:"default"});e.templateURI=r}e.routingSelected.length>0&&(e.template="",e.body.innerHTML="",e.rebuild().then(function(){}).catch(function(e){d.debug("Component not rebuilt")}),t=!0)}return t},lazyLoadImages:function(){if(n){var e=[...this.body.subelements("img[lazy-src]")],t=function(e){e.setAttribute("src",e.getAttribute("lazy-src")),e.onload=(()=>{e.removeAttribute("lazy-src")})};if("IntersectionObserver"in window){var o=new IntersectionObserver((e,n)=>{e.forEach(e=>{e.isIntersecting&&(t(e.target),n.unobserve(e.target))})});e.map(function(e){return o.observe(e)})}else e.map(t)}return null},scrollIntoHash:function(){if(n){if(""!==document.location.hash){var e=this.body.subelements(document.location.hash);e.length>0&&"function"==typeof e[0].scrollIntoView&&e[0].scrollIntoView(S("CONFIG").get("scrollIntoHash",{behavior:"auto",block:"center",inline:"center"}))}}},i18n_translate:function(){if(n&&S("CONFIG").get("use_i18n")){var e=this,t=S("CONFIG").get("lang","en"),o=navigator.language.slice(0,2),r=global.get("i18n");if(t!==o&&"object"==typeof r&&r.hasOwnProperty.call(r,"messages")){(function(){var e=this;return new Promise(function(n,a){var i=r.messages.filter(function(e){return e.hasOwnProperty.call(e,t)&&e.hasOwnProperty.call(e,o)});e.body.subelements("ul,li,h1,h2,h3,a,b,p,input,textarea,summary,details,option,component").map(function(e){return i.map(function(n){var r=e.innerHTML;return r=r.replace(new RegExp(`${n[t]}`,"g"),n[o]),e.innerHTML=r,null}),e}),n()})}).call(e).then(function(){d.debug("i18n loaded for component: "+e.name)})}}},runComponentHelpers:function(){if(n){this.i18n_translate(),this.scrollIntoHash(),this.lazyLoadImages()}}}),S("Component")._bindroute.__assigned=!1,T("Controller",Object,{dependencies:[],component:null,routingSelectedAttr:function(e){return this.component.routingSelected.map(function(t){return t[e]}).filter(function(e){return e}).pop()},isTouchable:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},onpress:function(e,t){try{this.isTouchable()?this.component.body.subelements(e)[0].addEventListener("touchstart",t,{passive:!0}):this.component.body.subelements(e)[0].addEventListener("click",t,{passive:!0})}catch(e){d.debug("No button to assign press event")}},createRoutingController:function(){var e=this.component,t=this.routingSelectedAttr("controllerclass");if(void 0!==t){var n=S(t);void 0!==n&&(e.routingController=L(n,{component:e}),e.routingController.hasOwnProperty.call(e.routingController,"done")&&"function"==typeof e.routingController.done&&e.routingController.done.call(e.routingController))}}}),T("View",Object,{dependencies:[],component:null}),T("Service",Object,{domain:s,basePath:i,url:"",method:"GET",data:{},reload:!1,cached:!1,set:function(e,t){this[e]=t},get:function(e){return this[e]}}),T("JSONService",S("Service"),{method:"GET",cached:!1,headers:{"Content-Type":"application/json",charset:"utf-8"},JSONresponse:null,done:function(e){d.debug("***** RECEIVED RESPONSE:"),d.debug(e.service.template),this.JSONresponse=JSON.parse(e.service.template)}}),T("ConfigService",S("JSONService"),{method:"GET",cached:!1,configFileName:"config.json",headers:{"Content-Type":"application/json",charset:"utf-8"},JSONresponse:null,done:function(e){for(var t in d.debug("***** CONFIG LOADED:"),d.debug(e.service.template),this.JSONresponse=JSON.parse(e.service.template),this.JSONresponse.hasOwnProperty.call(this.JSONresponse,"__encoded__")&&(this.JSONresponse=JSON.parse(S("_Crypt").decrypt(this.JSONresponse.__encoded__,c))),this.JSONresponse)S("CONFIG").set(t,this.JSONresponse[t]);this.configLoaded.call(this)},fail:function(e){this.configLoaded.call(this)},_new_:function(e){this.set("url",this.get("basePath")+this.get("configFileName"))}}),T("VO",Object,{});var W=function(e){var t="";if("default"===e.TPL_SOURCE)for(var n in t="{{COMPONENTS_BASE_PATH}}{{COMPONENT_NAME}}.{{TPLEXTENSION}}",e){e[n];t=t.replace("{{"+n+"}}",e[n])}return t},B=function(e,t){var n=function(e,t){var n=new Promise(function(t,a){var i=e.hasOwnProperty.call(e,"container")&&void 0!==e.container&&null!==e.container?e.container:e.body;if(null===i)d.debug("CONTAINER DOESNT EXIST");else{var s=function(e){var r=e.parsedAssignmentText;if(e.innerHTML=r,e.shadowed){d.debug("COMPONENT {{NAME}} is shadowed".replace("{{NAME}}",e.name)),d.debug("Preparing slots for Shadowed COMPONENT {{NAME}}".replace("{{NAME}}",e.name));var a=o("div");i.subelements("*:not(routing)").map(function(e){a.appendChild(e)});try{d.debug("Creating shadowedContainer for COMPONENT {{NAME}}".replace("{{NAME}}",e.name));var s=o("div");s.classList.add("shadowHost"),e.shadowRoot=s.attachShadow({mode:"open"})}catch(t){try{d.debug("Shadowed COMPONENT {{NAME}} is repeated".replace("{{NAME}}",e.name)),e.shadowRoot=s.shadowRoot}catch(t){d.debug("Shadowed COMPONENT {{NAME}} is not allowed on this browser".replace("{{NAME}}",e.name))}}void 0!==e.shadowRoot&&null!==e.shadowRoot?(e.reload?(d.debug("FORCED RELOADING OF CONTAINER FOR Shadowed COMPONENT {{NAME}}".replace("{{NAME}}",e.name)),s.shadowRoot.innerHTML=e.innerHTML):(a.innerHTML=e.parseTemplate(a.innerHTML),d.debug("ADDING Shadowed COMPONENT {{NAME}} ".replace("{{NAME}}",e.name)),s.shadowRoot.innerHTML+=e.innerHTML,d.debug("ADDING Slots to Shadowed COMPONENT {{NAME}} ".replace("{{NAME}}",e.name)),s.innerHTML+=a.innerHTML),d.debug("APPENDING Shadowed COMPONENT {{NAME}} to Container ".replace("{{NAME}}",e.name)),i.appendChild(s)):d.debug("Shadowed COMPONENT {{NAME}} is bad configured".replace("{{NAME}}",e.name))}else e.reload?(d.debug("FORCED RELOADING OF CONTAINER FOR COMPONENT {{NAME}}".replace("{{NAME}}",e.name)),i.innerHTML=e.innerHTML):(d.debug("ADDING COMPONENT {{NAME}} ".replace("{{NAME}}",e.name)),i.innerHTML+=e.innerHTML);var c={request:h,component:e};t.call(n,c)};d.debug("LOADING COMPONENT DATA {{DATA}} FROM {{URL}}".replace("{{DATA}}",r(e.data)).replace("{{URL}}",e.url));var c=function(){var t=u?0:200;if(h.status===t){var o=h.responseText;d.debug("Data received {{DATA}}".replace("{{DATA}}",r(o))),d.debug("CREATING COMPONENT {{NAME}}".replace("{{NAME}}",e.name)),e.template=o,e.cached&&void 0!==g&&g.save(e.name,e.template),s.call(this,e)}else{var i={request:h,component:e};a.call(n,i)}};if("string"==typeof e.template&&""!==e.template)s.call(this,e);else{var u=!!e.url.startsWith("file:"),h=new XMLHttpRequest;h.open(e.method,e.url,!u),l||u||h.setRequestHeader("Content-Type","text/html"),u||(h.onload=c);var f=function(){d.debug("SENDING THE NORMAL REQUEST  "),u?(h.send(null),0===h.status&&c.call(this)):h.send(r(e.data))};if(e.cached){d.debug("USING CACHE FOR COMPONENT: "+e.name);var g=new p({index:e.cacheIndex,load:function(e){f.call(this)},alternate:function(t){"GET"===e.method?(e.template=t.cache.getCached(e.cacheIndex),s.call(this,e)):f.call(this)}});global.lastCache=g}else d.debug("NOT USING CACHE FOR COMPONENT: "+e.name),f.call(this)}}});return n.then(function(t){var n;return"function"==typeof e.done&&(n=e.done.call(e,t)),Promise.resolve(n)},function(t){var n;return"function"==typeof e.fail&&(n=e.fail.call(e,t)),Promise.reject(n)}).catch(function(e){d.debug("Something wrong loading the component")}),n};return void 0!==t&&t?u(n,arguments):n(e)},J=function(e,t){var o=function(e,t){var n=new Promise(function(t,o){d.debug("LOADING SERVICE DATA {{DATA}} FROM {{URL}}".replace("{{DATA}}",r(e.data)).replace("{{URL}}",e.url));var a=new XMLHttpRequest;a.withCredentials=e.withCredentials;for(var i in a.open(e.method,e.url,!0),e.headers)a.setRequestHeader(i,e.headers[i]);a.onload=function(){if(200===a.status){var i=a.responseText;if(d.debug("Data received {{DATA}}".replace("{{DATA}}",r(i))),d.debug("CREATING SERVICE {{NAME}}".replace("{{NAME}}",e.name)),e.template=i,e.cached&&void 0!==c&&c.save(e.name,e.template),"function"==typeof e.done){var s={request:a,service:e};e.done.call(e,s),t.call(n,s)}}else if("function"==typeof e.fail){s={request:a,service:e};e.fail.call(e,s),o.call(n,s)}};var s=function(){d.debug("SENDING THE NORMAL REQUEST  ");try{a.send(r(e.data))}catch(t){d.debug("SOMETHING WRONG WITH REQUEST  "),o.call(n,{request:a,service:e})}};if(e.cached){var c=new p({index:e.data,load:function(e){s.call(this)},alternate:function(o){if("GET"===e.method){if(e.template=o.cache.getCached(e.name),"function"==typeof e.done){var r={request:a,service:e};e.done.call(e,r),t.call(n,r)}}else s.call(this)}});global.lastCache=c}else s.call(this);return a});return n};return n?void 0!==t&&t?u(o,arguments):o(e):function(e,t){var n=new Promise(function(t,o){var a=new URL(e.url);try{if(e.hasOwnProperty.call(e,"useHTTP2")&&e.useHTTP2){d.debug("using http2");var i=require("http2").connect(a.origin);(c=i.request({":method":e.method,":path":a.pathname})).setEncoding("utf8")}else var s=require("request"),c=(Object.assign({url:e.url,headers:e.headers},e.options),s[e.method.toLowerCase()](e.url));var l;d.debug("LOADING SERVICE DATA (non-browser) {{DATA}} FROM {{URL}}".replace("{{DATA}}",r(e.data)).replace("{{URL}}",e.url));var u={http2Client:i,request:c,service:e,responseHeaders:null};if("object"==typeof e.data&&null!==e.data&&e.useHTTP2)try{d.debug("Sending data...");let t=new Buffer(r(e.data));c.write(t)}catch(e){d.debug("It was not possible to send any data")}l="",c.on("response",(e,t)=>{d.debug("receiving response..."),u.responseHeaders=e;for(const t in e)d.debug(`${t}: ${e[t]}`);l=""}),c.on("data",e=>{d.debug("receiving data..."),l+=e.toString()}),c.on("end",()=>{d.debug("ending call..."),e.template=l,e.hasOwnProperty.call(e,"useHTTP2")&&e.useHTTP2?i.destroy():c.destroy(),e.done.call(e,u),t.call(n,u)})}catch(t){d.debug(t),e.fail.call(e,t),o.call(n,t)}}).catch(function(t){console.log(t),d.debug("Something happened when trying to call the service: "+e.name),e.fail.call(e,t)});return n}(e)};F(J),F(B),F(W),F(P),F(r),F(G),F(function(e){return!!("object"==typeof e&&e.hasOwnProperty.call(e,"__classType")&&e.hasOwnProperty.call(e,"__instanceID")&&e.hasOwnProperty.call(e,"__definition")&&void 0!==e.__definition)}),u(function(){T("global",Object,{_GLOBAL:{},set:function(e,t){this._GLOBAL[e]=t},get:function(e,t){var n;return void 0!==this._GLOBAL[e]?n=this._GLOBAL[e]:void 0!==t&&(n=t),n},__start__:function(){var t=function(){n&&(d.debug("Starting to bind routes"),S("Component")._bindroute.call(S("Component")),d.debug("Starting to building components"),global.componentsStack=document.buildComponents.call(document),d.debug("Initializing the service worker"),function(){var e;return n&&(e=new Promise(function(t,n){"serviceWorker"in navigator&&void 0!==S("CONFIG").get("serviceWorkerURI")&&(S("CONFIG").set("serviceWorkerScope",S("CONFIG").get("serviceWorkerScope")?S("CONFIG").get("serviceWorkerScope"):"/"),navigator.serviceWorker.register(S("CONFIG").get("serviceWorkerURI"),{scope:S("CONFIG").get("serviceWorkerScope")}).then(function(n){d.debug("Service Worker Registered"),t.call(e,n)},function(t){d.debug("Error registering Service Worker"),n.call(e,t)}),navigator.serviceWorker.ready.then(function(n){d.debug("Service Worker Ready"),t.call(e,n)},function(t){d.debug("Error loading Service Worker"),n.call(e,t)}))})),e}.call(e).catch(function(){d.debug("error loading the service worker")}))};S("CONFIG").get("useConfigService")?(global.configService=L(S("ConfigService")),global.configService.configLoaded=t,J(global.configService)):t.call(this)}}),Object.defineProperty(global,"PackagesNameList",{set(e){d.debug("PackagesNameList is readonly")},get(){var e=function(t){var n=[];for(var o in t)void 0!==t[o]&&t[o].hasOwnProperty.call(t[o],"length")&&t[o].length>0&&(n.push(o),n=n.concat(e(t[o])));return n};return e(C)}}),Object.defineProperty(global,"PackagesList",{set(e){d.debug("PackagesList is readonly")},get:()=>global.PackagesNameList.map(function(e){return{packageName:e,classesList:D(e).filter(function(e){return G(e)})}})}),Object.defineProperty(global,"ClassesList",{set(e){d.debug("ClassesList is readonly")},get(){var e=[];return global.PackagesList.map(function(t){return e=e.concat(t.classesList.map(function(e){return{packageName:t.packageName,className:t.packageName+"."+e.__definition.__classType,classFactory:e}})),t}),e}}),Object.defineProperty(global,"ClassesNameList",{set(e){d.debug("ClassesNameList is readonly")},get:()=>global.ClassesList.map(function(e){return e.className})}),n&&(T("GLOBAL",O.global),F(S("GLOBAL"))),F(global),S("CONFIG").get("useSDK")&&function(){var e=S("CONFIG").get("remoteImportsPath"),t=!S("CONFIG").get("useLocalSDK");S("CONFIG").set("remoteImportsPath",S("CONFIG").get("remoteSDKPath"));var o=!1,r="QCObjects-SDK";n?o=!0:null!==j("qcobjects-sdk")?(r="qcobjects-sdk",o=!0):(r="node_modules/qcobjects-sdk/QCObjects-SDK",o=!0);o?(d.info("Importing SDK... "+r),k(r,function(){t?d.debug("QCObjects-SDK.js loaded from remote location"):d.debug("QCObjects-SDK.js loaded from local"),S("CONFIG").set("remoteImportsPath",e)},t)):d.debug("SDK has not been imported as it is not available at the moment")}.call(null)},null),n&&(Element.prototype.buildComponents=function(e=!1){var n=e?"component:not([loaded])":"component",r=this,a=function(e){for(var i=[],s=0;s<e.length;s++){var c={},l=e[s].getAttributeNames().filter(function(e){return e.startsWith("data-")}).map(function(e){return e.split("-")[1]});for(var u in l)c[l[u]]=e[s].getAttribute("data-"+l[u]);var d=function(){var e=this.body.getAttribute("viewClass"),t=S(e);void 0!==t&&(this.view=L(t,{component:this}),this.view.hasOwnProperty.call(this.view,"done")&&"function"==typeof this.view.done&&this.view.done.call(this.view));var o=this.body.getAttribute("controllerClass");o||(o="Controller");var i=S(o);void 0!==i&&(this.controller=L(i,{component:this}),this.controller.hasOwnProperty.call(this.controller,"done")&&"function"==typeof this.controller.done&&this.controller.done.call(this.controller),this.controller.createRoutingController());var s=this.body.getAttribute("effectClass"),c=S(s);void 0!==c&&(this.effect=L(c,{component:this}),this.effect.apply(this.effect.defaultParams)),this.subcomponents=a(this.body.subelements(n)),S("CONFIG").get("overrideComponentTag")&&(this.body.outerHTML=this.body.innerHTML),this.body.setAttribute("loaded",!0),this.runComponentHelpers(),100*H("component[loaded=true]").length/H("component:not([template-source=none])").length>=100&&r.dispatchEvent(new CustomEvent("componentsloaded",{detail:{lastComponent:this}}))};t(d);var h=null===e[s].getAttribute("shadowed"),p="true"===e[s].getAttribute("shadowed"),f=null===e[s].getAttribute("cached"),g="true"===e[s].getAttribute("cached"),m=void 0!==S("CONFIG").get("tplextension")?S("CONFIG").get("tplextension"):"html";m=null!==e[s].getAttribute("tplextension")?e[s].getAttribute("tplextension"):m;var b=null===e[s].getAttribute("template-source")?"default":e[s].getAttribute("template-source"),y=W({COMPONENTS_BASE_PATH:S("CONFIG").get("componentsBasePath"),COMPONENT_NAME:e[s].getAttribute("name").toString(),TPLEXTENSION:m,TPL_SOURCE:b}),v=e[s].getAttribute("name").toString();S("CONFIG").get("preserveComponentBodyTag")&&D("com.qcobjects.components."+v,[T("ComponentBody",S("Component"),{name:v,reload:!0})]);var _=null!==e[s].getAttribute("componentClass")?e[s].getAttribute("componentClass"):"Component",O=S("CONFIG").get("preserveComponentBodyTag")?"com.qcobjects.components."+v+".ComponentBody":_,C=h?S("Component").shadowed:p,w={name:v,data:c,cached:f?S("Component").cached:g,shadowed:C,tplextension:m,body:S("CONFIG").get("preserveComponentBodyTag")?o("componentBody"):e[s],templateURI:y,tplsource:b,subcomponents:[]};""===y&&delete w.templateURI;var N=L(S(O),w);S("CONFIG").get("preserveComponentBodyTag")&&e[s].append(N),N.done=d,i.push(N)}return i},i=r.subelements(n);return a(i)},HTMLDocument.prototype.buildComponents=Element.prototype.buildComponents,HTMLElement.prototype.buildComponents=Element.prototype.buildComponents),n||T("BackendMicroservice",Object,{domain:s,basePath:i,body:null,stream:null,request:null,cors:function(){if(this.route.cors){let{allow_origins:e,allow_credentials:t,allow_methods:n,allow_headers:o}=this.route.cors;if("object"!=typeof this.headers&&(this.headers={}),void 0!==e)if("*"===e||void 0===this.request.headers.origin||-1!==[...e].indexOf(this.request.headers.origin))this.headers["Access-Control-Allow-Origin"]="*";else{d.debug("Origin is not allowed: "+this.request.headers.origin),d.debug("Forcing to finish the response..."),this.body={};try{this.done()}catch(e){}}else this.headers["Access-Control-Allow-Origin"]="*";this.headers["Access-Control-Allow-Credentials"]=void 0!==t?t.toString():"true",this.headers["Access-Control-Allow-Methods"]=void 0!==n?[...n].join(","):"GET, OPTIONS, POST",this.headers["Access-Control-Allow-Headers"]=void 0!==o?[...o].join(","):"*"}},_new_:function(e){d.debug("Executing BackendMicroservice ");let t=this;t.body=null;let n=t.request;this.cors();let o=e.stream;t.stream=o,o.on("data",e=>{var o=n.method.toLowerCase(),r={post:t.post};r.hasOwnProperty.call(r,o)&&r[o].call(t,e)});var r=n.method.toLowerCase(),a={get:t.get,head:t.head,put:t.put,delete:t.delete,connect:t.connect,options:t.options,trace:t.trace,patch:t.patch};a.hasOwnProperty.call(a,r)&&a[r].call(t)},head:function(e){this.done()},get:function(e){this.done()},post:function(e){this.done()},put:function(e){this.done()},delete:function(e){this.done()},connect:function(e){this.done()},options:function(e){this.done()},trace:function(e){this.done()},patch:function(e){this.done()},finishWithBody:function(e){try{e.write(r(this.body)),e.end()}catch(e){d.debug("Something wrong writing the response for microservice"+e.toString())}},done:function(){var e=this.stream;e.respond(this.headers),null!==this.body&&this.finishWithBody.call(this,e)}}),T("SourceJS",Object,{domain:s,basePath:i,body:o("script"),url:"",data:{},async:!1,external:!1,set:function(e,t){this[e]=t},get:function(e){return this[e]},status:!1,done:function(){},fail:function(){},rebuild:function(){try{document.getElementsByTagName("body")[0].appendChild(function(e,t,n){return e.type="text/javascript",e.src=t,e.crossOrigin=n.hasOwnProperty.call(n,"crossOrigin")?n.crossOrigin:"anonymous",e.async=n.async,e.onreadystatechange=function(){"complete"===this.readyState&&n.done.call(n)},e.onload=function(e){n.status=!0,n.done.call(n,e)},e.onerror=function(e){n.status=!1,n.fail.call(n,e)},n.body=e,e}.call(this,o("script"),this.external?this.url:this.basePath+this.url,this))}catch(e){this.status=!1,this.fail.call(this,e)}},Cast:function(e){return E(this,e)},_new_:function(e){this.__new__(e),this.rebuild()}}),T("SourceCSS",Object,{domain:s,basePath:i,body:o("link"),url:"",data:{},async:!1,external:!1,set:function(e,t){this[e]=t},get:function(e){return this[e]},done:function(){},rebuild:function(){n&&window.document.getElementsByTagName("head")[0].appendChild(function(e,t,n){return e.type="text/css",e.rel="stylesheet",e.href=t,e.crossOrigin="anonymous",e.onreadystatechange=function(){"complete"===this.readyState&&n.done.call(n)},e.onload=n.done,n.body=e,e}.call(this,o("link"),this.external?this.url:this.basePath+this.url,this))},Cast:function(e){return E(this,e)},_new_:function(e){this.__new__(e),this.rebuild()}}),T("ArrayList",Array,[]),T("ArrayCollection",Object,{source:L(S("ArrayList"),[]),changed:function(e,t){d.debug("VALUE CHANGED"),d.debug(e),d.debug(t)},push:function(e){d.debug("VALUE ADDED"),d.debug(e),this.source.push(e)},pop:function(e){d.debug("VALUE POPPED"),d.debug(e),this.source.pop(e)},_new_:function(e){var t=this,n=0;for(var o in t.source=L(S("ArrayList"),e),t.source)isNaN(o)||(d.debug("binding "+o.toString()),function(e){Object.defineProperty(t,e,{set(n){d.debug("setting "+e+"="+n),t.source[e]=n,t.changed(e,n)},get:()=>t.source[e]})}(o),n++);t.source.length=n,Object.defineProperty(t,"length",{get:()=>t.source.length})}}),T("Effect",{duration:1e3,animate:function({timing:e,draw:t,duration:n}){let o=performance.now();requestAnimationFrame(function r(a){let i=(a-o)/n;i>1&&(i=1);let s=e(i);t(Math.round(100*s)),i<1?requestAnimationFrame(r):void 0!==this&&this.hasOwnProperty.call(this,"done")&&"function"===(typeof this.done).toLowerCase()&&this.done.call(this)})}}),T("TransitionEffect",S("Effect"),{duration:385,defaultParams:{alphaFrom:0,alphaTo:1,angleFrom:180,angleTo:0,radiusFrom:0,radiusTo:30,scaleFrom:0,scaleTo:1},fitToHeight:!1,fitToWidth:!1,effects:[],_new_:function(e){d.info("DECLARING TransitionEffect  "),this.component.defaultParams=this.defaultParams},apply:function({alphaFrom:e,alphaTo:t,angleFrom:n,angleTo:o,radiusFrom:r,radiusTo:a,scaleFrom:i,scaleTo:s}){for(var c in d.info("EXECUTING TransitionEffect  "),this.fitToHeight&&(this.component.body.height=this.component.body.offsetParent.scrollHeight),this.fitToWidth&&(this.component.body.width=this.component.body.offsetParent.scrollWidth),this.component.body.style.display="block",this.effects){var l=this.effects[c],u=A(l,"apply"),h=[this.component.body].concat(Object.values({alphaFrom:e,alphaTo:t,angleFrom:n,angleTo:o,radiusFrom:r,radiusTo:a,scaleFrom:i,scaleTo:s}));u.apply(this,h)}}}),T("Timer",{duration:1e3,alive:!0,thread:function({timing:e,intervalInterceptor:t,duration:n}){var o=this;let r=performance.now();requestAnimationFrame(function a(i){let s=i-r,c=s/n;c>1&&(c=1);let l=e(c,s);t(Math.round(100*l)),(c<1||-1===n)&&o.alive&&requestAnimationFrame(a)})}}),T("Toggle",S("InheritClass"),{_toggle:!1,_inverse:!0,_positive:null,_negative:null,_dispatched:null,_args:{},changeToggle:function(){this._toggle=!this._toggle},_new_:function({positive:e,negative:t,args:n}){this._positive=e,this._negative=t,this._args=n},fire:function(){var e=this,t=new Promise(function(n,o){"function"==typeof e._positive&&"function"==typeof e._negative?(e._inverse?e._dispatched=e._toggle?e._negative.bind(e):e._positive.bind(e):e._dispatched=e._toggle?e._positive.bind(e):e._negative.bind(e),e._dispatched.call(e,e._args),n.call(t,e)):(d.debug("Toggle functions are not declared"),o.call(t,e))}).then(function(e){e.changeToggle()}).catch(function(e){d.debug(e.toString())});return t}}),x(function(){S("CONFIG").get("useSDK")||global.__start__()}),F(F),F(k),F(D),F(T),F(L),F(H),F(x),F(q),F(n),F(function(e){var t=[];for(var n in e)"function"===(typeof e[n]).toLowerCase()&&t.push(e[n]);return t}),n||("undefined"!=typeof global&&global.hasOwnProperty.call(global,"_fireAsyncLoad")&&global._fireAsyncLoad.call(this),"undefined"!=typeof global&&global.hasOwnProperty.call(global,"onload")&&global.onload.call(this)),n&&u(function(){x(function(){window.onpopstate=function(e){e.stopImmediatePropagation(),e.stopPropagation(),S("Component").route()},H("*").map(function(e){return e.addEventListener("scroll",function(e){e.preventDefault();var t=Math.round(100*e.target.scrollTop/e.target.scrollHeight),n=Math.round(100*e.target.scrollLeft/e.target.scrollWidth),o=new CustomEvent("scrollpercent",{detail:{percentX:n,percentY:t}});e.target.dispatchEvent(o);var r="defaultscroll";switch(!0){case 0===t:r="percentY0";break;case 25===t:r="percentY25";break;case 50===t:r="percentY50";break;case 75===t:r="percentY75";break;case 90===t:r="percentY90"}var a=new CustomEvent(r,{detail:{percentX:n,percentY:t}});e.target.dispatchEvent(a)}),null})})},null)}).call(null,"object"==typeof module&&"object"==typeof module.exports?module.exports=global:"object"==typeof global?global:"object"==typeof window?window:{});