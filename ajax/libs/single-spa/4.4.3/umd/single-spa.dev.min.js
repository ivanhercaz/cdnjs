!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).singleSpa={})}(this,function(t){"use strict";var e=Object.freeze({__proto__:null,get start(){return Ft},get ensureJQuerySupport(){return bt},get setBootstrapMaxTime(){return G},get setMountMaxTime(){return q},get setUnmountMaxTime(){return k},get setUnloadMaxTime(){return F},get registerApplication(){return xt},get getMountedApps(){return St},get getAppStatus(){return jt},get unloadApplication(){return Mt},get checkActivityFunctions(){return Ut},get getAppNames(){return _t},get declareChildApplication(){return Dt},get unloadChildApplication(){return Ct},get navigateToUrl(){return ft},get triggerAppChange(){return Gt},get addErrorHandler(){return m},get removeErrorHandler(){return h},get mountRootParcel(){return et},get NOT_LOADED(){return g},get LOADING_SOURCE_CODE(){return w},get NOT_BOOTSTRAPPED(){return y},get BOOTSTRAPPING(){return b},get NOT_MOUNTED(){return E},get MOUNTING(){return O},get UPDATING(){return P},get LOAD_ERROR(){return S},get MOUNTED(){return T},get UNMOUNTING(){return A},get SKIP_BECAUSE_BROKEN(){return _}}),n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).CustomEvent;var l=function(){try{var t=new n("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}}()?n:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(t,n){var e=document.createEvent("CustomEvent");return n?e.initCustomEvent(t,n.bubbles,n.cancelable,n.detail):e.initCustomEvent(t,!1,!1,void 0),e}:function(t,n){var e=document.createEventObject();return e.type=t,n?(e.bubbles=Boolean(n.bubbles),e.cancelable=Boolean(n.cancelable),e.detail=n.detail):(e.bubbles=!1,e.cancelable=!1,e.detail=void 0),e};function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function o(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(i,!0).forEach(function(t){var n,e,r;n=o,r=i[e=t],e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):r(i).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))})}return o}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,n){return(a=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function u(t,n,e){return(u=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return e&&a(o,e.prototype),o}).apply(null,arguments)}function c(t){var r="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return u(t,arguments,i(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a(e,t)})(t)}function s(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}var f=[];function p(t,n){var e=v(t,n);f.length?f.forEach(function(t){return t(e)}):setTimeout(function(){throw e})}function m(t){if("function"!=typeof t)throw Error("a single-spa error handler must be a function");f.push(t)}function h(e){if("function"!=typeof e)throw Error("a single-spa error handler must be a function");var r=!1;return f=f.filter(function(t){var n=t===e;return r=r||n,!n}),r}function v(n,t){var e,r=t.unmountThisParcel?"Parcel":"Application",o="".concat(r," '").concat(t.name,"' died in status ").concat(t.status,": ");if(n instanceof Error){try{n.message=o+n.message}catch(t){}e=n}else{console.warn("While ".concat(t.status,", '").concat(t.name,"' rejected its lifecycle function promise with a non-Error. This will cause stack traces to not be accurate."));try{e=Error(o+JSON.stringify(n))}catch(t){e=n}}e.appName=t.name,e.appOrParcelName=t.name;try{e.name=t.name}catch(t){}return e}var g="NOT_LOADED",w="LOADING_SOURCE_CODE",y="NOT_BOOTSTRAPPED",b="BOOTSTRAPPING",E="NOT_MOUNTED",O="MOUNTING",T="MOUNTED",P="UPDATING",A="UNMOUNTING",N="UNLOADING",S="LOAD_ERROR",_="SKIP_BECAUSE_BROKEN";function j(t){return t.status===T}function D(t){return!j(t)}function x(t){return t.status!==g&&t.status!==w&&t.status!==S}function U(t){return!x(t)}function R(n){try{return n.activeWhen(window.location)}catch(t){p(t,n),n.status=_}}function C(n){try{return!n.activeWhen(window.location)}catch(t){p(t,n),n.status=_}}function M(t){return t!==_&&(!t||t.status!==_)}function I(t){return t.status!==S||200<=(new Date).getTime()-t.loadErrorTime}function L(t){return t.name}var B={bootstrap:{millis:4e3,dieOnTimeout:!1},mount:{millis:3e3,dieOnTimeout:!1},unmount:{millis:3e3,dieOnTimeout:!1},unload:{millis:3e3,dieOnTimeout:!1}};function G(t){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if("number"!=typeof t||t<=0)throw Error("bootstrap max time must be a positive integer number of milliseconds");B.bootstrap={millis:t,dieOnTimeout:n}}function q(t){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if("number"!=typeof t||t<=0)throw Error("mount max time must be a positive integer number of milliseconds");B.mount={millis:t,dieOnTimeout:n}}function k(t){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if("number"!=typeof t||t<=0)throw Error("unmount max time must be a positive integer number of milliseconds");B.unmount={millis:t,dieOnTimeout:n}}function F(t){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if("number"!=typeof t||t<=0)throw Error("unload max time must be a positive integer number of milliseconds");B.unload={millis:t,dieOnTimeout:n}}function W(t,u,c){return new Promise(function(n,r){var o=!1,i=!1;function a(t){if(!o)if(!0===t)i=!0,c.dieOnTimeout?r("".concat(u," did not resolve or reject for ").concat(c.millis," milliseconds")):console.error("".concat(u," did not resolve or reject for ").concat(c.millis," milliseconds -- we're no longer going to warn you about it."));else if(!i){var n=t,e=1e3*n;console.warn("".concat(u," did not resolve or reject within ").concat(e," milliseconds")),1e3+e<c.millis&&setTimeout(function(){return a(n+1)},1e3)}}t.then(function(t){o=!0,n(t)}).catch(function(t){o=!0,r(t)}),setTimeout(function(){return a(1)},1e3),setTimeout(function(){return a(!0)},c.millis)})}function K(t){return o({},B,{},0<arguments.length&&void 0!==t?t:{})}function H(t,n){for(var e=0;e<t.length;e++)if(n(t[e]))return t[e];return null}function $(t){return t&&("function"==typeof t||(n=t,Array.isArray(n)&&!H(n,function(t){return"function"!=typeof t})));var n}function J(a,u){return 0===(a=Array.isArray(a)?a:[a]).length&&(a=[function(){return Promise.resolve()}]),function(i){return new Promise(function(r,o){!function t(n){var e=a[n](i);Q(e)?e.then(function(){n===a.length-1?r():t(n+1)}).catch(o):o("".concat(u," at index ").concat(n," did not return a promise"))}(0)})}}function Q(t){return t&&"function"==typeof t.then&&"function"==typeof t.catch}function V(n){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return Promise.resolve().then(function(){return n.status!==y?n:(n.status=b,W(n.bootstrap(it(n)),"Bootstrapping appOrParcel '".concat(n.name,"'"),n.timeouts.bootstrap).then(function(){return n.status=E,n}).catch(function(t){if(n.status=_,e)throw v(t,n);return p(t,n),n}))})}function z(r){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return Promise.resolve().then(function(){if(r.status!==T)return r;r.status=A;var t=Object.keys(r.parcels).map(function(t){return r.parcels[t].unmountThisParcel()});return Promise.all(t).then(n,function(e){return n().then(function(){var t=Error(e.message);if(o){var n=v(t,r);throw r.status=_,n}p(t,r),r.status=_})}).then(function(){return r});function n(){return W(r.unmount(it(r)),"Unmounting application ".concat(r.name,"'"),r.timeouts.unmount).then(function(){r.status=E}).catch(function(t){if(o){var n=v(t,r);throw r.status=_,n}p(t,r),r.status=_})}})}var X=!1,Y=!1;function Z(e,t){var r=1<arguments.length&&void 0!==t&&t;return Promise.resolve().then(function(){return e.status!==E?e:(X||(window.dispatchEvent(new l("single-spa:before-first-mount")),X=!0),W(e.mount(it(e)),"Mounting application '".concat(e.name,"'"),e.timeouts.mount).then(function(){return e.status=T,Y||(window.dispatchEvent(new l("single-spa:first-mount")),Y=!0),e}).catch(function(n){return e.status=T,z(e).then(t,t);function t(){if(r){var t=v(n,e);throw e.status=_,t}return p(n,e),e.status=_,e}}))})}var tt=0,nt={parcels:{}};function et(){return rt.apply(nt,arguments)}function rt(t,n){var e=this;if(!t||"object"!==d(t)&&"function"!=typeof t)throw Error("Cannot mount parcel without a config object or config loading function");if(t.name&&"string"!=typeof t.name)throw Error("Parcel name must be a string, if provided");if("object"!==d(n))throw Error("Parcel ".concat(name," has invalid customProps -- must be an object"));if(!n.domElement)throw Error("Parcel ".concat(name," cannot be mounted without a domElement provided as a prop"));var i,a=tt++,r="function"==typeof t,o=r?t:function(){return Promise.resolve(t)},u={id:a,parcels:{},status:r?w:y,customProps:n,parentName:e.name,unmountThisParcel:function(){if(u.status!==T)throw Error("Cannot unmount parcel '".concat(name,"' -- it is in a ").concat(u.status," status"));return z(u,!0).then(function(t){return u.parentName&&delete e.parcels[u.id],t}).then(function(t){return s(t),t}).catch(function(t){throw u.status=_,f(t),t})}};e.parcels[a]=u;var c=o();if(!c||"function"!=typeof c.then)throw Error("When mounting a parcel, the config loading function must return a promise that resolves with the parcel config");var s,f,l=(c=c.then(function(t){if(!t)throw Error("When mounting a parcel, the config loading function returned a promise that did not resolve with a parcel config");var n=t.name||"parcel-".concat(a);if(!$(t.bootstrap))throw Error("Parcel ".concat(n," must have a valid bootstrap function"));if(!$(t.mount))throw Error("Parcel ".concat(n," must have a valid mount function"));if(!$(t.unmount))throw Error("Parcel ".concat(n," must have a valid unmount function"));if(t.update&&!$(t.update))throw Error("Parcel ".concat(n," provided an invalid update function"));var e=J(t.bootstrap),r=J(t.mount),o=J(t.unmount);u.status=y,u.name=n,u.bootstrap=e,u.mount=r,u.unmount=o,u.timeouts=K(t.timeouts),t.update&&(u.update=J(t.update),i.update=function(t){return u.customProps=t,ot((e=u,Promise.resolve().then(function(){if(e.status!==T)throw Error("Cannot update parcel '".concat(e.name,"' because it is not mounted"));return e.status=P,W(e.update(it(e)),"Updating parcel '".concat(e.name,"'"),e.timeouts.mount).then(function(){return e.status=T,e}).catch(function(t){var n=v(t,e);throw e.status=_,n})})));var e})})).then(function(){return V(u,!0)}),p=l.then(function(){return Z(u,!0)}),m=new Promise(function(t,n){s=t,f=n});return i={mount:function(){return ot(Promise.resolve().then(function(){if(u.status!==E)throw Error("Cannot mount parcel '".concat(name,"' -- it is in a ").concat(u.status," status"));return Z(e.parcels[a]=u)}))},unmount:function(){return ot(u.unmountThisParcel())},getStatus:function(){return u.status},loadPromise:ot(c),bootstrapPromise:ot(l),mountPromise:ot(p),unmountPromise:ot(m)}}function ot(t){return t.then(function(){return null})}function it(t){var n=o({},t.customProps,{name:t.name,mountParcel:rt.bind(t),singleSpa:e});return t.unmountThisParcel&&(n.unmountSelf=t.unmountThisParcel),n}var at=function(){function t(){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,i(t).apply(this,arguments))}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&a(t,n)}(t,c(Error)),t}();function ut(r){return Promise.resolve().then(function(){return r.status!==g&&r.status!==S?r:(r.status=w,Promise.resolve().then(function(){var t=r.loadImpl(it(r));if(!Q(t))throw new at("single-spa loading function did not return a promise. Check the second argument to registerApplication('".concat(r.name,"', loadingFunction, activityFunction)"));return t.then(function(t){var n;return r.loadErrorTime=null,"object"!==d(e=t)&&(n="does not export anything"),$(e.bootstrap)||(n="does not export a bootstrap function or array of functions"),$(e.mount)||(n="does not export a mount function or array of functions"),$(e.unmount)||(n="does not export an unmount function or array of functions"),n?(console.error("The loading function for single-spa application '".concat(r.name,"' resolved with the following, which does not have bootstrap, mount, and unmount functions"),e),p(n,r),r.status=_):(e.devtools&&e.devtools.overlays&&(r.devtools.overlays=o({},r.devtools.overlays,{},e.devtools.overlays)),r.status=y,r.bootstrap=J(e.bootstrap,"App '".concat(r.name,"' bootstrap function")),r.mount=J(e.mount,"App '".concat(r.name,"' mount function")),r.unmount=J(e.unmount,"App '".concat(r.name,"' unmount function")),r.unload=J(e.unload||[],"App '".concat(r.name,"' unload function")),r.timeouts=K(e.timeouts)),r})}).catch(function(t){return p(t,r),t instanceof at?r.status=_:(r.status=S,r.loadErrorTime=(new Date).getTime()),r}));var e})}var ct={hashchange:[],popstate:[]},st=["hashchange","popstate"];function ft(t){var n,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof t)n=t;else if(this&&this.href)n=this.href;else{if(!(t&&t.currentTarget&&t.currentTarget.href&&t.preventDefault))throw Error("singleSpaNavigate must be either called with a string url, with an <a> tag as its context, or with an event whose currentTarget is an <a> tag");n=t.currentTarget.href,t.preventDefault()}var r,o,i=wt(window.location.href),a=wt(n);if(0===n.indexOf("#"))window.location.hash="#"+a.anchor;else if(i.host!==a.host&&a.host){if(e.isTestingEnv)return{wouldHaveReloadedThePage:!0};window.location.href=n}else r=a.path+"?"+a.query,(o=i.path+"?"+i.query)!==r&&o!=="/"+r?window.history.pushState(null,null,n):window.location.hash="#"+a.anchor}function lt(n){var e=this;if(n){var t=n[0].type;0<=st.indexOf(t)&&ct[t].forEach(function(t){t.apply(e,n)})}}function pt(){qt([],arguments)}window.addEventListener("hashchange",pt),window.addEventListener("popstate",pt);var mt=window.addEventListener,dt=window.removeEventListener;window.addEventListener=function(t,n){if(!("function"==typeof n&&0<=st.indexOf(t))||H(ct[t],function(t){return t===n}))return mt.apply(this,arguments);ct[t].push(n)},window.removeEventListener=function(t,n){if(!("function"==typeof n&&0<=st.indexOf(t)))return dt.apply(this,arguments);ct[t]=ct[t].filter(function(t){return t!==n})};var ht=window.history.pushState;window.history.pushState=function(t){var n=ht.apply(this,arguments);return pt(gt(t)),n};var vt=window.history.replaceState;function gt(n){try{return new PopStateEvent("popstate",{state:n})}catch(t){var e=document.createEvent("PopStateEvent");return e.initPopStateEvent("popstate",!1,!1,n),e}}function wt(t){for(var r={strictMode:!0,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser.strict.exec(t),o={},e=14;e--;)o[r.key[e]]=n[e]||"";return o[r.q.name]={},o[r.key[12]].replace(r.q.parser,function(t,n,e){n&&(o[r.q.name][n]=e)}),o}window.history.replaceState=function(t){var n=vt.apply(this,arguments);return pt(gt(t)),n},window.singleSpaNavigate=ft;var yt=!1;function bt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.jQuery;if(t||window.$&&window.$.fn&&window.$.fn.jquery&&(t=window.$),t&&!yt){var e=t.fn.on,r=t.fn.off;t.fn.on=function(t,n){return Et.call(this,e,window.addEventListener,t,n,arguments)},t.fn.off=function(t,n){return Et.call(this,r,window.removeEventListener,t,n,arguments)},yt=!0}}function Et(t,n,e,r,o){return"string"!=typeof e?t.apply(this,o):(e.split(/\s+/).forEach(function(t){0<=st.indexOf(t)&&(n(t,r),e=e.replace(t,""))}),""===e.trim()?this:t.apply(this,o))}var Ot={};function Tt(i){return Promise.resolve().then(function(){var o=Ot[i.name];return o?i.status===g?(Pt(i,o),i):i.status===N?o.promise.then(function(){return i}):i.status!==E?i:(i.status=N,W(i.unload(it(i)),"Unloading application '".concat(i.name,"'"),i.timeouts.unload).then(function(){return Pt(i,o),i}).catch(function(t){var n,e,r;return e=o,r=t,delete Ot[(n=i).name],delete n.bootstrap,delete n.mount,delete n.unmount,delete n.unload,p(r,n),n.status=_,e.reject(r),i})):i})}function Pt(t,n){delete Ot[t.name],delete t.bootstrap,delete t.mount,delete t.unmount,delete t.unload,t.status=g,n.resolve()}function At(t,n,e,r){Ot[t.name]={app:t,resolve:e,reject:r},Object.defineProperty(Ot[t.name],"promise",{get:n})}var Nt=[];function St(){return Nt.filter(j).map(L)}function _t(){return Nt.map(L)}function jt(n){var t=H(Nt,function(t){return t.name===n});return t?t.status:null}function Dt(t,n,e){return console.warn('declareChildApplication is deprecated and will be removed in the next major version, use "registerApplication" instead'),xt(t,n,e)}function xt(t,n,e){var r,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if("string"!=typeof t||0===t.length)throw Error("The first argument must be a non-empty string 'appName'");if(-1!==_t().indexOf(t))throw Error("There is already an app declared with name ".concat(t));if("object"!==d(o)||Array.isArray(o))throw Error("customProps must be an object");if(!n)throw Error("The application or loading function is required");if(r="function"!=typeof n?function(){return Promise.resolve(n)}:n,"function"!=typeof e)throw Error("The activeWhen argument must be a function");Nt.push({loadErrorTime:null,name:t,loadImpl:r,activeWhen:e,status:g,parcels:{},devtools:{overlays:{options:{},selectors:[]}},customProps:o}),bt(),qt()}function Ut(t){for(var n=[],e=0;e<Nt.length;e++)Nt[e].activeWhen(t)&&n.push(Nt[e].name);return n}function Rt(){return Nt.filter(M).filter(I).filter(U).filter(R)}function Ct(t,n){return console.warn('unloadChildApplication is deprecated and will be removed in the next major version, use "unloadApplication" instead'),Mt(t,n)}function Mt(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{waitForUnmount:!1};if("string"!=typeof n)throw Error("unloadApplication requires a string 'appName'");var e=H(Nt,function(t){return t.name===n});if(!e)throw Error("Could not unload application '".concat(n,"' because no such application has been registered"));var r,o,i=(r=e.name,Ot[r]);if(t&&t.waitForUnmount){if(i)return i.promise;var a=new Promise(function(t,n){At(e,function(){return a},t,n)});return a}return i?(o=i.promise,It(e,i.resolve,i.reject)):o=new Promise(function(t,n){At(e,function(){return o},t,n),It(e,t,n)}),o}function It(t,n,e){z(t).then(Tt).then(function(){n(),setTimeout(function(){qt()})}).catch(e)}var Lt=!1,Bt=[];function Gt(){return qt()}function qt(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length?arguments[1]:void 0;if(Lt)return new Promise(function(t,n){Bt.push({resolve:t,reject:n,eventArguments:e})});var u=Lt=!0;return kt?Promise.resolve().then(function(){window.dispatchEvent(new l("single-spa:before-routing-event",f()));var t=Object.keys(Ot).map(function(t){return Ot[t].app}).filter(D).map(Tt),n=Nt.filter(M).filter(j).filter(C).map(z).map(function(t){return t.then(Tt)}).concat(t);0<n.length&&(u=!1);var e=Promise.all(n),r=Rt(),o=r.map(function(t){return ut(t).then(V).then(function(t){return e.then(function(){return Z(t)})})});0<o.length&&(u=!1);var i=Nt.filter(M).filter(D).filter(x).filter(R).filter(function(t){return r.indexOf(t)<0}).map(function(t){return V(t).then(function(){return e}).then(function(){return Z(t)})});return 0<i.length&&(u=!1),e.catch(function(t){throw s(),t}).then(function(){return s(),Promise.all(o.concat(i)).catch(function(n){throw a.forEach(function(t){return t.reject(n)}),n}).then(function(){return c(!1)})})}):Promise.resolve().then(function(){var t=Rt().map(ut);return 0<t.length&&(u=!1),Promise.all(t).then(c).catch(function(t){throw s(),t})});function c(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],n=St();t&&s(),a.forEach(function(t){return t.resolve(n)});try{var e=u?"single-spa:no-app-change":"single-spa:app-change";window.dispatchEvent(new l(e,f())),window.dispatchEvent(new l("single-spa:routing-event",f()))}catch(t){setTimeout(function(){throw t})}if(Lt=!1,0<Bt.length){var r=Bt;Bt=[],qt(r)}return n}function s(){a.forEach(function(t){lt(t.eventArguments)}),lt(e)}function f(){var t={detail:{}};return e&&e[0]&&(t.detail.originalEvent=e[0]),t}}var kt=!1;function Ft(){kt=!0,qt()}setTimeout(function(){kt||console.warn("singleSpa.start() has not been called, ".concat(5e3,"ms after single-spa was loaded. Before start() is called, apps can be declared and loaded, but not bootstrapped or mounted. See https://github.com/CanopyTax/single-spa/blob/master/docs/single-spa-api.md#start"))},5e3);var Wt={getRawAppData:function(){return[].concat(Nt)},reroute:qt,NOT_LOADED:g,toLoadPromise:ut,toBootstrapPromise:V,unregisterApplication:function(n){if(!Nt.find(function(t){return t.name===n}))throw Error("Cannot unregister application '".concat(n,"' because no such application has been registered"));return Mt(n).then(function(){var t=Nt.findIndex(function(t){return t.name===n});Nt.splice(t,1)})}};window&&window.__SINGLE_SPA_DEVTOOLS__&&(window.__SINGLE_SPA_DEVTOOLS__.exposedMethods=Wt),t.BOOTSTRAPPING=b,t.LOADING_SOURCE_CODE=w,t.LOAD_ERROR=S,t.MOUNTED=T,t.MOUNTING=O,t.NOT_BOOTSTRAPPED=y,t.NOT_LOADED=g,t.NOT_MOUNTED=E,t.SKIP_BECAUSE_BROKEN=_,t.UNMOUNTING=A,t.UPDATING=P,t.addErrorHandler=m,t.checkActivityFunctions=Ut,t.declareChildApplication=Dt,t.ensureJQuerySupport=bt,t.getAppNames=_t,t.getAppStatus=jt,t.getMountedApps=St,t.mountRootParcel=et,t.navigateToUrl=ft,t.registerApplication=xt,t.removeErrorHandler=h,t.setBootstrapMaxTime=G,t.setMountMaxTime=q,t.setUnloadMaxTime=F,t.setUnmountMaxTime=k,t.start=Ft,t.triggerAppChange=Gt,t.unloadApplication=Mt,t.unloadChildApplication=Ct,Object.defineProperty(t,"__esModule",{value:!0})});