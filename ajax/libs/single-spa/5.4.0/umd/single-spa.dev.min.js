!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).singleSpa={})}(this,function(t){"use strict";var o=Object.freeze({__proto__:null,get start(){return Ft},get ensureJQuerySupport(){return bt},get setBootstrapMaxTime(){return nt},get setMountMaxTime(){return et},get setUnmountMaxTime(){return rt},get setUnloadMaxTime(){return ot},get registerApplication(){return Dt},get getMountedApps(){return St},get getAppStatus(){return jt},get unloadApplication(){return xt},get checkActivityFunctions(){return Mt},get getAppNames(){return _t},get pathToActiveWhen(){return Ct},get navigateToUrl(){return pt},get triggerAppChange(){return Bt},get addErrorHandler(){return c},get removeErrorHandler(){return s},get mountRootParcel(){return V},get NOT_LOADED(){return m},get LOADING_SOURCE_CODE(){return g},get NOT_BOOTSTRAPPED(){return w},get BOOTSTRAPPING(){return f},get NOT_MOUNTED(){return y},get MOUNTING(){return l},get UPDATING(){return E},get LOAD_ERROR(){return P},get MOUNTED(){return b},get UNMOUNTING(){return T},get SKIP_BECAUSE_BROKEN(){return A}});function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return i(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return i(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).CustomEvent;var p=function(){try{var t=new e("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}}()?e:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(t,n){var e=document.createEvent("CustomEvent");return n?e.initCustomEvent(t,n.bubbles,n.cancelable,n.detail):e.initCustomEvent(t,!1,!1,void 0),e}:function(t,n){var e=document.createEventObject();return e.type=t,n?(e.bubbles=Boolean(n.bubbles),e.cancelable=Boolean(n.cancelable),e.detail=n.detail):(e.bubbles=!1,e.cancelable=!1,e.detail=void 0),e},a=[];function u(t,n,e){var r=v(t,n,e);a.length?a.forEach(function(t){return t(r)}):setTimeout(function(){throw r})}function c(t){if("function"!=typeof t)throw Error(d(28,"a single-spa error handler must be a function"));a.push(t)}function s(e){if("function"!=typeof e)throw Error(d(29,"a single-spa error handler must be a function"));var r=!1;return a=a.filter(function(t){var n=t===e;return r=r||n,!n}),r}function d(t,n){for(var e=arguments.length,r=new Array(2<e?e-2:0),o=2;o<e;o++)r[o-2]=arguments[o];return"single-spa minified message #".concat(t,": ").concat(n?n+" ":"","See https://single-spa.js.org/error/?code=").concat(t).concat(r.length?"&arg=".concat(r.join("&arg=")):"")}function v(n,t,e){var r,o="".concat(C(t)," '").concat(R(t),"' died in status ").concat(t.status,": ");if(n instanceof Error){try{n.message=o+n.message}catch(t){}r=n}else{console.warn(d(30,"While ".concat(t.status,", '").concat(R(t),"' rejected its lifecycle function promise with a non-Error. This will cause stack traces to not be accurate."),t.status,R(t)));try{r=Error(o+JSON.stringify(n))}catch(t){r=n}}return r.appOrParcelName=R(t),t.status=e,r}var m="NOT_LOADED",g="LOADING_SOURCE_CODE",w="NOT_BOOTSTRAPPED",f="BOOTSTRAPPING",y="NOT_MOUNTED",l="MOUNTING",b="MOUNTED",E="UPDATING",T="UNMOUNTING",O="UNLOADING",P="LOAD_ERROR",A="SKIP_BECAUSE_BROKEN";function N(t){return t.status===b}function S(t){return!N(t)}function _(t){return t.status!==m&&t.status!==g&&t.status!==P}function j(t){return!_(t)}function D(n){try{return n.activeWhen(window.location)}catch(t){return u(t,n,A),!1}}function M(t){return!D(t)}function U(t){return t!==A&&(!t||t.status!==A)}function x(t){return t.status!==P||200<=(new Date).getTime()-t.loadErrorTime}function R(t){return t.name}function I(t){return Boolean(t.unmountThisParcel)}function C(t){return I(t)?"parcel":"application"}function L(t){for(var n=arguments.length-1;0<n;n--)for(var e in arguments[n])"__proto__"!==e&&(arguments[n-1][e]=arguments[n][e]);return t}function W(t,n){for(var e=0;e<t.length;e++)if(n(t[e]))return t[e];return null}function B(t){return t&&("function"==typeof t||(n=t,Array.isArray(n)&&!W(n,function(t){return"function"!=typeof t})));var n}function G(t,o){var n=t[o]||[];0===(n=Array.isArray(n)?n:[n]).length&&(n=[function(){return Promise.resolve()}]);var i=C(t),a=R(t);return function(r){return n.reduce(function(t,n,e){return t.then(function(){var t=n(r);return k(t)?t:Promise.reject(d(15,"Within ".concat(i," ").concat(a,", the lifecycle function ").concat(o," at array index ").concat(e," did not return a promise"),i,a,o,e))})},Promise.resolve())}}function k(t){return t&&"function"==typeof t.then&&"function"==typeof t.catch}function $(n,e){return Promise.resolve().then(function(){return n.status!==w?n:(n.status=f,it(n,"bootstrap").then(function(){return n.status=y,n}).catch(function(t){if(e)throw v(t,n,A);return u(t,n,A),n}))})}function F(r,o){return Promise.resolve().then(function(){if(r.status!==b)return r;r.status=T;var t=Object.keys(r.parcels).map(function(t){return r.parcels[t].unmountThisParcel()});return Promise.all(t).then(e,function(n){return e().then(function(){var t=Error(n.message);if(o)throw v(t,r,A);u(t,r,A)})}).then(function(){return r});function e(){return it(r,"unmount").then(function(){r.status=y}).catch(function(t){if(o)throw v(t,r,A);u(t,r,A)})}})}var K=!1,H=!1;function J(e,r){return Promise.resolve().then(function(){return e.status!==y?e:(K||(window.dispatchEvent(new p("single-spa:before-first-mount")),K=!0),it(e,"mount").then(function(){return e.status=b,H||(window.dispatchEvent(new p("single-spa:first-mount")),H=!0),e}).catch(function(t){return e.status=b,F(e,!0).then(n,n);function n(){if(r)throw v(t,e,A);return u(t,e,A),e}}))})}var Q=0,q={parcels:{}};function V(){return z.apply(q,arguments)}function z(t,n){var e=this;if(!t||"object"!==h(t)&&"function"!=typeof t)throw Error(d(2,"Cannot mount parcel without a config object or config loading function"));if(t.name&&"string"!=typeof t.name)throw Error(d(3,"Parcel name must be a string, if provided. Was given ".concat(h(t.name)),h(t.name)));if("object"!==h(n))throw Error(d(4,"Parcel ".concat(name," has invalid customProps -- must be an object but was given ").concat(h(n)),name,h(n)));if(!n.domElement)throw Error(d(5,"Parcel ".concat(name," cannot be mounted without a domElement provided as a prop"),name));var i,a=Q++,r="function"==typeof t,o=r?t:function(){return Promise.resolve(t)},u={id:a,parcels:{},status:r?g:w,customProps:n,parentName:R(e),unmountThisParcel:function(){if(u.status!==b)throw Error(d(6,"Cannot unmount parcel '".concat(name,"' -- it is in a ").concat(u.status," status"),name,u.status));return F(u,!0).then(function(t){return u.parentName&&delete e.parcels[u.id],t}).then(function(t){return s(t),t}).catch(function(t){throw u.status=A,f(t),t})}};e.parcels[a]=u;var c=o();if(!c||"function"!=typeof c.then)throw Error(d(7,"When mounting a parcel, the config loading function must return a promise that resolves with the parcel config"));var s,f,l=(c=c.then(function(t){if(!t)throw Error(d(8,"When mounting a parcel, the config loading function returned a promise that did not resolve with a parcel config"));var n=t.name||"parcel-".concat(a);if(!B(t.bootstrap))throw Error(d(9,"Parcel ".concat(n," must have a valid bootstrap function"),n));if(!B(t.mount))throw Error(d(10,"Parcel ".concat(n," must have a valid mount function"),n));if(!B(t.unmount))throw Error(d(11,"Parcel ".concat(n," must have a valid unmount function"),n));if(t.update&&!B(t.update))throw Error(d(12,"Parcel ".concat(n," provided an invalid update function"),n));var e=G(t,"bootstrap"),r=G(t,"mount"),o=G(t,"unmount");u.status=w,u.name=n,u.bootstrap=e,u.mount=r,u.unmount=o,u.timeouts=at(t.timeouts),t.update&&(u.update=G(t,"update"),i.update=function(t){return u.customProps=t,X((n=u,Promise.resolve().then(function(){if(n.status!==b)throw Error(d(32,"Cannot update parcel '".concat(R(n),"' because it is not mounted"),R(n)));return n.status=E,it(n,"update").then(function(){return n.status=b,n}).catch(function(t){throw v(t,n,A)})})));var n})})).then(function(){return $(u,!0)}),p=l.then(function(){return J(u,!0)}),m=new Promise(function(t,n){s=t,f=n});return i={mount:function(){return X(Promise.resolve().then(function(){if(u.status!==y)throw Error(d(13,"Cannot mount parcel '".concat(name,"' -- it is in a ").concat(u.status," status"),name,u.status));return J(e.parcels[a]=u)}))},unmount:function(){return X(u.unmountThisParcel())},getStatus:function(){return u.status},loadPromise:X(c),bootstrapPromise:X(l),mountPromise:X(p),unmountPromise:X(m)}}function X(t){return t.then(function(){return null})}function Y(t){var n=R(t),e="function"==typeof t.customProps?t.customProps(n,window.location):t.customProps;"object"===h(e)&&null!==e&&!Array.isArray(e)||(e={},console.warn(d(40,"single-spa: ".concat(n,"'s customProps function must return an object. Received ").concat(e)),n,e));var r=L({},e,{name:n,mountParcel:z.bind(t),singleSpa:o});return I(t)&&(r.unmountSelf=t.unmountThisParcel),r}var Z=1e3,tt={bootstrap:{millis:4e3,dieOnTimeout:!1,warningMillis:Z},mount:{millis:3e3,dieOnTimeout:!1,warningMillis:Z},unmount:{millis:3e3,dieOnTimeout:!1,warningMillis:Z},unload:{millis:3e3,dieOnTimeout:!1,warningMillis:Z},update:{millis:3e3,dieOnTimeout:!1,warningMillis:Z}};function nt(t,n,e){if("number"!=typeof t||t<=0)throw Error(d(16,"bootstrap max time must be a positive integer number of milliseconds"));tt.bootstrap={millis:t,dieOnTimeout:n,warningMillis:e||Z}}function et(t,n,e){if("number"!=typeof t||t<=0)throw Error(d(17,"mount max time must be a positive integer number of milliseconds"));tt.mount={millis:t,dieOnTimeout:n,warningMillis:e||Z}}function rt(t,n,e){if("number"!=typeof t||t<=0)throw Error(d(18,"unmount max time must be a positive integer number of milliseconds"));tt.unmount={millis:t,dieOnTimeout:n,warningMillis:e||Z}}function ot(t,n,e){if("number"!=typeof t||t<=0)throw Error(d(19,"unload max time must be a positive integer number of milliseconds"));tt.unload={millis:t,dieOnTimeout:n,warningMillis:e||Z}}function it(t,e){var c=t.timeouts[e],s=c.warningMillis,f=C(t);return new Promise(function(n,r){var o=!1,i=!1;t[e](Y(t)).then(function(t){o=!0,n(t)}).catch(function(t){o=!0,r(t)}),setTimeout(function(){return u(1)},s),setTimeout(function(){return u(!0)},c.millis);var a=d(31,"Lifecycle function ".concat(e," for ").concat(f," ").concat(R(t)," lifecycle did not resolve or reject for ").concat(c.millis," ms."),e,f,R(t),c.millis);function u(t){if(!o)if(!0===t)i=!0,c.dieOnTimeout?r(Error(a)):console.error(a);else if(!i){var n=t,e=n*s;console.warn(a),e+s<c.millis&&setTimeout(function(){return u(n+1)},s)}}})}function at(t){var n={};for(var e in tt)n[e]=L({},tt[e],t&&t[e]||{});return n}function ut(a){return Promise.resolve().then(function(){return a.loadPromise?a.loadPromise:a.status!==m&&a.status!==P?a:(a.status=g,a.loadPromise=Promise.resolve().then(function(){var t=a.loadApp(Y(a));if(!k(t))throw e=!0,Error(d(33,"single-spa loading function did not return a promise. Check the second argument to registerApplication('".concat(R(a),"', loadingFunction, activityFunction)"),R(a)));return t.then(function(t){var n,e;a.loadErrorTime=null,"object"!==h(i=t)&&(e=34,n="does not export anything"),B(i.bootstrap)||(e=35,n="does not export a bootstrap function or array of functions"),B(i.mount)||(e=36,n="does not export a bootstrap function or array of functions"),B(i.unmount)||(e=37,n="does not export a bootstrap function or array of functions");var r=C(i);if(e){var o;try{o=JSON.stringify(i)}catch(t){}return console.error(d(e,"The loading function for single-spa ".concat(r," '").concat(R(a),"' resolved with the following, which does not have bootstrap, mount, and unmount functions"),r,R(a),o),i),u(n,a,A),a}return i.devtools&&i.devtools.overlays&&(a.devtools.overlays=L({},a.devtools.overlays,i.devtools.overlays)),a.status=w,a.bootstrap=G(i,"bootstrap"),a.mount=G(i,"mount"),a.unmount=G(i,"unmount"),a.unload=G(i,"unload"),a.timeouts=at(i.timeouts),delete a.loadPromise,a})}).catch(function(t){var n;return delete a.loadPromise,e?n=A:(n=P,a.loadErrorTime=(new Date).getTime()),u(t,a,n),a}));var i,e})}var ct,st="undefined"!=typeof window,ft={hashchange:[],popstate:[]},lt=["hashchange","popstate"];function pt(t){var n;if("string"==typeof t)n=t;else if(this&&this.href)n=this.href;else{if(!(t&&t.currentTarget&&t.currentTarget.href&&t.preventDefault))throw Error(d(14,"singleSpaNavigate/navigateToUrl must be either called with a string url, with an <a> tag as its context, or with an event whose currentTarget is an <a> tag"));n=t.currentTarget.href,t.preventDefault()}var e=wt(window.location.href),r=wt(n);0===n.indexOf("#")?window.location.hash=r.hash:e.host!==r.host&&r.host?window.location.href=n:r.pathname===e.pathname&&r.search===e.search?window.location.hash=r.hash:window.history.pushState(null,null,n)}function mt(n){var e=this;if(n){var t=n[0].type;0<=lt.indexOf(t)&&ft[t].forEach(function(t){try{t.apply(e,n)}catch(t){setTimeout(function(){throw t})}})}}function ht(){Gt([],arguments)}function dt(r,o){return function(){var t=window.location.href,n=r.apply(this,arguments),e=window.location.href;return ct&&t===e||ht(function(n,t){var e;try{e=new PopStateEvent("popstate",{state:n})}catch(t){(e=document.createEvent("PopStateEvent")).initPopStateEvent("popstate",!1,!1,n)}return e.singleSpa=!0,e.singleSpaTrigger=t,e}(window.history.state,o)),n}}if(st){window.addEventListener("hashchange",ht),window.addEventListener("popstate",ht);var vt=window.addEventListener,gt=window.removeEventListener;window.addEventListener=function(t,n){if(!("function"==typeof n&&0<=lt.indexOf(t))||W(ft[t],function(t){return t===n}))return vt.apply(this,arguments);ft[t].push(n)},window.removeEventListener=function(t,n){if(!("function"==typeof n&&0<=lt.indexOf(t)))return gt.apply(this,arguments);ft[t]=ft[t].filter(function(t){return t!==n})},window.history.pushState=dt(window.history.pushState,"pushState"),window.history.replaceState=dt(window.history.replaceState,"replaceState"),window.singleSpaNavigate=pt}function wt(t){var n=document.createElement("a");return n.href=t,n}var yt=!1;function bt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.jQuery;if(t||window.$&&window.$.fn&&window.$.fn.jquery&&(t=window.$),t&&!yt){var e=t.fn.on,r=t.fn.off;t.fn.on=function(t,n){return Et.call(this,e,window.addEventListener,t,n,arguments)},t.fn.off=function(t,n){return Et.call(this,r,window.removeEventListener,t,n,arguments)},yt=!0}}function Et(t,n,e,r,o){return"string"!=typeof e?t.apply(this,o):(e.split(/\s+/).forEach(function(t){0<=lt.indexOf(t)&&(n(t,r),e=e.replace(t,""))}),""===e.trim()?this:t.apply(this,o))}var Tt={};function Ot(i){return Promise.resolve().then(function(){var o=Tt[R(i)];return o?i.status===m?(Pt(i,o),i):i.status===O?o.promise.then(function(){return i}):i.status!==y?i:(i.status=O,it(i,"unload").then(function(){return Pt(i,o),i}).catch(function(t){var n,e,r;return e=o,r=t,delete Tt[R(n=i)],delete n.bootstrap,delete n.mount,delete n.unmount,delete n.unload,u(r,n,A),e.reject(r),i})):i})}function Pt(t,n){delete Tt[R(t)],delete t.bootstrap,delete t.mount,delete t.unmount,delete t.unload,t.status=m,n.resolve()}function At(t,n,e,r){Tt[R(t)]={app:t,resolve:e,reject:r},Object.defineProperty(Tt[R(t)],"promise",{get:n})}var Nt=[];function St(){return Nt.filter(N).map(R)}function _t(){return Nt.map(R)}function jt(n){var t=W(Nt,function(t){return R(t)===n});return t?t.status:null}function Dt(t,n,e,r){var o=function(t,n,e,r){var o="object"===h(t),i={name:null,loadApp:null,activeWhen:null,customProps:null};o?(function(t){if(Array.isArray(t)||null===t)throw Error(d(39,"Configuration object can't be an Array or null!"));var e=["name","app","activeWhen","customProps"],n=Object.keys(t).reduce(function(t,n){return e.includes(n)?t:t.concat(n)},[]);if(0!==n.length)throw Error(d(38,"The configuration object accepts only: ".concat(e.join(", "),". Invalid keys: ").concat(n.join(", "),"."),e.join(", "),n.join(", ")));if("string"!=typeof t.name||0===t.name.length)throw Error(d(20,"The config.name on registerApplication must be a non-empty string"));if("object"!==h(t.app)&&"function"!=typeof t.app)throw Error(d(20,"The config.app on registerApplication must be an application or a loading function"));function r(t){return"string"==typeof t||"function"==typeof t}if(!(r(t.activeWhen)||Array.isArray(t.activeWhen)&&t.activeWhen.every(r)))throw Error(d(24,"The config.activeWhen on registerApplication must be a string, function or an array with both"));if(!It(t.customProps))throw Error(d(22,"The optional config.customProps must be an object"))}(t),i.name=t.name,i.loadApp=t.app,i.activeWhen=t.activeWhen,i.customProps=t.customProps):(function(t,n,e,r){if("string"!=typeof t||0===t.length)throw Error(d(20,"The 1st argument to registerApplication must be a non-empty string 'appName'"));if(!n)throw Error(d(23,"The 2nd argument to registerApplication must be an application or loading application function"));if("function"!=typeof e)throw Error(d(24,"The 3rd argument to registerApplication must be an activeWhen function"));if(!It(r))throw Error(d(22,"The optional 4th argument is a customProps and must be an object"))}(t,n,e,r),i.name=t,i.loadApp=n,i.activeWhen=e,i.customProps=r);return i.loadApp=function(t){return"function"==typeof t?t:function(){return Promise.resolve(t)}}(i.loadApp),i.customProps=function(t){return t||{}}(i.customProps),i.activeWhen=function(t){var e=Array.isArray(t)?t:[t];return e=e.map(function(t){return"function"==typeof t?t:Ct(t)}),function(n){return e.some(function(t){return t(n)})}}(i.activeWhen),i}(t,n,e,r);if(-1!==_t().indexOf(o.name))throw Error(d(21,"There is already an app registered with name ".concat(o.name),o.name));Nt.push(L({loadErrorTime:null,status:m,parcels:{},devtools:{overlays:{options:{},selectors:[]}}},o)),st&&(bt(),Gt())}function Mt(n){return Nt.filter(function(t){return t.activeWhen(n)}).map(R)}function Ut(){return Nt.filter(U).filter(x).filter(j).filter(D)}function xt(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{waitForUnmount:!1};if("string"!=typeof n)throw Error(d(26,"unloadApplication requires a string 'appName'"));var e=W(Nt,function(t){return R(t)===n});if(!e)throw Error(d(27,"Could not unload application '".concat(n,"' because no such application has been registered"),n));var r,o,i=(r=R(e),Tt[r]);if(t&&t.waitForUnmount){if(i)return i.promise;var a=new Promise(function(t,n){At(e,function(){return a},t,n)});return a}return i?(o=i.promise,Rt(e,i.resolve,i.reject)):o=new Promise(function(t,n){At(e,function(){return o},t,n),Rt(e,t,n)}),o}function Rt(t,n,e){F(t).then(Ot).then(function(){n(),setTimeout(function(){Gt()})}).catch(e)}function It(t){return!t||"function"==typeof t||"object"===h(t)&&null!==t&&!Array.isArray(t)}function Ct(t){var e=function(e){for(var r=0,o=!1,i="^",t=0;t<e.length;t++){var n=e[t],a=o&&"/"===n;(!o&&":"===n||a)&&u(t)}return u(e.length),new RegExp(i,"i");function u(t){var n=e.slice(r,t).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");i+=o?"[^/]+/?":n,o=!o,r=t}}(t);return function(t){var n=t.href.replace(t.origin,"");return e.test(n)}}var Lt=!1,Wt=[];function Bt(){return Gt()}function Gt(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length?arguments[1]:void 0;if(Lt)return new Promise(function(t,n){Wt.push({resolve:t,reject:n,eventArguments:e})});var u=[];return $t?(Lt=!0,Promise.resolve().then(function(){window.dispatchEvent(new p("single-spa:before-routing-event",l()));var t=c(Object.keys(Tt).map(function(t){return Tt[t].app}).filter(S)).map(Ot),n=c(Nt.filter(U).filter(N).filter(M)).map(F).map(function(t){return t.then(Ot)}).concat(t),e=Promise.all(n);e.then(function(){window.dispatchEvent(new p("single-spa:before-mount-routing-event",l()))});var r=c(Ut()),o=r.map(function(t){return ut(t).then(function(t){return kt(t,e)})}),i=Nt.filter(U).filter(S).filter(_).filter(D).filter(function(t){return r.indexOf(t)<0}).map(function(t){return u.push(t),kt(t,e)});return e.catch(function(t){throw f(),t}).then(function(){return f(),Promise.all(o.concat(i)).catch(function(n){throw a.forEach(function(t){return t.reject(n)}),n}).then(s)})})):Promise.resolve().then(function(){var t=c(Ut()).map(ut);return Promise.all(t).then(f).then(function(){return[]}).catch(function(t){throw f(),t})});function c(t){return u.push.apply(u,r(t)),t}function s(){var n=St();a.forEach(function(t){return t.resolve(n)});try{var t=0===u.length?"single-spa:no-app-change":"single-spa:app-change";window.dispatchEvent(new p(t,l())),window.dispatchEvent(new p("single-spa:routing-event",l()))}catch(t){setTimeout(function(){throw t})}if(Lt=!1,0<Wt.length){var e=Wt;Wt=[],Gt(e)}return n}function f(){a.forEach(function(t){mt(t.eventArguments)}),mt(e)}function l(){var t,r={},o=(n(t={},b,[]),n(t,y,[]),n(t,m,[]),n(t,A,[]),t);return u.forEach(function(t){var n=R(t),e=jt(n);r[n]=e,(o[e]=o[e]||[]).push(n)}),{detail:{newAppStatuses:r,appsByNewStatus:o,totalAppChanges:u.length,originalEvent:null==e?void 0:e[0]}}}}function kt(t,n){return D(t)?$(t).then(function(t){return n.then(function(){return D(t)?J(t):t})}):n.then(function(){return t})}var $t=!1;function Ft(t){var n;$t=!0,t&&t.urlRerouteOnly&&(n=t.urlRerouteOnly,ct=n),st&&Gt()}st&&setTimeout(function(){$t||console.warn(d(1,"singleSpa.start() has not been called, 5000ms after single-spa was loaded. Before start() is called, apps can be declared and loaded, but not bootstrapped or mounted."))},5e3);var Kt={getRawAppData:function(){return[].concat(Nt)},reroute:Gt,NOT_LOADED:m,toLoadPromise:ut,toBootstrapPromise:$,unregisterApplication:function(n){if(!Nt.find(function(t){return R(t)===n}))throw Error(d(25,"Cannot unregister application '".concat(n,"' because no such application has been registered"),n));return xt(n).then(function(){var t=Nt.findIndex(function(t){return R(t)===n});Nt.splice(t,1)})}};st&&window.__SINGLE_SPA_DEVTOOLS__&&(window.__SINGLE_SPA_DEVTOOLS__.exposedMethods=Kt),t.BOOTSTRAPPING=f,t.LOADING_SOURCE_CODE=g,t.LOAD_ERROR=P,t.MOUNTED=b,t.MOUNTING=l,t.NOT_BOOTSTRAPPED=w,t.NOT_LOADED=m,t.NOT_MOUNTED=y,t.SKIP_BECAUSE_BROKEN=A,t.UNMOUNTING=T,t.UPDATING=E,t.addErrorHandler=c,t.checkActivityFunctions=Mt,t.ensureJQuerySupport=bt,t.getAppNames=_t,t.getAppStatus=jt,t.getMountedApps=St,t.mountRootParcel=V,t.navigateToUrl=pt,t.pathToActiveWhen=Ct,t.registerApplication=Dt,t.removeErrorHandler=s,t.setBootstrapMaxTime=nt,t.setMountMaxTime=et,t.setUnloadMaxTime=ot,t.setUnmountMaxTime=rt,t.start=Ft,t.triggerAppChange=Bt,t.unloadApplication=xt,Object.defineProperty(t,"__esModule",{value:!0})});