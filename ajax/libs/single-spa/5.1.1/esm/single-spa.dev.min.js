var singleSpa=Object.freeze({__proto__:null,get start(){return start},get ensureJQuerySupport(){return ensureJQuerySupport},get setBootstrapMaxTime(){return setBootstrapMaxTime},get setMountMaxTime(){return setMountMaxTime},get setUnmountMaxTime(){return setUnmountMaxTime},get setUnloadMaxTime(){return setUnloadMaxTime},get registerApplication(){return registerApplication},get getMountedApps(){return getMountedApps},get getAppStatus(){return getAppStatus},get unloadApplication(){return unloadApplication},get checkActivityFunctions(){return checkActivityFunctions},get getAppNames(){return getAppNames},get navigateToUrl(){return navigateToUrl},get triggerAppChange(){return triggerAppChange},get addErrorHandler(){return addErrorHandler},get removeErrorHandler(){return removeErrorHandler},get mountRootParcel(){return mountRootParcel},get NOT_LOADED(){return NOT_LOADED},get LOADING_SOURCE_CODE(){return LOADING_SOURCE_CODE},get NOT_BOOTSTRAPPED(){return NOT_BOOTSTRAPPED},get BOOTSTRAPPING(){return BOOTSTRAPPING},get NOT_MOUNTED(){return NOT_MOUNTED},get MOUNTING(){return MOUNTING},get UPDATING(){return UPDATING},get LOAD_ERROR(){return LOAD_ERROR},get MOUNTED(){return MOUNTED},get UNMOUNTING(){return UNMOUNTING},get SKIP_BECAUSE_BROKEN(){return SKIP_BECAUSE_BROKEN}}),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},NativeCustomEvent=commonjsGlobal.CustomEvent;function useNative(){try{var e=new NativeCustomEvent("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}var customEvent=useNative()?NativeCustomEvent:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var r=document.createEvent("CustomEvent");return t?r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):r.initCustomEvent(e,!1,!1,void 0),r}:function(e,t){var r=document.createEventObject();return r.type=e,t?(r.bubbles=Boolean(t.bubbles),r.cancelable=Boolean(t.cancelable),r.detail=t.detail):(r.bubbles=!1,r.cancelable=!1,r.detail=void 0),r},errorHandlers=[];function handleAppError(e,t,r){var n=transformErr(e,t,r);errorHandlers.length?errorHandlers.forEach(e=>e(n)):setTimeout(()=>{throw n})}function addErrorHandler(e){if("function"!=typeof e)throw Error(formatErrorMessage(28,"a single-spa error handler must be a function"));errorHandlers.push(e)}function removeErrorHandler(e){if("function"!=typeof e)throw Error(formatErrorMessage(29,"a single-spa error handler must be a function"));var t=!1;return errorHandlers=errorHandlers.filter(r=>{var n=r===e;return t=t||n,!n}),t}function formatErrorMessage(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return"single-spa minified message #".concat(e,": ").concat(t?t+" ":"","See https://single-spa.js.org/error/?code=").concat(e).concat(n.length?"&arg=".concat(n.join("&arg=")):"")}function transformErr(e,t,r){var n,o="".concat(objectType(t)," '").concat(toName(t),"' died in status ").concat(t.status,": ");if(e instanceof Error){try{e.message=o+e.message}catch(e){}n=e}else{console.warn(formatErrorMessage(30,"While ".concat(t.status,", '").concat(toName(t),"' rejected its lifecycle function promise with a non-Error. This will cause stack traces to not be accurate."),t.status,toName(t)));try{n=Error(o+JSON.stringify(e))}catch(t){n=e}}return n.appOrParcelName=toName(t),t.status=r,n}var NOT_LOADED="NOT_LOADED",LOADING_SOURCE_CODE="LOADING_SOURCE_CODE",NOT_BOOTSTRAPPED="NOT_BOOTSTRAPPED",BOOTSTRAPPING="BOOTSTRAPPING",NOT_MOUNTED="NOT_MOUNTED",MOUNTING="MOUNTING",MOUNTED="MOUNTED",UPDATING="UPDATING",UNMOUNTING="UNMOUNTING",UNLOADING="UNLOADING",LOAD_ERROR="LOAD_ERROR",SKIP_BECAUSE_BROKEN="SKIP_BECAUSE_BROKEN";function isActive(e){return e.status===MOUNTED}function isntActive(e){return!isActive(e)}function isLoaded(e){return e.status!==NOT_LOADED&&e.status!==LOADING_SOURCE_CODE&&e.status!==LOAD_ERROR}function isntLoaded(e){return!isLoaded(e)}function shouldBeActive(e){try{return e.activeWhen(window.location)}catch(t){handleAppError(t,e,SKIP_BECAUSE_BROKEN)}}function shouldntBeActive(e){try{return!e.activeWhen(window.location)}catch(t){handleAppError(t,e,SKIP_BECAUSE_BROKEN)}}function notSkipped(e){return e!==SKIP_BECAUSE_BROKEN&&(!e||e.status!==SKIP_BECAUSE_BROKEN)}function withoutLoadErrors(e){return e.status!==LOAD_ERROR||(new Date).getTime()-e.loadErrorTime>=200}function toName(e){return e.name}function isParcel(e){return Boolean(e.unmountThisParcel)}function objectType(e){return isParcel(e)?"parcel":"application"}function assign(){for(var e=arguments.length-1;e>0;e--)for(var t in arguments[e])"__proto__"!==t&&(arguments[e-1][t]=arguments[e][t]);return arguments[0]}function find(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return e[r];return null}function validLifecycleFn(e){return e&&("function"==typeof e||(t=e,Array.isArray(t)&&!find(t,e=>"function"!=typeof e)));var t}function flattenFnArray(e,t){var r=e[t]||[];0===(r=Array.isArray(r)?r:[r]).length&&(r=[()=>Promise.resolve()]);var n=objectType(e),o=toName(e);return function(e){return r.reduce((r,a,i)=>r.then(()=>{var r=a(e);return smellsLikeAPromise(r)?r:Promise.reject(formatErrorMessage(15,"Within ".concat(n," ").concat(o,", the lifecycle function ").concat(t," at array index ").concat(i," did not return a promise"),n,o,t,i))}),Promise.resolve())}}function smellsLikeAPromise(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}function toBootstrapPromise(e,t){return Promise.resolve().then(()=>e.status!==NOT_BOOTSTRAPPED?e:(e.status=BOOTSTRAPPING,reasonableTime(e,"bootstrap").then(()=>(e.status=NOT_MOUNTED,e)).catch(r=>{if(t)throw transformErr(r,e,SKIP_BECAUSE_BROKEN);return handleAppError(r,e,SKIP_BECAUSE_BROKEN),e})))}function toUnmountPromise(e,t){return Promise.resolve().then(()=>{if(e.status!==MOUNTED)return e;e.status=UNMOUNTING;var r=Object.keys(e.parcels).map(t=>e.parcels[t].unmountThisParcel());return Promise.all(r).then(n,r=>n().then(()=>{var n=Error(r.message);if(t)throw transformErr(n,e,SKIP_BECAUSE_BROKEN);handleAppError(n,e,SKIP_BECAUSE_BROKEN)})).then(()=>e);function n(){return reasonableTime(e,"unmount").then(()=>{e.status=NOT_MOUNTED}).catch(r=>{if(t)throw transformErr(r,e,SKIP_BECAUSE_BROKEN);handleAppError(r,e,SKIP_BECAUSE_BROKEN)})}})}var beforeFirstMountFired=!1,firstMountFired=!1;function toMountPromise(e,t){return Promise.resolve().then(()=>e.status!==NOT_MOUNTED?e:(beforeFirstMountFired||(window.dispatchEvent(new customEvent("single-spa:before-first-mount")),beforeFirstMountFired=!0),reasonableTime(e,"mount").then(()=>(e.status=MOUNTED,firstMountFired||(window.dispatchEvent(new customEvent("single-spa:first-mount")),firstMountFired=!0),e)).catch(r=>{return e.status=MOUNTED,toUnmountPromise(e).then(n,n);function n(){if(t)throw transformErr(r,e,SKIP_BECAUSE_BROKEN);return handleAppError(r,e,SKIP_BECAUSE_BROKEN),e}})))}function toUpdatePromise(e){return Promise.resolve().then(()=>{if(e.status!==MOUNTED)throw Error(formatErrorMessage(32,"Cannot update parcel '".concat(toName(e),"' because it is not mounted"),toName(e)));return e.status=UPDATING,reasonableTime(e,"update").then(()=>(e.status=MOUNTED,e)).catch(t=>{throw transformErr(t,e,SKIP_BECAUSE_BROKEN)})})}var parcelCount=0,rootParcels={parcels:{}};function mountRootParcel(){return mountParcel.apply(rootParcels,arguments)}function mountParcel(e,t){var r=this;if(!e||"object"!=typeof e&&"function"!=typeof e)throw Error(formatErrorMessage(2,"Cannot mount parcel without a config object or config loading function"));if(e.name&&"string"!=typeof e.name)throw Error(formatErrorMessage(3,"Parcel name must be a string, if provided. Was given ".concat(typeof e.name),typeof e.name));if("object"!=typeof t)throw Error(formatErrorMessage(4,"Parcel ".concat(name," has invalid customProps -- must be an object but was given ").concat(typeof t),name,typeof t));if(!t.domElement)throw Error(formatErrorMessage(5,"Parcel ".concat(name," cannot be mounted without a domElement provided as a prop"),name));var n,o=parcelCount++,a="function"==typeof e,i=a?e:()=>Promise.resolve(e),s={id:o,parcels:{},status:a?LOADING_SOURCE_CODE:NOT_BOOTSTRAPPED,customProps:t,parentName:toName(r),unmountThisParcel(){if(s.status!==MOUNTED)throw Error(formatErrorMessage(6,"Cannot unmount parcel '".concat(name,"' -- it is in a ").concat(s.status," status"),name,s.status));return toUnmountPromise(s,!0).then(e=>(s.parentName&&delete r.parcels[s.id],e)).then(e=>(l(e),e)).catch(e=>{throw s.status=SKIP_BECAUSE_BROKEN,p(e),e})}};r.parcels[o]=s;var u=i();if(!u||"function"!=typeof u.then)throw Error(formatErrorMessage(7,"When mounting a parcel, the config loading function must return a promise that resolves with the parcel config"));var l,p,c=(u=u.then(e=>{if(!e)throw Error(formatErrorMessage(8,"When mounting a parcel, the config loading function returned a promise that did not resolve with a parcel config"));var t=e.name||"parcel-".concat(o);if(!validLifecycleFn(e.bootstrap))throw Error(formatErrorMessage(9,"Parcel ".concat(t," must have a valid bootstrap function"),t));if(!validLifecycleFn(e.mount))throw Error(formatErrorMessage(10,"Parcel ".concat(t," must have a valid mount function"),t));if(!validLifecycleFn(e.unmount))throw Error(formatErrorMessage(11,"Parcel ".concat(t," must have a valid unmount function"),t));if(e.update&&!validLifecycleFn(e.update))throw Error(formatErrorMessage(12,"Parcel ".concat(t," provided an invalid update function"),t));var r=flattenFnArray(e,"bootstrap"),a=flattenFnArray(e,"mount"),i=flattenFnArray(e,"unmount");s.status=NOT_BOOTSTRAPPED,s.name=t,s.bootstrap=r,s.mount=a,s.unmount=i,s.timeouts=ensureValidAppTimeouts(e.timeouts),e.update&&(s.update=flattenFnArray(e,"update"),n.update=function(e){return s.customProps=e,promiseWithoutReturnValue(toUpdatePromise(s))})})).then(()=>toBootstrapPromise(s,!0)),m=c.then(()=>toMountPromise(s,!0)),d=new Promise((e,t)=>{l=e,p=t});return n={mount:()=>promiseWithoutReturnValue(Promise.resolve().then(()=>{if(s.status!==NOT_MOUNTED)throw Error(formatErrorMessage(13,"Cannot mount parcel '".concat(name,"' -- it is in a ").concat(s.status," status"),name,s.status));return r.parcels[o]=s,toMountPromise(s)})),unmount:()=>promiseWithoutReturnValue(s.unmountThisParcel()),getStatus:()=>s.status,loadPromise:promiseWithoutReturnValue(u),bootstrapPromise:promiseWithoutReturnValue(c),mountPromise:promiseWithoutReturnValue(m),unmountPromise:promiseWithoutReturnValue(d)}}function promiseWithoutReturnValue(e){return e.then(()=>null)}function getProps(e){var t=assign({},e.customProps,{name:toName(e),mountParcel:mountParcel.bind(e),singleSpa:singleSpa});return isParcel(e)&&(t.unmountSelf=e.unmountThisParcel),t}var defaultWarningMillis=1e3,globalTimeoutConfig={bootstrap:{millis:4e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},mount:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},unmount:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},unload:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},update:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis}};function setBootstrapMaxTime(e,t,r){if("number"!=typeof e||e<=0)throw Error(formatErrorMessage(16,"bootstrap max time must be a positive integer number of milliseconds"));globalTimeoutConfig.bootstrap={millis:e,dieOnTimeout:t,warningMillis:r||defaultWarningMillis}}function setMountMaxTime(e,t,r){if("number"!=typeof e||e<=0)throw Error(formatErrorMessage(17,"mount max time must be a positive integer number of milliseconds"));globalTimeoutConfig.mount={millis:e,dieOnTimeout:t,warningMillis:r||defaultWarningMillis}}function setUnmountMaxTime(e,t,r){if("number"!=typeof e||e<=0)throw Error(formatErrorMessage(18,"unmount max time must be a positive integer number of milliseconds"));globalTimeoutConfig.unmount={millis:e,dieOnTimeout:t,warningMillis:r||defaultWarningMillis}}function setUnloadMaxTime(e,t,r){if("number"!=typeof e||e<=0)throw Error(formatErrorMessage(19,"unload max time must be a positive integer number of milliseconds"));globalTimeoutConfig.unload={millis:e,dieOnTimeout:t,warningMillis:r||defaultWarningMillis}}function reasonableTime(e,t){var r=e.timeouts[t],n=r.warningMillis,o=objectType(e);return new Promise((a,i)=>{var s=!1,u=!1;e[t](getProps(e)).then(e=>{s=!0,a(e)}).catch(e=>{s=!0,i(e)}),setTimeout(()=>p(1),n),setTimeout(()=>p(!0),r.millis);var l=formatErrorMessage(31,"Lifecycle function ".concat(t," for ").concat(o," ").concat(toName(e)," lifecycle did not resolve or reject for ").concat(r.millis," ms."),t,o,toName(e),r.millis);function p(e){if(!s)if(!0===e)u=!0,r.dieOnTimeout?i(Error(l)):console.error(l);else if(!u){var t=e,o=t*n;console.warn(l),o+n<r.millis&&setTimeout(()=>p(t+1),n)}}})}function ensureValidAppTimeouts(e){var t={};for(var r in globalTimeoutConfig)t[r]=assign({},globalTimeoutConfig[r],e&&e[r]||{});return t}function toLoadPromise(e){return Promise.resolve().then(()=>{return e.loadPromise?e.loadPromise:e.status!==NOT_LOADED&&e.status!==LOAD_ERROR?e:(e.status=LOADING_SOURCE_CODE,e.loadPromise=Promise.resolve().then(()=>{var n=e.loadImpl(getProps(e));if(!smellsLikeAPromise(n))throw r=!0,Error(formatErrorMessage(33,"single-spa loading function did not return a promise. Check the second argument to registerApplication('".concat(toName(e),"', loadingFunction, activityFunction)"),toName(e)));return n.then(r=>{var n,o;e.loadErrorTime=null,"object"!=typeof(t=r)&&(o=34,n="does not export anything"),validLifecycleFn(t.bootstrap)||(o=35,n="does not export a bootstrap function or array of functions"),validLifecycleFn(t.mount)||(o=36,n="does not export a bootstrap function or array of functions"),validLifecycleFn(t.unmount)||(o=37,n="does not export a bootstrap function or array of functions");var a=objectType(t);if(o){var i;try{i=JSON.stringify(t)}catch(e){}return console.error(formatErrorMessage(o,"The loading function for single-spa ".concat(a," '").concat(toName(e),"' resolved with the following, which does not have bootstrap, mount, and unmount functions"),a,toName(e),i),t),handleAppError(n,e,SKIP_BECAUSE_BROKEN),e}return t.devtools&&t.devtools.overlays&&(e.devtools.overlays=assign({},e.devtools.overlays,t.devtools.overlays)),e.status=NOT_BOOTSTRAPPED,e.bootstrap=flattenFnArray(t,"bootstrap"),e.mount=flattenFnArray(t,"mount"),e.unmount=flattenFnArray(t,"unmount"),e.unload=flattenFnArray(t,"unload"),e.timeouts=ensureValidAppTimeouts(t.timeouts),delete e.loadPromise,e})}).catch(t=>{var n;return delete e.loadPromise,r?n=SKIP_BECAUSE_BROKEN:(n=LOAD_ERROR,e.loadErrorTime=(new Date).getTime()),handleAppError(t,e,n),e}));var t,r})}var capturedEventListeners={hashchange:[],popstate:[]},routingEventsListeningTo=["hashchange","popstate"];function navigateToUrl(e){var t;if("string"==typeof e)t=e;else if(this&&this.href)t=this.href;else{if(!(e&&e.currentTarget&&e.currentTarget.href&&e.preventDefault))throw Error(formatErrorMessage(14,"singleSpaNavigate/navigateToUrl must be either called with a string url, with an <a> tag as its context, or with an event whose currentTarget is an <a> tag"));t=e.currentTarget.href,e.preventDefault()}var r=parseUri(window.location.href),n=parseUri(t);0===t.indexOf("#")?window.location.hash=n.hash:r.host!==n.host&&n.host?window.location.href=t:n.pathname===r.pathname&&n.search===r.pathname?window.location.hash=n.hash:window.history.pushState(null,null,t)}function callCapturedEventListeners(e){if(e){var t=e[0].type;routingEventsListeningTo.indexOf(t)>=0&&capturedEventListeners[t].forEach(t=>{try{t.apply(this,e)}catch(e){setTimeout(()=>{throw e})}})}}function urlReroute(){reroute([],arguments)}window.addEventListener("hashchange",urlReroute),window.addEventListener("popstate",urlReroute);var originalAddEventListener=window.addEventListener,originalRemoveEventListener=window.removeEventListener;window.addEventListener=function(e,t){if(!("function"==typeof t&&routingEventsListeningTo.indexOf(e)>=0)||find(capturedEventListeners[e],e=>e===t))return originalAddEventListener.apply(this,arguments);capturedEventListeners[e].push(t)},window.removeEventListener=function(e,t){if(!("function"==typeof t&&routingEventsListeningTo.indexOf(e)>=0))return originalRemoveEventListener.apply(this,arguments);capturedEventListeners[e]=capturedEventListeners[e].filter(e=>e!==t)};var originalPushState=window.history.pushState;window.history.pushState=function(e){var t=originalPushState.apply(this,arguments);return urlReroute(createPopStateEvent(e)),t};var originalReplaceState=window.history.replaceState;function createPopStateEvent(e){try{return new PopStateEvent("popstate",{state:e})}catch(r){var t=document.createEvent("PopStateEvent");return t.initPopStateEvent("popstate",!1,!1,e),t}}function parseUri(e){var t=document.createElement("a");return t.href=e,t}window.history.replaceState=function(e){var t=originalReplaceState.apply(this,arguments);return urlReroute(createPopStateEvent(e)),t},window.singleSpaNavigate=navigateToUrl;var hasInitialized=!1;function ensureJQuerySupport(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.jQuery;if(e||window.$&&window.$.fn&&window.$.fn.jquery&&(e=window.$),e&&!hasInitialized){var t=e.fn.on,r=e.fn.off;e.fn.on=function(e,r){return captureRoutingEvents.call(this,t,window.addEventListener,e,r,arguments)},e.fn.off=function(e,t){return captureRoutingEvents.call(this,r,window.removeEventListener,e,t,arguments)},hasInitialized=!0}}function captureRoutingEvents(e,t,r,n,o){return"string"!=typeof r?e.apply(this,o):(r.split(/\s+/).forEach(e=>{routingEventsListeningTo.indexOf(e)>=0&&(t(e,n),r=r.replace(e,""))}),""===r.trim()?this:e.apply(this,o))}var appsToUnload={};function toUnloadPromise(e){return Promise.resolve().then(()=>{var t=appsToUnload[toName(e)];return t?e.status===NOT_LOADED?(finishUnloadingApp(e,t),e):e.status===UNLOADING?t.promise.then(()=>e):e.status!==NOT_MOUNTED?e:(e.status=UNLOADING,reasonableTime(e,"unload").then(()=>(finishUnloadingApp(e,t),e)).catch(r=>(errorUnloadingApp(e,t,r),e))):e})}function finishUnloadingApp(e,t){delete appsToUnload[toName(e)],delete e.bootstrap,delete e.mount,delete e.unmount,delete e.unload,e.status=NOT_LOADED,t.resolve()}function errorUnloadingApp(e,t,r){delete appsToUnload[toName(e)],delete e.bootstrap,delete e.mount,delete e.unmount,delete e.unload,handleAppError(r,e,SKIP_BECAUSE_BROKEN),t.reject(r)}function addAppToUnload(e,t,r,n){appsToUnload[toName(e)]={app:e,resolve:r,reject:n},Object.defineProperty(appsToUnload[toName(e)],"promise",{get:t})}function getAppUnloadInfo(e){return appsToUnload[e]}function getAppsToUnload(){return Object.keys(appsToUnload).map(e=>appsToUnload[e].app).filter(isntActive)}var apps=[];function getMountedApps(){return apps.filter(isActive).map(toName)}function getAppNames(){return apps.map(toName)}function getRawAppData(){return[...apps]}function getAppStatus(e){var t=find(apps,t=>toName(t)===e);return t?t.status:null}function registerApplication(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("string"!=typeof e||0===e.length)throw Error(formatErrorMessage(20,"The first argument to registerApplication must be a non-empty string 'appName'"));if(-1!==getAppNames().indexOf(e))throw Error(formatErrorMessage(21,"There is already an app declared with name ".concat(e),e));if("object"!=typeof o||Array.isArray(o))throw Error(formatErrorMessage(22,"customProps must be an object"));if(!t)throw Error(formatErrorMessage(23,"The application or loading function is required"));if(n="function"!=typeof t?()=>Promise.resolve(t):t,"function"!=typeof r)throw Error(formatErrorMessage(24,"The activityFunction argument must be a function"));apps.push({loadErrorTime:null,name:e,loadImpl:n,activeWhen:r,status:NOT_LOADED,parcels:{},devtools:{overlays:{options:{},selectors:[]}},customProps:o}),ensureJQuerySupport(),reroute()}function checkActivityFunctions(e){return apps.filter(t=>t.activeWhen(e)).map(toName)}function getAppsToLoad(){return apps.filter(notSkipped).filter(withoutLoadErrors).filter(isntLoaded).filter(shouldBeActive)}function getAppsToUnmount(){return apps.filter(notSkipped).filter(isActive).filter(shouldntBeActive)}function getAppsToMount(){return apps.filter(notSkipped).filter(isntActive).filter(isLoaded).filter(shouldBeActive)}function unregisterApplication(e){if(!apps.find(t=>toName(t)===e))throw Error(formatErrorMessage(25,"Cannot unregister application '".concat(e,"' because no such application has been registered"),e));return unloadApplication(e).then(()=>{var t=apps.findIndex(t=>toName(t)===e);apps.splice(t,1)})}function unloadApplication(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{waitForUnmount:!1};if("string"!=typeof e)throw Error(formatErrorMessage(26,"unloadApplication requires a string 'appName'"));var r=find(apps,t=>toName(t)===e);if(!r)throw Error(formatErrorMessage(27,"Could not unload application '".concat(e,"' because no such application has been registered"),e));var n,o=getAppUnloadInfo(toName(r));if(t&&t.waitForUnmount){if(o)return o.promise;var a=new Promise((e,t)=>{addAppToUnload(r,()=>a,e,t)});return a}return o?(n=o.promise,immediatelyUnloadApp(r,o.resolve,o.reject)):n=new Promise((e,t)=>{addAppToUnload(r,()=>n,e,t),immediatelyUnloadApp(r,e,t)}),n}function immediatelyUnloadApp(e,t,r){toUnmountPromise(e).then(toUnloadPromise).then(()=>{t(),setTimeout(()=>{reroute()})}).catch(r)}var appChangeUnderway=!1,peopleWaitingOnAppChange=[];function triggerAppChange(){return reroute()}function reroute(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(appChangeUnderway)return new Promise((e,r)=>{peopleWaitingOnAppChange.push({resolve:e,reject:r,eventArguments:t})});var r=!0;return isStarted()?(appChangeUnderway=!0,Promise.resolve().then(()=>{window.dispatchEvent(new customEvent("single-spa:before-routing-event",a()));var t=getAppsToUnload().map(toUnloadPromise),i=getAppsToUnmount().map(toUnmountPromise).map(e=>e.then(toUnloadPromise)),s=i.concat(t);s.length>0&&(r=!1);var u=Promise.all(s),l=getAppsToLoad(),p=l.map(e=>toLoadPromise(e).then(toBootstrapPromise).then(e=>u.then(()=>toMountPromise(e))));p.length>0&&(r=!1);var c=getAppsToMount().filter(e=>l.indexOf(e)<0).map(e=>toBootstrapPromise(e).then(()=>u).then(()=>toMountPromise(e)));return c.length>0&&(r=!1),u.catch(e=>{throw o(),e}).then(()=>(o(),Promise.all(p.concat(c)).catch(t=>{throw e.forEach(e=>e.reject(t)),t}).then(n)))})):Promise.resolve().then(()=>{var e=getAppsToLoad().map(toLoadPromise);return e.length>0&&(r=!1),Promise.all(e).then(o).then(()=>[]).catch(e=>{throw o(),e})});function n(){var t=getMountedApps();e.forEach(e=>e.resolve(t));try{var n=r?"single-spa:no-app-change":"single-spa:app-change";window.dispatchEvent(new customEvent(n,a())),window.dispatchEvent(new customEvent("single-spa:routing-event",a()))}catch(e){setTimeout(()=>{throw e})}if(appChangeUnderway=!1,peopleWaitingOnAppChange.length>0){var o=peopleWaitingOnAppChange;peopleWaitingOnAppChange=[],reroute(o)}return t}function o(){e.forEach(e=>{callCapturedEventListeners(e.eventArguments)}),callCapturedEventListeners(t)}function a(){var e={detail:{}};return t&&t[0]&&(e.detail.originalEvent=t[0]),e}}var started=!1;function start(){started=!0,reroute()}function isStarted(){return started}setTimeout(()=>{started||console.warn(formatErrorMessage(1,"singleSpa.start() has not been called, 5000ms after single-spa was loaded. Before start() is called, apps can be declared and loaded, but not bootstrapped or mounted."))},5e3);var devtools={getRawAppData:getRawAppData,reroute:reroute,NOT_LOADED:NOT_LOADED,toLoadPromise:toLoadPromise,toBootstrapPromise:toBootstrapPromise,unregisterApplication:unregisterApplication};window&&window.__SINGLE_SPA_DEVTOOLS__&&(window.__SINGLE_SPA_DEVTOOLS__.exposedMethods=devtools);export{BOOTSTRAPPING,LOADING_SOURCE_CODE,LOAD_ERROR,MOUNTED,MOUNTING,NOT_BOOTSTRAPPED,NOT_LOADED,NOT_MOUNTED,SKIP_BECAUSE_BROKEN,UNMOUNTING,UPDATING,addErrorHandler,checkActivityFunctions,ensureJQuerySupport,getAppNames,getAppStatus,getMountedApps,mountRootParcel,navigateToUrl,registerApplication,removeErrorHandler,setBootstrapMaxTime,setMountMaxTime,setUnloadMaxTime,setUnmountMaxTime,start,triggerAppChange,unloadApplication};