var singleSpa=Object.freeze({__proto__:null,get start(){return start},get ensureJQuerySupport(){return ensureJQuerySupport},get setBootstrapMaxTime(){return setBootstrapMaxTime},get setMountMaxTime(){return setMountMaxTime},get setUnmountMaxTime(){return setUnmountMaxTime},get setUnloadMaxTime(){return setUnloadMaxTime},get registerApplication(){return registerApplication},get getMountedApps(){return getMountedApps},get getAppStatus(){return getAppStatus},get unloadApplication(){return unloadApplication},get checkActivityFunctions(){return checkActivityFunctions},get getAppNames(){return getAppNames},get navigateToUrl(){return navigateToUrl},get triggerAppChange(){return triggerAppChange},get addErrorHandler(){return addErrorHandler},get removeErrorHandler(){return removeErrorHandler},get mountRootParcel(){return mountRootParcel},get NOT_LOADED(){return NOT_LOADED},get LOADING_SOURCE_CODE(){return LOADING_SOURCE_CODE},get NOT_BOOTSTRAPPED(){return NOT_BOOTSTRAPPED},get BOOTSTRAPPING(){return BOOTSTRAPPING},get NOT_MOUNTED(){return NOT_MOUNTED},get MOUNTING(){return MOUNTING},get UPDATING(){return UPDATING},get LOAD_ERROR(){return LOAD_ERROR},get MOUNTED(){return MOUNTED},get UNMOUNTING(){return UNMOUNTING},get SKIP_BECAUSE_BROKEN(){return SKIP_BECAUSE_BROKEN}}),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},NativeCustomEvent=commonjsGlobal.CustomEvent;function useNative(){try{var t=new NativeCustomEvent("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}var customEvent=useNative()?NativeCustomEvent:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(t,e){var r=document.createEvent("CustomEvent");return e?r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):r.initCustomEvent(t,!1,!1,void 0),r}:function(t,e){var r=document.createEventObject();return r.type=t,e?(r.bubbles=Boolean(e.bubbles),r.cancelable=Boolean(e.cancelable),r.detail=e.detail):(r.bubbles=!1,r.cancelable=!1,r.detail=void 0),r},errorHandlers=[];function handleAppError(t,e){var r=transformErr(t,e);errorHandlers.length?errorHandlers.forEach(t=>t(r)):setTimeout(()=>{throw r})}function addErrorHandler(t){if("function"!=typeof t)throw Error(formatErrorMessage(28,"a single-spa error handler must be a function"));errorHandlers.push(t)}function removeErrorHandler(t){if("function"!=typeof t)throw Error(formatErrorMessage(29,"a single-spa error handler must be a function"));var e=!1;return errorHandlers=errorHandlers.filter(r=>{var n=r===t;return e=e||n,!n}),e}function formatErrorMessage(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return"single-spa minified message #".concat(t,": ").concat(e?e+" ":"","See https://single-spa.js.org/error/?code=").concat(t).concat(n.length?"&arg=".concat(n.join("&arg=")):"")}function transformErr(t,e){var r,n="".concat(objectType(e)," '").concat(toName(e),"' died in status ").concat(e.status,": ");if(t instanceof Error){try{t.message=n+t.message}catch(t){}r=t}else{console.warn(formatErrorMessage(30,"While ".concat(e.status,", '").concat(toName(e),"' rejected its lifecycle function promise with a non-Error. This will cause stack traces to not be accurate."),e.status,toName(e)));try{r=Error(n+JSON.stringify(t))}catch(e){r=t}}return r.appOrParcelName=toName(e),r}var NOT_LOADED="NOT_LOADED",LOADING_SOURCE_CODE="LOADING_SOURCE_CODE",NOT_BOOTSTRAPPED="NOT_BOOTSTRAPPED",BOOTSTRAPPING="BOOTSTRAPPING",NOT_MOUNTED="NOT_MOUNTED",MOUNTING="MOUNTING",MOUNTED="MOUNTED",UPDATING="UPDATING",UNMOUNTING="UNMOUNTING",UNLOADING="UNLOADING",LOAD_ERROR="LOAD_ERROR",SKIP_BECAUSE_BROKEN="SKIP_BECAUSE_BROKEN";function isActive(t){return t.status===MOUNTED}function isntActive(t){return!isActive(t)}function isLoaded(t){return t.status!==NOT_LOADED&&t.status!==LOADING_SOURCE_CODE&&t.status!==LOAD_ERROR}function isntLoaded(t){return!isLoaded(t)}function shouldBeActive(t){try{return t.activeWhen(window.location)}catch(e){handleAppError(e,t),t.status=SKIP_BECAUSE_BROKEN}}function shouldntBeActive(t){try{return!t.activeWhen(window.location)}catch(e){handleAppError(e,t),t.status=SKIP_BECAUSE_BROKEN}}function notSkipped(t){return t!==SKIP_BECAUSE_BROKEN&&(!t||t.status!==SKIP_BECAUSE_BROKEN)}function withoutLoadErrors(t){return t.status!==LOAD_ERROR||(new Date).getTime()-t.loadErrorTime>=200}function toName(t){return t.name}function isParcel(t){return Boolean(t.unmountThisParcel)}function objectType(t){return isParcel(t)?"parcel":"application"}function assign(){for(var t=arguments.length-1;t>0;t--)for(var e in arguments[t])"__proto__"!==e&&(arguments[t-1][e]=arguments[t][e]);return arguments[0]}function find(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return t[r];return null}function validLifecycleFn(t){return t&&("function"==typeof t||(e=t,Array.isArray(e)&&!find(e,t=>"function"!=typeof t)));var e}function flattenFnArray(t,e){var r=t[e]||[];0===(r=Array.isArray(r)?r:[r]).length&&(r=[()=>Promise.resolve()]);var n=objectType(t),o=toName(t);return function(t){return r.reduce((r,a,i)=>r.then(()=>{var r=a(t);return smellsLikeAPromise(r)?r:Promise.reject(formatErrorMessage(15,"Within ".concat(n," ").concat(o,", the lifecycle function ").concat(e," at array index ").concat(i," did not return a promise"),n,o,e,i))}),Promise.resolve())}}function smellsLikeAPromise(t){return t&&"function"==typeof t.then&&"function"==typeof t.catch}function toBootstrapPromise(t,e){return Promise.resolve().then(()=>t.status!==NOT_BOOTSTRAPPED?t:(t.status=BOOTSTRAPPING,reasonableTime(t,"bootstrap").then(()=>(t.status=NOT_MOUNTED,t)).catch(r=>{if(t.status=SKIP_BECAUSE_BROKEN,e)throw transformErr(r,t);return handleAppError(r,t),t})))}function toUnmountPromise(t,e){return Promise.resolve().then(()=>{if(t.status!==MOUNTED)return t;t.status=UNMOUNTING;var r=Object.keys(t.parcels).map(e=>t.parcels[e].unmountThisParcel());return Promise.all(r).then(n,r=>n().then(()=>{var n=Error(r.message);if(e){var o=transformErr(n,t);throw t.status=SKIP_BECAUSE_BROKEN,o}handleAppError(n,t),t.status=SKIP_BECAUSE_BROKEN})).then(()=>t);function n(){return reasonableTime(t,"unmount").then(()=>{t.status=NOT_MOUNTED}).catch(r=>{if(e){var n=transformErr(r,t);throw t.status=SKIP_BECAUSE_BROKEN,n}handleAppError(r,t),t.status=SKIP_BECAUSE_BROKEN})}})}var beforeFirstMountFired=!1,firstMountFired=!1;function toMountPromise(t,e){return Promise.resolve().then(()=>t.status!==NOT_MOUNTED?t:(beforeFirstMountFired||(window.dispatchEvent(new customEvent("single-spa:before-first-mount")),beforeFirstMountFired=!0),reasonableTime(t,"mount").then(()=>(t.status=MOUNTED,firstMountFired||(window.dispatchEvent(new customEvent("single-spa:first-mount")),firstMountFired=!0),t)).catch(r=>{return t.status=MOUNTED,toUnmountPromise(t).then(n,n);function n(){if(e){var n=transformErr(r,t);throw t.status=SKIP_BECAUSE_BROKEN,n}return handleAppError(r,t),t.status=SKIP_BECAUSE_BROKEN,t}})))}function toUpdatePromise(t){return Promise.resolve().then(()=>{if(t.status!==MOUNTED)throw Error(formatErrorMessage(32,"Cannot update parcel '".concat(toName(t),"' because it is not mounted"),toName(t)));return t.status=UPDATING,reasonableTime(t,"update").then(()=>(t.status=MOUNTED,t)).catch(e=>{var r=transformErr(e,t);throw t.status=SKIP_BECAUSE_BROKEN,r})})}var parcelCount=0,rootParcels={parcels:{}};function mountRootParcel(){return mountParcel.apply(rootParcels,arguments)}function mountParcel(t,e){var r=this;if(!t||"object"!=typeof t&&"function"!=typeof t)throw Error(formatErrorMessage(2,"Cannot mount parcel without a config object or config loading function"));if(t.name&&"string"!=typeof t.name)throw Error(formatErrorMessage(3,"Parcel name must be a string, if provided. Was given ".concat(typeof t.name),typeof t.name));if("object"!=typeof e)throw Error(formatErrorMessage(4,"Parcel ".concat(name," has invalid customProps -- must be an object but was given ").concat(typeof e),name,typeof e));if(!e.domElement)throw Error(formatErrorMessage(5,"Parcel ".concat(name," cannot be mounted without a domElement provided as a prop"),name));var n,o=parcelCount++,a="function"==typeof t,i=a?t:()=>Promise.resolve(t),s={id:o,parcels:{},status:a?LOADING_SOURCE_CODE:NOT_BOOTSTRAPPED,customProps:e,parentName:toName(r),unmountThisParcel(){if(s.status!==MOUNTED)throw Error(formatErrorMessage(6,"Cannot unmount parcel '".concat(name,"' -- it is in a ").concat(s.status," status"),name,s.status));return toUnmountPromise(s,!0).then(t=>(s.parentName&&delete r.parcels[s.id],t)).then(t=>(l(t),t)).catch(t=>{throw s.status=SKIP_BECAUSE_BROKEN,p(t),t})}};r.parcels[o]=s;var u=i();if(!u||"function"!=typeof u.then)throw Error(formatErrorMessage(7,"When mounting a parcel, the config loading function must return a promise that resolves with the parcel config"));var l,p,c=(u=u.then(t=>{if(!t)throw Error(formatErrorMessage(8,"When mounting a parcel, the config loading function returned a promise that did not resolve with a parcel config"));var e=t.name||"parcel-".concat(o);if(!validLifecycleFn(t.bootstrap))throw Error(formatErrorMessage(9,"Parcel ".concat(e," must have a valid bootstrap function"),e));if(!validLifecycleFn(t.mount))throw Error(formatErrorMessage(10,"Parcel ".concat(e," must have a valid mount function"),e));if(!validLifecycleFn(t.unmount))throw Error(formatErrorMessage(11,"Parcel ".concat(e," must have a valid unmount function"),e));if(t.update&&!validLifecycleFn(t.update))throw Error(formatErrorMessage(12,"Parcel ".concat(e," provided an invalid update function"),e));var r=flattenFnArray(t,"bootstrap"),a=flattenFnArray(t,"mount"),i=flattenFnArray(t,"unmount");s.status=NOT_BOOTSTRAPPED,s.name=e,s.bootstrap=r,s.mount=a,s.unmount=i,s.timeouts=ensureValidAppTimeouts(t.timeouts),t.update&&(s.update=flattenFnArray(t,"update"),n.update=function(t){return s.customProps=t,promiseWithoutReturnValue(toUpdatePromise(s))})})).then(()=>toBootstrapPromise(s,!0)),m=c.then(()=>toMountPromise(s,!0)),f=new Promise((t,e)=>{l=t,p=e});return n={mount:()=>promiseWithoutReturnValue(Promise.resolve().then(()=>{if(s.status!==NOT_MOUNTED)throw Error(formatErrorMessage(13,"Cannot mount parcel '".concat(name,"' -- it is in a ").concat(s.status," status"),name,s.status));return r.parcels[o]=s,toMountPromise(s)})),unmount:()=>promiseWithoutReturnValue(s.unmountThisParcel()),getStatus:()=>s.status,loadPromise:promiseWithoutReturnValue(u),bootstrapPromise:promiseWithoutReturnValue(c),mountPromise:promiseWithoutReturnValue(m),unmountPromise:promiseWithoutReturnValue(f)}}function promiseWithoutReturnValue(t){return t.then(()=>null)}function getProps(t){var e=assign({},t.customProps,{name:toName(t),mountParcel:mountParcel.bind(t),singleSpa:singleSpa});return isParcel(t)&&(e.unmountSelf=t.unmountThisParcel),e}var defaultWarningMillis=1e3,globalTimeoutConfig={bootstrap:{millis:4e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},mount:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},unmount:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},unload:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},update:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis}};function setBootstrapMaxTime(t,e,r){if("number"!=typeof t||t<=0)throw Error(formatErrorMessage(16,"bootstrap max time must be a positive integer number of milliseconds"));globalTimeoutConfig.bootstrap={millis:t,dieOnTimeout:e,warningMillis:r||defaultWarningMillis}}function setMountMaxTime(t,e,r){if("number"!=typeof t||t<=0)throw Error(formatErrorMessage(17,"mount max time must be a positive integer number of milliseconds"));globalTimeoutConfig.mount={millis:t,dieOnTimeout:e,warningMillis:r||defaultWarningMillis}}function setUnmountMaxTime(t,e,r){if("number"!=typeof t||t<=0)throw Error(formatErrorMessage(18,"unmount max time must be a positive integer number of milliseconds"));globalTimeoutConfig.unmount={millis:t,dieOnTimeout:e,warningMillis:r||defaultWarningMillis}}function setUnloadMaxTime(t,e,r){if("number"!=typeof t||t<=0)throw Error(formatErrorMessage(19,"unload max time must be a positive integer number of milliseconds"));globalTimeoutConfig.unload={millis:t,dieOnTimeout:e,warningMillis:r||defaultWarningMillis}}function reasonableTime(t,e){var r=t.timeouts[e],n=r.warningMillis,o=objectType(t);return new Promise((a,i)=>{var s=!1,u=!1;t[e](getProps(t)).then(t=>{s=!0,a(t)}).catch(t=>{s=!0,i(t)}),setTimeout(()=>p(1),n),setTimeout(()=>p(!0),r.millis);var l=formatErrorMessage(31,"Lifecycle function ".concat(e," for ").concat(o," ").concat(toName(t)," lifecycle did not resolve or reject for ").concat(r.millis," ms."),e,o,toName(t),r.millis);function p(t){if(!s)if(!0===t)u=!0,r.dieOnTimeout?i(Error(l)):console.error(l);else if(!u){var e=t,o=e*n;console.warn(l),o+n<r.millis&&setTimeout(()=>p(e+1),n)}}})}function ensureValidAppTimeouts(t){var e={};for(var r in globalTimeoutConfig)e[r]=assign({},globalTimeoutConfig[r],t&&t[r]||{});return e}function toLoadPromise(t){return Promise.resolve().then(()=>{return t.status!==NOT_LOADED&&t.status!==LOAD_ERROR?t:(t.status=LOADING_SOURCE_CODE,Promise.resolve().then(()=>{var n=t.loadImpl(getProps(t));if(!smellsLikeAPromise(n))throw r=!0,Error(formatErrorMessage(33,"single-spa loading function did not return a promise. Check the second argument to registerApplication('".concat(toName(t),"', loadingFunction, activityFunction)"),toName(t)));return n.then(r=>{var n,o;t.loadErrorTime=null,"object"!=typeof(e=r)&&(o=34,n="does not export anything"),validLifecycleFn(e.bootstrap)||(o=35,n="does not export a bootstrap function or array of functions"),validLifecycleFn(e.mount)||(o=36,n="does not export a bootstrap function or array of functions"),validLifecycleFn(e.unmount)||(o=37,n="does not export a bootstrap function or array of functions");var a=objectType(e);if(o){var i;try{i=JSON.stringify(e)}catch(t){}return console.error(formatErrorMessage(o,"The loading function for single-spa ".concat(a," '").concat(toName(t),"' resolved with the following, which does not have bootstrap, mount, and unmount functions"),a,toName(t),i),e),handleAppError(n,t),t.status=SKIP_BECAUSE_BROKEN,t}return e.devtools&&e.devtools.overlays&&(t.devtools.overlays=assign({},t.devtools.overlays,e.devtools.overlays)),t.status=NOT_BOOTSTRAPPED,t.bootstrap=flattenFnArray(e,"bootstrap"),t.mount=flattenFnArray(e,"mount"),t.unmount=flattenFnArray(e,"unmount"),t.unload=flattenFnArray(e,"unload"),t.timeouts=ensureValidAppTimeouts(e.timeouts),t})}).catch(e=>(handleAppError(e,t),r?t.status=SKIP_BECAUSE_BROKEN:(t.status=LOAD_ERROR,t.loadErrorTime=(new Date).getTime()),t)));var e,r})}var capturedEventListeners={hashchange:[],popstate:[]},routingEventsListeningTo=["hashchange","popstate"];function navigateToUrl(t){var e;if("string"==typeof t)e=t;else if(this&&this.href)e=this.href;else{if(!(t&&t.currentTarget&&t.currentTarget.href&&t.preventDefault))throw Error(formatErrorMessage(14,"singleSpaNavigate/navigateToUrl must be either called with a string url, with an <a> tag as its context, or with an event whose currentTarget is an <a> tag"));e=t.currentTarget.href,t.preventDefault()}var r=parseUri(window.location.href),n=parseUri(e);0===e.indexOf("#")?window.location.hash=n.hash:r.host!==n.host&&n.host?window.location.href=e:n.pathname===r.pathname&&n.search===r.pathname?window.location.hash=n.hash:window.history.pushState(null,null,e)}function callCapturedEventListeners(t){if(t){var e=t[0].type;routingEventsListeningTo.indexOf(e)>=0&&capturedEventListeners[e].forEach(e=>{try{e.apply(this,t)}catch(t){setTimeout(()=>{throw t})}})}}function urlReroute(){reroute([],arguments)}window.addEventListener("hashchange",urlReroute),window.addEventListener("popstate",urlReroute);var originalAddEventListener=window.addEventListener,originalRemoveEventListener=window.removeEventListener;window.addEventListener=function(t,e){if(!("function"==typeof e&&routingEventsListeningTo.indexOf(t)>=0)||find(capturedEventListeners[t],t=>t===e))return originalAddEventListener.apply(this,arguments);capturedEventListeners[t].push(e)},window.removeEventListener=function(t,e){if(!("function"==typeof e&&routingEventsListeningTo.indexOf(t)>=0))return originalRemoveEventListener.apply(this,arguments);capturedEventListeners[t]=capturedEventListeners[t].filter(t=>t!==e)};var originalPushState=window.history.pushState;window.history.pushState=function(t){var e=originalPushState.apply(this,arguments);return urlReroute(createPopStateEvent(t)),e};var originalReplaceState=window.history.replaceState;function createPopStateEvent(t){try{return new PopStateEvent("popstate",{state:t})}catch(r){var e=document.createEvent("PopStateEvent");return e.initPopStateEvent("popstate",!1,!1,t),e}}function parseUri(t){var e=document.createElement("a");return e.href=t,e}window.history.replaceState=function(t){var e=originalReplaceState.apply(this,arguments);return urlReroute(createPopStateEvent(t)),e},window.singleSpaNavigate=navigateToUrl;var hasInitialized=!1;function ensureJQuerySupport(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.jQuery;if(t||window.$&&window.$.fn&&window.$.fn.jquery&&(t=window.$),t&&!hasInitialized){var e=t.fn.on,r=t.fn.off;t.fn.on=function(t,r){return captureRoutingEvents.call(this,e,window.addEventListener,t,r,arguments)},t.fn.off=function(t,e){return captureRoutingEvents.call(this,r,window.removeEventListener,t,e,arguments)},hasInitialized=!0}}function captureRoutingEvents(t,e,r,n,o){return"string"!=typeof r?t.apply(this,o):(r.split(/\s+/).forEach(t=>{routingEventsListeningTo.indexOf(t)>=0&&(e(t,n),r=r.replace(t,""))}),""===r.trim()?this:t.apply(this,o))}var appsToUnload={};function toUnloadPromise(t){return Promise.resolve().then(()=>{var e=appsToUnload[toName(t)];return e?t.status===NOT_LOADED?(finishUnloadingApp(t,e),t):t.status===UNLOADING?e.promise.then(()=>t):t.status!==NOT_MOUNTED?t:(t.status=UNLOADING,reasonableTime(t,"unload").then(()=>(finishUnloadingApp(t,e),t)).catch(r=>(errorUnloadingApp(t,e,r),t))):t})}function finishUnloadingApp(t,e){delete appsToUnload[toName(t)],delete t.bootstrap,delete t.mount,delete t.unmount,delete t.unload,t.status=NOT_LOADED,e.resolve()}function errorUnloadingApp(t,e,r){delete appsToUnload[toName(t)],delete t.bootstrap,delete t.mount,delete t.unmount,delete t.unload,handleAppError(r,t),t.status=SKIP_BECAUSE_BROKEN,e.reject(r)}function addAppToUnload(t,e,r,n){appsToUnload[toName(t)]={app:t,resolve:r,reject:n},Object.defineProperty(appsToUnload[toName(t)],"promise",{get:e})}function getAppUnloadInfo(t){return appsToUnload[t]}function getAppsToUnload(){return Object.keys(appsToUnload).map(t=>appsToUnload[t].app).filter(isntActive)}var apps=[];function getMountedApps(){return apps.filter(isActive).map(toName)}function getAppNames(){return apps.map(toName)}function getRawAppData(){return[...apps]}function getAppStatus(t){var e=find(apps,e=>toName(e)===t);return e?e.status:null}function registerApplication(t,e,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("string"!=typeof t||0===t.length)throw Error(formatErrorMessage(20,"The first argument to registerApplication must be a non-empty string 'appName'"));if(-1!==getAppNames().indexOf(t))throw Error(formatErrorMessage(21,"There is already an app declared with name ".concat(t),t));if("object"!=typeof o||Array.isArray(o))throw Error(formatErrorMessage(22,"customProps must be an object"));if(!e)throw Error(formatErrorMessage(23,"The application or loading function is required"));if(n="function"!=typeof e?()=>Promise.resolve(e):e,"function"!=typeof r)throw Error(formatErrorMessage(24,"The activityFunction argument must be a function"));apps.push({loadErrorTime:null,name:t,loadImpl:n,activeWhen:r,status:NOT_LOADED,parcels:{},devtools:{overlays:{options:{},selectors:[]}},customProps:o}),ensureJQuerySupport(),reroute()}function checkActivityFunctions(t){return apps.filter(e=>e.activeWhen(t)).map(toName)}function getAppsToLoad(){return apps.filter(notSkipped).filter(withoutLoadErrors).filter(isntLoaded).filter(shouldBeActive)}function getAppsToUnmount(){return apps.filter(notSkipped).filter(isActive).filter(shouldntBeActive)}function getAppsToMount(){return apps.filter(notSkipped).filter(isntActive).filter(isLoaded).filter(shouldBeActive)}function unregisterApplication(t){if(!apps.find(e=>toName(e)===t))throw Error(formatErrorMessage(25,"Cannot unregister application '".concat(t,"' because no such application has been registered"),t));return unloadApplication(t).then(()=>{var e=apps.findIndex(e=>toName(e)===t);apps.splice(e,1)})}function unloadApplication(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{waitForUnmount:!1};if("string"!=typeof t)throw Error(formatErrorMessage(26,"unloadApplication requires a string 'appName'"));var r=find(apps,e=>toName(e)===t);if(!r)throw Error(formatErrorMessage(27,"Could not unload application '".concat(t,"' because no such application has been registered"),t));var n,o=getAppUnloadInfo(toName(r));if(e&&e.waitForUnmount){if(o)return o.promise;var a=new Promise((t,e)=>{addAppToUnload(r,()=>a,t,e)});return a}return o?(n=o.promise,immediatelyUnloadApp(r,o.resolve,o.reject)):n=new Promise((t,e)=>{addAppToUnload(r,()=>n,t,e),immediatelyUnloadApp(r,t,e)}),n}function immediatelyUnloadApp(t,e,r){toUnmountPromise(t).then(toUnloadPromise).then(()=>{e(),setTimeout(()=>{reroute()})}).catch(r)}var appChangeUnderway=!1,peopleWaitingOnAppChange=[];function triggerAppChange(){return reroute()}function reroute(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;if(appChangeUnderway)return new Promise((t,r)=>{peopleWaitingOnAppChange.push({resolve:t,reject:r,eventArguments:e})});appChangeUnderway=!0;var r=!0;return isStarted()?Promise.resolve().then(()=>{window.dispatchEvent(new customEvent("single-spa:before-routing-event",a()));var e=getAppsToUnload().map(toUnloadPromise),i=getAppsToUnmount().map(toUnmountPromise).map(t=>t.then(toUnloadPromise)),s=i.concat(e);s.length>0&&(r=!1);var u=Promise.all(s),l=getAppsToLoad(),p=l.map(t=>toLoadPromise(t).then(toBootstrapPromise).then(t=>u.then(()=>toMountPromise(t))));p.length>0&&(r=!1);var c=getAppsToMount().filter(t=>l.indexOf(t)<0).map(t=>toBootstrapPromise(t).then(()=>u).then(()=>toMountPromise(t)));return c.length>0&&(r=!1),u.catch(t=>{throw o(),t}).then(()=>(o(),Promise.all(p.concat(c)).catch(e=>{throw t.forEach(t=>t.reject(e)),e}).then(()=>n(!1))))}):Promise.resolve().then(()=>{var t=getAppsToLoad().map(toLoadPromise);return t.length>0&&(r=!1),Promise.all(t).then(n).catch(t=>{throw o(),t})});function n(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=getMountedApps();e&&o(),t.forEach(t=>t.resolve(n));try{var i=r?"single-spa:no-app-change":"single-spa:app-change";window.dispatchEvent(new customEvent(i,a())),window.dispatchEvent(new customEvent("single-spa:routing-event",a()))}catch(t){setTimeout(()=>{throw t})}if(appChangeUnderway=!1,peopleWaitingOnAppChange.length>0){var s=peopleWaitingOnAppChange;peopleWaitingOnAppChange=[],reroute(s)}return n}function o(){t.forEach(t=>{callCapturedEventListeners(t.eventArguments)}),callCapturedEventListeners(e)}function a(){var t={detail:{}};return e&&e[0]&&(t.detail.originalEvent=e[0]),t}}var started=!1;function start(){started=!0,reroute()}function isStarted(){return started}setTimeout(()=>{started||console.warn(formatErrorMessage(1,"singleSpa.start() has not been called, 5000ms after single-spa was loaded. Before start() is called, apps can be declared and loaded, but not bootstrapped or mounted."))},5e3);var devtools={getRawAppData:getRawAppData,reroute:reroute,NOT_LOADED:NOT_LOADED,toLoadPromise:toLoadPromise,toBootstrapPromise:toBootstrapPromise,unregisterApplication:unregisterApplication};window&&window.__SINGLE_SPA_DEVTOOLS__&&(window.__SINGLE_SPA_DEVTOOLS__.exposedMethods=devtools);export{BOOTSTRAPPING,LOADING_SOURCE_CODE,LOAD_ERROR,MOUNTED,MOUNTING,NOT_BOOTSTRAPPED,NOT_LOADED,NOT_MOUNTED,SKIP_BECAUSE_BROKEN,UNMOUNTING,UPDATING,addErrorHandler,checkActivityFunctions,ensureJQuerySupport,getAppNames,getAppStatus,getMountedApps,mountRootParcel,navigateToUrl,registerApplication,removeErrorHandler,setBootstrapMaxTime,setMountMaxTime,setUnloadMaxTime,setUnmountMaxTime,start,triggerAppChange,unloadApplication};