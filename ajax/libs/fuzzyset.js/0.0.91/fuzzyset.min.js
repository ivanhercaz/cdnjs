!function(){function t(t,r,e,n){var i={};function w(t,r){if(null===t&&null===r)throw"Trying to compare two null values";if(null===t||null===r)return 0;var e=function(t,r){for(var e,n,i=[],a=0;a<=r.length;a++)for(var h=0;h<=t.length;h++)n=a&&h?t.charAt(h-1)===r.charAt(a-1)?e:Math.min(i[h],i[h-1],e)+1:a+h,e=i[h],i[h]=n;return i.pop()}(t=String(t),r=String(r));return t.length>r.length?1-e/t.length:1-e/r.length}function x(t,r){for(var e={},n=function(t,r){r=r||2;var e="-"+t.toLowerCase().replace(h,"")+"-",n=r-e.length,i=[];if(0<n)for(var a=0;a<n;++a)e+="-";for(a=0;a<e.length-r+1;++a)i.push(e.slice(a,a+r));return i}(t,r=r||2),i=0;i<n.length;++i)n[i]in e?e[n[i]]+=1:e[n[i]]=1;return e}t=t||[],i.gramSizeLower=e||2,i.gramSizeUpper=n||3,i.useLevenshtein="boolean"!=typeof r||r,i.exactSet={},i.matchDict={},i.items={};var h=/[^a-zA-Z0-9\u00C0-\u00FF, ]+/g;i.get=function(t,r,e){void 0===e&&(e=.33);var n=this._get(t,e);return n||void 0===r?n:r},i._get=function(t,r){for(var e=[],n=this.gramSizeUpper;n>=this.gramSizeLower;--n)if((e=this.__get(t,n,r))&&0<e.length)return e;return null},i.__get=function(t,r,e){var n,i,a,h,o=this._normalizeStr(t),s={},u=x(o,r),c=this.items[r],f=0;for(n in u)if(i=u[n],f+=Math.pow(i,2),n in this.matchDict)for(d=0;d<this.matchDict[n].length;++d)a=this.matchDict[n][d][0],h=this.matchDict[n][d][1],a in s?s[a]+=i*h:s[a]=i*h;if(function(t){for(var r in t)if(t.hasOwnProperty(r))return!1;return!0}(s))return null;var l,g=Math.sqrt(f),m=[];for(var p in s)l=s[p],m.push([l/(g*c[p][0]),c[p][1]]);function v(t,r){return t[0]<r[0]?1:t[0]>r[0]?-1:0}if(m.sort(v),this.useLevenshtein){for(var S=[],z=Math.min(50,m.length),d=0;d<z;++d)S.push([w(m[d][1],o),m[d][1]]);(m=S).sort(v)}S=[];return m.forEach(function(t){t[0]>=e&&S.push([t[0],this.exactSet[t[1]]])}.bind(this)),S},i.add=function(t){if(this._normalizeStr(t)in this.exactSet)return!1;for(var r=this.gramSizeLower;r<this.gramSizeUpper+1;++r)this._add(t,r)},i._add=function(t,r){var e=this._normalizeStr(t),n=this.items[r]||[],i=n.length;n.push(0);var a,h,o=x(e,r),s=0;for(a in o)h=o[a],s+=Math.pow(h,2),a in this.matchDict?this.matchDict[a].push([i,h]):this.matchDict[a]=[[i,h]];var u=Math.sqrt(s);n[i]=[u,e],this.items[r]=n,this.exactSet[e]=t},i._normalizeStr=function(t){if("[object String]"!==Object.prototype.toString.call(t))throw"Must use a string as argument to FuzzySet functions";return t.toLowerCase()},i.length=function(){var t,r=0;for(t in this.exactSet)this.exactSet.hasOwnProperty(t)&&(r+=1);return r},i.isEmpty=function(){for(var t in this.exactSet)if(this.exactSet.hasOwnProperty(t))return!1;return!0},i.values=function(){var t,r=[];for(t in this.exactSet)this.exactSet.hasOwnProperty(t)&&r.push(this.exactSet[t]);return r};for(var a=i.gramSizeLower;a<i.gramSizeUpper+1;++a)i.items[a]=[];for(a=0;a<t.length;++a)i.add(t[a]);return i}var r=this;"undefined"!=typeof module&&module.exports?(module.exports=t,r&&(r.FuzzySet=t)):r.FuzzySet=t}();