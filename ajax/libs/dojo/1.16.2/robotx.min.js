define(["require","doh/main","./aspect","./dom-construct","./dom-style","./_base/kernel","./_base/lang","./on","./robot","./sniff","./_base/window"],function(n,t,e,i,d,o,r,c,u,a,m){o.experimental("dojo.robotx");var s,l=null;function b(){u._updateDocument(),l.contentWindow.require?l.contentWindow.require(["dojo/ready"],function(e){e(1/0,function(){setTimeout(function(){s.resolve(!0)},500)})}):s.resolve(!0)}return r.mixin(u,{_updateDocument:function(){o.setContext(l.contentWindow,l.contentWindow.document),u.window=l.contentWindow,u.doc=l.contentWindow.document;var e=o.global;e.dojo&&(o.publish=e.dojo.publish,o.subscribe=e.dojo.subscribe,o.connectPublisher=e.dojo.connectPublisher)},initRobot:function(e){t.registerGroup("initialize robot",{name:"load "+e,timeout:1e5,runTest:function(){var o;return s=new t.Deferred,o=e,n(["./domReady!"],function(){var e={overflow:"hidden",margin:"0px",borderWidth:"0px",height:"100%",width:"100%"};d.set(document.documentElement,e),d.set(document.body,e),(l=document.createElement("iframe")).setAttribute("ALLOWTRANSPARENCY","true"),l.scrolling=a("ie")?"yes":"auto";"BackCompat"==document.compatMode?document.body:document.documentElement;d.set(l,{border:"0px none",padding:"0px",margin:"0px",width:"100%",height:"100%"}),l.src=o,void 0!==l.attachEvent?l.attachEvent("onload",b):c(l,"load",b),i.place(l,m.body(),"first")}),s}})},waitForPageToLoad:function(e){return s=new t.Deferred,e(),s}}),u});