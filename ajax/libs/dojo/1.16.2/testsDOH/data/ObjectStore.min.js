dojo.provide("dojo.testsDOH.data.ObjectStore"),dojo.require("dojo.data.ObjectStore"),dojo.require("dojo.store.JsonRest"),dojo.require("dojo.store.Memory"),function(){var e=new dojo.store.JsonRest({target:dojo.moduleUrl("dojo.testsDOH.store","/")}),t=new dojo.store.Memory({data:[{id:1,name:"one",prime:!1},{id:2,name:"two",even:!0,prime:!0},{id:3,name:"three",prime:!0},{id:4,name:"four",even:!0,prime:!1},{id:5,name:"five",prime:!0}]}),r=new dojo.data.ObjectStore({objectStore:e}),a=new dojo.data.ObjectStore({objectStore:t});tests.register("testsDOH.data.ObjectStore",[function(t){var o=new doh.Deferred;return r.fetchItemByIdentity({identity:"node1.1",onItem:function(e){t.is(e.name,"node1.1"),t.is(e.someProperty,"somePropertyA1"),o.callback(!0)}}),o},function(o){var n=new doh.Deferred;return r.fetch({query:"treeTestRoot",onComplete:function(e){var t=e[0];o.is(t.name,"node1"),o.is(t.someProperty,"somePropertyA"),n.callback(!0)}}),n},function(t){var o=a.newItem({foo:"bar",id:Math.random()});a.setValue(o,"prop1",1),a.save(),a.setValue(o,"prop1",10),a.revert(),t.is(a.getValue(o,"prop1"),1),a.fetchItemByIdentity({identity:a.getIdentity(o),onItem:function(e){t.is(a.getValue(e,"foo"),"bar"),a.setValue(o,"prop2",2),t.is(a.getValue(e,"prop1"),1),t.is(a.getValue(e,"prop2"),2)}});o=a.newItem({foo:"bar",id:Math.random()});a.deleteItem(o),a.save(),a.fetchItemByIdentity({identity:a.getIdentity(o),onItem:function(e){t.is(e,null)}})},function(o){var n=new doh.Deferred;return a.fetch({query:{name:"one"},onComplete:function(e){var t=e[0];o.is(e.length,1),o.is(t.name,"one"),n.callback(!0)}}),n},function(t){var o=new doh.Deferred;return a.fetch({query:{name:"o"},onComplete:function(e){t.is(e.length,0),o.callback(!0)}}),o},function(o){var n=new doh.Deferred;return a.fetch({query:{name:"f*"},onComplete:function(e){var t=e[0];o.is(e.length,2),o.is(t.name,"four"),n.callback(!0)}}),n},function(o){var n=new doh.Deferred;a.fetch({query:{name:"s\\*"},onComplete:function(e){o.is(e.length,0)}});a.newItem({name:"s*",id:Math.random()});return a.save(),a.fetch({query:{name:"s\\*"},onComplete:function(e){var t=e[0];o.is(e.length,1),o.is(t.name,"s*"),n.callback(!0)}}),n},function(o){var n=new doh.Deferred;return a.fetch({query:{name:"F*"},queryOptions:{ignoreCase:!0},onComplete:function(e){var t=e[0];o.is(e.length,2),o.is(t.name,"four"),n.callback(!0)}}),n}])}();