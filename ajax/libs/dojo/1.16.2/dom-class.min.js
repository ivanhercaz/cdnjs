define(["./_base/lang","./_base/array","./dom"],function(a,r,f){var o,d="className",t=/\s+/,i=[""];function l(e){if("string"==typeof e||e instanceof String){if(e&&!t.test(e))return i[0]=e,i;var n=e.split(t);return n.length&&!n[0]&&n.shift(),n.length&&!n[n.length-1]&&n.pop(),n}return e?r.filter(e,function(e){return e}):[]}var s={};return o={contains:function(e,n){return 0<=(" "+f.byId(e)[d]+" ").indexOf(" "+n+" ")},add:function(e,n){e=f.byId(e),n=l(n);var r,t=e[d];r=(t=t?" "+t+" ":" ").length;for(var i,a=0,o=n.length;a<o;++a)(i=n[a])&&t.indexOf(" "+i+" ")<0&&(t+=i+" ");r<t.length&&(e[d]=t.substr(1,t.length-2))},remove:function(e,n){var r;if(e=f.byId(e),void 0!==n){n=l(n),r=" "+e[d]+" ";for(var t=0,i=n.length;t<i;++t)r=r.replace(" "+n[t]+" "," ");r=a.trim(r)}else r="";e[d]!=r&&(e[d]=r)},replace:function(e,n,r){e=f.byId(e),s[d]=e[d],o.remove(s,r),o.add(s,n),e[d]!==s[d]&&(e[d]=s[d])},toggle:function(e,n,r){if(e=f.byId(e),void 0===r)for(var t,i=0,a=(n=l(n)).length;i<a;++i)t=n[i],o[o.contains(e,t)?"remove":"add"](e,t);else o[r?"add":"remove"](e,n);return r}}});