define(["./_base/kernel","./_base/lang","./_base/array","./_base/connect","./query","./domReady"],function(n,u,c,f,i,o){n.deprecated("dojo.behavior","Use dojo/on with event delegation (on.selector())");return n.behavior=new function(){function t(n,i){return n[i]||(n[i]=[]),n[i]}var r=0;function a(n,i,o){var e={};for(var t in n)void 0===e[t]&&(o?o.call(i,n[t],t):i(n[t],t))}this._behaviors={},this.add=function(n){a(n,this,function(n,i){var o=t(this._behaviors,i);"number"!=typeof o.id&&(o.id=r++);var e=[];o.push(e),(u.isString(n)||u.isFunction(n))&&(n={found:n}),a(n,function(n,i){t(e,i).push(n)})})};this.apply=function(){a(this._behaviors,function(t,n){i(n).forEach(function(r){var n=0,i="_dj_behavior_"+t.id;if("number"!=typeof r[i]||(n=r[i])!=t.length){for(var o,e=n;o=t[e];e++)a(o,function(n,t){u.isArray(n)&&c.forEach(n,function(n){var i,o,e;i=r,o=n,e=t,u.isString(o)?"found"==e?f.publish(o,[i]):f.connect(i,e,function(){f.publish(o,arguments)}):u.isFunction(o)&&("found"==e?o(i):f.connect(i,e,o))})});r[i]=t.length}})})}},o(function(){n.behavior.apply()}),n.behavior});