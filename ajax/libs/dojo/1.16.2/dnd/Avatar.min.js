define(["../_base/declare","../_base/window","../dom","../dom-attr","../dom-class","../dom-construct","../hccss","../query"],function(e,t,a,c,n,l,h,r){return e("dojo.dnd.Avatar",null,{constructor:function(e){this.manager=e,this.construct()},construct:function(){var e,t=l.create("table",{class:"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),a=this.manager.source,n=l.create("tbody",null,t),r=l.create("tr",null,n),o=l.create("td",null,r),s=Math.min(5,this.manager.nodes.length),i=0;for(h("highcontrast")&&l.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},o),l.create("span",{innerHTML:a.generateText?this._generateText():""},o),c.set(r,{class:"dojoDndAvatarHeader",style:{opacity:.9}});i<s;++i){if(a.creator)e=a._normalizedCreator(a.getItem(this.manager.nodes[i].id).data,"avatar").node;else if("tr"==(e=this.manager.nodes[i].cloneNode(!0)).tagName.toLowerCase()){var d=l.create("table");l.create("tbody",null,d).appendChild(e),e=d}e.id="",r=l.create("tr",null,n),(o=l.create("td",null,r)).appendChild(e),c.set(r,{class:"dojoDndAvatarItem",style:{opacity:(9-i)/10}})}this.node=t},destroy:function(){l.destroy(this.node),this.node=!1},update:function(){if(n.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag),h("highcontrast")){var e=a.byId("a11yIcon"),t="+";this.manager.canDropFlag&&!this.manager.copy?t="< ":this.manager.canDropFlag||this.manager.copy?this.manager.canDropFlag||(t="x"):t="o",e.innerHTML=t}r("tr.dojoDndAvatarHeader td span"+(h("highcontrast")?" span":""),this.node).forEach(function(e){e.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})});