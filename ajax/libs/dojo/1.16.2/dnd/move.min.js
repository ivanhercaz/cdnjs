define(["../_base/declare","../dom-geometry","../dom-style","./common","./Mover","./Moveable"],function(t,i,a,n,o,e){var r=t("dojo.dnd.move.constrainedMoveable",e,{constraints:function(){},within:!1,constructor:function(t,n){n=n||{},this.constraints=n.constraints,this.within=n.within},onFirstMove:function(t){var n=this.constraintBox=this.constraints.call(this,t);if(n.r=n.l+n.w,n.b=n.t+n.h,this.within){var o=i.getMarginSize(t.node);n.r-=o.w,n.b-=o.h}},onMove:function(t,n){var o=this.constraintBox,e=t.node.style;this.onMoving(t,n),n.l=n.l<o.l?o.l:o.r<n.l?o.r:n.l,n.t=n.t<o.t?o.t:o.b<n.t?o.b:n.t,e.left=n.l+"px",e.top=n.t+"px",this.onMoved(t,n)}});return{constrainedMoveable:r,boxConstrainedMoveable:t("dojo.dnd.move.boxConstrainedMoveable",r,{box:{},constructor:function(t,n){var o=n&&n.box;this.constraints=function(){return o}}}),parentConstrainedMoveable:t("dojo.dnd.move.parentConstrainedMoveable",r,{area:"content",constructor:function(t,n){var r=n&&n.area;this.constraints=function(){var t=this.node.parentNode,n=a.getComputedStyle(t),o=i.getMarginBox(t,n);if("margin"==r)return o;var e=i.getMarginExtents(t,n);return o.l+=e.l,o.t+=e.t,o.w-=e.w,o.h-=e.h,"border"==r?o:(e=i.getBorderExtents(t,n),o.l+=e.l,o.t+=e.t,o.w-=e.w,o.h-=e.h,"padding"==r||(e=i.getPadExtents(t,n),o.l+=e.l,o.t+=e.t,o.w-=e.w,o.h-=e.h),o)}}})}});