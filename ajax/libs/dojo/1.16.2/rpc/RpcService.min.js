define(["../_base/array","../_base/declare","../_base/Deferred","../_base/kernel","../_base/lang","../_base/url","../_base/xhr"],function(e,r,i,s,n,o,c){return r("dojo.rpc.RpcService",null,{constructor:function(r){if(r)if(n.isString(r)||r instanceof o){if(r instanceof o)var e=r+"";else e=r;var t=c.get({url:e,handleAs:"json-comment-optional",sync:!0});t.addCallback(this,"processSmd"),t.addErrback(function(){throw new Error("Unable to load SMD from "+r)})}else r.smdStr?this.processSmd(s.eval("("+r.smdStr+")")):(r.serviceUrl&&(this.serviceUrl=r.serviceUrl),this.timeout=r.timeout||0,"strictArgChecks"in r&&(this.strictArgChecks=r.strictArgChecks),this.processSmd(r))},strictArgChecks:!0,serviceUrl:"",parseResults:function(r){return r},errorCallback:function(e){return function(r){e.errback(r)}},resultCallback:function(t){return n.hitch(this,function(r){var e;null!=r.error?("object"==typeof r.error?((e=new Error(r.error.message)).code=r.error.code,e.error=r.error.error):e=new Error(r.error),e.id=r.id,e.errorObject=r,t.errback(e)):t.callback(this.parseResults(r))})},generateMethod:function(e,t,s){return n.hitch(this,function(){var r=new i;if(this.strictArgChecks&&null!=t&&arguments.length!=t.length)throw new Error("Invalid number of parameters for remote method.");return this.bind(e,n._toArray(arguments),r,s),r})},processSmd:function(r){r.methods&&e.forEach(r.methods,function(r){if(r&&r.name&&(this[r.name]=this.generateMethod(r.name,r.parameters,r.url||r.serviceUrl||r.serviceURL),!n.isFunction(this[r.name])))throw new Error("RpcService: Failed to create"+r.name+"()")},this),this.serviceUrl=r.serviceUrl||r.serviceURL,this.required=r.required,this.smd=r}})});