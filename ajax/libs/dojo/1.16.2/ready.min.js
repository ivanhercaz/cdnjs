define(["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(i,o,r,a,d){function n(){e=1,i._postLoad=i.config.afterOnLoad=!0,s()}var e=0,t=[],f=0,s=function(){if(!f){for(f=1;e&&(!a||0==a._Q.length)&&(!r.idle||r.idle())&&t.length;){var o=t.shift();try{o()}catch(o){if(o.info=o.message,!r.signal)throw o;r.signal("error",o)}}f=0}};r.on&&r.on("idle",s),a&&(a._onQEmpty=s);var c=i.ready=i.addOnLoad=function(o,r,a){var n=d._toArray(arguments);"number"!=typeof o?(a=r,r=o,o=1e3):n.shift(),(a=a?d.hitch.apply(i,n):function(){r()}).priority=o;for(var e=0;e<t.length&&o>=t[e].priority;e++);t.splice(e,0,a),s()};if(o.add("dojo-config-addOnLoad",1),o("dojo-config-addOnLoad")){var l=i.config.addOnLoad;l&&c[d.isArray(l)?"apply":"call"](i,l)}return o("dojo-sync-loader")&&i.config.parseOnLoad&&!i.isAsync&&c(99,function(){i.parser||(i.deprecated("Add explicit require(['dojo/parser']);","","2.0"),r(["dojo/parser"]))}),a?a(n):n(),c});