define(["../../_base/lang","../../_base/kernel","./sorter"],function(e,h,f){var t={};return e.setObject("dojo.data.util.simpleFetch",t),t.errorHandler=function(t,e){if(e.onError){var r=e.scope||h.global;e.onError.call(r,t,e)}},t.fetchHandler=function(t,e){var r=e.abort||null,o=!1,n=e.start?e.start:0,l=e.count&&e.count!==1/0?n+e.count:t.length;e.abort=function(){o=!0,r&&r.call(e)};var a=e.scope||h.global;if(e.store||(e.store=this),e.onBegin&&e.onBegin.call(a,t.length,e),e.sort&&t.sort(f.createSortFunction(e.sort,this)),e.onItem)for(var c=n;c<t.length&&c<l;++c){var s=t[c];o||e.onItem.call(a,s,e)}if(e.onComplete&&!o){var i=null;e.onItem||(i=t.slice(n,l)),e.onComplete.call(a,i,e)}},t.fetch=function(t){return(t=t||{}).store||(t.store=this),this._fetchItems(t,e.hitch(this,"fetchHandler"),e.hitch(this,"errorHandler")),t},t});