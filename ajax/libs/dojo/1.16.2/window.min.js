define(["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style","./dom-construct"],function(t,I,V,j,N,S,l){I.add("rtl-adjust-position-for-verticalScrollBar",function(t,e){var i=V.body(e),o=l.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},i,"last"),n=l.create("div",{style:{overflow:"hidden",direction:"ltr"}},o,"last"),r=0!=N.position(n).x;return o.removeChild(n),i.removeChild(o),r}),I.add("position-fixed-support",function(t,e){var i=V.body(e),o=l.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},i,"last"),n=l.create("span",{style:{position:"fixed",left:"0",top:"0"}},o,"last"),r=N.position(n).x!=N.position(o).x;return o.removeChild(n),i.removeChild(o),r});var d={getBox:function(t){var e,i,o="BackCompat"==(t=t||V.doc).compatMode?V.body(t):t.documentElement,n=N.docScroll(t);if(I("touch")){var r=d.get(t);e=r.innerWidth||o.clientWidth,i=r.innerHeight||o.clientHeight}else e=o.clientWidth,i=o.clientHeight;return{l:n.x,t:n.y,w:e,h:i}},get:function(t){if(I("ie")&&d!==document.parentWindow){t.parentWindow.execScript("document._parentWindow = window;","Javascript");var e=t._parentWindow;return t._parentWindow=null,e}return t.parentWindow||t.defaultView},scrollIntoView:function(e,t){try{var i=(e=j.byId(e)).ownerDocument||V.doc,o=V.body(i),n=i.documentElement||o.parentNode,r=I("ie")||I("trident"),l=I("webkit");if(e==o||e==n)return;if(!(I("mozilla")||r||l||I("opera")||I("trident")||I("edge"))&&"scrollIntoView"in e)return void e.scrollIntoView(!1);function d(t){return!(r<=6||7==r&&a)&&(I("position-fixed-support")&&"fixed"==S.get(t,"position").toLowerCase())}function c(t,e,i){"BODY"==t.tagName||"HTML"==t.tagName?u.get(t.ownerDocument).scrollBy(e,i):(e&&(t.scrollLeft+=e),i&&(t.scrollTop+=i))}var a="BackCompat"==i.compatMode,s=Math.min(o.clientWidth||n.clientWidth,n.clientWidth||o.clientWidth),h=Math.min(o.clientHeight||n.clientHeight,n.clientHeight||o.clientHeight),p=l||a?o:n,f=t||N.position(e),w=e.parentNode,u=this;if(d(e))return;for(;w;){w==o&&(w=p);var m=N.position(w),x=d(w),v="rtl"==S.getComputedStyle(w).direction.toLowerCase();if(w==p)m.w=s,m.h=h,p==n&&(r||I("trident"))&&v&&(m.x+=p.offsetWidth-m.w),m.x=0,m.y=0;else{var y=N.getPadBorderExtents(w);m.w-=y.w,m.h-=y.h,m.x+=y.l,m.y+=y.t;var g=w.clientWidth,W=m.w-g;0<g&&0<W&&(v&&I("rtl-adjust-position-for-verticalScrollBar")&&(m.x+=W),m.w=g),g=w.clientHeight,W=m.h-g,0<g&&0<W&&(m.h=g)}x&&(m.y<0&&(m.h+=m.y,m.y=0),m.x<0&&(m.w+=m.x,m.x=0),m.y+m.h>h&&(m.h=h-m.y),m.x+m.w>s&&(m.w=s-m.x));var b,H,C=f.x-m.x,B=f.y-m.y,M=C+f.w-m.w,L=B+f.h-m.h;0<M*C&&(w.scrollLeft||w==p||w.scrollWidth>w.offsetHeight)&&(b=Math[C<0?"max":"min"](C,M),v&&(8==r&&!a||5<=I("trident"))&&(b=-b),H=w.scrollLeft,c(w,b,0),b=w.scrollLeft-H,f.x-=b),0<L*B&&(w.scrollTop||w==p||w.scrollHeight>w.offsetHeight)&&(b=Math.ceil(Math[B<0?"max":"min"](B,L)),H=w.scrollTop,c(w,0,b),b=w.scrollTop-H,f.y-=b),w=w!=p&&!x&&w.parentNode}}catch(t){console.error("scrollIntoView: "+t),e.scrollIntoView(!1)}}};return I("extend-dojo")&&t.setObject("dojo.window",d),d});