define([],function(){"use strict";function e(v){return function(e,r,n,t){var u,i=e[r];i&&i.target==e||(e[r]=u=function(){for(var e=u.nextId,r=arguments,n=u.before;n;)n.advice&&(r=n.advice.apply(this,r)||r),n=n.next;if(u.around)var t=u.around.advice(this,r);for(var i=u.after;i&&i.id<e;){if(i.advice)if(i.receiveArguments){var a=i.advice.apply(this,r);t=void 0===a?t:a}else t=i.advice.call(this,t,r);i=i.next}return t},i&&(u.around={advice:function(e,r){return i.apply(e,r)}}),u.target=e,u.nextId=u.nextId||0);var a=function(n,t,i,e){var a,u=n[t],r="around"==t;if(r){var v=i(function(){return u.advice(this,arguments)});a={remove:function(){v=v&&(n=i=null)},advice:function(e,r){return v?v.apply(e,r):u.advice(e,r)}}}else a={remove:function(){if(a.advice){var e=a.previous,r=a.next;r||e?(e?e.next=r:n[t]=r,r&&(r.previous=e)):delete n[t],n=i=a.advice=null}},id:n.nextId++,advice:i,receiveArguments:e};if(u&&!r)if("after"==t){for(;u.next&&(u=u.next););(u.next=a).previous=u}else"before"==t&&(((n[t]=a).next=u).previous=a);else n[t]=a;return a}(u||i,v,n,t);return n=null,a}}var r=e("after");return{before:e("before"),around:e("around"),after:r}});