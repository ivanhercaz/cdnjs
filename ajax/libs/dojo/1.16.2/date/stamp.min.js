define(["../_base/lang","../_base/array"],function(e,s){var a={};return e.setObject("dojo.date.stamp",a),a.fromISOString=function(e,t){a._isoRegExp||(a._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var n=a._isoRegExp.exec(e),i=null;if(n){n.shift(),n[1]&&n[1]--,n[6]&&(n[6]*=1e3),t&&(t=new Date(t),s.forEach(s.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(e){return t["get"+e]()}),function(e,t){n[t]=n[t]||e})),i=new Date(n[0]||1970,n[1]||0,n[2]||1,n[3]||0,n[4]||0,n[5]||0,n[6]||0),n[0]<100&&i.setFullYear(n[0]||1970);var r=0,o=n[7]&&n[7].charAt(0);"Z"!=o&&(r=60*(n[8]||0)+(Number(n[9])||0),"-"!=o&&(r*=-1)),o&&(r-=i.getTimezoneOffset()),r&&i.setTime(i.getTime()+6e4*r)}return i},a.toISOString=function(e,t){function n(e){return e<10?"0"+e:e}var i=[],r=(t=t||{}).zulu?"getUTC":"get",o="";if("time"!=t.selector){var s=e[r+"FullYear"]();o=["0000".substr((s+"").length)+s,n(e[r+"Month"]()+1),n(e[r+"Date"]())].join("-")}if(i.push(o),"date"!=t.selector){var a=[n(e[r+"Hours"]()),n(e[r+"Minutes"]()),n(e[r+"Seconds"]())].join(":"),u=e[r+"Milliseconds"]();if(t.milliseconds&&(a+="."+(u<100?"0":"")+n(u)),t.zulu)a+="Z";else if("time"!=t.selector){var l=e.getTimezoneOffset(),f=Math.abs(l);a+=(0<l?"-":"+")+n(Math.floor(f/60))+":"+n(f%60)}i.push(a)}return i.join("T")},a});