window.OpenAjax||(OpenAjax=new function(){var n={},r="org.openajax.hub.",i={};(this.hub=i).implementer="http://openajax.org",i.implVersion="0.6",i.specVersion="0.6",i.implExtraData={},i.libraries=n,i.registerLibrary=function(i,e,s,t){n[i]={prefix:i,namespaceURI:e,version:s,extraData:t},this.publish(r+"registerLibrary",n[i])},i.unregisterLibrary=function(i){this.publish(r+"unregisterLibrary",n[i]),delete n[i]},i._subscriptions={c:{},s:[]},i._cleanup=[],i._subIndex=0,i._pubDepth=0,i.subscribe=function(i,e,s,t,n){s=s||window;var r=i+"."+this._subIndex,p={scope:s,cb:e,fcb:n,data:t,sid:this._subIndex++,hdl:r},u=i.split(".");return this._subscribe(this._subscriptions,u,0,p),r},i.publish=function(i,e){var s=i.split(".");if(this._pubDepth++,this._publish(this._subscriptions,s,0,i,e),this._pubDepth--,0<this._cleanup.length&&0==this._pubDepth){for(var t=0;t<this._cleanup.length;t++)this.unsubscribe(this._cleanup[t].hdl);delete this._cleanup,this._cleanup=[]}},i.unsubscribe=function(i){var e=i.split("."),s=e.pop();this._unsubscribe(this._subscriptions,e,0,s)},i._subscribe=function(i,e,s,t){var n=e[s];s==e.length?i.s.push(t):(void 0===i.c&&(i.c={}),void 0===i.c[n]&&(i.c[n]={c:{},s:[]}),this._subscribe(i.c[n],e,s+1,t))},i._publish=function(i,e,s,t,n){var r;if(void 0!==i&&void 0!==(r=s==e.length?i:(this._publish(i.c[e[s]],e,s+1,t,n),this._publish(i.c["*"],e,s+1,t,n),i.c["**"])))for(var p=r.s,u=p.length,a=0;a<u;a++)if(p[a].cb){var b=p[a].scope,h=p[a].cb,c=p[a].fcb,l=p[a].data;"string"==typeof h&&(h=b[h]),"string"==typeof c&&(c=b[c]),c&&!c.call(b,t,n,l)||h.call(b,t,n,l)}},i._unsubscribe=function(i,e,s,t){if(void 0!==i){if(s<e.length){var n=i.c[e[s]];if(this._unsubscribe(n,e,s+1,t),0==n.s.length){for(var r in n.c)return;delete i.c[e[s]]}return}for(var p=i.s,u=p.length,a=0;a<u;a++)if(t==p[a].sid)return void(0<this._pubDepth?(p[a].cb=null,this._cleanup.push(p[a])):p.splice(a,1))}},i.reinit=function(){for(var i in OpenAjax.hub.libraries)delete OpenAjax.hub.libraries[i];OpenAjax.hub.registerLibrary("OpenAjax","http://openajax.org/hub","0.6",{}),delete OpenAjax._subscriptions,OpenAjax._subscriptions={c:{},s:[]},delete OpenAjax._cleanup,OpenAjax._cleanup=[],OpenAjax._subIndex=0,OpenAjax._pubDepth=0}},OpenAjax.hub.registerLibrary("OpenAjax","http://openajax.org/hub","0.6",{}));