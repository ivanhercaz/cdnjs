define(["exports","./_base/kernel","./sniff","./_base/window","./dom","./dom-attr"],function(d,e,c,f,l,n){var p,h={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},b=/<\s*([\w\:]+)/,m={},u=0,v="__"+e._scopeName+"ToDomId";for(var t in h)if(h.hasOwnProperty(t)){var r=h[t];r.pre="option"==t?'<select multiple="multiple">':"<"+r.join("><")+">",r.post="</"+r.reverse().join("></")+">"}function s(e,t){var r=t.parentNode;r&&r.insertBefore(e,t)}c("ie")<=8&&(p=function(t){t.__dojo_html5_tested="yes";var e=i("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},t.body);1!==e.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(e){t.createElement(e)}),a(e)}),d.toDom=function(e,t){var r=(t=t||f.doc)[v];r||(t[v]=r=++u+"",m[r]=t.createElement("div")),c("ie")<=8&&!t.__dojo_html5_tested&&t.body&&p(t);var i,o,n,a,d=(e+="").match(b),l=d?d[1].toLowerCase():"",s=m[r];if(d&&h[l])for(i=h[l],s.innerHTML=i.pre+e+i.post,o=i.length;o;--o)s=s.firstChild;else s.innerHTML=e;if(1==s.childNodes.length)return s.removeChild(s.firstChild);for(a=t.createDocumentFragment();n=s.firstChild;)a.appendChild(n);return a},d.place=function(e,t,r){if(t=l.byId(t),"string"==typeof e&&(e=/^\s*</.test(e)?d.toDom(e,t.ownerDocument):l.byId(e)),"number"==typeof r){var i=t.childNodes;!i.length||i.length<=r?t.appendChild(e):s(e,i[r<0?0:r])}else switch(r){case"before":s(e,t);break;case"after":o=e,(a=(n=t).parentNode)&&(a.lastChild==n?a.appendChild(o):a.insertBefore(o,n.nextSibling));break;case"replace":t.parentNode.replaceChild(e,t);break;case"only":d.empty(t),t.appendChild(e);break;case"first":if(t.firstChild){s(e,t.firstChild);break}default:t.appendChild(e)}var o,n,a;return e};var i=d.create=function(e,t,r,i){var o=f.doc;return r&&(o=(r=l.byId(r)).ownerDocument),"string"==typeof e&&(e=o.createElement(e)),t&&n.set(e,t),r&&d.place(e,r,i),e};function o(e){if("innerHTML"in e)try{return void(e.innerHTML="")}catch(e){}for(var t;t=e.lastChild;)e.removeChild(t)}d.empty=function(e){o(l.byId(e))};var a=d.destroy=function(e){var t,r;(e=l.byId(e))&&(r=(t=e).parentNode,t.firstChild&&o(t),r&&(c("ie")&&r.canHaveChildren&&"removeNode"in t?t.removeNode(!1):r.removeChild(t)))}});