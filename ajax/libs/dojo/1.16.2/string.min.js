define(["./_base/kernel","./_base/lang"],function(r,c){var e=/[&<>'"\/]/g,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},o={};return c.setObject("dojo.string",o),o.escape=function(t){return t?t.replace(e,function(t){return n[t]}):""},o.rep=function(t,r){if(r<=0||!t)return"";for(var e=[];1&r&&e.push(t),r>>=1;)t+=t;return e.join("")},o.pad=function(t,r,e,n){e=e||"0";var i=String(t),u=o.rep(e,Math.ceil((r-i.length)/e.length));return n?i+u:u+i},o.substitute=function(t,u,o,a){return a=a||r.global,o=o?c.hitch(a,o):function(t){return t},t.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(t,r,e){if(""==r)return"$";var n=c.getObject(r,!1,u);e&&(n=c.getObject(e,!1,a).call(a,n,r));var i=o(n,r);if(void 0===i)throw new Error('string.substitute could not find key "'+r+'" in template');return i.toString()})},o.trim=String.prototype.trim?c.trim:function(t){for(var r=(t=t.replace(/^\s+/,"")).length-1;0<=r;r--)if(/\S/.test(t.charAt(r))){t=t.substring(0,r+1);break}return t},o});