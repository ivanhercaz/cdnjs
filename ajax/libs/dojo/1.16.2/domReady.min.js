define(["./global","./has"],function(e,t){var n,a=document,o={loaded:1,complete:1},r="string"!=typeof a.readyState,c=!!o[a.readyState],i=[];function d(t){i.push(t),c&&f()}function f(){if(!n){for(n=!0;i.length;)try{i.shift()(a)}catch(t){console.error(t,"in domReady callback",t.stack)}n=!1,d._onQEmpty()}}if(d.load=function(t,e,n){d(n)},d._Q=i,d._onQEmpty=function(){},r&&(a.readyState="loading"),!c){function l(t){t=t||e.event,c||"readystatechange"==t.type&&!o[a.readyState]||(r&&(a.readyState="complete"),c=1,f())}var u=[],h=function(t,e){t.addEventListener(e,l,!1),i.push(function(){t.removeEventListener(e,l,!1)})};if(!t("dom-addeventlistener")){h=function(t,e){e="on"+e,t.attachEvent(e,l),i.push(function(){t.detachEvent(e,l)})};var s=a.createElement("div");try{s.doScroll&&null===e.frameElement&&u.push(function(){try{return s.doScroll("left"),1}catch(t){}})}catch(t){}}if(h(a,"DOMContentLoaded"),h(e,"load"),"onreadystatechange"in a?h(a,"readystatechange"):r||u.push(function(){return o[a.readyState]}),u.length){var y=function(){if(!c){for(var t=u.length;t--;)if(u[t]())return void l("poller");setTimeout(y,30)}};y()}}return d});