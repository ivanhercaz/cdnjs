define(["intern!object","intern/chai!assert","../../../request/util","../../../has","../../../request/xhr"],function(e,n,i,r){e({name:"dojo/request/util",deepCopy:function(){var e={apple:0,banana:{weight:52,price:100,code:"B12345",purchased:new Date(2016,0,1)},cherry:97},a={banana:{price:200,code:"B98765",purchased:new Date(2017,0,1)},durian:100};i.deepCopy(e,a),n.strictEqual(e.banana.weight,52),n.strictEqual(e.banana.price,200),n.strictEqual(e.banana.code,"B98765"),n.equal(e.banana.purchased.getTime(),new Date(2017,0,1).getTime())},".deepCopy should ignore the __proto__ property":function(){var e=JSON.parse('{ "__proto__": { "protoPollution": true }}');i.deepCopy({},e),n.isUndefined({}.protoPollution)},"deepCopy with FormData":function(){if(r("native-formdata")){var e=new FormData,a={apple:0,banana:{weight:52,price:100,code:"B12345",purchased:new Date(2016,0,1)},cherry:97},t={banana:{price:200,code:"B98765",purchased:new Date(2017,0,1)},formData:e,durian:100};i.deepCopy(a,t),n.strictEqual(a.banana.weight,52),n.strictEqual(a.banana.price,200),n.strictEqual(a.banana.code,"B98765"),n.strictEqual(a.formData,e),n.equal(a.banana.purchased.getTime(),new Date(2017,0,1).getTime())}else this.skip("Do not run test if FormData not available.")},"deepCopy with Blob":function(){if(r("native-blob")){var e=new Blob([JSON.stringify({test:"data"})],{type:"application/json"}),a={apple:0,banana:{weight:52,price:100,code:"B12345",purchased:new Date(2016,0,1)},cherry:97},t={banana:{price:200,code:"B98765",purchased:new Date(2017,0,1)},blob:e,durian:100};i.deepCopy(a,t),n.strictEqual(a.banana.weight,52),n.strictEqual(a.banana.price,200),n.strictEqual(a.banana.code,"B98765"),n.strictEqual(a.blob,e),n.equal(a.banana.purchased.getTime(),new Date(2017,0,1).getTime())}else this.skip("Do not run test if Blob not available.")},"deepCopy with Element, given Element is defined":function(){if("undefined"!=typeof Element){var e=document.createElement("span"),a={apple:0,banana:{weight:52,price:100,code:"B12345",purchased:new Date(2016,0,1)},cherry:97},t={banana:{price:200,code:"B98765",purchased:new Date(2017,0,1)},element:e,durian:100};i.deepCopy(a,t),n.strictEqual(a.banana.weight,52),n.strictEqual(a.banana.price,200),n.strictEqual(a.banana.code,"B98765"),n.strictEqual(a.element,e),n.equal(a.banana.purchased.getTime(),new Date(2017,0,1).getTime())}else this.skip("Do not run test if Element not available.")},"deepCopy with Element, given Element is not defined":function(){"undefined"!=typeof Element&&this.skip("Do not run test if Element is available.");var e={nodeType:1,value:"Orange"},a={apple:0,banana:{weight:52,price:100,code:"B12345",purchased:new Date(2016,0,1)},cherry:97},t={banana:{price:200,code:"B98765",purchased:new Date(2017,0,1)},element:e,durian:100};i.deepCopy(a,t),n.strictEqual(a.banana.weight,52),n.strictEqual(a.banana.price,200),n.strictEqual(a.banana.code,"B98765"),n.strictEqual(a.element,e),n.equal(a.banana.purchased.getTime(),new Date(2017,0,1).getTime())}})});