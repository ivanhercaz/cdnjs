define(["intern!object","intern/chai!assert","../../../on","../../../on/throttle","../../../Evented","sinon","dojo/has!host-browser?dojo/dom-construct","dojo/has!host-browser?../../../query","dojo/has!host-browser?dojo/domReady!"],function(t,r,a,l,o,s,u){var c,n=[],e=a;for(var i in a=function(){var t=e.apply(null,arguments);return n.push(t),t},e)a[i]=e[i];function f(){for(;0<n.length;)n.pop().remove()}var h,d,v,y,b={name:"dojo/on/throttle",common:{beforeEach:function(){c=new o},throttles:function(){var t=s.spy();a(c,l("custom",200),t);var o=s.spy(function(){c&&c.emit("custom")}),n=setInterval(o,50),e=this.async();setTimeout(e.callback(function(){clearInterval(n),r.ok(t.callCount<o.callCount)}),1e3)},afterEach:function(){f(),c=null}}};b.DOM={beforeEach:function(){u&&(h=u.create("div",null,document.body),d=u.create("div",null,h),v=u.create("a",null,d),y=u.create("button",{type:"button"},v))},throttles:function(){u||this.skip("Not running browser-only tests");var t=s.spy(),o=s.spy();a(h,l("a:click",200),t),a(d,"a:click",o);var n=s.spy(function(){y&&y.click()}),e=setInterval(n,50),c=this.async();setTimeout(c.callback(function(){clearInterval(e),r.ok(t.callCount<o.callCount)}),1e3)},afterEach:function(){u&&(f(),u.destroy(h),h=d=v=y=null)}},t(b)});