define(["intern!object","intern/chai!assert","../../../on","../../../on/debounce","../../../Evented","sinon","dojo/has!host-browser?dojo/dom-construct","dojo/has!host-browser?../../../query","dojo/has!host-browser?dojo/domReady!"],function(o,e,a,l,n,u,i){var c,t=[],r=a;for(var s in a=function(){var o=r.apply(null,arguments);return t.push(o),o},r)a[s]=r[s];function d(){for(;0<t.length;)t.pop().remove()}var f,m,b,h,y={name:"dojo/on/debounce",common:{beforeEach:function(){c=new n},debounces:function(){var o=u.spy();a(c,l("custom",100),o),c.emit("custom"),c.emit("custom"),c.emit("custom"),c.emit("custom"),setTimeout(this.async().callback(function(){e.equal(o.callCount,1)}),500)},afterEach:function(){d(),c=null}}};y.DOM={beforeEach:function(){i&&(f=i.create("div",null,document.body),m=i.create("div",null,f),b=i.create("a",null,m),h=i.create("button",null,b))},bubbling:function(){i||this.skip("Not running browser-only tests");var o=u.spy(function(o){e.ok(Boolean(o)),e.ok(Boolean(o.target)),e.equal(o.target.nodeType,1)}),n=u.spy(),c=u.spy(),t=u.spy();a(f,l("a:click",100),o),a(m,l("click",100),n),a(f,l("click, a:click",100),c),a(f,"a:click",t);try{h.click(),h.click(),h.click(),h.click()}catch(o){}setTimeout(this.async().callback(function(){e.equal(o.callCount,1),e.equal(n.callCount,1),e.equal(c.callCount,1),e.equal(t.callCount,4)}),500)},afterEach:function(){i&&(d(),i.destroy(f),f=m=b=h=null)}},o(y)});