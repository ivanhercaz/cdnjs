define(["require","intern!object","intern/chai!assert","../../i18n","dojo/_base/array","dojo/Deferred","dojo/_base/lang"],function(a,e,i,r,t,l,n){var s=a.toAbsMid("./support/i18n");function o(o,t){return function(){var n=new l,e=r.getL10nName(s,"salutations",o);return a([e],function(e){n.resolve(e)}),n.then(function(e){i.equal(e.hello,t)})}}function c(n,o){return function(){var e=r.getLocalization(s,"salutations",n).hello;i.equal(e,o)}}function u(e,n){var o={};return t.forEach(e,function(e){o[e[0]]=n(e[1],e[2])}),o}e(function(){var e=[["Locale which overrides root translation","de","Hallo"],["Locale which does not override root translation","en","Hello"],["Locale which overrides its parent","en-au","G'day"],["Locale which does not override its parent","en-us","Hello"],["Locale which overrides its parent and ancestor","en-us-texas","Howdy"],["3rd level variant which overrides its parent","en-us-new_york","Hello"],["Locale which overrides its grandparent","en-us-new_york-brooklyn","Yo"],["Locale which does not have any translation available","xx","Hello"],["A double-byte string should be read in as UTF-8 and treated as unicode","zh-cn","你好"]];return{name:"dojo/i18n",construction:function(){i.isDefined(r.getLocalization)},"plugin .load()":u(e,o),".getLocalization":n.mixin(u(e,c),{"missing bundle throws":function(){i.throws(function(){c("lolipop-guild",void 0)()})},"cached results":function(){var e=r.getLocalization(s,"salutations","en");i.equal(e.hello,"Hello"),e.hello="test",e=r.getLocalization(s,"salutations","en"),i.equal(e.hello,"test")}})}})});