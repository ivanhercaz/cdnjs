define(["intern!object","intern/chai!assert","sinon","../../dom","../../sniff","../../dom-construct","../../Deferred"],function(e,t,n,d,o,i,c){var s,u,a,r,l,m,p,f,b,v,y,D,h,C,E,I,T,w,N,g,q,A=0;function F(){return"dojo_dom"+A++}e({name:"dojo/dom","byId()":{setup:function(){I=document.createElement("div"),T=document.createElement("iframe"),w=document.createElement("span"),N=F(),document.body.appendChild(I),I.appendChild(T),I.appendChild(w),g=T.contentDocument.createElement("div"),q=F();var n=new c;return setTimeout(function e(){T.contentDocument&&T.contentDocument.body?(T.contentDocument.body.appendChild(g),w.id=N,g.id=q,n.resolve()):setTimeout(e,0)},0),n.promise},teardown:function(){document.body.removeChild(I)},node:function(){var e=d.byId(w);t.equal(e,w)},string:function(){var e=d.byId(N);t.equal(e,w)},"string + document":function(){var e=d.byId(q,T.contentDocument);t.equal(e,g)},"non-existent node returns null":function(){var e=d.byId(F());t.isNull(e)}},"isDescendant()":{setup:function(){D=document.createElement("div"),h=document.createElement("div"),document.body.appendChild(D),D.appendChild(h),C=F(),E=F(),D.id=C,h.id=E},teardown:function(){document.body.removeChild(D)},"node + parent-node":function(){var e=d.isDescendant(h,D);t.isTrue(e)},"node + parent-node-id":function(){var e=d.isDescendant(h,C);t.isTrue(e)},"string + parent-node":function(){var e=d.isDescendant(E,D);t.isTrue(e)},"node + not-ancestor":function(){var e=d.isDescendant(D,h);t.isFalse(e)},"node + grandparent-node":function(){var e=d.isDescendant(h,D.parentNode);t.isTrue(e)}},"setSelectable()":{setup:function(){r=F(),s=document.createElement("input"),u=document.createElement("input"),a=document.createElement("input"),u.id=r,document.body.appendChild(s),s.appendChild(u),u.appendChild(a)},teardown:function(){document.body.removeChild(s)},"node + true":function(){var e=o("css-user-select");e?u.style[e]="none":u.removeAttribute("unselectable"),d.setSelectable(u,!0),e?t.equal(u.style[e],""):t.isFalse(u.hasAttribute("unselectable"))},"string + true":function(){var e=o("css-user-select");e?u.style[e]="none":u.removeAttribute("unselectable"),d.setSelectable(r,!0),e?t.equal(u.style[e],""):t.isFalse(u.hasAttribute("unselectable"))},"node + false":function(){var e=o("css-user-select");e?u.style[e]="":u.setAttribute("unselectable"),d.setSelectable(r,!1),e?t.equal(u.style[e],"none"):t.isTrue(u.hasAttribute("unselectable"))},"validation tests":{setup:function(){l=document.createElement("div"),v=document.createElement("iframe"),m=document.createElement("div"),p=document.createElement("div"),b=F(),v.id=b,v.name=b,f=F(),m.id=f,y=F();var n=i.toDom("<div id='"+y+"'></div>");document.body.appendChild(l),l.appendChild(v),l.appendChild(m),m.appendChild(p);var t=new c;return setTimeout(function e(){v.contentDocument&&v.contentDocument.body?(i.place(n,v.contentDocument.body),t.resolve()):setTimeout(e,0)},0),t.promise},teardown:function(){document.body.removeChild(l)},nonExistentId:function(){t.isNull(d.byId("nonExistentId"))},null:function(){t.isNull(d.byId(null))},"empty string":function(){t.isNull(d.byId(""))},undefined:function(){t.isNull(d.byId(void 0))},isDescendant:function(){t.isTrue(d.isDescendant(f,document.body)),t.isTrue(d.isDescendant(f,document)),t.isTrue(d.isDescendant(f,f)),t.isTrue(d.isDescendant(d.byId(f),f)),t.isFalse(d.isDescendant(f,d.byId(f).firstChild)),t.isTrue(d.isDescendant(d.byId(f).firstChild,f))},isDescendantIframe:function(){var e,n=((e=v).contentDocument||e.contentWindow&&e.contentWindow.document||e.name&&document.frames[e.name]&&documendoh.frames[e.name].document||null).getElementById(y);t.isTrue(d.isDescendant(n,n)),t.isTrue(d.isDescendant(n,n.parentNode)),t.isFalse(d.isDescendant(n.parentNode,n))}}}})});