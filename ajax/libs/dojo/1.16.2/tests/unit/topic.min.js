define(["intern!object","intern/chai!assert","dojo/aspect","../../topic"],function(t,o,e,s){var i,n=[];t({name:"dojo/topic",setup:function(){i=e.after(s,"subscribe",function(t){return n.push(t),t})},teardown:function(){i.remove()},afterEach:function(){for(;0<n.length;)n.pop().remove()},".subscribe and .publish":function(){var e,i=0;s.subscribe("/test/foo",function(t){o.strictEqual(t,e),i++}),e="bar",s.publish("/test/foo",e),o.strictEqual(i,1),e="baz",s.publish("/test/foo",e),o.strictEqual(i,2)},unsubscribing:function(){var t=!1;s.subscribe("/test/foo",function(){t=!0}).remove(),s.publish("/test/foo","bar"),o.isFalse(t)},"publish argument arity":function(){var t,e=["/test/topic"];s.subscribe("/test/topic",function(){t=Array.prototype.slice.call(arguments)});for(var i=0;i<=5;++i)0<i&&e.push({value:"value-"+i}),s.publish.apply(s,e),o.equal(t.length,i),o.deepEqual(t,e.slice(1))}})});