{"version":3,"sources":["Deferred.js"],"names":["define","registerSuite","assert","sinon","Deferred","Promise","CancelError","canceler","deferred","name","beforeEach","stub",".resolve","deferred receives result after resolving","expected","resolve","then","result","equal","promise receives result after resolving","promise","resolve() returns promise","returnedPromise","instanceOf","isResolved() returns true after resolving","isFalse","isResolved","isTrue","isFulfilled() returns true after resolving","isFulfilled","resolve() is ignored after having been fulfilled","doesNotThrow","resolve() throws error after having been fulfilled and strict","throws","Error","resolve() watching success handlers are notified","successHandler","spy","called","resolve() is already bound to the deferred",".reject","deferred receives result after rejecting","reject","promise receives result after rejecting","reject() returns promise","isRejected() returns true after rejecting","isRejected","isFulfilled() returns true after rejecting","reject() is ignored after having been fulfilled","reject() throws error after having been fulfilled and strict","reject() watching failure handlers are notified","failureHandler","reject() is already bound to the deferred",".progress","deferred receives result after progress","progressStub","progress","calledOnce","lastCall","args","promise receives result after progres","progress() returns promise","isResolved() returns false after progress","isRejected() returns false after progress","isFulfilled() returns false after progress","progress() is ignored after having been fulfilled","progress() throws error after having been fulfilled and strict","progress() results are not cached","secondProgressData","progress() with chaining","innerDfd","after progress(), the progback return value is emitted on the returned promise","n","promiseStub","progress() is already bound to the deferred",".cancel","cancel() invokes a canceler","cancel","isCanceled() returns true after canceling","isCanceled","isResolved() returns false after canceling","isRejected() returns true after canceling","isFulfilled() returns true after canceling","cancel() is ignored after having been fulfilled","cancel() throws error after having been fulfilled and strict","cancel() without reason results in CancelError","reason","cancel() returns default reason","reason is passed to canceler","cancels with reason returned from canceler","cancel() returns reason from canceler","returns","cancel() returns reason from canceler, if canceler rejects with reason","with canceler not returning anything, returns default CancelError","with canceler not returning anything, still returns passed reason","cancel() does not reject promise if canceler resolves deferred","cancel() does not reject promise if canceler resolves a chain of promises","lastPromise","cancel() returns undefined if canceler resolves deferred","isUndefined","cancel() does not change rejection value if canceler rejects deferred","cancel() does not change rejection value if canceler rejects a chain of promises","cancel() returns undefined if canceler rejects deferred","cancel() a promise chain","cancelerStub","cancel() a returned promise","obj","inner","chain","cancel() is already bound to the deferred",".then","chained then()","square","asynchronously chained then()","asyncSquare","setTimeout","then() is already bound to the deferred","then() with progback: returned promise is not fulfilled when progress is emitted"],"mappings":"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"}