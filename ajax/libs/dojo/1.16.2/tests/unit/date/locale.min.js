define(["intern!object","intern/chai!assert","../../../date/locale","dojo/_base/kernel","dojo/_base/array","dojo/i18n","dojo/Deferred"],function(e,l,n,s,c,i,u){function t(e,t){l.ok(e,"Date 1 does not have a value"),l.ok(t,"Date 2 does not have a value."),l.instanceOf(e,Date),l.instanceOf(t,Date),l.equal(e.getTime(),t.getTime())}var a,o,r,f;e({name:"dojo/date/locale",setup:function(){var e,t,a,o,r=["en-us","fr-fr","es","de-at","ja-jp","zh-cn"];if(s.isAsync)return t=r,a=new u,o=c.map(t,function(e){return i.getL10nName("dojo/cldr","gregorian",e)}),require(o,a.resolve),a;e=r,c.forEach(e,function(e){dojo.requireLocalization("dojo.cldr","gregorian",e)})},".isWeekend":function(){var e=new Date(2006,8,21),t=new Date(2006,8,22),a=new Date(2006,8,23),o=new Date(2006,8,24),r=new Date(2006,8,25);l.isFalse(n.isWeekend(e,"en-us")),l.isFalse(n.isWeekend(t,"en-us")),l.isTrue(n.isWeekend(a,"en-us")),l.isTrue(n.isWeekend(o,"en-us")),l.isFalse(n.isWeekend(r,"en-us"))},".format":(f=new Date(2006,7,11,0,55,12,345),{full:function(){l.equal(n.format(f,{formatLength:"full",selector:"date",locale:"en-us"}),"Friday, August 11, 2006"),l.equal(n.format(f,{formatLength:"full",selector:"date",locale:"fr-fr"}),"vendredi 11 août 2006"),l.equal(n.format(f,{formatLength:"full",selector:"date",locale:"de-at"}),"Freitag, 11. August 2006"),l.equal(n.format(f,{formatLength:"full",selector:"date",locale:"ja-jp"}),"2006年8月11日金曜日")},short:function(){l.equal(n.format(f,{formatLength:"short",selector:"date",locale:"en-us"}),"8/11/06"),l.equal(n.format(f,{formatLength:"short",selector:"date",locale:"fr-fr"}),"11/08/2006"),l.equal(n.format(f,{formatLength:"short",selector:"date",locale:"de-at"}),"11.08.06"),l.equal(n.format(f,{formatLength:"short",selector:"date",locale:"ja-jp"}),"2006年8月11日")},time:function(){l.equal(n.format(f,{datePattern:"E",selector:"date"}),"6"),l.equal(n.format(f,{selector:"date",datePattern:"EEE, MMM d, yyyy G",locale:"en-us"}),"Fri, Aug 11, 2006 AD"),l.equal(n.format(f,{formatLength:"short",selector:"time",locale:"en-us"}),"12:55 AM"),l.equal(n.format(f,{timePattern:"h:m:s",selector:"time"}),"12:55:12"),l.equal(n.format(f,{timePattern:"h:m:s.SS",selector:"time"}),"12:55:12.35"),l.equal(n.format(f,{timePattern:"k:m:s.SS",selector:"time"}),"24:55:12.35"),l.equal(n.format(f,{timePattern:"H:m:s.SS",selector:"time"}),"0:55:12.35"),l.equal(n.format(f,{timePattern:"K:m:s.SS",selector:"time"}),"0:55:12.35"),l.equal(n.format(f,{formatLength:"full",selector:"time",locale:"zh-cn"}).replace(/^.*(\u4e0a\u5348.*)/,"$1"),"上午12:55:12")},date:function(){var e={datePattern:"ddMMyyyy",selector:"date"};l.equal(n.format(f,e),"11082006"),e={datePattern:"hh 'o''clock' a",selector:"date",locale:"en"},l.equal(n.format(f,e),"12 o'clock AM"),e={datePattern:"dd/MM/yyyy",timePattern:"hh:mma",locale:"en",am:"am",pm:"pm"},l.equal(n.format(f,e),"11/08/2006, 12:55am")}}),".parse":(a=new Date(2006,7,11,0),o=new Date(2006,7,11,0,30),r=new Date(2006,7,11,12,30),{"short format":{"leading zero month":function(){t(n.parse("08/11/06",{formatLength:"short",selector:"date",locale:"en"}),a)},"single digit month":function(){t(n.parse("8/11/06",{formatLength:"short",selector:"date",locale:"en"}),a)},"tolerate four digit year":function(){t(n.parse("8/11/2006",{formatLength:"short",selector:"date",locale:"en"}),a)},"four digit year in strict mode returns null":function(){l.isNull(n.parse("8/11/2006",{formatLength:"short",selector:"date",locale:"en",strict:!0}))},"upper case PM in time":function(){t(n.parse("08/11/06, 12:30 PM",{formatLength:"short",locale:"en"},"PM"),r)},"lower case pm in time":function(){t(n.parse("08/11/06, 12:30 pm",{formatLength:"short",locale:"en"},"pm"),r)},"lower case pm fails in strict mode":function(){l.isNull(n.parse("8/11/06, 12:30 pm",{formatLength:"short",locale:"en",strict:!0}))},"upper case PM passes in strict mode":function(){l.ok(n.parse("8/11/06, 12:30 PM",{formatLength:"short",locale:"en",strict:!0}))},"upper case AM in time":function(){t(n.parse("08/11/06, 12:30 AM",{formatLength:"short",locale:"en"},"AM"),o)}},"medium format":{"basic usage":function(){t(n.parse("Aug 11, 2006",{formatLength:"medium",selector:"date",locale:"en"}),a)},"tolerate peroid in month abbreviation":function(){t(n.parse("Aug. 11, 2006",{formatLength:"medium",selector:"date",locale:"en"}),a)},"period in month abbreviation returns null in strict mode":function(){l.isNull(n.parse("Aug. 11, 2006",{formatLength:"medium",selector:"date",locale:"en",strict:!0}))}},"long format":{"basic usage":function(){t(n.parse("August 11, 2006",{formatLength:"long",selector:"date",locale:"en"}),a)}},"full format":{"basic usage":function(){t(n.parse("Friday, August 11, 2006",{formatLength:"full",selector:"date",locale:"en"}),a)}},"date pattern":{ddMMyyyy:function(){t(n.parse("11082006",{datePattern:"ddMMyyyy",selector:"date"}),new Date(2006,7,11))},ddMMMyyyy:function(){t(n.parse("31Aug2006",{datePattern:"ddMMMyyyy",selector:"date",locale:"en"}),new Date(2006,7,31))},DDD:function(){t(n.parse("007",{datePattern:"DDD",selector:"date"}),new Date(1970,0,7)),t(n.parse("031",{datePattern:"DDD",selector:"date"}),new Date(1970,0,31)),t(n.parse("100",{datePattern:"DDD",selector:"date"}),new Date(1970,3,10))}},"de locale":function(){t(n.parse("11.08.06",{formatLength:"short",selector:"date",locale:"de"}),a),l.isNull(n.parse("11.8/06",{formatLength:"short",selector:"date",locale:"de"})),l.isNull(n.parse("11.8x06",{formatLength:"short",selector:"date",locale:"de"})),l.isNull(n.parse("11.0.06",{formatLength:"short",selector:"date",locale:"de"})),l.isNull(n.parse("11.13.06",{formatLength:"short",selector:"date",locale:"de"})),l.isNull(n.parse("32.08.06",{formatLength:"short",selector:"date",locale:"de"}))},"es locale":{"short format":{"leading zero month":function(){t(n.parse("11/08/06",{formatLength:"short",selector:"date",locale:"es"}),a)},"single digit month":function(){t(n.parse("11/8/06",{formatLength:"short",selector:"date",locale:"es"}),a)},"tolerate four digit year":function(){t(n.parse("11/8/2006",{formatLength:"short",selector:"date",locale:"es"}),a)},"four digit year in strict mode returns null":function(){l.isNull(n.parse("11/8/2006",{formatLength:"short",selector:"date",locale:"es",strict:!0}))}},"long format":{"basic usage":function(){t(n.parse("11 de agosto de 2006",{formatLength:"long",selector:"date",locale:"es"}),a)},"case-insensitive month":function(){t(n.parse("11 de Agosto de 2006",{formatLength:"long",selector:"date",locale:"es"}),a)},"case-insensitive month fails in strict mode":function(){l.isNull(n.parse("Viernes, 11 de agosto de 2006",{formatLength:"full",selector:"date",locale:"es",strict:!0}))}}},"ja locale":{"short format":{"leading zero month":function(){t(n.parse("06年08月11日",{formatLength:"short",selector:"date",locale:"ja"}),a)},"single digit month":function(){t(n.parse("06年8月11日",{formatLength:"short",selector:"date",locale:"ja"}),a)},"tolerate four digit year":function(){t(n.parse("2006年8月11日",{formatLength:"short",selector:"date",locale:"ja"}),a)}},"medium format":{"leading zero month":function(){t(n.parse("2006年08月11日",{formatLength:"medium",selector:"date",locale:"ja"}),a)},"single digit month":function(){t(n.parse("2006年8月11日",{formatLength:"medium",selector:"date",locale:"ja"}),a)}},"long format":{"basic usage":function(){t(n.parse("2006年8月11日",{formatLength:"long",selector:"date",locale:"ja"}),a)}},"full format":{"basic usage":function(){t(n.parse("2006年8月11日金曜日",{formatLength:"full",selector:"date",locale:"ja"}),a)}}},"fr-fr locale":{"medium format":{"tolerance for abbreviations":function(){t(n.parse("11 avr 06",{formatLength:"medium",selector:"date",locale:"fr-fr"}),new Date(2006,3,11,0))},"round trip":function(){var e={formatLength:"medium",selector:"date",locale:"fr-fr"};t(n.parse(n.format(a,e),e),a)}}},"he locale":{"basic usage via roundtrip":function(){var e={locale:"he",formatLength:"full",selector:"date"};l.ok(n.parse(n.format(new Date,e),e))}},times:function(){var e=new Date(2006,7,11,12,30),t={selector:"time",strict:!0,timePattern:"h:mm a",locale:"en"};l.equal(n.parse("12:30 PM",t).getHours(),e.getHours()),l.equal(n.parse("12:30 PM",t).getMinutes(),e.getMinutes())},"format patterns":function(){var e,t=new Date(2006,7,11,12,30);e={selector:"time",strict:!0,timePattern:"h 'o''clock'",locale:"en"},l.equal(n.parse("12 o'clock",e).getHours(),t.getHours()),e={selector:"time",strict:!0,timePattern:" 'Hour is' h",locale:"en"},l.equal(n.parse(" Hour is 12",e).getHours(),t.getHours()),e={selector:"time",strict:!0,timePattern:"'Hour is' h",locale:"en"},l.equal(n.parse("Hour is 12",e).getHours(),t.getHours())},"invalid dates fail":function(){l.isNull(n.parse("2/29/2007",{formatLength:"short",selector:"date",locale:"en"})),l.isNull(n.parse("4/31/2007",{formatLength:"short",selector:"date",locale:"en"})),l.isNull(n.parse("Decemb 30, 2007",{formatLength:"long",selector:"date",locale:"en"}))},"month > 12 fails":function(){l.isNull(n.parse("15/1/2005",{formatLength:"short",selector:"date",locale:"en"}))},"day of month > number days in month fails":function(){l.isNull(n.parse("Aug 32, 2006",{formatLength:"medium",selector:"date",locale:"en"}))},"pre-epoch date":function(){var e=new Date(2006,7,11,0);e.setFullYear(6),t(n.parse("Aug 11, 06",{selector:"date",datePattern:"MMM dd, yyyy",locale:"en",strict:!0}),e)},"dates with no spaces":function(){t(n.parse("11Aug2006",{selector:"date",datePattern:"ddMMMyyyy",locale:"en"}),a),t(n.parse("Aug2006",{selector:"date",datePattern:"MMMyyyy",locale:"en"}),new Date(2006,7,1)),t(n.parse("111910",{fullyear:!1,datePattern:"MMddyy",selector:"date"}),new Date(2010,10,19))}}),"._getDayOfYear":function(){l.equal(n._getDayOfYear(new Date(2006,0,1)),1),l.equal(n._getDayOfYear(new Date(2006,1,1)),32),l.equal(n._getDayOfYear(new Date(2007,2,13,0,13)),72),l.equal(n._getDayOfYear(new Date(2007,2,13,1,13)),72)},"._getWeekOfYear":function(){l.equal(n._getWeekOfYear(new Date(2e3,0,1)),0),l.equal(n._getWeekOfYear(new Date(2e3,0,2)),1),l.equal(n._getWeekOfYear(new Date(2e3,0,2),1),0),l.equal(n._getWeekOfYear(new Date(2007,0,1)),0),l.equal(n._getWeekOfYear(new Date(2007,0,1),1),1),l.equal(n._getWeekOfYear(new Date(2007,6,14)),27),l.equal(n._getWeekOfYear(new Date(2007,6,14),1),28)}})});