define(["require","intern!object","intern/chai!assert","../../keys","../../_base/kernel","dojo/has","dojo/Deferred","dojo/_base/array"],function(t,e,i,c,f,s,u,r){var d=t.toAbsMid("../../keys");function y(e){var r,n,o=new u,a={restore:function(){var e,r;for(e in t.undef(d),delete f.keys,i)i.hasOwnProperty(e)&&(r=i[e],s.add(e,r,void 0,!0))}},i={};for(r in e)e.hasOwnProperty(r)&&(n=e[r],i[r]=s(r),s.add(r,n,void 0,!0));return t.undef(d),t([d],function(e){c=e,o.resolve(a)}),o.promise}e(function(){var a={name:"dojo/keys",construction:function(){i.isDefined(c),i.equal(c,f.keys)}};return r.forEach([["Webkit browser",{webkit:!0},[{META:91}]],["Non-Webkit browser",{webkit:!1},[{META:224}]],["Non-Mac",{mac:!1},[{copyKey:17}]],["Safari browser",{mac:!0,air:!1,safari:!0},[{copyKey:91}]],["Not Safari",{mac:!0,air:!1,safari:!1},[{copyKey:224}]],["Air on Mac",{mac:!0,air:!0},[{copyKey:17}]]],function(e){var n=e[0],o=e[1];a[n]=function(){var r;return{before:function(){return y(o).then(function(e){r=e})},after:function(){r.restore()}}}(),r.forEach(e[2],function(e){for(var r in e)e.hasOwnProperty(r)&&(a[n][r]=function(){i.equal(c[r],e[r])})})}),a})});