define(["intern!object","intern/chai!assert","../../../_base/json"],function(n,e,s){n({name:"dojo/_base/json","toJson and fromJson":function(){var n,o={a:"a",b:1,c:"c",d:"d",e:{e1:"e1",e2:2},f:[1,2,3],g:"g",h:{h1:{h2:{h3:"h3"}}},i:[[0,1,2],[3],[4]]},t=s.fromJson(s.toJson(o));e.deepEqual(t,o),e.throws(function(){n=s.fromJson("bad json")}),e.isUndefined(n)},"dojo extended json":function(){var n=s.toJson({ex1:{b:3,json:function(){return"json"+this.b}},ex2:{b:4,__json__:function(){return"__json__"+this.b}}});e.equal('{"ex1":"json3","ex2":"__json__4"}',n)},"pretty print json":function(){if("undefined"==typeof JSON){var n=s.toJson({array:[1,2,{a:4,b:4}]},!0);e.equal('{\n\t"array": [\n\t\t1,\n\t\t2,\n\t\t{\n\t\t\t"a": 4,\n\t\t\t"b": 4\n\t\t}\n\t]\n}',n)}},"eval json":function(){var n=s.fromJson("{func: function(){}, number: Infinity}");e.isFunction(n.func),e.isNumber(n.number)},"toJson called on string":function(){e.equal('"hello"',s.toJson("hello"))}})});