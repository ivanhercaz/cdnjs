!function(n){define(["intern!object","intern/chai!assert","dojo/aspect","dojo/_base/lang","dojo/_base/kernel","../../../_base/declare","sinon"],function(e,h,a,o,i,d,s){e({name:"dojo/_base/declare",beforeEach:function(){n.tests={}},teardown:function(){n.tests=void 0},afterEach:function(){n.testsFoo=void 0},"smoke test 1":function(){d("tests._base.declare.tmp",null),d("testsFoo",null),h.isFunction(n.tests._base.declare.tmp),h.isFunction(n.testsFoo)},"smoke test 2":function(){var e;d("tests._base.declare.foo",null,{foo:"thonk"}),e=new n.tests._base.declare.foo,h.equal(e.foo,"thonk"),d("testsFoo",null,{foo:"thonk"}),e=new n.testsFoo,h.equal(e.foo,"thonk")},"smoke test with Ctor":function(){var e;d("tests._base.declare.fooBar",null,{constructor:function(){this.foo="blah"},foo:"thonk"}),e=new n.tests._base.declare.fooBar,h.equal(e.foo,"blah")},"smoke test compact args":function(){var e;d("tests._base.declare.fooBar2",null,{foo:"thonk"}),e=new n.tests._base.declare.fooBar2,h.equal(e.foo,"thonk")},subclass:function(){var e;d("tests._base.declare.tmp3",null,{foo:"thonk"}),d("tests._base.declare.tmp4",n.tests._base.declare.tmp3),e=new n.tests._base.declare.tmp4,h.equal(e.foo,"thonk")},"subclass with Ctor":function(){var e;d("tests._base.declare.tmp5",null,{constructor:function(){this.foo="blah"},foo:"thonk"}),d("tests._base.declare.tmp6",n.tests._base.declare.tmp5),e=new n.tests._base.declare.tmp6,h.instanceOf(e,n.tests._base.declare.tmp5)},"mixin subclass":function(){var e;d("tests._base.declare.tmp7",null,{foo:"thonk"}),d("tests._base.declare.tmp8",null,{constructor:function(){this.foo="blah"}}),e=new n.tests._base.declare.tmp8,h.equal(e.foo,"blah"),d("tests._base.declare.tmp9",[n.tests._base.declare.tmp7,n.tests._base.declare.tmp8]),e=new n.tests._base.declare.tmp9,h.equal(e.foo,"blah"),h.instanceOf(e,n.tests._base.declare.tmp7)},"super class ref":function(){var e;d("tests._base.declare.tmp10",null,{foo:"thonk"}),d("tests._base.declare.tmp11",n.tests._base.declare.tmp10,{constructor:function(){this.foo="blah"}}),e=new n.tests._base.declare.tmp11,h.equal(e.foo,"blah"),h.equal(n.tests._base.declare.tmp11.superclass.foo,"thonk")},"inherited call":function(){var e,s="xyzzy";d("tests._base.declare.tmp12",null,{foo:"thonk",bar:function(e,t){e&&(this.foo=e),t&&(s=t)}}),d("tests._base.declare.tmp13",n.tests._base.declare.tmp12,{constructor:function(){this.foo="blah"}}),e=new n.tests._base.declare.tmp13,h.equal(e.foo,"blah"),h.equal(s,"xyzzy"),e.bar("zot"),h.equal(e.foo,"zot"),h.equal(s,"xyzzy"),e.bar("trousers","squiggle"),h.equal(e.foo,"trousers"),h.equal(s,"squiggle")},"inherited explicit call":function(){var e,s="xyzzy";d("tests._base.declare.tmp14",null,{foo:"thonk",bar:function(e,t){e&&(this.foo=e),t&&(s=t)}}),d("tests._base.declare.tmp15",n.tests._base.declare.tmp14,{constructor:function(){this.foo="blah"},bar:function(e,t){this.inherited("bar",arguments,[t,e])},baz:function(){n.tests._base.declare.tmp15.superclass.bar.apply(this,arguments)}}),e=new n.tests._base.declare.tmp15,h.equal(e.foo,"blah"),h.equal(s,"xyzzy"),e.baz("zot"),h.equal(e.foo,"zot"),h.equal(s,"xyzzy"),e.bar("trousers","squiggle"),h.equal(e.foo,"squiggle"),h.equal(s,"trousers")},"inherited with mixin calls":function(){var e;d("tests._base.declare.tmp16",null,{foo:"",bar:function(){this.foo+="tmp16"}}),d("tests._base.declare.mixin16",null,{bar:function(){this.inherited(arguments),this.foo+=".mixin16"}}),d("tests._base.declare.mixin17",n.tests._base.declare.mixin16,{bar:function(){this.inherited(arguments),this.foo+=".mixin17"}}),d("tests._base.declare.tmp17",[n.tests._base.declare.tmp16,n.tests._base.declare.mixin17],{bar:function(){this.inherited(arguments),this.foo+=".tmp17"}}),(e=new n.tests._base.declare.tmp17).bar(),h.equal(e.foo,"tmp16.mixin16.mixin17.tmp17")},"mixin preamble":function(){var e=!1;d("tests._base.declare.tmp16",null),new n.tests._base.declare.tmp16({preamble:function(){e=!0}}),h.isTrue(e)},"basic mixin":function(){function e(){}e.prototype.method=s.spy(),d("tests.Thinger",e,{method:function(){this.inherited(arguments)}}),(new n.tests.Thinger).method(),h.isTrue(e.prototype.method.called,"expected method to be called")},"mutated methods":function(){d("tests._base.declare.tmp18",null,{constructor:function(){this.clear()},clear:function(){this.flag=0},foo:function(){++this.flag},bar:function(){++this.flag},baz:function(){++this.flag}}),d("tests._base.declare.tmp19",n.tests._base.declare.tmp18,{foo:function(){++this.flag,this.inherited(arguments)},bar:function(){++this.flag,this.inherited(arguments)},baz:function(){++this.flag,this.inherited(arguments)}});var e=new n.tests._base.declare.tmp19;h.equal(e.flag,0),e.foo(),h.equal(e.flag,2),e.clear(),h.equal(e.flag,0);var t=0;a.after(n.tests._base.declare.tmp19.prototype,"foo",function(){t=1}),e.foo(),h.equal(e.flag,2),h.equal(t,1),e.clear(),t=0;var s=n.tests._base.declare.tmp19.prototype.bar;n.tests._base.declare.tmp19.prototype.bar=function(){t=1,++this.flag,s.call(this)},e.bar(),h.equal(e.flag,3),h.equal(t,1),e.clear(),t=0,n.tests._base.declare.tmp19.prototype.baz=function(){t=1,++this.flag,this.inherited("baz",arguments)},e.baz(),h.equal(e.flag,2),h.equal(t,1)},"modified instance":function(){var e;d("tests._base.declare.tmp20",null,{foo:function(){e.push(20)}}),d("tests._base.declare.tmp21",null,{foo:function(){this.inherited(arguments),e.push(21)}}),d("tests._base.declare.tmp22",n.tests._base.declare.tmp20,{foo:function(){this.inherited(arguments),e.push(22)}}),d("tests._base.declare.tmp23",[n.tests._base.declare.tmp20,n.tests._base.declare.tmp21],{foo:function(){this.inherited(arguments),e.push(22)}});var t=new n.tests._base.declare.tmp22,s=new n.tests._base.declare.tmp23,a={foo:function(){this.inherited("foo",arguments),e.push("INSIDE C")}};e=[],t.foo(),h.deepEqual(e,[20,22]),e=[],s.foo(),h.deepEqual(e,[20,21,22]),o.mixin(t,a),o.mixin(s,a),e=[],t.foo(),h.deepEqual(e,[20,22,"INSIDE C"]),e=[],s.foo(),h.deepEqual(e,[20,21,22,"INSIDE C"])},"duplicated base":function(){var e,t=d(null,{constructor:function(){e.push(1)}}),s=d([t,t,t],{constructor:function(){e.push(2)}});e=[],new t,h.deepEqual(e,[1]),e=[],new s,h.deepEqual(e,[1,2])},"indirectly duplicated base":function(){var e,t=d(null,{constructor:function(){e.push(1)}}),s=d(t,{constructor:function(){e.push(2)}}),a=d([t,s],{constructor:function(){e.push(3)}}),o=d([s,t],{constructor:function(){e.push(4)}});e=[],new a,h.deepEqual(e,[1,2,3]),e=[],new o,h.deepEqual(e,[1,2,4])},"wrong multiple inheritance":function(){var e,t=d([],{constructor:function(){e.push(1)}}),s=d([t],{constructor:function(){e.push(2)}});e=[],new t,h.deepEqual(e,[1]),e=[],new s,h.deepEqual(e,[1,2])},"impossible bases":function(){var e=d(null),t=d(null),s=d([e,t]),a=d([t,e]),o=!1;try{d([s,a])}catch(e){o=!0}h.isTrue(o)},"no new":function(){function e(){this.noNew_Value="instance value"}var s=i.global;function t(e){var t=e("instance value");h.equal(t.noNew_Value,"instance value"),h.equal(s.noNew_Value,"global value")}s.noNew_Value="global value",t(d(null,{constructor:e,"-chains-":{constructor:"manual"}}));var a=d(null,{constructor:e});t(a),t(d(a));var o=d(a),n=d(null,{ctest:function(){return!0}}),l=d([a,o,n],{dtest:function(){return!0}});t(l);var c=l();h.isTrue(c.ctest()),h.isTrue(c.dtest());var u={D:l,noNew_Value:"unchanged"},r=u.D();h.equal(r.noNew_Value,"instance value"),h.equal(u.noNew_Value,"unchanged")},"create subclass":function(){var e=d(null,{foo:"thonk"}),t=d(null,{}),s=d(null,{bar:"thonk"}),a=e.createSubclass([t,s],{constructor:function(){this.foo="blah"}}),o=e.createSubclass([t,s]),n=e.createSubclass({constructor:function(){this.foo="blah"}}),l=e.createSubclass(),c=e.createSubclass(s),u=new a,r=new o,i=new n,f=new l,b=new c;h.equal(u.foo,"blah"),h.equal(r.foo,"thonk"),h.equal(u.bar,"thonk"),h.equal(r.bar,"thonk"),h.equal(i.foo,"blah"),h.equal(f.foo,"thonk"),h.equal(b.bar,"thonk")},safeMixin:function(){var e=d(null,{foo:s.spy()}),t=new e;d.safeMixin(t,{foo:function(){this.inherited(arguments)}}),s.spy(t,"foo"),t.foo(),h.isTrue(e.prototype.foo.called),h.isTrue(t.foo.called),h.doesNotThrow(function(){d.safeMixin(t)})}})})}("undefined"!=typeof global?global:this);