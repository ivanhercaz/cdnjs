!function(f){define(["intern!object","intern/chai!assert","dojo/aspect","dojo/has","dojo/_base/lang","../../../_base/declare","sinon"],function(t,s,i,e,n,a,o){"use strict";function r(){return e("ie")<9}var l="Old IE does not support NFEs correctly";t({name:"dojo/_base/declare in strict mode",setup:function(){f.hasStrictModeSupport=function(){return!this}()},teardown:function(){f.hasStrictModeSupport=void 0,f.tests=void 0},beforeEach:function(){f.tests={}},afterEach:function(){f.testsFoo=void 0},"inherited explicit call":function(){r()&&this.skip(l);var t,o="xyzzy";a("tests._base.declare.tmp14",null,{foo:"thonk",bar:function(t,e){t&&(this.foo=t),e&&(o=e)}}),a("tests._base.declare.tmp15",f.tests._base.declare.tmp14,{constructor:function(){this.foo="blah"},bar:function t(e,o){this.inherited("bar",t,arguments,[o,e])},baz:function(){f.tests._base.declare.tmp15.superclass.bar.apply(this,arguments)}}),t=new f.tests._base.declare.tmp15,s.equal(t.foo,"blah"),s.equal(o,"xyzzy"),t.baz("zot"),s.equal(t.foo,"zot"),s.equal(o,"xyzzy"),t.bar("trousers","squiggle"),s.equal(t.foo,"squiggle"),s.equal(o,"trousers")},"inherited with mixin calls":function(){var t;r()&&this.skip(l),a("tests._base.declare.tmp16",null,{foo:"",bar:function(){this.foo+="tmp16"}}),a("tests._base.declare.mixin16",null,{bar:function t(){this.inherited(t,arguments),this.foo+=".mixin16"}}),a("tests._base.declare.mixin17",f.tests._base.declare.mixin16,{bar:function t(){this.inherited(t,arguments),this.foo+=".mixin17"}}),a("tests._base.declare.tmp17",[f.tests._base.declare.tmp16,f.tests._base.declare.mixin17],{bar:function t(){this.inherited(t,arguments),this.foo+=".tmp17"}}),(t=new f.tests._base.declare.tmp17).bar(),s.equal(t.foo,"tmp16.mixin16.mixin17.tmp17")},"basic mixin":function(){function t(){}r()&&this.skip(l),t.prototype.method=o.spy(),a("tests.Thinger",t,{method:function t(){this.inherited(t,arguments)}}),(new f.tests.Thinger).method(),s.isTrue(t.prototype.method.called,"expected method to be called")},"mutated methods":function(){r()&&this.skip(l),a("tests._base.declare.tmp18",null,{constructor:function(){this.clear()},clear:function(){this.flag=0},foo:function(){++this.flag},bar:function(){++this.flag},baz:function(){++this.flag}}),a("tests._base.declare.tmp19",f.tests._base.declare.tmp18,{foo:function t(){++this.flag,this.inherited(t,arguments)},bar:function t(){++this.flag,this.inherited(t,arguments)},baz:function t(){++this.flag,this.inherited(t,arguments)}});var t=new f.tests._base.declare.tmp19;s.equal(t.flag,0),t.foo(),s.equal(t.flag,2),t.clear(),s.equal(t.flag,0);var e=0;i.after(f.tests._base.declare.tmp19.prototype,"foo",function(){e=1}),t.foo(),s.equal(t.flag,2),s.equal(e,1),t.clear(),e=0;var o=f.tests._base.declare.tmp19.prototype.bar;f.tests._base.declare.tmp19.prototype.bar=function(){e=1,++this.flag,o.call(this)},t.bar(),s.equal(t.flag,3),s.equal(e,1),t.clear(),e=0,f.tests._base.declare.tmp19.prototype.baz=function t(){e=1,++this.flag,this.inherited("baz",t,arguments)},t.baz(),s.equal(t.flag,2),s.equal(e,1)},"modified instance":function(){var e;r()&&this.skip(l),a("tests._base.declare.tmp20",null,{foo:function(){e.push(20)}}),a("tests._base.declare.tmp21",null,{foo:function t(){this.inherited(t,arguments),e.push(21)}}),a("tests._base.declare.tmp22",f.tests._base.declare.tmp20,{foo:function t(){this.inherited(t,arguments),e.push(22)}}),a("tests._base.declare.tmp23",[f.tests._base.declare.tmp20,f.tests._base.declare.tmp21],{foo:function t(){this.inherited(t,arguments),e.push(22)}});var t=new f.tests._base.declare.tmp22,o=new f.tests._base.declare.tmp23,i={foo:function t(){this.inherited("foo",t,arguments),e.push("INSIDE C")}};e=[],t.foo(),s.deepEqual(e,[20,22]),e=[],o.foo(),s.deepEqual(e,[20,21,22]),n.mixin(t,i),n.mixin(o,i),e=[],t.foo(),s.deepEqual(e,[20,22,"INSIDE C"]),e=[],o.foo(),s.deepEqual(e,[20,21,22,"INSIDE C"])},safeMixin:function(){r()&&this.skip(l);var t=a(null,{foo:o.spy()}),e=new t;a.safeMixin(e,{foo:function t(){this.inherited(t,arguments)}}),o.spy(e,"foo"),e.foo(),s.isTrue(t.prototype.foo.called),s.isTrue(e.foo.called),s.doesNotThrow(function(){a.safeMixin(e)})},"throws error":function(){var t=a(null,{foo:function(){return"foo"}}),e=new(a(t,{foo:function(){return this.inherited(arguments)}}));f.hasStrictModeSupport?s.throws(function(){e.foo()},"strict mode inherited","Calling inherited without callee parameter should throw error"):s.strictEqual(e.foo(),"foo")},getInherited:function(){r()&&this.skip(l);var t=a(null,{foo:function(){return"foo"}}),e=new(a(t,{foo:function t(){return this.getInherited(t,arguments)()+"bar"}}));s.strictEqual(e.foo(),"foobar")},"getInherited throws error":function(){var t=a(null,{foo:function(){return"foo"}}),e=new(a(t,{foo:function(){return this.getInherited(arguments)()}}));f.hasStrictModeSupport?s.throws(function(){e.foo()},"strict mode inherited","Calling getInherited without callee parameter should throw error"):s.strictEqual(e.foo(),"foo")}})})}("undefined"!=typeof global?global:this);