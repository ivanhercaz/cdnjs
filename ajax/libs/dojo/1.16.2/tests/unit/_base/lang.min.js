define(["intern!object","intern/chai!assert","dojo/_base/array","../../../_base/lang","../../../_base/kernel","dojo/has","dojo/has!host-browser?dojo/domReady!"],function(e,r,s,o,t,n){e({name:"dojo/_base/lang",".exists":function(){var e={foo:0};r.isTrue(o.exists("foo",e),"test.foo should exist"),r.isFalse(o.exists("foo.bar",e),"test.foo.bar should not exist"),r.isFalse(o.exists("_existsTest"),"_existsTest should not exist"),t.global._existsTest=!1,r.isTrue(o.exists("_existsTest"),"_existsTest should exist"),r.isFalse(o.exists("_existsTest.bar"),"_existsTest.bar should not exist"),r.isTrue(o.exists("dojo.dijit"),"dojo.dijit should exist"),r.isFalse(o.exists("dojo.foo"),"dojo.foo should not exist")},".getObject":function(){var e={foo:{}};r.strictEqual(o.getObject("foo",!1,e),e.foo),r.strictEqual(typeof o.getObject("foo.bar",!1,e),"undefined"),r.strictEqual(typeof o.getObject("foo.bar",!0,e),"object"),e.foo.bar.baz="test",r.strictEqual(o.getObject("foo.bar",!1,e),e.foo.bar),r.strictEqual(typeof o.getObject("_getObjectTest.bar",!1),"undefined"),t.global._getObjectTest={},r.strictEqual(o.getObject("_getObjectTest",!1),t.global._getObjectTest),r.strictEqual(typeof o.getObject("_getObjectTest.bar",!0),"object"),r.strictEqual(typeof o.getObject("./TestWidget"),"undefined"),r.strictEqual(o.getObject("",!1,e),e),r.strictEqual(o.getObject("",!1,null),null),r.strictEqual(o.getObject(""),void 0)},".setObject":function(){var e={foo:0};o.setObject("foo",{bar:"test"},e),r.deepEqual(e,{foo:{bar:"test"}})},".mixin":function(){var e={foo:function(){console.debug("foo")},bar:"bar"},t={};o.mixin(t,e),r.typeOf(o.mixin(),"object"),r.typeOf(o.mixin(void 0),"object"),r.typeOf(o.mixin(null),"object"),r.typeOf(t.foo,"function"),r.typeOf(t.bar,"string")},".extend":function(){var e,t={foo:function(){console.debug("foo")},bar:"bar"};function i(){}o.extend(i,t),e=new i,r.typeOf(e.foo,"function"),r.typeOf(e.bar,"string")},".isFunction":function(){r.isTrue(o.isFunction(new Function)),r.isTrue(o.isFunction(function(){})),n("host-browser")&&(r.isFalse(o.isFunction(document.getElementsByName("html"))),r.isFalse(o.isFunction(document.createElement("object"))))},".isObject":function(){r.isFalse(o.isObject(!0)),r.isFalse(o.isObject(!1)),r.isFalse(o.isObject("foo")),r.isTrue(o.isObject(new String("foo"))),r.isTrue(o.isObject(null)),r.isTrue(o.isObject({})),r.isTrue(o.isObject([])),r.isTrue(o.isObject(new Array))},".isArray":function(){function e(){}r.isTrue(o.isArray([])),r.isTrue(o.isArray(new Array)),r.isFalse(o.isArray({})),r.isFalse(o.isArray("")),r.isFalse(o.isArray(0)),r.isFalse(o.isArray(NaN)),r.isFalse(o.isArray(null)),r.isFalse(o.isArray(void 0)),"undefined"!=typeof window&&r.isFalse(o.isArray(window)),r.isFalse(o.isArray(Function)),e.prototype=[],r.isFalse(o.isArray(new e))},".isArrayLike":function(){function e(){}r.isFalse(o.isArrayLike("thinger")),r.isTrue(o.isArrayLike(new Array)),r.isFalse(o.isArrayLike({})),r.isTrue(o.isArrayLike(arguments)),r.isFalse(o.isArrayLike("")),r.isFalse(o.isArrayLike(!1)),r.isFalse(o.isArrayLike(NaN)),r.isFalse(o.isArrayLike(void 0)),r.isFalse(o.isArrayLike(null)),"undefined"!=typeof window&&r.isTrue(o.isArrayLike(window)),r.isFalse(o.isArrayLike(Function)),r.isTrue(o.isArrayLike({0:1,1:2,length:2})),e.prototype=[],r.isTrue(o.isArrayLike(new e))},".isString":function(){r.isFalse(o.isString(!0)),r.isFalse(o.isString(!1)),r.isTrue(o.isString("foo")),r.isTrue(o.isString(new String("foo"))),r.isFalse(o.isString(null)),r.isFalse(o.isString({})),r.isFalse(o.isString([]))},".partial":function(){var e,t;function i(e,t){return[this.foo,e,t]}e=o.partial(i),r.equal("bar",e.call({foo:"bar"})[0]),r.equal(void 0,e()[0]),t=o.partial(i,"foo","bar"),r.equal("bar",t()[2]),o.partial(i,"foo","bar")},".partial nested":function(){var e,t;e=o.partial(function(e,t){return[e,t]},"foo"),r.equal(void 0,e()[1]),r.equal("bar",e("bar")[1]),t=o.partial(e,"thud"),r.equal("foo",t()[0]),r.equal("thud",t()[1])},".hitch":function(){var e,t,i={foo:"bar"};function a(){return[this.foo,arguments.length]}e=o.hitch(i,a),r.equal("bar",e()[0]),r.equal(0,e()[1]),t=o.hitch({foo:"baz"},a),r.equal("baz",t()[0]),r.equal(0,e()[1]),r.equal(1,e("blah")[1]),r.equal("baz",t.call(i)[0])},".hitch with args":function(){var e,t;function i(){return[this.foo,arguments.length]}e=o.hitch({foo:"bar"},i,"foo","bar"),r.equal("bar",e()[0]),r.equal(2,e()[1]),t=o.hitch({foo:"baz"},i,"foo","bar"),r.equal("baz",t()[0]),r.equal(2,t()[1])},".hitch as partial":function(){var e,t;function i(e,t){return[this.foo,e,t]}e=o.hitch(null,i),r.equal("bar",e.call({foo:"bar"})[0]),r.equal(void 0,e()[0]),t=o.hitch(null,i,"foo","bar"),r.equal("bar",t()[2])},".toArray":function(){var e,t,i,a=["foo","bar","spam","ham"];e=function(){return o._toArray(arguments)}.apply(this,a),r.equal(a[0],e[0]),n("host-browser")&&((t=document.createElement("div")).innerHTML='<a href="#"">link</a>text',i=o._toArray(t.childNodes),r.equal(2,i.length))},".clone":function(){var e={foo:"bar",answer:42,jan102007:new Date(2007,0,10),baz:{a:null,b:[1,"b",2.3,!0,!1],c:{d:void 0,e:99,f:function(){return console.log(42),42},g:/\d+/gm}},toString:function(){return"meow"}};r.deepEqual(e,o.clone(e)),e.baz.b[6]="c",r.deepEqual(e.baz.b,o.clone(e).baz.b,"Sparse arrays should be equal")},".delegate":function(){var e,t={x:1,y:function(){return 2},z1:99};r.strictEqual(1,t.x),r.strictEqual(2,t.y()),r.strictEqual(99,t.z1),e=o.delegate(t,{x:11,y:function(){return 12},z2:33,toString:function(){return"bark!"},toLocaleString:function(){return"le bark-s!"}}),r.strictEqual(1,t.x),r.strictEqual(2,t.y()),r.strictEqual(99,t.z1),r.strictEqual(11,e.x),r.strictEqual(12,e.y()),r.strictEqual("bark!",e.toString()),r.strictEqual("le bark-s!",e.toLocaleString()),r.strictEqual(99,e.z1),r.strictEqual(33,e.z2)},".replace with object":function(){var e=o.replace("Hello, {name.first} {name.last} AKA {nick}!",{nick:"Bob",name:{first:"Robert",middle:"X",last:"Cringely"}});r.equal("Hello, Robert Cringely AKA Bob!",e)},".replace with array context":function(){var e=o.replace("Hello, {0} {2}!",["Robert","X","Cringely"]);r.equal("Hello, Robert Cringely!",e)},".replace with function":function(){var e=o.replace("{count} payments averaging {avg} USD per payment.",o.hitch({payments:[11,16,12]},function(e,t){switch(t){case"count":return this.payments.length;case"avg":return i=this.payments,a=0,s.forEach(i,function(e){a+=e}),a/this.payments.length}var i,a;return""}));r.equal("3 payments averaging 13 USD per payment.",e)},".replace with regex":function(){var e=o.replace("Hello, ${0} ${2}!",["Robert","X","Cringely"],/\$\{([^\}]+)\}/g);r.equal("Hello, Robert Cringely!",e)}})});