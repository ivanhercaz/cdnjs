define(["intern!object","intern/chai!assert","../../dom-class","dojo/dom-construct","dojo/sniff"],function(t,e,a,s){var l,i="test-css-class",c="test-adding-css-class",n="existing-css-class",r=1;function u(){return"nodeid_"+r++}t({name:"dojo/dom-class",".contains":{beforeEach:function(){l=s.toDom('<div class="'+i+'""></div>'),s.place(l,document.body)},afterEach:function(){s.destroy(l)},"node + class":function(){e.isTrue(a.contains(l,i))},"string + class":function(){var t=u();l.setAttribute("id",t),e.isTrue(a.contains(t,i))},"node + unknown class":function(){e.isFalse(a.contains(l,"unknown-css-class"))},"string + unknown class":function(){var t=u();l.setAttribute("id",t),e.isFalse(a.contains(t,"unknown-css-class"))},"node w/ multiple classes + class":function(){l.setAttribute("class",i+" "+n),e.isTrue(a.contains(l,i)),e.isTrue(a.contains(l,n))},"string w/ multiple classes + class":function(){var t=u();l.setAttribute("id",t),l.setAttribute("class",i+" "+n),e.isTrue(a.contains(l,i)),e.isTrue(a.contains(l,n))},"node w/ multiple classes + unknown class":function(){l.setAttribute("class",i+" "+n),e.isFalse(a.contains(l,"unknown-css-class"))},"string w/ multiple classes + unknown class":function(){var t=u();l.setAttribute("id",t),l.setAttribute("class",i+" "+n),e.isFalse(a.contains(t,"unknown-css-class"))},"document + class":function(){e.isFalse(a.contains(document,"unknown-css-class"))}},".add":{beforeEach:function(){l=s.toDom("<div></div>"),s.place(l,document.body)},afterEach:function(){s.destroy(l)},"node + class":function(){a.add(l,i),e.equal(l.getAttribute("class"),i)},"string + class":function(){var t=u();l.setAttribute("id",t),a.add(t,i),e.equal(l.getAttribute("class"),i)},"node + array":function(){a.add(l,[i,c]),e.equal(l.getAttribute("class"),[i,c].join(" "))},"string + array":function(){var t=u();l.setAttribute("id",t),a.add(t,[i,c]),e.equal(l.getAttribute("class"),[i,c].join(" "))}},".remove":{beforeEach:function(){l=s.toDom('<div class="'+i+'"></div>'),s.place(l,document.body)},afterEach:function(){s.destroy(l)},"node + undefined":function(){a.remove(l,void 0),e.equal(l.getAttribute("class"),"")},"string + undefined":function(){var t=u();l.setAttribute("id",t),a.remove(t,void 0),e.equal(l.getAttribute("class"),"")},"node + class":function(){a.remove(l,i),e.equal(l.getAttribute("class"),"")},"string + class":function(){var t=u();l.setAttribute("id",t),a.remove(t,i),e.equal(l.getAttribute("class"),"")},"node + classes":function(){l.setAttribute("class",i+" "+c),a.remove(l,i+" "+c),e.equal(l.getAttribute("class"),"")},"string + classes":function(){var t=u();l.setAttribute("id",t),l.setAttribute("class",i+" "+c),a.remove(t,i+" "+c),e.equal(l.getAttribute("class"),"")},"node + array":function(){l.setAttribute("class",i+" "+c),a.remove(l,[i,c]),e.equal(l.getAttribute("class"),"")},"string + array":function(){var t=u();l.setAttribute("id",t),l.setAttribute("class",i+" "+c),a.remove(t,[i,c]),e.equal(l.getAttribute("class"),"")},"node w/ multiple + class":function(){l.setAttribute("class",i+" "+n),a.remove(l,i),e.equal(l.getAttribute("class"),n)},"string w/ multiple + class":function(){var t=u();l.setAttribute("id",t),l.setAttribute("class",i+" "+n),a.remove(t,i),e.equal(l.getAttribute("class"),n)},"node w/ multiple + array":function(){l.setAttribute("class",i+" "+n+" "+c),a.remove(l,[i,c]),e.equal(l.getAttribute("class"),n)},"string w/ multiple + array":function(){var t=u();l.setAttribute("id",t),l.setAttribute("class",i+" "+n+" "+c),a.remove(t,[i,c]),e.equal(l.getAttribute("class"),n)}},".replace":{beforeEach:function(){l=s.toDom('<div class="'+i+'"></div>'),s.place(l,document.body)},afterEach:function(){s.destroy(l)},"node + add":function(){a.replace(l,c),e.equal(l.getAttribute("class"),c)},"string + add":function(){var t=u();l.setAttribute("id",t),a.replace(t,c),e.equal(l.getAttribute("class"),c)},"node + null add":function(){a.replace(l,null,i),e.equal(l.getAttribute("class"),"")},"string + null add":function(){var t=u();l.setAttribute("id",t),a.replace(t,null,i),e.equal(l.getAttribute("class"),"")},"node + null remove":function(){a.replace(l,c,null),e.equal(l.getAttribute("class"),i+" "+c)},"string + null remove":function(){var t=u();l.setAttribute("id",t),a.replace(t,c,null),e.equal(l.getAttribute("class"),i+" "+c)},"node + class":function(){a.replace(l,c,i),e.equal(l.getAttribute("class"),c)},"string + class":function(){var t=u();l.setAttribute("id",t),a.replace(t,c,i),e.equal(l.getAttribute("class"),c)},"node + classes as string - removing":function(){l.setAttribute("class",i+" "+c),a.replace(l,null,c+" "+i),e.equal(l.getAttribute("class"),"")},"string + classes as string - removing":function(){var t=u();l.setAttribute("id",t),l.setAttribute("class",i+" "+c),a.replace(t,null,c+" "+i),e.equal(l.getAttribute("class"),"")},"node + classes as string - adding":function(){l.setAttribute("class",""),a.replace(l,c+" "+i),e.equal(l.getAttribute("class"),c+" "+i)},"string + classes as string - adding":function(){var t=u();l.setAttribute("id",t),l.setAttribute("class",""),a.replace(t,c+" "+i),e.equal(l.getAttribute("class"),c+" "+i)},"node + classes as array - removing":function(){l.setAttribute("class",i+" "+c),a.replace(l,null,[c,i]),e.equal(l.getAttribute("class"),"")},"string + classes as array - removing":function(){var t=u();l.setAttribute("id",t),l.setAttribute("class",i+" "+c),a.replace(t,null,[c,i]),e.equal(l.getAttribute("class"),"")},"node + classes as array - adding":function(){l.setAttribute("class",""),a.replace(l,[c,i]),e.equal(l.getAttribute("class"),c+" "+i)},"string + classes as array - adding":function(){var t=u();l.setAttribute("id",t),l.setAttribute("class",""),a.replace(t,[c,i]),e.equal(l.getAttribute("class"),c+" "+i)},"node + classes as string - replacing":function(){a.replace(l,c+" "+n,i),e.equal(l.getAttribute("class"),c+" "+n)},"string + classes as string - replacing":function(){var t=u();l.setAttribute("id",t),a.replace(t,c+" "+n,i),e.equal(l.getAttribute("class"),c+" "+n)},"node + classes as array - replacing":function(){l.setAttribute("class",i+" "+c),a.replace(l,[n],[c,i]),e.equal(l.getAttribute("class"),n)},"string + classes as array - replacing":function(){var t=u();l.setAttribute("id",t),l.setAttribute("class",i+" "+c),a.replace(t,[n],[c,i]),e.equal(l.getAttribute("class"),n)}},".toggle":{beforeEach:function(){l=s.toDom('<div class="'+i+'"></div>'),s.place(l,document.body)},afterEach:function(){s.destroy(l)},"node + class":function(){a.toggle(l,i),e.equal(l.getAttribute("class"),"")},"string + class":function(){var t=u();l.setAttribute("id",t),a.toggle(t,i),e.equal(l.getAttribute("class"),"")},"node + class + true":function(){a.toggle(l,i,!0),e.equal(l.getAttribute("class"),i)},"string + class + true":function(){var t=u();l.setAttribute("id",t),a.toggle(t,i,!0),e.equal(l.getAttribute("class"),i)},"node + class + false":function(){a.toggle(l,i,!1),e.equal(l.getAttribute("class"),"")},"string + class + false":function(){var t=u();l.setAttribute("id",t),a.toggle(t,i,!1),e.equal(l.getAttribute("class"),"")},"node + new class":function(){a.toggle(l,n),e.equal(l.getAttribute("class"),i+" "+n)},"string + new class":function(){var t=u();l.setAttribute("id",t),a.toggle(t,n),e.equal(l.getAttribute("class"),i+" "+n)},"node + array":function(){a.toggle(l,[i,n]),e.equal(l.getAttribute("class"),n)},"string + array":function(){var t=u();l.setAttribute("id",t),a.toggle(t,[i,n]),e.equal(l.getAttribute("class"),n)},"node + array + true":function(){a.toggle(l,[i,n],!0),e.equal(l.getAttribute("class"),i+" "+n)},"string + array + true":function(){var t=u();l.setAttribute("id",t),a.toggle(t,[i,n],!0),e.equal(l.getAttribute("class"),i+" "+n)},"node + classes":function(){a.toggle(l,i+" "+n),e.equal(l.getAttribute("class"),n)},"string + classes":function(){var t=u();l.setAttribute("id",t),a.toggle(t,i+" "+n),e.equal(l.getAttribute("class"),n)},"node + classes + false":function(){a.toggle(l,i+" "+n,!1),e.equal(l.getAttribute("class"),"")},"string + classes + false":function(){var t=u();l.setAttribute("id",t),a.toggle(t,i+" "+n,!1),e.equal(l.getAttribute("class"),"")}},"validation tests":{beforeEach:function(){l=s.toDom("<div></div>"),s.place(l,document.body)},afterEach:function(){s.destroy(l)},testClassFunctions:function(){a.remove(l),a.add(l,"a"),e.equal(l.className,"a","class is a"),a.remove(l,"c"),e.equal(l.className,"a","class is still a"),e.isTrue(a.contains(l,"a"),"class is a, test for a"),e.isFalse(a.contains(l,"b"),"class is a, test for b"),a.add(l,"b"),e.equal(l.className,"a b","class is a b"),e.isTrue(a.contains(l,"a"),"class is a b, test for a"),e.isTrue(a.contains(l,"b"),"class is a b, test for b"),a.remove(l,"a"),e.equal(l.className,"b","class is b"),e.isFalse(a.contains(l,"a"),"class is b, test for a"),e.isTrue(a.contains(l,"b"),"class is b, test for b"),a.toggle(l,"a"),e.equal(l.className,"b a","class is b a"),e.isTrue(a.contains(l,"a"),"class is b a, test for a"),e.isTrue(a.contains(l,"b"),"class is b a, test for b"),a.toggle(l,"a"),e.equal(l.className,"b","class is b (again)"),e.isFalse(a.contains(l,"a"),"class is b (again), test for a"),e.isTrue(a.contains(l,"b"),"class is b (again), test for b"),a.toggle(l,"b"),e.equal(l.className,"","class is blank"),e.isFalse(a.contains(l,"a"),"class is blank, test for a"),e.isFalse(a.contains(l,"b"),"class is blank, test for b"),a.remove(l,"c"),e.isTrue(!l.className,"no class");var s=!0;try{a.add(l)}catch(t){s=!1}e.equal(s,!0,"addClass handles undefined class"),a.add(l,"a"),a.replace(l,"b","a"),e.isTrue(a.contains(l,"b"),"class is b after replacing a, test for b"),e.isFalse(a.contains(l,"a"),"class is b after replacing a, test for not a"),a.replace(l,"","b"),e.isFalse(a.contains(l,"b"),"class b should be removed, with no class added"),e.equal(l.className,"","The className is empty"),a.add(l,"b a"),a.replace(l,"c",""),e.equal(l.className,"b a c",'The className is  is "b a c" after using an empty string in replaceClass'),e.isFalse(a.contains(document,"ab"),"hasClass on document should not throw error")},testAddRemoveClassMultiple:function(){a.remove(l),a.add(l,"a"),e.equal(l.className,"a","class is a"),a.add(l,"a b"),e.equal(l.className,"a b","class is a b"),a.add(l,"b a"),e.equal(l.className,"a b","class is still a b"),a.add(l,["a","c"]),e.equal(l.className,"a b c","class is a b c"),a.remove(l,"c a"),e.equal(l.className,"b","class is b"),a.remove(l),e.equal(l.className,"","empty class"),a.add(l,"  c   b   a "),e.equal(l.className,"c b a","class is c b a"),a.remove(l," c b "),e.equal(l.className,"a","class is a"),a.remove(l,["a","c"]),e.equal(l.className,"","empty class"),a.add(l,"a b"),a.replace(l,"c","a b"),e.equal(l.className,"c","class is c"),a.replace(l,""),e.equal(l.className,"","empty class")}}})});