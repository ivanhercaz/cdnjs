define(["require","intern!object","intern/chai!assert","../support/ready"],function(n,e,o,t){function u(e){return e.click()}function r(e){return e.tap()}function c(t,e){return function(){return t.findById(e).then(function(e){return t.moveMouseTo(e)}).end()}}e(function(){var t;return{name:"dojo/touch",before:function(){t=this.get("remote").environmentType.touchEnabled?r:u},beforeEach:function(){return this.get("remote").setExecuteAsyncTimeout(5e3).get(n.toUrl("./support/touch.html"))},"click/tap":function(){var e=this.get("remote").executeAsync(function(o){n(["dojo/on","dojo/touch"],function(e,t){window.log=[];var n=document.getElementById("upper-right");e(n,t.press,function(){log.push("touch.press")}),e(n,t.release,function(){log.push("touch.release")}),e(n,"mousedown",function(){log.push("mousedown")}),e(n,"mouseup",function(){log.push("mouseup")}),e(n,"click",function(){log.push("click")}),o()})}).findById("upper-right");return t(e).execute(function(){return window.log.join(", ")}).then(function(e){o(/touch\.press.*touch\.release.*click/.test(e),"touch.press --\x3e touch.release --\x3e click"),o(/mousedown.*mouseup.*click/.test(e),"mousedown --\x3e mouseup --\x3e click")})},move:function(){var e=this.get("remote");return e.then(c(e,"upper-left")).executeAsync(function(o){n(["sinon","dojo/on","dojo/touch"],function(e,t,n){window.tracker=e.stub(),t(document.getElementById("upper-right"),n.move,tracker),o()})}).execute(function(){return tracker.callCount}).then(function(e){o.equal(e,0)}).then(c(e,"upper-right")).execute(function(){return tracker.called}).then(function(e){o.ok(e)})},cancel:function(){var e=this.get("remote");return this.get("remote").then(c(e,"upper-left")).executeAsync(function(u){n(["sinon","dojo/on","dojo/touch"],function(e,t,n){var o=document.getElementById("upper-left");window.tracker=e.stub(),t(o,n.cancel,tracker),u()})}).then(c(e,"upper-right")).then(c(e,"upper-left")).execute(function(){return tracker.called}).then(function(e){o.isTrue(e)})},over:function(){var e=this.get("remote");return e.then(c(e,"upper-left")).executeAsync(function(u){n(["sinon","dojo/on","dojo/touch"],function(e,t,n){var o=document.getElementById("upper-right");window.tracker=e.stub(),t(o,n.over,tracker),u()})}).then(c(e,"upper-right")).execute(function(){return tracker.called}).then(function(e){o.isTrue(e)})},out:function(){var e=this.get("remote");return e.then(c(e,"upper-left")).executeAsync(function(u){n(["sinon","dojo/on","dojo/touch"],function(e,t,n){var o=document.getElementById("upper-left");window.tracker=e.stub(),t(o,n.out,tracker),u()})}).then(c(e,"upper-right")).execute(function(){return tracker.called}).then(function(e){o.isTrue(e)})},enter:function(){var e=this.get("remote");return e.then(c(e,"upper-left")).executeAsync(function(u){n(["sinon","dojo/on","dojo/touch"],function(e,t,n){var o=document.getElementById("upper-right");window.tracker=e.stub(),t(o,n.enter,tracker),u()})}).then(c(e,"upper-right")).execute(function(){return tracker.calledOnce}).then(function(e){o.isTrue(e)})},leave:function(){var e=this.get("remote");return e.then(c(e,"upper-left")).executeAsync(function(u){n(["sinon","dojo/on","dojo/touch"],function(e,t,n){var o=document.getElementById("upper-left");window.tracker=e.stub(),t(o,n.leave,tracker),u()})}).then(c(e,"upper-right")).execute(function(){return tracker.calledOnce}).then(function(e){o.isTrue(e)})}}}),e(function(){var e;return{name:"dojo/touch dojoClick tests",before:function(){e=this.get("remote").environmentType.touchEnabled?r:u},beforeEach:function(){return t(this.get("remote"),n.toUrl("./support/touch_dojoclick.html"))},press:function(){return e(this.get("remote").findById("dojoClickBtn")).execute(function(){return dojoClicks.value}).then(function(e){o.equal(e,1,"dojoClicks")}).end().findById("nativeClickBtn").click().execute(function(){return nativeClicks.value}).then(function(e){o.equal(e,1,"nativeClicks")})}}}),e(function(){var e;return{name:"dojo/touch dojoClick2 tests",before:function(){e=this.get("remote").environmentType.touchEnabled?r:u},beforeEach:function(){return t(this.get("remote"),n.toUrl("./support/touch_dojoclick2.html"))},press:function(){return e(this.get("remote").findById("dojoClickCheckbox")).execute(function(){return dojoClickCheckbox.checked}).then(function(e){o.isTrue(e,"dojoClicks2 - checkbox")}).end().findById("dojoClickRadio2").click().execute(function(){return dojoClickRadio2.checked}).then(function(e){o.isTrue(e,"dojoClicks2 - radio")})}}})});