define(["require","intern!object","intern/chai!assert","./support/loaderTest"],function(d,o,t,e){function l(o){var e;for(o=JSON.parse(o);e=o.shift();)t.strictEqual(e.actual,e.expected)}o({name:"dojo/_base/loader/moduleIds",testModuleIds:e(d.toUrl("./index.html"),{async:1,packages:[{name:"pack1",location:"../packages/pack1Root"},{name:"pack2",main:"pack2Main",location:"/pack2Root"},{name:"pack3",main:"public/main",location:"/pack3Root"}]},function(o){function e(o,e){return d.getModuleInfo(o,e,d.packs,d.modules,"../../dojo/",d.mapProgs,d.pathsMapProg,1)}var m=[];function t(o,e,t,l){m.push({actual:o.pid,expected:e}),m.push({actual:o.mid,expected:e+"/"+t}),m.push({actual:o.url,expected:l+".js"})}var l="../../packages/pack1Root/";t(e("pack1"),"pack1","main",l+"main"),t(e("pack2"),"pack2","pack2Main","/pack2Root/pack2Main"),t(e("pack3"),"pack3","public/main","/pack3Root/public/main"),t(e("pack1/myModule"),"pack1","myModule",l+"myModule"),t(e("pack2/myModule"),"pack2","myModule","/pack2Root/myModule"),t(e("pack3/myModule"),"pack3","myModule","/pack3Root/myModule");var a={mid:"pack1/main",pack:d.packs.pack1};t(e(".",a),"pack1","main",l+"main"),t(e("./myModule",a),"pack1","myModule",l+"myModule"),t(e("./myModule/mySubmodule",a),"pack1","myModule/mySubmodule",l+"myModule/mySubmodule"),t(e(".",a={mid:"pack1/sub/publicModule",pack:d.packs.pack1}),"pack1","sub",l+"sub"),t(e("./myModule",a),"pack1","sub/myModule",l+"sub/myModule"),t(e("..",a),"pack1","main",l+"main"),t(e("../myModule",a),"pack1","myModule",l+"myModule"),t(e("../util/myModule",a),"pack1","util/myModule",l+"util/myModule"),o(JSON.stringify(m))},l),baseUrl:e(d.toUrl("./index.html"),{async:1,packages:[{name:"dojo",location:"node_modules/dojo"}]},function(e){d(["dojo"],function(o){e({originalBaseUrl:o.config.baseUrl||"./",baseUrl:o.baseUrl})})},function(o){t.strictEqual(o.originalBaseUrl,o.baseUrl)}),moduleUrl:e(d.toUrl("./index.html"),{async:1,packages:[{name:"dojo",location:"node_modules/dojo"}]},function(e){d(["dojo"],function(o){e({expected:d.toUrl("base/tests/myTest.html"),moduleUrl1:o.moduleUrl(),moduleUrl2:o.moduleUrl(null),moduleUrl3:o.moduleUrl(null,"myTest.html"),moduleUrl4:o.moduleUrl("base.tests"),moduleUrl5:o.moduleUrl("base.tests","myTest.html")})})},function(o){var e=o.expected;t.isNull(o.moduleUrl1),t.isNull(o.moduleUrl2),t.isNull(o.moduleUrl3),t.strictEqual(e.substring(0,e.length-11),o.moduleUrl4),t.strictEqual(e,o.moduleUrl5)}),modulePaths:e(d.toUrl("./index.html"),{async:1,packages:[{name:"dojo",location:"node_modules/dojo"}]},function(e){d(["dojo"],function(o){o.registerModulePath("mycoolmod","../some/path/mycoolpath"),o.registerModulePath("mycoolmod.widget","http://some.domain.com/another/path/mycoolpath/widget"),e({expectedUtilUrl:d.compactPath(d.baseUrl+"../some/path/mycoolpath/util/"),moduleUrl1:o.moduleUrl("mycoolmod.util"),moduleUrl2:o.moduleUrl("mycoolmod.widget"),moduleUrl3:o.moduleUrl("mycoolmod.widget.thingy")})})},function(o){t.strictEqual(o.moduleUrl1,o.expectedUtilUrl),t.strictEqual(o.moduleUrl2,"http://some.domain.com/another/path/mycoolpath/widget/"),t.strictEqual(o.moduleUrl3,"http://some.domain.com/another/path/mycoolpath/widget/thingy/")}),moduleUrls:e(d.toUrl("./index.html"),{async:1,packages:[{name:"dojo",location:"node_modules/dojo"}]},function(t){var l=[];function m(o,e){l.push({actual:o,expected:e})}d(["dojo","dojo/_base/url"],function(o){o.registerModulePath("mycoolmod","some/path/mycoolpath"),o.registerModulePath("mycoolmod2","/some/path/mycoolpath2"),o.registerModulePath("mycoolmod.widget","http://some.domain.com/another/path/mycoolpath/widget"),o.registerModulePath("ipv4.widget","http://ipv4user:ipv4passwd@some.domain.com:2357/another/path/ipv4/widget"),o.registerModulePath("ipv6.widget","ftp://ipv6user:ipv6passwd@[::2001:0db8:3c4d:0015:0:0:abcd:ef12]:1113/another/path/ipv6/widget"),o.registerModulePath("ipv6.widget2","https://[0:0:0:0:0:1]/another/path/ipv6/widget2");var e=d.baseUrl;m(o.moduleUrl("mycoolmod","my/favorite.html"),d.compactPath(e+"some/path/mycoolpath/my/favorite.html")),m(o.moduleUrl("mycoolmod","my/favorite.html"),d.compactPath(e+"some/path/mycoolpath/my/favorite.html")),m(o.moduleUrl("mycoolmod2","my/favorite.html"),"/some/path/mycoolpath2/my/favorite.html"),m(o.moduleUrl("mycoolmod2.my","favorite.html"),"/some/path/mycoolpath2/my/favorite.html"),m(o.moduleUrl("mycoolmod.widget","my/favorite.html"),"http://some.domain.com/another/path/mycoolpath/widget/my/favorite.html"),m(o.moduleUrl("mycoolmod.widget.my","favorite.html"),"http://some.domain.com/another/path/mycoolpath/widget/my/favorite.html"),m(new o._Url(o.moduleUrl("ipv4.widget","components.html")).uri,"http://ipv4user:ipv4passwd@some.domain.com:2357/another/path/ipv4/widget/components.html"),m(new o._Url(o.moduleUrl("ipv4.widget","components.html")).scheme,"http"),m(new o._Url(o.moduleUrl("ipv4.widget","components.html")).authority,"ipv4user:ipv4passwd@some.domain.com:2357"),m(new o._Url(o.moduleUrl("ipv4.widget","components.html")).user,"ipv4user"),m(new o._Url(o.moduleUrl("ipv4.widget","components.html")).password,"ipv4passwd"),m(new o._Url(o.moduleUrl("ipv4.widget","components.html")).host,"some.domain.com"),m(new o._Url(o.moduleUrl("ipv4.widget","components.html")).port,"2357"),m(new o._Url(o.moduleUrl("ipv4.widget","components.html?query")).path,"/another/path/ipv4/widget/components.html"),m(new o._Url(o.moduleUrl("ipv4.widget","components.html?q =somequery")).query,"q =somequery"),m(new o._Url(o.moduleUrl("ipv4.widget","components.html#fragment")).fragment,"fragment"),m(new o._Url(o.moduleUrl("ipv6.widget","components.html")).uri,"ftp://ipv6user:ipv6passwd@[::2001:0db8:3c4d:0015:0:0:abcd:ef12]:1113/another/path/ipv6/widget/components.html"),m(new o._Url(o.moduleUrl("ipv6.widget","components.html")).scheme,"ftp"),m(new o._Url(o.moduleUrl("ipv6.widget","components.html")).authority,"ipv6user:ipv6passwd@[::2001:0db8:3c4d:0015:0:0:abcd:ef12]:1113"),m(new o._Url(o.moduleUrl("ipv6.widget","components.html")).user,"ipv6user"),m(new o._Url(o.moduleUrl("ipv6.widget","components.html")).password,"ipv6passwd"),m(new o._Url(o.moduleUrl("ipv6.widget","components.html")).host,"::2001:0db8:3c4d:0015:0:0:abcd:ef12"),m(new o._Url(o.moduleUrl("ipv6.widget","components.html")).port,"1113"),m(new o._Url(o.moduleUrl("ipv6.widget","components.html?query")).path,"/another/path/ipv6/widget/components.html"),m(new o._Url(o.moduleUrl("ipv6.widget","components.html?somequery")).query,"somequery"),m(new o._Url(o.moduleUrl("ipv6.widget","components.html?somequery#somefragment")).fragment,"somefragment"),m(new o._Url(o.moduleUrl("ipv6.widget2","components.html")).uri,"https://[0:0:0:0:0:1]/another/path/ipv6/widget2/components.html"),m(new o._Url(o.moduleUrl("ipv6.widget2","components.html")).scheme,"https"),m(new o._Url(o.moduleUrl("ipv6.widget2","components.html")).authority,"[0:0:0:0:0:1]"),m(new o._Url(o.moduleUrl("ipv6.widget2","components.html")).user,null),m(new o._Url(o.moduleUrl("ipv6.widget2","components.html")).password,null),m(new o._Url(o.moduleUrl("ipv6.widget2","components.html")).host,"0:0:0:0:0:1"),m(new o._Url(o.moduleUrl("ipv6.widget2","components.html")).port,null),m(new o._Url(o.moduleUrl("ipv6.widget2","components.html")).path,"/another/path/ipv6/widget2/components.html"),m(new o._Url(o.moduleUrl("ipv6.widget2","components.html")).query,null),m(new o._Url(o.moduleUrl("ipv6.widget2","components.html")).fragment,null),t(JSON.stringify(l))})},l)})});