define(["require","intern!object","intern/chai!assert"],function(e,o,u){o({name:"dojo/cookie",setup:function(){return this.get("remote").setExecuteAsyncTimeout(1e4).get(e.toUrl("./support/standard.html"))},beforeEach:function(){return this.get("remote").clearCookies()},set:{"one new cookie":function(){return this.get("remote").executeAsync(function(o){e(["dojo/cookie"],function(e){e("dojo_test","test value"),o(document.cookie)})}).then(function(e){var o,t="dojo_test",n=encodeURIComponent("test value"),i=new RegExp(t+"=([^;]*)");u.isDefined(e),u.isTrue(0<=e.indexOf(t+"=")),o=e.match(i),u.lengthOf(o,2),u.equal(o[1],n)})},"a cookie with a negative expires":function(){return this.get("remote").executeAsync(function(o){e(["dojo/cookie"],function(e){e("dojo_num","foo",{expires:10}),o(e("dojo_num"))})}).then(function(e){u.isNotNull(e)}).executeAsync(function(o){e(["dojo/cookie"],function(e){e("dojo_num","-deleted-",{expires:-10}),o(e("dojo_num"))})}).then(function(e){u.isNull(e)})}},get:{"an existing cookie":function(){return this.get("remote").executeAsync(function(t){e(["dojo/cookie"],function(e){var o="dojo_test";document.cookie=o+"=an existing cookie",t(e(o))})}).then(function(e){u.equal(e,"an existing cookie")})}},"add and remove two new cookies with the same suffix":function(){return this.get("remote").executeAsync(function(o){e(["dojo/cookie"],function(e){e("user","123",{expires:10}),e("xuser","abc",{expires:10}),o({cookie:{user:e("user"),xuser:e("xuser")}})})}).then(function(e){u.equal(e.cookie.user,"123"),u.equal(e.cookie.xuser,"abc")}).executeAsync(function(o){e(["dojo/cookie"],function(e){e("user","-deleted-",{expires:-10}),e("xuser","-deleted-",{expires:-10}),o({cookie:{user:e("user"),xuser:e("xuser")}})})}).then(function(e){u.isNull(e.cookie.user),u.isNull(e.cookie.xuser)})}})});