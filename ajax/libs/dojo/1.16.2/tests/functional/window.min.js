define(["require","dojo/Deferred","intern!object","intern/chai!assert","intern/dojo/node!leadfoot/helpers/pollUntil","./window/iframe_content/scrollDocuments"],function(n,e,t,o,r,i){function s(e,t){return e.get("remote").get(n.toUrl(t)).setExecuteAsyncTimeout(5e3).setFindTimeout(1e3).then(r("return ready;"))}t(function(){var t,e={name:"dojo/window"};return e[".scrollIntoView()"]={setup:function(){return s(this,"./window/scroll.html")}},t=e[".scrollIntoView()"],i.forEach(function(e){t[e.label]=function(){var t,n,r;return this.get("remote").findById(e.id).findByClassName("before").getProperty("value").then(function(e){t=parseInt(e,10)}).end().findByClassName("scrollBtn").click().end().findByClassName("hasScrolled").getProperty("value").then(function(e){r=parseInt(e,10)}).end().findByClassName("after").getProperty("value").then(function(e){n=parseInt(e,10)}).then(function(){r?(o.notOk(t,"scrolled, target should not be visible before"),o.ok(n,"scrolled, target should be visible after")):(o.ok(t,"not scrolled, target should be visible before"),o.ok(n,"not scrolled, target should be visible after"))})}}),e[".getBox"]={setup:function(){return s(this,"./window/viewport.html")},initial:function(){var t,n;return this.get("remote").execute("compute()").findById("viewportHeight").getProperty("value").then(function(e){t=parseInt(e,10)}).end().findById("documentHeight").getProperty("value").then(function(e){n=parseInt(e,10)}).then(function(){o.isTrue(n<t,"expected viewport to be bigger than document")})},expand:function(){var t,n;return this.get("remote").execute("compute();").findById("viewportHeight").getProperty("value").then(function(e){t=parseInt(e,10)}).end().execute("addText(); compute();").findById("viewportHeight").getProperty("value").then(function(e){n=parseInt(e,10)}).then(function(){o.isTrue(n<=t,"viewport increased in size before: "+t+" after: "+n),o.isTrue(t<=n+20,"viewport didn't shrink, except for space taken by scrollbars")})}},e})});