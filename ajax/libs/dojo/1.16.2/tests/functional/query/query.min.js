define(["intern!object","intern/chai!assert","require","dojo/_base/array"],function(u,r,o,a){a.forEach(["query.html","queryQuirks.html"],function(n){a.forEach(["lite","css2","css2.1","css3","acme"],function(e){var t={name:n+": "+e,before:function(){return this.get("remote").get(o.toUrl("./"+n)).setExecuteAsyncTimeout(1e4).executeAsync(function(e,h){o(["dojo/query!"+e,"dojo/sniff","dojo/_base/array","dojo/dom","dojo/dom-construct","dojo/request/iframe","dojo/domReady!"],function(e,t,n,u,r,o){query=e,has=t,a=n,dom=u,domConstruct=r,iframe=o,h()})},[e]).execute(function(){createDocument=function(e){var n={responseText:e};if("DOMParser"in window){var t=new DOMParser;n.responseXML=t.parseFromString(e,"text/xml")}var u=n.responseXML;if(has("ie")&&(!u||!u.documentElement)){function r(e){return"MSXML"+e+".DOMDocument"}var o=["Microsoft.XMLDOM",r(6),r(4),r(3),r(2)];a.some(o,function(e){try{var t=new ActiveXObject(e);t.async=!1,t.loadXML(n.responseText),u=t}catch(e){return!1}return!0})}return u}})},css2:{"basic sanity checks":function(){return this.get("remote").execute(function(){var e={};return e.h3=query("h3").length,e["#t"]=query("#t").length,e["#bug"]=query("#bug").length,e["#t h3"]=query("#t h3").length,e["div#t"]=query("div#t").length,e["div#t h3"]=query("div#t h3").length,e["span#t"]=query("span#t").length,e[".bogus"]=query(".bogus").length,e[".bogus-scoped"]=query(".bogus",dom.byId("container")).length,e["#bogus"]=query("#bogus").length,e["#bogus-scoped"]=query("#bogus",dom.byId("container")).length,e["#t div > h3"]=query("#t div > h3").length,e[".foo"]=query(".foo").length,e[".foo.bar"]=query(".foo.bar").length,e[".baz"]=query(".baz").length,e["#t > h3"]=query("#t > h3").length,e.null=query(null).length,e}).then(function(e){r.equal(e.h3,4),r.equal(e["#t"],1),r.equal(e["#bug"],1),r.equal(e["#t h3"],4),r.equal(e["div#t"],1),r.equal(e["div#t h3"],4),r.equal(e["span#t"],0),r.equal(e[".bogus"],0),r.equal(e[".bogus-scoped"],0),r.equal(e["#bogus"],0),r.equal(e["#bogus-scoped"],0),r.equal(e["#t div > h3"],1),r.equal(e[".foo"],2),r.equal(e[".foo.bar"],1),r.equal(e[".baz"],2),r.equal(e["#t > h3"],3),r.equal(e.null,0)})},comma1:function(){return this.get("remote").execute(function(){return query("#baz,#foo,#t").length}).then(function(e){r.equal(e,2)})},comma2:function(){return this.get("remote").execute(function(){return query("#foo,#baz,#t").length}).then(function(e){r.equal(e,2)})},"syntactic equivalents":function(){return this.get("remote").execute(function(){var e={};return e["#t > *"]=query("#t > *").length,e[".foo > *"]=query(".foo > *").length,e}).then(function(e){r.equal(e["#t > *"],12),r.equal(e[".foo > *"],3)})},"with a root, by ID":function(){return this.get("remote").execute(function(){var e={};return e["> *"]=query("> *","container").length,e["> *, > h3"]=query("> *, > h3","container").length,e["> h3"]=query("> h3","t").length,e}).then(function(e){r.equal(e["> *"],3),r.equal(e["> *, > h3"],3),r.equal(e["> h3"],3)})},"compound queries":function(){return this.get("remote").execute(function(){var e={};return e[".foo, .bar"]=query(".foo, .bar").length,e[".foo,.bar"]=query(".foo,.bar").length,e}).then(function(e){r.equal(e[".foo, .bar"],2),r.equal(e[".foo,.bar"],2)})},"multiple class attribute":function(){return this.get("remote").execute(function(){var e={};return e[".foo.bar"]=query(".foo.bar").length,e[".foo"]=query(".foo").length,e[".baz"]=query(".baz").length,e}).then(function(e){r.equal(e[".foo.bar"],1),r.equal(e[".foo"],2),r.equal(e[".baz"],2)})},"case sensitivity":function(){return this.get("remote").execute(function(){return{baz:[query("span.baz").length,query("sPaN.baz").length,query("SPAN.baz").length],fooBar:query(".fooBar").length}}).then(function(e){r.deepEqual(e.baz,[1,1,1]),/quirks/i.test(n)||r.equal(e.fooBar,1)})},"attribute selectors":function(){return this.get("remote").execute(function(){return query("[foo]").length}).then(function(e){r.equal(e,3)})},"attribute substring selectors":function(){return this.get("remote").execute(function(){var e={};return e['[foo$="thud"]']=query('[foo$="thud"]').length,e["[foo$=thud]"]=query("[foo$=thud]").length,e['[foo$="thudish"]']=query('[foo$="thudish"]').length,e["#t [foo$=thud]"]=query("#t [foo$=thud]").length,e["#t [title$=thud]"]=query("#t [title$=thud]").length,e["#t span[title$=thud ]"]=query("#t span[title$=thud ]").length,e["[id$='55555']"]=query("[id$='55555']").length,e['[foo~="bar"]']=query('[foo~="bar"]').length,e['[ foo ~= "bar" ]']=query('[ foo ~= "bar" ]').length,e['[foo|="bar"]']=query('[foo|="bar"]').length,e['[foo|="bar-baz"]']=query('[foo|="bar-baz"]').length,e['[foo|="baz"]']=query('[foo|="baz"]').length,e}).then(function(e){r.equal(e['[foo$="thud"]'],1),r.equal(e["[foo$=thud]"],1),r.equal(e['[foo$="thudish"]'],1),r.equal(e["#t [foo$=thud]"],1),r.equal(e["#t [title$=thud]"],1),r.equal(e["#t span[title$=thud ]"],0),r.equal(e["[id$='55555']"],1),r.equal(e['[foo~="bar"]'],2),r.equal(e['[ foo ~= "bar" ]'],2),r.equal(e['[foo|="bar"]'],2),r.equal(e['[foo|="bar-baz"]'],1),r.equal(e['[foo|="baz"]'],0)})},"descendant selectors":function(){return this.get("remote").execute(function(){var e={};return e["> *"]=query("> *","container").length,e["> [qux]"]=query("> [qux]","container").length,e["> [qux][0].id"]=query("> [qux]","container")[0].id,e["> [qux][1].id"]=query("> [qux]","container")[1].id,e[">*"]=query(">*","container").length,e["#bug[0].value"]=query("#bug")[0].value,has("ie")<=9&&has("quirks")&&(e["#bug[0].value"]="passed"),e}).then(function(e){r.equal(e["> *"],3,"> *"),r.equal(e["> [qux]"],2,"> [qux]"),r.equal(e["> [qux][0].id"],"child1","> [qux][0].id"),r.equal(e["> [qux][1].id"],"child3","> [qux][1].id"),r.equal(e[">*"],3,">*"),r.equal(e["#bug[0].value"],"passed","#bug[0].value")})},"bug 9071":function(){return this.get("remote").execute(function(){var e={};return e["t4 a"]=query("a","t4").length,e["t4 p a"]=query("p a","t4").length,e["t4 div p"]=query("div p","t4").length,e["t4 div p a"]=query("div p a","t4").length,e["t4 .subA"]=query(".subA","t4").length,e["t4 .subP .subA"]=query(".subP .subA","t4").length,e["t4 .subDiv .subP"]=query(".subDiv .subP","t4").length,e["t4 .subDiv .subP .subA"]=query(".subDiv .subP .subA","t4").length,e}).then(function(e){r.equal(e["t4 a"],2),r.equal(e["t4 p a"],2),r.equal(e["t4 div p"],2),r.equal(e["t4 div p a"],2),r.equal(e["t4 .subA"],2),r.equal(e["t4 .subP .subA"],2),r.equal(e["t4 .subDiv .subP"],2),r.equal(e["t4 .subDiv .subP .subA"],2)})},"failed scope arg":function(){return this.get("remote").execute(function(){var e={};return e["thinger *"]=query("*","thinger").length,e["div#foo"]=query("div#foo").length,e}).then(function(e){r.equal(e["thinger *"],0),r.equal(e["div#foo"],0)})},"escaping special characters with quotes":function(){return this.get("remote").execute(function(){var e={};return e['option[value="a+b"]']=query('option[value="a+b"]',"attrSpecialChars").length,e['option[value="a~b"]']=query('option[value="a~b"]',"attrSpecialChars").length,e['option[value="a^b"]']=query('option[value="a^b"]',"attrSpecialChars").length,e['option[value="a,b"]']=query('option[value="a,b"]',"attrSpecialChars").length,e}).then(function(e){r.equal(e['option[value="a+b"]'],1),r.equal(e['option[value="a~b"]'],1),r.equal(e['option[value="a^b"]'],1),r.equal(e['option[value="a,b"]'],1)})},"selector with substring that contains equals sign - bug 7479":function(){return this.get("remote").execute(function(){return query("a[href*='foo=bar']","attrSpecialChars").length}).then(function(e){r.equal(e,1)})},"selector with substring that contains brackets - bug 9193, 11189, 13084":function(){return this.get("remote").execute(function(){var e={};return e['input[name="data[foo][bar]"]']=query('input[name="data[foo][bar]"]',"attrSpecialChars").length,e['input[name="foo[0].bar']=query('input[name="foo[0].bar"]',"attrSpecialChars").length,e['input[name="test[0]"]']=query('input[name="test[0]"]',"attrSpecialChars").length,e}).then(function(e){r.equal(e['input[name="data[foo][bar]"]'],1),r.equal(e['input[name="foo[0].bar'],1),r.equal(e['input[name="test[0]"]'],1)})},"escaping special characters with backslashes":function(){return this.get("remote").execute(function(){var e={};return e["input[name=data\\[foo\\]\\[bar\\]]"]=query("input[name=data\\[foo\\]\\[bar\\]]","attrSpecialChars").length,e["input[name=foo\\[0\\]\\.bar]"]=query("input[name=foo\\[0\\]\\.bar]","attrSpecialChars").length,e}).then(function(e){r.equal(e["input[name=data\\[foo\\]\\[bar\\]]"],1),r.equal(e["input[name=foo\\[0\\]\\.bar]"],1)})},crossDocumentQuery:function(){return this.get("remote").execute(function(){var e={},t=window.frames.t3,n=iframe.doc(t);return n.open(),n.write(["<html><head>","<title>inner document</title>","</head>","<body>","   <div id='st1'>","       <h3>h3","           <span>","               span","               <span>","                   inner","                   <span>","                       inner-inner","                   </span>","               </span>","           </span>","           endh3","       </h3>","   </div>","</body>","</html>"].join("")),n.close(),e["st1 h3"]=query("h3",dom.byId("st1",n)).length,e["st1 h3 > span > span > span"]=query("h3 > span > span > span",dom.byId("st1",n)).length,e["body.children[0] h3 > span > span > span"]=query("h3 > span > span > span",n.body.children[0]).length,e}).then(function(e){r.equal(e["st1 h3"],1),r.equal(e["st1 h3 > span > span > span"],1),r.equal(e["body.children[0] h3 > span > span > span"],1)})},"escaping of ':' chars inside an ID":{silly_IDs1:function(){return this.get("remote").execute(function(){var e={};return e["silly:id::with:colons"]=document.getElementById("silly:id::with:colons"),e["#silly\\:id\\:\\:with\\:colons"]=query("#silly\\:id\\:\\:with\\:colons").length,e["#silly\\~id"]=query("#silly\\~id").length,e}).then(function(e){r.isNotNull(e["silly:id::with:colons"],"getElementById"),r.equal(e["#silly\\:id\\:\\:with\\:colons"],1,'query("#silly\\:id\\:\\:with\\:colons")'),r.equal(e["#silly\\~id"],1,'query("#silly\\~id")')})}},xml:function(){return this.get("remote").execute(function(){var e=createDocument(["<ResultSet>","<Result>One</Result>","<RESULT>Two</RESULT>","<result><nested>Three</nested></result>","<result>Four</result>","</ResultSet>"].join("")).documentElement;return{lower:query("result",e).length,mixed:query("Result",e).length,upper:query("RESULT",e).length,nomatch1:query("resulT",e).length,nomatch2:query("rEsulT",e).length}}).then(function(e){r.equal(e.lower,2,"all lower"),r.equal(e.mixed,1,"mixed case"),r.equal(e.upper,1,"all upper"),r.equal(e.nomatch1,0,"no match 1"),r.equal(e.nomatch2,0,"no match 2")})},xml_attrs:function(){var e=this.get("remote");return/internet explorer/.test(e.environmentType.browserName)?this.skip("do not run in IE till bug #14880 is fixed"):e.execute(function(){var e=createDocument(["<ResultSet>","<RESULT thinger='blah'>ONE</RESULT>","<RESULT thinger='gadzooks'><CHILD>Two</CHILD></RESULT>","</ResultSet>"].join("")).documentElement;return{RESULT:query("RESULT",e).length,"RESULT[THINGER]":query("RESULT[THINGER]",e).length,"RESULT[thinger]":query("RESULT[thinger]",e).length,"RESULT[thinger=blah]":query("RESULT[thinger=blah]",e).length,"RESULT > CHILD":query("RESULT > CHILD",e).length}}).then(function(e){r.equal(e.RESULT,2,"result elements"),r.equal(e["RESULT[THINGER]"],0,"result elements with attrs (wrong)"),r.equal(e["RESULT[thinger]"],2,"result elements with attrs"),r.equal(e["RESULT[thinger=blah]"],1,"result elements with attr value"),r.equal(e["RESULT > CHILD"],1,"Using child operator")})},sort:function(){return this.get("remote").execute(function(){return query("div").sort(function(e,t){return 1}),!0}).then(function(e){r.isTrue(e)})},document_fragment:function(){return this.get("remote").execute(function(){var e={},t=domConstruct.toDom("<i><u><a></a><b id='b'></b></u></i>"),n=domConstruct.toDom("<i></i>    <u><a></a><b id='b'></b></u>"),u=domConstruct.toDom("<i><u><a></a><b></b></u></i>"),r=domConstruct.toDom("<i></i>    <u><a></a><b></b></u>");return e["#b detached"]=query("#b",t).length,e["#b detached first child"]=query("#b",t.firstChild).length,e["#b fragment"]=query("#b",n).length,e["#b fragment child"]=query("#b",8===has("ie")&&has("quirks")?n.childNodes[1]:n.childNodes[2]).length,e["#b detached2"]=query("#b",u).length,e["#b fragment2"]=query("#b",r).length,e}).then(function(e){r.equal(e["#b detached"],1),r.equal(e["#b detached first child"],1),r.equal(e["#b fragment"],1),r.equal(e["#b fragment child"],1),r.equal(e["#b detached2"],0),r.equal(e["#b fragment2"],0)})}}};/css2.1|css3|acme/.test(e)&&(t["css2.1"]=function(){return this.get("remote").execute(function(){var e={};return e["h1:first-child"]=query("h1:first-child").length,e["h3:first-child"]=query("h3:first-child").length,e[".foo+ span"]=query(".foo+ span").length,e[".foo+span"]=query(".foo+span").length,e[".foo +span"]=query(".foo +span").length,e[".foo + span"]=query(".foo + span").length,e}).then(function(e){r.equal(e["h1:first-child"],1),r.equal(e["h3:first-child"],2),r.equal(e[".foo+ span"],1),r.equal(e[".foo+span"],1),r.equal(e[".foo +span"],1),r.equal(e[".foo + span"],1)})}),/css3|acme/.test(e)&&(t.css3={"sub-selector parsing":function(){return this.get("remote").execute(function(){return query("#t span.foo:not(:first-child)").length}).then(function(e){r.equal(e,1)})},"~ sibling selector":function(){return this.get("remote").execute(function(){var e={};return e[".foo~ span"]=query(".foo~ span").length,e[".foo~span"]=query(".foo~span").length,e[".foo ~span"]=query(".foo ~span").length,e[".foo ~ span"]=query(".foo ~ span").length,e["#foo~ *"]=query("#foo~ *").length,e["#foo ~*"]=query("#foo ~*").length,e["#foo ~*"]=query("#foo ~*").length,e["#foo ~ *"]=query("#foo ~ *").length,e}).then(function(e){r.equal(e[".foo~ span"],4),r.equal(e[".foo~span"],4),r.equal(e[".foo ~span"],4),r.equal(e[".foo ~ span"],4),r.equal(e["#foo~ *"],1),r.equal(e["#foo ~*"],1),r.equal(e["#foo ~*"],1),r.equal(e["#foo ~ *"],1)})},"nth-child tests":function(){return this.get("remote").execute(function(){var e={};return e["#t > h3:nth-child(odd)"]=query("#t > h3:nth-child(odd)").length,e["#t h3:nth-child(odd)"]=query("#t h3:nth-child(odd)").length,e["#t h3:nth-child(2n+1)"]=query("#t h3:nth-child(2n+1)").length,e["#t h3:nth-child(even)"]=query("#t h3:nth-child(even)").length,e["#t h3:nth-child(2n)"]=query("#t h3:nth-child(2n)").length,e["#t h3:nth-child(2n+3)"]=query("#t h3:nth-child(2n+3)").length,e["#t h3:nth-child(1)"]=query("#t h3:nth-child(1)").length,e["#t > h3:nth-child(1)"]=query("#t > h3:nth-child(1)").length,e["#t :nth-child(3)"]=query("#t :nth-child(3)").length,e["#t > div:nth-child(1)"]=query("#t > div:nth-child(1)").length,e["#t :nth-child(3)"]=query("#t :nth-child(3)").length,e["#t > div:nth-child(1)"]=query("#t > div:nth-child(1)").length,e["#t span"]=query("#t span").length,e["#t > *:nth-child(n+10)"]=query("#t > *:nth-child(n+10)").length,e["#t > *:nth-child(n+12)"]=query("#t > *:nth-child(n+12)").length,e["#t > *:nth-child(-n+10)"]=query("#t > *:nth-child(-n+10)").length,e["#t > *:nth-child(-2n+10)"]=query("#t > *:nth-child(-2n+10)").length,e["#t > *:nth-child(2n+2)"]=query("#t > *:nth-child(2n+2)").length,e["#t > *:nth-child(2n+4)"]=query("#t > *:nth-child(2n+4)").length,e["#t> *:nth-child(2n+4)"]=query("#t> *:nth-child(2n+4)").length,e["#t > *:nth-child(n-5)"]=query("#t > *:nth-child(n-5)").length,e["#t >*:nth-child(n-5)"]=query("#t >*:nth-child(n-5)").length,e["#t > *:nth-child(2n-5)"]=query("#t > *:nth-child(2n-5)").length,e["#t>*:nth-child(2n-5)"]=query("#t>*:nth-child(2n-5)").length,e}).then(function(e){r.equal(e["#t > h3:nth-child(odd)"],2,"#t > h3:nth-child(odd)"),r.equal(e["#t h3:nth-child(odd)"],3,"#t h3:nth-child(odd)"),r.equal(e["#t h3:nth-child(2n+1)"],3,"#t h3:nth-child(2n+1)"),r.equal(e["#t h3:nth-child(even)"],1,"#t h3:nth-child(even)"),r.equal(e["#t h3:nth-child(2n)"],1,"#t h3:nth-child(2n)"),r.equal(e["#t h3:nth-child(2n+3)"],1,"#t h3:nth-child(2n+3)"),r.equal(e["#t h3:nth-child(1)"],2,"#t h3:nth-child(1)"),r.equal(e["#t > h3:nth-child(1)"],1,"#t > h3:nth-child(1)"),r.equal(e["#t :nth-child(3)"],3,"#t :nth-child(3)"),r.equal(e["#t > div:nth-child(1)"],0,"#t > div:nth-child(1)"),r.equal(e["#t span"],7,"#t span"),r.equal(e["#t > *:nth-child(n+10)"],3,"#t > *:nth-child(n+10)"),r.equal(e["#t > *:nth-child(n+12)"],1,"#t > *:nth-child(n+12)"),r.equal(e["#t > *:nth-child(-n+10)"],10,"#t > *:nth-child(-n+10)"),r.equal(e["#t > *:nth-child(-2n+10)"],5,"#t > *:nth-child(-2n+10)"),r.equal(e["#t > *:nth-child(2n+2)"],6,"#t > *:nth-child(2n+2)"),r.equal(e["#t > *:nth-child(2n+4)"],5,"#t > *:nth-child(2n+4)"),r.equal(e["#t> *:nth-child(2n+4)"],5,"#t> *:nth-child(2n+4)"),r.equal(e["#t > *:nth-child(n-5)"],12,"#t > *:nth-child(n-5)"),r.equal(e["#t >*:nth-child(n-5)"],12,"#t >*:nth-child(n-5)"),r.equal(e["#t > *:nth-child(2n-5)"],6,"#t > *:nth-child(2n-5)"),r.equal(e["#t>*:nth-child(2n-5)"],6,"#t>*:nth-child(2n-5)")})},":checked pseudo-selector":function(){return this.get("remote").execute(function(){var e={};return e["#t2 > :checked"]=query("#t2 > :checked").length,e["#t2 > input[type=checkbox]:checked"]=query("#t2 > input[type=checkbox]:checked")[0]===dom.byId("checkbox2"),e["#t2 > input[type=radio]:checked"]=query("#t2 > input[type=radio]:checked")[0]===dom.byId("radio2"),e["#t2select option:checked"]=query("#t2select option:checked").length,e["#radio1:disabled"]=query("#radio1:disabled").length,e["#radio1:enabled"]=query("#radio1:enabled").length,e["#radio2:disabled"]=query("#radio2:disabled").length,e["#radio2:enabled"]=query("#radio2:enabled").length,e}).then(function(e){r.equal(e["#t2 > :checked"],2),r.isTrue(e["#t2 > input[type=checkbox]:checked"]),r.isTrue(e["#t2 > input[type=radio]:checked"]),r.equal(e["#radio1:disabled"],1),r.equal(e["#radio1:enabled"],0),r.equal(e["#radio2:disabled"],0),r.equal(e["#radio2:enabled"],1)})},":empty pseudo-selector":function(){return this.get("remote").execute(function(){var e={};return e["#t > span:empty"]=query("#t > span:empty").length,e["#t span:empty"]=query("#t span:empty").length,e["h3 span:empty"]=query("h3 span:empty").length,e["h3 :not(:empty)"]=query("h3 :not(:empty)").length,e}).then(function(e){r.equal(e["#t > span:empty"],4),r.equal(e["#t span:empty"],6),r.equal(e["h3 span:empty"],0),r.equal(e["h3 :not(:empty)"],1)})}}),"acme"==e&&(t.acme={"Case insensitive class selectors - bug #8775, #14874":function(){return this.get("remote").execute(function(){return query(".fooBar").length}).then(function(e){r.equal(e,1)})},"sub-selector parsing":function(){return this.get("remote").execute(function(){return query("#t span.foo:not(span:first-child)").length}).then(function(e){r.equal(e,1)})},"special characters in attribute values without backslashes":function(){},"implied * after > (non-standard syntax)":function(){return this.get("remote").execute(function(){var e={};return e["#t >"]=query("#t >").length,e[".foo >"]=query(".foo >").length,e[">"]=query(">","container").length,e["> .not-there"]=query("> .not-there").length,e["#foo ~"]=query("#foo ~").length,e["#foo~"]=query("#foo~").length,e}).then(function(e){r.equal(e["#t >"],12),r.equal(e[".foo >"],3),r.equal(e[">"],3),r.equal(e["> .not-there"],0),r.equal(e["#foo ~"],1),r.equal(e["#foo~"],1)})},"implied * before and after + and ~ (non-standard syntax)":function(){return this.get("remote").execute(function(){var e={};return e["+"]=query("+","container").length,e["~"]=query("~","container").length,e}).then(function(e){r.equal(e["+"],1),r.equal(e["~"],3)})},"check for correct document order":{domOrder:function(){return this.get("remote").execute(function(){var e={},t=query(".upperclass .lowerclass input");return e.notbug=t[0].id,e.bug=t[1].id,e.checkbox1=t[2].id,e.checkbox2=t[3].id,e.radio1=t[4].id,e.radio2=t[5].id,e.radio3=t[6].id,e}).then(function(e){r.equal(e.notbug,"notbug"),r.equal(e.bug,"bug"),r.equal(e.checkbox1,"checkbox1"),r.equal(e.checkbox2,"checkbox2"),r.equal(e.radio1,"radio1"),r.equal(e.radio2,"radio2"),r.equal(e.radio3,"radio3")})},xml_nthchild:function(){return this.get("remote").execute(function(){var e=createDocument(["<ResultSet>","<result>One</result>","<result>Two</result>","<result>Three</result>","<result>Four</result>","</ResultSet>"].join("")).documentElement;return query("result:nth-child(4)",e)[0].firstChild.data}).then(function(e){r.equal(e,"Four","fourth child")})}}}),u(t)})})});