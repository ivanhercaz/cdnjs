define(["require","intern!object","intern/chai!assert","../../support/ready"],function(s,e,n,r){e({name:"dojo/parser - async",test:function(){var t=this.get("remote");return r(t,s.toUrl("./parserAsync.html")).setExecuteAsyncTimeout(5e3).executeAsync(function(n){s(["dojo/parser","dojo/dom"],function(e,t){window.parsePromise=e.parse(t.byId("main")),n({fulfilled:window.parsePromise.isFulfilled(),asyncWidget:typeof asyncWidget,syncStarted:syncWidget._started})})}).then(function(e){return console.log("here"),n.deepEqual(e,{fulfilled:!1,asyncWidget:"undefined",syncStarted:!1}),t.executeAsync(function(n){s(["dojo/_base/array"],function(t){parsePromise.then(function(e){n({asyncStarted:asyncWidget._started,syncStarted:syncWidget._started,classes:t.map(e,function(e){return e.declaredClass}).join(", ")})}),finishCreatingAsyncWidgets.resolve(!0)})}).then(function(e){n.deepEqual(e,{asyncStarted:!0,syncStarted:!0,classes:"AsyncWidget, SyncWidget"})})})}})});