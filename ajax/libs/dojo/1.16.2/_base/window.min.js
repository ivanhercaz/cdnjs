define(["./kernel","./lang","../sniff"],function(u,o,g){var s={global:u.global,doc:u.global.document||null,body:function(o){return(o=o||u.doc).body||o.getElementsByTagName("body")[0]},setContext:function(o,l){u.global=s.global=o,u.doc=s.doc=l},withGlobal:function(o,l,a,n){var i=u.global;try{return u.global=s.global=o,s.withDoc.call(null,o.document,l,a,n)}finally{u.global=s.global=i}},withDoc:function(o,l,a,n){var i,t,d,e=s.doc,r=g("quirks"),c=g("ie");try{return u.doc=s.doc=o,u.isQuirks=g.add("quirks","BackCompat"==u.doc.compatMode,!0,!0),g("ie")&&(d=o.parentWindow)&&d.navigator&&(i=parseFloat(d.navigator.appVersion.split("MSIE ")[1])||void 0,(t=o.documentMode)&&5!=t&&Math.floor(i)!=t&&(i=t),u.isIE=g.add("ie",i,!0,!0)),a&&"string"==typeof l&&(l=a[l]),l.apply(a,n||[])}finally{u.doc=s.doc=e,u.isQuirks=g.add("quirks",r,!0,!0),u.isIE=g.add("ie",c,!0,!0)}}};return g("extend-dojo")&&o.mixin(u,s),s});