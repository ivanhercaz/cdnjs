!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).popmotion={})}(this,function(t){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function e(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var A=function(){return(A=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function d(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function a(t,e,n){var r=e.middleware;return new c({middleware:r,onComplete:n},"function"==typeof t?{update:t}:t)}function n(e,n){return function(t){return Math.max(Math.min(t,n),e)}}function f(t){return t%1?Number(t.toFixed(5)):t}function o(e){return{test:function(t){return"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}}function u(t){return void 0!==t.red}function i(t){return void 0!==t.hue}function s(u){return function(t){if("string"!=typeof t)return t;for(var e,n={},r=(e=t).substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(/,\s*/),o=0;o<4;o++)n[u[o]]=void 0!==r[o]?parseFloat(r[o]):1;return n}}var c=function(t,e){var n=this,r=t.middleware,o=t.onComplete;this.isActive=!0,this.update=function(t){n.observer.update&&n.updateObserver(t)},this.complete=function(){n.observer.complete&&n.isActive&&n.observer.complete(),n.onComplete&&n.onComplete(),n.isActive=!1},this.error=function(t){n.observer.error&&n.isActive&&n.observer.error(t),n.isActive=!1},this.observer=e,this.updateObserver=function(t){return e.update(t)},this.onComplete=o,e.update&&r&&r.length&&r.forEach(function(t){return n.updateObserver=t(n.updateObserver,n.complete)})},p=function(){return(p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},l=/(-)?(\d[\d\.]*)/g,v=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,h=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,m={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},y=(p({},m,{transform:n(0,1)}),p({},m,{default:1}),o("deg")),g=o("%"),b=o("px"),w=o("vh"),O=o("vw"),M=(p({},g,{parse:function(t){return g.parse(t)/100},transform:function(t){return g.transform(100*t)}}),n(0,255)),x=p({},m,{transform:function(t){return Math.round(M(t))}});function P(t,e){return t.startsWith(e)&&h.test(t)}function S(t){return"number"==typeof t?0:t}var C,k,j={test:function(t){return"string"==typeof t?P(t,"rgb"):u(t)},parse:s(["red","green","blue","alpha"]),transform:function(t){var e,n,r,o,u,i=t.red,a=t.green,s=t.blue,c=t.alpha;return e={red:x.transform(i),green:x.transform(a),blue:x.transform(s),alpha:f(c)},n=e.red,r=e.green,o=e.blue,u=e.alpha,"rgba("+n+", "+r+", "+o+", "+(void 0===u?1:u)+")"}},D={test:function(t){return"string"==typeof t?P(t,"hsl"):i(t)},parse:s(["hue","saturation","lightness","alpha"]),transform:function(t){var e,n,r,o,u,i=t.hue,a=t.saturation,s=t.lightness,c=t.alpha;return e={hue:Math.round(i),saturation:g.transform(f(a)),lightness:g.transform(f(s)),alpha:f(c)},n=e.hue,r=e.saturation,o=e.lightness,u=e.alpha,"hsla("+n+", "+r+", "+o+", "+(void 0===u?1:u)+")"}},E=p({},j,{test:function(t){return"string"==typeof t&&P(t,"#")},parse:function(t){var e="",n="",r="";return 4<t.length?(e=t.substr(1,2),n=t.substr(3,2),r=t.substr(5,2)):(e=t.substr(1,1),n=t.substr(2,1),r=t.substr(3,1),e+=e,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:1}}}),F=function(t){return"string"==typeof t&&h.test(t)||u(t)||i(t)},R=function(t){return j.test(t)?j.parse(t):D.test(t)?D.parse(t):E.test(t)?E.parse(t):t},V=function(t){return u(t)?j.transform(t):i(t)?D.transform(t):t},T="${c}",_="${n}",q={test:function(t){if("string"!=typeof t||!isNaN(t))return!1;var e=0,n=t.match(l),r=t.match(v);return n&&(e+=n.length),r&&(e+=r.length),0<e},parse:function(t){var e=t,n=[],r=e.match(v);r&&(e=e.replace(v,T),n.push.apply(n,r.map(R)));var o=e.match(l);return o&&n.push.apply(n,o.map(m.parse)),n},createTransformer:function(t){var r=t,o=0,e=t.match(v),u=e?e.length:0;if(e)for(var n=0;n<u;n++)r=r.replace(e[n],T),o++;var i=r.match(l),a=i?i.length:0;if(i)for(n=0;n<a;n++)r=r.replace(i[n],_),o++;return function(t){for(var e=r,n=0;n<o;n++)e=e.replace(n<u?T:_,(n<u?V:f)(t[n]));return e}},getAnimatableNone:function(t){var e=q.parse(t);return q.createTransformer(t)(e.map(S))}},N=0,U="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),n=Math.max(0,16.7-(e-N));N=e+n,setTimeout(function(){return t(N)},n)};(k=C=C||{}).Read="read",k.Update="update",k.Render="render",k.PostRender="postRender",k.FixedUpdate="fixedUpdate";function I(t){return ct=t}function X(t){return vt[t].process(pt)}function Y(){return pt}function B(e){return function(t){return 1-e(1-t)}}function L(t){return t}function z(t){return"number"==typeof t}function W(t,e){return void 0===e&&(e=xt),180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}function G(e,n){var r=!0;return void 0===n&&(n=e,r=!1),function(t){return r?t-e+n:(e=t,r=!0,n)}}function H(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")}function $(t){return H(t)&&t.hasOwnProperty("z")}function K(t,e){return Math.abs(t-e)}function J(t,e){if(void 0===e&&(e=xt),z(t)&&z(e))return K(t,e);if(H(t)&&H(e)){var n=K(t.x,e.x),r=K(t.y,e.y),o=$(t)&&$(e)?K(t.z,e.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(o,2))}return 0}function Q(t,e,n){var r=e-t;return 0==r?1:(n-t)/r}function Z(t,e,n){return-n*t+n*e+t}function tt(t,e,n){var r=t*t,o=e*e;return Math.sqrt(Math.max(0,n*(o-r)+r))}function et(e){return St.find(function(t){return t.test(e)})}function nt(t){return"'"+t+"' is not an animatable color. Use the equivalent color code instead."}function rt(t,e){var n=et(t),r=et(e);nt(t),nt(e),n.transform,r.transform;var o=n.parse(t),u=r.parse(e),i=Pt({},o),a=n===D?Z:tt;return function(t){for(var e in i)"alpha"!==e&&(i[e]=a(o[e],u[e],t));return i.alpha=Z(o.alpha,u.alpha,t),n.transform(i)}}function ot(e,n){return function(t){return n(e(t))}}function ut(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(ot)}var it,at=1/60*1e3,st=!0,ct=!1,ft=!1,pt={delta:0,timestamp:0},dt=[C.Read,C.Update,C.Render,C.PostRender],lt=dt.reduce(function(t,e){var r,u,i,a,s,o,c,f,p,d=(r=I,u=[],s=!(i=[]),o=a=0,c=new WeakSet,f=new WeakSet,p={cancel:function(t){var e=i.indexOf(t);c.add(t),-1!==e&&i.splice(e,1)},process:function(t){var e,n;if(s=!0,u=(e=[i,u])[0],(i=e[1]).length=0,a=u.length)for(o=0;o<a;o++)(n=u[o])(t),!0!==f.has(n)||c.has(n)||(p.schedule(n),r(!0));s=!1},schedule:function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=n&&s,o=r?u:i;c.delete(t),e&&f.add(t),-1===o.indexOf(t)&&(o.push(t),r&&(a=u.length))}});return t.sync[e]=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),ct||gt(),d.schedule(t,e,n),t},t.cancelSync[e]=function(t){return d.cancel(t)},t.steps[e]=d,t},{steps:{},sync:{},cancelSync:{}}),vt=lt.steps,ht=lt.sync,mt=lt.cancelSync,yt=function(t){ct=!1,pt.delta=st?at:Math.max(Math.min(t-pt.timestamp,40),1),st||(at=pt.delta),pt.timestamp=t,ft=!0,dt.forEach(X),ft=!1,ct&&(st=!1,U(yt))},gt=function(){st=ct=!0,ft||U(yt)},bt=B,wt=function(e){return function(t){return Math.pow(t,e)}}(2),Ot=B(wt),Mt=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}}(wt),xt={x:0,y:0,z:0},At=(it=function(t,e,n){return Math.min(Math.max(n,t),e)},function(e,n,t){return void 0!==t?it(e,n,t):function(t){return it(e,n,t)}}),Pt=function(){return(Pt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},St=[E,j,D];function Ct(t,o){var n=t.slice(),r=n.length,u=t.map(function(t,e){return n=t,r=o[e],z(n)?function(t){return Z(n,r,t)}:(F(n)?rt:Et)(n,r);var n,r});return function(t){for(var e=0;e<r;e++)n[e]=u[e](t);return n}}function kt(t){for(var e=q.parse(t),n=e.length,r=0,o=0,u=0,i=0;i<n;i++)r||"number"==typeof e[i]?r++:void 0!==e[i].hue?u++:o++;return{parsed:e,numNumbers:r,numRGB:o,numHSL:u}}function jt(t,e){return z(t)?t/(1e3/e):0}function Dt(t,e){return e?t*(1e3/e):0}var Et=function(t,e){var n=q.createTransformer(e),r=kt(t),o=kt(e);return r.numHSL===o.numHSL&&r.numRGB===o.numRGB&&(r.numNumbers,o.numNumbers),ut(Ct(r.parsed,o.parsed),n)},Ft=(At(0,1),Rt.prototype.create=function(t){return new Rt(t)},Rt.prototype.start=function(t){void 0===t&&(t={});var e=!1,n={stop:function(){}},r=this.props,o=r.init,u=d(r,["init"]),i=o(a(t,u,function(){e=!0,n.stop()}));return n=i?A({},n,i):n,e&&n.stop(),n},Rt.prototype.applyMiddleware=function(t){return this.create(A({},this.props,{middleware:this.props.middleware?[t].concat(this.props.middleware):[t]}))},Rt.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=1===t.length?t[0]:ut.apply(void 0,t);return this.applyMiddleware(function(e){return function(t){return e(n(t))}})},Rt);function Rt(t){void 0===t&&(t={}),this.props=t}function Vt(t){return new Ft({init:t})}var Tt=(_t.prototype.applyMiddleware=function(t){return this.create(A({},this.props,{middleware:this.props.middleware?[t].concat(this.props.middleware):[t]}))},_t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=1===t.length?t[0]:ut.apply(void 0,t);return this.applyMiddleware(function(e){return function(t){return e(n(t))}})},_t.prototype.while=function(r){return this.applyMiddleware(function(e,n){return function(t){return r(t)?e(t):n()}})},_t.prototype.filter=function(n){return this.applyMiddleware(function(e){return function(t){return n(t)&&e(t)}})},_t);function _t(t){void 0===t&&(t={}),this.props=t}var qt,Nt=(e(Ut,qt=Tt),Ut.prototype.complete=function(){this.subscribers.forEach(function(t){return t.complete()})},Ut.prototype.error=function(e){this.subscribers.forEach(function(t){return t.error(e)})},Ut.prototype.update=function(t){for(var e=0;e<this.subscribers.length;e++)this.subscribers[e].update(t)},Ut.prototype.subscribe=function(t){var e=this,n=a(t,this.props);return this.subscribers.push(n),{unsubscribe:function(){var t=e.subscribers.indexOf(n);-1!==t&&e.subscribers.splice(t,1)}}},Ut.prototype.stop=function(){this.parent&&this.parent.stop()},Ut);function Ut(){var t=null!==qt&&qt.apply(this,arguments)||this;return t.subscribers=[],t}var It,Xt=(e(Yt,It=Nt),Yt.prototype.create=function(t){return new Yt(t)},Yt);function Yt(){return null!==It&&It.apply(this,arguments)||this}var Bt,Lt=(e(zt,Bt=Nt),zt.prototype.create=function(t){return new zt(t)},zt.prototype.get=function(){return this.current},zt.prototype.getVelocity=function(){return this.getVelocityOfCurrent()},zt.prototype.update=function(t){Bt.prototype.update.call(this,t),this.prev=this.current,this.updateCurrent(t);var e=Y(),n=e.delta,r=e.timestamp;this.timeDelta=n,this.lastUpdated=r,ht.postRender(this.scheduleVelocityCheck)},zt.prototype.subscribe=function(t){var e=Bt.prototype.subscribe.call(this,t);return this.subscribers[this.subscribers.length-1].update(this.current),e},zt.prototype.getSingleVelocity=function(t,e){return"number"==typeof t&&"number"==typeof e?Dt(t-e,this.timeDelta):Dt(parseFloat(t)-parseFloat(e),this.timeDelta)||0},zt);function zt(t){var e=Bt.call(this,t)||this;return e.scheduleVelocityCheck=function(){return ht.postRender(e.velocityCheck)},e.velocityCheck=function(t){t.timestamp!==e.lastUpdated&&(e.prev=e.current)},e.prev=e.current=t.value||0,e.updateCurrent=function(t){return e.current=t},e.getVelocityOfCurrent=function(){return e.getSingleVelocity(e.current,e.prev)},t.initialSubscription&&e.subscribe(t.initialSubscription),e}function Wt(n){function r(t,e){return void 0!==t&&!n[e](t)}var t=Object.keys(n);return{getVectorKeys:function(n){return t.reduce(function(t,e){return r(n[e],e)&&t.push(e),t},[])},testVectorProps:function(e){return e&&t.some(function(t){return r(e[t],t)})}}}function Gt(e){return ie.find(function(t){return t.test(e)})}function Ht(t,e){return t(e)}function $t(t,e){var n=e.from,r=e.to,o=d(e,["from","to"]),u=Gt(n)||Gt(r),i=u.transform,a=u.parse;return t(A({},o,{from:"string"==typeof n?a(n):n,to:"string"==typeof r?a(r):r})).pipe(i)}function Kt(u){return function(t,e){var n=e.from,r=e.to,o=d(e,["from","to"]);return t(A({},o,{from:0,to:1})).pipe(u(n,r))}}function Jt(r,t){var e=Wt(t),o=e.testVectorProps,u=e.getVectorKeys;return function(t){if(!o(t))return r(t);var e=u(t),n=t[e[0]];return ce(n)(r,t,e)}}function Qt(T){return void 0===T&&(T={}),Vt(function(t){function r(t){var e;void 0===t&&(t=!1),F=le({from:O=(e=[x,O])[0],to:x=e[1],ease:p,reverseEase:t}).start(i)}function o(){R=ve(Q(0,c,P)),F.seek(R)}function e(){V=!0,u=ht.update(function(t){var e,n=t.delta;P+=n,o(),!(e=V&&c+b<P)||(!e||h||l||y)&&(P=c-(P-b),h&&E<h?(E++,!0):l&&C<l?(C++,r(),!0):y&&j<y&&(r(++j%2!=0),!0))||(mt.update(u),a&&ht.update(a,!1,!0))},!0)}function n(){V=!1,u&&mt.update(u)}var u,i=t.update,a=t.complete,s=T.duration,c=void 0===s?300:s,f=T.ease,p=void 0===f?Ot:f,d=T.flip,l=void 0===d?0:d,v=T.loop,h=void 0===v?0:v,m=T.yoyo,y=void 0===m?0:m,g=T.repeatDelay,b=void 0===g?0:g,w=T.from,O=void 0===w?0:w,M=T.to,x=void 0===M?1:M,A=T.elapsed,P=void 0===A?0:A,S=T.flipCount,C=void 0===S?0:S,k=T.yoyoCount,j=void 0===k?0:k,D=T.loopCount,E=void 0===D?0:D,F=le({from:O,to:x,ease:p}).start(i),R=0,V=!1;return e(),{isActive:function(){return V},getElapsed:function(){return At(0,c,P)},getProgress:function(){return R},stop:function(){n()},pause:function(){return n(),this},resume:function(){return V||e(),this},seek:function(t){return P=Z(0,c,t),ht.update(o,!1,!0),this},reverse:function(){return r(),this}}})}function Zt(t){var e,n,r,o,u=t.easings,i=t.ease,a=void 0===i?L:i,s=t.times,c=t.values,f=d(t,["easings","ease","times","values"]);u=Array.isArray(u)?u:(n=u,(e=c).map(function(){return n||Ot}).splice(0,e.length-1)),s=s||(o=(r=c).length,r.map(function(t,e){return 0!==e?e/(o-1):0}));var p=u.map(function(t,e){return le({from:c[e],to:c[e+1],ease:t})});return Qt(A({},f,{ease:a})).applyMiddleware(function(t){return e=p,n=t,o=(r=s).length,i=(u=o-1)-1,a=e.map(function(t){return t.start(n)}),function(t){t<=r[0]&&a[0].seek(0),t>=r[u]&&a[i].seek(1);for(var e=1;e<o&&!(r[e]>t||e===u);e++);var n=Q(r[e-1],r[e],t);a[e-1].seek(he(n))};var r,e,n,o,u,i,a})}function te(t){var f=t.getCount,p=t.getFirst,d=t.getOutput,l=t.mapApi,v=t.setProp,h=t.startActions;return function(c){return Vt(function(t){function r(){return e(a)}var e=t.update,o=t.complete,u=t.error,i=f(c),a=d(),s=0,n=h(c,function(t,e){var n=!1;return t.start({complete:function(){n||(n=!0,++s===i&&ht.update(o))},error:u,update:function(t){v(a,e,t),ht.update(r,!1,!0)}})});return Object.keys(p(n)).reduce(function(t,e){return t[e]=l(n,e),t},{})})}}function ee(t,e){var n,r,o,u,i,a,s,c;return Array.isArray(e)?t.push.apply(t,(r=[],o=(n=e)[n.length-1],i=(u="number"==typeof o)?o:0,a=u?n.slice(0,-1):n,s=a.length,c=0,a.forEach(function(t,e){if(r.push(t),e!==s-1){var n=t.duration||300;c+=i,r.push("-"+(n-c))}}),r)):t.push(e),t}function ne(t,e,n){var r=t.duration,o=t.easings,u=t.times,i=t.values,a=i.length,s=u[a-1],c=0===e.at?0:e.at/r,f=(e.at+e.duration)/r;if(0===n)i.push(e.from),u.push(c);else if(s!==c){void 0!==e.from&&(i.push(i[a-1]),u.push(c),o.push(L));var p=void 0!==e.from?e.from:i[a-1];i.push(p),u.push(c),o.push(L)}else void 0!==e.from&&(i.push(e.from),u.push(c),o.push(L));return i.push(e.to),u.push(f),o.push(e.ease||Mt),t}function re(r,o,u){return Vt(function(t){var e=t.update,n=o.split(" ").map(function(t){return r.addEventListener(t,e,u),t});return{stop:function(){return n.forEach(function(t){return r.removeEventListener(t,e,u)})}}})}function oe(){return{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}}function ue(t,e){return void 0===e&&(e=oe()),e.clientX=e.x=t.clientX,e.clientY=e.y=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY,e}var ie=[b,g,y,w,O],ae=Kt(rt),se=Kt(Et),ce=function(t){return"number"==typeof t?Ht:Boolean(Gt(t))?$t:F(t)?ae:q.test(t)?se:Ht},fe=Jt(function(b){return void 0===b&&(b={}),Vt(function(t){var o=t.complete,u=t.update,e=b.velocity,n=void 0===e?0:e,r=b.from,i=void 0===r?0:r,a=b.power,s=void 0===a?.8:a,c=b.timeConstant,f=void 0===c?350:c,p=b.restDelta,d=void 0===p?.5:p,l=b.modifyTarget,v=0,h=s*n,m=Math.round(i+h),y=void 0===l?m:l(m),g=ht.update(function(t){var e=t.delta;v+=e;var n=-h*Math.exp(-v/f),r=d<n||n<-d;u(r?y+n:y),r||(mt.update(g),o())},!0);return{stop:function(){return mt.update(g)}}})},{from:m.test,modifyTarget:function(t){return"function"==typeof t},velocity:m.test}),pe=Jt(function(P){return void 0===P&&(P={}),Vt(function(t){var s=t.update,c=t.complete,e=P.velocity,f=void 0===e?0:e,n=P.from,r=void 0===n?0:n,o=P.to,p=void 0===o?0:o,u=P.stiffness,d=void 0===u?100:u,i=P.damping,l=void 0===i?10:i,a=P.mass,v=void 0===a?1:a,h=P.restSpeed,m=void 0===h?.01:h,y=P.restDelta,g=void 0===y?.01:y,b=f?-f/1e3:0,w=0,O=p-r,M=r,x=M,A=ht.update(function(t){var e=t.delta;w+=e;var n=l/(2*Math.sqrt(d*v)),r=Math.sqrt(d/v)/1e3;if(x=M,n<1){var o=Math.exp(-n*r*w),u=r*Math.sqrt(1-n*n);M=p-o*((b+n*r*O)/u*Math.sin(u*w)+O*Math.cos(u*w))}else{o=Math.exp(-r*w);M=p-o*(O+(b+r*O)*w)}f=Dt(M-x,e);var i=Math.abs(f)<=m,a=Math.abs(p-M)<=g;i&&a?(s(M=p),mt.update(A),c()):s(M)},!0);return{stop:function(){return mt.update(A)}}})},{from:m.test,to:m.test,stiffness:m.test,damping:m.test,mass:m.test,velocity:m.test}),de=Jt(function(t){var e=t.from,v=void 0===e?0:e,n=t.velocity,h=void 0===n?0:n,m=t.min,y=t.max,r=t.power,g=void 0===r?.8:r,o=t.timeConstant,b=void 0===o?700:o,u=t.bounceStiffness,w=void 0===u?500:u,i=t.bounceDamping,O=void 0===i?10:i,a=t.restDelta,M=void 0===a?1:a,x=t.modifyTarget;return Vt(function(t){function r(t){return void 0!==m&&t<=m}function o(t){return void 0!==y&&y<=t}function e(t){return r(t)||o(t)}function n(t){var e,n;a(t),c=f,h=Dt((f=t)-c,Y().delta),i&&!p&&(n=h,r(e=t)&&n<0||o(e)&&0<n)&&d({from:t,velocity:h})}function u(t,e){i&&i.stop(),i=t.start({update:n,complete:function(){(e||s)()}})}var i,a=t.update,s=t.complete,c=v,f=v,p=!1,d=function(t){p=!0,u(pe(A({},t,{to:r(t.from)?m:y,stiffness:w,damping:O,restDelta:M})))};if(e(v))d({from:v,velocity:h});else if(0!==h){var l=fe({from:v,velocity:h,timeConstant:b,power:g,restDelta:e(v)?20:M,modifyTarget:x});u(l,function(){e(f)?d({from:f,velocity:h}):s()})}else s();return{stop:function(){return i&&i.stop()}}})},{from:m.test,velocity:m.test,min:m.test,max:m.test,damping:m.test,stiffness:m.test,modifyTarget:function(t){return"function"==typeof t}}),le=Jt(function(t){var e=t.from,n=void 0===e?0:e,r=t.to,o=void 0===r?1:r,u=t.ease,i=void 0===u?L:u,a=t.reverseEase;return void 0!==a&&a&&(i=bt(i)),Vt(function(t){var e=t.update;return{seek:function(t){return e(t)}}}).pipe(i,function(t){return Z(n,o,t)})},{ease:function(t){return"function"==typeof t},from:m.test,to:m.test}),ve=At(0,1),he=At(0,1),me=Jt(function(m){return void 0===m&&(m={}),Vt(function(t){var r=t.complete,o=t.update,e=m.acceleration,u=void 0===e?0:e,n=m.friction,i=void 0===n?0:n,a=m.velocity,s=void 0===a?0:a,c=m.springStrength,f=m.to,p=m.restSpeed,d=void 0===p?.001:p,l=m.from,v=void 0===l?0:l,h=ht.update(function(t){var e=t.delta,n=Math.max(e,16);u&&(s+=jt(u,n)),i&&(s*=Math.pow(1-i,n/100)),void 0!==c&&void 0!==f&&(s+=(f-v)*jt(c,n));v+=jt(s,n),o(v),!1!==d&&(!s||Math.abs(s)<=d)&&(mt.update(h),r())},!0);return{set:function(t){return v=t,this},setAcceleration:function(t){return u=t,this},setFriction:function(t){return i=t,this},setSpringStrength:function(t){return c=t,this},setSpringTarget:function(t){return f=t,this},setVelocity:function(t){return s=t,this},stop:function(){return mt.update(h)}}})},{acceleration:m.test,friction:m.test,velocity:m.test,from:m.test,to:m.test,springStrength:m.test}),ye=te({getOutput:function(){return{}},getCount:function(t){return Object.keys(t).length},getFirst:function(t){return t[Object.keys(t)[0]]},mapApi:function(o,u){return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return Object.keys(o).reduce(function(t,e){var n;return o[e][u]&&(r[0]&&void 0!==r[0][e]?t[e]=o[e][u](r[0][e]):t[e]=(n=o[e])[u].apply(n,r)),t},{})}},setProp:function(t,e,n){return t[e]=n},startActions:function(n,r){return Object.keys(n).reduce(function(t,e){return t[e]=r(n[e],e),t},{})}}),ge=[oe()],be=!1;if("undefined"!=typeof document){re(document,"touchstart touchmove",{passive:!0,capture:!0}).start(function(t){var e=t.touches;be=!0;for(var n=e.length,r=ge.length=0;r<n;r++){var o=e[r];ge.push(ue(o))}})}function we(t){var e=void 0===t?{}:t,n=e.preventDefault,f=void 0===n||n,r=e.scale,p=void 0===r?1:r,o=e.rotate,d=void 0===o?0:o;return Vt(function(t){var o=t.update,u={touches:ge,scale:p,rotate:d},i=0,a=0,s=1<ge.length;if(s){var e=ge[0],n=ge[1];i=J(e,n),a=W(e,n)}function r(){if(s){var t=ge[0],e=ge[1],n=J(t,e),r=W(t,e);u.scale=p*(n/i),u.rotate=d+(r-a)}o(u)}var c=re(document,"touchmove",{passive:!f}).start(function(t){(f||1<t.touches.length)&&t.preventDefault(),ht.update(r)});return be&&ht.update(r),{stop:function(){mt.update(r),c.stop()}}})}var Oe=oe(),Me=!1;if("undefined"!=typeof document){re(document,"mousedown mousemove",!0).start(function(t){Me=!0,ue(t,Oe)})}function xe(t){var e=(void 0===t?{}:t).preventDefault,o=void 0===e||e;return Vt(function(t){function e(){return n(Oe)}var n=t.update,r=re(document,"mousemove").start(function(t){o&&t.preventDefault(),ht.update(e)});return Me&&ht.update(e),{stop:function(){mt.update(e),r.stop()}}})}function Ae(t){return t[0]}function Pe(t){return void 0===t&&(t={}),be?we(t).pipe(function(t){return t.touches},Ae):xe(t)}function Se(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return Vt(function(t){var e,n=t.update,r=t.complete,o=0,u=function(){e=i[o].start({complete:function(){(++o>=i.length?r:u)()},update:n})};return u(),{stop:function(){return e&&e.stop()}}})}function Ce(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return je(t)}function ke(r){return Vt(function(t){var e=t.complete,n=setTimeout(e,r);return{stop:function(){return clearTimeout(n)}}})}var je=te({getOutput:function(){return[]},getCount:function(t){return t.length},getFirst:function(t){return t[0]},mapApi:function(e,r){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.map(function(t,e){if(t[r])return Array.isArray(n[0])?t[r](n[0][e]):t[r].apply(t,n)})}},setProp:function(t,e,n){return t[e]=n},startActions:function(t,n){return t.map(function(t,e){return n(t,e)})}});t.Action=Ft,t.ValueReaction=Lt,t.action=Vt,t.chain=Se,t.composite=ye,t.crossfade=function(e,n){return Vt(function(r){var o=0,t=Ce(e,n).start(A({},r,{update:function(t){var e=t[0],n=t[1];r.update(Z(e,n,o))}}));return{setBalance:function(t){return o=t},stop:function(){return t.stop()}}})},t.decay=fe,t.delay=ke,t.everyFrame=function(){return Vt(function(t){var n=t.update,r=0,e=ht.update(function(t){var e=t.timestamp;n(e-(r=r||e))},!0,!0);return{stop:function(){return mt.update(e)}}})},t.inertia=de,t.keyframes=Zt,t.listen=re,t.merge=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Vt(function(e){var t=n.map(function(t){return t.start(e)});return{stop:function(){return t.forEach(function(t){return t.stop()})}}})},t.mouse=xe,t.multicast=function(){return new Xt},t.multitouch=we,t.parallel=Ce,t.physics=me,t.pointer=function(t){void 0===t&&(t={});var e=t.x,n=t.y,r=d(t,["x","y"]);if(void 0===e&&void 0===n)return Pe(r);var o=G(e||0),u=G(n||0),i={x:0,y:0};return Pe(r).pipe(function(t){return i.x=o(t.x),i.y=u(t.y),i})},t.schedule=function(i,a){return Vt(function(t){var e,n=t.update,r=t.complete,o=i.start({update:function(){return void 0!==e&&n(e)},complete:r}),u=a.start({update:function(t){return e=t},complete:r});return{stop:function(){o.stop(),u.stop()}}})},t.spring=pe,t.stagger=function(t,r){var o="number"==typeof r,e=t.map(function(t,e){var n=o?r*e:r(e);return Se(ke(n),t)});return Ce.apply(void 0,e)},t.styler=function(){},t.timeline=function(t,e){var n=void 0===e?{}:e,r=n.duration,o=n.elapsed,u=n.ease,i=n.loop,a=n.flip,s=n.yoyo,c=0,f=0,p=t.reduce(ee,[]),d=[];p.forEach(function(t){if("string"==typeof t)c+=parseFloat(t);else if("number"==typeof t)c=t;else{var e=A({},t,{at:c});e.duration=void 0===e.duration?300:e.duration,d.push(e),c+=e.duration,f=Math.max(f,e.at+e.duration)}});for(var l={},v=d.length,h=0;h<v;h++){var m=d[h],y=m.track;if(void 0===y)throw new Error("No track defined");l.hasOwnProperty(y)||(l[y]=[]),l[y].push(m)}var g={};for(var b in l)if(l.hasOwnProperty(b)){var w=l[b].reduce(ne,{duration:f,easings:[],times:[],values:[]});g[b]=Zt(A({},w,{duration:r||f,ease:u,elapsed:o,loop:i,yoyo:s,flip:a}))}return ye(g)},t.tween=Qt,t.value=function(t,e){return new Lt({value:t,initialSubscription:e})},Object.defineProperty(t,"__esModule",{value:!0})});