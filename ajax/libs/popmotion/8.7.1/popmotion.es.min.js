import{__rest,__extends,__assign}from"tslib";import{pipe,angle,degreesToRadians,distance,isPoint3D,isPoint,mix,pointFromVector,progress,radiansToDegrees,smoothFrame,velocityPerFrame,velocityPerSecond,mixColor,mixComplex,clamp,applyOffset,conditional,interpolate,mixArray,smooth,snap,springForce,springForceExpo,springForceLinear,wrap}from"@popmotion/popcorn";import sync,{getFrameData,cancelSync}from"framesync";import*as styleValueTypes from"style-value-types";import{color,complex,percent,degrees,vh,vw,px,number}from"style-value-types";export{styleValueTypes as valueTypes};import*as easing from"@popmotion/easing";import{linear,createReversedEasing,easeOut,easeInOut}from"@popmotion/easing";export{easing};import styler from"stylefire";export{default as styler}from"stylefire";import{warning}from"hey-listen";var Chainable=function(){function t(t){void 0===t&&(t={}),this.props=t}return t.prototype.applyMiddleware=function(t){return this.create(__assign({},this.props,{middleware:this.props.middleware?[t].concat(this.props.middleware):[t]}))},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=1===t.length?t[0]:pipe.apply(void 0,t);return this.applyMiddleware(function(t){return function(e){return t(r(e))}})},t.prototype.while=function(t){return this.applyMiddleware(function(e,r){return function(n){return t(n)?e(n):r()}})},t.prototype.filter=function(t){return this.applyMiddleware(function(e){return function(r){return t(r)&&e(r)}})},t}(),Observer=function(){return function(t,e){var r=t.middleware,n=t.onComplete,o=this;this.isActive=!0,this.update=function(t){o.observer.update&&o.updateObserver(t)},this.complete=function(){o.observer.complete&&o.isActive&&o.observer.complete(),o.onComplete&&o.onComplete(),o.isActive=!1},this.error=function(t){o.observer.error&&o.isActive&&o.observer.error(t),o.isActive=!1},this.observer=e,this.updateObserver=function(t){return e.update(t)},this.onComplete=n,e.update&&r&&r.length&&r.forEach(function(t){return o.updateObserver=t(o.updateObserver,o.complete)})}}(),createObserver=function(t,e,r){var n=e.middleware;return new Observer({middleware:n,onComplete:r},"function"==typeof t?{update:t}:t)},Action=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.create=function(t){return new e(t)},e.prototype.start=function(t){void 0===t&&(t={});var e=!1,r={stop:function(){}},n=this.props,o=n.init,i=__rest(n,["init"]),u=o(createObserver(t,i,function(){e=!0,r.stop()}));return r=u?__assign({},r,u):r,t.registerParent&&t.registerParent(r),e&&r.stop(),r},e}(Chainable),action=function(t){return new Action({init:t})},BaseMulticast=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.subscribers=[],e}return __extends(e,t),e.prototype.complete=function(){this.subscribers.forEach(function(t){return t.complete()})},e.prototype.error=function(t){this.subscribers.forEach(function(e){return e.error(t)})},e.prototype.update=function(t){for(var e=0;e<this.subscribers.length;e++)this.subscribers[e].update(t)},e.prototype.subscribe=function(t){var e=this,r=createObserver(t,this.props);return this.subscribers.push(r),{unsubscribe:function(){var t=e.subscribers.indexOf(r);-1!==t&&e.subscribers.splice(t,1)}}},e.prototype.stop=function(){this.parent&&this.parent.stop()},e.prototype.registerParent=function(t){this.stop(),this.parent=t},e}(Chainable),Multicast=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.create=function(t){return new e(t)},e}(BaseMulticast),multicast=function(){return new Multicast},stepProgress=function(t,e){var r=1/(t-1),n=1/(2*(t-1)),o=Math.min(e,1)/n;return Math.floor((o+1)/2)*r},calc=Object.freeze({angle:angle,degreesToRadians:degreesToRadians,distance:distance,isPoint3D:isPoint3D,isPoint:isPoint,dilate:mix,getValueFromProgress:mix,pointFromAngleAndDistance:pointFromVector,getProgressFromValue:progress,radiansToDegrees:radiansToDegrees,smooth:smoothFrame,speedPerFrame:velocityPerFrame,speedPerSecond:velocityPerSecond,stepProgress:stepProgress}),isValueList=function(t){return Array.isArray(t)},isSingleValue=function(t){var e=typeof t;return"string"===e||"number"===e},ValueReaction=function(t){function e(e){var r=t.call(this,e)||this;return r.scheduleVelocityCheck=function(){return sync.postRender(r.velocityCheck)},r.velocityCheck=function(t){t.timestamp!==r.lastUpdated&&(r.prev=r.current)},r.prev=r.current=e.value||0,isSingleValue(r.current)?(r.updateCurrent=function(t){return r.current=t},r.getVelocityOfCurrent=function(){return r.getSingleVelocity(r.current,r.prev)}):isValueList(r.current)?(r.updateCurrent=function(t){return r.current=t.slice()},r.getVelocityOfCurrent=function(){return r.getListVelocity()}):(r.updateCurrent=function(t){for(var e in r.current={},t)t.hasOwnProperty(e)&&(r.current[e]=t[e])},r.getVelocityOfCurrent=function(){return r.getMapVelocity()}),e.initialSubscription&&r.subscribe(e.initialSubscription),r}return __extends(e,t),e.prototype.create=function(t){return new e(t)},e.prototype.get=function(){return this.current},e.prototype.getVelocity=function(){return this.getVelocityOfCurrent()},e.prototype.update=function(e){t.prototype.update.call(this,e),this.prev=this.current,this.updateCurrent(e);var r=getFrameData(),n=r.delta,o=r.timestamp;this.timeDelta=n,this.lastUpdated=o,sync.postRender(this.scheduleVelocityCheck)},e.prototype.subscribe=function(e){var r=t.prototype.subscribe.call(this,e);return this.subscribers[this.subscribers.length-1].update(this.current),r},e.prototype.getSingleVelocity=function(t,e){return"number"==typeof t&&"number"==typeof e?velocityPerSecond(t-e,this.timeDelta):velocityPerSecond(parseFloat(t)-parseFloat(e),this.timeDelta)||0},e.prototype.getListVelocity=function(){var t=this;return this.current.map(function(e,r){return t.getSingleVelocity(e,t.prev[r])})},e.prototype.getMapVelocity=function(){var t={};for(var e in this.current)this.current.hasOwnProperty(e)&&(t[e]=this.getSingleVelocity(this.current[e],this.prev[e]));return t},e}(BaseMulticast),value=function(t,e){return new ValueReaction({value:t,initialSubscription:e})},multi=function(t){var e=t.getCount,r=t.getFirst,n=t.getOutput,o=t.mapApi,i=t.setProp,u=t.startActions;return function(t){return action(function(s){var a=s.update,c=s.complete,p=s.error,f=e(t),l=n(),d=function(){return a(l)},v=0,m=u(t,function(t,e){var r=!1;return t.start({complete:function(){r||(r=!0,++v===f&&sync.update(c))},error:p,update:function(t){i(l,e,t),sync.update(d,!1,!0)}})});return Object.keys(r(m)).reduce(function(t,e){return t[e]=o(m,e),t},{})})}},composite=multi({getOutput:function(){return{}},getCount:function(t){return Object.keys(t).length},getFirst:function(t){return t[Object.keys(t)[0]]},mapApi:function(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return Object.keys(t).reduce(function(n,o){var i;return t[o][e]&&(r[0]&&void 0!==r[0][o]?n[o]=t[o][e](r[0][o]):n[o]=(i=t[o])[e].apply(i,r)),n},{})}},setProp:function(t,e,r){return t[e]=r},startActions:function(t,e){return Object.keys(t).reduce(function(r,n){return r[n]=e(t[n],n),r},{})}}),parallel=multi({getOutput:function(){return[]},getCount:function(t){return t.length},getFirst:function(t){return t[0]},mapApi:function(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.map(function(t,n){if(t[e])return Array.isArray(r[0])?t[e](r[0][n]):t[e].apply(t,r)})}},setProp:function(t,e,r){return t[e]=r},startActions:function(t,e){return t.map(function(t,r){return e(t,r)})}}),parallel$1=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return parallel(t)},createVectorTests=function(t){var e=Object.keys(t),r=function(e,r){return void 0!==e&&!t[r](e)};return{getVectorKeys:function(t){return e.reduce(function(e,n){return r(t[n],n)&&e.push(n),e},[])},testVectorProps:function(t){return t&&e.some(function(e){return r(t[e],e)})}}},unitTypes=[px,percent,degrees,vh,vw],findUnitType=function(t){return unitTypes.find(function(e){return e.test(t)})},isUnitProp=function(t){return Boolean(findUnitType(t))},createAction=function(t,e){return t(e)},reduceArrayValue=function(t){return function(e,r){return e[r]=e[r][t],e}},createArrayAction=function(t,e,r){var n=r[0],o=e[n].map(function(n,o){var i=r.reduce(reduceArrayValue(o),__assign({},e));return getActionCreator(n)(t,i)});return parallel$1.apply(void 0,o)},reduceObjectValue=function(t){return function(e,r){return e[r]=e[r][t],e}},createObjectAction=function(t,e,r){var n=r[0],o=Object.keys(e[n]).reduce(function(o,i){var u=r.reduce(reduceObjectValue(i),__assign({},e));return o[i]=getActionCreator(e[n][i])(t,u),o},{});return composite(o)},createUnitAction=function(t,e){var r=e.from,n=e.to,o=__rest(e,["from","to"]),i=findUnitType(r)||findUnitType(n),u=i.transform,s=i.parse;return t(__assign({},o,{from:"string"==typeof r?s(r):r,to:"string"==typeof n?s(n):n})).pipe(u)},createMixerAction=function(t){return function(e,r){var n=r.from,o=r.to,i=__rest(r,["from","to"]);return e(__assign({},i,{from:0,to:1})).pipe(t(n,o))}},createColorAction=createMixerAction(mixColor),createComplexAction=createMixerAction(mixComplex),createVectorAction=function(t,e){var r=createVectorTests(e),n=r.testVectorProps,o=r.getVectorKeys;return function(e){if(!n(e))return t(e);var r=o(e),i=e[r[0]];return getActionCreator(i)(t,e,r)}},getActionCreator=function(t){return"number"==typeof t?createAction:Array.isArray(t)?createArrayAction:isUnitProp(t)?createUnitAction:color.test(t)?createColorAction:complex.test(t)?createComplexAction:"object"==typeof t?createObjectAction:createAction},decay=function(t){return void 0===t&&(t={}),action(function(e){var r=e.complete,n=e.update,o=t.velocity,i=void 0===o?0:o,u=t.from,s=void 0===u?0:u,a=t.power,c=void 0===a?.8:a,p=t.timeConstant,f=void 0===p?350:p,l=t.restDelta,d=void 0===l?.5:l,v=t.modifyTarget,m=0,y=c*i,h=Math.round(s+y),g=void 0===v?h:v(h),b=sync.update(function(t){var e=t.delta;m+=e;var o=-y*Math.exp(-m/f),i=o>d||o<-d;n(i?g+o:g),i||(cancelSync.update(b),r())},!0);return{stop:function(){return cancelSync.update(b)}}})},vectorDecay=createVectorAction(decay,{from:number.test,modifyTarget:function(t){return"function"==typeof t},velocity:number.test}),spring=function(t){return void 0===t&&(t={}),action(function(e){var r=e.update,n=e.complete,o=t.velocity,i=void 0===o?0:o,u=t.from,s=void 0===u?0:u,a=t.to,c=void 0===a?0:a,p=t.stiffness,f=void 0===p?100:p,l=t.damping,d=void 0===l?10:l,v=t.mass,m=void 0===v?1:v,y=t.restSpeed,h=void 0===y?.01:y,g=t.restDelta,b=void 0===g?.01:g,A=i?-i/1e3:0,P=0,x=c-s,_=s,O=_,S=sync.update(function(t){var e=t.delta;P+=e;var o=d/(2*Math.sqrt(f*m)),u=Math.sqrt(f/m)/1e3;if(O=_,o<1){var s=Math.exp(-o*u*P),a=u*Math.sqrt(1-o*o);_=c-s*((A+o*u*x)/a*Math.sin(a*P)+x*Math.cos(a*P))}else{s=Math.exp(-u*P);_=c-s*(x+(A+u*x)*P)}i=velocityPerSecond(_-O,e);var p=Math.abs(i)<=h,l=Math.abs(c-_)<=b;p&&l?(r(_=c),cancelSync.update(S),n()):r(_)},!0);return{stop:function(){return cancelSync.update(S)}}})},vectorSpring=createVectorAction(spring,{from:number.test,to:number.test,stiffness:number.test,damping:number.test,mass:number.test,velocity:number.test}),inertia=function(t){var e=t.from,r=void 0===e?0:e,n=t.velocity,o=void 0===n?0:n,i=t.min,u=t.max,s=t.power,a=void 0===s?.8:s,c=t.timeConstant,p=void 0===c?700:c,f=t.bounceStiffness,l=void 0===f?500:f,d=t.bounceDamping,v=void 0===d?10:d,m=t.restDelta,y=void 0===m?1:m,h=t.modifyTarget;return action(function(t){var e,n=t.update,s=t.complete,c=value(r),f=!1,d=function(t){return void 0!==i&&t<=i},m=function(t){return void 0!==u&&t>=u},g=function(t){return d(t)||m(t)},b=function(t,r){e&&e.stop(),e=t.start({update:function(t){return c.update(t)},complete:function(){r?r():s()}})},A=function(t){f=!0,b(vectorSpring(__assign({},t,{to:d(t.from)?i:u,stiffness:l,damping:v,restDelta:y})))};if(c.subscribe(function(t){n(t);var r=c.getVelocity();e&&!f&&function(t,e){return d(t)&&e<0||m(t)&&e>0}(t,r)&&A({from:t,velocity:r})}),g(r))A({from:r,velocity:o});else if(0!==o){var P=vectorDecay({from:r,velocity:o,timeConstant:p,power:a,restDelta:g(r)?20:y,modifyTarget:h});b(P,function(){var t=c.get();g(t)?A({from:t,velocity:c.getVelocity()}):s()})}else s();return{stop:function(){return e&&e.stop()}}})},index=createVectorAction(inertia,{from:number.test,velocity:number.test,min:number.test,max:number.test,damping:number.test,stiffness:number.test,modifyTarget:function(t){return"function"==typeof t}}),frame=function(){return action(function(t){var e=t.update,r=0,n=sync.update(function(t){var n=t.timestamp;r||(r=n),e(n-r)},!0,!0);return{stop:function(){return cancelSync.update(n)}}})},scrubber=function(t){var e=t.from,r=void 0===e?0:e,n=t.to,o=void 0===n?1:n,i=t.ease,u=void 0===i?linear:i,s=t.reverseEase;return void 0!==s&&s&&(u=createReversedEasing(u)),action(function(t){var e=t.update;return{seek:function(t){return e(t)}}}).pipe(u,function(t){return mix(r,o,t)})},vectorScrubber=createVectorAction(scrubber,{ease:function(t){return"function"==typeof t},from:number.test,to:number.test}),clampProgress=clamp(0,1),tween=function(t){return void 0===t&&(t={}),action(function(e){var r,n=e.update,o=e.complete,i=t.duration,u=void 0===i?300:i,s=t.ease,a=void 0===s?easeOut:s,c=t.flip,p=void 0===c?0:c,f=t.loop,l=void 0===f?0:f,d=t.yoyo,v=void 0===d?0:d,m=t.repeatDelay,y=void 0===m?0:m,h=t.from,g=void 0===h?0:h,b=t.to,A=void 0===b?1:b,P=t.elapsed,x=void 0===P?0:P,_=t.flipCount,O=void 0===_?0:_,S=t.yoyoCount,T=void 0===S?0:S,V=t.loopCount,C=void 0===V?0:V,D=vectorScrubber({from:g,to:A,ease:a}).start(n),w=0,M=!1,F=function(t){var e;void 0===t&&(t=!1),D=vectorScrubber({from:g=(e=[A,g])[0],to:A=e[1],ease:a,reverseEase:t}).start(n)},k=function(){w=clampProgress(progress(0,u,x)),D.seek(w)},E=function(){M=!0,r=sync.update(function(t){var e,n=t.delta;x+=n,k(),!(e=M&&x>u+y)||(!e||l||p||v)&&(x=u-(x-y),l&&C<l?(C++,1):p&&O<p?(O++,F(),1):v&&T<v&&(F(++T%2!=0),1))||(cancelSync.update(r),o&&sync.update(o,!1,!0))},!0)},U=function(){M=!1,r&&cancelSync.update(r)};return E(),{isActive:function(){return M},getElapsed:function(){return clamp(0,u,x)},getProgress:function(){return w},stop:function(){U()},pause:function(){return U(),this},resume:function(){return M||E(),this},seek:function(t){return x=mix(0,u,t),sync.update(k,!1,!0),this},reverse:function(){return F(),this}}})},clampProgress$1=clamp(0,1),defaultEasings=function(t,e){return t.map(function(){return e||easeOut}).splice(0,t.length-1)},defaultTimings=function(t){var e=t.length;return t.map(function(t,r){return 0!==r?r/(e-1):0})},interpolateScrubbers=function(t,e,r){var n=t.length,o=n-1,i=o-1,u=e.map(function(t){return t.start(r)});return function(e){e<=t[0]&&u[0].seek(0),e>=t[o]&&u[i].seek(1);for(var r=1;r<n&&!(t[r]>e||r===o);r++);var s=progress(t[r-1],t[r],e);u[r-1].seek(clampProgress$1(s))}},keyframes=function(t){var e=t.easings,r=t.ease,n=void 0===r?linear:r,o=t.times,i=t.values,u=__rest(t,["easings","ease","times","values"]);e=Array.isArray(e)?e:defaultEasings(i,e),o=o||defaultTimings(i);var s=e.map(function(t,e){return vectorScrubber({from:i[e],to:i[e+1],ease:t})});return tween(__assign({},u,{ease:n})).applyMiddleware(function(t){return interpolateScrubbers(o,s,t)})},physics=function(t){return void 0===t&&(t={}),action(function(e){var r=e.complete,n=e.update,o=t.acceleration,i=void 0===o?0:o,u=t.friction,s=void 0===u?0:u,a=t.velocity,c=void 0===a?0:a,p=t.springStrength,f=t.to,l=t.restSpeed,d=void 0===l?.001:l,v=t.from,m=void 0===v?0:v,y=sync.update(function(t){var e=t.delta,o=Math.max(e,16);(i&&(c+=velocityPerFrame(i,o)),s&&(c*=Math.pow(1-s,o/100)),void 0!==p&&void 0!==f)&&(c+=(f-m)*velocityPerFrame(p,o));m+=velocityPerFrame(c,o),n(m),!1!==d&&(!c||Math.abs(c)<=d)&&(cancelSync.update(y),r())},!0);return{set:function(t){return m=t,this},setAcceleration:function(t){return i=t,this},setFriction:function(t){return s=t,this},setSpringStrength:function(t){return p=t,this},setSpringTarget:function(t){return f=t,this},setVelocity:function(t){return c=t,this},stop:function(){return cancelSync.update(y)}}})},vectorPhysics=createVectorAction(physics,{acceleration:number.test,friction:number.test,velocity:number.test,from:number.test,to:number.test,springStrength:number.test}),DEFAULT_DURATION=300,flattenTimings=function(t){var e=[],r=t[t.length-1],n="number"==typeof r,o=n?r:0,i=n?t.slice(0,-1):t,u=i.length,s=0;return i.forEach(function(t,r){if(e.push(t),r!==u-1){var n=t.duration||DEFAULT_DURATION;s+=o,e.push("-"+(n-s))}}),e},flattenArrayInstructions=function(t,e){return Array.isArray(e)?t.push.apply(t,flattenTimings(e)):t.push(e),t},convertDefToProps=function(t,e,r){var n=t.duration,o=t.easings,i=t.times,u=t.values,s=u.length,a=i[s-1],c=0===e.at?0:e.at/n,p=(e.at+e.duration)/n;if(0===r)u.push(e.from),i.push(c);else if(a!==c){void 0!==e.from&&(u.push(u[s-1]),i.push(c),o.push(linear));var f=void 0!==e.from?e.from:u[s-1];u.push(f),i.push(c),o.push(linear)}else void 0!==e.from&&(u.push(e.from),i.push(c),o.push(linear));return u.push(e.to),i.push(p),o.push(e.ease||easeInOut),t},timeline=function(t,e){var r=void 0===e?{}:e,n=r.duration,o=r.elapsed,i=r.ease,u=r.loop,s=r.flip,a=r.yoyo,c=0,p=0,f=t.reduce(flattenArrayInstructions,[]),l=[];f.forEach(function(t){if("string"==typeof t)c+=parseFloat(t);else if("number"==typeof t)c=t;else{var e=__assign({},t,{at:c});e.duration=void 0===e.duration?DEFAULT_DURATION:e.duration,l.push(e),c+=e.duration,p=Math.max(p,e.at+e.duration)}});for(var d={},v=l.length,m=0;m<v;m++){var y=l[m],h=y.track;if(void 0===h)throw new Error("No track defined");d.hasOwnProperty(h)||(d[h]=[]),d[h].push(y)}var g={};for(var b in d)if(d.hasOwnProperty(b)){var A=d[b].reduce(convertDefToProps,{duration:p,easings:[],times:[],values:[]});g[b]=keyframes(__assign({},A,{duration:n||p,ease:i,elapsed:o,loop:u,yoyo:a,flip:s}))}return composite(g)},listen=function(t,e,r){return action(function(n){var o=n.update,i=e.split(" ").map(function(e){return t.addEventListener(e,o,r),e});return{stop:function(){return i.forEach(function(e){return t.removeEventListener(e,o,r)})}}})},defaultPointerPos=function(){return{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}},eventToPoint=function(t,e){return void 0===e&&(e=defaultPointerPos()),e.clientX=e.x=t.clientX,e.clientY=e.y=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY,e},points=[defaultPointerPos()],isTouchDevice=!1;if("undefined"!=typeof document){var updatePointsLocation=function(t){var e=t.touches;isTouchDevice=!0;var r=e.length;points.length=0;for(var n=0;n<r;n++){var o=e[n];points.push(eventToPoint(o))}};listen(document,"touchstart touchmove",{passive:!0,capture:!0}).start(updatePointsLocation)}var multitouch=function(t){var e=void 0===t?{}:t,r=e.preventDefault,n=void 0===r||r,o=e.scale,i=void 0===o?1:o,u=e.rotate,s=void 0===u?0:u;return action(function(t){var e=t.update,r={touches:points,scale:i,rotate:s},o=0,u=0,a=points.length>1;if(a){var c=points[0],p=points[1];o=distance(c,p),u=angle(c,p)}var f=function(){if(a){var t=points[0],n=points[1],c=distance(t,n),p=angle(t,n);r.scale=i*(c/o),r.rotate=s+(p-u)}e(r)},l=listen(document,"touchmove",{passive:!n}).start(function(t){(n||t.touches.length>1)&&t.preventDefault(),sync.update(f)});return isTouchDevice&&sync.update(f),{stop:function(){cancelSync.update(f),l.stop()}}})},getIsTouchDevice=function(){return isTouchDevice},point=defaultPointerPos(),isMouseDevice=!1;if("undefined"!=typeof document){var updatePointLocation=function(t){isMouseDevice=!0,eventToPoint(t,point)};listen(document,"mousedown mousemove",!0).start(updatePointLocation)}var mouse=function(t){var e=(void 0===t?{}:t).preventDefault,r=void 0===e||e;return action(function(t){var e=t.update,n=function(){return e(point)},o=listen(document,"mousemove").start(function(t){r&&t.preventDefault(),sync.update(n)});return isMouseDevice&&sync.update(n),{stop:function(){cancelSync.update(n),o.stop()}}})},getFirstTouch=function(t){return t[0]},pointer=function(t){return void 0===t&&(t={}),getIsTouchDevice()?multitouch(t).pipe(function(t){return t.touches},getFirstTouch):mouse(t)},index$1=function(t){void 0===t&&(t={});var e=t.x,r=t.y,n=__rest(t,["x","y"]);if(void 0!==e||void 0!==r){var o=applyOffset(e||0),i=applyOffset(r||0),u={x:0,y:0};return pointer(n).pipe(function(t){return u.x=o(t.x),u.y=i(t.y),u})}return pointer(n)},chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return action(function(e){var r,n=e.update,o=e.complete,i=0,u=function(){r=t[i].start({complete:function(){++i>=t.length?o():u()},update:n})};return u(),{stop:function(){return r&&r.stop()}}})},crossfade=function(t,e){return action(function(r){var n=0,o=parallel$1(t,e).start(__assign({},r,{update:function(t){var e=t[0],o=t[1];r.update(mix(e,o,n))}}));return{setBalance:function(t){return n=t},stop:function(){return o.stop()}}})},delay=function(t){return action(function(e){var r=e.complete,n=setTimeout(r,t);return{stop:function(){return clearTimeout(n)}}})},merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return action(function(e){var r=t.map(function(t){return t.start(e)});return{stop:function(){return r.forEach(function(t){return t.stop()})}}})},schedule=function(t,e){return action(function(r){var n,o=r.update,i=r.complete,u=t.start({update:function(){return void 0!==n&&o(n)},complete:i}),s=e.start({update:function(t){return n=t},complete:i});return{stop:function(){u.stop(),s.stop()}}})},stagger=function(t,e){var r="number"==typeof e,n=t.map(function(t,n){var o=r?e*n:e(n);return chain(delay(o),t)});return parallel$1.apply(void 0,n)},appendUnit=function(t){return function(e){return""+e+t}},steps=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=1),function(n){var o=progress(e,r,n);return mix(e,r,stepProgress(t,o))}},transformMap=function(t){return function(e){var r=__assign({},e);for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];r[n]=o(e[n])}return r}},transformers=Object.freeze({applyOffset:applyOffset,clamp:clamp,conditional:conditional,interpolate:interpolate,blendArray:mixArray,blendColor:mixColor,pipe:pipe,smooth:smooth,snap:snap,generateStaticSpring:springForce,nonlinearSpring:springForceExpo,linearSpring:springForceLinear,wrap:wrap,appendUnit:appendUnit,steps:steps,transformMap:transformMap}),css=function(t,e){return warning(!1,"css() is deprecated, use styler instead"),styler(t,e)},svg=function(t,e){return warning(!1,"svg() is deprecated, use styler instead"),styler(t,e)};export{action,multicast,value,vectorDecay as decay,index as inertia,keyframes,frame as everyFrame,vectorPhysics as physics,vectorSpring as spring,timeline,tween,listen,index$1 as pointer,mouse,multitouch,chain,composite,crossfade,delay,merge,parallel$1 as parallel,schedule,stagger,calc,transformers as transform,css,svg,Action,ValueReaction};