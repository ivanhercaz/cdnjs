!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).popmotion={})}(this,function(t){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function e(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var S=function(){return(S=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function d(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function a(t,e,n){var r=e.middleware;return new c({middleware:r,onComplete:n},"function"==typeof t?{update:t}:t)}function n(e,n){return function(t){return Math.max(Math.min(t,n),e)}}function p(t){return t%1?Number(t.toFixed(5)):t}function o(e){return{test:function(t){return"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}}function u(t){return void 0!==t.red}function i(t){return void 0!==t.hue}function s(u){return function(t){if("string"!=typeof t)return t;for(var e,n={},r=(e=t).substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(/,\s*/),o=0;o<4;o++)n[u[o]]=void 0!==r[o]?parseFloat(r[o]):1;return n}}var c=function(t,e){var n=this,r=t.middleware,o=t.onComplete;this.isActive=!0,this.update=function(t){n.observer.update&&n.updateObserver(t)},this.complete=function(){n.observer.complete&&n.isActive&&n.observer.complete(),n.onComplete&&n.onComplete(),n.isActive=!1},this.error=function(t){n.observer.error&&n.isActive&&n.observer.error(t),n.isActive=!1},this.observer=e,this.updateObserver=function(t){return e.update(t)},this.onComplete=o,e.update&&r&&r.length&&r.forEach(function(t){return n.updateObserver=t(n.updateObserver,n.complete)})},f=function(){return(f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},l=/(-)?(\d[\d\.]*)/g,v=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,h=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,m={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},y=f({},m,{transform:n(0,1)}),g=(f({},m,{default:1}),o("deg")),b=o("%"),w=o("px"),O=o("vh"),x=o("vw"),M=(f({},b,{parse:function(t){return b.parse(t)/100},transform:function(t){return b.transform(100*t)}}),n(0,255)),A=f({},m,{transform:function(t){return Math.round(M(t))}});function P(t,e){return t.startsWith(e)&&h.test(t)}function k(t){return"number"==typeof t?0:t}var C,j,R={test:function(t){return"string"==typeof t?P(t,"rgb"):u(t)},parse:s(["red","green","blue","alpha"]),transform:function(t){var e,n,r,o,u,i=t.red,a=t.green,s=t.blue,c=t.alpha,f=void 0===c?1:c;return e={red:A.transform(i),green:A.transform(a),blue:A.transform(s),alpha:p(y.transform(f))},n=e.red,r=e.green,o=e.blue,u=e.alpha,"rgba("+n+", "+r+", "+o+", "+(void 0===u?1:u)+")"}},F={test:function(t){return"string"==typeof t?P(t,"hsl"):i(t)},parse:s(["hue","saturation","lightness","alpha"]),transform:function(t){var e,n,r,o,u,i=t.hue,a=t.saturation,s=t.lightness,c=t.alpha,f=void 0===c?1:c;return e={hue:Math.round(i),saturation:b.transform(p(a)),lightness:b.transform(p(s)),alpha:p(y.transform(f))},n=e.hue,r=e.saturation,o=e.lightness,u=e.alpha,"hsla("+n+", "+r+", "+o+", "+(void 0===u?1:u)+")"}},D=f({},R,{test:function(t){return"string"==typeof t&&P(t,"#")},parse:function(t){var e="",n="",r="";return 4<t.length?(e=t.substr(1,2),n=t.substr(3,2),r=t.substr(5,2)):(e=t.substr(1,1),n=t.substr(2,1),r=t.substr(3,1),e+=e,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:1}}}),E=function(t){return"string"==typeof t&&h.test(t)||u(t)||i(t)},T=function(t){return R.test(t)?R.parse(t):F.test(t)?F.parse(t):D.test(t)?D.parse(t):t},V=function(t){return u(t)?R.transform(t):i(t)?F.transform(t):t},U="${c}",q="${n}",_={test:function(t){if("string"!=typeof t||!isNaN(t))return!1;var e=0,n=t.match(l),r=t.match(v);return n&&(e+=n.length),r&&(e+=r.length),0<e},parse:function(t){var e=t,n=[],r=e.match(v);r&&(e=e.replace(v,U),n.push.apply(n,r.map(T)));var o=e.match(l);return o&&n.push.apply(n,o.map(m.parse)),n},createTransformer:function(t){var r=t,o=0,e=t.match(v),u=e?e.length:0;if(e)for(var n=0;n<u;n++)r=r.replace(e[n],U),o++;var i=r.match(l),a=i?i.length:0;if(i)for(n=0;n<a;n++)r=r.replace(i[n],q),o++;return function(t){for(var e=r,n=0;n<o;n++)e=e.replace(n<u?U:q,(n<u?V:p)(t[n]));return e}},getAnimatableNone:function(t){var e=_.parse(t);return _.createTransformer(t)(e.map(k))}},N=0,I="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),n=Math.max(0,16.7-(e-N));N=e+n,setTimeout(function(){return t(N)},n)};(j=C=C||{}).Read="read",j.Update="update",j.Render="render",j.PostRender="postRender",j.FixedUpdate="fixedUpdate";function W(t){return ct=t}function X(t){return vt[t].process(pt)}function Y(e){return function(t){return 1-e(1-t)}}function B(t){return t}function L(t){return"number"==typeof t}function z(t,e){return void 0===e&&(e=Ot),180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}function G(e,n){var r=!0;return void 0===n&&(n=e,r=!1),function(t){return r?t-e+n:(e=t,r=!0,n)}}function H(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")}function $(t){return H(t)&&t.hasOwnProperty("z")}function K(t,e){return Math.abs(t-e)}function J(t,e){if(void 0===e&&(e=Ot),L(t)&&L(e))return K(t,e);if(H(t)&&H(e)){var n=K(t.x,e.x),r=K(t.y,e.y),o=$(t)&&$(e)?K(t.z,e.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(o,2))}return 0}function Q(t,e,n){var r=e-t;return 0==r?1:(n-t)/r}function Z(t,e,n){return-n*t+n*e+t}function tt(t,e,n){var r=t*t,o=e*e;return Math.sqrt(Math.max(0,n*(o-r)+r))}function et(e){return St.find(function(t){return t.test(e)})}function nt(t){return"'"+t+"' is not an animatable color. Use the equivalent color code instead."}function rt(t,e){var n=et(t),r=et(e);nt(t),nt(e),n.transform,r.transform;var o=n.parse(t),u=r.parse(e),i=Mt({},o),a=n===F?Z:tt;return function(t){for(var e in i)"alpha"!==e&&(i[e]=a(o[e],u[e],t));return i.alpha=Z(o.alpha,u.alpha,t),n.transform(i)}}function ot(e,n){return function(t){return n(e(t))}}function ut(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(ot)}var it,at=1/60*1e3,st=!0,ct=!1,ft=!1,pt={delta:0,timestamp:0},dt=[C.Read,C.Update,C.Render,C.PostRender],lt=dt.reduce(function(t,e){var r,u,i,a,s,o,c,f,p,d=(r=W,u=[],s=!(i=[]),o=a=0,c=new WeakSet,f=new WeakSet,p={cancel:function(t){var e=i.indexOf(t);c.add(t),-1!==e&&i.splice(e,1)},process:function(t){var e,n;if(s=!0,u=(e=[i,u])[0],(i=e[1]).length=0,a=u.length)for(o=0;o<a;o++)(n=u[o])(t),!0!==f.has(n)||c.has(n)||(p.schedule(n),r(!0));s=!1},schedule:function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=n&&s,o=r?u:i;c.delete(t),e&&f.add(t),-1===o.indexOf(t)&&(o.push(t),r&&(a=u.length))}});return t.sync[e]=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),ct||mt(),d.schedule(t,e,n),t},t.cancelSync[e]=function(t){return d.cancel(t)},t.steps[e]=d,t},{steps:{},sync:{},cancelSync:{}}),vt=lt.steps,ht=(lt.sync,lt.cancelSync,function(t){ct=!1,pt.delta=st?at:Math.max(Math.min(t-pt.timestamp,40),1),st||(at=pt.delta),pt.timestamp=t,ft=!0,dt.forEach(X),ft=!1,ct&&(st=!1,I(ht))}),mt=function(){st=ct=!0,ft||I(ht)},yt=Y,gt=function(e){return function(t){return Math.pow(t,e)}}(2),bt=Y(gt),wt=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}}(gt),Ot={x:0,y:0,z:0},xt=(it=function(t,e,n){return Math.min(Math.max(n,t),e)},function(e,n,t){return void 0!==t?it(e,n,t):function(t){return it(e,n,t)}}),Mt=function(){return(Mt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},St=[D,R,F];function At(t,o){var n=t.slice(),r=n.length,u=t.map(function(t,e){return n=t,r=o[e],L(n)?function(t){return Z(n,r,t)}:(E(n)?rt:jt)(n,r);var n,r});return function(t){for(var e=0;e<r;e++)n[e]=u[e](t);return n}}function Pt(t){for(var e=_.parse(t),n=e.length,r=0,o=0,u=0,i=0;i<n;i++)r||"number"==typeof e[i]?r++:void 0!==e[i].hue?u++:o++;return{parsed:e,numNumbers:r,numRGB:o,numHSL:u}}function kt(t,e){return L(t)?t/(1e3/e):0}function Ct(t,e){return e?t*(1e3/e):0}var jt=function(t,e){var n=_.createTransformer(e),r=Pt(t),o=Pt(e);return r.numHSL===o.numHSL&&r.numRGB===o.numRGB&&(r.numNumbers,o.numNumbers),ut(At(r.parsed,o.parsed),n)},Rt=(xt(0,1),Ft.prototype.create=function(t){return new Ft(t)},Ft.prototype.start=function(t){void 0===t&&(t={});var e=!1,n={stop:function(){}},r=this.props,o=r.init,u=d(r,["init"]),i=o(a(t,u,function(){e=!0,n.stop()}));return n=i?S({},n,i):n,e&&n.stop(),n},Ft.prototype.applyMiddleware=function(t){return this.create(S({},this.props,{middleware:this.props.middleware?[t].concat(this.props.middleware):[t]}))},Ft.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=1===t.length?t[0]:ut.apply(void 0,t);return this.applyMiddleware(function(e){return function(t){return e(n(t))}})},Ft);function Ft(t){void 0===t&&(t={}),this.props=t}function Dt(t){return new Rt({init:t})}var Et=(Tt.prototype.applyMiddleware=function(t){return this.create(S({},this.props,{middleware:this.props.middleware?[t].concat(this.props.middleware):[t]}))},Tt.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=1===t.length?t[0]:ut.apply(void 0,t);return this.applyMiddleware(function(e){return function(t){return e(n(t))}})},Tt.prototype.while=function(r){return this.applyMiddleware(function(e,n){return function(t){return r(t)?e(t):n()}})},Tt.prototype.filter=function(n){return this.applyMiddleware(function(e){return function(t){return n(t)&&e(t)}})},Tt);function Tt(t){void 0===t&&(t={}),this.props=t}var Vt,Ut=(e(qt,Vt=Et),qt.prototype.complete=function(){this.subscribers.forEach(function(t){return t.complete()})},qt.prototype.error=function(e){this.subscribers.forEach(function(t){return t.error(e)})},qt.prototype.update=function(t){for(var e=0;e<this.subscribers.length;e++)this.subscribers[e].update(t)},qt.prototype.subscribe=function(t){var e=this,n=a(t,this.props);return this.subscribers.push(n),{unsubscribe:function(){var t=e.subscribers.indexOf(n);-1!==t&&e.subscribers.splice(t,1)}}},qt.prototype.stop=function(){this.parent&&this.parent.stop()},qt);function qt(){var t=null!==Vt&&Vt.apply(this,arguments)||this;return t.subscribers=[],t}var _t,Nt=(e(It,_t=Ut),It.prototype.create=function(t){return new It(t)},It);function It(){return null!==_t&&_t.apply(this,arguments)||this}var Wt,Xt,Yt=0,Bt="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),n=Math.max(0,16.7-(e-Yt));Yt=e+n,setTimeout(function(){return t(Yt)},n)};(Xt=Wt=Wt||{}).Read="read",Xt.Update="update",Xt.Render="render",Xt.PostRender="postRender",Xt.FixedUpdate="fixedUpdate";function Lt(t){return Jt=t}function zt(t){return ne[t].process(Zt)}function Gt(){return Zt}var Ht,$t=1/60*1e3,Kt=!0,Jt=!1,Qt=!1,Zt={delta:0,timestamp:0},te=[Wt.Read,Wt.Update,Wt.Render,Wt.PostRender],ee=te.reduce(function(t,e){var r,u,i,a,s,o,c,f,p,d=(r=Lt,u=[],s=!(i=[]),o=a=0,c=new WeakSet,f=new WeakSet,p={cancel:function(t){var e=i.indexOf(t);c.add(t),-1!==e&&i.splice(e,1)},process:function(t){var e,n;if(s=!0,u=(e=[i,u])[0],(i=e[1]).length=0,a=u.length)for(o=0;o<a;o++)(n=u[o])(t),!0!==f.has(n)||c.has(n)||(p.schedule(n),r(!0));s=!1},schedule:function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=n&&s,o=r?u:i;c.delete(t),e&&f.add(t),-1===o.indexOf(t)&&(o.push(t),r&&(a=u.length))}});return t.sync[e]=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),Jt||ie(),d.schedule(t,e,n),t},t.cancelSync[e]=function(t){return d.cancel(t)},t.steps[e]=d,t},{steps:{},sync:{},cancelSync:{}}),ne=ee.steps,re=ee.sync,oe=ee.cancelSync,ue=function(t){Jt=!1,Zt.delta=Kt?$t:Math.max(Math.min(t-Zt.timestamp,40),1),Kt||($t=Zt.delta),Zt.timestamp=t,Qt=!0,te.forEach(zt),Qt=!1,Jt&&(Kt=!1,Bt(ue))},ie=function(){Kt=Jt=!0,Qt||Bt(ue)},ae=(e(se,Ht=Ut),se.prototype.create=function(t){return new se(t)},se.prototype.get=function(){return this.current},se.prototype.getVelocity=function(){return this.getVelocityOfCurrent()},se.prototype.update=function(t){Ht.prototype.update.call(this,t),this.prev=this.current,this.updateCurrent(t);var e=Gt(),n=e.delta,r=e.timestamp;this.timeDelta=n,this.lastUpdated=r,re.postRender(this.scheduleVelocityCheck)},se.prototype.subscribe=function(t){var e=Ht.prototype.subscribe.call(this,t);return this.subscribers[this.subscribers.length-1].update(this.current),e},se.prototype.getSingleVelocity=function(t,e){return"number"==typeof t&&"number"==typeof e?Ct(t-e,this.timeDelta):Ct(parseFloat(t)-parseFloat(e),this.timeDelta)||0},se);function se(t){var e=Ht.call(this,t)||this;return e.scheduleVelocityCheck=function(){return re.postRender(e.velocityCheck)},e.velocityCheck=function(t){t.timestamp!==e.lastUpdated&&(e.prev=e.current)},e.prev=e.current=t.value||0,e.updateCurrent=function(t){return e.current=t},e.getVelocityOfCurrent=function(){return e.getSingleVelocity(e.current,e.prev)},t.initialSubscription&&e.subscribe(t.initialSubscription),e}function ce(n){function r(t,e){return void 0!==t&&!n[e](t)}var t=Object.keys(n);return{getVectorKeys:function(n){return t.reduce(function(t,e){return r(n[e],e)&&t.push(e),t},[])},testVectorProps:function(e){return e&&t.some(function(t){return r(e[t],t)})}}}function fe(e){return Me.find(function(t){return t.test(e)})}function pe(t,e){return t(e)}function de(t,e){var n=e.from,r=e.to,o=d(e,["from","to"]),u=fe(n)||fe(r),i=u.transform,a=u.parse;return t(S({},o,{from:"string"==typeof n?a(n):n,to:"string"==typeof r?a(r):r})).pipe(i)}function le(u){return function(t,e){var n=e.from,r=e.to,o=d(e,["from","to"]);return t(S({},o,{from:0,to:1})).pipe(u(n,r))}}function ve(r,t){var e=ce(t),o=e.testVectorProps,u=e.getVectorKeys;return function(t){if(!o(t))return r(t);var e=u(t),n=t[e[0]];return Pe(n)(r,t,e)}}function he(V){return void 0===V&&(V={}),Dt(function(t){function r(t){var e;void 0===t&&(t=!1),D=Re({from:O=(e=[M,O])[0],to:M=e[1],ease:p,reverseEase:t}).start(i)}function o(){E=Fe(Q(0,c,A)),D.seek(E)}function e(){T=!0,u=re.update(function(t){var e,n=t.delta;A+=n,o(),!(e=T&&c+b<A)||(!e||h||l||y)&&(A=A-c-b,h&&F<h?(F++,!0):l&&k<l?(k++,r(),!0):y&&j<y&&(r(++j%2!=0),!0))||(oe.update(u),a&&re.update(a,!1,!0))},!0)}function n(){T=!1,u&&oe.update(u)}var u,i=t.update,a=t.complete,s=V.duration,c=void 0===s?300:s,f=V.ease,p=void 0===f?bt:f,d=V.flip,l=void 0===d?0:d,v=V.loop,h=void 0===v?0:v,m=V.yoyo,y=void 0===m?0:m,g=V.repeatDelay,b=void 0===g?0:g,w=V.from,O=void 0===w?0:w,x=V.to,M=void 0===x?1:x,S=V.elapsed,A=void 0===S?0:S,P=V.flipCount,k=void 0===P?0:P,C=V.yoyoCount,j=void 0===C?0:C,R=V.loopCount,F=void 0===R?0:R,D=Re({from:O,to:M,ease:p}).start(i),E=0,T=!1;return e(),{isActive:function(){return T},getElapsed:function(){return xt(0,c,A)},getProgress:function(){return E},stop:function(){n()},pause:function(){return n(),this},resume:function(){return T||e(),this},seek:function(t){return A=Z(0,c,t),re.update(o,!1,!0),this},reverse:function(){return r(),this}}})}function me(t){var e,n,r,o,u=t.easings,i=t.ease,a=void 0===i?B:i,s=t.times,c=t.values,f=d(t,["easings","ease","times","values"]);u=Array.isArray(u)?u:(n=u,(e=c).map(function(){return n||bt}).splice(0,e.length-1)),s=s||(o=(r=c).length,r.map(function(t,e){return 0!==e?e/(o-1):0}));var p=u.map(function(t,e){return Re({from:c[e],to:c[e+1],ease:t})});return he(S({},f,{ease:a})).applyMiddleware(function(t){return e=p,n=t,o=(r=s).length,i=(u=o-1)-1,a=e.map(function(t){return t.start(n)}),function(t){t<=r[0]&&a[0].seek(0),t>=r[u]&&a[i].seek(1);for(var e=1;e<o&&!(r[e]>t||e===u);e++);var n=Q(r[e-1],r[e],t);a[e-1].seek(De(n))};var r,e,n,o,u,i,a})}function ye(t){var f=t.getCount,p=t.getFirst,d=t.getOutput,l=t.mapApi,v=t.setProp,h=t.startActions;return function(c){return Dt(function(t){function r(){return e(a)}var e=t.update,o=t.complete,u=t.error,i=f(c),a=d(),s=0,n=h(c,function(t,e){var n=!1;return t.start({complete:function(){n||(n=!0,++s===i&&re.update(o))},error:u,update:function(t){v(a,e,t),re.update(r,!1,!0)}})});return Object.keys(p(n)).reduce(function(t,e){return t[e]=l(n,e),t},{})})}}function ge(t,e){var n,r,o,u,i,a,s,c;return Array.isArray(e)?t.push.apply(t,(r=[],o=(n=e)[n.length-1],i=(u="number"==typeof o)?o:0,a=u?n.slice(0,-1):n,s=a.length,c=0,a.forEach(function(t,e){if(r.push(t),e!==s-1){var n=t.duration||300;c+=i,r.push("-"+(n-c))}}),r)):t.push(e),t}function be(t,e,n){var r=t.duration,o=t.easings,u=t.times,i=t.values,a=i.length,s=u[a-1],c=0===e.at?0:e.at/r,f=(e.at+e.duration)/r;if(0===n)i.push(e.from),u.push(c);else if(s!==c){void 0!==e.from&&(i.push(i[a-1]),u.push(c),o.push(B));var p=void 0!==e.from?e.from:i[a-1];i.push(p),u.push(c),o.push(B)}else void 0!==e.from&&(i.push(e.from),u.push(c),o.push(B));return i.push(e.to),u.push(f),o.push(e.ease||wt),t}function we(r,o,u){return Dt(function(t){var e=t.update,n=o.split(" ").map(function(t){return r.addEventListener(t,e,u),t});return{stop:function(){return n.forEach(function(t){return r.removeEventListener(t,e,u)})}}})}function Oe(){return{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}}function xe(t,e){return void 0===e&&(e=Oe()),e.clientX=e.x=t.clientX,e.clientY=e.y=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY,e}var Me=[w,b,g,O,x],Se=le(rt),Ae=le(jt),Pe=function(t){return"number"==typeof t?pe:Boolean(fe(t))?de:E(t)?Se:_.test(t)?Ae:pe},ke=ve(function(b){return void 0===b&&(b={}),Dt(function(t){var o=t.complete,u=t.update,e=b.velocity,n=void 0===e?0:e,r=b.from,i=void 0===r?0:r,a=b.power,s=void 0===a?.8:a,c=b.timeConstant,f=void 0===c?350:c,p=b.restDelta,d=void 0===p?.5:p,l=b.modifyTarget,v=0,h=s*n,m=Math.round(i+h),y=void 0===l?m:l(m),g=re.update(function(t){var e=t.delta;v+=e;var n=-h*Math.exp(-v/f),r=d<n||n<-d;u(r?y+n:y),r||(oe.update(g),o())},!0);return{stop:function(){return oe.update(g)}}})},{from:m.test,modifyTarget:function(t){return"function"==typeof t},velocity:m.test}),Ce=ve(function(A){return void 0===A&&(A={}),Dt(function(t){var s=t.update,c=t.complete,e=A.velocity,f=void 0===e?0:e,n=A.from,r=void 0===n?0:n,o=A.to,p=void 0===o?0:o,u=A.stiffness,d=void 0===u?100:u,i=A.damping,l=void 0===i?10:i,a=A.mass,v=void 0===a?1:a,h=A.restSpeed,m=void 0===h?.01:h,y=A.restDelta,g=void 0===y?.01:y,b=f?-f/1e3:0,w=0,O=p-r,x=r,M=x,S=re.update(function(t){var e=t.delta;w+=e;var n=l/(2*Math.sqrt(d*v)),r=Math.sqrt(d/v)/1e3;if(M=x,n<1){var o=Math.exp(-n*r*w),u=r*Math.sqrt(1-n*n);x=p-o*((b+n*r*O)/u*Math.sin(u*w)+O*Math.cos(u*w))}else{o=Math.exp(-r*w);x=p-o*(O+(b+r*O)*w)}f=Ct(x-M,e);var i=Math.abs(f)<=m,a=Math.abs(p-x)<=g;i&&a?(s(x=p),oe.update(S),c()):s(x)},!0);return{stop:function(){return oe.update(S)}}})},{from:m.test,to:m.test,stiffness:m.test,damping:m.test,mass:m.test,velocity:m.test}),je=ve(function(t){var e=t.from,v=void 0===e?0:e,n=t.velocity,h=void 0===n?0:n,m=t.min,y=t.max,r=t.power,g=void 0===r?.8:r,o=t.timeConstant,b=void 0===o?700:o,u=t.bounceStiffness,w=void 0===u?500:u,i=t.bounceDamping,O=void 0===i?10:i,a=t.restDelta,x=void 0===a?1:a,M=t.modifyTarget;return Dt(function(t){function r(t){return void 0!==m&&t<=m}function o(t){return void 0!==y&&y<=t}function e(t){return r(t)||o(t)}function n(t){var e,n;a(t),c=f,h=Ct((f=t)-c,Gt().delta),i&&!p&&(n=h,r(e=t)&&n<0||o(e)&&0<n)&&d({from:t,velocity:h})}function u(t,e){i&&i.stop(),i=t.start({update:n,complete:function(){(e||s)()}})}var i,a=t.update,s=t.complete,c=v,f=v,p=!1,d=function(t){p=!0,u(Ce(S({},t,{to:r(t.from)?m:y,stiffness:w,damping:O,restDelta:x})))};if(e(v))d({from:v,velocity:h});else if(0!==h){var l=ke({from:v,velocity:h,timeConstant:b,power:g,restDelta:e(v)?20:x,modifyTarget:M});u(l,function(){e(f)?d({from:f,velocity:h}):s()})}else s();return{stop:function(){return i&&i.stop()}}})},{from:m.test,velocity:m.test,min:m.test,max:m.test,damping:m.test,stiffness:m.test,modifyTarget:function(t){return"function"==typeof t}}),Re=ve(function(t){var e=t.from,n=void 0===e?0:e,r=t.to,o=void 0===r?1:r,u=t.ease,i=void 0===u?B:u,a=t.reverseEase;return void 0!==a&&a&&(i=yt(i)),Dt(function(t){var e=t.update;return{seek:function(t){return e(t)}}}).pipe(i,function(t){return Z(n,o,t)})},{ease:function(t){return"function"==typeof t},from:m.test,to:m.test}),Fe=xt(0,1),De=xt(0,1),Ee=ve(function(m){return void 0===m&&(m={}),Dt(function(t){var r=t.complete,o=t.update,e=m.acceleration,u=void 0===e?0:e,n=m.friction,i=void 0===n?0:n,a=m.velocity,s=void 0===a?0:a,c=m.springStrength,f=m.to,p=m.restSpeed,d=void 0===p?.001:p,l=m.from,v=void 0===l?0:l,h=re.update(function(t){var e=t.delta,n=Math.max(e,16);u&&(s+=kt(u,n)),i&&(s*=Math.pow(1-i,n/100)),void 0!==c&&void 0!==f&&(s+=(f-v)*kt(c,n));v+=kt(s,n),o(v),!1!==d&&(!s||Math.abs(s)<=d)&&(oe.update(h),r())},!0);return{set:function(t){return v=t,this},setAcceleration:function(t){return u=t,this},setFriction:function(t){return i=t,this},setSpringStrength:function(t){return c=t,this},setSpringTarget:function(t){return f=t,this},setVelocity:function(t){return s=t,this},stop:function(){return oe.update(h)}}})},{acceleration:m.test,friction:m.test,velocity:m.test,from:m.test,to:m.test,springStrength:m.test}),Te=ye({getOutput:function(){return{}},getCount:function(t){return Object.keys(t).length},getFirst:function(t){return t[Object.keys(t)[0]]},mapApi:function(o,u){return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return Object.keys(o).reduce(function(t,e){var n;return o[e][u]&&(r[0]&&void 0!==r[0][e]?t[e]=o[e][u](r[0][e]):t[e]=(n=o[e])[u].apply(n,r)),t},{})}},setProp:function(t,e,n){return t[e]=n},startActions:function(n,r){return Object.keys(n).reduce(function(t,e){return t[e]=r(n[e],e),t},{})}}),Ve=[Oe()],Ue=!1;if("undefined"!=typeof document){we(document,"touchstart touchmove",{passive:!0,capture:!0}).start(function(t){var e=t.touches;Ue=!0;for(var n=e.length,r=Ve.length=0;r<n;r++){var o=e[r];Ve.push(xe(o))}})}function qe(t){var e=void 0===t?{}:t,n=e.preventDefault,f=void 0===n||n,r=e.scale,p=void 0===r?1:r,o=e.rotate,d=void 0===o?0:o;return Dt(function(t){var o=t.update,u={touches:Ve,scale:p,rotate:d},i=0,a=0,s=1<Ve.length;if(s){var e=Ve[0],n=Ve[1];i=J(e,n),a=z(e,n)}function r(){if(s){var t=Ve[0],e=Ve[1],n=J(t,e),r=z(t,e);u.scale=p*(n/i),u.rotate=d+(r-a)}o(u)}var c=we(document,"touchmove",{passive:!f}).start(function(t){(f||1<t.touches.length)&&t.preventDefault(),re.update(r)});return Ue&&re.update(r),{stop:function(){oe.update(r),c.stop()}}})}var _e=Oe(),Ne=!1;if("undefined"!=typeof document){we(document,"mousedown mousemove",!0).start(function(t){Ne=!0,xe(t,_e)})}function Ie(t){var e=(void 0===t?{}:t).preventDefault,o=void 0===e||e;return Dt(function(t){function e(){return n(_e)}var n=t.update,r=we(document,"mousemove").start(function(t){o&&t.preventDefault(),re.update(e)});return Ne&&re.update(e),{stop:function(){oe.update(e),r.stop()}}})}function We(t){return t[0]}function Xe(t){return void 0===t&&(t={}),Ue?qe(t).pipe(function(t){return t.touches},We):Ie(t)}function Ye(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return Dt(function(t){var e,n=t.update,r=t.complete,o=0,u=function(){e=i[o].start({complete:function(){(++o>=i.length?r:u)()},update:n})};return u(),{stop:function(){return e&&e.stop()}}})}function Be(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ze(t)}function Le(r){return Dt(function(t){var e=t.complete,n=setTimeout(e,r);return{stop:function(){return clearTimeout(n)}}})}var ze=ye({getOutput:function(){return[]},getCount:function(t){return t.length},getFirst:function(t){return t[0]},mapApi:function(e,r){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.map(function(t,e){if(t[r])return Array.isArray(n[0])?t[r](n[0][e]):t[r].apply(t,n)})}},setProp:function(t,e,n){return t[e]=n},startActions:function(t,n){return t.map(function(t,e){return n(t,e)})}});t.Action=Rt,t.ValueReaction=ae,t.action=Dt,t.chain=Ye,t.composite=Te,t.crossfade=function(e,n){return Dt(function(r){var o=0,t=Be(e,n).start(S({},r,{update:function(t){var e=t[0],n=t[1];r.update(Z(e,n,o))}}));return{setBalance:function(t){return o=t},stop:function(){return t.stop()}}})},t.decay=ke,t.delay=Le,t.everyFrame=function(){return Dt(function(t){var n=t.update,r=0,e=re.update(function(t){var e=t.timestamp;n(e-(r=r||e))},!0,!0);return{stop:function(){return oe.update(e)}}})},t.inertia=je,t.keyframes=me,t.listen=we,t.merge=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Dt(function(e){var t=n.map(function(t){return t.start(e)});return{stop:function(){return t.forEach(function(t){return t.stop()})}}})},t.mouse=Ie,t.multicast=function(){return new Nt},t.multitouch=qe,t.parallel=Be,t.physics=Ee,t.pointer=function(t){void 0===t&&(t={});var e=t.x,n=t.y,r=d(t,["x","y"]);if(void 0===e&&void 0===n)return Xe(r);var o=G(e||0),u=G(n||0),i={x:0,y:0};return Xe(r).pipe(function(t){return i.x=o(t.x),i.y=u(t.y),i})},t.schedule=function(i,a){return Dt(function(t){var e,n=t.update,r=t.complete,o=i.start({update:function(){return void 0!==e&&n(e)},complete:r}),u=a.start({update:function(t){return e=t},complete:r});return{stop:function(){o.stop(),u.stop()}}})},t.spring=Ce,t.stagger=function(t,r){var o="number"==typeof r,e=t.map(function(t,e){var n=o?r*e:r(e);return Ye(Le(n),t)});return Be.apply(void 0,e)},t.styler=function(){},t.timeline=function(t,e){var n=void 0===e?{}:e,r=n.duration,o=n.elapsed,u=n.ease,i=n.loop,a=n.flip,s=n.yoyo,c=0,f=0,p=t.reduce(ge,[]),d=[];p.forEach(function(t){if("string"==typeof t)c+=parseFloat(t);else if("number"==typeof t)c=t;else{var e=S({},t,{at:c});e.duration=void 0===e.duration?300:e.duration,d.push(e),c+=e.duration,f=Math.max(f,e.at+e.duration)}});for(var l={},v=d.length,h=0;h<v;h++){var m=d[h],y=m.track;if(void 0===y)throw new Error("No track defined");l.hasOwnProperty(y)||(l[y]=[]),l[y].push(m)}var g={};for(var b in l)if(l.hasOwnProperty(b)){var w=l[b].reduce(be,{duration:f,easings:[],times:[],values:[]});g[b]=me(S({},w,{duration:r||f,ease:u,elapsed:o,loop:i,yoyo:s,flip:a}))}return Te(g)},t.tween=he,t.value=function(t,e){return new ae({value:t,initialSubscription:e})},Object.defineProperty(t,"__esModule",{value:!0})});