!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).popmotion={})}(this,function(t){"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function e(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var M=function(){return(M=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function d(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function r(e,r){return function(t){return Math.max(Math.min(t,r),e)}}function f(t){return t%1?Number(t.toFixed(5)):t}function o(e){return{test:function(t){return"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}}function u(t){return void 0!==t.red}function i(t){return void 0!==t.hue}function a(u){return function(t){if("string"!=typeof t)return t;for(var e,r={},n=(e=t).substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(/,\s*/),o=0;o<4;o++)r[u[o]]=void 0!==n[o]?parseFloat(n[o]):1;return r}}var s=function(){return(s=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},c=/(-)?(\d[\d\.]*)/g,p=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,l=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,v={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},h=(s({},v,{transform:r(0,1)}),s({},v,{default:1}),o("deg")),m=o("%"),y=o("px"),g=o("vh"),b=o("vw"),w=(s({},m,{parse:function(t){return m.parse(t)/100},transform:function(t){return m.transform(100*t)}}),r(0,255)),O=s({},v,{transform:function(t){return Math.round(w(t))}});function x(t,e){return t.startsWith(e)&&l.test(t)}function A(t){return"number"==typeof t?0:t}var P,C,S={test:function(t){return"string"==typeof t?x(t,"rgb"):u(t)},parse:a(["red","green","blue","alpha"]),transform:function(t){var e,r,n,o,u,i=t.red,a=t.green,s=t.blue,c=t.alpha;return e={red:O.transform(i),green:O.transform(a),blue:O.transform(s),alpha:f(c)},r=e.red,n=e.green,o=e.blue,u=e.alpha,"rgba("+r+", "+n+", "+o+", "+(void 0===u?1:u)+")"}},V={test:function(t){return"string"==typeof t?x(t,"hsl"):i(t)},parse:a(["hue","saturation","lightness","alpha"]),transform:function(t){var e,r,n,o,u,i=t.hue,a=t.saturation,s=t.lightness,c=t.alpha;return e={hue:Math.round(i),saturation:m.transform(f(a)),lightness:m.transform(f(s)),alpha:f(c)},r=e.hue,n=e.saturation,o=e.lightness,u=e.alpha,"hsla("+r+", "+n+", "+o+", "+(void 0===u?1:u)+")"}},j=s({},S,{test:function(t){return"string"==typeof t&&x(t,"#")},parse:function(t){var e="",r="",n="";return 4<t.length?(e=t.substr(1,2),r=t.substr(3,2),n=t.substr(5,2)):(e=t.substr(1,1),r=t.substr(2,1),n=t.substr(3,1),e+=e,r+=r,n+=n),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),k=function(t){return"string"==typeof t&&l.test(t)||u(t)||i(t)},D=function(t){return S.test(t)?S.parse(t):V.test(t)?V.parse(t):j.test(t)?j.parse(t):t},E=function(t){return u(t)?S.transform(t):i(t)?V.transform(t):t},F="${c}",R="${n}",T={test:function(t){if("string"!=typeof t||!isNaN(t))return!1;var e=0,r=t.match(c),n=t.match(p);return r&&(e+=r.length),n&&(e+=n.length),0<e},parse:function(t){var e=t,r=[],n=e.match(p);n&&(e=e.replace(p,F),r.push.apply(r,n.map(D)));var o=e.match(c);return o&&r.push.apply(r,o.map(v.parse)),r},createTransformer:function(t){var n=t,o=0,e=t.match(p),u=e?e.length:0;if(e)for(var r=0;r<u;r++)n=n.replace(e[r],F),o++;var i=n.match(c),a=i?i.length:0;if(i)for(r=0;r<a;r++)n=n.replace(i[r],R),o++;return function(t){for(var e=n,r=0;r<o;r++)e=e.replace(r<u?F:R,(r<u?E:f)(t[r]));return e}},getAnimatableNone:function(t){var e=T.parse(t);return T.createTransformer(t)(e.map(A))}},_=0,q="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),r=Math.max(0,16.7-(e-_));_=e+r,setTimeout(function(){return t(_)},r)};(C=P=P||{}).Read="read",C.Update="update",C.Render="render",C.PostRender="postRender",C.FixedUpdate="fixedUpdate";function N(t){return it=t}function L(t){return pt[t].process(st)}function U(e){return function(t){return 1-e(1-t)}}function I(t){return t}function X(t){return"number"==typeof t}function Y(t,e){return void 0===e&&(e=wt),180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}function B(e,r){var n=!0;return void 0===r&&(r=e,n=!1),function(t){return n?t-e+r:(e=t,n=!0,r)}}function z(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")}function W(t){return z(t)&&t.hasOwnProperty("z")}function G(t,e){return Math.abs(t-e)}function H(t,e){if(void 0===e&&(e=wt),X(t)&&X(e))return G(t,e);if(z(t)&&z(e)){var r=G(t.x,e.x),n=G(t.y,e.y),o=W(t)&&W(e)?G(t.z,e.z):0;return Math.sqrt(Math.pow(r,2)+Math.pow(n,2)+Math.pow(o,2))}return 0}function $(t,e,r){var n=e-t;return 0==n?1:(r-t)/n}function K(t,e,r){return-r*t+r*e+t}function J(t,e,r){var n=t*t,o=e*e;return Math.sqrt(Math.max(0,r*(o-n)+n))}function Q(e){return xt.find(function(t){return t.test(e)})}function Z(t){return"'"+t+"' is not an animatable color. Use the equivalent color code instead."}function tt(t,e){var r=Q(t),n=Q(e);Z(t),Z(e),r.transform,n.transform;var o=r.parse(t),u=n.parse(e),i=Mt({},o),a=r===V?K:J;return function(t){for(var e in i)"alpha"!==e&&(i[e]=a(o[e],u[e],t));return i.alpha=K(o.alpha,u.alpha,t),r.transform(i)}}function et(e,r){return function(t){return r(e(t))}}function rt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(et)}var nt,ot=1/60*1e3,ut=!0,it=!1,at=!1,st={delta:0,timestamp:0},ct=[P.Read,P.Update,P.Render,P.PostRender],ft=ct.reduce(function(t,e){var n,u,i,a,s,o,c,f,p,d=(n=N,u=[],s=!(i=[]),o=a=0,c=new WeakSet,f=new WeakSet,p={cancel:function(t){var e=i.indexOf(t);c.add(t),-1!==e&&i.splice(e,1)},process:function(t){var e,r;if(s=!0,u=(e=[i,u])[0],(i=e[1]).length=0,a=u.length)for(o=0;o<a;o++)(r=u[o])(t),!0!==f.has(r)||c.has(r)||(p.schedule(r),n(!0));s=!1},schedule:function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=!1);var n=r&&s,o=n?u:i;c.delete(t),e&&f.add(t),-1===o.indexOf(t)&&(o.push(t),n&&(a=u.length))}});return t.sync[e]=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),it||ht(),d.schedule(t,e,r),t},t.cancelSync[e]=function(t){return d.cancel(t)},t.steps[e]=d,t},{steps:{},sync:{},cancelSync:{}}),pt=ft.steps,dt=ft.sync,lt=ft.cancelSync,vt=function(t){it=!1,st.delta=ut?ot:Math.max(Math.min(t-st.timestamp,40),1),ut||(ot=st.delta),st.timestamp=t,at=!0,ct.forEach(L),at=!1,it&&(ut=!1,q(vt))},ht=function(){ut=it=!0,at||q(vt)},mt=U,yt=function(e){return function(t){return Math.pow(t,e)}}(2),gt=U(yt),bt=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}}(yt),wt={x:0,y:0,z:0},Ot=(nt=function(t,e,r){return Math.min(Math.max(r,t),e)},function(e,r,t){return void 0!==t?nt(e,r,t):function(t){return nt(e,r,t)}}),Mt=function(){return(Mt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},xt=[j,S,V];function At(t,o){var r=t.slice(),n=r.length,u=t.map(function(t,e){return r=t,n=o[e],X(r)?function(t){return K(r,n,t)}:(k(r)?tt:Vt)(r,n);var r,n});return function(t){for(var e=0;e<n;e++)r[e]=u[e](t);return r}}function Pt(t){for(var e=T.parse(t),r=e.length,n=0,o=0,u=0,i=0;i<r;i++)n||"number"==typeof e[i]?n++:void 0!==e[i].hue?u++:o++;return{parsed:e,numNumbers:n,numRGB:o,numHSL:u}}function Ct(t,e){return X(t)?t/(1e3/e):0}function St(t,e){return e?t*(1e3/e):0}var Vt=function(t,e){var r=T.createTransformer(e),n=Pt(t),o=Pt(e);return n.numHSL===o.numHSL&&n.numRGB===o.numRGB&&(n.numNumbers,o.numNumbers),rt(At(n.parsed,o.parsed),r)},jt=(Ot(0,1),kt.prototype.applyMiddleware=function(t){return this.create(M({},this.props,{middleware:this.props.middleware?[t].concat(this.props.middleware):[t]}))},kt.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=1===t.length?t[0]:rt.apply(void 0,t);return this.applyMiddleware(function(e){return function(t){return e(r(t))}})},kt.prototype.while=function(n){return this.applyMiddleware(function(e,r){return function(t){return n(t)?e(t):r()}})},kt.prototype.filter=function(r){return this.applyMiddleware(function(e){return function(t){return r(t)&&e(t)}})},kt);function kt(t){void 0===t&&(t={}),this.props=t}function Dt(t,e,r){var n=e.middleware;return new Ft({middleware:n,onComplete:r},"function"==typeof t?{update:t}:t)}var Et,Ft=function(t,e){var r=this,n=t.middleware,o=t.onComplete;this.isActive=!0,this.update=function(t){r.observer.update&&r.updateObserver(t)},this.complete=function(){r.observer.complete&&r.isActive&&r.observer.complete(),r.onComplete&&r.onComplete(),r.isActive=!1},this.error=function(t){r.observer.error&&r.isActive&&r.observer.error(t),r.isActive=!1},this.observer=e,this.updateObserver=function(t){return e.update(t)},this.onComplete=o,e.update&&n&&n.length&&n.forEach(function(t){return r.updateObserver=t(r.updateObserver,r.complete)})},Rt=(e(Tt,Et=jt),Tt.prototype.create=function(t){return new Tt(t)},Tt.prototype.start=function(t){void 0===t&&(t={});var e=!1,r={stop:function(){}},n=this.props,o=n.init,u=d(n,["init"]),i=o(Dt(t,u,function(){e=!0,r.stop()}));return r=i?M({},r,i):r,t.registerParent&&t.registerParent(r),e&&r.stop(),r},Tt);function Tt(){return null!==Et&&Et.apply(this,arguments)||this}function _t(t){return new Rt({init:t})}var qt,Nt=(e(Lt,qt=jt),Lt.prototype.complete=function(){this.subscribers.forEach(function(t){return t.complete()})},Lt.prototype.error=function(e){this.subscribers.forEach(function(t){return t.error(e)})},Lt.prototype.update=function(t){for(var e=0;e<this.subscribers.length;e++)this.subscribers[e].update(t)},Lt.prototype.subscribe=function(t){var e=this,r=Dt(t,this.props);return this.subscribers.push(r),{unsubscribe:function(){var t=e.subscribers.indexOf(r);-1!==t&&e.subscribers.splice(t,1)}}},Lt.prototype.stop=function(){this.parent&&this.parent.stop()},Lt.prototype.registerParent=function(t){this.stop(),this.parent=t},Lt);function Lt(){var t=null!==qt&&qt.apply(this,arguments)||this;return t.subscribers=[],t}var Ut,It=(e(Xt,Ut=Nt),Xt.prototype.create=function(t){return new Xt(t)},Xt);function Xt(){return null!==Ut&&Ut.apply(this,arguments)||this}var Yt,Bt=(e(zt,Yt=Nt),zt.prototype.create=function(t){return new zt(t)},zt.prototype.get=function(){return this.current},zt.prototype.getVelocity=function(){return this.getVelocityOfCurrent()},zt.prototype.update=function(t){Yt.prototype.update.call(this,t),this.prev=this.current,this.updateCurrent(t);var e=st.delta,r=st.timestamp;this.timeDelta=e,this.lastUpdated=r,dt.postRender(this.scheduleVelocityCheck)},zt.prototype.subscribe=function(t){var e=Yt.prototype.subscribe.call(this,t);return this.subscribers[this.subscribers.length-1].update(this.current),e},zt.prototype.getSingleVelocity=function(t,e){return"number"==typeof t&&"number"==typeof e?St(t-e,this.timeDelta):St(parseFloat(t)-parseFloat(e),this.timeDelta)||0},zt.prototype.getListVelocity=function(){var r=this;return this.current.map(function(t,e){return r.getSingleVelocity(t,r.prev[e])})},zt.prototype.getMapVelocity=function(){var t={};for(var e in this.current)this.current.hasOwnProperty(e)&&(t[e]=this.getSingleVelocity(this.current[e],this.prev[e]));return t},zt);function zt(t){var e,r,n,o=Yt.call(this,t)||this;return o.scheduleVelocityCheck=function(){return dt.postRender(o.velocityCheck)},o.velocityCheck=function(t){t.timestamp!==o.lastUpdated&&(o.prev=o.current)},o.prev=o.current=t.value||0,r=o.current,"string"==(n=typeof r)||"number"==n?(o.updateCurrent=function(t){return o.current=t},o.getVelocityOfCurrent=function(){return o.getSingleVelocity(o.current,o.prev)}):(e=o.current,Array.isArray(e)?(o.updateCurrent=function(t){return o.current=t.slice()},o.getVelocityOfCurrent=function(){return o.getListVelocity()}):(o.updateCurrent=function(t){for(var e in o.current={},t)t.hasOwnProperty(e)&&(o.current[e]=t[e])},o.getVelocityOfCurrent=function(){return o.getMapVelocity()})),t.initialSubscription&&o.subscribe(t.initialSubscription),o}function Wt(t,e){return new Bt({value:t,initialSubscription:e})}function Gt(t){var f=t.getCount,p=t.getFirst,d=t.getOutput,l=t.mapApi,v=t.setProp,h=t.startActions;return function(c){return _t(function(t){function n(){return e(a)}var e=t.update,o=t.complete,u=t.error,i=f(c),a=d(),s=0,r=h(c,function(t,e){var r=!1;return t.start({complete:function(){r||(r=!0,++s===i&&dt.update(o))},error:u,update:function(t){v(a,e,t),dt.update(n,!1,!0)}})});return Object.keys(p(r)).reduce(function(t,e){return t[e]=l(r,e),t},{})})}}function Ht(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pe(t)}function $t(r){function n(t,e){return void 0!==t&&!r[e](t)}var t=Object.keys(r);return{getVectorKeys:function(r){return t.reduce(function(t,e){return n(r[e],e)&&t.push(e),t},[])},testVectorProps:function(e){return e&&t.some(function(t){return n(e[t],t)})}}}function Kt(e){return de.find(function(t){return t.test(e)})}function Jt(t,e){return t(e)}function Qt(o,u,i){var t=i[0],e=u[t].map(function(t,e){var r,n=i.reduce((r=e,function(t,e){return t[e]=t[e][r],t}),M({},u));return he(t)(o,n)});return Ht.apply(void 0,e)}function Zt(o,u,i){var a=i[0],t=Object.keys(u[a]).reduce(function(t,e){var r,n=i.reduce((r=e,function(t,e){return t[e]=t[e][r],t}),M({},u));return t[e]=he(u[a][e])(o,n),t},{});return fe(t)}function te(t,e){var r=e.from,n=e.to,o=d(e,["from","to"]),u=Kt(r)||Kt(n),i=u.transform,a=u.parse;return t(M({},o,{from:"string"==typeof r?a(r):r,to:"string"==typeof n?a(n):n})).pipe(i)}function ee(u){return function(t,e){var r=e.from,n=e.to,o=d(e,["from","to"]);return t(M({},o,{from:0,to:1})).pipe(u(r,n))}}function re(n,t){var e=$t(t),o=e.testVectorProps,u=e.getVectorKeys;return function(t){if(!o(t))return n(t);var e=u(t),r=t[e[0]];return he(r)(n,t,e)}}function ne(T){return void 0===T&&(T={}),_t(function(t){function n(t){var e;void 0===t&&(t=!1),E=be({from:O=(e=[x,O])[0],to:x=e[1],ease:p,reverseEase:t}).start(i)}function o(){F=we($(0,c,P)),E.seek(F)}function e(){R=!0,u=dt.update(function(t){var e,r=t.delta;P+=r,o(),!(e=R&&c+b<P)||(!e||h||l||y)&&(P=c-(P-b),h&&D<h?(D++,!0):l&&S<l?(S++,n(),!0):y&&j<y&&(n(++j%2!=0),!0))||(lt.update(u),a&&dt.update(a,!1,!0))},!0)}function r(){R=!1,u&&lt.update(u)}var u,i=t.update,a=t.complete,s=T.duration,c=void 0===s?300:s,f=T.ease,p=void 0===f?gt:f,d=T.flip,l=void 0===d?0:d,v=T.loop,h=void 0===v?0:v,m=T.yoyo,y=void 0===m?0:m,g=T.repeatDelay,b=void 0===g?0:g,w=T.from,O=void 0===w?0:w,M=T.to,x=void 0===M?1:M,A=T.elapsed,P=void 0===A?0:A,C=T.flipCount,S=void 0===C?0:C,V=T.yoyoCount,j=void 0===V?0:V,k=T.loopCount,D=void 0===k?0:k,E=be({from:O,to:x,ease:p}).start(i),F=0,R=!1;return e(),{isActive:function(){return R},getElapsed:function(){return Ot(0,c,P)},getProgress:function(){return F},stop:function(){r()},pause:function(){return r(),this},resume:function(){return R||e(),this},seek:function(t){return P=K(0,c,t),dt.update(o,!1,!0),this},reverse:function(){return n(),this}}})}function oe(t){var e,r,n,o,u=t.easings,i=t.ease,a=void 0===i?I:i,s=t.times,c=t.values,f=d(t,["easings","ease","times","values"]);u=Array.isArray(u)?u:(r=u,(e=c).map(function(){return r||gt}).splice(0,e.length-1)),s=s||(o=(n=c).length,n.map(function(t,e){return 0!==e?e/(o-1):0}));var p=u.map(function(t,e){return be({from:c[e],to:c[e+1],ease:t})});return ne(M({},f,{ease:a})).applyMiddleware(function(t){return e=p,r=t,o=(n=s).length,i=(u=o-1)-1,a=e.map(function(t){return t.start(r)}),function(t){t<=n[0]&&a[0].seek(0),t>=n[u]&&a[i].seek(1);for(var e=1;e<o&&!(n[e]>t||e===u);e++);var r=$(n[e-1],n[e],t);a[e-1].seek(Oe(r))};var n,e,r,o,u,i,a})}function ue(t,e){var r,n,o,u,i,a,s,c;return Array.isArray(e)?t.push.apply(t,(n=[],o=(r=e)[r.length-1],i=(u="number"==typeof o)?o:0,a=u?r.slice(0,-1):r,s=a.length,c=0,a.forEach(function(t,e){if(n.push(t),e!==s-1){var r=t.duration||300;c+=i,n.push("-"+(r-c))}}),n)):t.push(e),t}function ie(t,e,r){var n=t.duration,o=t.easings,u=t.times,i=t.values,a=i.length,s=u[a-1],c=0===e.at?0:e.at/n,f=(e.at+e.duration)/n;if(0===r)i.push(e.from),u.push(c);else if(s!==c){void 0!==e.from&&(i.push(i[a-1]),u.push(c),o.push(I));var p=void 0!==e.from?e.from:i[a-1];i.push(p),u.push(c),o.push(I)}else void 0!==e.from&&(i.push(e.from),u.push(c),o.push(I));return i.push(e.to),u.push(f),o.push(e.ease||bt),t}function ae(n,o,u){return _t(function(t){var e=t.update,r=o.split(" ").map(function(t){return n.addEventListener(t,e,u),t});return{stop:function(){return r.forEach(function(t){return n.removeEventListener(t,e,u)})}}})}function se(){return{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}}function ce(t,e){return void 0===e&&(e=se()),e.clientX=e.x=t.clientX,e.clientY=e.y=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY,e}var fe=Gt({getOutput:function(){return{}},getCount:function(t){return Object.keys(t).length},getFirst:function(t){return t[Object.keys(t)[0]]},mapApi:function(o,u){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Object.keys(o).reduce(function(t,e){var r;return o[e][u]&&(n[0]&&void 0!==n[0][e]?t[e]=o[e][u](n[0][e]):t[e]=(r=o[e])[u].apply(r,n)),t},{})}},setProp:function(t,e,r){return t[e]=r},startActions:function(r,n){return Object.keys(r).reduce(function(t,e){return t[e]=n(r[e],e),t},{})}}),pe=Gt({getOutput:function(){return[]},getCount:function(t){return t.length},getFirst:function(t){return t[0]},mapApi:function(e,n){return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return e.map(function(t,e){if(t[n])return Array.isArray(r[0])?t[n](r[0][e]):t[n].apply(t,r)})}},setProp:function(t,e,r){return t[e]=r},startActions:function(t,r){return t.map(function(t,e){return r(t,e)})}}),de=[y,m,h,g,b],le=ee(tt),ve=ee(Vt),he=function(t){return"number"==typeof t?Jt:Array.isArray(t)?Qt:Boolean(Kt(t))?te:k(t)?le:T.test(t)?ve:"object"==typeof t?Zt:Jt},me=re(function(b){return void 0===b&&(b={}),_t(function(t){var o=t.complete,u=t.update,e=b.velocity,r=void 0===e?0:e,n=b.from,i=void 0===n?0:n,a=b.power,s=void 0===a?.8:a,c=b.timeConstant,f=void 0===c?350:c,p=b.restDelta,d=void 0===p?.5:p,l=b.modifyTarget,v=0,h=s*r,m=Math.round(i+h),y=void 0===l?m:l(m),g=dt.update(function(t){var e=t.delta;v+=e;var r=-h*Math.exp(-v/f),n=d<r||r<-d;u(n?y+r:y),n||(lt.update(g),o())},!0);return{stop:function(){return lt.update(g)}}})},{from:v.test,modifyTarget:function(t){return"function"==typeof t},velocity:v.test}),ye=re(function(P){return void 0===P&&(P={}),_t(function(t){var s=t.update,c=t.complete,e=P.velocity,f=void 0===e?0:e,r=P.from,n=void 0===r?0:r,o=P.to,p=void 0===o?0:o,u=P.stiffness,d=void 0===u?100:u,i=P.damping,l=void 0===i?10:i,a=P.mass,v=void 0===a?1:a,h=P.restSpeed,m=void 0===h?.01:h,y=P.restDelta,g=void 0===y?.01:y,b=f?-f/1e3:0,w=0,O=p-n,M=n,x=M,A=dt.update(function(t){var e=t.delta;w+=e;var r=l/(2*Math.sqrt(d*v)),n=Math.sqrt(d/v)/1e3;if(x=M,r<1){var o=Math.exp(-r*n*w),u=n*Math.sqrt(1-r*r);M=p-o*((b+r*n*O)/u*Math.sin(u*w)+O*Math.cos(u*w))}else{o=Math.exp(-n*w);M=p-o*(O+(b+n*O)*w)}f=St(M-x,e);var i=Math.abs(f)<=m,a=Math.abs(p-M)<=g;i&&a?(s(M=p),lt.update(A),c()):s(M)},!0);return{stop:function(){return lt.update(A)}}})},{from:v.test,to:v.test,stiffness:v.test,damping:v.test,mass:v.test,velocity:v.test}),ge=re(function(t){var e=t.from,d=void 0===e?0:e,r=t.velocity,l=void 0===r?0:r,v=t.min,h=t.max,n=t.power,m=void 0===n?.8:n,o=t.timeConstant,y=void 0===o?700:o,u=t.bounceStiffness,g=void 0===u?500:u,i=t.bounceDamping,b=void 0===i?10:i,a=t.restDelta,w=void 0===a?1:a,O=t.modifyTarget;return _t(function(t){function o(t){return void 0!==v&&t<=v}function u(t){return void 0!==h&&h<=t}function e(t){return o(t)||u(t)}function r(t,e){a&&a.stop(),a=t.start({update:function(t){return c.update(t)},complete:function(){(e||n)()}})}function i(t){f=!0,r(ye(M({},t,{to:o(t.from)?v:h,stiffness:g,damping:b,restDelta:w})))}var a,s=t.update,n=t.complete,c=Wt(d),f=!1;if(c.subscribe(function(t){s(t);var e,r,n=c.getVelocity();a&&!f&&(r=n,o(e=t)&&r<0||u(e)&&0<r)&&i({from:t,velocity:n})}),e(d))i({from:d,velocity:l});else if(0!==l){var p=me({from:d,velocity:l,timeConstant:y,power:m,restDelta:e(d)?20:w,modifyTarget:O});r(p,function(){var t=c.get();e(t)?i({from:t,velocity:c.getVelocity()}):n()})}else n();return{stop:function(){return a&&a.stop()}}})},{from:v.test,velocity:v.test,min:v.test,max:v.test,damping:v.test,stiffness:v.test,modifyTarget:function(t){return"function"==typeof t}}),be=re(function(t){var e=t.from,r=void 0===e?0:e,n=t.to,o=void 0===n?1:n,u=t.ease,i=void 0===u?I:u,a=t.reverseEase;return void 0!==a&&a&&(i=mt(i)),_t(function(t){var e=t.update;return{seek:function(t){return e(t)}}}).pipe(i,function(t){return K(r,o,t)})},{ease:function(t){return"function"==typeof t},from:v.test,to:v.test}),we=Ot(0,1),Oe=Ot(0,1),Me=re(function(m){return void 0===m&&(m={}),_t(function(t){var n=t.complete,o=t.update,e=m.acceleration,u=void 0===e?0:e,r=m.friction,i=void 0===r?0:r,a=m.velocity,s=void 0===a?0:a,c=m.springStrength,f=m.to,p=m.restSpeed,d=void 0===p?.001:p,l=m.from,v=void 0===l?0:l,h=dt.update(function(t){var e=t.delta,r=Math.max(e,16);u&&(s+=Ct(u,r)),i&&(s*=Math.pow(1-i,r/100)),void 0!==c&&void 0!==f&&(s+=(f-v)*Ct(c,r));v+=Ct(s,r),o(v),!1!==d&&(!s||Math.abs(s)<=d)&&(lt.update(h),n())},!0);return{set:function(t){return v=t,this},setAcceleration:function(t){return u=t,this},setFriction:function(t){return i=t,this},setSpringStrength:function(t){return c=t,this},setSpringTarget:function(t){return f=t,this},setVelocity:function(t){return s=t,this},stop:function(){return lt.update(h)}}})},{acceleration:v.test,friction:v.test,velocity:v.test,from:v.test,to:v.test,springStrength:v.test}),xe=[se()],Ae=!1;if("undefined"!=typeof document){ae(document,"touchstart touchmove",{passive:!0,capture:!0}).start(function(t){var e=t.touches;Ae=!0;for(var r=e.length,n=xe.length=0;n<r;n++){var o=e[n];xe.push(ce(o))}})}function Pe(t){var e=void 0===t?{}:t,r=e.preventDefault,f=void 0===r||r,n=e.scale,p=void 0===n?1:n,o=e.rotate,d=void 0===o?0:o;return _t(function(t){var o=t.update,u={touches:xe,scale:p,rotate:d},i=0,a=0,s=1<xe.length;if(s){var e=xe[0],r=xe[1];i=H(e,r),a=Y(e,r)}function n(){if(s){var t=xe[0],e=xe[1],r=H(t,e),n=Y(t,e);u.scale=p*(r/i),u.rotate=d+(n-a)}o(u)}var c=ae(document,"touchmove",{passive:!f}).start(function(t){(f||1<t.touches.length)&&t.preventDefault(),dt.update(n)});return Ae&&dt.update(n),{stop:function(){lt.update(n),c.stop()}}})}var Ce=se(),Se=!1;if("undefined"!=typeof document){ae(document,"mousedown mousemove",!0).start(function(t){Se=!0,ce(t,Ce)})}function Ve(t){var e=(void 0===t?{}:t).preventDefault,o=void 0===e||e;return _t(function(t){function e(){return r(Ce)}var r=t.update,n=ae(document,"mousemove").start(function(t){o&&t.preventDefault(),dt.update(e)});return Se&&dt.update(e),{stop:function(){lt.update(e),n.stop()}}})}function je(t){return t[0]}function ke(t){return void 0===t&&(t={}),Ae?Pe(t).pipe(function(t){return t.touches},je):Ve(t)}function De(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return _t(function(t){var e,r=t.update,n=t.complete,o=0,u=function(){e=i[o].start({complete:function(){(++o>=i.length?n:u)()},update:r})};return u(),{stop:function(){return e&&e.stop()}}})}function Ee(n){return _t(function(t){var e=t.complete,r=setTimeout(e,n);return{stop:function(){return clearTimeout(r)}}})}t.Action=Rt,t.ValueReaction=Bt,t.action=_t,t.chain=De,t.composite=fe,t.crossfade=function(e,r){return _t(function(n){var o=0,t=Ht(e,r).start(M({},n,{update:function(t){var e=t[0],r=t[1];n.update(K(e,r,o))}}));return{setBalance:function(t){return o=t},stop:function(){return t.stop()}}})},t.decay=me,t.delay=Ee,t.everyFrame=function(){return _t(function(t){var r=t.update,n=0,e=dt.update(function(t){var e=t.timestamp;r(e-(n=n||e))},!0,!0);return{stop:function(){return lt.update(e)}}})},t.inertia=ge,t.keyframes=oe,t.listen=ae,t.merge=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return _t(function(e){var t=r.map(function(t){return t.start(e)});return{stop:function(){return t.forEach(function(t){return t.stop()})}}})},t.mouse=Ve,t.multicast=function(){return new It},t.multitouch=Pe,t.parallel=Ht,t.physics=Me,t.pointer=function(t){void 0===t&&(t={});var e=t.x,r=t.y,n=d(t,["x","y"]);if(void 0===e&&void 0===r)return ke(n);var o=B(e||0),u=B(r||0),i={x:0,y:0};return ke(n).pipe(function(t){return i.x=o(t.x),i.y=u(t.y),i})},t.schedule=function(i,a){return _t(function(t){var e,r=t.update,n=t.complete,o=i.start({update:function(){return void 0!==e&&r(e)},complete:n}),u=a.start({update:function(t){return e=t},complete:n});return{stop:function(){o.stop(),u.stop()}}})},t.spring=ye,t.stagger=function(t,n){var o="number"==typeof n,e=t.map(function(t,e){var r=o?n*e:n(e);return De(Ee(r),t)});return Ht.apply(void 0,e)},t.styler=function(){},t.timeline=function(t,e){var r=void 0===e?{}:e,n=r.duration,o=r.elapsed,u=r.ease,i=r.loop,a=r.flip,s=r.yoyo,c=0,f=0,p=t.reduce(ue,[]),d=[];p.forEach(function(t){if("string"==typeof t)c+=parseFloat(t);else if("number"==typeof t)c=t;else{var e=M({},t,{at:c});e.duration=void 0===e.duration?300:e.duration,d.push(e),c+=e.duration,f=Math.max(f,e.at+e.duration)}});for(var l={},v=d.length,h=0;h<v;h++){var m=d[h],y=m.track;if(void 0===y)throw new Error("No track defined");l.hasOwnProperty(y)||(l[y]=[]),l[y].push(m)}var g={};for(var b in l)if(l.hasOwnProperty(b)){var w=l[b].reduce(ie,{duration:f,easings:[],times:[],values:[]});g[b]=oe(M({},w,{duration:n||f,ease:u,elapsed:o,loop:i,yoyo:s,flip:a}))}return fe(g)},t.tween=ne,t.value=Wt,Object.defineProperty(t,"__esModule",{value:!0})});