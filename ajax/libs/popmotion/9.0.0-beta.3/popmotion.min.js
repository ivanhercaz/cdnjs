!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((t=t||self).popmotion={})}(this,function(t){"use strict";var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};function r(t,r){function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}var A=function(){return(A=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)};function d(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(e[n[o]]=t[n[o]])}return e}function a(t,r,e){var n=r.middleware;return new c({middleware:n,onComplete:e},"function"==typeof t?{update:t}:t)}function e(r,e){return function(t){return Math.max(Math.min(t,e),r)}}function f(t){return t%1?Number(t.toFixed(5)):t}function o(r){return{test:function(t){return"string"==typeof t&&t.endsWith(r)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+r}}}function u(t){return void 0!==t.red}function i(t){return void 0!==t.hue}function s(u){return function(t){if("string"!=typeof t)return t;for(var r,e={},n=(r=t).substring(r.indexOf("(")+1,r.lastIndexOf(")")).split(/,\s*/),o=0;o<4;o++)e[u[o]]=void 0!==n[o]?parseFloat(n[o]):1;return e}}var c=function(t,r){var e=this,n=t.middleware,o=t.onComplete;this.isActive=!0,this.update=function(t){e.observer.update&&e.updateObserver(t)},this.complete=function(){e.observer.complete&&e.isActive&&e.observer.complete(),e.onComplete&&e.onComplete(),e.isActive=!1},this.error=function(t){e.observer.error&&e.isActive&&e.observer.error(t),e.isActive=!1},this.observer=r,this.updateObserver=function(t){return r.update(t)},this.onComplete=o,r.update&&n&&n.length&&n.forEach(function(t){return e.updateObserver=t(e.updateObserver,e.complete)})},p=function(){return(p=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)},l=/(-)?(\d[\d\.]*)/g,v=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,h=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,m={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},y=(p({},m,{transform:e(0,1)}),p({},m,{default:1}),o("deg")),g=o("%"),b=o("px"),w=o("vh"),O=o("vw"),M=(p({},g,{parse:function(t){return g.parse(t)/100},transform:function(t){return g.transform(100*t)}}),e(0,255)),x=p({},m,{transform:function(t){return Math.round(M(t))}});function C(t,r){return t.startsWith(r)&&h.test(t)}function P(t){return"number"==typeof t?0:t}var S,j,k={test:function(t){return"string"==typeof t?C(t,"rgb"):u(t)},parse:s(["red","green","blue","alpha"]),transform:function(t){var r,e,n,o,u,i=t.red,a=t.green,s=t.blue,c=t.alpha;return r={red:x.transform(i),green:x.transform(a),blue:x.transform(s),alpha:f(c)},e=r.red,n=r.green,o=r.blue,u=r.alpha,"rgba("+e+", "+n+", "+o+", "+(void 0===u?1:u)+")"}},V={test:function(t){return"string"==typeof t?C(t,"hsl"):i(t)},parse:s(["hue","saturation","lightness","alpha"]),transform:function(t){var r,e,n,o,u,i=t.hue,a=t.saturation,s=t.lightness,c=t.alpha;return r={hue:Math.round(i),saturation:g.transform(f(a)),lightness:g.transform(f(s)),alpha:f(c)},e=r.hue,n=r.saturation,o=r.lightness,u=r.alpha,"hsla("+e+", "+n+", "+o+", "+(void 0===u?1:u)+")"}},D=p({},k,{test:function(t){return"string"==typeof t&&C(t,"#")},parse:function(t){var r="",e="",n="";return 4<t.length?(r=t.substr(1,2),e=t.substr(3,2),n=t.substr(5,2)):(r=t.substr(1,1),e=t.substr(2,1),n=t.substr(3,1),r+=r,e+=e,n+=n),{red:parseInt(r,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:1}}}),E=function(t){return"string"==typeof t&&h.test(t)||u(t)||i(t)},F=function(t){return k.test(t)?k.parse(t):V.test(t)?V.parse(t):D.test(t)?D.parse(t):t},R=function(t){return u(t)?k.transform(t):i(t)?V.transform(t):t},T="${c}",_="${n}",q={test:function(t){if("string"!=typeof t||!isNaN(t))return!1;var r=0,e=t.match(l),n=t.match(v);return e&&(r+=e.length),n&&(r+=n.length),0<r},parse:function(t){var r=t,e=[],n=r.match(v);n&&(r=r.replace(v,T),e.push.apply(e,n.map(F)));var o=r.match(l);return o&&e.push.apply(e,o.map(m.parse)),e},createTransformer:function(t){var n=t,o=0,r=t.match(v),u=r?r.length:0;if(r)for(var e=0;e<u;e++)n=n.replace(r[e],T),o++;var i=n.match(l),a=i?i.length:0;if(i)for(e=0;e<a;e++)n=n.replace(i[e],_),o++;return function(t){for(var r=n,e=0;e<o;e++)r=r.replace(e<u?T:_,(e<u?R:f)(t[e]));return r}},getAnimatableNone:function(t){var r=q.parse(t);return q.createTransformer(t)(r.map(P))}},N=0,L="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var r=Date.now(),e=Math.max(0,16.7-(r-N));N=r+e,setTimeout(function(){return t(N)},e)};(j=S=S||{}).Read="read",j.Update="update",j.Render="render",j.PostRender="postRender",j.FixedUpdate="fixedUpdate";function U(t){return ct=t}function I(t){return vt[t].process(pt)}function X(){return pt}function Y(r){return function(t){return 1-r(1-t)}}function B(t){return t}function z(t){return"number"==typeof t}function W(t,r){return void 0===r&&(r=xt),180*Math.atan2(r.y-t.y,r.x-t.x)/Math.PI}function G(r,e){var n=!0;return void 0===e&&(e=r,n=!1),function(t){return n?t-r+e:(r=t,n=!0,e)}}function H(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")}function $(t){return H(t)&&t.hasOwnProperty("z")}function K(t,r){return Math.abs(t-r)}function J(t,r){if(void 0===r&&(r=xt),z(t)&&z(r))return K(t,r);if(H(t)&&H(r)){var e=K(t.x,r.x),n=K(t.y,r.y),o=$(t)&&$(r)?K(t.z,r.z):0;return Math.sqrt(Math.pow(e,2)+Math.pow(n,2)+Math.pow(o,2))}return 0}function Q(t,r,e){var n=r-t;return 0==n?1:(e-t)/n}function Z(t,r,e){return-e*t+e*r+t}function tt(t,r,e){var n=t*t,o=r*r;return Math.sqrt(Math.max(0,e*(o-n)+n))}function rt(r){return Pt.find(function(t){return t.test(r)})}function et(t){return"'"+t+"' is not an animatable color. Use the equivalent color code instead."}function nt(t,r){var e=rt(t),n=rt(r);et(t),et(r),e.transform,n.transform;var o=e.parse(t),u=n.parse(r),i=Ct({},o),a=e===V?Z:tt;return function(t){for(var r in i)"alpha"!==r&&(i[r]=a(o[r],u[r],t));return i.alpha=Z(o.alpha,u.alpha,t),e.transform(i)}}function ot(r,e){return function(t){return e(r(t))}}function ut(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.reduce(ot)}var it,at=1/60*1e3,st=!0,ct=!1,ft=!1,pt={delta:0,timestamp:0},dt=[S.Read,S.Update,S.Render,S.PostRender],lt=dt.reduce(function(t,r){var n,u,i,a,s,o,c,f,p,d=(n=U,u=[],s=!(i=[]),o=a=0,c=new WeakSet,f=new WeakSet,p={cancel:function(t){var r=i.indexOf(t);c.add(t),-1!==r&&i.splice(r,1)},process:function(t){var r,e;if(s=!0,u=(r=[i,u])[0],(i=r[1]).length=0,a=u.length)for(o=0;o<a;o++)(e=u[o])(t),!0!==f.has(e)||c.has(e)||(p.schedule(e),n(!0));s=!1},schedule:function(t,r,e){void 0===r&&(r=!1),void 0===e&&(e=!1);var n=e&&s,o=n?u:i;c.delete(t),r&&f.add(t),-1===o.indexOf(t)&&(o.push(t),n&&(a=u.length))}});return t.sync[r]=function(t,r,e){return void 0===r&&(r=!1),void 0===e&&(e=!1),ct||gt(),d.schedule(t,r,e),t},t.cancelSync[r]=function(t){return d.cancel(t)},t.steps[r]=d,t},{steps:{},sync:{},cancelSync:{}}),vt=lt.steps,ht=lt.sync,mt=lt.cancelSync,yt=function(t){ct=!1,pt.delta=st?at:Math.max(Math.min(t-pt.timestamp,40),1),st||(at=pt.delta),pt.timestamp=t,ft=!0,dt.forEach(I),ft=!1,ct&&(st=!1,L(yt))},gt=function(){st=ct=!0,ft||L(yt)},bt=Y,wt=function(r){return function(t){return Math.pow(t,r)}}(2),Ot=Y(wt),Mt=function(r){return function(t){return t<=.5?r(2*t)/2:(2-r(2*(1-t)))/2}}(wt),xt={x:0,y:0,z:0},At=(it=function(t,r,e){return Math.min(Math.max(e,t),r)},function(r,e,t){return void 0!==t?it(r,e,t):function(t){return it(r,e,t)}}),Ct=function(){return(Ct=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)},Pt=[D,k,V];function St(t,o){var e=t.slice(),n=e.length,u=t.map(function(t,r){return e=t,n=o[r],z(e)?function(t){return Z(e,n,t)}:(E(e)?nt:Dt)(e,n);var e,n});return function(t){for(var r=0;r<n;r++)e[r]=u[r](t);return e}}function jt(t){for(var r=q.parse(t),e=r.length,n=0,o=0,u=0,i=0;i<e;i++)n||"number"==typeof r[i]?n++:void 0!==r[i].hue?u++:o++;return{parsed:r,numNumbers:n,numRGB:o,numHSL:u}}function kt(t,r){return z(t)?t/(1e3/r):0}function Vt(t,r){return r?t*(1e3/r):0}var Dt=function(t,r){var e=q.createTransformer(r),n=jt(t),o=jt(r);return n.numHSL===o.numHSL&&n.numRGB===o.numRGB&&(n.numNumbers,o.numNumbers),ut(St(n.parsed,o.parsed),e)},Et=(At(0,1),Ft.prototype.create=function(t){return new Ft(t)},Ft.prototype.start=function(t){void 0===t&&(t={});var r=!1,e={stop:function(){}},n=this.props,o=n.init,u=d(n,["init"]),i=o(a(t,u,function(){r=!0,e.stop()}));return e=i?A({},e,i):e,r&&e.stop(),e},Ft.prototype.applyMiddleware=function(t){return this.create(A({},this.props,{middleware:this.props.middleware?[t].concat(this.props.middleware):[t]}))},Ft.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=1===t.length?t[0]:ut.apply(void 0,t);return this.applyMiddleware(function(r){return function(t){return r(e(t))}})},Ft);function Ft(t){void 0===t&&(t={}),this.props=t}function Rt(t){return new Et({init:t})}var Tt=(_t.prototype.applyMiddleware=function(t){return this.create(A({},this.props,{middleware:this.props.middleware?[t].concat(this.props.middleware):[t]}))},_t.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=1===t.length?t[0]:ut.apply(void 0,t);return this.applyMiddleware(function(r){return function(t){return r(e(t))}})},_t.prototype.while=function(n){return this.applyMiddleware(function(r,e){return function(t){return n(t)?r(t):e()}})},_t.prototype.filter=function(e){return this.applyMiddleware(function(r){return function(t){return e(t)&&r(t)}})},_t);function _t(t){void 0===t&&(t={}),this.props=t}var qt,Nt=(r(Lt,qt=Tt),Lt.prototype.complete=function(){this.subscribers.forEach(function(t){return t.complete()})},Lt.prototype.error=function(r){this.subscribers.forEach(function(t){return t.error(r)})},Lt.prototype.update=function(t){for(var r=0;r<this.subscribers.length;r++)this.subscribers[r].update(t)},Lt.prototype.subscribe=function(t){var r=this,e=a(t,this.props);return this.subscribers.push(e),{unsubscribe:function(){var t=r.subscribers.indexOf(e);-1!==t&&r.subscribers.splice(t,1)}}},Lt.prototype.stop=function(){this.parent&&this.parent.stop()},Lt);function Lt(){var t=null!==qt&&qt.apply(this,arguments)||this;return t.subscribers=[],t}var Ut,It=(r(Xt,Ut=Nt),Xt.prototype.create=function(t){return new Xt(t)},Xt);function Xt(){return null!==Ut&&Ut.apply(this,arguments)||this}var Yt,Bt=(r(zt,Yt=Nt),zt.prototype.create=function(t){return new zt(t)},zt.prototype.get=function(){return this.current},zt.prototype.getVelocity=function(){return this.getVelocityOfCurrent()},zt.prototype.update=function(t){Yt.prototype.update.call(this,t),this.prev=this.current,this.updateCurrent(t);var r=X(),e=r.delta,n=r.timestamp;this.timeDelta=e,this.lastUpdated=n,ht.postRender(this.scheduleVelocityCheck)},zt.prototype.subscribe=function(t){var r=Yt.prototype.subscribe.call(this,t);return this.subscribers[this.subscribers.length-1].update(this.current),r},zt.prototype.getSingleVelocity=function(t,r){return"number"==typeof t&&"number"==typeof r?Vt(t-r,this.timeDelta):Vt(parseFloat(t)-parseFloat(r),this.timeDelta)||0},zt.prototype.getListVelocity=function(){var e=this;return this.current.map(function(t,r){return e.getSingleVelocity(t,e.prev[r])})},zt.prototype.getMapVelocity=function(){var t={};for(var r in this.current)this.current.hasOwnProperty(r)&&(t[r]=this.getSingleVelocity(this.current[r],this.prev[r]));return t},zt);function zt(t){var r,e,n,o=Yt.call(this,t)||this;return o.scheduleVelocityCheck=function(){return ht.postRender(o.velocityCheck)},o.velocityCheck=function(t){t.timestamp!==o.lastUpdated&&(o.prev=o.current)},o.prev=o.current=t.value||0,e=o.current,"string"==(n=typeof e)||"number"==n?(o.updateCurrent=function(t){return o.current=t},o.getVelocityOfCurrent=function(){return o.getSingleVelocity(o.current,o.prev)}):(r=o.current,Array.isArray(r)?(o.updateCurrent=function(t){return o.current=t.slice()},o.getVelocityOfCurrent=function(){return o.getListVelocity()}):(o.updateCurrent=function(t){for(var r in o.current={},t)t.hasOwnProperty(r)&&(o.current[r]=t[r])},o.getVelocityOfCurrent=function(){return o.getMapVelocity()})),t.initialSubscription&&o.subscribe(t.initialSubscription),o}function Wt(t){var f=t.getCount,p=t.getFirst,d=t.getOutput,l=t.mapApi,v=t.setProp,h=t.startActions;return function(c){return Rt(function(t){function n(){return r(a)}var r=t.update,o=t.complete,u=t.error,i=f(c),a=d(),s=0,e=h(c,function(t,r){var e=!1;return t.start({complete:function(){e||(e=!0,++s===i&&ht.update(o))},error:u,update:function(t){v(a,r,t),ht.update(n,!1,!0)}})});return Object.keys(p(e)).reduce(function(t,r){return t[r]=l(e,r),t},{})})}}function Gt(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return fr(t)}function Ht(e){function n(t,r){return void 0!==t&&!e[r](t)}var t=Object.keys(e);return{getVectorKeys:function(e){return t.reduce(function(t,r){return n(e[r],r)&&t.push(r),t},[])},testVectorProps:function(r){return r&&t.some(function(t){return n(r[t],t)})}}}function $t(r){return pr.find(function(t){return t.test(r)})}function Kt(t,r){return t(r)}function Jt(o,u,i){var t=i[0],r=u[t].map(function(t,r){var e,n=i.reduce((e=r,function(t,r){return t[r]=t[r][e],t}),A({},u));return vr(t)(o,n)});return Gt.apply(void 0,r)}function Qt(o,u,i){var a=i[0],t=Object.keys(u[a]).reduce(function(t,r){var e,n=i.reduce((e=r,function(t,r){return t[r]=t[r][e],t}),A({},u));return t[r]=vr(u[a][r])(o,n),t},{});return cr(t)}function Zt(t,r){var e=r.from,n=r.to,o=d(r,["from","to"]),u=$t(e)||$t(n),i=u.transform,a=u.parse;return t(A({},o,{from:"string"==typeof e?a(e):e,to:"string"==typeof n?a(n):n})).pipe(i)}function tr(u){return function(t,r){var e=r.from,n=r.to,o=d(r,["from","to"]);return t(A({},o,{from:0,to:1})).pipe(u(e,n))}}function rr(n,t){var r=Ht(t),o=r.testVectorProps,u=r.getVectorKeys;return function(t){if(!o(t))return n(t);var r=u(t),e=t[r[0]];return vr(e)(n,t,r)}}function er(T){return void 0===T&&(T={}),Rt(function(t){function n(t){var r;void 0===t&&(t=!1),E=gr({from:O=(r=[x,O])[0],to:x=r[1],ease:p,reverseEase:t}).start(i)}function o(){F=br(Q(0,c,C)),E.seek(F)}function r(){R=!0,u=ht.update(function(t){var r,e=t.delta;C+=e,o(),!(r=R&&c+b<C)||(!r||h||l||y)&&(C=c-(C-b),h&&D<h?(D++,!0):l&&S<l?(S++,n(),!0):y&&k<y&&(n(++k%2!=0),!0))||(mt.update(u),a&&ht.update(a,!1,!0))},!0)}function e(){R=!1,u&&mt.update(u)}var u,i=t.update,a=t.complete,s=T.duration,c=void 0===s?300:s,f=T.ease,p=void 0===f?Ot:f,d=T.flip,l=void 0===d?0:d,v=T.loop,h=void 0===v?0:v,m=T.yoyo,y=void 0===m?0:m,g=T.repeatDelay,b=void 0===g?0:g,w=T.from,O=void 0===w?0:w,M=T.to,x=void 0===M?1:M,A=T.elapsed,C=void 0===A?0:A,P=T.flipCount,S=void 0===P?0:P,j=T.yoyoCount,k=void 0===j?0:j,V=T.loopCount,D=void 0===V?0:V,E=gr({from:O,to:x,ease:p}).start(i),F=0,R=!1;return r(),{isActive:function(){return R},getElapsed:function(){return At(0,c,C)},getProgress:function(){return F},stop:function(){e()},pause:function(){return e(),this},resume:function(){return R||r(),this},seek:function(t){return C=Z(0,c,t),ht.update(o,!1,!0),this},reverse:function(){return n(),this}}})}function nr(t){var r,e,n,o,u=t.easings,i=t.ease,a=void 0===i?B:i,s=t.times,c=t.values,f=d(t,["easings","ease","times","values"]);u=Array.isArray(u)?u:(e=u,(r=c).map(function(){return e||Ot}).splice(0,r.length-1)),s=s||(o=(n=c).length,n.map(function(t,r){return 0!==r?r/(o-1):0}));var p=u.map(function(t,r){return gr({from:c[r],to:c[r+1],ease:t})});return er(A({},f,{ease:a})).applyMiddleware(function(t){return r=p,e=t,o=(n=s).length,i=(u=o-1)-1,a=r.map(function(t){return t.start(e)}),function(t){t<=n[0]&&a[0].seek(0),t>=n[u]&&a[i].seek(1);for(var r=1;r<o&&!(n[r]>t||r===u);r++);var e=Q(n[r-1],n[r],t);a[r-1].seek(wr(e))};var n,r,e,o,u,i,a})}function or(t,r){var e,n,o,u,i,a,s,c;return Array.isArray(r)?t.push.apply(t,(n=[],o=(e=r)[e.length-1],i=(u="number"==typeof o)?o:0,a=u?e.slice(0,-1):e,s=a.length,c=0,a.forEach(function(t,r){if(n.push(t),r!==s-1){var e=t.duration||300;c+=i,n.push("-"+(e-c))}}),n)):t.push(r),t}function ur(t,r,e){var n=t.duration,o=t.easings,u=t.times,i=t.values,a=i.length,s=u[a-1],c=0===r.at?0:r.at/n,f=(r.at+r.duration)/n;if(0===e)i.push(r.from),u.push(c);else if(s!==c){void 0!==r.from&&(i.push(i[a-1]),u.push(c),o.push(B));var p=void 0!==r.from?r.from:i[a-1];i.push(p),u.push(c),o.push(B)}else void 0!==r.from&&(i.push(r.from),u.push(c),o.push(B));return i.push(r.to),u.push(f),o.push(r.ease||Mt),t}function ir(n,o,u){return Rt(function(t){var r=t.update,e=o.split(" ").map(function(t){return n.addEventListener(t,r,u),t});return{stop:function(){return e.forEach(function(t){return n.removeEventListener(t,r,u)})}}})}function ar(){return{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}}function sr(t,r){return void 0===r&&(r=ar()),r.clientX=r.x=t.clientX,r.clientY=r.y=t.clientY,r.pageX=t.pageX,r.pageY=t.pageY,r}var cr=Wt({getOutput:function(){return{}},getCount:function(t){return Object.keys(t).length},getFirst:function(t){return t[Object.keys(t)[0]]},mapApi:function(o,u){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Object.keys(o).reduce(function(t,r){var e;return o[r][u]&&(n[0]&&void 0!==n[0][r]?t[r]=o[r][u](n[0][r]):t[r]=(e=o[r])[u].apply(e,n)),t},{})}},setProp:function(t,r,e){return t[r]=e},startActions:function(e,n){return Object.keys(e).reduce(function(t,r){return t[r]=n(e[r],r),t},{})}}),fr=Wt({getOutput:function(){return[]},getCount:function(t){return t.length},getFirst:function(t){return t[0]},mapApi:function(r,n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.map(function(t,r){if(t[n])return Array.isArray(e[0])?t[n](e[0][r]):t[n].apply(t,e)})}},setProp:function(t,r,e){return t[r]=e},startActions:function(t,e){return t.map(function(t,r){return e(t,r)})}}),pr=[b,g,y,w,O],dr=tr(nt),lr=tr(Dt),vr=function(t){return"number"==typeof t?Kt:Array.isArray(t)?Jt:Boolean($t(t))?Zt:E(t)?dr:q.test(t)?lr:"object"==typeof t?Qt:Kt},hr=rr(function(b){return void 0===b&&(b={}),Rt(function(t){var o=t.complete,u=t.update,r=b.velocity,e=void 0===r?0:r,n=b.from,i=void 0===n?0:n,a=b.power,s=void 0===a?.8:a,c=b.timeConstant,f=void 0===c?350:c,p=b.restDelta,d=void 0===p?.5:p,l=b.modifyTarget,v=0,h=s*e,m=Math.round(i+h),y=void 0===l?m:l(m),g=ht.update(function(t){var r=t.delta;v+=r;var e=-h*Math.exp(-v/f),n=d<e||e<-d;u(n?y+e:y),n||(mt.update(g),o())},!0);return{stop:function(){return mt.update(g)}}})},{from:m.test,modifyTarget:function(t){return"function"==typeof t},velocity:m.test}),mr=rr(function(C){return void 0===C&&(C={}),Rt(function(t){var s=t.update,c=t.complete,r=C.velocity,f=void 0===r?0:r,e=C.from,n=void 0===e?0:e,o=C.to,p=void 0===o?0:o,u=C.stiffness,d=void 0===u?100:u,i=C.damping,l=void 0===i?10:i,a=C.mass,v=void 0===a?1:a,h=C.restSpeed,m=void 0===h?.01:h,y=C.restDelta,g=void 0===y?.01:y,b=f?-f/1e3:0,w=0,O=p-n,M=n,x=M,A=ht.update(function(t){var r=t.delta;w+=r;var e=l/(2*Math.sqrt(d*v)),n=Math.sqrt(d/v)/1e3;if(x=M,e<1){var o=Math.exp(-e*n*w),u=n*Math.sqrt(1-e*e);M=p-o*((b+e*n*O)/u*Math.sin(u*w)+O*Math.cos(u*w))}else{o=Math.exp(-n*w);M=p-o*(O+(b+n*O)*w)}f=Vt(M-x,r);var i=Math.abs(f)<=m,a=Math.abs(p-M)<=g;i&&a?(s(M=p),mt.update(A),c()):s(M)},!0);return{stop:function(){return mt.update(A)}}})},{from:m.test,to:m.test,stiffness:m.test,damping:m.test,mass:m.test,velocity:m.test}),yr=rr(function(t){var r=t.from,h=void 0===r?0:r,m=(t.velocity,t.min),y=t.max,e=t.power,g=void 0===e?.8:e,n=t.timeConstant,b=void 0===n?700:n,o=t.bounceStiffness,w=void 0===o?500:o,u=t.bounceDamping,O=void 0===u?10:u,i=t.restDelta,M=void 0===i?1:i,x=t.modifyTarget;return Rt(function(t){function n(t){return void 0!==m&&t<=m}function o(t){return void 0!==y&&y<=t}function r(t){return n(t)||o(t)}function e(t){var r,e;a(t),c=f,p=Vt((f=t)-c,X().delta),i&&!d&&(e=p,n(r=t)&&e<0||o(r)&&0<e)&&l({from:t,velocity:p})}function u(t,r){i&&i.stop(),i=t.start({update:e,complete:function(){(r||s)()}})}var i,a=t.update,s=t.complete,c=h,f=h,p=0,d=!1,l=function(t){d=!0,u(mr(A({},t,{to:n(t.from)?m:y,stiffness:w,damping:O,restDelta:M})))};if(r(h))l({from:h,velocity:p});else if(0!==p){var v=hr({from:h,velocity:p,timeConstant:b,power:g,restDelta:r(h)?20:M,modifyTarget:x});u(v,function(){r(f)?l({from:f,velocity:p}):s()})}else s();return{stop:function(){return i&&i.stop()}}})},{from:m.test,velocity:m.test,min:m.test,max:m.test,damping:m.test,stiffness:m.test,modifyTarget:function(t){return"function"==typeof t}}),gr=rr(function(t){var r=t.from,e=void 0===r?0:r,n=t.to,o=void 0===n?1:n,u=t.ease,i=void 0===u?B:u,a=t.reverseEase;return void 0!==a&&a&&(i=bt(i)),Rt(function(t){var r=t.update;return{seek:function(t){return r(t)}}}).pipe(i,function(t){return Z(e,o,t)})},{ease:function(t){return"function"==typeof t},from:m.test,to:m.test}),br=At(0,1),wr=At(0,1),Or=rr(function(m){return void 0===m&&(m={}),Rt(function(t){var n=t.complete,o=t.update,r=m.acceleration,u=void 0===r?0:r,e=m.friction,i=void 0===e?0:e,a=m.velocity,s=void 0===a?0:a,c=m.springStrength,f=m.to,p=m.restSpeed,d=void 0===p?.001:p,l=m.from,v=void 0===l?0:l,h=ht.update(function(t){var r=t.delta,e=Math.max(r,16);u&&(s+=kt(u,e)),i&&(s*=Math.pow(1-i,e/100)),void 0!==c&&void 0!==f&&(s+=(f-v)*kt(c,e));v+=kt(s,e),o(v),!1!==d&&(!s||Math.abs(s)<=d)&&(mt.update(h),n())},!0);return{set:function(t){return v=t,this},setAcceleration:function(t){return u=t,this},setFriction:function(t){return i=t,this},setSpringStrength:function(t){return c=t,this},setSpringTarget:function(t){return f=t,this},setVelocity:function(t){return s=t,this},stop:function(){return mt.update(h)}}})},{acceleration:m.test,friction:m.test,velocity:m.test,from:m.test,to:m.test,springStrength:m.test}),Mr=[ar()],xr=!1;if("undefined"!=typeof document){ir(document,"touchstart touchmove",{passive:!0,capture:!0}).start(function(t){var r=t.touches;xr=!0;for(var e=r.length,n=Mr.length=0;n<e;n++){var o=r[n];Mr.push(sr(o))}})}function Ar(t){var r=void 0===t?{}:t,e=r.preventDefault,f=void 0===e||e,n=r.scale,p=void 0===n?1:n,o=r.rotate,d=void 0===o?0:o;return Rt(function(t){var o=t.update,u={touches:Mr,scale:p,rotate:d},i=0,a=0,s=1<Mr.length;if(s){var r=Mr[0],e=Mr[1];i=J(r,e),a=W(r,e)}function n(){if(s){var t=Mr[0],r=Mr[1],e=J(t,r),n=W(t,r);u.scale=p*(e/i),u.rotate=d+(n-a)}o(u)}var c=ir(document,"touchmove",{passive:!f}).start(function(t){(f||1<t.touches.length)&&t.preventDefault(),ht.update(n)});return xr&&ht.update(n),{stop:function(){mt.update(n),c.stop()}}})}var Cr=ar(),Pr=!1;if("undefined"!=typeof document){ir(document,"mousedown mousemove",!0).start(function(t){Pr=!0,sr(t,Cr)})}function Sr(t){var r=(void 0===t?{}:t).preventDefault,o=void 0===r||r;return Rt(function(t){function r(){return e(Cr)}var e=t.update,n=ir(document,"mousemove").start(function(t){o&&t.preventDefault(),ht.update(r)});return Pr&&ht.update(r),{stop:function(){mt.update(r),n.stop()}}})}function jr(t){return t[0]}function kr(t){return void 0===t&&(t={}),xr?Ar(t).pipe(function(t){return t.touches},jr):Sr(t)}function Vr(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return Rt(function(t){var r,e=t.update,n=t.complete,o=0,u=function(){r=i[o].start({complete:function(){(++o>=i.length?n:u)()},update:e})};return u(),{stop:function(){return r&&r.stop()}}})}function Dr(n){return Rt(function(t){var r=t.complete,e=setTimeout(r,n);return{stop:function(){return clearTimeout(e)}}})}t.Action=Et,t.ValueReaction=Bt,t.action=Rt,t.chain=Vr,t.composite=cr,t.crossfade=function(r,e){return Rt(function(n){var o=0,t=Gt(r,e).start(A({},n,{update:function(t){var r=t[0],e=t[1];n.update(Z(r,e,o))}}));return{setBalance:function(t){return o=t},stop:function(){return t.stop()}}})},t.decay=hr,t.delay=Dr,t.everyFrame=function(){return Rt(function(t){var e=t.update,n=0,r=ht.update(function(t){var r=t.timestamp;e(r-(n=n||r))},!0,!0);return{stop:function(){return mt.update(r)}}})},t.inertia=yr,t.keyframes=nr,t.listen=ir,t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Rt(function(r){var t=e.map(function(t){return t.start(r)});return{stop:function(){return t.forEach(function(t){return t.stop()})}}})},t.mouse=Sr,t.multicast=function(){return new It},t.multitouch=Ar,t.parallel=Gt,t.physics=Or,t.pointer=function(t){void 0===t&&(t={});var r=t.x,e=t.y,n=d(t,["x","y"]);if(void 0===r&&void 0===e)return kr(n);var o=G(r||0),u=G(e||0),i={x:0,y:0};return kr(n).pipe(function(t){return i.x=o(t.x),i.y=u(t.y),i})},t.schedule=function(i,a){return Rt(function(t){var r,e=t.update,n=t.complete,o=i.start({update:function(){return void 0!==r&&e(r)},complete:n}),u=a.start({update:function(t){return r=t},complete:n});return{stop:function(){o.stop(),u.stop()}}})},t.spring=mr,t.stagger=function(t,n){var o="number"==typeof n,r=t.map(function(t,r){var e=o?n*r:n(r);return Vr(Dr(e),t)});return Gt.apply(void 0,r)},t.styler=function(){},t.timeline=function(t,r){var e=void 0===r?{}:r,n=e.duration,o=e.elapsed,u=e.ease,i=e.loop,a=e.flip,s=e.yoyo,c=0,f=0,p=t.reduce(or,[]),d=[];p.forEach(function(t){if("string"==typeof t)c+=parseFloat(t);else if("number"==typeof t)c=t;else{var r=A({},t,{at:c});r.duration=void 0===r.duration?300:r.duration,d.push(r),c+=r.duration,f=Math.max(f,r.at+r.duration)}});for(var l={},v=d.length,h=0;h<v;h++){var m=d[h],y=m.track;if(void 0===y)throw new Error("No track defined");l.hasOwnProperty(y)||(l[y]=[]),l[y].push(m)}var g={};for(var b in l)if(l.hasOwnProperty(b)){var w=l[b].reduce(ur,{duration:f,easings:[],times:[],values:[]});g[b]=nr(A({},w,{duration:n||f,ease:u,elapsed:o,loop:i,yoyo:s,flip:a}))}return cr(g)},t.tween=er,t.value=function(t,r){return new Bt({value:t,initialSubscription:r})},Object.defineProperty(t,"__esModule",{value:!0})});