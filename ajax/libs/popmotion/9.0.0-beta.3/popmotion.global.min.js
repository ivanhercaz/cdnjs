!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).popmotion={})}(this,function(t){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function n(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var A=function(){return(A=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};function c(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(t);o<e.length;o++)n.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(r[e[o]]=t[e[o]])}return r}function a(t,n,r){var e=n.middleware;return new p({middleware:e,onComplete:r},"function"==typeof t?{update:t}:t)}function r(n,r){return function(t){return Math.max(Math.min(t,r),n)}}function s(t){return t%1?Number(t.toFixed(5)):t}function o(n){return{test:function(t){return"string"==typeof t&&t.endsWith(n)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+n}}}function u(t){return void 0!==t.red}function i(t){return void 0!==t.hue}function f(o){return function(t){if("string"!=typeof t)return t;for(var n={},r=function(t){return t.substring(t.indexOf("(")+1,t.lastIndexOf(")"))}(t).split(/,\s*/),e=0;e<4;e++)n[o[e]]=void 0!==r[e]?parseFloat(r[e]):1;return n}}var p=function(t,n){var r=this,e=t.middleware,o=t.onComplete;this.isActive=!0,this.update=function(t){r.observer.update&&r.updateObserver(t)},this.complete=function(){r.observer.complete&&r.isActive&&r.observer.complete(),r.onComplete&&r.onComplete(),r.isActive=!1},this.error=function(t){r.observer.error&&r.isActive&&r.observer.error(t),r.isActive=!1},this.observer=n,this.updateObserver=function(t){return n.update(t)},this.onComplete=o,n.update&&e&&e.length&&e.forEach(function(t){return r.updateObserver=t(r.updateObserver,r.complete)})},d=function(){return(d=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},l=/(-)?(\d[\d\.]*)/g,v=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,h=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,m={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},y=(d({},m,{transform:r(0,1)}),d({},m,{default:1}),o("deg")),g=o("%"),b=o("px"),w=o("vh"),O=o("vw"),x=(d({},g,{parse:function(t){return g.parse(t)/100},transform:function(t){return g.transform(100*t)}}),r(0,255)),M=d({},m,{transform:function(t){return Math.round(x(t))}});function C(t,n){return t.startsWith(n)&&h.test(t)}function P(t){return"number"==typeof t?0:t}var S,j={test:function(t){return"string"==typeof t?C(t,"rgb"):u(t)},parse:f(["red","green","blue","alpha"]),transform:function(t){var n=t.red,r=t.green,e=t.blue,o=t.alpha;return function(t){var n=t.red,r=t.green,e=t.blue,o=t.alpha;return"rgba("+n+", "+r+", "+e+", "+(void 0===o?1:o)+")"}({red:M.transform(n),green:M.transform(r),blue:M.transform(e),alpha:s(o)})}},k={test:function(t){return"string"==typeof t?C(t,"hsl"):i(t)},parse:f(["hue","saturation","lightness","alpha"]),transform:function(t){var n=t.hue,r=t.saturation,e=t.lightness,o=t.alpha;return function(t){var n=t.hue,r=t.saturation,e=t.lightness,o=t.alpha;return"hsla("+n+", "+r+", "+e+", "+(void 0===o?1:o)+")"}({hue:Math.round(n),saturation:g.transform(s(r)),lightness:g.transform(s(e)),alpha:s(o)})}},V=d({},j,{test:function(t){return"string"==typeof t&&C(t,"#")},parse:function(t){var n="",r="",e="";return 4<t.length?(n=t.substr(1,2),r=t.substr(3,2),e=t.substr(5,2)):(n=t.substr(1,1),r=t.substr(2,1),e=t.substr(3,1),n+=n,r+=r,e+=e),{red:parseInt(n,16),green:parseInt(r,16),blue:parseInt(e,16),alpha:1}}}),E=function(t){return"string"==typeof t&&h.test(t)||u(t)||i(t)},D=function(t){return j.test(t)?j.parse(t):k.test(t)?k.parse(t):V.test(t)?V.parse(t):t},F=function(t){return u(t)?j.transform(t):i(t)?k.transform(t):t},R="${c}",T="${n}",X={test:function(t){if("string"!=typeof t||!isNaN(t))return!1;var n=0,r=t.match(l),e=t.match(v);return r&&(n+=r.length),e&&(n+=e.length),0<n},parse:function(t){var n=t,r=[],e=n.match(v);e&&(n=n.replace(v,R),r.push.apply(r,e.map(D)));var o=n.match(l);return o&&r.push.apply(r,o.map(m.parse)),r},createTransformer:function(t){var e=t,o=0,n=t.match(v),u=n?n.length:0;if(n)for(var r=0;r<u;r++)e=e.replace(n[r],R),o++;var i=e.match(l),a=i?i.length:0;if(i)for(r=0;r<a;r++)e=e.replace(i[r],T),o++;return function(t){for(var n=e,r=0;r<o;r++)n=n.replace(r<u?R:T,r<u?F(t[r]):s(t[r]));return n}},getAnimatableNone:function(t){var n=X.parse(t);return X.createTransformer(t)(n.map(P))}};S=function(t,n){if(!t)throw new Error(n)};var Y,_,q=0,L="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var n=Date.now(),r=Math.max(0,16.7-(n-q));q=n+r,setTimeout(function(){return t(q)},r)};(_=Y=Y||{}).Read="read",_.Update="update",_.Render="render",_.PostRender="postRender",_.FixedUpdate="fixedUpdate";function N(t){return pt=t}function B(t){return mt[t].process(lt)}function U(){return lt}function I(n){return function(t){return 1-n(1-t)}}function z(n){return function(t){return t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2}}function G(t){return t}function H(t){return"number"==typeof t}function W(t,n){return void 0===n&&(n=Ct),function(t){return 180*t/Math.PI}(Math.atan2(n.y-t.y,n.x-t.x))}function $(n,r){var e=!0;return void 0===r&&(r=n,e=!1),function(t){return e?t-n+r:(n=t,e=!0,r)}}function K(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")}function J(t){return K(t)&&t.hasOwnProperty("z")}function Q(t,n){return Math.abs(t-n)}function Z(t,n){if(void 0===n&&(n=Ct),H(t)&&H(n))return Q(t,n);if(K(t)&&K(n)){var r=Q(t.x,n.x),e=Q(t.y,n.y),o=J(t)&&J(n)?Q(t.z,n.z):0;return Math.sqrt(Math.pow(r,2)+Math.pow(e,2)+Math.pow(o,2))}return 0}function tt(t,n,r){var e=n-t;return 0==e?1:(r-t)/e}function nt(t,n,r){return-r*t+r*n+t}function rt(t,n,r){var e=t*t,o=n*n;return Math.sqrt(Math.max(0,r*(o-e)+e))}function et(n){return jt.find(function(t){return t.test(n)})}function ot(t){return"'"+t+"' is not an animatable color. Use the equivalent color code instead."}function ut(t,n){var r=et(t),e=et(n);S(!!r,ot(t)),S(!!e,ot(n)),S(r.transform===e.transform,"Both colors must be hex/RGBA, OR both must be HSLA.");var o=r.parse(t),u=e.parse(n),i=St({},o),a=r===k?nt:rt;return function(t){for(var n in i)"alpha"!==n&&(i[n]=a(o[n],u[n],t));return i.alpha=nt(o.alpha,u.alpha,t),r.transform(i)}}function it(n,r){return function(t){return r(n(t))}}function at(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.reduce(it)}var ct,st=1/60*1e3,ft=!0,pt=!1,dt=!1,lt={delta:0,timestamp:0},vt=[Y.Read,Y.Update,Y.Render,Y.PostRender],ht=vt.reduce(function(t,n){var e=function(e){var u=[],i=[],a=0,c=!1,o=0,s=new WeakSet,f=new WeakSet,p={cancel:function(t){var n=i.indexOf(t);s.add(t),-1!==n&&i.splice(n,1)},process:function(t){var n,r;if(c=!0,u=(n=[i,u])[0],(i=n[1]).length=0,a=u.length)for(o=0;o<a;o++)(r=u[o])(t),!0!==f.has(r)||s.has(r)||(p.schedule(r),e(!0));c=!1},schedule:function(t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),S("function"==typeof t,"Argument must be a function");var e=r&&c,o=e?u:i;s.delete(t),n&&f.add(t),-1===o.indexOf(t)&&(o.push(t),e&&(a=u.length))}};return p}(N);return t.sync[n]=function(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),pt||wt(),e.schedule(t,n,r),t},t.cancelSync[n]=function(t){return e.cancel(t)},t.steps[n]=e,t},{steps:{},sync:{},cancelSync:{}}),mt=ht.steps,yt=ht.sync,gt=ht.cancelSync,bt=function(t){pt=!1,lt.delta=ft?st:Math.max(Math.min(t-lt.timestamp,40),1),ft||(st=lt.delta),lt.timestamp=t,dt=!0,vt.forEach(B),dt=!1,pt&&(ft=!1,L(bt))},wt=function(){ft=pt=!0,dt||L(bt)},Ot=I,xt=function(n){return function(t){return Math.pow(t,n)}}(2),Mt=I(xt),At=z(xt),Ct={x:0,y:0,z:0},Pt=(ct=function(t,n,r){return Math.min(Math.max(r,t),n)},function(n,r,t){return void 0!==t?ct(n,r,t):function(t){return ct(n,r,t)}}),St=function(){return(St=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},jt=[V,j,k];function kt(t,r){var e=t.slice(),o=e.length,u=t.map(function(t,n){return function(n,r){return H(n)?function(t){return nt(n,r,t)}:E(n)?ut(n,r):Ft(n,r)}(t,r[n])});return function(t){for(var n=0;n<o;n++)e[n]=u[n](t);return e}}function Vt(t){for(var n=X.parse(t),r=n.length,e=0,o=0,u=0,i=0;i<r;i++)e||"number"==typeof n[i]?e++:void 0!==n[i].hue?u++:o++;return{parsed:n,numNumbers:e,numRGB:o,numHSL:u}}function Et(t,n){return H(t)?t/(1e3/n):0}function Dt(t,n){return n?t*(1e3/n):0}var Ft=function(t,n){var r=X.createTransformer(n),e=Vt(t),o=Vt(n);return S(e.numHSL===o.numHSL&&e.numRGB===o.numRGB&&e.numNumbers>=o.numNumbers,"Complex values '"+t+"' and '"+n+"' too different to mix. Ensure all colors are of the same type."),at(kt(e.parsed,o.parsed),r)},Rt=(Pt(0,1),Tt.prototype.create=function(t){return new Tt(t)},Tt.prototype.start=function(t){void 0===t&&(t={});var n=!1,r={stop:function(){}},e=this.props,o=e.init,u=c(e,["init"]),i=o(a(t,u,function(){n=!0,r.stop()}));return r=i?A({},r,i):r,n&&r.stop(),r},Tt.prototype.applyMiddleware=function(t){return this.create(A({},this.props,{middleware:this.props.middleware?[t].concat(this.props.middleware):[t]}))},Tt.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=1===t.length?t[0]:at.apply(void 0,t);return this.applyMiddleware(function(n){return function(t){return n(r(t))}})},Tt);function Tt(t){void 0===t&&(t={}),this.props=t}function Xt(t){return new Rt({init:t})}var Yt=(_t.prototype.applyMiddleware=function(t){return this.create(A({},this.props,{middleware:this.props.middleware?[t].concat(this.props.middleware):[t]}))},_t.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=1===t.length?t[0]:at.apply(void 0,t);return this.applyMiddleware(function(n){return function(t){return n(r(t))}})},_t.prototype.while=function(e){return this.applyMiddleware(function(n,r){return function(t){return e(t)?n(t):r()}})},_t.prototype.filter=function(r){return this.applyMiddleware(function(n){return function(t){return r(t)&&n(t)}})},_t);function _t(t){void 0===t&&(t={}),this.props=t}var qt,Lt=(n(Nt,qt=Yt),Nt.prototype.complete=function(){this.subscribers.forEach(function(t){return t.complete()})},Nt.prototype.error=function(n){this.subscribers.forEach(function(t){return t.error(n)})},Nt.prototype.update=function(t){for(var n=0;n<this.subscribers.length;n++)this.subscribers[n].update(t)},Nt.prototype.subscribe=function(t){var n=this,r=a(t,this.props);return this.subscribers.push(r),{unsubscribe:function(){var t=n.subscribers.indexOf(r);-1!==t&&n.subscribers.splice(t,1)}}},Nt.prototype.stop=function(){this.parent&&this.parent.stop()},Nt);function Nt(){var t=null!==qt&&qt.apply(this,arguments)||this;return t.subscribers=[],t}var Bt,Ut=(n(It,Bt=Lt),It.prototype.create=function(t){return new It(t)},It);function It(){return null!==Bt&&Bt.apply(this,arguments)||this}var zt,Gt=(n(Ht,zt=Lt),Ht.prototype.create=function(t){return new Ht(t)},Ht.prototype.get=function(){return this.current},Ht.prototype.getVelocity=function(){return this.getVelocityOfCurrent()},Ht.prototype.update=function(t){zt.prototype.update.call(this,t),this.prev=this.current,this.updateCurrent(t);var n=U(),r=n.delta,e=n.timestamp;this.timeDelta=r,this.lastUpdated=e,yt.postRender(this.scheduleVelocityCheck)},Ht.prototype.subscribe=function(t){var n=zt.prototype.subscribe.call(this,t);return this.subscribers[this.subscribers.length-1].update(this.current),n},Ht.prototype.getSingleVelocity=function(t,n){return"number"==typeof t&&"number"==typeof n?Dt(t-n,this.timeDelta):Dt(parseFloat(t)-parseFloat(n),this.timeDelta)||0},Ht.prototype.getListVelocity=function(){var r=this;return this.current.map(function(t,n){return r.getSingleVelocity(t,r.prev[n])})},Ht.prototype.getMapVelocity=function(){var t={};for(var n in this.current)this.current.hasOwnProperty(n)&&(t[n]=this.getSingleVelocity(this.current[n],this.prev[n]));return t},Ht);function Ht(t){var r=zt.call(this,t)||this;return r.scheduleVelocityCheck=function(){return yt.postRender(r.velocityCheck)},r.velocityCheck=function(t){t.timestamp!==r.lastUpdated&&(r.prev=r.current)},r.prev=r.current=t.value||0,!function(t){var n=typeof t;return"string"==n||"number"==n}(r.current)?!function(t){return Array.isArray(t)}(r.current)?(r.updateCurrent=function(t){for(var n in r.current={},t)t.hasOwnProperty(n)&&(r.current[n]=t[n])},r.getVelocityOfCurrent=function(){return r.getMapVelocity()}):(r.updateCurrent=function(t){return r.current=t.slice()},r.getVelocityOfCurrent=function(){return r.getListVelocity()}):(r.updateCurrent=function(t){return r.current=t},r.getVelocityOfCurrent=function(){return r.getSingleVelocity(r.current,r.prev)}),t.initialSubscription&&r.subscribe(t.initialSubscription),r}function Wt(t){var f=t.getCount,p=t.getFirst,d=t.getOutput,l=t.mapApi,v=t.setProp,h=t.startActions;return function(s){return Xt(function(t){function e(){return n(a)}var n=t.update,o=t.complete,u=t.error,i=f(s),a=d(),c=0,r=h(s,function(t,n){var r=!1;return t.start({complete:function(){r||(r=!0,++c===i&&yt.update(o))},error:u,update:function(t){v(a,n,t),yt.update(e,!1,!0)}})});return Object.keys(p(r)).reduce(function(t,n){return t[n]=l(r,n),t},{})})}}function $t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return pn(t)}function Kt(n){return dn.find(function(t){return t.test(n)})}function Jt(t,n){return t(n)}function Qt(e,o,u){var t=u[0],n=o[t].map(function(t,n){var r=u.reduce(function(r){return function(t,n){return t[n]=t[n][r],t}}(n),A({},o));return hn(t)(e,r)});return $t.apply(void 0,n)}function Zt(e,o,u){var i=u[0],t=Object.keys(o[i]).reduce(function(t,n){var r=u.reduce(function(r){return function(t,n){return t[n]=t[n][r],t}}(n),A({},o));return t[n]=hn(o[i][n])(e,r),t},{});return fn(t)}function tn(t,n){var r=n.from,e=n.to,o=c(n,["from","to"]),u=Kt(r)||Kt(e),i=u.transform,a=u.parse;return t(A({},o,{from:"string"==typeof r?a(r):r,to:"string"==typeof e?a(e):e})).pipe(i)}function nn(u){return function(t,n){var r=n.from,e=n.to,o=c(n,["from","to"]);return t(A({},o,{from:0,to:1})).pipe(u(r,e))}}function rn(e,t){var n=function(r){function e(t,n){return void 0!==t&&!r[n](t)}var t=Object.keys(r);return{getVectorKeys:function(r){return t.reduce(function(t,n){return e(r[n],n)&&t.push(n),t},[])},testVectorProps:function(n){return n&&t.some(function(t){return e(n[t],t)})}}}(t),o=n.testVectorProps,u=n.getVectorKeys;return function(t){if(!o(t))return e(t);var n=u(t),r=t[n[0]];return hn(r)(e,t,n)}}function en(T){return void 0===T&&(T={}),Xt(function(t){function r(t){var n;void 0===t&&(t=!1),D=bn({from:O=(n=[M,O])[0],to:M=n[1],ease:p,reverseEase:t}).start(i)}function e(){F=wn(tt(0,s,C)),D.seek(F)}function n(){R=!0,u=yt.update(function(t){var n=t.delta;C+=n,e(),function(){var t=R&&s+b<C;return!!t&&(!(!t||h||l||y)||(C=s-(C-b),h&&E<h?(E++,!1):l&&S<l?(S++,r(),!1):!(y&&k<y)||(r(++k%2!=0),!1)))}()&&(gt.update(u),a&&yt.update(a,!1,!0))},!0)}function o(){R=!1,u&&gt.update(u)}var u,i=t.update,a=t.complete,c=T.duration,s=void 0===c?300:c,f=T.ease,p=void 0===f?Mt:f,d=T.flip,l=void 0===d?0:d,v=T.loop,h=void 0===v?0:v,m=T.yoyo,y=void 0===m?0:m,g=T.repeatDelay,b=void 0===g?0:g,w=T.from,O=void 0===w?0:w,x=T.to,M=void 0===x?1:x,A=T.elapsed,C=void 0===A?0:A,P=T.flipCount,S=void 0===P?0:P,j=T.yoyoCount,k=void 0===j?0:j,V=T.loopCount,E=void 0===V?0:V,D=bn({from:O,to:M,ease:p}).start(i),F=0,R=!1;return n(),{isActive:function(){return R},getElapsed:function(){return Pt(0,s,C)},getProgress:function(){return F},stop:function(){o()},pause:function(){return o(),this},resume:function(){return R||n(),this},seek:function(t){return C=nt(0,s,t),yt.update(e,!1,!0),this},reverse:function(){return r(),this}}})}function on(t){var n=t.easings,r=t.ease,e=void 0===r?G:r,o=t.times,u=t.values,i=c(t,["easings","ease","times","values"]);n=Array.isArray(n)?n:function(t,n){return t.map(function(){return n||Mt}).splice(0,t.length-1)}(u,n),o=o||function(t){var r=t.length;return t.map(function(t,n){return 0!==n?n/(r-1):0})}(u);var a=n.map(function(t,n){return bn({from:u[n],to:u[n+1],ease:t})});return en(A({},i,{ease:e})).applyMiddleware(function(t){return function(e,t,n){var o=e.length,u=o-1,i=u-1,a=t.map(function(t){return t.start(n)});return function(t){t<=e[0]&&a[0].seek(0),t>=e[u]&&a[i].seek(1);for(var n=1;n<o&&!(e[n]>t||n===u);n++);var r=tt(e[n-1],e[n],t);a[n-1].seek(On(r))}}(o,a,t)})}function un(t,n){return Array.isArray(n)?t.push.apply(t,function(t){var e=[],n=t[t.length-1],r="number"==typeof n,o=r?n:0,u=r?t.slice(0,-1):t,i=u.length,a=0;return u.forEach(function(t,n){if(e.push(t),n!==i-1){var r=t.duration||300;a+=o,e.push("-"+(r-a))}}),e}(n)):t.push(n),t}function an(t,n,r){var e=t.duration,o=t.easings,u=t.times,i=t.values,a=i.length,c=u[a-1],s=0===n.at?0:n.at/e,f=(n.at+n.duration)/e;if(0===r)i.push(n.from),u.push(s);else if(c!==s){void 0!==n.from&&(i.push(i[a-1]),u.push(s),o.push(G));var p=void 0!==n.from?n.from:i[a-1];i.push(p),u.push(s),o.push(G)}else void 0!==n.from&&(i.push(n.from),u.push(s),o.push(G));return i.push(n.to),u.push(f),o.push(n.ease||At),t}function cn(e,o,u){return Xt(function(t){var n=t.update,r=o.split(" ").map(function(t){return e.addEventListener(t,n,u),t});return{stop:function(){return r.forEach(function(t){return e.removeEventListener(t,n,u)})}}})}function sn(t,n){return void 0===n&&(n={clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}),n.clientX=n.x=t.clientX,n.clientY=n.y=t.clientY,n.pageX=t.pageX,n.pageY=t.pageY,n}var fn=Wt({getOutput:function(){return{}},getCount:function(t){return Object.keys(t).length},getFirst:function(t){return t[Object.keys(t)[0]]},mapApi:function(o,u){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object.keys(o).reduce(function(t,n){var r;return o[n][u]&&(e[0]&&void 0!==e[0][n]?t[n]=o[n][u](e[0][n]):t[n]=(r=o[n])[u].apply(r,e)),t},{})}},setProp:function(t,n,r){return t[n]=r},startActions:function(r,e){return Object.keys(r).reduce(function(t,n){return t[n]=e(r[n],n),t},{})}}),pn=Wt({getOutput:function(){return[]},getCount:function(t){return t.length},getFirst:function(t){return t[0]},mapApi:function(n,e){return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return n.map(function(t,n){if(t[e])return Array.isArray(r[0])?t[e](r[0][n]):t[e].apply(t,r)})}},setProp:function(t,n,r){return t[n]=r},startActions:function(t,r){return t.map(function(t,n){return r(t,n)})}}),dn=[b,g,y,w,O],ln=nn(ut),vn=nn(Ft),hn=function(t){return"number"==typeof t?Jt:Array.isArray(t)?Qt:function(t){return Boolean(Kt(t))}(t)?tn:E(t)?ln:X.test(t)?vn:"object"==typeof t?Zt:Jt},mn=rn(function(b){return void 0===b&&(b={}),Xt(function(t){var o=t.complete,u=t.update,n=b.velocity,r=void 0===n?0:n,e=b.from,i=void 0===e?0:e,a=b.power,c=void 0===a?.8:a,s=b.timeConstant,f=void 0===s?350:s,p=b.restDelta,d=void 0===p?.5:p,l=b.modifyTarget,v=0,h=c*r,m=Math.round(i+h),y=void 0===l?m:l(m),g=yt.update(function(t){var n=t.delta;v+=n;var r=-h*Math.exp(-v/f),e=d<r||r<-d;u(e?y+r:y),e||(gt.update(g),o())},!0);return{stop:function(){return gt.update(g)}}})},{from:m.test,modifyTarget:function(t){return"function"==typeof t},velocity:m.test}),yn=rn(function(C){return void 0===C&&(C={}),Xt(function(t){var c=t.update,s=t.complete,n=C.velocity,f=void 0===n?0:n,r=C.from,e=void 0===r?0:r,o=C.to,p=void 0===o?0:o,u=C.stiffness,d=void 0===u?100:u,i=C.damping,l=void 0===i?10:i,a=C.mass,v=void 0===a?1:a,h=C.restSpeed,m=void 0===h?.01:h,y=C.restDelta,g=void 0===y?.01:y,b=f?-f/1e3:0,w=0,O=p-e,x=e,M=x,A=yt.update(function(t){var n=t.delta;w+=n;var r=l/(2*Math.sqrt(d*v)),e=Math.sqrt(d/v)/1e3;if(M=x,r<1){var o=Math.exp(-r*e*w),u=e*Math.sqrt(1-r*r);x=p-o*((b+r*e*O)/u*Math.sin(u*w)+O*Math.cos(u*w))}else{o=Math.exp(-e*w);x=p-o*(O+(b+e*O)*w)}f=Dt(x-M,n);var i=Math.abs(f)<=m,a=Math.abs(p-x)<=g;i&&a?(c(x=p),gt.update(A),s()):c(x)},!0);return{stop:function(){return gt.update(A)}}})},{from:m.test,to:m.test,stiffness:m.test,damping:m.test,mass:m.test,velocity:m.test}),gn=rn(function(t){var n=t.from,h=void 0===n?0:n,m=(t.velocity,t.min),y=t.max,r=t.power,g=void 0===r?.8:r,e=t.timeConstant,b=void 0===e?700:e,o=t.bounceStiffness,w=void 0===o?500:o,u=t.bounceDamping,O=void 0===u?10:u,i=t.restDelta,x=void 0===i?1:i,M=t.modifyTarget;return Xt(function(t){function r(t){return void 0!==m&&t<=m}function e(t){return void 0!==y&&y<=t}function n(t){return r(t)||e(t)}function o(t){a(t),s=f,p=Dt((f=t)-s,U().delta),i&&!d&&function(t,n){return r(t)&&n<0||e(t)&&0<n}(t,p)&&l({from:t,velocity:p})}function u(t,n){i&&i.stop(),i=t.start({update:o,complete:function(){n?n():c()}})}var i,a=t.update,c=t.complete,s=h,f=h,p=0,d=!1,l=function(t){d=!0,u(yn(A({},t,{to:r(t.from)?m:y,stiffness:w,damping:O,restDelta:x})))};if(n(h))l({from:h,velocity:p});else if(0!==p){var v=mn({from:h,velocity:p,timeConstant:b,power:g,restDelta:n(h)?20:x,modifyTarget:M});u(v,function(){n(f)?l({from:f,velocity:p}):c()})}else c();return{stop:function(){return i&&i.stop()}}})},{from:m.test,velocity:m.test,min:m.test,max:m.test,damping:m.test,stiffness:m.test,modifyTarget:function(t){return"function"==typeof t}}),bn=rn(function(t){var n=t.from,r=void 0===n?0:n,e=t.to,o=void 0===e?1:e,u=t.ease,i=void 0===u?G:u,a=t.reverseEase;return void 0!==a&&a&&(i=Ot(i)),Xt(function(t){var n=t.update;return{seek:function(t){return n(t)}}}).pipe(i,function(t){return nt(r,o,t)})},{ease:function(t){return"function"==typeof t},from:m.test,to:m.test}),wn=Pt(0,1),On=Pt(0,1),xn=rn(function(m){return void 0===m&&(m={}),Xt(function(t){var e=t.complete,o=t.update,n=m.acceleration,u=void 0===n?0:n,r=m.friction,i=void 0===r?0:r,a=m.velocity,c=void 0===a?0:a,s=m.springStrength,f=m.to,p=m.restSpeed,d=void 0===p?.001:p,l=m.from,v=void 0===l?0:l,h=yt.update(function(t){var n=t.delta,r=Math.max(n,16);u&&(c+=Et(u,r)),i&&(c*=Math.pow(1-i,r/100)),void 0!==s&&void 0!==f&&(c+=(f-v)*Et(s,r));v+=Et(c,r),o(v),!1!==d&&(!c||Math.abs(c)<=d)&&(gt.update(h),e())},!0);return{set:function(t){return v=t,this},setAcceleration:function(t){return u=t,this},setFriction:function(t){return i=t,this},setSpringStrength:function(t){return s=t,this},setSpringTarget:function(t){return f=t,this},setVelocity:function(t){return c=t,this},stop:function(){return gt.update(h)}}})},{acceleration:m.test,friction:m.test,velocity:m.test,from:m.test,to:m.test,springStrength:m.test}),Mn=[{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}],An=!1;if("undefined"!=typeof document){cn(document,"touchstart touchmove",{passive:!0,capture:!0}).start(function(t){var n=t.touches;An=!0;for(var r=n.length,e=Mn.length=0;e<r;e++){var o=n[e];Mn.push(sn(o))}})}function Cn(t){var n=void 0===t?{}:t,r=n.preventDefault,f=void 0===r||r,e=n.scale,p=void 0===e?1:e,o=n.rotate,d=void 0===o?0:o;return Xt(function(t){var o=t.update,u={touches:Mn,scale:p,rotate:d},i=0,a=0,c=1<Mn.length;if(c){var n=Mn[0],r=Mn[1];i=Z(n,r),a=W(n,r)}function e(){if(c){var t=Mn[0],n=Mn[1],r=Z(t,n),e=W(t,n);u.scale=p*(r/i),u.rotate=d+(e-a)}o(u)}var s=cn(document,"touchmove",{passive:!f}).start(function(t){(f||1<t.touches.length)&&t.preventDefault(),yt.update(e)});return An&&yt.update(e),{stop:function(){gt.update(e),s.stop()}}})}var Pn={clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0},Sn=!1;if("undefined"!=typeof document){cn(document,"mousedown mousemove",!0).start(function(t){Sn=!0,sn(t,Pn)})}function jn(t){var n=(void 0===t?{}:t).preventDefault,o=void 0===n||n;return Xt(function(t){function n(){return r(Pn)}var r=t.update,e=cn(document,"mousemove").start(function(t){o&&t.preventDefault(),yt.update(n)});return Sn&&yt.update(n),{stop:function(){gt.update(n),e.stop()}}})}function kn(t){return t[0]}function Vn(t){return void 0===t&&(t={}),An?Cn(t).pipe(function(t){return t.touches},kn):jn(t)}function En(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return Xt(function(t){var n,r=t.update,e=t.complete,o=0,u=function(){n=i[o].start({complete:function(){++o>=i.length?e():u()},update:r})};return u(),{stop:function(){return n&&n.stop()}}})}function Dn(e){return Xt(function(t){var n=t.complete,r=setTimeout(n,e);return{stop:function(){return clearTimeout(r)}}})}t.Action=Rt,t.ValueReaction=Gt,t.action=Xt,t.chain=En,t.composite=fn,t.crossfade=function(n,r){return Xt(function(e){var o=0,t=$t(n,r).start(A({},e,{update:function(t){var n=t[0],r=t[1];e.update(nt(n,r,o))}}));return{setBalance:function(t){return o=t},stop:function(){return t.stop()}}})},t.decay=mn,t.delay=Dn,t.everyFrame=function(){return Xt(function(t){var r=t.update,e=0,n=yt.update(function(t){var n=t.timestamp;r(n-(e=e||n))},!0,!0);return{stop:function(){return gt.update(n)}}})},t.inertia=gn,t.keyframes=on,t.listen=cn,t.merge=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return Xt(function(n){var t=r.map(function(t){return t.start(n)});return{stop:function(){return t.forEach(function(t){return t.stop()})}}})},t.mouse=jn,t.multicast=function(){return new Ut},t.multitouch=Cn,t.parallel=$t,t.physics=xn,t.pointer=function(t){void 0===t&&(t={});var n=t.x,r=t.y,e=c(t,["x","y"]);if(void 0===n&&void 0===r)return Vn(e);var o=$(n||0),u=$(r||0),i={x:0,y:0};return Vn(e).pipe(function(t){return i.x=o(t.x),i.y=u(t.y),i})},t.schedule=function(i,a){return Xt(function(t){var n,r=t.update,e=t.complete,o=i.start({update:function(){return void 0!==n&&r(n)},complete:e}),u=a.start({update:function(t){return n=t},complete:e});return{stop:function(){o.stop(),u.stop()}}})},t.spring=yn,t.stagger=function(t,e){var o="number"==typeof e,n=t.map(function(t,n){var r=o?e*n:e(n);return En(Dn(r),t)});return $t.apply(void 0,n)},t.styler=function(){return S(!1,"styler has been removed from Popmotion in 9.0. Downgrade to 8.x or npm install stylefire")},t.timeline=function(t,n){var r=void 0===n?{}:n,e=r.duration,o=r.elapsed,u=r.ease,i=r.loop,a=r.flip,c=r.yoyo,s=0,f=0,p=t.reduce(un,[]),d=[];p.forEach(function(t){if("string"==typeof t)s+=parseFloat(t);else if("number"==typeof t)s=t;else{var n=A({},t,{at:s});n.duration=void 0===n.duration?300:n.duration,d.push(n),s+=n.duration,f=Math.max(f,n.at+n.duration)}});for(var l={},v=d.length,h=0;h<v;h++){var m=d[h],y=m.track;if(void 0===y)throw new Error("No track defined");l.hasOwnProperty(y)||(l[y]=[]),l[y].push(m)}var g={};for(var b in l)if(l.hasOwnProperty(b)){var w=l[b].reduce(an,{duration:f,easings:[],times:[],values:[]});g[b]=on(A({},w,{duration:e||f,ease:u,elapsed:o,loop:i,yoyo:c,flip:a}))}return fn(g)},t.tween=en,t.value=function(t,n){return new Gt({value:t,initialSubscription:n})},Object.defineProperty(t,"__esModule",{value:!0})});
